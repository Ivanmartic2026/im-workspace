var UT=e=>{throw TypeError(e)};var p2=(e,t,r)=>t.has(e)||UT("Cannot "+r);var Me=(e,t,r)=>(p2(e,t,"read from private field"),r?r.call(e):t.get(e)),hn=(e,t,r)=>t.has(e)?UT("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Wt=(e,t,r,s)=>(p2(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),Jn=(e,t,r)=>(p2(e,t,"access private method"),r);var Wy=(e,t,r,s)=>({set _(a){Wt(e,t,a,r)},get _(){return Me(e,t,s)}});function MZ(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Ky=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var x2={exports:{}},e0={},g2={exports:{}},dr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HT;function LZ(){if(HT)return dr;HT=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.iterator;function g(ae){return ae===null||typeof ae!="object"?null:(ae=h&&ae[h]||ae["@@iterator"],typeof ae=="function"?ae:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,y={};function v(ae,G,te){this.props=ae,this.context=G,this.refs=y,this.updater=te||x}v.prototype.isReactComponent={},v.prototype.setState=function(ae,G){if(typeof ae!="object"&&typeof ae!="function"&&ae!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ae,G,"setState")},v.prototype.forceUpdate=function(ae){this.updater.enqueueForceUpdate(this,ae,"forceUpdate")};function j(){}j.prototype=v.prototype;function w(ae,G,te){this.props=ae,this.context=G,this.refs=y,this.updater=te||x}var N=w.prototype=new j;N.constructor=w,b(N,v.prototype),N.isPureReactComponent=!0;var A=Array.isArray,C=Object.prototype.hasOwnProperty,M={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function F(ae,G,te){var fe,be={},xe=null,we=null;if(G!=null)for(fe in G.ref!==void 0&&(we=G.ref),G.key!==void 0&&(xe=""+G.key),G)C.call(G,fe)&&!I.hasOwnProperty(fe)&&(be[fe]=G[fe]);var Pe=arguments.length-2;if(Pe===1)be.children=te;else if(1<Pe){for(var _e=Array(Pe),Ve=0;Ve<Pe;Ve++)_e[Ve]=arguments[Ve+2];be.children=_e}if(ae&&ae.defaultProps)for(fe in Pe=ae.defaultProps,Pe)be[fe]===void 0&&(be[fe]=Pe[fe]);return{$$typeof:e,type:ae,key:xe,ref:we,props:be,_owner:M.current}}function U(ae,G){return{$$typeof:e,type:ae.type,key:G,ref:ae.ref,props:ae.props,_owner:ae._owner}}function W(ae){return typeof ae=="object"&&ae!==null&&ae.$$typeof===e}function D(ae){var G={"=":"=0",":":"=2"};return"$"+ae.replace(/[=:]/g,function(te){return G[te]})}var R=/\/+/g;function z(ae,G){return typeof ae=="object"&&ae!==null&&ae.key!=null?D(""+ae.key):G.toString(36)}function Z(ae,G,te,fe,be){var xe=typeof ae;(xe==="undefined"||xe==="boolean")&&(ae=null);var we=!1;if(ae===null)we=!0;else switch(xe){case"string":case"number":we=!0;break;case"object":switch(ae.$$typeof){case e:case t:we=!0}}if(we)return we=ae,be=be(we),ae=fe===""?"."+z(we,0):fe,A(be)?(te="",ae!=null&&(te=ae.replace(R,"$&/")+"/"),Z(be,G,te,"",function(Ve){return Ve})):be!=null&&(W(be)&&(be=U(be,te+(!be.key||we&&we.key===be.key?"":(""+be.key).replace(R,"$&/")+"/")+ae)),G.push(be)),1;if(we=0,fe=fe===""?".":fe+":",A(ae))for(var Pe=0;Pe<ae.length;Pe++){xe=ae[Pe];var _e=fe+z(xe,Pe);we+=Z(xe,G,te,_e,be)}else if(_e=g(ae),typeof _e=="function")for(ae=_e.call(ae),Pe=0;!(xe=ae.next()).done;)xe=xe.value,_e=fe+z(xe,Pe++),we+=Z(xe,G,te,_e,be);else if(xe==="object")throw G=String(ae),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(ae).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return we}function se(ae,G,te){if(ae==null)return ae;var fe=[],be=0;return Z(ae,fe,"","",function(xe){return G.call(te,xe,be++)}),fe}function J(ae){if(ae._status===-1){var G=ae._result;G=G(),G.then(function(te){(ae._status===0||ae._status===-1)&&(ae._status=1,ae._result=te)},function(te){(ae._status===0||ae._status===-1)&&(ae._status=2,ae._result=te)}),ae._status===-1&&(ae._status=0,ae._result=G)}if(ae._status===1)return ae._result.default;throw ae._result}var Q={current:null},H={transition:null},ne={ReactCurrentDispatcher:Q,ReactCurrentBatchConfig:H,ReactCurrentOwner:M};function ue(){throw Error("act(...) is not supported in production builds of React.")}return dr.Children={map:se,forEach:function(ae,G,te){se(ae,function(){G.apply(this,arguments)},te)},count:function(ae){var G=0;return se(ae,function(){G++}),G},toArray:function(ae){return se(ae,function(G){return G})||[]},only:function(ae){if(!W(ae))throw Error("React.Children.only expected to receive a single React element child.");return ae}},dr.Component=v,dr.Fragment=r,dr.Profiler=a,dr.PureComponent=w,dr.StrictMode=s,dr.Suspense=c,dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,dr.act=ue,dr.cloneElement=function(ae,G,te){if(ae==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ae+".");var fe=b({},ae.props),be=ae.key,xe=ae.ref,we=ae._owner;if(G!=null){if(G.ref!==void 0&&(xe=G.ref,we=M.current),G.key!==void 0&&(be=""+G.key),ae.type&&ae.type.defaultProps)var Pe=ae.type.defaultProps;for(_e in G)C.call(G,_e)&&!I.hasOwnProperty(_e)&&(fe[_e]=G[_e]===void 0&&Pe!==void 0?Pe[_e]:G[_e])}var _e=arguments.length-2;if(_e===1)fe.children=te;else if(1<_e){Pe=Array(_e);for(var Ve=0;Ve<_e;Ve++)Pe[Ve]=arguments[Ve+2];fe.children=Pe}return{$$typeof:e,type:ae.type,key:be,ref:xe,props:fe,_owner:we}},dr.createContext=function(ae){return ae={$$typeof:o,_currentValue:ae,_currentValue2:ae,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ae.Provider={$$typeof:i,_context:ae},ae.Consumer=ae},dr.createElement=F,dr.createFactory=function(ae){var G=F.bind(null,ae);return G.type=ae,G},dr.createRef=function(){return{current:null}},dr.forwardRef=function(ae){return{$$typeof:l,render:ae}},dr.isValidElement=W,dr.lazy=function(ae){return{$$typeof:u,_payload:{_status:-1,_result:ae},_init:J}},dr.memo=function(ae,G){return{$$typeof:d,type:ae,compare:G===void 0?null:G}},dr.startTransition=function(ae){var G=H.transition;H.transition={};try{ae()}finally{H.transition=G}},dr.unstable_act=ue,dr.useCallback=function(ae,G){return Q.current.useCallback(ae,G)},dr.useContext=function(ae){return Q.current.useContext(ae)},dr.useDebugValue=function(){},dr.useDeferredValue=function(ae){return Q.current.useDeferredValue(ae)},dr.useEffect=function(ae,G){return Q.current.useEffect(ae,G)},dr.useId=function(){return Q.current.useId()},dr.useImperativeHandle=function(ae,G,te){return Q.current.useImperativeHandle(ae,G,te)},dr.useInsertionEffect=function(ae,G){return Q.current.useInsertionEffect(ae,G)},dr.useLayoutEffect=function(ae,G){return Q.current.useLayoutEffect(ae,G)},dr.useMemo=function(ae,G){return Q.current.useMemo(ae,G)},dr.useReducer=function(ae,G,te){return Q.current.useReducer(ae,G,te)},dr.useRef=function(ae){return Q.current.useRef(ae)},dr.useState=function(ae){return Q.current.useState(ae)},dr.useSyncExternalStore=function(ae,G,te){return Q.current.useSyncExternalStore(ae,G,te)},dr.useTransition=function(){return Q.current.useTransition()},dr.version="18.3.1",dr}var WT;function uj(){return WT||(WT=1,g2.exports=LZ()),g2.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KT;function DZ(){if(KT)return e0;KT=1;var e=uj(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,d){var u,h={},g=null,x=null;d!==void 0&&(g=""+d),c.key!==void 0&&(g=""+c.key),c.ref!==void 0&&(x=c.ref);for(u in c)s.call(c,u)&&!i.hasOwnProperty(u)&&(h[u]=c[u]);if(l&&l.defaultProps)for(u in c=l.defaultProps,c)h[u]===void 0&&(h[u]=c[u]);return{$$typeof:t,type:l,key:g,ref:x,props:h,_owner:a.current}}return e0.Fragment=r,e0.jsx=o,e0.jsxs=o,e0}var GT;function IZ(){return GT||(GT=1,x2.exports=DZ()),x2.exports}var n=IZ(),P=uj();const Te=Dr(P),QP=MZ({__proto__:null,default:Te},[P]);var Gy={},v2={exports:{}},ol={},y2={exports:{}},b2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZT;function RZ(){return ZT||(ZT=1,(function(e){function t(H,ne){var ue=H.length;H.push(ne);e:for(;0<ue;){var ae=ue-1>>>1,G=H[ae];if(0<a(G,ne))H[ae]=ne,H[ue]=G,ue=ae;else break e}}function r(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var ne=H[0],ue=H.pop();if(ue!==ne){H[0]=ue;e:for(var ae=0,G=H.length,te=G>>>1;ae<te;){var fe=2*(ae+1)-1,be=H[fe],xe=fe+1,we=H[xe];if(0>a(be,ue))xe<G&&0>a(we,be)?(H[ae]=we,H[xe]=ue,ae=xe):(H[ae]=be,H[fe]=ue,ae=fe);else if(xe<G&&0>a(we,ue))H[ae]=we,H[xe]=ue,ae=xe;else break e}}return ne}function a(H,ne){var ue=H.sortIndex-ne.sortIndex;return ue!==0?ue:H.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,g=3,x=!1,b=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(H){for(var ne=r(d);ne!==null;){if(ne.callback===null)s(d);else if(ne.startTime<=H)s(d),ne.sortIndex=ne.expirationTime,t(c,ne);else break;ne=r(d)}}function A(H){if(y=!1,N(H),!b)if(r(c)!==null)b=!0,J(C);else{var ne=r(d);ne!==null&&Q(A,ne.startTime-H)}}function C(H,ne){b=!1,y&&(y=!1,j(F),F=-1),x=!0;var ue=g;try{for(N(ne),h=r(c);h!==null&&(!(h.expirationTime>ne)||H&&!D());){var ae=h.callback;if(typeof ae=="function"){h.callback=null,g=h.priorityLevel;var G=ae(h.expirationTime<=ne);ne=e.unstable_now(),typeof G=="function"?h.callback=G:h===r(c)&&s(c),N(ne)}else s(c);h=r(c)}if(h!==null)var te=!0;else{var fe=r(d);fe!==null&&Q(A,fe.startTime-ne),te=!1}return te}finally{h=null,g=ue,x=!1}}var M=!1,I=null,F=-1,U=5,W=-1;function D(){return!(e.unstable_now()-W<U)}function R(){if(I!==null){var H=e.unstable_now();W=H;var ne=!0;try{ne=I(!0,H)}finally{ne?z():(M=!1,I=null)}}else M=!1}var z;if(typeof w=="function")z=function(){w(R)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,se=Z.port2;Z.port1.onmessage=R,z=function(){se.postMessage(null)}}else z=function(){v(R,0)};function J(H){I=H,M||(M=!0,z())}function Q(H,ne){F=v(function(){H(e.unstable_now())},ne)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){b||x||(b=!0,J(C))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(H){switch(g){case 1:case 2:case 3:var ne=3;break;default:ne=g}var ue=g;g=ne;try{return H()}finally{g=ue}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,ne){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ue=g;g=H;try{return ne()}finally{g=ue}},e.unstable_scheduleCallback=function(H,ne,ue){var ae=e.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?ae+ue:ae):ue=ae,H){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ue+G,H={id:u++,callback:ne,priorityLevel:H,startTime:ue,expirationTime:G,sortIndex:-1},ue>ae?(H.sortIndex=ue,t(d,H),r(c)===null&&H===r(d)&&(y?(j(F),F=-1):y=!0,Q(A,ue-ae))):(H.sortIndex=G,t(c,H),b||x||(b=!0,J(C))),H},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(H){var ne=g;return function(){var ue=g;g=ne;try{return H.apply(this,arguments)}finally{g=ue}}}})(b2)),b2}var YT;function FZ(){return YT||(YT=1,y2.exports=RZ()),y2.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XT;function $Z(){if(XT)return ol;XT=1;var e=uj(),t=FZ();function r(f){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+f,k=1;k<arguments.length;k++)p+="&args[]="+encodeURIComponent(arguments[k]);return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function i(f,p){o(f,p),o(f+"Capture",p)}function o(f,p){for(a[f]=p,f=0;f<p.length;f++)s.add(p[f])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},h={};function g(f){return c.call(h,f)?!0:c.call(u,f)?!1:d.test(f)?h[f]=!0:(u[f]=!0,!1)}function x(f,p,k,E){if(k!==null&&k.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return E?!1:k!==null?!k.acceptsBooleans:(f=f.toLowerCase().slice(0,5),f!=="data-"&&f!=="aria-");default:return!1}}function b(f,p,k,E){if(p===null||typeof p>"u"||x(f,p,k,E))return!0;if(E)return!1;if(k!==null)switch(k.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function y(f,p,k,E,q,K,le){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=E,this.attributeNamespace=q,this.mustUseProperty=k,this.propertyName=f,this.type=p,this.sanitizeURL=K,this.removeEmptyString=le}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(f){v[f]=new y(f,0,!1,f,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(f){var p=f[0];v[p]=new y(p,1,!1,f[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(f){v[f]=new y(f,2,!1,f.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(f){v[f]=new y(f,2,!1,f,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(f){v[f]=new y(f,3,!1,f.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(f){v[f]=new y(f,3,!0,f,null,!1,!1)}),["capture","download"].forEach(function(f){v[f]=new y(f,4,!1,f,null,!1,!1)}),["cols","rows","size","span"].forEach(function(f){v[f]=new y(f,6,!1,f,null,!1,!1)}),["rowSpan","start"].forEach(function(f){v[f]=new y(f,5,!1,f.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function w(f){return f[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(f){var p=f.replace(j,w);v[p]=new y(p,1,!1,f,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(f){var p=f.replace(j,w);v[p]=new y(p,1,!1,f,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(f){var p=f.replace(j,w);v[p]=new y(p,1,!1,f,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(f){v[f]=new y(f,1,!1,f.toLowerCase(),null,!1,!1)}),v.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(f){v[f]=new y(f,1,!1,f.toLowerCase(),null,!0,!0)});function N(f,p,k,E){var q=v.hasOwnProperty(p)?v[p]:null;(q!==null?q.type!==0:E||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(b(p,k,q,E)&&(k=null),E||q===null?g(p)&&(k===null?f.removeAttribute(p):f.setAttribute(p,""+k)):q.mustUseProperty?f[q.propertyName]=k===null?q.type===3?!1:"":k:(p=q.attributeName,E=q.attributeNamespace,k===null?f.removeAttribute(p):(q=q.type,k=q===3||q===4&&k===!0?"":""+k,E?f.setAttributeNS(E,p,k):f.setAttribute(p,k))))}var A=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C=Symbol.for("react.element"),M=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),D=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),Q=Symbol.for("react.offscreen"),H=Symbol.iterator;function ne(f){return f===null||typeof f!="object"?null:(f=H&&f[H]||f["@@iterator"],typeof f=="function"?f:null)}var ue=Object.assign,ae;function G(f){if(ae===void 0)try{throw Error()}catch(k){var p=k.stack.trim().match(/\n( *(at )?)/);ae=p&&p[1]||""}return`
`+ae+f}var te=!1;function fe(f,p){if(!f||te)return"";te=!0;var k=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(et){var E=et}Reflect.construct(f,[],p)}else{try{p.call()}catch(et){E=et}f.call(p.prototype)}else{try{throw Error()}catch(et){E=et}f()}}catch(et){if(et&&E&&typeof et.stack=="string"){for(var q=et.stack.split(`
`),K=E.stack.split(`
`),le=q.length-1,Ae=K.length-1;1<=le&&0<=Ae&&q[le]!==K[Ae];)Ae--;for(;1<=le&&0<=Ae;le--,Ae--)if(q[le]!==K[Ae]){if(le!==1||Ae!==1)do if(le--,Ae--,0>Ae||q[le]!==K[Ae]){var Fe=`
`+q[le].replace(" at new "," at ");return f.displayName&&Fe.includes("<anonymous>")&&(Fe=Fe.replace("<anonymous>",f.displayName)),Fe}while(1<=le&&0<=Ae);break}}}finally{te=!1,Error.prepareStackTrace=k}return(f=f?f.displayName||f.name:"")?G(f):""}function be(f){switch(f.tag){case 5:return G(f.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return f=fe(f.type,!1),f;case 11:return f=fe(f.type.render,!1),f;case 1:return f=fe(f.type,!0),f;default:return""}}function xe(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case I:return"Fragment";case M:return"Portal";case U:return"Profiler";case F:return"StrictMode";case z:return"Suspense";case Z:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case D:return(f.displayName||"Context")+".Consumer";case W:return(f._context.displayName||"Context")+".Provider";case R:var p=f.render;return f=f.displayName,f||(f=p.displayName||p.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case se:return p=f.displayName||null,p!==null?p:xe(f.type)||"Memo";case J:p=f._payload,f=f._init;try{return xe(f(p))}catch{}}return null}function we(f){var p=f.type;switch(f.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=p.render,f=f.displayName||f.name||"",p.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(p);case 8:return p===F?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function Pe(f){switch(typeof f){case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function _e(f){var p=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Ve(f){var p=_e(f)?"checked":"value",k=Object.getOwnPropertyDescriptor(f.constructor.prototype,p),E=""+f[p];if(!f.hasOwnProperty(p)&&typeof k<"u"&&typeof k.get=="function"&&typeof k.set=="function"){var q=k.get,K=k.set;return Object.defineProperty(f,p,{configurable:!0,get:function(){return q.call(this)},set:function(le){E=""+le,K.call(this,le)}}),Object.defineProperty(f,p,{enumerable:k.enumerable}),{getValue:function(){return E},setValue:function(le){E=""+le},stopTracking:function(){f._valueTracker=null,delete f[p]}}}}function Ue(f){f._valueTracker||(f._valueTracker=Ve(f))}function Le(f){if(!f)return!1;var p=f._valueTracker;if(!p)return!0;var k=p.getValue(),E="";return f&&(E=_e(f)?f.checked?"true":"false":f.value),f=E,f!==k?(p.setValue(f),!0):!1}function dt(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}function xt(f,p){var k=p.checked;return ue({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:k??f._wrapperState.initialChecked})}function Xe(f,p){var k=p.defaultValue==null?"":p.defaultValue,E=p.checked!=null?p.checked:p.defaultChecked;k=Pe(p.value!=null?p.value:k),f._wrapperState={initialChecked:E,initialValue:k,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function ke(f,p){p=p.checked,p!=null&&N(f,"checked",p,!1)}function Bt(f,p){ke(f,p);var k=Pe(p.value),E=p.type;if(k!=null)E==="number"?(k===0&&f.value===""||f.value!=k)&&(f.value=""+k):f.value!==""+k&&(f.value=""+k);else if(E==="submit"||E==="reset"){f.removeAttribute("value");return}p.hasOwnProperty("value")?mt(f,p.type,k):p.hasOwnProperty("defaultValue")&&mt(f,p.type,Pe(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(f.defaultChecked=!!p.defaultChecked)}function Ft(f,p,k){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var E=p.type;if(!(E!=="submit"&&E!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+f._wrapperState.initialValue,k||p===f.value||(f.value=p),f.defaultValue=p}k=f.name,k!==""&&(f.name=""),f.defaultChecked=!!f._wrapperState.initialChecked,k!==""&&(f.name=k)}function mt(f,p,k){(p!=="number"||dt(f.ownerDocument)!==f)&&(k==null?f.defaultValue=""+f._wrapperState.initialValue:f.defaultValue!==""+k&&(f.defaultValue=""+k))}var yt=Array.isArray;function Tt(f,p,k,E){if(f=f.options,p){p={};for(var q=0;q<k.length;q++)p["$"+k[q]]=!0;for(k=0;k<f.length;k++)q=p.hasOwnProperty("$"+f[k].value),f[k].selected!==q&&(f[k].selected=q),q&&E&&(f[k].defaultSelected=!0)}else{for(k=""+Pe(k),p=null,q=0;q<f.length;q++){if(f[q].value===k){f[q].selected=!0,E&&(f[q].defaultSelected=!0);return}p!==null||f[q].disabled||(p=f[q])}p!==null&&(p.selected=!0)}}function St(f,p){if(p.dangerouslySetInnerHTML!=null)throw Error(r(91));return ue({},p,{value:void 0,defaultValue:void 0,children:""+f._wrapperState.initialValue})}function Kt(f,p){var k=p.value;if(k==null){if(k=p.children,p=p.defaultValue,k!=null){if(p!=null)throw Error(r(92));if(yt(k)){if(1<k.length)throw Error(r(93));k=k[0]}p=k}p==null&&(p=""),k=p}f._wrapperState={initialValue:Pe(k)}}function mn(f,p){var k=Pe(p.value),E=Pe(p.defaultValue);k!=null&&(k=""+k,k!==f.value&&(f.value=k),p.defaultValue==null&&f.defaultValue!==k&&(f.defaultValue=k)),E!=null&&(f.defaultValue=""+E)}function jn(f){var p=f.textContent;p===f._wrapperState.initialValue&&p!==""&&p!==null&&(f.value=p)}function Ln(f){switch(f){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wn(f,p){return f==null||f==="http://www.w3.org/1999/xhtml"?Ln(p):f==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":f}var lr,pn=(function(f){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,k,E,q){MSApp.execUnsafeLocalFunction(function(){return f(p,k,E,q)})}:f})(function(f,p){if(f.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in f)f.innerHTML=p;else{for(lr=lr||document.createElement("div"),lr.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=lr.firstChild;f.firstChild;)f.removeChild(f.firstChild);for(;p.firstChild;)f.appendChild(p.firstChild)}});function Tn(f,p){if(p){var k=f.firstChild;if(k&&k===f.lastChild&&k.nodeType===3){k.nodeValue=p;return}}f.textContent=p}var It={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vs=["Webkit","ms","Moz","O"];Object.keys(It).forEach(function(f){Vs.forEach(function(p){p=p+f.charAt(0).toUpperCase()+f.substring(1),It[p]=It[f]})});function Qn(f,p,k){return p==null||typeof p=="boolean"||p===""?"":k||typeof p!="number"||p===0||It.hasOwnProperty(f)&&It[f]?(""+p).trim():p+"px"}function Na(f,p){f=f.style;for(var k in p)if(p.hasOwnProperty(k)){var E=k.indexOf("--")===0,q=Qn(k,p[k],E);k==="float"&&(k="cssFloat"),E?f.setProperty(k,q):f[k]=q}}var gr=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ur(f,p){if(p){if(gr[f]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(r(137,f));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(r(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(r(61))}if(p.style!=null&&typeof p.style!="object")throw Error(r(62))}}function Nr(f,p){if(f.indexOf("-")===-1)return typeof p.is=="string";switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nr=null;function $a(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var kr=null,rs=null,Ts=null;function Br(f){if(f=ac(f)){if(typeof kr!="function")throw Error(r(280));var p=f.stateNode;p&&(p=$u(p),kr(f.stateNode,f.type,p))}}function Oe(f){rs?Ts?Ts.push(f):Ts=[f]:rs=f}function ot(){if(rs){var f=rs,p=Ts;if(Ts=rs=null,Br(f),p)for(f=0;f<p.length;f++)Br(p[f])}}function an(f,p){return f(p)}function on(){}var Kn=!1;function ss(f,p,k){if(Kn)return f(p,k);Kn=!0;try{return an(f,p,k)}finally{Kn=!1,(rs!==null||Ts!==null)&&(on(),ot())}}function Ut(f,p){var k=f.stateNode;if(k===null)return null;var E=$u(k);if(E===null)return null;k=E[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(f=f.type,E=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!E;break e;default:f=!1}if(f)return null;if(k&&typeof k!="function")throw Error(r(231,p,typeof k));return k}var es=!1;if(l)try{var hs={};Object.defineProperty(hs,"passive",{get:function(){es=!0}}),window.addEventListener("test",hs,hs),window.removeEventListener("test",hs,hs)}catch{es=!1}function fr(f,p,k,E,q,K,le,Ae,Fe){var et=Array.prototype.slice.call(arguments,3);try{p.apply(k,et)}catch(_t){this.onError(_t)}}var wn=!1,Et=null,fs=!1,_s=null,na={onError:function(f){wn=!0,Et=f}};function Ba(f,p,k,E,q,K,le,Ae,Fe){wn=!1,Et=null,fr.apply(na,arguments)}function wi(f,p,k,E,q,K,le,Ae,Fe){if(Ba.apply(this,arguments),wn){if(wn){var et=Et;wn=!1,Et=null}else throw Error(r(198));fs||(fs=!0,_s=et)}}function Us(f){var p=f,k=f;if(f.alternate)for(;p.return;)p=p.return;else{f=p;do p=f,(p.flags&4098)!==0&&(k=p.return),f=p.return;while(f)}return p.tag===3?k:null}function ka(f){if(f.tag===13){var p=f.memoizedState;if(p===null&&(f=f.alternate,f!==null&&(p=f.memoizedState)),p!==null)return p.dehydrated}return null}function ai(f){if(Us(f)!==f)throw Error(r(188))}function Ro(f){var p=f.alternate;if(!p){if(p=Us(f),p===null)throw Error(r(188));return p!==f?null:f}for(var k=f,E=p;;){var q=k.return;if(q===null)break;var K=q.alternate;if(K===null){if(E=q.return,E!==null){k=E;continue}break}if(q.child===K.child){for(K=q.child;K;){if(K===k)return ai(q),f;if(K===E)return ai(q),p;K=K.sibling}throw Error(r(188))}if(k.return!==E.return)k=q,E=K;else{for(var le=!1,Ae=q.child;Ae;){if(Ae===k){le=!0,k=q,E=K;break}if(Ae===E){le=!0,E=q,k=K;break}Ae=Ae.sibling}if(!le){for(Ae=K.child;Ae;){if(Ae===k){le=!0,k=K,E=q;break}if(Ae===E){le=!0,E=K,k=q;break}Ae=Ae.sibling}if(!le)throw Error(r(189))}}if(k.alternate!==E)throw Error(r(190))}if(k.tag!==3)throw Error(r(188));return k.stateNode.current===k?f:p}function zl(f){return f=Ro(f),f!==null?Tc(f):null}function Tc(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var p=Tc(f);if(p!==null)return p;f=f.sibling}return null}var Ec=t.unstable_scheduleCallback,Vl=t.unstable_cancelCallback,Sd=t.unstable_shouldYield,Oc=t.unstable_requestPaint,as=t.unstable_now,Wf=t.unstable_getCurrentPriorityLevel,Ul=t.unstable_ImmediatePriority,Tu=t.unstable_UserBlockingPriority,Pd=t.unstable_NormalPriority,Mc=t.unstable_LowPriority,Hl=t.unstable_IdlePriority,Wl=null,_i=null;function Fo(f){if(_i&&typeof _i.onCommitFiberRoot=="function")try{_i.onCommitFiberRoot(Wl,f,void 0,(f.current.flags&128)===128)}catch{}}var En=Math.clz32?Math.clz32:ml,Dn=Math.log,Lc=Math.LN2;function ml(f){return f>>>=0,f===0?32:31-(Dn(f)/Lc|0)|0}var Fi=64,$o=4194304;function _n(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function cr(f,p){var k=f.pendingLanes;if(k===0)return 0;var E=0,q=f.suspendedLanes,K=f.pingedLanes,le=k&268435455;if(le!==0){var Ae=le&~q;Ae!==0?E=_n(Ae):(K&=le,K!==0&&(E=_n(K)))}else le=k&~q,le!==0?E=_n(le):K!==0&&(E=_n(K));if(E===0)return 0;if(p!==0&&p!==E&&(p&q)===0&&(q=E&-E,K=p&-p,q>=K||q===16&&(K&4194240)!==0))return p;if((E&4)!==0&&(E|=k&16),p=f.entangledLanes,p!==0)for(f=f.entanglements,p&=E;0<p;)k=31-En(p),q=1<<k,E|=f[k],p&=~q;return E}function Kl(f,p){switch(f){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ra(f,p){for(var k=f.suspendedLanes,E=f.pingedLanes,q=f.expirationTimes,K=f.pendingLanes;0<K;){var le=31-En(K),Ae=1<<le,Fe=q[le];Fe===-1?((Ae&k)===0||(Ae&E)!==0)&&(q[le]=Kl(Ae,p)):Fe<=p&&(f.expiredLanes|=Ae),K&=~Ae}}function Hs(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function Eu(){var f=Fi;return Fi<<=1,(Fi&4194240)===0&&(Fi=64),f}function Gl(f){for(var p=[],k=0;31>k;k++)p.push(f);return p}function ii(f,p,k){f.pendingLanes|=p,p!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,p=31-En(p),f[p]=k}function ms(f,p){var k=f.pendingLanes&~p;f.pendingLanes=p,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=p,f.mutableReadLanes&=p,f.entangledLanes&=p,p=f.entanglements;var E=f.eventTimes;for(f=f.expirationTimes;0<k;){var q=31-En(k),K=1<<q;p[q]=0,E[q]=-1,f[q]=-1,k&=~K}}function $i(f,p){var k=f.entangledLanes|=p;for(f=f.entanglements;k;){var E=31-En(k),q=1<<E;q&p|f[E]&p&&(f[E]|=p),k&=~q}}var rr=0;function Bo(f){return f&=-f,1<f?4<f?(f&268435455)!==0?16:536870912:4:1}var Ad,pl,Cd,Bi,qo,zo=!1,xl=[],qr=null,fo=null,Ni=null,xn=new Map,gn=new Map,Is=[],sr="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Td(f,p){switch(f){case"focusin":case"focusout":qr=null;break;case"dragenter":case"dragleave":fo=null;break;case"mouseover":case"mouseout":Ni=null;break;case"pointerover":case"pointerout":xn.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":gn.delete(p.pointerId)}}function Vo(f,p,k,E,q,K){return f===null||f.nativeEvent!==K?(f={blockedOn:p,domEventName:k,eventSystemFlags:E,nativeEvent:K,targetContainers:[q]},p!==null&&(p=ac(p),p!==null&&pl(p)),f):(f.eventSystemFlags|=E,p=f.targetContainers,q!==null&&p.indexOf(q)===-1&&p.push(q),f)}function Zl(f,p,k,E,q){switch(p){case"focusin":return qr=Vo(qr,f,p,k,E,q),!0;case"dragenter":return fo=Vo(fo,f,p,k,E,q),!0;case"mouseover":return Ni=Vo(Ni,f,p,k,E,q),!0;case"pointerover":var K=q.pointerId;return xn.set(K,Vo(xn.get(K)||null,f,p,k,E,q)),!0;case"gotpointercapture":return K=q.pointerId,gn.set(K,Vo(gn.get(K)||null,f,p,k,E,q)),!0}return!1}function Yl(f){var p=sc(f.target);if(p!==null){var k=Us(p);if(k!==null){if(p=k.tag,p===13){if(p=ka(k),p!==null){f.blockedOn=p,qo(f.priority,function(){Cd(k)});return}}else if(p===3&&k.stateNode.current.memoizedState.isDehydrated){f.blockedOn=k.tag===3?k.stateNode.containerInfo:null;return}}}f.blockedOn=null}function qi(f){if(f.blockedOn!==null)return!1;for(var p=f.targetContainers;0<p.length;){var k=$c(f.domEventName,f.eventSystemFlags,p[0],f.nativeEvent);if(k===null){k=f.nativeEvent;var E=new k.constructor(k.type,k);nr=E,k.target.dispatchEvent(E),nr=null}else return p=ac(k),p!==null&&pl(p),f.blockedOn=k,!1;p.shift()}return!0}function Ed(f,p,k){qi(f)&&k.delete(p)}function Dc(){zo=!1,qr!==null&&qi(qr)&&(qr=null),fo!==null&&qi(fo)&&(fo=null),Ni!==null&&qi(Ni)&&(Ni=null),xn.forEach(Ed),gn.forEach(Ed)}function Gr(f,p){f.blockedOn===p&&(f.blockedOn=null,zo||(zo=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Dc)))}function sa(f){function p(q){return Gr(q,f)}if(0<xl.length){Gr(xl[0],f);for(var k=1;k<xl.length;k++){var E=xl[k];E.blockedOn===f&&(E.blockedOn=null)}}for(qr!==null&&Gr(qr,f),fo!==null&&Gr(fo,f),Ni!==null&&Gr(Ni,f),xn.forEach(p),gn.forEach(p),k=0;k<Is.length;k++)E=Is[k],E.blockedOn===f&&(E.blockedOn=null);for(;0<Is.length&&(k=Is[0],k.blockedOn===null);)Yl(k),k.blockedOn===null&&Is.shift()}var oi=A.ReactCurrentBatchConfig,Ic=!0;function Rc(f,p,k,E){var q=rr,K=oi.transition;oi.transition=null;try{rr=1,Uo(f,p,k,E)}finally{rr=q,oi.transition=K}}function Od(f,p,k,E){var q=rr,K=oi.transition;oi.transition=null;try{rr=4,Uo(f,p,k,E)}finally{rr=q,oi.transition=K}}function Uo(f,p,k,E){if(Ic){var q=$c(f,p,k,E);if(q===null)m(f,p,E,Fc,k),Td(f,E);else if(Zl(q,f,p,k,E))E.stopPropagation();else if(Td(f,E),p&4&&-1<sr.indexOf(f)){for(;q!==null;){var K=ac(q);if(K!==null&&Ad(K),K=$c(f,p,k,E),K===null&&m(f,p,E,Fc,k),K===q)break;q=K}q!==null&&E.stopPropagation()}else m(f,p,E,null,k)}}var Fc=null;function $c(f,p,k,E){if(Fc=null,f=$a(E),f=sc(f),f!==null)if(p=Us(f),p===null)f=null;else if(k=p.tag,k===13){if(f=ka(p),f!==null)return f;f=null}else if(k===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;f=null}else p!==f&&(f=null);return Fc=f,null}function Gn(f){switch(f){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wf()){case Ul:return 1;case Tu:return 4;case Pd:case Mc:return 16;case Hl:return 536870912;default:return 16}default:return 16}}var mo=null,ps=null,Sa=null;function Ou(){if(Sa)return Sa;var f,p=ps,k=p.length,E,q="value"in mo?mo.value:mo.textContent,K=q.length;for(f=0;f<k&&p[f]===q[f];f++);var le=k-f;for(E=1;E<=le&&p[k-E]===q[K-E];E++);return Sa=q.slice(f,1<E?1-E:void 0)}function po(f){var p=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&p===13&&(f=13)):f=p,f===10&&(f=13),32<=f||f===13?f:0}function Pa(){return!0}function Md(){return!1}function Es(f){function p(k,E,q,K,le){this._reactName=k,this._targetInst=q,this.type=E,this.nativeEvent=K,this.target=le,this.currentTarget=null;for(var Ae in f)f.hasOwnProperty(Ae)&&(k=f[Ae],this[Ae]=k?k(K):K[Ae]);return this.isDefaultPrevented=(K.defaultPrevented!=null?K.defaultPrevented:K.returnValue===!1)?Pa:Md,this.isPropagationStopped=Md,this}return ue(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var k=this.nativeEvent;k&&(k.preventDefault?k.preventDefault():typeof k.returnValue!="unknown"&&(k.returnValue=!1),this.isDefaultPrevented=Pa)},stopPropagation:function(){var k=this.nativeEvent;k&&(k.stopPropagation?k.stopPropagation():typeof k.cancelBubble!="unknown"&&(k.cancelBubble=!0),this.isPropagationStopped=Pa)},persist:function(){},isPersistent:Pa}),p}var Xl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ql=Es(Xl),gl=ue({},Xl,{view:0,detail:0}),Mu=Es(gl),Aa,Ld,xo,qa=ue({},gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$t,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==xo&&(xo&&f.type==="mousemove"?(Aa=f.screenX-xo.screenX,Ld=f.screenY-xo.screenY):Ld=Aa=0,xo=f),Aa)},movementY:function(f){return"movementY"in f?f.movementY:Ld}}),Bc=Es(qa),Lu=ue({},qa,{dataTransfer:0}),Du=Es(Lu),Dd=ue({},gl,{relatedTarget:0}),Ho=Es(Dd),Id=ue({},Xl,{animationName:0,elapsedTime:0,pseudoElement:0}),Jl=Es(Id),Iu=ue({},Xl,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),$=Es(Iu),re=ue({},Xl,{data:0}),Se=Es(re),Ie={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},We={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vt(f){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(f):(f=nt[f])?!!p[f]:!1}function $t(){return vt}var Gt=ue({},gl,{key:function(f){if(f.key){var p=Ie[f.key]||f.key;if(p!=="Unidentified")return p}return f.type==="keypress"?(f=po(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?We[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$t,charCode:function(f){return f.type==="keypress"?po(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?po(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),On=Es(Gt),An=ue({},qa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ar=Es(An),Zr=ue({},gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$t}),ts=Es(Zr),Os=ue({},Xl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ca=Es(Os),Rs=ue({},qa,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),go=Es(Rs),is=[9,13,27,32],aa=l&&"CompositionEvent"in window,ec=null;l&&"documentMode"in document&&(ec=document.documentMode);var ki=l&&"TextEvent"in window&&!ec,Rd=l&&(!aa||ec&&8<ec&&11>=ec),zi=" ",Fd=!1;function Wo(f,p){switch(f){case"keyup":return is.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tc(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var Yr=!1;function $d(f,p){switch(f){case"compositionend":return tc(p);case"keypress":return p.which!==32?null:(Fd=!0,zi);case"textInput":return f=p.data,f===zi&&Fd?null:f;default:return null}}function Si(f,p){if(Yr)return f==="compositionend"||!aa&&Wo(f,p)?(f=Ou(),Sa=ps=mo=null,Yr=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return Rd&&p.locale!=="ko"?null:p.data;default:return null}}var vl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bd(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p==="input"?!!vl[f.type]:p==="textarea"}function ia(f,p,k,E){Oe(E),p=T(p,"onChange"),0<p.length&&(k=new Ql("onChange","change",null,k,E),f.push({event:k,listeners:p}))}var qc=null,oa=null;function Oh(f){Ud(f,0)}function Ms(f){var p=ic(f);if(Le(p))return f}function qd(f,p){if(f==="change")return p}var Pi=!1;if(l){var yl;if(l){var vo="oninput"in document;if(!vo){var Ko=document.createElement("div");Ko.setAttribute("oninput","return;"),vo=typeof Ko.oninput=="function"}yl=vo}else yl=!1;Pi=yl&&(!document.documentMode||9<document.documentMode)}function Ws(){qc&&(qc.detachEvent("onpropertychange",Ks),oa=qc=null)}function Ks(f){if(f.propertyName==="value"&&Ms(oa)){var p=[];ia(p,oa,f,$a(f)),ss(Oh,p)}}function yo(f,p,k){f==="focusin"?(Ws(),qc=p,oa=k,qc.attachEvent("onpropertychange",Ks)):f==="focusout"&&Ws()}function li(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return Ms(oa)}function Vi(f,p){if(f==="click")return Ms(p)}function nc(f,p){if(f==="input"||f==="change")return Ms(p)}function Go(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var mr=typeof Object.is=="function"?Object.is:Go;function Ui(f,p){if(mr(f,p))return!0;if(typeof f!="object"||f===null||typeof p!="object"||p===null)return!1;var k=Object.keys(f),E=Object.keys(p);if(k.length!==E.length)return!1;for(E=0;E<k.length;E++){var q=k[E];if(!c.call(p,q)||!mr(f[q],p[q]))return!1}return!0}function Ta(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function ci(f,p){var k=Ta(f);f=0;for(var E;k;){if(k.nodeType===3){if(E=f+k.textContent.length,f<=p&&E>=p)return{node:k,offset:p-f};f=E}e:{for(;k;){if(k.nextSibling){k=k.nextSibling;break e}k=k.parentNode}k=void 0}k=Ta(k)}}function zc(f,p){return f&&p?f===p?!0:f&&f.nodeType===3?!1:p&&p.nodeType===3?zc(f,p.parentNode):"contains"in f?f.contains(p):f.compareDocumentPosition?!!(f.compareDocumentPosition(p)&16):!1:!1}function zd(){for(var f=window,p=dt();p instanceof f.HTMLIFrameElement;){try{var k=typeof p.contentWindow.location.href=="string"}catch{k=!1}if(k)f=p.contentWindow;else break;p=dt(f.document)}return p}function Vc(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p&&(p==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||p==="textarea"||f.contentEditable==="true")}function Ea(f){var p=zd(),k=f.focusedElem,E=f.selectionRange;if(p!==k&&k&&k.ownerDocument&&zc(k.ownerDocument.documentElement,k)){if(E!==null&&Vc(k)){if(p=E.start,f=E.end,f===void 0&&(f=p),"selectionStart"in k)k.selectionStart=p,k.selectionEnd=Math.min(f,k.value.length);else if(f=(p=k.ownerDocument||document)&&p.defaultView||window,f.getSelection){f=f.getSelection();var q=k.textContent.length,K=Math.min(E.start,q);E=E.end===void 0?K:Math.min(E.end,q),!f.extend&&K>E&&(q=E,E=K,K=q),q=ci(k,K);var le=ci(k,E);q&&le&&(f.rangeCount!==1||f.anchorNode!==q.node||f.anchorOffset!==q.offset||f.focusNode!==le.node||f.focusOffset!==le.offset)&&(p=p.createRange(),p.setStart(q.node,q.offset),f.removeAllRanges(),K>E?(f.addRange(p),f.extend(le.node,le.offset)):(p.setEnd(le.node,le.offset),f.addRange(p)))}}for(p=[],f=k;f=f.parentNode;)f.nodeType===1&&p.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<p.length;k++)f=p[k],f.element.scrollLeft=f.left,f.element.scrollTop=f.top}}var Zo=l&&"documentMode"in document&&11>=document.documentMode,Ai=null,Hi=null,Yo=null,Xo=!1;function bl(f,p,k){var E=k.window===k?k.document:k.nodeType===9?k:k.ownerDocument;Xo||Ai==null||Ai!==dt(E)||(E=Ai,"selectionStart"in E&&Vc(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),Yo&&Ui(Yo,E)||(Yo=E,E=T(Hi,"onSelect"),0<E.length&&(p=new Ql("onSelect","select",null,p,k),f.push({event:p,listeners:E}),p.target=Ai)))}function Wi(f,p){var k={};return k[f.toLowerCase()]=p.toLowerCase(),k["Webkit"+f]="webkit"+p,k["Moz"+f]="moz"+p,k}var la={animationend:Wi("Animation","AnimationEnd"),animationiteration:Wi("Animation","AnimationIteration"),animationstart:Wi("Animation","AnimationStart"),transitionend:Wi("Transition","TransitionEnd")},Fs={},Sr={};l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete la.animationend.animation,delete la.animationiteration.animation,delete la.animationstart.animation),"TransitionEvent"in window||delete la.transitionend.transition);function vr(f){if(Fs[f])return Fs[f];if(!la[f])return f;var p=la[f],k;for(k in p)if(p.hasOwnProperty(k)&&k in Sr)return Fs[f]=p[k];return f}var xs=vr("animationend"),Pr=vr("animationiteration"),bo=vr("animationstart"),Uc=vr("transitionend"),jo=new Map,Ru="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ci(f,p){jo.set(f,p),i(p,[f])}for(var Qo=0;Qo<Ru.length;Qo++){var Oa=Ru[Qo],Ti=Oa.toLowerCase(),Mh=Oa[0].toUpperCase()+Oa.slice(1);Ci(Ti,"on"+Mh)}Ci(xs,"onAnimationEnd"),Ci(Pr,"onAnimationIteration"),Ci(bo,"onAnimationStart"),Ci("dblclick","onDoubleClick"),Ci("focusin","onFocus"),Ci("focusout","onBlur"),Ci(Uc,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kf=new Set("cancel close invalid load scroll toggle".split(" ").concat(jl));function Vd(f,p,k){var E=f.type||"unknown-event";f.currentTarget=k,wi(E,p,void 0,f),f.currentTarget=null}function Ud(f,p){p=(p&4)!==0;for(var k=0;k<f.length;k++){var E=f[k],q=E.event;E=E.listeners;e:{var K=void 0;if(p)for(var le=E.length-1;0<=le;le--){var Ae=E[le],Fe=Ae.instance,et=Ae.currentTarget;if(Ae=Ae.listener,Fe!==K&&q.isPropagationStopped())break e;Vd(q,Ae,et),K=Fe}else for(le=0;le<E.length;le++){if(Ae=E[le],Fe=Ae.instance,et=Ae.currentTarget,Ae=Ae.listener,Fe!==K&&q.isPropagationStopped())break e;Vd(q,Ae,et),K=Fe}}}if(fs)throw f=_s,fs=!1,_s=null,f}function Ar(f,p){var k=p[da];k===void 0&&(k=p[da]=new Set);var E=f+"__bubble";k.has(E)||(Fu(p,f,2,!1),k.add(E))}function Lh(f,p,k){var E=0;p&&(E|=4),Fu(k,f,E,p)}var Hc="_reactListening"+Math.random().toString(36).slice(2);function rc(f){if(!f[Hc]){f[Hc]=!0,s.forEach(function(k){k!=="selectionchange"&&(Kf.has(k)||Lh(k,!1,f),Lh(k,!0,f))});var p=f.nodeType===9?f:f.ownerDocument;p===null||p[Hc]||(p[Hc]=!0,Lh("selectionchange",!1,p))}}function Fu(f,p,k,E){switch(Gn(p)){case 1:var q=Rc;break;case 4:q=Od;break;default:q=Uo}k=q.bind(null,p,k,f),q=void 0,!es||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(q=!0),E?q!==void 0?f.addEventListener(p,k,{capture:!0,passive:q}):f.addEventListener(p,k,!0):q!==void 0?f.addEventListener(p,k,{passive:q}):f.addEventListener(p,k,!1)}function m(f,p,k,E,q){var K=E;if((p&1)===0&&(p&2)===0&&E!==null)e:for(;;){if(E===null)return;var le=E.tag;if(le===3||le===4){var Ae=E.stateNode.containerInfo;if(Ae===q||Ae.nodeType===8&&Ae.parentNode===q)break;if(le===4)for(le=E.return;le!==null;){var Fe=le.tag;if((Fe===3||Fe===4)&&(Fe=le.stateNode.containerInfo,Fe===q||Fe.nodeType===8&&Fe.parentNode===q))return;le=le.return}for(;Ae!==null;){if(le=sc(Ae),le===null)return;if(Fe=le.tag,Fe===5||Fe===6){E=K=le;continue e}Ae=Ae.parentNode}}E=E.return}ss(function(){var et=K,_t=$a(k),Pt=[];e:{var bt=jo.get(f);if(bt!==void 0){var Zt=Ql,en=f;switch(f){case"keypress":if(po(k)===0)break e;case"keydown":case"keyup":Zt=On;break;case"focusin":en="focus",Zt=Ho;break;case"focusout":en="blur",Zt=Ho;break;case"beforeblur":case"afterblur":Zt=Ho;break;case"click":if(k.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Zt=Bc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Zt=Du;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Zt=ts;break;case xs:case Pr:case bo:Zt=Jl;break;case Uc:Zt=Ca;break;case"scroll":Zt=Mu;break;case"wheel":Zt=go;break;case"copy":case"cut":case"paste":Zt=$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Zt=ar}var sn=(p&4)!==0,ma=!sn&&f==="scroll",Ye=sn?bt!==null?bt+"Capture":null:bt;sn=[];for(var qe=et,Qe;qe!==null;){Qe=qe;var Mt=Qe.stateNode;if(Qe.tag===5&&Mt!==null&&(Qe=Mt,Ye!==null&&(Mt=Ut(qe,Ye),Mt!=null&&sn.push(_(qe,Mt,Qe)))),ma)break;qe=qe.return}0<sn.length&&(bt=new Zt(bt,en,null,k,_t),Pt.push({event:bt,listeners:sn}))}}if((p&7)===0){e:{if(bt=f==="mouseover"||f==="pointerover",Zt=f==="mouseout"||f==="pointerout",bt&&k!==nr&&(en=k.relatedTarget||k.fromElement)&&(sc(en)||en[ir]))break e;if((Zt||bt)&&(bt=_t.window===_t?_t:(bt=_t.ownerDocument)?bt.defaultView||bt.parentWindow:window,Zt?(en=k.relatedTarget||k.toElement,Zt=et,en=en?sc(en):null,en!==null&&(ma=Us(en),en!==ma||en.tag!==5&&en.tag!==6)&&(en=null)):(Zt=null,en=et),Zt!==en)){if(sn=Bc,Mt="onMouseLeave",Ye="onMouseEnter",qe="mouse",(f==="pointerout"||f==="pointerover")&&(sn=ar,Mt="onPointerLeave",Ye="onPointerEnter",qe="pointer"),ma=Zt==null?bt:ic(Zt),Qe=en==null?bt:ic(en),bt=new sn(Mt,qe+"leave",Zt,k,_t),bt.target=ma,bt.relatedTarget=Qe,Mt=null,sc(_t)===et&&(sn=new sn(Ye,qe+"enter",en,k,_t),sn.target=Qe,sn.relatedTarget=ma,Mt=sn),ma=Mt,Zt&&en)t:{for(sn=Zt,Ye=en,qe=0,Qe=sn;Qe;Qe=B(Qe))qe++;for(Qe=0,Mt=Ye;Mt;Mt=B(Mt))Qe++;for(;0<qe-Qe;)sn=B(sn),qe--;for(;0<Qe-qe;)Ye=B(Ye),Qe--;for(;qe--;){if(sn===Ye||Ye!==null&&sn===Ye.alternate)break t;sn=B(sn),Ye=B(Ye)}sn=null}else sn=null;Zt!==null&&X(Pt,bt,Zt,sn,!1),en!==null&&ma!==null&&X(Pt,ma,en,sn,!0)}}e:{if(bt=et?ic(et):window,Zt=bt.nodeName&&bt.nodeName.toLowerCase(),Zt==="select"||Zt==="input"&&bt.type==="file")var ln=qd;else if(Bd(bt))if(Pi)ln=nc;else{ln=li;var vn=yo}else(Zt=bt.nodeName)&&Zt.toLowerCase()==="input"&&(bt.type==="checkbox"||bt.type==="radio")&&(ln=Vi);if(ln&&(ln=ln(f,et))){ia(Pt,ln,k,_t);break e}vn&&vn(f,bt,et),f==="focusout"&&(vn=bt._wrapperState)&&vn.controlled&&bt.type==="number"&&mt(bt,"number",bt.value)}switch(vn=et?ic(et):window,f){case"focusin":(Bd(vn)||vn.contentEditable==="true")&&(Ai=vn,Hi=et,Yo=null);break;case"focusout":Yo=Hi=Ai=null;break;case"mousedown":Xo=!0;break;case"contextmenu":case"mouseup":case"dragend":Xo=!1,bl(Pt,k,_t);break;case"selectionchange":if(Zo)break;case"keydown":case"keyup":bl(Pt,k,_t)}var yn;if(aa)e:{switch(f){case"compositionstart":var In="onCompositionStart";break e;case"compositionend":In="onCompositionEnd";break e;case"compositionupdate":In="onCompositionUpdate";break e}In=void 0}else Yr?Wo(f,k)&&(In="onCompositionEnd"):f==="keydown"&&k.keyCode===229&&(In="onCompositionStart");In&&(Rd&&k.locale!=="ko"&&(Yr||In!=="onCompositionStart"?In==="onCompositionEnd"&&Yr&&(yn=Ou()):(mo=_t,ps="value"in mo?mo.value:mo.textContent,Yr=!0)),vn=T(et,In),0<vn.length&&(In=new Se(In,f,null,k,_t),Pt.push({event:In,listeners:vn}),yn?In.data=yn:(yn=tc(k),yn!==null&&(In.data=yn)))),(yn=ki?$d(f,k):Si(f,k))&&(et=T(et,"onBeforeInput"),0<et.length&&(_t=new Se("onBeforeInput","beforeinput",null,k,_t),Pt.push({event:_t,listeners:et}),_t.data=yn))}Ud(Pt,p)})}function _(f,p,k){return{instance:f,listener:p,currentTarget:k}}function T(f,p){for(var k=p+"Capture",E=[];f!==null;){var q=f,K=q.stateNode;q.tag===5&&K!==null&&(q=K,K=Ut(f,k),K!=null&&E.unshift(_(f,K,q)),K=Ut(f,p),K!=null&&E.push(_(f,K,q))),f=f.return}return E}function B(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5);return f||null}function X(f,p,k,E,q){for(var K=p._reactName,le=[];k!==null&&k!==E;){var Ae=k,Fe=Ae.alternate,et=Ae.stateNode;if(Fe!==null&&Fe===E)break;Ae.tag===5&&et!==null&&(Ae=et,q?(Fe=Ut(k,K),Fe!=null&&le.unshift(_(k,Fe,Ae))):q||(Fe=Ut(k,K),Fe!=null&&le.push(_(k,Fe,Ae)))),k=k.return}le.length!==0&&f.push({event:p,listeners:le})}var me=/\r\n?/g,Ee=/\u0000|\uFFFD/g;function Ze(f){return(typeof f=="string"?f:""+f).replace(me,`
`).replace(Ee,"")}function Je(f,p,k){if(p=Ze(p),Ze(f)!==p&&k)throw Error(r(425))}function pt(){}var zt=null,dn=null;function Bn(f,p){return f==="textarea"||f==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var ca=typeof setTimeout=="function"?setTimeout:void 0,$s=typeof clearTimeout=="function"?clearTimeout:void 0,Ei=typeof Promise=="function"?Promise:void 0,di=typeof queueMicrotask=="function"?queueMicrotask:typeof Ei<"u"?function(f){return Ei.resolve(null).then(f).catch(Hd)}:ca;function Hd(f){setTimeout(function(){throw f})}function Gf(f,p){var k=p,E=0;do{var q=k.nextSibling;if(f.removeChild(k),q&&q.nodeType===8)if(k=q.data,k==="/$"){if(E===0){f.removeChild(q),sa(p);return}E--}else k!=="$"&&k!=="$?"&&k!=="$!"||E++;k=q}while(k);sa(p)}function za(f){for(;f!=null;f=f.nextSibling){var p=f.nodeType;if(p===1||p===3)break;if(p===8){if(p=f.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return f}function Ki(f){f=f.previousSibling;for(var p=0;f;){if(f.nodeType===8){var k=f.data;if(k==="$"||k==="$!"||k==="$?"){if(p===0)return f;p--}else k==="/$"&&p++}f=f.previousSibling}return null}var Va=Math.random().toString(36).slice(2),Jo="__reactFiber$"+Va,Wc="__reactProps$"+Va,ir="__reactContainer$"+Va,da="__reactEvents$"+Va,Fg="__reactListeners$"+Va,$g="__reactHandles$"+Va;function sc(f){var p=f[Jo];if(p)return p;for(var k=f.parentNode;k;){if(p=k[ir]||k[Jo]){if(k=p.alternate,p.child!==null||k!==null&&k.child!==null)for(f=Ki(f);f!==null;){if(k=f[Jo])return k;f=Ki(f)}return p}f=k,k=f.parentNode}return null}function ac(f){return f=f[Jo]||f[ir],!f||f.tag!==5&&f.tag!==6&&f.tag!==13&&f.tag!==3?null:f}function ic(f){if(f.tag===5||f.tag===6)return f.stateNode;throw Error(r(33))}function $u(f){return f[Wc]||null}var Bg=[],Kc=-1;function wl(f){return{current:f}}function Ir(f){0>Kc||(f.current=Bg[Kc],Bg[Kc]=null,Kc--)}function zr(f,p){Kc++,Bg[Kc]=f.current,f.current=p}var Wd={},Ua=wl(Wd),Gi=wl(!1),Bu=Wd;function Dh(f,p){var k=f.type.contextTypes;if(!k)return Wd;var E=f.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===p)return E.__reactInternalMemoizedMaskedChildContext;var q={},K;for(K in k)q[K]=p[K];return E&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=p,f.__reactInternalMemoizedMaskedChildContext=q),q}function Zi(f){return f=f.childContextTypes,f!=null}function hp(){Ir(Gi),Ir(Ua)}function gy(f,p,k){if(Ua.current!==Wd)throw Error(r(168));zr(Ua,p),zr(Gi,k)}function qg(f,p,k){var E=f.stateNode;if(p=p.childContextTypes,typeof E.getChildContext!="function")return k;E=E.getChildContext();for(var q in E)if(!(q in p))throw Error(r(108,we(f)||"Unknown",q));return ue({},k,E)}function qu(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||Wd,Bu=Ua.current,zr(Ua,f),zr(Gi,Gi.current),!0}function vy(f,p,k){var E=f.stateNode;if(!E)throw Error(r(169));k?(f=qg(f,p,Bu),E.__reactInternalMemoizedMergedChildContext=f,Ir(Gi),Ir(Ua),zr(Ua,f)):Ir(Gi),zr(Gi,k)}var Gc=null,Zf=!1,S=!1;function O(f){Gc===null?Gc=[f]:Gc.push(f)}function V(f){Zf=!0,O(f)}function Y(){if(!S&&Gc!==null){S=!0;var f=0,p=rr;try{var k=Gc;for(rr=1;f<k.length;f++){var E=k[f];do E=E(!0);while(E!==null)}Gc=null,Zf=!1}catch(q){throw Gc!==null&&(Gc=Gc.slice(f+1)),Ec(Ul,Y),q}finally{rr=p,S=!1}}return null}var ee=[],ie=0,de=null,pe=0,ge=[],je=0,Re=null,Ke=1,Ge="";function ze(f,p){ee[ie++]=pe,ee[ie++]=de,de=f,pe=p}function ft(f,p,k){ge[je++]=Ke,ge[je++]=Ge,ge[je++]=Re,Re=f;var E=Ke;f=Ge;var q=32-En(E)-1;E&=~(1<<q),k+=1;var K=32-En(p)+q;if(30<K){var le=q-q%5;K=(E&(1<<le)-1).toString(32),E>>=le,q-=le,Ke=1<<32-En(p)+q|k<<q|E,Ge=K+f}else Ke=1<<K|k<<q|E,Ge=f}function rt(f){f.return!==null&&(ze(f,1),ft(f,1,0))}function $e(f){for(;f===de;)de=ee[--ie],ee[ie]=null,pe=ee[--ie],ee[ie]=null;for(;f===Re;)Re=ge[--je],ge[je]=null,Ge=ge[--je],ge[je]=null,Ke=ge[--je],ge[je]=null}var Be=null,at=null,st=!1,lt=null;function Ht(f,p){var k=hc(5,null,null,0);k.elementType="DELETED",k.stateNode=p,k.return=f,p=f.deletions,p===null?(f.deletions=[k],f.flags|=16):p.push(k)}function Rt(f,p){switch(f.tag){case 5:var k=f.type;return p=p.nodeType!==1||k.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(f.stateNode=p,Be=f,at=za(p.firstChild),!0):!1;case 6:return p=f.pendingProps===""||p.nodeType!==3?null:p,p!==null?(f.stateNode=p,Be=f,at=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(k=Re!==null?{id:Ke,overflow:Ge}:null,f.memoizedState={dehydrated:p,treeContext:k,retryLane:1073741824},k=hc(18,null,null,0),k.stateNode=p,k.return=f,f.child=k,Be=f,at=null,!0):!1;default:return!1}}function un(f){return(f.mode&1)!==0&&(f.flags&128)===0}function qt(f){if(st){var p=at;if(p){var k=p;if(!Rt(f,p)){if(un(f))throw Error(r(418));p=za(k.nextSibling);var E=Be;p&&Rt(f,p)?Ht(E,k):(f.flags=f.flags&-4097|2,st=!1,Be=f)}}else{if(un(f))throw Error(r(418));f.flags=f.flags&-4097|2,st=!1,Be=f}}}function yr(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;Be=f}function br(f){if(f!==Be)return!1;if(!st)return yr(f),st=!0,!1;var p;if((p=f.tag!==3)&&!(p=f.tag!==5)&&(p=f.type,p=p!=="head"&&p!=="body"&&!Bn(f.type,f.memoizedProps)),p&&(p=at)){if(un(f))throw hr(),Error(r(418));for(;p;)Ht(f,p),p=za(p.nextSibling)}if(yr(f),f.tag===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));e:{for(f=f.nextSibling,p=0;f;){if(f.nodeType===8){var k=f.data;if(k==="/$"){if(p===0){at=za(f.nextSibling);break e}p--}else k!=="$"&&k!=="$!"&&k!=="$?"||p++}f=f.nextSibling}at=null}}else at=Be?za(f.stateNode.nextSibling):null;return!0}function hr(){for(var f=at;f;)f=za(f.nextSibling)}function Un(){at=Be=null,st=!1}function Rr(f){lt===null?lt=[f]:lt.push(f)}var Vr=A.ReactCurrentBatchConfig;function Mn(f,p,k){if(f=k.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(k._owner){if(k=k._owner,k){if(k.tag!==1)throw Error(r(309));var E=k.stateNode}if(!E)throw Error(r(147,f));var q=E,K=""+f;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===K?p.ref:(p=function(le){var Ae=q.refs;le===null?delete Ae[K]:Ae[K]=le},p._stringRef=K,p)}if(typeof f!="string")throw Error(r(284));if(!k._owner)throw Error(r(290,f))}return f}function Ns(f,p){throw f=Object.prototype.toString.call(p),Error(r(31,f==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":f))}function Oi(f){var p=f._init;return p(f._payload)}function Bs(f){function p(Ye,qe){if(f){var Qe=Ye.deletions;Qe===null?(Ye.deletions=[qe],Ye.flags|=16):Qe.push(qe)}}function k(Ye,qe){if(!f)return null;for(;qe!==null;)p(Ye,qe),qe=qe.sibling;return null}function E(Ye,qe){for(Ye=new Map;qe!==null;)qe.key!==null?Ye.set(qe.key,qe):Ye.set(qe.index,qe),qe=qe.sibling;return Ye}function q(Ye,qe){return Ye=Kh(Ye,qe),Ye.index=0,Ye.sibling=null,Ye}function K(Ye,qe,Qe){return Ye.index=Qe,f?(Qe=Ye.alternate,Qe!==null?(Qe=Qe.index,Qe<qe?(Ye.flags|=2,qe):Qe):(Ye.flags|=2,qe)):(Ye.flags|=1048576,qe)}function le(Ye){return f&&Ye.alternate===null&&(Ye.flags|=2),Ye}function Ae(Ye,qe,Qe,Mt){return qe===null||qe.tag!==6?(qe=c2(Qe,Ye.mode,Mt),qe.return=Ye,qe):(qe=q(qe,Qe),qe.return=Ye,qe)}function Fe(Ye,qe,Qe,Mt){var ln=Qe.type;return ln===I?_t(Ye,qe,Qe.props.children,Mt,Qe.key):qe!==null&&(qe.elementType===ln||typeof ln=="object"&&ln!==null&&ln.$$typeof===J&&Oi(ln)===qe.type)?(Mt=q(qe,Qe.props),Mt.ref=Mn(Ye,qe,Qe),Mt.return=Ye,Mt):(Mt=Fy(Qe.type,Qe.key,Qe.props,null,Ye.mode,Mt),Mt.ref=Mn(Ye,qe,Qe),Mt.return=Ye,Mt)}function et(Ye,qe,Qe,Mt){return qe===null||qe.tag!==4||qe.stateNode.containerInfo!==Qe.containerInfo||qe.stateNode.implementation!==Qe.implementation?(qe=d2(Qe,Ye.mode,Mt),qe.return=Ye,qe):(qe=q(qe,Qe.children||[]),qe.return=Ye,qe)}function _t(Ye,qe,Qe,Mt,ln){return qe===null||qe.tag!==7?(qe=rm(Qe,Ye.mode,Mt,ln),qe.return=Ye,qe):(qe=q(qe,Qe),qe.return=Ye,qe)}function Pt(Ye,qe,Qe){if(typeof qe=="string"&&qe!==""||typeof qe=="number")return qe=c2(""+qe,Ye.mode,Qe),qe.return=Ye,qe;if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case C:return Qe=Fy(qe.type,qe.key,qe.props,null,Ye.mode,Qe),Qe.ref=Mn(Ye,null,qe),Qe.return=Ye,Qe;case M:return qe=d2(qe,Ye.mode,Qe),qe.return=Ye,qe;case J:var Mt=qe._init;return Pt(Ye,Mt(qe._payload),Qe)}if(yt(qe)||ne(qe))return qe=rm(qe,Ye.mode,Qe,null),qe.return=Ye,qe;Ns(Ye,qe)}return null}function bt(Ye,qe,Qe,Mt){var ln=qe!==null?qe.key:null;if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number")return ln!==null?null:Ae(Ye,qe,""+Qe,Mt);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case C:return Qe.key===ln?Fe(Ye,qe,Qe,Mt):null;case M:return Qe.key===ln?et(Ye,qe,Qe,Mt):null;case J:return ln=Qe._init,bt(Ye,qe,ln(Qe._payload),Mt)}if(yt(Qe)||ne(Qe))return ln!==null?null:_t(Ye,qe,Qe,Mt,null);Ns(Ye,Qe)}return null}function Zt(Ye,qe,Qe,Mt,ln){if(typeof Mt=="string"&&Mt!==""||typeof Mt=="number")return Ye=Ye.get(Qe)||null,Ae(qe,Ye,""+Mt,ln);if(typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case C:return Ye=Ye.get(Mt.key===null?Qe:Mt.key)||null,Fe(qe,Ye,Mt,ln);case M:return Ye=Ye.get(Mt.key===null?Qe:Mt.key)||null,et(qe,Ye,Mt,ln);case J:var vn=Mt._init;return Zt(Ye,qe,Qe,vn(Mt._payload),ln)}if(yt(Mt)||ne(Mt))return Ye=Ye.get(Qe)||null,_t(qe,Ye,Mt,ln,null);Ns(qe,Mt)}return null}function en(Ye,qe,Qe,Mt){for(var ln=null,vn=null,yn=qe,In=qe=0,mi=null;yn!==null&&In<Qe.length;In++){yn.index>In?(mi=yn,yn=null):mi=yn.sibling;var Er=bt(Ye,yn,Qe[In],Mt);if(Er===null){yn===null&&(yn=mi);break}f&&yn&&Er.alternate===null&&p(Ye,yn),qe=K(Er,qe,In),vn===null?ln=Er:vn.sibling=Er,vn=Er,yn=mi}if(In===Qe.length)return k(Ye,yn),st&&ze(Ye,In),ln;if(yn===null){for(;In<Qe.length;In++)yn=Pt(Ye,Qe[In],Mt),yn!==null&&(qe=K(yn,qe,In),vn===null?ln=yn:vn.sibling=yn,vn=yn);return st&&ze(Ye,In),ln}for(yn=E(Ye,yn);In<Qe.length;In++)mi=Zt(yn,Ye,In,Qe[In],Mt),mi!==null&&(f&&mi.alternate!==null&&yn.delete(mi.key===null?In:mi.key),qe=K(mi,qe,In),vn===null?ln=mi:vn.sibling=mi,vn=mi);return f&&yn.forEach(function(Gh){return p(Ye,Gh)}),st&&ze(Ye,In),ln}function sn(Ye,qe,Qe,Mt){var ln=ne(Qe);if(typeof ln!="function")throw Error(r(150));if(Qe=ln.call(Qe),Qe==null)throw Error(r(151));for(var vn=ln=null,yn=qe,In=qe=0,mi=null,Er=Qe.next();yn!==null&&!Er.done;In++,Er=Qe.next()){yn.index>In?(mi=yn,yn=null):mi=yn.sibling;var Gh=bt(Ye,yn,Er.value,Mt);if(Gh===null){yn===null&&(yn=mi);break}f&&yn&&Gh.alternate===null&&p(Ye,yn),qe=K(Gh,qe,In),vn===null?ln=Gh:vn.sibling=Gh,vn=Gh,yn=mi}if(Er.done)return k(Ye,yn),st&&ze(Ye,In),ln;if(yn===null){for(;!Er.done;In++,Er=Qe.next())Er=Pt(Ye,Er.value,Mt),Er!==null&&(qe=K(Er,qe,In),vn===null?ln=Er:vn.sibling=Er,vn=Er);return st&&ze(Ye,In),ln}for(yn=E(Ye,yn);!Er.done;In++,Er=Qe.next())Er=Zt(yn,Ye,In,Er.value,Mt),Er!==null&&(f&&Er.alternate!==null&&yn.delete(Er.key===null?In:Er.key),qe=K(Er,qe,In),vn===null?ln=Er:vn.sibling=Er,vn=Er);return f&&yn.forEach(function(OZ){return p(Ye,OZ)}),st&&ze(Ye,In),ln}function ma(Ye,qe,Qe,Mt){if(typeof Qe=="object"&&Qe!==null&&Qe.type===I&&Qe.key===null&&(Qe=Qe.props.children),typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case C:e:{for(var ln=Qe.key,vn=qe;vn!==null;){if(vn.key===ln){if(ln=Qe.type,ln===I){if(vn.tag===7){k(Ye,vn.sibling),qe=q(vn,Qe.props.children),qe.return=Ye,Ye=qe;break e}}else if(vn.elementType===ln||typeof ln=="object"&&ln!==null&&ln.$$typeof===J&&Oi(ln)===vn.type){k(Ye,vn.sibling),qe=q(vn,Qe.props),qe.ref=Mn(Ye,vn,Qe),qe.return=Ye,Ye=qe;break e}k(Ye,vn);break}else p(Ye,vn);vn=vn.sibling}Qe.type===I?(qe=rm(Qe.props.children,Ye.mode,Mt,Qe.key),qe.return=Ye,Ye=qe):(Mt=Fy(Qe.type,Qe.key,Qe.props,null,Ye.mode,Mt),Mt.ref=Mn(Ye,qe,Qe),Mt.return=Ye,Ye=Mt)}return le(Ye);case M:e:{for(vn=Qe.key;qe!==null;){if(qe.key===vn)if(qe.tag===4&&qe.stateNode.containerInfo===Qe.containerInfo&&qe.stateNode.implementation===Qe.implementation){k(Ye,qe.sibling),qe=q(qe,Qe.children||[]),qe.return=Ye,Ye=qe;break e}else{k(Ye,qe);break}else p(Ye,qe);qe=qe.sibling}qe=d2(Qe,Ye.mode,Mt),qe.return=Ye,Ye=qe}return le(Ye);case J:return vn=Qe._init,ma(Ye,qe,vn(Qe._payload),Mt)}if(yt(Qe))return en(Ye,qe,Qe,Mt);if(ne(Qe))return sn(Ye,qe,Qe,Mt);Ns(Ye,Qe)}return typeof Qe=="string"&&Qe!==""||typeof Qe=="number"?(Qe=""+Qe,qe!==null&&qe.tag===6?(k(Ye,qe.sibling),qe=q(qe,Qe),qe.return=Ye,Ye=qe):(k(Ye,qe),qe=c2(Qe,Ye.mode,Mt),qe.return=Ye,Ye=qe),le(Ye)):k(Ye,qe)}return ma}var ua=Bs(!0),Cr=Bs(!1),ui=wl(null),hi=null,ks=null,ha=null;function Ha(){ha=ks=hi=null}function Yi(f){var p=ui.current;Ir(ui),f._currentValue=p}function el(f,p,k){for(;f!==null;){var E=f.alternate;if((f.childLanes&p)!==p?(f.childLanes|=p,E!==null&&(E.childLanes|=p)):E!==null&&(E.childLanes&p)!==p&&(E.childLanes|=p),f===k)break;f=f.return}}function Ss(f,p){hi=f,ha=ks=null,f=f.dependencies,f!==null&&f.firstContext!==null&&((f.lanes&p)!==0&&(sl=!0),f.firstContext=null)}function Gs(f){var p=f._currentValue;if(ha!==f)if(f={context:f,memoizedValue:p,next:null},ks===null){if(hi===null)throw Error(r(308));ks=f,hi.dependencies={lanes:0,firstContext:f}}else ks=ks.next=f;return p}var wo=null;function Kd(f){wo===null?wo=[f]:wo.push(f)}function Zc(f,p,k,E){var q=p.interleaved;return q===null?(k.next=k,Kd(p)):(k.next=q.next,q.next=k),p.interleaved=k,Tr(f,E)}function Tr(f,p){f.lanes|=p;var k=f.alternate;for(k!==null&&(k.lanes|=p),k=f,f=f.return;f!==null;)f.childLanes|=p,k=f.alternate,k!==null&&(k.childLanes|=p),k=f,f=f.return;return k.tag===3?k.stateNode:null}var oc=!1;function fp(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zg(f,p){f=f.updateQueue,p.updateQueue===f&&(p.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function tl(f,p){return{eventTime:f,lane:p,tag:0,payload:null,callback:null,next:null}}function nl(f,p,k){var E=f.updateQueue;if(E===null)return null;if(E=E.shared,(jr&2)!==0){var q=E.pending;return q===null?p.next=p:(p.next=q.next,q.next=p),E.pending=p,Tr(f,k)}return q=E.interleaved,q===null?(p.next=p,Kd(E)):(p.next=q.next,q.next=p),E.interleaved=p,Tr(f,k)}function zu(f,p,k){if(p=p.updateQueue,p!==null&&(p=p.shared,(k&4194240)!==0)){var E=p.lanes;E&=f.pendingLanes,k|=E,p.lanes=k,$i(f,k)}}function rl(f,p){var k=f.updateQueue,E=f.alternate;if(E!==null&&(E=E.updateQueue,k===E)){var q=null,K=null;if(k=k.firstBaseUpdate,k!==null){do{var le={eventTime:k.eventTime,lane:k.lane,tag:k.tag,payload:k.payload,callback:k.callback,next:null};K===null?q=K=le:K=K.next=le,k=k.next}while(k!==null);K===null?q=K=p:K=K.next=p}else q=K=p;k={baseState:E.baseState,firstBaseUpdate:q,lastBaseUpdate:K,shared:E.shared,effects:E.effects},f.updateQueue=k;return}f=k.lastBaseUpdate,f===null?k.firstBaseUpdate=p:f.next=p,k.lastBaseUpdate=p}function Yc(f,p,k,E){var q=f.updateQueue;oc=!1;var K=q.firstBaseUpdate,le=q.lastBaseUpdate,Ae=q.shared.pending;if(Ae!==null){q.shared.pending=null;var Fe=Ae,et=Fe.next;Fe.next=null,le===null?K=et:le.next=et,le=Fe;var _t=f.alternate;_t!==null&&(_t=_t.updateQueue,Ae=_t.lastBaseUpdate,Ae!==le&&(Ae===null?_t.firstBaseUpdate=et:Ae.next=et,_t.lastBaseUpdate=Fe))}if(K!==null){var Pt=q.baseState;le=0,_t=et=Fe=null,Ae=K;do{var bt=Ae.lane,Zt=Ae.eventTime;if((E&bt)===bt){_t!==null&&(_t=_t.next={eventTime:Zt,lane:0,tag:Ae.tag,payload:Ae.payload,callback:Ae.callback,next:null});e:{var en=f,sn=Ae;switch(bt=p,Zt=k,sn.tag){case 1:if(en=sn.payload,typeof en=="function"){Pt=en.call(Zt,Pt,bt);break e}Pt=en;break e;case 3:en.flags=en.flags&-65537|128;case 0:if(en=sn.payload,bt=typeof en=="function"?en.call(Zt,Pt,bt):en,bt==null)break e;Pt=ue({},Pt,bt);break e;case 2:oc=!0}}Ae.callback!==null&&Ae.lane!==0&&(f.flags|=64,bt=q.effects,bt===null?q.effects=[Ae]:bt.push(Ae))}else Zt={eventTime:Zt,lane:bt,tag:Ae.tag,payload:Ae.payload,callback:Ae.callback,next:null},_t===null?(et=_t=Zt,Fe=Pt):_t=_t.next=Zt,le|=bt;if(Ae=Ae.next,Ae===null){if(Ae=q.shared.pending,Ae===null)break;bt=Ae,Ae=bt.next,bt.next=null,q.lastBaseUpdate=bt,q.shared.pending=null}}while(!0);if(_t===null&&(Fe=Pt),q.baseState=Fe,q.firstBaseUpdate=et,q.lastBaseUpdate=_t,p=q.shared.interleaved,p!==null){q=p;do le|=q.lane,q=q.next;while(q!==p)}else K===null&&(q.shared.lanes=0);Jf|=le,f.lanes=le,f.memoizedState=Pt}}function Vu(f,p,k){if(f=p.effects,p.effects=null,f!==null)for(p=0;p<f.length;p++){var E=f[p],q=E.callback;if(q!==null){if(E.callback=null,E=k,typeof q!="function")throw Error(r(191,q));q.call(E)}}}var Ih={},_o=wl(Ih),Rh=wl(Ih),Gd=wl(Ih);function Xc(f){if(f===Ih)throw Error(r(174));return f}function Fh(f,p){switch(zr(Gd,p),zr(Rh,f),zr(_o,Ih),f=p.nodeType,f){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:Wn(null,"");break;default:f=f===8?p.parentNode:p,p=f.namespaceURI||null,f=f.tagName,p=Wn(p,f)}Ir(_o),zr(_o,p)}function lc(){Ir(_o),Ir(Rh),Ir(Gd)}function yy(f){Xc(Gd.current);var p=Xc(_o.current),k=Wn(p,f.type);p!==k&&(zr(Rh,f),zr(_o,k))}function Vg(f){Rh.current===f&&(Ir(_o),Ir(Rh))}var os=wl(0);function _l(f){for(var p=f;p!==null;){if(p.tag===13){var k=p.memoizedState;if(k!==null&&(k=k.dehydrated,k===null||k.data==="$?"||k.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var Ug=[];function Hg(){for(var f=0;f<Ug.length;f++)Ug[f]._workInProgressVersionPrimary=null;Ug.length=0}var mp=A.ReactCurrentDispatcher,pp=A.ReactCurrentBatchConfig,cc=0,gs=null,Zs=null,qs=null,$h=!1,Qc=!1,Bh=0,Dw=0;function fa(){throw Error(r(321))}function xp(f,p){if(p===null)return!1;for(var k=0;k<p.length&&k<f.length;k++)if(!mr(f[k],p[k]))return!1;return!0}function Yf(f,p,k,E,q,K){if(cc=K,gs=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,mp.current=f===null||f.memoizedState===null?sZ:aZ,f=k(E,q),Qc){K=0;do{if(Qc=!1,Bh=0,25<=K)throw Error(r(301));K+=1,qs=Zs=null,p.updateQueue=null,mp.current=iZ,f=k(E,q)}while(Qc)}if(mp.current=Ny,p=Zs!==null&&Zs.next!==null,cc=0,qs=Zs=gs=null,$h=!1,p)throw Error(r(300));return f}function dc(){var f=Bh!==0;return Bh=0,f}function Nl(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qs===null?gs.memoizedState=qs=f:qs=qs.next=f,qs}function No(){if(Zs===null){var f=gs.alternate;f=f!==null?f.memoizedState:null}else f=Zs.next;var p=qs===null?gs.memoizedState:qs.next;if(p!==null)qs=p,Zs=f;else{if(f===null)throw Error(r(310));Zs=f,f={memoizedState:Zs.memoizedState,baseState:Zs.baseState,baseQueue:Zs.baseQueue,queue:Zs.queue,next:null},qs===null?gs.memoizedState=qs=f:qs=qs.next=f}return qs}function Xf(f,p){return typeof p=="function"?p(f):p}function gp(f){var p=No(),k=p.queue;if(k===null)throw Error(r(311));k.lastRenderedReducer=f;var E=Zs,q=E.baseQueue,K=k.pending;if(K!==null){if(q!==null){var le=q.next;q.next=K.next,K.next=le}E.baseQueue=q=K,k.pending=null}if(q!==null){K=q.next,E=E.baseState;var Ae=le=null,Fe=null,et=K;do{var _t=et.lane;if((cc&_t)===_t)Fe!==null&&(Fe=Fe.next={lane:0,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null}),E=et.hasEagerState?et.eagerState:f(E,et.action);else{var Pt={lane:_t,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null};Fe===null?(Ae=Fe=Pt,le=E):Fe=Fe.next=Pt,gs.lanes|=_t,Jf|=_t}et=et.next}while(et!==null&&et!==K);Fe===null?le=E:Fe.next=Ae,mr(E,p.memoizedState)||(sl=!0),p.memoizedState=E,p.baseState=le,p.baseQueue=Fe,k.lastRenderedState=E}if(f=k.interleaved,f!==null){q=f;do K=q.lane,gs.lanes|=K,Jf|=K,q=q.next;while(q!==f)}else q===null&&(k.lanes=0);return[p.memoizedState,k.dispatch]}function Zd(f){var p=No(),k=p.queue;if(k===null)throw Error(r(311));k.lastRenderedReducer=f;var E=k.dispatch,q=k.pending,K=p.memoizedState;if(q!==null){k.pending=null;var le=q=q.next;do K=f(K,le.action),le=le.next;while(le!==q);mr(K,p.memoizedState)||(sl=!0),p.memoizedState=K,p.baseQueue===null&&(p.baseState=K),k.lastRenderedState=K}return[K,E]}function by(){}function Wg(f,p){var k=gs,E=No(),q=p(),K=!mr(E.memoizedState,q);if(K&&(E.memoizedState=q,sl=!0),E=E.queue,bp(wy.bind(null,k,E,f),[f]),E.getSnapshot!==p||K||qs!==null&&qs.memoizedState.tag&1){if(k.flags|=2048,ko(9,Kg.bind(null,k,E,q,p),void 0,null),fi===null)throw Error(r(349));(cc&30)!==0||jy(k,p,q)}return q}function jy(f,p,k){f.flags|=16384,f={getSnapshot:p,value:k},p=gs.updateQueue,p===null?(p={lastEffect:null,stores:null},gs.updateQueue=p,p.stores=[f]):(k=p.stores,k===null?p.stores=[f]:k.push(f))}function Kg(f,p,k,E){p.value=k,p.getSnapshot=E,qh(p)&&vp(f)}function wy(f,p,k){return k(function(){qh(p)&&vp(f)})}function qh(f){var p=f.getSnapshot;f=f.value;try{var k=p();return!mr(f,k)}catch{return!0}}function vp(f){var p=Tr(f,1);p!==null&&rd(p,f,1,-1)}function Qf(f){var p=Nl();return typeof f=="function"&&(f=f()),p.memoizedState=p.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xf,lastRenderedState:f},p.queue=f,f=f.dispatch=rZ.bind(null,gs,f),[p.memoizedState,f]}function ko(f,p,k,E){return f={tag:f,create:p,destroy:k,deps:E,next:null},p=gs.updateQueue,p===null?(p={lastEffect:null,stores:null},gs.updateQueue=p,p.lastEffect=f.next=f):(k=p.lastEffect,k===null?p.lastEffect=f.next=f:(E=k.next,k.next=f,f.next=E,p.lastEffect=f)),f}function Jc(){return No().memoizedState}function kl(f,p,k,E){var q=Nl();gs.flags|=f,q.memoizedState=ko(1|p,k,void 0,E===void 0?null:E)}function Uu(f,p,k,E){var q=No();E=E===void 0?null:E;var K=void 0;if(Zs!==null){var le=Zs.memoizedState;if(K=le.destroy,E!==null&&xp(E,le.deps)){q.memoizedState=ko(p,k,K,E);return}}gs.flags|=f,q.memoizedState=ko(1|p,k,K,E)}function yp(f,p){return kl(8390656,8,f,p)}function bp(f,p){return Uu(2048,8,f,p)}function _y(f,p){return Uu(4,2,f,p)}function jp(f,p){return Uu(4,4,f,p)}function wp(f,p){if(typeof p=="function")return f=f(),p(f),function(){p(null)};if(p!=null)return f=f(),p.current=f,function(){p.current=null}}function zC(f,p,k){return k=k!=null?k.concat([f]):null,Uu(4,4,wp.bind(null,p,f),k)}function Iw(){}function VC(f,p){var k=No();p=p===void 0?null:p;var E=k.memoizedState;return E!==null&&p!==null&&xp(p,E[1])?E[0]:(k.memoizedState=[f,p],f)}function UC(f,p){var k=No();p=p===void 0?null:p;var E=k.memoizedState;return E!==null&&p!==null&&xp(p,E[1])?E[0]:(f=f(),k.memoizedState=[f,p],f)}function HC(f,p,k){return(cc&21)===0?(f.baseState&&(f.baseState=!1,sl=!0),f.memoizedState=k):(mr(k,p)||(k=Eu(),gs.lanes|=k,Jf|=k,f.baseState=!0),p)}function tZ(f,p){var k=rr;rr=k!==0&&4>k?k:4,f(!0);var E=pp.transition;pp.transition={};try{f(!1),p()}finally{rr=k,pp.transition=E}}function WC(){return No().memoizedState}function nZ(f,p,k){var E=Hh(f);if(k={lane:E,action:k,hasEagerState:!1,eagerState:null,next:null},KC(f))GC(p,k);else if(k=Zc(f,p,k,E),k!==null){var q=Po();rd(k,f,E,q),ZC(k,p,E)}}function rZ(f,p,k){var E=Hh(f),q={lane:E,action:k,hasEagerState:!1,eagerState:null,next:null};if(KC(f))GC(p,q);else{var K=f.alternate;if(f.lanes===0&&(K===null||K.lanes===0)&&(K=p.lastRenderedReducer,K!==null))try{var le=p.lastRenderedState,Ae=K(le,k);if(q.hasEagerState=!0,q.eagerState=Ae,mr(Ae,le)){var Fe=p.interleaved;Fe===null?(q.next=q,Kd(p)):(q.next=Fe.next,Fe.next=q),p.interleaved=q;return}}catch{}finally{}k=Zc(f,p,q,E),k!==null&&(q=Po(),rd(k,f,E,q),ZC(k,p,E))}}function KC(f){var p=f.alternate;return f===gs||p!==null&&p===gs}function GC(f,p){Qc=$h=!0;var k=f.pending;k===null?p.next=p:(p.next=k.next,k.next=p),f.pending=p}function ZC(f,p,k){if((k&4194240)!==0){var E=p.lanes;E&=f.pendingLanes,k|=E,p.lanes=k,$i(f,k)}}var Ny={readContext:Gs,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},sZ={readContext:Gs,useCallback:function(f,p){return Nl().memoizedState=[f,p===void 0?null:p],f},useContext:Gs,useEffect:yp,useImperativeHandle:function(f,p,k){return k=k!=null?k.concat([f]):null,kl(4194308,4,wp.bind(null,p,f),k)},useLayoutEffect:function(f,p){return kl(4194308,4,f,p)},useInsertionEffect:function(f,p){return kl(4,2,f,p)},useMemo:function(f,p){var k=Nl();return p=p===void 0?null:p,f=f(),k.memoizedState=[f,p],f},useReducer:function(f,p,k){var E=Nl();return p=k!==void 0?k(p):p,E.memoizedState=E.baseState=p,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:p},E.queue=f,f=f.dispatch=nZ.bind(null,gs,f),[E.memoizedState,f]},useRef:function(f){var p=Nl();return f={current:f},p.memoizedState=f},useState:Qf,useDebugValue:Iw,useDeferredValue:function(f){return Nl().memoizedState=f},useTransition:function(){var f=Qf(!1),p=f[0];return f=tZ.bind(null,f[1]),Nl().memoizedState=f,[p,f]},useMutableSource:function(){},useSyncExternalStore:function(f,p,k){var E=gs,q=Nl();if(st){if(k===void 0)throw Error(r(407));k=k()}else{if(k=p(),fi===null)throw Error(r(349));(cc&30)!==0||jy(E,p,k)}q.memoizedState=k;var K={value:k,getSnapshot:p};return q.queue=K,yp(wy.bind(null,E,K,f),[f]),E.flags|=2048,ko(9,Kg.bind(null,E,K,k,p),void 0,null),k},useId:function(){var f=Nl(),p=fi.identifierPrefix;if(st){var k=Ge,E=Ke;k=(E&~(1<<32-En(E)-1)).toString(32)+k,p=":"+p+"R"+k,k=Bh++,0<k&&(p+="H"+k.toString(32)),p+=":"}else k=Dw++,p=":"+p+"r"+k.toString(32)+":";return f.memoizedState=p},unstable_isNewReconciler:!1},aZ={readContext:Gs,useCallback:VC,useContext:Gs,useEffect:bp,useImperativeHandle:zC,useInsertionEffect:_y,useLayoutEffect:jp,useMemo:UC,useReducer:gp,useRef:Jc,useState:function(){return gp(Xf)},useDebugValue:Iw,useDeferredValue:function(f){var p=No();return HC(p,Zs.memoizedState,f)},useTransition:function(){var f=gp(Xf)[0],p=No().memoizedState;return[f,p]},useMutableSource:by,useSyncExternalStore:Wg,useId:WC,unstable_isNewReconciler:!1},iZ={readContext:Gs,useCallback:VC,useContext:Gs,useEffect:bp,useImperativeHandle:zC,useInsertionEffect:_y,useLayoutEffect:jp,useMemo:UC,useReducer:Zd,useRef:Jc,useState:function(){return Zd(Xf)},useDebugValue:Iw,useDeferredValue:function(f){var p=No();return Zs===null?p.memoizedState=f:HC(p,Zs.memoizedState,f)},useTransition:function(){var f=Zd(Xf)[0],p=No().memoizedState;return[f,p]},useMutableSource:by,useSyncExternalStore:Wg,useId:WC,unstable_isNewReconciler:!1};function ed(f,p){if(f&&f.defaultProps){p=ue({},p),f=f.defaultProps;for(var k in f)p[k]===void 0&&(p[k]=f[k]);return p}return p}function Rw(f,p,k,E){p=f.memoizedState,k=k(E,p),k=k==null?p:ue({},p,k),f.memoizedState=k,f.lanes===0&&(f.updateQueue.baseState=k)}var ky={isMounted:function(f){return(f=f._reactInternals)?Us(f)===f:!1},enqueueSetState:function(f,p,k){f=f._reactInternals;var E=Po(),q=Hh(f),K=tl(E,q);K.payload=p,k!=null&&(K.callback=k),p=nl(f,K,q),p!==null&&(rd(p,f,q,E),zu(p,f,q))},enqueueReplaceState:function(f,p,k){f=f._reactInternals;var E=Po(),q=Hh(f),K=tl(E,q);K.tag=1,K.payload=p,k!=null&&(K.callback=k),p=nl(f,K,q),p!==null&&(rd(p,f,q,E),zu(p,f,q))},enqueueForceUpdate:function(f,p){f=f._reactInternals;var k=Po(),E=Hh(f),q=tl(k,E);q.tag=2,p!=null&&(q.callback=p),p=nl(f,q,E),p!==null&&(rd(p,f,E,k),zu(p,f,E))}};function YC(f,p,k,E,q,K,le){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(E,K,le):p.prototype&&p.prototype.isPureReactComponent?!Ui(k,E)||!Ui(q,K):!0}function XC(f,p,k){var E=!1,q=Wd,K=p.contextType;return typeof K=="object"&&K!==null?K=Gs(K):(q=Zi(p)?Bu:Ua.current,E=p.contextTypes,K=(E=E!=null)?Dh(f,q):Wd),p=new p(k,K),f.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=ky,f.stateNode=p,p._reactInternals=f,E&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=q,f.__reactInternalMemoizedMaskedChildContext=K),p}function QC(f,p,k,E){f=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(k,E),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(k,E),p.state!==f&&ky.enqueueReplaceState(p,p.state,null)}function Fw(f,p,k,E){var q=f.stateNode;q.props=k,q.state=f.memoizedState,q.refs={},fp(f);var K=p.contextType;typeof K=="object"&&K!==null?q.context=Gs(K):(K=Zi(p)?Bu:Ua.current,q.context=Dh(f,K)),q.state=f.memoizedState,K=p.getDerivedStateFromProps,typeof K=="function"&&(Rw(f,p,K,k),q.state=f.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(p=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),p!==q.state&&ky.enqueueReplaceState(q,q.state,null),Yc(f,k,q,E),q.state=f.memoizedState),typeof q.componentDidMount=="function"&&(f.flags|=4194308)}function _p(f,p){try{var k="",E=p;do k+=be(E),E=E.return;while(E);var q=k}catch(K){q=`
Error generating stack: `+K.message+`
`+K.stack}return{value:f,source:p,stack:q,digest:null}}function $w(f,p,k){return{value:f,source:null,stack:k??null,digest:p??null}}function Bw(f,p){try{console.error(p.value)}catch(k){setTimeout(function(){throw k})}}var oZ=typeof WeakMap=="function"?WeakMap:Map;function JC(f,p,k){k=tl(-1,k),k.tag=3,k.payload={element:null};var E=p.value;return k.callback=function(){Oy||(Oy=!0,t2=E),Bw(f,p)},k}function eT(f,p,k){k=tl(-1,k),k.tag=3;var E=f.type.getDerivedStateFromError;if(typeof E=="function"){var q=p.value;k.payload=function(){return E(q)},k.callback=function(){Bw(f,p)}}var K=f.stateNode;return K!==null&&typeof K.componentDidCatch=="function"&&(k.callback=function(){Bw(f,p),typeof E!="function"&&(Vh===null?Vh=new Set([this]):Vh.add(this));var le=p.stack;this.componentDidCatch(p.value,{componentStack:le!==null?le:""})}),k}function tT(f,p,k){var E=f.pingCache;if(E===null){E=f.pingCache=new oZ;var q=new Set;E.set(p,q)}else q=E.get(p),q===void 0&&(q=new Set,E.set(p,q));q.has(k)||(q.add(k),f=jZ.bind(null,f,p,k),p.then(f,f))}function nT(f){do{var p;if((p=f.tag===13)&&(p=f.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return f;f=f.return}while(f!==null);return null}function rT(f,p,k,E,q){return(f.mode&1)===0?(f===p?f.flags|=65536:(f.flags|=128,k.flags|=131072,k.flags&=-52805,k.tag===1&&(k.alternate===null?k.tag=17:(p=tl(-1,1),p.tag=2,nl(k,p,1))),k.lanes|=1),f):(f.flags|=65536,f.lanes=q,f)}var lZ=A.ReactCurrentOwner,sl=!1;function So(f,p,k,E){p.child=f===null?Cr(p,null,k,E):ua(p,f.child,k,E)}function sT(f,p,k,E,q){k=k.render;var K=p.ref;return Ss(p,q),E=Yf(f,p,k,E,K,q),k=dc(),f!==null&&!sl?(p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~q,Hu(f,p,q)):(st&&k&&rt(p),p.flags|=1,So(f,p,E,q),p.child)}function aT(f,p,k,E,q){if(f===null){var K=k.type;return typeof K=="function"&&!l2(K)&&K.defaultProps===void 0&&k.compare===null&&k.defaultProps===void 0?(p.tag=15,p.type=K,iT(f,p,K,E,q)):(f=Fy(k.type,null,E,p,p.mode,q),f.ref=p.ref,f.return=p,p.child=f)}if(K=f.child,(f.lanes&q)===0){var le=K.memoizedProps;if(k=k.compare,k=k!==null?k:Ui,k(le,E)&&f.ref===p.ref)return Hu(f,p,q)}return p.flags|=1,f=Kh(K,E),f.ref=p.ref,f.return=p,p.child=f}function iT(f,p,k,E,q){if(f!==null){var K=f.memoizedProps;if(Ui(K,E)&&f.ref===p.ref)if(sl=!1,p.pendingProps=E=K,(f.lanes&q)!==0)(f.flags&131072)!==0&&(sl=!0);else return p.lanes=f.lanes,Hu(f,p,q)}return qw(f,p,k,E,q)}function oT(f,p,k){var E=p.pendingProps,q=E.children,K=f!==null?f.memoizedState:null;if(E.mode==="hidden")if((p.mode&1)===0)p.memoizedState={baseLanes:0,cachePool:null,transitions:null},zr(kp,Sl),Sl|=k;else{if((k&1073741824)===0)return f=K!==null?K.baseLanes|k:k,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:f,cachePool:null,transitions:null},p.updateQueue=null,zr(kp,Sl),Sl|=f,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},E=K!==null?K.baseLanes:k,zr(kp,Sl),Sl|=E}else K!==null?(E=K.baseLanes|k,p.memoizedState=null):E=k,zr(kp,Sl),Sl|=E;return So(f,p,q,k),p.child}function lT(f,p){var k=p.ref;(f===null&&k!==null||f!==null&&f.ref!==k)&&(p.flags|=512,p.flags|=2097152)}function qw(f,p,k,E,q){var K=Zi(k)?Bu:Ua.current;return K=Dh(p,K),Ss(p,q),k=Yf(f,p,k,E,K,q),E=dc(),f!==null&&!sl?(p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~q,Hu(f,p,q)):(st&&E&&rt(p),p.flags|=1,So(f,p,k,q),p.child)}function cT(f,p,k,E,q){if(Zi(k)){var K=!0;qu(p)}else K=!1;if(Ss(p,q),p.stateNode===null)Py(f,p),XC(p,k,E),Fw(p,k,E,q),E=!0;else if(f===null){var le=p.stateNode,Ae=p.memoizedProps;le.props=Ae;var Fe=le.context,et=k.contextType;typeof et=="object"&&et!==null?et=Gs(et):(et=Zi(k)?Bu:Ua.current,et=Dh(p,et));var _t=k.getDerivedStateFromProps,Pt=typeof _t=="function"||typeof le.getSnapshotBeforeUpdate=="function";Pt||typeof le.UNSAFE_componentWillReceiveProps!="function"&&typeof le.componentWillReceiveProps!="function"||(Ae!==E||Fe!==et)&&QC(p,le,E,et),oc=!1;var bt=p.memoizedState;le.state=bt,Yc(p,E,le,q),Fe=p.memoizedState,Ae!==E||bt!==Fe||Gi.current||oc?(typeof _t=="function"&&(Rw(p,k,_t,E),Fe=p.memoizedState),(Ae=oc||YC(p,k,Ae,E,bt,Fe,et))?(Pt||typeof le.UNSAFE_componentWillMount!="function"&&typeof le.componentWillMount!="function"||(typeof le.componentWillMount=="function"&&le.componentWillMount(),typeof le.UNSAFE_componentWillMount=="function"&&le.UNSAFE_componentWillMount()),typeof le.componentDidMount=="function"&&(p.flags|=4194308)):(typeof le.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=E,p.memoizedState=Fe),le.props=E,le.state=Fe,le.context=et,E=Ae):(typeof le.componentDidMount=="function"&&(p.flags|=4194308),E=!1)}else{le=p.stateNode,zg(f,p),Ae=p.memoizedProps,et=p.type===p.elementType?Ae:ed(p.type,Ae),le.props=et,Pt=p.pendingProps,bt=le.context,Fe=k.contextType,typeof Fe=="object"&&Fe!==null?Fe=Gs(Fe):(Fe=Zi(k)?Bu:Ua.current,Fe=Dh(p,Fe));var Zt=k.getDerivedStateFromProps;(_t=typeof Zt=="function"||typeof le.getSnapshotBeforeUpdate=="function")||typeof le.UNSAFE_componentWillReceiveProps!="function"&&typeof le.componentWillReceiveProps!="function"||(Ae!==Pt||bt!==Fe)&&QC(p,le,E,Fe),oc=!1,bt=p.memoizedState,le.state=bt,Yc(p,E,le,q);var en=p.memoizedState;Ae!==Pt||bt!==en||Gi.current||oc?(typeof Zt=="function"&&(Rw(p,k,Zt,E),en=p.memoizedState),(et=oc||YC(p,k,et,E,bt,en,Fe)||!1)?(_t||typeof le.UNSAFE_componentWillUpdate!="function"&&typeof le.componentWillUpdate!="function"||(typeof le.componentWillUpdate=="function"&&le.componentWillUpdate(E,en,Fe),typeof le.UNSAFE_componentWillUpdate=="function"&&le.UNSAFE_componentWillUpdate(E,en,Fe)),typeof le.componentDidUpdate=="function"&&(p.flags|=4),typeof le.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof le.componentDidUpdate!="function"||Ae===f.memoizedProps&&bt===f.memoizedState||(p.flags|=4),typeof le.getSnapshotBeforeUpdate!="function"||Ae===f.memoizedProps&&bt===f.memoizedState||(p.flags|=1024),p.memoizedProps=E,p.memoizedState=en),le.props=E,le.state=en,le.context=Fe,E=et):(typeof le.componentDidUpdate!="function"||Ae===f.memoizedProps&&bt===f.memoizedState||(p.flags|=4),typeof le.getSnapshotBeforeUpdate!="function"||Ae===f.memoizedProps&&bt===f.memoizedState||(p.flags|=1024),E=!1)}return zw(f,p,k,E,K,q)}function zw(f,p,k,E,q,K){lT(f,p);var le=(p.flags&128)!==0;if(!E&&!le)return q&&vy(p,k,!1),Hu(f,p,K);E=p.stateNode,lZ.current=p;var Ae=le&&typeof k.getDerivedStateFromError!="function"?null:E.render();return p.flags|=1,f!==null&&le?(p.child=ua(p,f.child,null,K),p.child=ua(p,null,Ae,K)):So(f,p,Ae,K),p.memoizedState=E.state,q&&vy(p,k,!0),p.child}function dT(f){var p=f.stateNode;p.pendingContext?gy(f,p.pendingContext,p.pendingContext!==p.context):p.context&&gy(f,p.context,!1),Fh(f,p.containerInfo)}function uT(f,p,k,E,q){return Un(),Rr(q),p.flags|=256,So(f,p,k,E),p.child}var Vw={dehydrated:null,treeContext:null,retryLane:0};function Uw(f){return{baseLanes:f,cachePool:null,transitions:null}}function hT(f,p,k){var E=p.pendingProps,q=os.current,K=!1,le=(p.flags&128)!==0,Ae;if((Ae=le)||(Ae=f!==null&&f.memoizedState===null?!1:(q&2)!==0),Ae?(K=!0,p.flags&=-129):(f===null||f.memoizedState!==null)&&(q|=1),zr(os,q&1),f===null)return qt(p),f=p.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?((p.mode&1)===0?p.lanes=1:f.data==="$!"?p.lanes=8:p.lanes=1073741824,null):(le=E.children,f=E.fallback,K?(E=p.mode,K=p.child,le={mode:"hidden",children:le},(E&1)===0&&K!==null?(K.childLanes=0,K.pendingProps=le):K=$y(le,E,0,null),f=rm(f,E,k,null),K.return=p,f.return=p,K.sibling=f,p.child=K,p.child.memoizedState=Uw(k),p.memoizedState=Vw,f):Hw(p,le));if(q=f.memoizedState,q!==null&&(Ae=q.dehydrated,Ae!==null))return cZ(f,p,le,E,Ae,q,k);if(K){K=E.fallback,le=p.mode,q=f.child,Ae=q.sibling;var Fe={mode:"hidden",children:E.children};return(le&1)===0&&p.child!==q?(E=p.child,E.childLanes=0,E.pendingProps=Fe,p.deletions=null):(E=Kh(q,Fe),E.subtreeFlags=q.subtreeFlags&14680064),Ae!==null?K=Kh(Ae,K):(K=rm(K,le,k,null),K.flags|=2),K.return=p,E.return=p,E.sibling=K,p.child=E,E=K,K=p.child,le=f.child.memoizedState,le=le===null?Uw(k):{baseLanes:le.baseLanes|k,cachePool:null,transitions:le.transitions},K.memoizedState=le,K.childLanes=f.childLanes&~k,p.memoizedState=Vw,E}return K=f.child,f=K.sibling,E=Kh(K,{mode:"visible",children:E.children}),(p.mode&1)===0&&(E.lanes=k),E.return=p,E.sibling=null,f!==null&&(k=p.deletions,k===null?(p.deletions=[f],p.flags|=16):k.push(f)),p.child=E,p.memoizedState=null,E}function Hw(f,p){return p=$y({mode:"visible",children:p},f.mode,0,null),p.return=f,f.child=p}function Sy(f,p,k,E){return E!==null&&Rr(E),ua(p,f.child,null,k),f=Hw(p,p.pendingProps.children),f.flags|=2,p.memoizedState=null,f}function cZ(f,p,k,E,q,K,le){if(k)return p.flags&256?(p.flags&=-257,E=$w(Error(r(422))),Sy(f,p,le,E)):p.memoizedState!==null?(p.child=f.child,p.flags|=128,null):(K=E.fallback,q=p.mode,E=$y({mode:"visible",children:E.children},q,0,null),K=rm(K,q,le,null),K.flags|=2,E.return=p,K.return=p,E.sibling=K,p.child=E,(p.mode&1)!==0&&ua(p,f.child,null,le),p.child.memoizedState=Uw(le),p.memoizedState=Vw,K);if((p.mode&1)===0)return Sy(f,p,le,null);if(q.data==="$!"){if(E=q.nextSibling&&q.nextSibling.dataset,E)var Ae=E.dgst;return E=Ae,K=Error(r(419)),E=$w(K,E,void 0),Sy(f,p,le,E)}if(Ae=(le&f.childLanes)!==0,sl||Ae){if(E=fi,E!==null){switch(le&-le){case 4:q=2;break;case 16:q=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:q=32;break;case 536870912:q=268435456;break;default:q=0}q=(q&(E.suspendedLanes|le))!==0?0:q,q!==0&&q!==K.retryLane&&(K.retryLane=q,Tr(f,q),rd(E,f,q,-1))}return o2(),E=$w(Error(r(421))),Sy(f,p,le,E)}return q.data==="$?"?(p.flags|=128,p.child=f.child,p=wZ.bind(null,f),q._reactRetry=p,null):(f=K.treeContext,at=za(q.nextSibling),Be=p,st=!0,lt=null,f!==null&&(ge[je++]=Ke,ge[je++]=Ge,ge[je++]=Re,Ke=f.id,Ge=f.overflow,Re=p),p=Hw(p,E.children),p.flags|=4096,p)}function fT(f,p,k){f.lanes|=p;var E=f.alternate;E!==null&&(E.lanes|=p),el(f.return,p,k)}function Ww(f,p,k,E,q){var K=f.memoizedState;K===null?f.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:E,tail:k,tailMode:q}:(K.isBackwards=p,K.rendering=null,K.renderingStartTime=0,K.last=E,K.tail=k,K.tailMode=q)}function mT(f,p,k){var E=p.pendingProps,q=E.revealOrder,K=E.tail;if(So(f,p,E.children,k),E=os.current,(E&2)!==0)E=E&1|2,p.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=p.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&fT(f,k,p);else if(f.tag===19)fT(f,k,p);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===p)break e;for(;f.sibling===null;){if(f.return===null||f.return===p)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}E&=1}if(zr(os,E),(p.mode&1)===0)p.memoizedState=null;else switch(q){case"forwards":for(k=p.child,q=null;k!==null;)f=k.alternate,f!==null&&_l(f)===null&&(q=k),k=k.sibling;k=q,k===null?(q=p.child,p.child=null):(q=k.sibling,k.sibling=null),Ww(p,!1,q,k,K);break;case"backwards":for(k=null,q=p.child,p.child=null;q!==null;){if(f=q.alternate,f!==null&&_l(f)===null){p.child=q;break}f=q.sibling,q.sibling=k,k=q,q=f}Ww(p,!0,k,null,K);break;case"together":Ww(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Py(f,p){(p.mode&1)===0&&f!==null&&(f.alternate=null,p.alternate=null,p.flags|=2)}function Hu(f,p,k){if(f!==null&&(p.dependencies=f.dependencies),Jf|=p.lanes,(k&p.childLanes)===0)return null;if(f!==null&&p.child!==f.child)throw Error(r(153));if(p.child!==null){for(f=p.child,k=Kh(f,f.pendingProps),p.child=k,k.return=p;f.sibling!==null;)f=f.sibling,k=k.sibling=Kh(f,f.pendingProps),k.return=p;k.sibling=null}return p.child}function dZ(f,p,k){switch(p.tag){case 3:dT(p),Un();break;case 5:yy(p);break;case 1:Zi(p.type)&&qu(p);break;case 4:Fh(p,p.stateNode.containerInfo);break;case 10:var E=p.type._context,q=p.memoizedProps.value;zr(ui,E._currentValue),E._currentValue=q;break;case 13:if(E=p.memoizedState,E!==null)return E.dehydrated!==null?(zr(os,os.current&1),p.flags|=128,null):(k&p.child.childLanes)!==0?hT(f,p,k):(zr(os,os.current&1),f=Hu(f,p,k),f!==null?f.sibling:null);zr(os,os.current&1);break;case 19:if(E=(k&p.childLanes)!==0,(f.flags&128)!==0){if(E)return mT(f,p,k);p.flags|=128}if(q=p.memoizedState,q!==null&&(q.rendering=null,q.tail=null,q.lastEffect=null),zr(os,os.current),E)break;return null;case 22:case 23:return p.lanes=0,oT(f,p,k)}return Hu(f,p,k)}var pT,Kw,xT,gT;pT=function(f,p){for(var k=p.child;k!==null;){if(k.tag===5||k.tag===6)f.appendChild(k.stateNode);else if(k.tag!==4&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===p)break;for(;k.sibling===null;){if(k.return===null||k.return===p)return;k=k.return}k.sibling.return=k.return,k=k.sibling}},Kw=function(){},xT=function(f,p,k,E){var q=f.memoizedProps;if(q!==E){f=p.stateNode,Xc(_o.current);var K=null;switch(k){case"input":q=xt(f,q),E=xt(f,E),K=[];break;case"select":q=ue({},q,{value:void 0}),E=ue({},E,{value:void 0}),K=[];break;case"textarea":q=St(f,q),E=St(f,E),K=[];break;default:typeof q.onClick!="function"&&typeof E.onClick=="function"&&(f.onclick=pt)}ur(k,E);var le;k=null;for(et in q)if(!E.hasOwnProperty(et)&&q.hasOwnProperty(et)&&q[et]!=null)if(et==="style"){var Ae=q[et];for(le in Ae)Ae.hasOwnProperty(le)&&(k||(k={}),k[le]="")}else et!=="dangerouslySetInnerHTML"&&et!=="children"&&et!=="suppressContentEditableWarning"&&et!=="suppressHydrationWarning"&&et!=="autoFocus"&&(a.hasOwnProperty(et)?K||(K=[]):(K=K||[]).push(et,null));for(et in E){var Fe=E[et];if(Ae=q!=null?q[et]:void 0,E.hasOwnProperty(et)&&Fe!==Ae&&(Fe!=null||Ae!=null))if(et==="style")if(Ae){for(le in Ae)!Ae.hasOwnProperty(le)||Fe&&Fe.hasOwnProperty(le)||(k||(k={}),k[le]="");for(le in Fe)Fe.hasOwnProperty(le)&&Ae[le]!==Fe[le]&&(k||(k={}),k[le]=Fe[le])}else k||(K||(K=[]),K.push(et,k)),k=Fe;else et==="dangerouslySetInnerHTML"?(Fe=Fe?Fe.__html:void 0,Ae=Ae?Ae.__html:void 0,Fe!=null&&Ae!==Fe&&(K=K||[]).push(et,Fe)):et==="children"?typeof Fe!="string"&&typeof Fe!="number"||(K=K||[]).push(et,""+Fe):et!=="suppressContentEditableWarning"&&et!=="suppressHydrationWarning"&&(a.hasOwnProperty(et)?(Fe!=null&&et==="onScroll"&&Ar("scroll",f),K||Ae===Fe||(K=[])):(K=K||[]).push(et,Fe))}k&&(K=K||[]).push("style",k);var et=K;(p.updateQueue=et)&&(p.flags|=4)}},gT=function(f,p,k,E){k!==E&&(p.flags|=4)};function Gg(f,p){if(!st)switch(f.tailMode){case"hidden":p=f.tail;for(var k=null;p!==null;)p.alternate!==null&&(k=p),p=p.sibling;k===null?f.tail=null:k.sibling=null;break;case"collapsed":k=f.tail;for(var E=null;k!==null;)k.alternate!==null&&(E=k),k=k.sibling;E===null?p||f.tail===null?f.tail=null:f.tail.sibling=null:E.sibling=null}}function Xi(f){var p=f.alternate!==null&&f.alternate.child===f.child,k=0,E=0;if(p)for(var q=f.child;q!==null;)k|=q.lanes|q.childLanes,E|=q.subtreeFlags&14680064,E|=q.flags&14680064,q.return=f,q=q.sibling;else for(q=f.child;q!==null;)k|=q.lanes|q.childLanes,E|=q.subtreeFlags,E|=q.flags,q.return=f,q=q.sibling;return f.subtreeFlags|=E,f.childLanes=k,p}function uZ(f,p,k){var E=p.pendingProps;switch($e(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xi(p),null;case 1:return Zi(p.type)&&hp(),Xi(p),null;case 3:return E=p.stateNode,lc(),Ir(Gi),Ir(Ua),Hg(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(f===null||f.child===null)&&(br(p)?p.flags|=4:f===null||f.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,lt!==null&&(s2(lt),lt=null))),Kw(f,p),Xi(p),null;case 5:Vg(p);var q=Xc(Gd.current);if(k=p.type,f!==null&&p.stateNode!=null)xT(f,p,k,E,q),f.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!E){if(p.stateNode===null)throw Error(r(166));return Xi(p),null}if(f=Xc(_o.current),br(p)){E=p.stateNode,k=p.type;var K=p.memoizedProps;switch(E[Jo]=p,E[Wc]=K,f=(p.mode&1)!==0,k){case"dialog":Ar("cancel",E),Ar("close",E);break;case"iframe":case"object":case"embed":Ar("load",E);break;case"video":case"audio":for(q=0;q<jl.length;q++)Ar(jl[q],E);break;case"source":Ar("error",E);break;case"img":case"image":case"link":Ar("error",E),Ar("load",E);break;case"details":Ar("toggle",E);break;case"input":Xe(E,K),Ar("invalid",E);break;case"select":E._wrapperState={wasMultiple:!!K.multiple},Ar("invalid",E);break;case"textarea":Kt(E,K),Ar("invalid",E)}ur(k,K),q=null;for(var le in K)if(K.hasOwnProperty(le)){var Ae=K[le];le==="children"?typeof Ae=="string"?E.textContent!==Ae&&(K.suppressHydrationWarning!==!0&&Je(E.textContent,Ae,f),q=["children",Ae]):typeof Ae=="number"&&E.textContent!==""+Ae&&(K.suppressHydrationWarning!==!0&&Je(E.textContent,Ae,f),q=["children",""+Ae]):a.hasOwnProperty(le)&&Ae!=null&&le==="onScroll"&&Ar("scroll",E)}switch(k){case"input":Ue(E),Ft(E,K,!0);break;case"textarea":Ue(E),jn(E);break;case"select":case"option":break;default:typeof K.onClick=="function"&&(E.onclick=pt)}E=q,p.updateQueue=E,E!==null&&(p.flags|=4)}else{le=q.nodeType===9?q:q.ownerDocument,f==="http://www.w3.org/1999/xhtml"&&(f=Ln(k)),f==="http://www.w3.org/1999/xhtml"?k==="script"?(f=le.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild)):typeof E.is=="string"?f=le.createElement(k,{is:E.is}):(f=le.createElement(k),k==="select"&&(le=f,E.multiple?le.multiple=!0:E.size&&(le.size=E.size))):f=le.createElementNS(f,k),f[Jo]=p,f[Wc]=E,pT(f,p,!1,!1),p.stateNode=f;e:{switch(le=Nr(k,E),k){case"dialog":Ar("cancel",f),Ar("close",f),q=E;break;case"iframe":case"object":case"embed":Ar("load",f),q=E;break;case"video":case"audio":for(q=0;q<jl.length;q++)Ar(jl[q],f);q=E;break;case"source":Ar("error",f),q=E;break;case"img":case"image":case"link":Ar("error",f),Ar("load",f),q=E;break;case"details":Ar("toggle",f),q=E;break;case"input":Xe(f,E),q=xt(f,E),Ar("invalid",f);break;case"option":q=E;break;case"select":f._wrapperState={wasMultiple:!!E.multiple},q=ue({},E,{value:void 0}),Ar("invalid",f);break;case"textarea":Kt(f,E),q=St(f,E),Ar("invalid",f);break;default:q=E}ur(k,q),Ae=q;for(K in Ae)if(Ae.hasOwnProperty(K)){var Fe=Ae[K];K==="style"?Na(f,Fe):K==="dangerouslySetInnerHTML"?(Fe=Fe?Fe.__html:void 0,Fe!=null&&pn(f,Fe)):K==="children"?typeof Fe=="string"?(k!=="textarea"||Fe!=="")&&Tn(f,Fe):typeof Fe=="number"&&Tn(f,""+Fe):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(a.hasOwnProperty(K)?Fe!=null&&K==="onScroll"&&Ar("scroll",f):Fe!=null&&N(f,K,Fe,le))}switch(k){case"input":Ue(f),Ft(f,E,!1);break;case"textarea":Ue(f),jn(f);break;case"option":E.value!=null&&f.setAttribute("value",""+Pe(E.value));break;case"select":f.multiple=!!E.multiple,K=E.value,K!=null?Tt(f,!!E.multiple,K,!1):E.defaultValue!=null&&Tt(f,!!E.multiple,E.defaultValue,!0);break;default:typeof q.onClick=="function"&&(f.onclick=pt)}switch(k){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}}E&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return Xi(p),null;case 6:if(f&&p.stateNode!=null)gT(f,p,f.memoizedProps,E);else{if(typeof E!="string"&&p.stateNode===null)throw Error(r(166));if(k=Xc(Gd.current),Xc(_o.current),br(p)){if(E=p.stateNode,k=p.memoizedProps,E[Jo]=p,(K=E.nodeValue!==k)&&(f=Be,f!==null))switch(f.tag){case 3:Je(E.nodeValue,k,(f.mode&1)!==0);break;case 5:f.memoizedProps.suppressHydrationWarning!==!0&&Je(E.nodeValue,k,(f.mode&1)!==0)}K&&(p.flags|=4)}else E=(k.nodeType===9?k:k.ownerDocument).createTextNode(E),E[Jo]=p,p.stateNode=E}return Xi(p),null;case 13:if(Ir(os),E=p.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(st&&at!==null&&(p.mode&1)!==0&&(p.flags&128)===0)hr(),Un(),p.flags|=98560,K=!1;else if(K=br(p),E!==null&&E.dehydrated!==null){if(f===null){if(!K)throw Error(r(318));if(K=p.memoizedState,K=K!==null?K.dehydrated:null,!K)throw Error(r(317));K[Jo]=p}else Un(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Xi(p),K=!1}else lt!==null&&(s2(lt),lt=null),K=!0;if(!K)return p.flags&65536?p:null}return(p.flags&128)!==0?(p.lanes=k,p):(E=E!==null,E!==(f!==null&&f.memoizedState!==null)&&E&&(p.child.flags|=8192,(p.mode&1)!==0&&(f===null||(os.current&1)!==0?Wa===0&&(Wa=3):o2())),p.updateQueue!==null&&(p.flags|=4),Xi(p),null);case 4:return lc(),Kw(f,p),f===null&&rc(p.stateNode.containerInfo),Xi(p),null;case 10:return Yi(p.type._context),Xi(p),null;case 17:return Zi(p.type)&&hp(),Xi(p),null;case 19:if(Ir(os),K=p.memoizedState,K===null)return Xi(p),null;if(E=(p.flags&128)!==0,le=K.rendering,le===null)if(E)Gg(K,!1);else{if(Wa!==0||f!==null&&(f.flags&128)!==0)for(f=p.child;f!==null;){if(le=_l(f),le!==null){for(p.flags|=128,Gg(K,!1),E=le.updateQueue,E!==null&&(p.updateQueue=E,p.flags|=4),p.subtreeFlags=0,E=k,k=p.child;k!==null;)K=k,f=E,K.flags&=14680066,le=K.alternate,le===null?(K.childLanes=0,K.lanes=f,K.child=null,K.subtreeFlags=0,K.memoizedProps=null,K.memoizedState=null,K.updateQueue=null,K.dependencies=null,K.stateNode=null):(K.childLanes=le.childLanes,K.lanes=le.lanes,K.child=le.child,K.subtreeFlags=0,K.deletions=null,K.memoizedProps=le.memoizedProps,K.memoizedState=le.memoizedState,K.updateQueue=le.updateQueue,K.type=le.type,f=le.dependencies,K.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),k=k.sibling;return zr(os,os.current&1|2),p.child}f=f.sibling}K.tail!==null&&as()>Sp&&(p.flags|=128,E=!0,Gg(K,!1),p.lanes=4194304)}else{if(!E)if(f=_l(le),f!==null){if(p.flags|=128,E=!0,k=f.updateQueue,k!==null&&(p.updateQueue=k,p.flags|=4),Gg(K,!0),K.tail===null&&K.tailMode==="hidden"&&!le.alternate&&!st)return Xi(p),null}else 2*as()-K.renderingStartTime>Sp&&k!==1073741824&&(p.flags|=128,E=!0,Gg(K,!1),p.lanes=4194304);K.isBackwards?(le.sibling=p.child,p.child=le):(k=K.last,k!==null?k.sibling=le:p.child=le,K.last=le)}return K.tail!==null?(p=K.tail,K.rendering=p,K.tail=p.sibling,K.renderingStartTime=as(),p.sibling=null,k=os.current,zr(os,E?k&1|2:k&1),p):(Xi(p),null);case 22:case 23:return i2(),E=p.memoizedState!==null,f!==null&&f.memoizedState!==null!==E&&(p.flags|=8192),E&&(p.mode&1)!==0?(Sl&1073741824)!==0&&(Xi(p),p.subtreeFlags&6&&(p.flags|=8192)):Xi(p),null;case 24:return null;case 25:return null}throw Error(r(156,p.tag))}function hZ(f,p){switch($e(p),p.tag){case 1:return Zi(p.type)&&hp(),f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 3:return lc(),Ir(Gi),Ir(Ua),Hg(),f=p.flags,(f&65536)!==0&&(f&128)===0?(p.flags=f&-65537|128,p):null;case 5:return Vg(p),null;case 13:if(Ir(os),f=p.memoizedState,f!==null&&f.dehydrated!==null){if(p.alternate===null)throw Error(r(340));Un()}return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 19:return Ir(os),null;case 4:return lc(),null;case 10:return Yi(p.type._context),null;case 22:case 23:return i2(),null;case 24:return null;default:return null}}var Ay=!1,Qi=!1,fZ=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function Np(f,p){var k=f.ref;if(k!==null)if(typeof k=="function")try{k(null)}catch(E){Ys(f,p,E)}else k.current=null}function Gw(f,p,k){try{k()}catch(E){Ys(f,p,E)}}var vT=!1;function mZ(f,p){if(zt=Ic,f=zd(),Vc(f)){if("selectionStart"in f)var k={start:f.selectionStart,end:f.selectionEnd};else e:{k=(k=f.ownerDocument)&&k.defaultView||window;var E=k.getSelection&&k.getSelection();if(E&&E.rangeCount!==0){k=E.anchorNode;var q=E.anchorOffset,K=E.focusNode;E=E.focusOffset;try{k.nodeType,K.nodeType}catch{k=null;break e}var le=0,Ae=-1,Fe=-1,et=0,_t=0,Pt=f,bt=null;t:for(;;){for(var Zt;Pt!==k||q!==0&&Pt.nodeType!==3||(Ae=le+q),Pt!==K||E!==0&&Pt.nodeType!==3||(Fe=le+E),Pt.nodeType===3&&(le+=Pt.nodeValue.length),(Zt=Pt.firstChild)!==null;)bt=Pt,Pt=Zt;for(;;){if(Pt===f)break t;if(bt===k&&++et===q&&(Ae=le),bt===K&&++_t===E&&(Fe=le),(Zt=Pt.nextSibling)!==null)break;Pt=bt,bt=Pt.parentNode}Pt=Zt}k=Ae===-1||Fe===-1?null:{start:Ae,end:Fe}}else k=null}k=k||{start:0,end:0}}else k=null;for(dn={focusedElem:f,selectionRange:k},Ic=!1,Qt=p;Qt!==null;)if(p=Qt,f=p.child,(p.subtreeFlags&1028)!==0&&f!==null)f.return=p,Qt=f;else for(;Qt!==null;){p=Qt;try{var en=p.alternate;if((p.flags&1024)!==0)switch(p.tag){case 0:case 11:case 15:break;case 1:if(en!==null){var sn=en.memoizedProps,ma=en.memoizedState,Ye=p.stateNode,qe=Ye.getSnapshotBeforeUpdate(p.elementType===p.type?sn:ed(p.type,sn),ma);Ye.__reactInternalSnapshotBeforeUpdate=qe}break;case 3:var Qe=p.stateNode.containerInfo;Qe.nodeType===1?Qe.textContent="":Qe.nodeType===9&&Qe.documentElement&&Qe.removeChild(Qe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Mt){Ys(p,p.return,Mt)}if(f=p.sibling,f!==null){f.return=p.return,Qt=f;break}Qt=p.return}return en=vT,vT=!1,en}function Zg(f,p,k){var E=p.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var q=E=E.next;do{if((q.tag&f)===f){var K=q.destroy;q.destroy=void 0,K!==void 0&&Gw(p,k,K)}q=q.next}while(q!==E)}}function Cy(f,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var k=p=p.next;do{if((k.tag&f)===f){var E=k.create;k.destroy=E()}k=k.next}while(k!==p)}}function Zw(f){var p=f.ref;if(p!==null){var k=f.stateNode;switch(f.tag){case 5:f=k;break;default:f=k}typeof p=="function"?p(f):p.current=f}}function yT(f){var p=f.alternate;p!==null&&(f.alternate=null,yT(p)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(p=f.stateNode,p!==null&&(delete p[Jo],delete p[Wc],delete p[da],delete p[Fg],delete p[$g])),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function bT(f){return f.tag===5||f.tag===3||f.tag===4}function jT(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||bT(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function Yw(f,p,k){var E=f.tag;if(E===5||E===6)f=f.stateNode,p?k.nodeType===8?k.parentNode.insertBefore(f,p):k.insertBefore(f,p):(k.nodeType===8?(p=k.parentNode,p.insertBefore(f,k)):(p=k,p.appendChild(f)),k=k._reactRootContainer,k!=null||p.onclick!==null||(p.onclick=pt));else if(E!==4&&(f=f.child,f!==null))for(Yw(f,p,k),f=f.sibling;f!==null;)Yw(f,p,k),f=f.sibling}function Xw(f,p,k){var E=f.tag;if(E===5||E===6)f=f.stateNode,p?k.insertBefore(f,p):k.appendChild(f);else if(E!==4&&(f=f.child,f!==null))for(Xw(f,p,k),f=f.sibling;f!==null;)Xw(f,p,k),f=f.sibling}var Mi=null,td=!1;function zh(f,p,k){for(k=k.child;k!==null;)wT(f,p,k),k=k.sibling}function wT(f,p,k){if(_i&&typeof _i.onCommitFiberUnmount=="function")try{_i.onCommitFiberUnmount(Wl,k)}catch{}switch(k.tag){case 5:Qi||Np(k,p);case 6:var E=Mi,q=td;Mi=null,zh(f,p,k),Mi=E,td=q,Mi!==null&&(td?(f=Mi,k=k.stateNode,f.nodeType===8?f.parentNode.removeChild(k):f.removeChild(k)):Mi.removeChild(k.stateNode));break;case 18:Mi!==null&&(td?(f=Mi,k=k.stateNode,f.nodeType===8?Gf(f.parentNode,k):f.nodeType===1&&Gf(f,k),sa(f)):Gf(Mi,k.stateNode));break;case 4:E=Mi,q=td,Mi=k.stateNode.containerInfo,td=!0,zh(f,p,k),Mi=E,td=q;break;case 0:case 11:case 14:case 15:if(!Qi&&(E=k.updateQueue,E!==null&&(E=E.lastEffect,E!==null))){q=E=E.next;do{var K=q,le=K.destroy;K=K.tag,le!==void 0&&((K&2)!==0||(K&4)!==0)&&Gw(k,p,le),q=q.next}while(q!==E)}zh(f,p,k);break;case 1:if(!Qi&&(Np(k,p),E=k.stateNode,typeof E.componentWillUnmount=="function"))try{E.props=k.memoizedProps,E.state=k.memoizedState,E.componentWillUnmount()}catch(Ae){Ys(k,p,Ae)}zh(f,p,k);break;case 21:zh(f,p,k);break;case 22:k.mode&1?(Qi=(E=Qi)||k.memoizedState!==null,zh(f,p,k),Qi=E):zh(f,p,k);break;default:zh(f,p,k)}}function _T(f){var p=f.updateQueue;if(p!==null){f.updateQueue=null;var k=f.stateNode;k===null&&(k=f.stateNode=new fZ),p.forEach(function(E){var q=_Z.bind(null,f,E);k.has(E)||(k.add(E),E.then(q,q))})}}function nd(f,p){var k=p.deletions;if(k!==null)for(var E=0;E<k.length;E++){var q=k[E];try{var K=f,le=p,Ae=le;e:for(;Ae!==null;){switch(Ae.tag){case 5:Mi=Ae.stateNode,td=!1;break e;case 3:Mi=Ae.stateNode.containerInfo,td=!0;break e;case 4:Mi=Ae.stateNode.containerInfo,td=!0;break e}Ae=Ae.return}if(Mi===null)throw Error(r(160));wT(K,le,q),Mi=null,td=!1;var Fe=q.alternate;Fe!==null&&(Fe.return=null),q.return=null}catch(et){Ys(q,p,et)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)NT(p,f),p=p.sibling}function NT(f,p){var k=f.alternate,E=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:if(nd(p,f),Yd(f),E&4){try{Zg(3,f,f.return),Cy(3,f)}catch(sn){Ys(f,f.return,sn)}try{Zg(5,f,f.return)}catch(sn){Ys(f,f.return,sn)}}break;case 1:nd(p,f),Yd(f),E&512&&k!==null&&Np(k,k.return);break;case 5:if(nd(p,f),Yd(f),E&512&&k!==null&&Np(k,k.return),f.flags&32){var q=f.stateNode;try{Tn(q,"")}catch(sn){Ys(f,f.return,sn)}}if(E&4&&(q=f.stateNode,q!=null)){var K=f.memoizedProps,le=k!==null?k.memoizedProps:K,Ae=f.type,Fe=f.updateQueue;if(f.updateQueue=null,Fe!==null)try{Ae==="input"&&K.type==="radio"&&K.name!=null&&ke(q,K),Nr(Ae,le);var et=Nr(Ae,K);for(le=0;le<Fe.length;le+=2){var _t=Fe[le],Pt=Fe[le+1];_t==="style"?Na(q,Pt):_t==="dangerouslySetInnerHTML"?pn(q,Pt):_t==="children"?Tn(q,Pt):N(q,_t,Pt,et)}switch(Ae){case"input":Bt(q,K);break;case"textarea":mn(q,K);break;case"select":var bt=q._wrapperState.wasMultiple;q._wrapperState.wasMultiple=!!K.multiple;var Zt=K.value;Zt!=null?Tt(q,!!K.multiple,Zt,!1):bt!==!!K.multiple&&(K.defaultValue!=null?Tt(q,!!K.multiple,K.defaultValue,!0):Tt(q,!!K.multiple,K.multiple?[]:"",!1))}q[Wc]=K}catch(sn){Ys(f,f.return,sn)}}break;case 6:if(nd(p,f),Yd(f),E&4){if(f.stateNode===null)throw Error(r(162));q=f.stateNode,K=f.memoizedProps;try{q.nodeValue=K}catch(sn){Ys(f,f.return,sn)}}break;case 3:if(nd(p,f),Yd(f),E&4&&k!==null&&k.memoizedState.isDehydrated)try{sa(p.containerInfo)}catch(sn){Ys(f,f.return,sn)}break;case 4:nd(p,f),Yd(f);break;case 13:nd(p,f),Yd(f),q=f.child,q.flags&8192&&(K=q.memoizedState!==null,q.stateNode.isHidden=K,!K||q.alternate!==null&&q.alternate.memoizedState!==null||(e2=as())),E&4&&_T(f);break;case 22:if(_t=k!==null&&k.memoizedState!==null,f.mode&1?(Qi=(et=Qi)||_t,nd(p,f),Qi=et):nd(p,f),Yd(f),E&8192){if(et=f.memoizedState!==null,(f.stateNode.isHidden=et)&&!_t&&(f.mode&1)!==0)for(Qt=f,_t=f.child;_t!==null;){for(Pt=Qt=_t;Qt!==null;){switch(bt=Qt,Zt=bt.child,bt.tag){case 0:case 11:case 14:case 15:Zg(4,bt,bt.return);break;case 1:Np(bt,bt.return);var en=bt.stateNode;if(typeof en.componentWillUnmount=="function"){E=bt,k=bt.return;try{p=E,en.props=p.memoizedProps,en.state=p.memoizedState,en.componentWillUnmount()}catch(sn){Ys(E,k,sn)}}break;case 5:Np(bt,bt.return);break;case 22:if(bt.memoizedState!==null){PT(Pt);continue}}Zt!==null?(Zt.return=bt,Qt=Zt):PT(Pt)}_t=_t.sibling}e:for(_t=null,Pt=f;;){if(Pt.tag===5){if(_t===null){_t=Pt;try{q=Pt.stateNode,et?(K=q.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none"):(Ae=Pt.stateNode,Fe=Pt.memoizedProps.style,le=Fe!=null&&Fe.hasOwnProperty("display")?Fe.display:null,Ae.style.display=Qn("display",le))}catch(sn){Ys(f,f.return,sn)}}}else if(Pt.tag===6){if(_t===null)try{Pt.stateNode.nodeValue=et?"":Pt.memoizedProps}catch(sn){Ys(f,f.return,sn)}}else if((Pt.tag!==22&&Pt.tag!==23||Pt.memoizedState===null||Pt===f)&&Pt.child!==null){Pt.child.return=Pt,Pt=Pt.child;continue}if(Pt===f)break e;for(;Pt.sibling===null;){if(Pt.return===null||Pt.return===f)break e;_t===Pt&&(_t=null),Pt=Pt.return}_t===Pt&&(_t=null),Pt.sibling.return=Pt.return,Pt=Pt.sibling}}break;case 19:nd(p,f),Yd(f),E&4&&_T(f);break;case 21:break;default:nd(p,f),Yd(f)}}function Yd(f){var p=f.flags;if(p&2){try{e:{for(var k=f.return;k!==null;){if(bT(k)){var E=k;break e}k=k.return}throw Error(r(160))}switch(E.tag){case 5:var q=E.stateNode;E.flags&32&&(Tn(q,""),E.flags&=-33);var K=jT(f);Xw(f,K,q);break;case 3:case 4:var le=E.stateNode.containerInfo,Ae=jT(f);Yw(f,Ae,le);break;default:throw Error(r(161))}}catch(Fe){Ys(f,f.return,Fe)}f.flags&=-3}p&4096&&(f.flags&=-4097)}function pZ(f,p,k){Qt=f,kT(f)}function kT(f,p,k){for(var E=(f.mode&1)!==0;Qt!==null;){var q=Qt,K=q.child;if(q.tag===22&&E){var le=q.memoizedState!==null||Ay;if(!le){var Ae=q.alternate,Fe=Ae!==null&&Ae.memoizedState!==null||Qi;Ae=Ay;var et=Qi;if(Ay=le,(Qi=Fe)&&!et)for(Qt=q;Qt!==null;)le=Qt,Fe=le.child,le.tag===22&&le.memoizedState!==null?AT(q):Fe!==null?(Fe.return=le,Qt=Fe):AT(q);for(;K!==null;)Qt=K,kT(K),K=K.sibling;Qt=q,Ay=Ae,Qi=et}ST(f)}else(q.subtreeFlags&8772)!==0&&K!==null?(K.return=q,Qt=K):ST(f)}}function ST(f){for(;Qt!==null;){var p=Qt;if((p.flags&8772)!==0){var k=p.alternate;try{if((p.flags&8772)!==0)switch(p.tag){case 0:case 11:case 15:Qi||Cy(5,p);break;case 1:var E=p.stateNode;if(p.flags&4&&!Qi)if(k===null)E.componentDidMount();else{var q=p.elementType===p.type?k.memoizedProps:ed(p.type,k.memoizedProps);E.componentDidUpdate(q,k.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var K=p.updateQueue;K!==null&&Vu(p,K,E);break;case 3:var le=p.updateQueue;if(le!==null){if(k=null,p.child!==null)switch(p.child.tag){case 5:k=p.child.stateNode;break;case 1:k=p.child.stateNode}Vu(p,le,k)}break;case 5:var Ae=p.stateNode;if(k===null&&p.flags&4){k=Ae;var Fe=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":Fe.autoFocus&&k.focus();break;case"img":Fe.src&&(k.src=Fe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var et=p.alternate;if(et!==null){var _t=et.memoizedState;if(_t!==null){var Pt=_t.dehydrated;Pt!==null&&sa(Pt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Qi||p.flags&512&&Zw(p)}catch(bt){Ys(p,p.return,bt)}}if(p===f){Qt=null;break}if(k=p.sibling,k!==null){k.return=p.return,Qt=k;break}Qt=p.return}}function PT(f){for(;Qt!==null;){var p=Qt;if(p===f){Qt=null;break}var k=p.sibling;if(k!==null){k.return=p.return,Qt=k;break}Qt=p.return}}function AT(f){for(;Qt!==null;){var p=Qt;try{switch(p.tag){case 0:case 11:case 15:var k=p.return;try{Cy(4,p)}catch(Fe){Ys(p,k,Fe)}break;case 1:var E=p.stateNode;if(typeof E.componentDidMount=="function"){var q=p.return;try{E.componentDidMount()}catch(Fe){Ys(p,q,Fe)}}var K=p.return;try{Zw(p)}catch(Fe){Ys(p,K,Fe)}break;case 5:var le=p.return;try{Zw(p)}catch(Fe){Ys(p,le,Fe)}}}catch(Fe){Ys(p,p.return,Fe)}if(p===f){Qt=null;break}var Ae=p.sibling;if(Ae!==null){Ae.return=p.return,Qt=Ae;break}Qt=p.return}}var xZ=Math.ceil,Ty=A.ReactCurrentDispatcher,Qw=A.ReactCurrentOwner,uc=A.ReactCurrentBatchConfig,jr=0,fi=null,Ma=null,Li=0,Sl=0,kp=wl(0),Wa=0,Yg=null,Jf=0,Ey=0,Jw=0,Xg=null,al=null,e2=0,Sp=1/0,Wu=null,Oy=!1,t2=null,Vh=null,My=!1,Uh=null,Ly=0,Qg=0,n2=null,Dy=-1,Iy=0;function Po(){return(jr&6)!==0?as():Dy!==-1?Dy:Dy=as()}function Hh(f){return(f.mode&1)===0?1:(jr&2)!==0&&Li!==0?Li&-Li:Vr.transition!==null?(Iy===0&&(Iy=Eu()),Iy):(f=rr,f!==0||(f=window.event,f=f===void 0?16:Gn(f.type)),f)}function rd(f,p,k,E){if(50<Qg)throw Qg=0,n2=null,Error(r(185));ii(f,k,E),((jr&2)===0||f!==fi)&&(f===fi&&((jr&2)===0&&(Ey|=k),Wa===4&&Wh(f,Li)),il(f,E),k===1&&jr===0&&(p.mode&1)===0&&(Sp=as()+500,Zf&&Y()))}function il(f,p){var k=f.callbackNode;ra(f,p);var E=cr(f,f===fi?Li:0);if(E===0)k!==null&&Vl(k),f.callbackNode=null,f.callbackPriority=0;else if(p=E&-E,f.callbackPriority!==p){if(k!=null&&Vl(k),p===1)f.tag===0?V(TT.bind(null,f)):O(TT.bind(null,f)),di(function(){(jr&6)===0&&Y()}),k=null;else{switch(Bo(E)){case 1:k=Ul;break;case 4:k=Tu;break;case 16:k=Pd;break;case 536870912:k=Hl;break;default:k=Pd}k=FT(k,CT.bind(null,f))}f.callbackPriority=p,f.callbackNode=k}}function CT(f,p){if(Dy=-1,Iy=0,(jr&6)!==0)throw Error(r(327));var k=f.callbackNode;if(Pp()&&f.callbackNode!==k)return null;var E=cr(f,f===fi?Li:0);if(E===0)return null;if((E&30)!==0||(E&f.expiredLanes)!==0||p)p=Ry(f,E);else{p=E;var q=jr;jr|=2;var K=OT();(fi!==f||Li!==p)&&(Wu=null,Sp=as()+500,tm(f,p));do try{yZ();break}catch(Ae){ET(f,Ae)}while(!0);Ha(),Ty.current=K,jr=q,Ma!==null?p=0:(fi=null,Li=0,p=Wa)}if(p!==0){if(p===2&&(q=Hs(f),q!==0&&(E=q,p=r2(f,q))),p===1)throw k=Yg,tm(f,0),Wh(f,E),il(f,as()),k;if(p===6)Wh(f,E);else{if(q=f.current.alternate,(E&30)===0&&!gZ(q)&&(p=Ry(f,E),p===2&&(K=Hs(f),K!==0&&(E=K,p=r2(f,K))),p===1))throw k=Yg,tm(f,0),Wh(f,E),il(f,as()),k;switch(f.finishedWork=q,f.finishedLanes=E,p){case 0:case 1:throw Error(r(345));case 2:nm(f,al,Wu);break;case 3:if(Wh(f,E),(E&130023424)===E&&(p=e2+500-as(),10<p)){if(cr(f,0)!==0)break;if(q=f.suspendedLanes,(q&E)!==E){Po(),f.pingedLanes|=f.suspendedLanes&q;break}f.timeoutHandle=ca(nm.bind(null,f,al,Wu),p);break}nm(f,al,Wu);break;case 4:if(Wh(f,E),(E&4194240)===E)break;for(p=f.eventTimes,q=-1;0<E;){var le=31-En(E);K=1<<le,le=p[le],le>q&&(q=le),E&=~K}if(E=q,E=as()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*xZ(E/1960))-E,10<E){f.timeoutHandle=ca(nm.bind(null,f,al,Wu),E);break}nm(f,al,Wu);break;case 5:nm(f,al,Wu);break;default:throw Error(r(329))}}}return il(f,as()),f.callbackNode===k?CT.bind(null,f):null}function r2(f,p){var k=Xg;return f.current.memoizedState.isDehydrated&&(tm(f,p).flags|=256),f=Ry(f,p),f!==2&&(p=al,al=k,p!==null&&s2(p)),f}function s2(f){al===null?al=f:al.push.apply(al,f)}function gZ(f){for(var p=f;;){if(p.flags&16384){var k=p.updateQueue;if(k!==null&&(k=k.stores,k!==null))for(var E=0;E<k.length;E++){var q=k[E],K=q.getSnapshot;q=q.value;try{if(!mr(K(),q))return!1}catch{return!1}}}if(k=p.child,p.subtreeFlags&16384&&k!==null)k.return=p,p=k;else{if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Wh(f,p){for(p&=~Jw,p&=~Ey,f.suspendedLanes|=p,f.pingedLanes&=~p,f=f.expirationTimes;0<p;){var k=31-En(p),E=1<<k;f[k]=-1,p&=~E}}function TT(f){if((jr&6)!==0)throw Error(r(327));Pp();var p=cr(f,0);if((p&1)===0)return il(f,as()),null;var k=Ry(f,p);if(f.tag!==0&&k===2){var E=Hs(f);E!==0&&(p=E,k=r2(f,E))}if(k===1)throw k=Yg,tm(f,0),Wh(f,p),il(f,as()),k;if(k===6)throw Error(r(345));return f.finishedWork=f.current.alternate,f.finishedLanes=p,nm(f,al,Wu),il(f,as()),null}function a2(f,p){var k=jr;jr|=1;try{return f(p)}finally{jr=k,jr===0&&(Sp=as()+500,Zf&&Y())}}function em(f){Uh!==null&&Uh.tag===0&&(jr&6)===0&&Pp();var p=jr;jr|=1;var k=uc.transition,E=rr;try{if(uc.transition=null,rr=1,f)return f()}finally{rr=E,uc.transition=k,jr=p,(jr&6)===0&&Y()}}function i2(){Sl=kp.current,Ir(kp)}function tm(f,p){f.finishedWork=null,f.finishedLanes=0;var k=f.timeoutHandle;if(k!==-1&&(f.timeoutHandle=-1,$s(k)),Ma!==null)for(k=Ma.return;k!==null;){var E=k;switch($e(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&hp();break;case 3:lc(),Ir(Gi),Ir(Ua),Hg();break;case 5:Vg(E);break;case 4:lc();break;case 13:Ir(os);break;case 19:Ir(os);break;case 10:Yi(E.type._context);break;case 22:case 23:i2()}k=k.return}if(fi=f,Ma=f=Kh(f.current,null),Li=Sl=p,Wa=0,Yg=null,Jw=Ey=Jf=0,al=Xg=null,wo!==null){for(p=0;p<wo.length;p++)if(k=wo[p],E=k.interleaved,E!==null){k.interleaved=null;var q=E.next,K=k.pending;if(K!==null){var le=K.next;K.next=q,E.next=le}k.pending=E}wo=null}return f}function ET(f,p){do{var k=Ma;try{if(Ha(),mp.current=Ny,$h){for(var E=gs.memoizedState;E!==null;){var q=E.queue;q!==null&&(q.pending=null),E=E.next}$h=!1}if(cc=0,qs=Zs=gs=null,Qc=!1,Bh=0,Qw.current=null,k===null||k.return===null){Wa=1,Yg=p,Ma=null;break}e:{var K=f,le=k.return,Ae=k,Fe=p;if(p=Li,Ae.flags|=32768,Fe!==null&&typeof Fe=="object"&&typeof Fe.then=="function"){var et=Fe,_t=Ae,Pt=_t.tag;if((_t.mode&1)===0&&(Pt===0||Pt===11||Pt===15)){var bt=_t.alternate;bt?(_t.updateQueue=bt.updateQueue,_t.memoizedState=bt.memoizedState,_t.lanes=bt.lanes):(_t.updateQueue=null,_t.memoizedState=null)}var Zt=nT(le);if(Zt!==null){Zt.flags&=-257,rT(Zt,le,Ae,K,p),Zt.mode&1&&tT(K,et,p),p=Zt,Fe=et;var en=p.updateQueue;if(en===null){var sn=new Set;sn.add(Fe),p.updateQueue=sn}else en.add(Fe);break e}else{if((p&1)===0){tT(K,et,p),o2();break e}Fe=Error(r(426))}}else if(st&&Ae.mode&1){var ma=nT(le);if(ma!==null){(ma.flags&65536)===0&&(ma.flags|=256),rT(ma,le,Ae,K,p),Rr(_p(Fe,Ae));break e}}K=Fe=_p(Fe,Ae),Wa!==4&&(Wa=2),Xg===null?Xg=[K]:Xg.push(K),K=le;do{switch(K.tag){case 3:K.flags|=65536,p&=-p,K.lanes|=p;var Ye=JC(K,Fe,p);rl(K,Ye);break e;case 1:Ae=Fe;var qe=K.type,Qe=K.stateNode;if((K.flags&128)===0&&(typeof qe.getDerivedStateFromError=="function"||Qe!==null&&typeof Qe.componentDidCatch=="function"&&(Vh===null||!Vh.has(Qe)))){K.flags|=65536,p&=-p,K.lanes|=p;var Mt=eT(K,Ae,p);rl(K,Mt);break e}}K=K.return}while(K!==null)}LT(k)}catch(ln){p=ln,Ma===k&&k!==null&&(Ma=k=k.return);continue}break}while(!0)}function OT(){var f=Ty.current;return Ty.current=Ny,f===null?Ny:f}function o2(){(Wa===0||Wa===3||Wa===2)&&(Wa=4),fi===null||(Jf&268435455)===0&&(Ey&268435455)===0||Wh(fi,Li)}function Ry(f,p){var k=jr;jr|=2;var E=OT();(fi!==f||Li!==p)&&(Wu=null,tm(f,p));do try{vZ();break}catch(q){ET(f,q)}while(!0);if(Ha(),jr=k,Ty.current=E,Ma!==null)throw Error(r(261));return fi=null,Li=0,Wa}function vZ(){for(;Ma!==null;)MT(Ma)}function yZ(){for(;Ma!==null&&!Sd();)MT(Ma)}function MT(f){var p=RT(f.alternate,f,Sl);f.memoizedProps=f.pendingProps,p===null?LT(f):Ma=p,Qw.current=null}function LT(f){var p=f;do{var k=p.alternate;if(f=p.return,(p.flags&32768)===0){if(k=uZ(k,p,Sl),k!==null){Ma=k;return}}else{if(k=hZ(k,p),k!==null){k.flags&=32767,Ma=k;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{Wa=6,Ma=null;return}}if(p=p.sibling,p!==null){Ma=p;return}Ma=p=f}while(p!==null);Wa===0&&(Wa=5)}function nm(f,p,k){var E=rr,q=uc.transition;try{uc.transition=null,rr=1,bZ(f,p,k,E)}finally{uc.transition=q,rr=E}return null}function bZ(f,p,k,E){do Pp();while(Uh!==null);if((jr&6)!==0)throw Error(r(327));k=f.finishedWork;var q=f.finishedLanes;if(k===null)return null;if(f.finishedWork=null,f.finishedLanes=0,k===f.current)throw Error(r(177));f.callbackNode=null,f.callbackPriority=0;var K=k.lanes|k.childLanes;if(ms(f,K),f===fi&&(Ma=fi=null,Li=0),(k.subtreeFlags&2064)===0&&(k.flags&2064)===0||My||(My=!0,FT(Pd,function(){return Pp(),null})),K=(k.flags&15990)!==0,(k.subtreeFlags&15990)!==0||K){K=uc.transition,uc.transition=null;var le=rr;rr=1;var Ae=jr;jr|=4,Qw.current=null,mZ(f,k),NT(k,f),Ea(dn),Ic=!!zt,dn=zt=null,f.current=k,pZ(k),Oc(),jr=Ae,rr=le,uc.transition=K}else f.current=k;if(My&&(My=!1,Uh=f,Ly=q),K=f.pendingLanes,K===0&&(Vh=null),Fo(k.stateNode),il(f,as()),p!==null)for(E=f.onRecoverableError,k=0;k<p.length;k++)q=p[k],E(q.value,{componentStack:q.stack,digest:q.digest});if(Oy)throw Oy=!1,f=t2,t2=null,f;return(Ly&1)!==0&&f.tag!==0&&Pp(),K=f.pendingLanes,(K&1)!==0?f===n2?Qg++:(Qg=0,n2=f):Qg=0,Y(),null}function Pp(){if(Uh!==null){var f=Bo(Ly),p=uc.transition,k=rr;try{if(uc.transition=null,rr=16>f?16:f,Uh===null)var E=!1;else{if(f=Uh,Uh=null,Ly=0,(jr&6)!==0)throw Error(r(331));var q=jr;for(jr|=4,Qt=f.current;Qt!==null;){var K=Qt,le=K.child;if((Qt.flags&16)!==0){var Ae=K.deletions;if(Ae!==null){for(var Fe=0;Fe<Ae.length;Fe++){var et=Ae[Fe];for(Qt=et;Qt!==null;){var _t=Qt;switch(_t.tag){case 0:case 11:case 15:Zg(8,_t,K)}var Pt=_t.child;if(Pt!==null)Pt.return=_t,Qt=Pt;else for(;Qt!==null;){_t=Qt;var bt=_t.sibling,Zt=_t.return;if(yT(_t),_t===et){Qt=null;break}if(bt!==null){bt.return=Zt,Qt=bt;break}Qt=Zt}}}var en=K.alternate;if(en!==null){var sn=en.child;if(sn!==null){en.child=null;do{var ma=sn.sibling;sn.sibling=null,sn=ma}while(sn!==null)}}Qt=K}}if((K.subtreeFlags&2064)!==0&&le!==null)le.return=K,Qt=le;else e:for(;Qt!==null;){if(K=Qt,(K.flags&2048)!==0)switch(K.tag){case 0:case 11:case 15:Zg(9,K,K.return)}var Ye=K.sibling;if(Ye!==null){Ye.return=K.return,Qt=Ye;break e}Qt=K.return}}var qe=f.current;for(Qt=qe;Qt!==null;){le=Qt;var Qe=le.child;if((le.subtreeFlags&2064)!==0&&Qe!==null)Qe.return=le,Qt=Qe;else e:for(le=qe;Qt!==null;){if(Ae=Qt,(Ae.flags&2048)!==0)try{switch(Ae.tag){case 0:case 11:case 15:Cy(9,Ae)}}catch(ln){Ys(Ae,Ae.return,ln)}if(Ae===le){Qt=null;break e}var Mt=Ae.sibling;if(Mt!==null){Mt.return=Ae.return,Qt=Mt;break e}Qt=Ae.return}}if(jr=q,Y(),_i&&typeof _i.onPostCommitFiberRoot=="function")try{_i.onPostCommitFiberRoot(Wl,f)}catch{}E=!0}return E}finally{rr=k,uc.transition=p}}return!1}function DT(f,p,k){p=_p(k,p),p=JC(f,p,1),f=nl(f,p,1),p=Po(),f!==null&&(ii(f,1,p),il(f,p))}function Ys(f,p,k){if(f.tag===3)DT(f,f,k);else for(;p!==null;){if(p.tag===3){DT(p,f,k);break}else if(p.tag===1){var E=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Vh===null||!Vh.has(E))){f=_p(k,f),f=eT(p,f,1),p=nl(p,f,1),f=Po(),p!==null&&(ii(p,1,f),il(p,f));break}}p=p.return}}function jZ(f,p,k){var E=f.pingCache;E!==null&&E.delete(p),p=Po(),f.pingedLanes|=f.suspendedLanes&k,fi===f&&(Li&k)===k&&(Wa===4||Wa===3&&(Li&130023424)===Li&&500>as()-e2?tm(f,0):Jw|=k),il(f,p)}function IT(f,p){p===0&&((f.mode&1)===0?p=1:(p=$o,$o<<=1,($o&130023424)===0&&($o=4194304)));var k=Po();f=Tr(f,p),f!==null&&(ii(f,p,k),il(f,k))}function wZ(f){var p=f.memoizedState,k=0;p!==null&&(k=p.retryLane),IT(f,k)}function _Z(f,p){var k=0;switch(f.tag){case 13:var E=f.stateNode,q=f.memoizedState;q!==null&&(k=q.retryLane);break;case 19:E=f.stateNode;break;default:throw Error(r(314))}E!==null&&E.delete(p),IT(f,k)}var RT;RT=function(f,p,k){if(f!==null)if(f.memoizedProps!==p.pendingProps||Gi.current)sl=!0;else{if((f.lanes&k)===0&&(p.flags&128)===0)return sl=!1,dZ(f,p,k);sl=(f.flags&131072)!==0}else sl=!1,st&&(p.flags&1048576)!==0&&ft(p,pe,p.index);switch(p.lanes=0,p.tag){case 2:var E=p.type;Py(f,p),f=p.pendingProps;var q=Dh(p,Ua.current);Ss(p,k),q=Yf(null,p,E,f,q,k);var K=dc();return p.flags|=1,typeof q=="object"&&q!==null&&typeof q.render=="function"&&q.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,Zi(E)?(K=!0,qu(p)):K=!1,p.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,fp(p),q.updater=ky,p.stateNode=q,q._reactInternals=p,Fw(p,E,f,k),p=zw(null,p,E,!0,K,k)):(p.tag=0,st&&K&&rt(p),So(null,p,q,k),p=p.child),p;case 16:E=p.elementType;e:{switch(Py(f,p),f=p.pendingProps,q=E._init,E=q(E._payload),p.type=E,q=p.tag=kZ(E),f=ed(E,f),q){case 0:p=qw(null,p,E,f,k);break e;case 1:p=cT(null,p,E,f,k);break e;case 11:p=sT(null,p,E,f,k);break e;case 14:p=aT(null,p,E,ed(E.type,f),k);break e}throw Error(r(306,E,""))}return p;case 0:return E=p.type,q=p.pendingProps,q=p.elementType===E?q:ed(E,q),qw(f,p,E,q,k);case 1:return E=p.type,q=p.pendingProps,q=p.elementType===E?q:ed(E,q),cT(f,p,E,q,k);case 3:e:{if(dT(p),f===null)throw Error(r(387));E=p.pendingProps,K=p.memoizedState,q=K.element,zg(f,p),Yc(p,E,null,k);var le=p.memoizedState;if(E=le.element,K.isDehydrated)if(K={element:E,isDehydrated:!1,cache:le.cache,pendingSuspenseBoundaries:le.pendingSuspenseBoundaries,transitions:le.transitions},p.updateQueue.baseState=K,p.memoizedState=K,p.flags&256){q=_p(Error(r(423)),p),p=uT(f,p,E,k,q);break e}else if(E!==q){q=_p(Error(r(424)),p),p=uT(f,p,E,k,q);break e}else for(at=za(p.stateNode.containerInfo.firstChild),Be=p,st=!0,lt=null,k=Cr(p,null,E,k),p.child=k;k;)k.flags=k.flags&-3|4096,k=k.sibling;else{if(Un(),E===q){p=Hu(f,p,k);break e}So(f,p,E,k)}p=p.child}return p;case 5:return yy(p),f===null&&qt(p),E=p.type,q=p.pendingProps,K=f!==null?f.memoizedProps:null,le=q.children,Bn(E,q)?le=null:K!==null&&Bn(E,K)&&(p.flags|=32),lT(f,p),So(f,p,le,k),p.child;case 6:return f===null&&qt(p),null;case 13:return hT(f,p,k);case 4:return Fh(p,p.stateNode.containerInfo),E=p.pendingProps,f===null?p.child=ua(p,null,E,k):So(f,p,E,k),p.child;case 11:return E=p.type,q=p.pendingProps,q=p.elementType===E?q:ed(E,q),sT(f,p,E,q,k);case 7:return So(f,p,p.pendingProps,k),p.child;case 8:return So(f,p,p.pendingProps.children,k),p.child;case 12:return So(f,p,p.pendingProps.children,k),p.child;case 10:e:{if(E=p.type._context,q=p.pendingProps,K=p.memoizedProps,le=q.value,zr(ui,E._currentValue),E._currentValue=le,K!==null)if(mr(K.value,le)){if(K.children===q.children&&!Gi.current){p=Hu(f,p,k);break e}}else for(K=p.child,K!==null&&(K.return=p);K!==null;){var Ae=K.dependencies;if(Ae!==null){le=K.child;for(var Fe=Ae.firstContext;Fe!==null;){if(Fe.context===E){if(K.tag===1){Fe=tl(-1,k&-k),Fe.tag=2;var et=K.updateQueue;if(et!==null){et=et.shared;var _t=et.pending;_t===null?Fe.next=Fe:(Fe.next=_t.next,_t.next=Fe),et.pending=Fe}}K.lanes|=k,Fe=K.alternate,Fe!==null&&(Fe.lanes|=k),el(K.return,k,p),Ae.lanes|=k;break}Fe=Fe.next}}else if(K.tag===10)le=K.type===p.type?null:K.child;else if(K.tag===18){if(le=K.return,le===null)throw Error(r(341));le.lanes|=k,Ae=le.alternate,Ae!==null&&(Ae.lanes|=k),el(le,k,p),le=K.sibling}else le=K.child;if(le!==null)le.return=K;else for(le=K;le!==null;){if(le===p){le=null;break}if(K=le.sibling,K!==null){K.return=le.return,le=K;break}le=le.return}K=le}So(f,p,q.children,k),p=p.child}return p;case 9:return q=p.type,E=p.pendingProps.children,Ss(p,k),q=Gs(q),E=E(q),p.flags|=1,So(f,p,E,k),p.child;case 14:return E=p.type,q=ed(E,p.pendingProps),q=ed(E.type,q),aT(f,p,E,q,k);case 15:return iT(f,p,p.type,p.pendingProps,k);case 17:return E=p.type,q=p.pendingProps,q=p.elementType===E?q:ed(E,q),Py(f,p),p.tag=1,Zi(E)?(f=!0,qu(p)):f=!1,Ss(p,k),XC(p,E,q),Fw(p,E,q,k),zw(null,p,E,!0,f,k);case 19:return mT(f,p,k);case 22:return oT(f,p,k)}throw Error(r(156,p.tag))};function FT(f,p){return Ec(f,p)}function NZ(f,p,k,E){this.tag=f,this.key=k,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hc(f,p,k,E){return new NZ(f,p,k,E)}function l2(f){return f=f.prototype,!(!f||!f.isReactComponent)}function kZ(f){if(typeof f=="function")return l2(f)?1:0;if(f!=null){if(f=f.$$typeof,f===R)return 11;if(f===se)return 14}return 2}function Kh(f,p){var k=f.alternate;return k===null?(k=hc(f.tag,p,f.key,f.mode),k.elementType=f.elementType,k.type=f.type,k.stateNode=f.stateNode,k.alternate=f,f.alternate=k):(k.pendingProps=p,k.type=f.type,k.flags=0,k.subtreeFlags=0,k.deletions=null),k.flags=f.flags&14680064,k.childLanes=f.childLanes,k.lanes=f.lanes,k.child=f.child,k.memoizedProps=f.memoizedProps,k.memoizedState=f.memoizedState,k.updateQueue=f.updateQueue,p=f.dependencies,k.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},k.sibling=f.sibling,k.index=f.index,k.ref=f.ref,k}function Fy(f,p,k,E,q,K){var le=2;if(E=f,typeof f=="function")l2(f)&&(le=1);else if(typeof f=="string")le=5;else e:switch(f){case I:return rm(k.children,q,K,p);case F:le=8,q|=8;break;case U:return f=hc(12,k,p,q|2),f.elementType=U,f.lanes=K,f;case z:return f=hc(13,k,p,q),f.elementType=z,f.lanes=K,f;case Z:return f=hc(19,k,p,q),f.elementType=Z,f.lanes=K,f;case Q:return $y(k,q,K,p);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case W:le=10;break e;case D:le=9;break e;case R:le=11;break e;case se:le=14;break e;case J:le=16,E=null;break e}throw Error(r(130,f==null?f:typeof f,""))}return p=hc(le,k,p,q),p.elementType=f,p.type=E,p.lanes=K,p}function rm(f,p,k,E){return f=hc(7,f,E,p),f.lanes=k,f}function $y(f,p,k,E){return f=hc(22,f,E,p),f.elementType=Q,f.lanes=k,f.stateNode={isHidden:!1},f}function c2(f,p,k){return f=hc(6,f,null,p),f.lanes=k,f}function d2(f,p,k){return p=hc(4,f.children!==null?f.children:[],f.key,p),p.lanes=k,p.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},p}function SZ(f,p,k,E,q){this.tag=p,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gl(0),this.expirationTimes=Gl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gl(0),this.identifierPrefix=E,this.onRecoverableError=q,this.mutableSourceEagerHydrationData=null}function u2(f,p,k,E,q,K,le,Ae,Fe){return f=new SZ(f,p,k,Ae,Fe),p===1?(p=1,K===!0&&(p|=8)):p=0,K=hc(3,null,null,p),f.current=K,K.stateNode=f,K.memoizedState={element:E,isDehydrated:k,cache:null,transitions:null,pendingSuspenseBoundaries:null},fp(K),f}function PZ(f,p,k){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:E==null?null:""+E,children:f,containerInfo:p,implementation:k}}function $T(f){if(!f)return Wd;f=f._reactInternals;e:{if(Us(f)!==f||f.tag!==1)throw Error(r(170));var p=f;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(Zi(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(r(171))}if(f.tag===1){var k=f.type;if(Zi(k))return qg(f,k,p)}return p}function BT(f,p,k,E,q,K,le,Ae,Fe){return f=u2(k,E,!0,f,q,K,le,Ae,Fe),f.context=$T(null),k=f.current,E=Po(),q=Hh(k),K=tl(E,q),K.callback=p??null,nl(k,K,q),f.current.lanes=q,ii(f,q,E),il(f,E),f}function By(f,p,k,E){var q=p.current,K=Po(),le=Hh(q);return k=$T(k),p.context===null?p.context=k:p.pendingContext=k,p=tl(K,le),p.payload={element:f},E=E===void 0?null:E,E!==null&&(p.callback=E),f=nl(q,p,le),f!==null&&(rd(f,q,le,K),zu(f,q,le)),le}function qy(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return f.child.stateNode;default:return f.child.stateNode}}function qT(f,p){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var k=f.retryLane;f.retryLane=k!==0&&k<p?k:p}}function h2(f,p){qT(f,p),(f=f.alternate)&&qT(f,p)}function AZ(){return null}var zT=typeof reportError=="function"?reportError:function(f){console.error(f)};function f2(f){this._internalRoot=f}zy.prototype.render=f2.prototype.render=function(f){var p=this._internalRoot;if(p===null)throw Error(r(409));By(f,p,null,null)},zy.prototype.unmount=f2.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var p=f.containerInfo;em(function(){By(null,f,null,null)}),p[ir]=null}};function zy(f){this._internalRoot=f}zy.prototype.unstable_scheduleHydration=function(f){if(f){var p=Bi();f={blockedOn:null,target:f,priority:p};for(var k=0;k<Is.length&&p!==0&&p<Is[k].priority;k++);Is.splice(k,0,f),k===0&&Yl(f)}};function m2(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function Vy(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11&&(f.nodeType!==8||f.nodeValue!==" react-mount-point-unstable "))}function VT(){}function CZ(f,p,k,E,q){if(q){if(typeof E=="function"){var K=E;E=function(){var et=qy(le);K.call(et)}}var le=BT(p,E,f,0,null,!1,!1,"",VT);return f._reactRootContainer=le,f[ir]=le.current,rc(f.nodeType===8?f.parentNode:f),em(),le}for(;q=f.lastChild;)f.removeChild(q);if(typeof E=="function"){var Ae=E;E=function(){var et=qy(Fe);Ae.call(et)}}var Fe=u2(f,0,!1,null,null,!1,!1,"",VT);return f._reactRootContainer=Fe,f[ir]=Fe.current,rc(f.nodeType===8?f.parentNode:f),em(function(){By(p,Fe,k,E)}),Fe}function Uy(f,p,k,E,q){var K=k._reactRootContainer;if(K){var le=K;if(typeof q=="function"){var Ae=q;q=function(){var Fe=qy(le);Ae.call(Fe)}}By(p,le,f,q)}else le=CZ(k,p,f,q,E);return qy(le)}Ad=function(f){switch(f.tag){case 3:var p=f.stateNode;if(p.current.memoizedState.isDehydrated){var k=_n(p.pendingLanes);k!==0&&($i(p,k|1),il(p,as()),(jr&6)===0&&(Sp=as()+500,Y()))}break;case 13:em(function(){var E=Tr(f,1);if(E!==null){var q=Po();rd(E,f,1,q)}}),h2(f,1)}},pl=function(f){if(f.tag===13){var p=Tr(f,134217728);if(p!==null){var k=Po();rd(p,f,134217728,k)}h2(f,134217728)}},Cd=function(f){if(f.tag===13){var p=Hh(f),k=Tr(f,p);if(k!==null){var E=Po();rd(k,f,p,E)}h2(f,p)}},Bi=function(){return rr},qo=function(f,p){var k=rr;try{return rr=f,p()}finally{rr=k}},kr=function(f,p,k){switch(p){case"input":if(Bt(f,k),p=k.name,k.type==="radio"&&p!=null){for(k=f;k.parentNode;)k=k.parentNode;for(k=k.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<k.length;p++){var E=k[p];if(E!==f&&E.form===f.form){var q=$u(E);if(!q)throw Error(r(90));Le(E),Bt(E,q)}}}break;case"textarea":mn(f,k);break;case"select":p=k.value,p!=null&&Tt(f,!!k.multiple,p,!1)}},an=a2,on=em;var TZ={usingClientEntryPoint:!1,Events:[ac,ic,$u,Oe,ot,a2]},Jg={findFiberByHostInstance:sc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},EZ={bundleType:Jg.bundleType,version:Jg.version,rendererPackageName:Jg.rendererPackageName,rendererConfig:Jg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(f){return f=zl(f),f===null?null:f.stateNode},findFiberByHostInstance:Jg.findFiberByHostInstance||AZ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hy.isDisabled&&Hy.supportsFiber)try{Wl=Hy.inject(EZ),_i=Hy}catch{}}return ol.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TZ,ol.createPortal=function(f,p){var k=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m2(p))throw Error(r(200));return PZ(f,p,null,k)},ol.createRoot=function(f,p){if(!m2(f))throw Error(r(299));var k=!1,E="",q=zT;return p!=null&&(p.unstable_strictMode===!0&&(k=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onRecoverableError!==void 0&&(q=p.onRecoverableError)),p=u2(f,1,!1,null,null,k,!1,E,q),f[ir]=p.current,rc(f.nodeType===8?f.parentNode:f),new f2(p)},ol.findDOMNode=function(f){if(f==null)return null;if(f.nodeType===1)return f;var p=f._reactInternals;if(p===void 0)throw typeof f.render=="function"?Error(r(188)):(f=Object.keys(f).join(","),Error(r(268,f)));return f=zl(p),f=f===null?null:f.stateNode,f},ol.flushSync=function(f){return em(f)},ol.hydrate=function(f,p,k){if(!Vy(p))throw Error(r(200));return Uy(null,f,p,!0,k)},ol.hydrateRoot=function(f,p,k){if(!m2(f))throw Error(r(405));var E=k!=null&&k.hydratedSources||null,q=!1,K="",le=zT;if(k!=null&&(k.unstable_strictMode===!0&&(q=!0),k.identifierPrefix!==void 0&&(K=k.identifierPrefix),k.onRecoverableError!==void 0&&(le=k.onRecoverableError)),p=BT(p,null,f,1,k??null,q,!1,K,le),f[ir]=p.current,rc(f),E)for(f=0;f<E.length;f++)k=E[f],q=k._getVersion,q=q(k._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[k,q]:p.mutableSourceEagerHydrationData.push(k,q);return new zy(p)},ol.render=function(f,p,k){if(!Vy(p))throw Error(r(200));return Uy(null,f,p,!1,k)},ol.unmountComponentAtNode=function(f){if(!Vy(f))throw Error(r(40));return f._reactRootContainer?(em(function(){Uy(null,null,f,!1,function(){f._reactRootContainer=null,f[ir]=null})}),!0):!1},ol.unstable_batchedUpdates=a2,ol.unstable_renderSubtreeIntoContainer=function(f,p,k,E){if(!Vy(k))throw Error(r(200));if(f==null||f._reactInternals===void 0)throw Error(r(38));return Uy(f,p,k,!1,E)},ol.version="18.3.1-next-f1338f8080-20240426",ol}var QT;function B7(){if(QT)return v2.exports;QT=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),v2.exports=$Z(),v2.exports}var JT;function BZ(){if(JT)return Gy;JT=1;var e=B7();return Gy.createRoot=e.createRoot,Gy.hydrateRoot=e.hydrateRoot,Gy}var qZ=BZ();const zZ=Dr(qZ),VZ=20,UZ=1e6,rh={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let j2=0;function HZ(){return j2=(j2+1)%Number.MAX_VALUE,j2.toString()}const w2=new Map,eE=e=>{if(w2.has(e))return;const t=setTimeout(()=>{w2.delete(e),k0({type:rh.REMOVE_TOAST,toastId:e})},UZ);w2.set(e,t)},WZ=(e,t)=>{switch(t.type){case rh.ADD_TOAST:return{...e,toasts:[t.toast,...e.toasts].slice(0,VZ)};case rh.UPDATE_TOAST:return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case rh.DISMISS_TOAST:{const{toastId:r}=t;return r?eE(r):e.toasts.forEach(s=>{eE(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===r||r===void 0?{...s,open:!1}:s)}}case rh.REMOVE_TOAST:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},Pb=[];let Ab={toasts:[]};function k0(e){Ab=WZ(Ab,e),Pb.forEach(t=>{t(Ab)})}function KZ({...e}){const t=HZ(),r=a=>k0({type:rh.UPDATE_TOAST,toast:{...a,id:t}}),s=()=>k0({type:rh.DISMISS_TOAST,toastId:t});return k0({type:rh.ADD_TOAST,toast:{...e,id:t,open:!0,onOpenChange:a=>{a||s()}}}),{id:t,dismiss:s,update:r}}function GZ(){const[e,t]=P.useState(Ab);return P.useEffect(()=>(Pb.push(t),()=>{const r=Pb.indexOf(t);r>-1&&Pb.splice(r,1)}),[e]),{...e,toast:KZ,dismiss:r=>k0({type:rh.DISMISS_TOAST,toastId:r})}}function q7(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=q7(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function Hn(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=q7(e))&&(s&&(s+=" "),s+=t);return s}const tE=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,nE=Hn,ig=(e,t)=>r=>{var s;if((t==null?void 0:t.variants)==null)return nE(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(d=>{const u=r==null?void 0:r[d],h=i==null?void 0:i[d];if(u===null)return null;const g=tE(u)||tE(h);return a[d][g]}),l=r&&Object.entries(r).reduce((d,u)=>{let[h,g]=u;return g===void 0||(d[h]=g),d},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((d,u)=>{let{class:h,className:g,...x}=u;return Object.entries(x).every(b=>{let[y,v]=b;return Array.isArray(v)?v.includes({...i,...l}[y]):{...i,...l}[y]===v})?[...d,h,g]:d},[]);return nE(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZZ=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),z7=(...e)=>e.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var YZ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XZ=P.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:o,...l},c)=>P.createElement("svg",{ref:c,...YZ,width:t,height:t,stroke:e,strokeWidth:s?Number(r)*24/Number(t):r,className:z7("lucide",a),...l},[...o.map(([d,u])=>P.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=(e,t)=>{const r=P.forwardRef(({className:s,...a},i)=>P.createElement(XZ,{ref:i,iconNode:t,className:z7(`lucide-${ZZ(e)}`,s),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QZ=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],tu=ht("Activity",QZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JZ=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Zy=ht("Archive",JZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eY=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],V7=ht("ArrowDown",eY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tY=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],xu=ht("ArrowLeft",tY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nY=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],rY=ht("ArrowRight",nY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sY=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],U7=ht("ArrowUpDown",sY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aY=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],H7=ht("ArrowUp",aY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iY=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],oY=ht("Award",iY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],hj=ht("Ban",lY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cY=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],rE=ht("BellOff",cY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dY=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],cs=ht("Bell",dY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uY=[["path",{d:"m7 7 10 10-5 5V2l5 5L7 17",key:"1q5490"}]],hY=ht("Bluetooth",uY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fY=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],gm=ht("BookOpen",fY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mY=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Do=ht("Briefcase",mY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pY=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],xY=ht("Building2",pY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gY=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],JP=ht("CalendarDays",gY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vY=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M19 16v6",key:"tddt3s"}]],yY=ht("CalendarPlus",vY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bY=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],_r=ht("Calendar",bY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jY=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],W7=ht("Camera",jY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wY=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],us=ht("Car",wY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Y=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],$0=ht("ChartColumn",_Y);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NY=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],kY=ht("ChartNoAxesColumnIncreasing",NY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SY=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],PY=ht("ChartPie",SY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AY=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],sE=ht("CheckCheck",AY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CY=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Rm=ht("Check",CY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TY=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],fj=ht("ChevronDown",TY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EY=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],tp=ht("ChevronLeft",EY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OY=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ph=ht("ChevronRight",OY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MY=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],K7=ht("ChevronUp",MY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ja=ht("CircleAlert",LY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DY=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ti=ht("CircleCheckBig",DY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],$r=ht("CircleCheck",IY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],zv=ht("CircleHelp",RY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9 17V7h4a3 3 0 0 1 0 6H9",key:"1dfk2c"}]],$Y=ht("CircleParking",FY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],qY=ht("CirclePlus",BY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],xh=ht("CircleX",zY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],zb=ht("Circle",VY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Vt=ht("Clock",UY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HY=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],_2=ht("Code",HY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WY=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],mj=ht("Coffee",WY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KY=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],nf=ht("Copy",KY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GY=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Vb=ht("Database",GY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZY=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Sf=ht("DollarSign",ZY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YY=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Eo=ht("Download",YY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XY=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],G7=ht("ExternalLink",XY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QY=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],JY=ht("EyeOff",QY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eX=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Nx=ht("Eye",eX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],nX=ht("FileDown",tX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],sX=ht("FileSpreadsheet",rX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Jr=ht("FileText",aX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iX=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],e3=ht("Filter",iX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oX=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],lX=ht("Flag",oX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cX=[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]],aE=ht("FolderKanban",cX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dX=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Z7=ht("FolderOpen",dX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uX=[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"7cu91f"}]],gu=ht("Fuel",uX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hX=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],gf=ht("Gauge",hX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fX=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],mX=ht("Hash",fX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pX=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],t3=ht("Heart",pX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xX=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Y7=ht("History",xX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gX=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],vX=ht("House",gX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yX=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],bX=ht("ImagePlus",yX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],wX=ht("Info",jX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _X=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],iE=ht("Key",_X);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NX=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],kX=ht("List",NX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SX=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ot=ht("LoaderCircle",SX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PX=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],n3=ht("Lock",PX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AX=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],oE=ht("LogIn",AX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CX=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],X7=ht("LogOut",CX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TX=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],_c=ht("Mail",TX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EX=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Fn=ht("MapPin",EX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OX=[["path",{d:"M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0",key:"11u0oz"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712",key:"q8zwxj"}]],MX=ht("MapPinned",OX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LX=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],Vv=ht("MessageCircle",LX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DX=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Q7=ht("MessageSquare",DX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IX=[["path",{d:"M18 8V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h8",key:"10dyio"}],["path",{d:"M10 19v-3.96 3.15",key:"1irgej"}],["path",{d:"M7 19h5",key:"qswx4l"}],["rect",{width:"6",height:"10",x:"16",y:"12",rx:"2",key:"1egngj"}]],RX=ht("MonitorSmartphone",IX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FX=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],$X=ht("Moon",FX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BX=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],Ja=ht("Navigation",BX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qX=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],zX=ht("Package",qX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VX=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],J7=ht("PartyPopper",VX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UX=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],N2=ht("Pause",UX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HX=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],WX=ht("Pen",HX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KX=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],e9=ht("Pencil",KX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GX=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],B0=ht("Phone",GX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZX=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Ap=ht("Play",ZX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YX=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],xr=ht("Plus",YX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XX=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],QX=ht("Power",XX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JX=[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]],r3=ht("Radio",JX);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eQ=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],tQ=ht("Receipt",eQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nQ=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],t9=ht("RefreshCw",nQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rQ=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],q0=ht("Route",rQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sQ=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],og=ht("Save",sQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aQ=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],uo=ht("Search",aQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iQ=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Fm=ht("Send",iQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oQ=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],z0=ht("Settings",oQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lQ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],cQ=ht("Shield",lQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dQ=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],s3=ht("Smartphone",dQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uQ=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],yi=ht("Sparkles",uQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hQ=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],fQ=ht("SquareCheckBig",hQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mQ=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ql=ht("SquarePen",mQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pQ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],xQ=ht("Square",pQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gQ=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Bp=ht("Star",gQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vQ=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],lE=ht("Sun",vQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yQ=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],bQ=ht("Tag",yQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jQ=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],n9=ht("ThumbsUp",jQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wQ=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],_Q=ht("Timer",wQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NQ=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],bi=ht("Trash2",NQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kQ=[["path",{d:"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4",key:"foxbe7"}],["path",{d:"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3",key:"18arnh"}],["path",{d:"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35",key:"ywahnh"}],["path",{d:"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14",key:"ft0feo"}]],SQ=ht("TreePalm",kQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PQ=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],r9=ht("TrendingDown",PQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AQ=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],ta=ht("TrendingUp",AQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CQ=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Kr=ht("TriangleAlert",CQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TQ=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],lu=ht("Upload",TQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EQ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],pS=ht("UserPlus",EQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OQ=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],bd=ht("User",OQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MQ=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],LQ=ht("UsersRound",MQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DQ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Fr=ht("Users",DQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IQ=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],vu=ht("Wrench",IQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RQ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ra=ht("X",RQ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FQ=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],s9=ht("Zap",FQ),a3="-",$Q=e=>{const t=qQ(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:o=>{const l=o.split(a3);return l[0]===""&&l.length!==1&&l.shift(),a9(l,t)||BQ(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&s[o]?[...c,...s[o]]:c}}},a9=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],s=t.nextPart.get(r),a=s?a9(e.slice(1),s):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(a3);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},cE=/^\[(.+)\]$/,BQ=e=>{if(cE.test(e)){const t=cE.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},qQ=e=>{const{theme:t,classGroups:r}=e,s={nextPart:new Map,validators:[]};for(const a in r)xS(r[a],s,a,t);return s},xS=(e,t,r,s)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:dE(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(zQ(a)){xS(a(s),t,r,s);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{xS(o,dE(t,i),r,s)})})},dE=(e,t)=>{let r=e;return t.split(a3).forEach(s=>{r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r},zQ=e=>e.isThemeGetter,VQ=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,s=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,s=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=s.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},gS="!",vS=":",UQ=vS.length,HQ=e=>{const{prefix:t,experimentalParseClassName:r}=e;let s=a=>{const i=[];let o=0,l=0,c=0,d;for(let b=0;b<a.length;b++){let y=a[b];if(o===0&&l===0){if(y===vS){i.push(a.slice(c,b)),c=b+UQ;continue}if(y==="/"){d=b;continue}}y==="["?o++:y==="]"?o--:y==="("?l++:y===")"&&l--}const u=i.length===0?a:a.substring(c),h=WQ(u),g=h!==u,x=d&&d>c?d-c:void 0;return{modifiers:i,hasImportantModifier:g,baseClassName:h,maybePostfixModifierPosition:x}};if(t){const a=t+vS,i=s;s=o=>o.startsWith(a)?i(o.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(r){const a=s;s=i=>r({className:i,parseClassName:a})}return s},WQ=e=>e.endsWith(gS)?e.substring(0,e.length-1):e.startsWith(gS)?e.substring(1):e,KQ=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const a=[];let i=[];return s.forEach(o=>{o[0]==="["||t[o]?(a.push(...i.sort(),o),i=[]):i.push(o)}),a.push(...i.sort()),a}},GQ=e=>({cache:VQ(e.cacheSize),parseClassName:HQ(e),sortModifiers:KQ(e),...$Q(e)}),ZQ=/\s+/,YQ=(e,t)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:a,sortModifiers:i}=t,o=[],l=e.trim().split(ZQ);let c="";for(let d=l.length-1;d>=0;d-=1){const u=l[d],{isExternal:h,modifiers:g,hasImportantModifier:x,baseClassName:b,maybePostfixModifierPosition:y}=r(u);if(h){c=u+(c.length>0?" "+c:c);continue}let v=!!y,j=s(v?b.substring(0,y):b);if(!j){if(!v){c=u+(c.length>0?" "+c:c);continue}if(j=s(b),!j){c=u+(c.length>0?" "+c:c);continue}v=!1}const w=i(g).join(":"),N=x?w+gS:w,A=N+j;if(o.includes(A))continue;o.push(A);const C=a(j,v);for(let M=0;M<C.length;++M){const I=C[M];o.push(N+I)}c=u+(c.length>0?" "+c:c)}return c};function XQ(){let e=0,t,r,s="";for(;e<arguments.length;)(t=arguments[e++])&&(r=i9(t))&&(s&&(s+=" "),s+=r);return s}const i9=e=>{if(typeof e=="string")return e;let t,r="";for(let s=0;s<e.length;s++)e[s]&&(t=i9(e[s]))&&(r&&(r+=" "),r+=t);return r};function QQ(e,...t){let r,s,a,i=o;function o(c){const d=t.reduce((u,h)=>h(u),e());return r=GQ(d),s=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const d=s(c);if(d)return d;const u=YQ(c,r);return a(c,u),u}return function(){return i(XQ.apply(null,arguments))}}const Ka=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},o9=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,l9=/^\((?:(\w[\w-]*):)?(.+)\)$/i,JQ=/^\d+\/\d+$/,eJ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,tJ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,nJ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,rJ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,sJ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Cp=e=>JQ.test(e),or=e=>!!e&&!Number.isNaN(Number(e)),Zh=e=>!!e&&Number.isInteger(Number(e)),k2=e=>e.endsWith("%")&&or(e.slice(0,-1)),Ku=e=>eJ.test(e),aJ=()=>!0,iJ=e=>tJ.test(e)&&!nJ.test(e),c9=()=>!1,oJ=e=>rJ.test(e),lJ=e=>sJ.test(e),cJ=e=>!tn(e)&&!nn(e),dJ=e=>lg(e,h9,c9),tn=e=>o9.test(e),sm=e=>lg(e,f9,iJ),S2=e=>lg(e,pJ,or),uE=e=>lg(e,d9,c9),uJ=e=>lg(e,u9,lJ),Yy=e=>lg(e,m9,oJ),nn=e=>l9.test(e),t0=e=>cg(e,f9),hJ=e=>cg(e,xJ),hE=e=>cg(e,d9),fJ=e=>cg(e,h9),mJ=e=>cg(e,u9),Xy=e=>cg(e,m9,!0),lg=(e,t,r)=>{const s=o9.exec(e);return s?s[1]?t(s[1]):r(s[2]):!1},cg=(e,t,r=!1)=>{const s=l9.exec(e);return s?s[1]?t(s[1]):r:!1},d9=e=>e==="position"||e==="percentage",u9=e=>e==="image"||e==="url",h9=e=>e==="length"||e==="size"||e==="bg-size",f9=e=>e==="length",pJ=e=>e==="number",xJ=e=>e==="family-name",m9=e=>e==="shadow",gJ=()=>{const e=Ka("color"),t=Ka("font"),r=Ka("text"),s=Ka("font-weight"),a=Ka("tracking"),i=Ka("leading"),o=Ka("breakpoint"),l=Ka("container"),c=Ka("spacing"),d=Ka("radius"),u=Ka("shadow"),h=Ka("inset-shadow"),g=Ka("text-shadow"),x=Ka("drop-shadow"),b=Ka("blur"),y=Ka("perspective"),v=Ka("aspect"),j=Ka("ease"),w=Ka("animate"),N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],C=()=>[...A(),nn,tn],M=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],F=()=>[nn,tn,c],U=()=>[Cp,"full","auto",...F()],W=()=>[Zh,"none","subgrid",nn,tn],D=()=>["auto",{span:["full",Zh,nn,tn]},Zh,nn,tn],R=()=>[Zh,"auto",nn,tn],z=()=>["auto","min","max","fr",nn,tn],Z=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],se=()=>["start","end","center","stretch","center-safe","end-safe"],J=()=>["auto",...F()],Q=()=>[Cp,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...F()],H=()=>[e,nn,tn],ne=()=>[...A(),hE,uE,{position:[nn,tn]}],ue=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ae=()=>["auto","cover","contain",fJ,dJ,{size:[nn,tn]}],G=()=>[k2,t0,sm],te=()=>["","none","full",d,nn,tn],fe=()=>["",or,t0,sm],be=()=>["solid","dashed","dotted","double"],xe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],we=()=>[or,k2,hE,uE],Pe=()=>["","none",b,nn,tn],_e=()=>["none",or,nn,tn],Ve=()=>["none",or,nn,tn],Ue=()=>[or,nn,tn],Le=()=>[Cp,"full",...F()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ku],breakpoint:[Ku],color:[aJ],container:[Ku],"drop-shadow":[Ku],ease:["in","out","in-out"],font:[cJ],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ku],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ku],shadow:[Ku],spacing:["px",or],text:[Ku],"text-shadow":[Ku],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Cp,tn,nn,v]}],container:["container"],columns:[{columns:[or,tn,nn,l]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:C()}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:U()}],"inset-x":[{"inset-x":U()}],"inset-y":[{"inset-y":U()}],start:[{start:U()}],end:[{end:U()}],top:[{top:U()}],right:[{right:U()}],bottom:[{bottom:U()}],left:[{left:U()}],visibility:["visible","invisible","collapse"],z:[{z:[Zh,"auto",nn,tn]}],basis:[{basis:[Cp,"full","auto",l,...F()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[or,Cp,"auto","initial","none",tn]}],grow:[{grow:["",or,nn,tn]}],shrink:[{shrink:["",or,nn,tn]}],order:[{order:[Zh,"first","last","none",nn,tn]}],"grid-cols":[{"grid-cols":W()}],"col-start-end":[{col:D()}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":W()}],"row-start-end":[{row:D()}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":z()}],"auto-rows":[{"auto-rows":z()}],gap:[{gap:F()}],"gap-x":[{"gap-x":F()}],"gap-y":[{"gap-y":F()}],"justify-content":[{justify:[...Z(),"normal"]}],"justify-items":[{"justify-items":[...se(),"normal"]}],"justify-self":[{"justify-self":["auto",...se()]}],"align-content":[{content:["normal",...Z()]}],"align-items":[{items:[...se(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...se(),{baseline:["","last"]}]}],"place-content":[{"place-content":Z()}],"place-items":[{"place-items":[...se(),"baseline"]}],"place-self":[{"place-self":["auto",...se()]}],p:[{p:F()}],px:[{px:F()}],py:[{py:F()}],ps:[{ps:F()}],pe:[{pe:F()}],pt:[{pt:F()}],pr:[{pr:F()}],pb:[{pb:F()}],pl:[{pl:F()}],m:[{m:J()}],mx:[{mx:J()}],my:[{my:J()}],ms:[{ms:J()}],me:[{me:J()}],mt:[{mt:J()}],mr:[{mr:J()}],mb:[{mb:J()}],ml:[{ml:J()}],"space-x":[{"space-x":F()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":F()}],"space-y-reverse":["space-y-reverse"],size:[{size:Q()}],w:[{w:[l,"screen",...Q()]}],"min-w":[{"min-w":[l,"screen","none",...Q()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...Q()]}],h:[{h:["screen","lh",...Q()]}],"min-h":[{"min-h":["screen","lh","none",...Q()]}],"max-h":[{"max-h":["screen","lh",...Q()]}],"font-size":[{text:["base",r,t0,sm]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,nn,S2]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",k2,tn]}],"font-family":[{font:[hJ,tn,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,nn,tn]}],"line-clamp":[{"line-clamp":[or,"none",nn,S2]}],leading:[{leading:[i,...F()]}],"list-image":[{"list-image":["none",nn,tn]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",nn,tn]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:H()}],"text-color":[{text:H()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...be(),"wavy"]}],"text-decoration-thickness":[{decoration:[or,"from-font","auto",nn,sm]}],"text-decoration-color":[{decoration:H()}],"underline-offset":[{"underline-offset":[or,"auto",nn,tn]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",nn,tn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",nn,tn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ne()}],"bg-repeat":[{bg:ue()}],"bg-size":[{bg:ae()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Zh,nn,tn],radial:["",nn,tn],conic:[Zh,nn,tn]},mJ,uJ]}],"bg-color":[{bg:H()}],"gradient-from-pos":[{from:G()}],"gradient-via-pos":[{via:G()}],"gradient-to-pos":[{to:G()}],"gradient-from":[{from:H()}],"gradient-via":[{via:H()}],"gradient-to":[{to:H()}],rounded:[{rounded:te()}],"rounded-s":[{"rounded-s":te()}],"rounded-e":[{"rounded-e":te()}],"rounded-t":[{"rounded-t":te()}],"rounded-r":[{"rounded-r":te()}],"rounded-b":[{"rounded-b":te()}],"rounded-l":[{"rounded-l":te()}],"rounded-ss":[{"rounded-ss":te()}],"rounded-se":[{"rounded-se":te()}],"rounded-ee":[{"rounded-ee":te()}],"rounded-es":[{"rounded-es":te()}],"rounded-tl":[{"rounded-tl":te()}],"rounded-tr":[{"rounded-tr":te()}],"rounded-br":[{"rounded-br":te()}],"rounded-bl":[{"rounded-bl":te()}],"border-w":[{border:fe()}],"border-w-x":[{"border-x":fe()}],"border-w-y":[{"border-y":fe()}],"border-w-s":[{"border-s":fe()}],"border-w-e":[{"border-e":fe()}],"border-w-t":[{"border-t":fe()}],"border-w-r":[{"border-r":fe()}],"border-w-b":[{"border-b":fe()}],"border-w-l":[{"border-l":fe()}],"divide-x":[{"divide-x":fe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":fe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...be(),"hidden","none"]}],"divide-style":[{divide:[...be(),"hidden","none"]}],"border-color":[{border:H()}],"border-color-x":[{"border-x":H()}],"border-color-y":[{"border-y":H()}],"border-color-s":[{"border-s":H()}],"border-color-e":[{"border-e":H()}],"border-color-t":[{"border-t":H()}],"border-color-r":[{"border-r":H()}],"border-color-b":[{"border-b":H()}],"border-color-l":[{"border-l":H()}],"divide-color":[{divide:H()}],"outline-style":[{outline:[...be(),"none","hidden"]}],"outline-offset":[{"outline-offset":[or,nn,tn]}],"outline-w":[{outline:["",or,t0,sm]}],"outline-color":[{outline:H()}],shadow:[{shadow:["","none",u,Xy,Yy]}],"shadow-color":[{shadow:H()}],"inset-shadow":[{"inset-shadow":["none",h,Xy,Yy]}],"inset-shadow-color":[{"inset-shadow":H()}],"ring-w":[{ring:fe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:H()}],"ring-offset-w":[{"ring-offset":[or,sm]}],"ring-offset-color":[{"ring-offset":H()}],"inset-ring-w":[{"inset-ring":fe()}],"inset-ring-color":[{"inset-ring":H()}],"text-shadow":[{"text-shadow":["none",g,Xy,Yy]}],"text-shadow-color":[{"text-shadow":H()}],opacity:[{opacity:[or,nn,tn]}],"mix-blend":[{"mix-blend":[...xe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":xe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[or]}],"mask-image-linear-from-pos":[{"mask-linear-from":we()}],"mask-image-linear-to-pos":[{"mask-linear-to":we()}],"mask-image-linear-from-color":[{"mask-linear-from":H()}],"mask-image-linear-to-color":[{"mask-linear-to":H()}],"mask-image-t-from-pos":[{"mask-t-from":we()}],"mask-image-t-to-pos":[{"mask-t-to":we()}],"mask-image-t-from-color":[{"mask-t-from":H()}],"mask-image-t-to-color":[{"mask-t-to":H()}],"mask-image-r-from-pos":[{"mask-r-from":we()}],"mask-image-r-to-pos":[{"mask-r-to":we()}],"mask-image-r-from-color":[{"mask-r-from":H()}],"mask-image-r-to-color":[{"mask-r-to":H()}],"mask-image-b-from-pos":[{"mask-b-from":we()}],"mask-image-b-to-pos":[{"mask-b-to":we()}],"mask-image-b-from-color":[{"mask-b-from":H()}],"mask-image-b-to-color":[{"mask-b-to":H()}],"mask-image-l-from-pos":[{"mask-l-from":we()}],"mask-image-l-to-pos":[{"mask-l-to":we()}],"mask-image-l-from-color":[{"mask-l-from":H()}],"mask-image-l-to-color":[{"mask-l-to":H()}],"mask-image-x-from-pos":[{"mask-x-from":we()}],"mask-image-x-to-pos":[{"mask-x-to":we()}],"mask-image-x-from-color":[{"mask-x-from":H()}],"mask-image-x-to-color":[{"mask-x-to":H()}],"mask-image-y-from-pos":[{"mask-y-from":we()}],"mask-image-y-to-pos":[{"mask-y-to":we()}],"mask-image-y-from-color":[{"mask-y-from":H()}],"mask-image-y-to-color":[{"mask-y-to":H()}],"mask-image-radial":[{"mask-radial":[nn,tn]}],"mask-image-radial-from-pos":[{"mask-radial-from":we()}],"mask-image-radial-to-pos":[{"mask-radial-to":we()}],"mask-image-radial-from-color":[{"mask-radial-from":H()}],"mask-image-radial-to-color":[{"mask-radial-to":H()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":A()}],"mask-image-conic-pos":[{"mask-conic":[or]}],"mask-image-conic-from-pos":[{"mask-conic-from":we()}],"mask-image-conic-to-pos":[{"mask-conic-to":we()}],"mask-image-conic-from-color":[{"mask-conic-from":H()}],"mask-image-conic-to-color":[{"mask-conic-to":H()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ne()}],"mask-repeat":[{mask:ue()}],"mask-size":[{mask:ae()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",nn,tn]}],filter:[{filter:["","none",nn,tn]}],blur:[{blur:Pe()}],brightness:[{brightness:[or,nn,tn]}],contrast:[{contrast:[or,nn,tn]}],"drop-shadow":[{"drop-shadow":["","none",x,Xy,Yy]}],"drop-shadow-color":[{"drop-shadow":H()}],grayscale:[{grayscale:["",or,nn,tn]}],"hue-rotate":[{"hue-rotate":[or,nn,tn]}],invert:[{invert:["",or,nn,tn]}],saturate:[{saturate:[or,nn,tn]}],sepia:[{sepia:["",or,nn,tn]}],"backdrop-filter":[{"backdrop-filter":["","none",nn,tn]}],"backdrop-blur":[{"backdrop-blur":Pe()}],"backdrop-brightness":[{"backdrop-brightness":[or,nn,tn]}],"backdrop-contrast":[{"backdrop-contrast":[or,nn,tn]}],"backdrop-grayscale":[{"backdrop-grayscale":["",or,nn,tn]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[or,nn,tn]}],"backdrop-invert":[{"backdrop-invert":["",or,nn,tn]}],"backdrop-opacity":[{"backdrop-opacity":[or,nn,tn]}],"backdrop-saturate":[{"backdrop-saturate":[or,nn,tn]}],"backdrop-sepia":[{"backdrop-sepia":["",or,nn,tn]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":F()}],"border-spacing-x":[{"border-spacing-x":F()}],"border-spacing-y":[{"border-spacing-y":F()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",nn,tn]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[or,"initial",nn,tn]}],ease:[{ease:["linear","initial",j,nn,tn]}],delay:[{delay:[or,nn,tn]}],animate:[{animate:["none",w,nn,tn]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,nn,tn]}],"perspective-origin":[{"perspective-origin":C()}],rotate:[{rotate:_e()}],"rotate-x":[{"rotate-x":_e()}],"rotate-y":[{"rotate-y":_e()}],"rotate-z":[{"rotate-z":_e()}],scale:[{scale:Ve()}],"scale-x":[{"scale-x":Ve()}],"scale-y":[{"scale-y":Ve()}],"scale-z":[{"scale-z":Ve()}],"scale-3d":["scale-3d"],skew:[{skew:Ue()}],"skew-x":[{"skew-x":Ue()}],"skew-y":[{"skew-y":Ue()}],transform:[{transform:[nn,tn,"","none","gpu","cpu"]}],"transform-origin":[{origin:C()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Le()}],"translate-x":[{"translate-x":Le()}],"translate-y":[{"translate-y":Le()}],"translate-z":[{"translate-z":Le()}],"translate-none":["translate-none"],accent:[{accent:H()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:H()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",nn,tn]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",nn,tn]}],fill:[{fill:["none",...H()]}],"stroke-w":[{stroke:[or,t0,sm,S2]}],stroke:[{stroke:["none",...H()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},vJ=QQ(gJ);function Yt(...e){return vJ(Hn(e))}const p9=P.forwardRef(({...e},t)=>n.jsx("div",{ref:t,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",...e}));p9.displayName="ToastProvider";const x9=P.forwardRef(({...e},t)=>n.jsx("div",{ref:t,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",...e}));x9.displayName="ToastViewport";const yJ=ig("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),g9=P.forwardRef(({className:e,variant:t,...r},s)=>n.jsx("div",{ref:s,className:Yt(yJ({variant:t}),e),...r}));g9.displayName="Toast";const bJ=P.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Yt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));bJ.displayName="ToastAction";const v9=P.forwardRef(({className:e,...t},r)=>n.jsx("button",{ref:r,className:Yt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:n.jsx(Ra,{className:"h-4 w-4"})}));v9.displayName="ToastClose";const y9=P.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Yt("text-sm font-semibold",e),...t}));y9.displayName="ToastTitle";const b9=P.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Yt("text-sm opacity-90",e),...t}));b9.displayName="ToastDescription";function jJ(){const{toasts:e}=GZ();return n.jsxs(p9,{children:[e.map(function({id:t,title:r,description:s,action:a,...i}){return n.jsxs(g9,{...i,children:[n.jsxs("div",{className:"grid gap-1",children:[r&&n.jsx(y9,{children:r}),s&&n.jsx(b9,{children:s})]}),a,n.jsx(v9,{})]},t)}),n.jsx(x9,{})]})}var dg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},wJ={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},lf,XP,C7,_J=(C7=class{constructor(){hn(this,lf,wJ);hn(this,XP,!1)}setTimeoutProvider(e){Wt(this,lf,e)}setTimeout(e,t){return Me(this,lf).setTimeout(e,t)}clearTimeout(e){Me(this,lf).clearTimeout(e)}setInterval(e,t){return Me(this,lf).setInterval(e,t)}clearInterval(e){Me(this,lf).clearInterval(e)}},lf=new WeakMap,XP=new WeakMap,C7),vm=new _J;function NJ(e){setTimeout(e,0)}var $m=typeof window>"u"||"Deno"in globalThis;function To(){}function kJ(e,t){return typeof e=="function"?e(t):e}function yS(e){return typeof e=="number"&&e>=0&&e!==1/0}function j9(e,t){return Math.max(e+(t||0)-Date.now(),0)}function jf(e,t){return typeof e=="function"?e(t):e}function bc(e,t){return typeof e=="function"?e(t):e}function fE(e,t){const{type:r="all",exact:s,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(s){if(t.queryHash!==i3(o,t.options))return!1}else if(!V0(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function mE(e,t){const{exact:r,status:s,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Bm(t.options.mutationKey)!==Bm(i))return!1}else if(!V0(t.options.mutationKey,i))return!1}return!(s&&t.state.status!==s||a&&!a(t))}function i3(e,t){return((t==null?void 0:t.queryKeyHashFn)||Bm)(e)}function Bm(e){return JSON.stringify(e,(t,r)=>bS(r)?Object.keys(r).sort().reduce((s,a)=>(s[a]=r[a],s),{}):r)}function V0(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>V0(e[r],t[r])):!1}var SJ=Object.prototype.hasOwnProperty;function w9(e,t){if(e===t)return e;const r=pE(e)&&pE(t);if(!r&&!(bS(e)&&bS(t)))return t;const a=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),o=i.length,l=r?new Array(o):{};let c=0;for(let d=0;d<o;d++){const u=r?d:i[d],h=e[u],g=t[u];if(h===g){l[u]=h,(r?d<a:SJ.call(e,u))&&c++;continue}if(h===null||g===null||typeof h!="object"||typeof g!="object"){l[u]=g;continue}const x=w9(h,g);l[u]=x,x===h&&c++}return a===o&&c===a?e:l}function Ub(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function pE(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function bS(e){if(!xE(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!xE(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function xE(e){return Object.prototype.toString.call(e)==="[object Object]"}function PJ(e){return new Promise(t=>{vm.setTimeout(t,e)})}function jS(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?w9(e,t):t}function AJ(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function CJ(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var o3=Symbol();function _9(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===o3?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function N9(e,t){return typeof e=="function"?e(...t):!!e}var Nm,cf,hx,T7,TJ=(T7=class extends dg{constructor(){super();hn(this,Nm);hn(this,cf);hn(this,hx);Wt(this,hx,t=>{if(!$m&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Me(this,cf)||this.setEventListener(Me(this,hx))}onUnsubscribe(){var t;this.hasListeners()||((t=Me(this,cf))==null||t.call(this),Wt(this,cf,void 0))}setEventListener(t){var r;Wt(this,hx,t),(r=Me(this,cf))==null||r.call(this),Wt(this,cf,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){Me(this,Nm)!==t&&(Wt(this,Nm,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Me(this,Nm)=="boolean"?Me(this,Nm):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Nm=new WeakMap,cf=new WeakMap,hx=new WeakMap,T7),l3=new TJ;function wS(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function s(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{s({status:"fulfilled",value:a}),e(a)},r.reject=a=>{s({status:"rejected",reason:a}),t(a)},r}var EJ=NJ;function OJ(){let e=[],t=0,r=l=>{l()},s=l=>{l()},a=EJ;const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{s(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{a=l}}}var Xa=OJ(),fx,df,mx,E7,MJ=(E7=class extends dg{constructor(){super();hn(this,fx,!0);hn(this,df);hn(this,mx);Wt(this,mx,t=>{if(!$m&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){Me(this,df)||this.setEventListener(Me(this,mx))}onUnsubscribe(){var t;this.hasListeners()||((t=Me(this,df))==null||t.call(this),Wt(this,df,void 0))}setEventListener(t){var r;Wt(this,mx,t),(r=Me(this,df))==null||r.call(this),Wt(this,df,t(this.setOnline.bind(this)))}setOnline(t){Me(this,fx)!==t&&(Wt(this,fx,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return Me(this,fx)}},fx=new WeakMap,df=new WeakMap,mx=new WeakMap,E7),Hb=new MJ;function LJ(e){return Math.min(1e3*2**e,3e4)}function k9(e){return(e??"online")==="online"?Hb.isOnline():!0}var _S=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function S9(e){let t=!1,r=0,s;const a=wS(),i=()=>a.status!=="pending",o=y=>{var v;if(!i()){const j=new _S(y);g(j),(v=e.onCancel)==null||v.call(e,j)}},l=()=>{t=!0},c=()=>{t=!1},d=()=>l3.isFocused()&&(e.networkMode==="always"||Hb.isOnline())&&e.canRun(),u=()=>k9(e.networkMode)&&e.canRun(),h=y=>{i()||(s==null||s(),a.resolve(y))},g=y=>{i()||(s==null||s(),a.reject(y))},x=()=>new Promise(y=>{var v;s=j=>{(i()||d())&&y(j)},(v=e.onPause)==null||v.call(e)}).then(()=>{var y;s=void 0,i()||(y=e.onContinue)==null||y.call(e)}),b=()=>{if(i())return;let y;const v=r===0?e.initialPromise:void 0;try{y=v??e.fn()}catch(j){y=Promise.reject(j)}Promise.resolve(y).then(h).catch(j=>{var M;if(i())return;const w=e.retry??($m?0:3),N=e.retryDelay??LJ,A=typeof N=="function"?N(r,j):N,C=w===!0||typeof w=="number"&&r<w||typeof w=="function"&&w(r,j);if(t||!C){g(j);return}r++,(M=e.onFail)==null||M.call(e,r,j),PJ(A).then(()=>d()?void 0:x()).then(()=>{t?g(j):b()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(s==null||s(),a),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?b():x().then(b),a)}}var km,O7,P9=(O7=class{constructor(){hn(this,km)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),yS(this.gcTime)&&Wt(this,km,vm.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??($m?1/0:300*1e3))}clearGcTimeout(){Me(this,km)&&(vm.clearTimeout(Me(this,km)),Wt(this,km,void 0))}},km=new WeakMap,O7),Sm,px,yc,Pm,pi,Rv,Am,ud,Xu,M7,DJ=(M7=class extends P9{constructor(t){super();hn(this,ud);hn(this,Sm);hn(this,px);hn(this,yc);hn(this,Pm);hn(this,pi);hn(this,Rv);hn(this,Am);Wt(this,Am,!1),Wt(this,Rv,t.defaultOptions),this.setOptions(t.options),this.observers=[],Wt(this,Pm,t.client),Wt(this,yc,Me(this,Pm).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Wt(this,Sm,gE(this.options)),this.state=t.state??Me(this,Sm),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Me(this,pi))==null?void 0:t.promise}setOptions(t){if(this.options={...Me(this,Rv),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=gE(this.options);r.data!==void 0&&(this.setData(r.data,{updatedAt:r.dataUpdatedAt,manual:!0}),Wt(this,Sm,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Me(this,yc).remove(this)}setData(t,r){const s=jS(this.state.data,t,this.options);return Jn(this,ud,Xu).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){Jn(this,ud,Xu).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,a;const r=(s=Me(this,pi))==null?void 0:s.promise;return(a=Me(this,pi))==null||a.cancel(t),r?r.then(To).catch(To):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Me(this,Sm))}isActive(){return this.observers.some(t=>bc(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===o3||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>jf(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!j9(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Me(this,pi))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Me(this,pi))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Me(this,yc).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Me(this,pi)&&(Me(this,Am)?Me(this,pi).cancel({revert:!0}):Me(this,pi).cancelRetry()),this.scheduleGc()),Me(this,yc).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Jn(this,ud,Xu).call(this,{type:"invalidate"})}async fetch(t,r){var c,d,u,h,g,x,b,y,v,j,w,N;if(this.state.fetchStatus!=="idle"&&((c=Me(this,pi))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Me(this,pi))return Me(this,pi).continueRetry(),Me(this,pi).promise}if(t&&this.setOptions(t),!this.options.queryFn){const A=this.observers.find(C=>C.options.queryFn);A&&this.setOptions(A.options)}const s=new AbortController,a=A=>{Object.defineProperty(A,"signal",{enumerable:!0,get:()=>(Wt(this,Am,!0),s.signal)})},i=()=>{const A=_9(this.options,r),M=(()=>{const I={client:Me(this,Pm),queryKey:this.queryKey,meta:this.meta};return a(I),I})();return Wt(this,Am,!1),this.options.persister?this.options.persister(A,M,this):A(M)},l=(()=>{const A={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Me(this,Pm),state:this.state,fetchFn:i};return a(A),A})();(d=this.options.behavior)==null||d.onFetch(l,this),Wt(this,px,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=l.fetchOptions)==null?void 0:u.meta))&&Jn(this,ud,Xu).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta}),Wt(this,pi,S9({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:A=>{A instanceof _S&&A.revert&&this.setState({...Me(this,px),fetchStatus:"idle"}),s.abort()},onFail:(A,C)=>{Jn(this,ud,Xu).call(this,{type:"failed",failureCount:A,error:C})},onPause:()=>{Jn(this,ud,Xu).call(this,{type:"pause"})},onContinue:()=>{Jn(this,ud,Xu).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const A=await Me(this,pi).start();if(A===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(A),(x=(g=Me(this,yc).config).onSuccess)==null||x.call(g,A,this),(y=(b=Me(this,yc).config).onSettled)==null||y.call(b,A,this.state.error,this),A}catch(A){if(A instanceof _S){if(A.silent)return Me(this,pi).promise;if(A.revert){if(this.state.data===void 0)throw A;return this.state.data}}throw Jn(this,ud,Xu).call(this,{type:"error",error:A}),(j=(v=Me(this,yc).config).onError)==null||j.call(v,A,this),(N=(w=Me(this,yc).config).onSettled)==null||N.call(w,this.state.data,A,this),A}finally{this.scheduleGc()}}},Sm=new WeakMap,px=new WeakMap,yc=new WeakMap,Pm=new WeakMap,pi=new WeakMap,Rv=new WeakMap,Am=new WeakMap,ud=new WeakSet,Xu=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...A9(s.data,this.options),fetchMeta:t.meta??null};case"success":const a={...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Wt(this,px,t.manual?a:void 0),a;case"error":const i=t.error;return{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),Xa.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Me(this,yc).notify({query:this,type:"updated",action:t})})},M7);function A9(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:k9(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function gE(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,s=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var cl,pr,Fv,Ao,Cm,xx,Ju,uf,$v,gx,vx,Tm,Em,hf,yx,Wr,p0,NS,kS,SS,PS,AS,CS,TS,C9,L7,IJ=(L7=class extends dg{constructor(t,r){super();hn(this,Wr);hn(this,cl);hn(this,pr);hn(this,Fv);hn(this,Ao);hn(this,Cm);hn(this,xx);hn(this,Ju);hn(this,uf);hn(this,$v);hn(this,gx);hn(this,vx);hn(this,Tm);hn(this,Em);hn(this,hf);hn(this,yx,new Set);this.options=r,Wt(this,cl,t),Wt(this,uf,null),Wt(this,Ju,wS()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Me(this,pr).addObserver(this),vE(Me(this,pr),this.options)?Jn(this,Wr,p0).call(this):this.updateResult(),Jn(this,Wr,PS).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ES(Me(this,pr),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ES(Me(this,pr),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Jn(this,Wr,AS).call(this),Jn(this,Wr,CS).call(this),Me(this,pr).removeObserver(this)}setOptions(t){const r=this.options,s=Me(this,pr);if(this.options=Me(this,cl).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof bc(this.options.enabled,Me(this,pr))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Jn(this,Wr,TS).call(this),Me(this,pr).setOptions(this.options),r._defaulted&&!Ub(this.options,r)&&Me(this,cl).getQueryCache().notify({type:"observerOptionsUpdated",query:Me(this,pr),observer:this});const a=this.hasListeners();a&&yE(Me(this,pr),s,this.options,r)&&Jn(this,Wr,p0).call(this),this.updateResult(),a&&(Me(this,pr)!==s||bc(this.options.enabled,Me(this,pr))!==bc(r.enabled,Me(this,pr))||jf(this.options.staleTime,Me(this,pr))!==jf(r.staleTime,Me(this,pr)))&&Jn(this,Wr,NS).call(this);const i=Jn(this,Wr,kS).call(this);a&&(Me(this,pr)!==s||bc(this.options.enabled,Me(this,pr))!==bc(r.enabled,Me(this,pr))||i!==Me(this,hf))&&Jn(this,Wr,SS).call(this,i)}getOptimisticResult(t){const r=Me(this,cl).getQueryCache().build(Me(this,cl),t),s=this.createResult(r,t);return FJ(this,s)&&(Wt(this,Ao,s),Wt(this,xx,this.options),Wt(this,Cm,Me(this,pr).state)),s}getCurrentResult(){return Me(this,Ao)}trackResult(t,r){return new Proxy(t,{get:(s,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&!this.options.experimental_prefetchInRender&&Me(this,Ju).status==="pending"&&Me(this,Ju).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(s,a))})}trackProp(t){Me(this,yx).add(t)}getCurrentQuery(){return Me(this,pr)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=Me(this,cl).defaultQueryOptions(t),s=Me(this,cl).getQueryCache().build(Me(this,cl),r);return s.fetch().then(()=>this.createResult(s,r))}fetch(t){return Jn(this,Wr,p0).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),Me(this,Ao)))}createResult(t,r){var U;const s=Me(this,pr),a=this.options,i=Me(this,Ao),o=Me(this,Cm),l=Me(this,xx),d=t!==s?t.state:Me(this,Fv),{state:u}=t;let h={...u},g=!1,x;if(r._optimisticResults){const W=this.hasListeners(),D=!W&&vE(t,r),R=W&&yE(t,s,r,a);(D||R)&&(h={...h,...A9(u.data,t.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:b,errorUpdatedAt:y,status:v}=h;x=h.data;let j=!1;if(r.placeholderData!==void 0&&x===void 0&&v==="pending"){let W;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(W=i.data,j=!0):W=typeof r.placeholderData=="function"?r.placeholderData((U=Me(this,vx))==null?void 0:U.state.data,Me(this,vx)):r.placeholderData,W!==void 0&&(v="success",x=jS(i==null?void 0:i.data,W,r),g=!0)}if(r.select&&x!==void 0&&!j)if(i&&x===(o==null?void 0:o.data)&&r.select===Me(this,$v))x=Me(this,gx);else try{Wt(this,$v,r.select),x=r.select(x),x=jS(i==null?void 0:i.data,x,r),Wt(this,gx,x),Wt(this,uf,null)}catch(W){Wt(this,uf,W)}Me(this,uf)&&(b=Me(this,uf),x=Me(this,gx),y=Date.now(),v="error");const w=h.fetchStatus==="fetching",N=v==="pending",A=v==="error",C=N&&w,M=x!==void 0,F={status:v,fetchStatus:h.fetchStatus,isPending:N,isSuccess:v==="success",isError:A,isInitialLoading:C,isLoading:C,data:x,dataUpdatedAt:h.dataUpdatedAt,error:b,errorUpdatedAt:y,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:w,isRefetching:w&&!N,isLoadingError:A&&!M,isPaused:h.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:A&&M,isStale:c3(t,r),refetch:this.refetch,promise:Me(this,Ju),isEnabled:bc(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const W=z=>{F.status==="error"?z.reject(F.error):F.data!==void 0&&z.resolve(F.data)},D=()=>{const z=Wt(this,Ju,F.promise=wS());W(z)},R=Me(this,Ju);switch(R.status){case"pending":t.queryHash===s.queryHash&&W(R);break;case"fulfilled":(F.status==="error"||F.data!==R.value)&&D();break;case"rejected":(F.status!=="error"||F.error!==R.reason)&&D();break}}return F}updateResult(){const t=Me(this,Ao),r=this.createResult(Me(this,pr),this.options);if(Wt(this,Cm,Me(this,pr).state),Wt(this,xx,this.options),Me(this,Cm).data!==void 0&&Wt(this,vx,Me(this,pr)),Ub(r,t))return;Wt(this,Ao,r);const s=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!Me(this,yx).size)return!0;const o=new Set(i??Me(this,yx));return this.options.throwOnError&&o.add("error"),Object.keys(Me(this,Ao)).some(l=>{const c=l;return Me(this,Ao)[c]!==t[c]&&o.has(c)})};Jn(this,Wr,C9).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Jn(this,Wr,PS).call(this)}},cl=new WeakMap,pr=new WeakMap,Fv=new WeakMap,Ao=new WeakMap,Cm=new WeakMap,xx=new WeakMap,Ju=new WeakMap,uf=new WeakMap,$v=new WeakMap,gx=new WeakMap,vx=new WeakMap,Tm=new WeakMap,Em=new WeakMap,hf=new WeakMap,yx=new WeakMap,Wr=new WeakSet,p0=function(t){Jn(this,Wr,TS).call(this);let r=Me(this,pr).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(To)),r},NS=function(){Jn(this,Wr,AS).call(this);const t=jf(this.options.staleTime,Me(this,pr));if($m||Me(this,Ao).isStale||!yS(t))return;const s=j9(Me(this,Ao).dataUpdatedAt,t)+1;Wt(this,Tm,vm.setTimeout(()=>{Me(this,Ao).isStale||this.updateResult()},s))},kS=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Me(this,pr)):this.options.refetchInterval)??!1},SS=function(t){Jn(this,Wr,CS).call(this),Wt(this,hf,t),!($m||bc(this.options.enabled,Me(this,pr))===!1||!yS(Me(this,hf))||Me(this,hf)===0)&&Wt(this,Em,vm.setInterval(()=>{(this.options.refetchIntervalInBackground||l3.isFocused())&&Jn(this,Wr,p0).call(this)},Me(this,hf)))},PS=function(){Jn(this,Wr,NS).call(this),Jn(this,Wr,SS).call(this,Jn(this,Wr,kS).call(this))},AS=function(){Me(this,Tm)&&(vm.clearTimeout(Me(this,Tm)),Wt(this,Tm,void 0))},CS=function(){Me(this,Em)&&(vm.clearInterval(Me(this,Em)),Wt(this,Em,void 0))},TS=function(){const t=Me(this,cl).getQueryCache().build(Me(this,cl),this.options);if(t===Me(this,pr))return;const r=Me(this,pr);Wt(this,pr,t),Wt(this,Fv,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},C9=function(t){Xa.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(Me(this,Ao))}),Me(this,cl).getQueryCache().notify({query:Me(this,pr),type:"observerResultsUpdated"})})},L7);function RJ(e,t){return bc(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function vE(e,t){return RJ(e,t)||e.state.data!==void 0&&ES(e,t,t.refetchOnMount)}function ES(e,t,r){if(bc(t.enabled,e)!==!1&&jf(t.staleTime,e)!=="static"){const s=typeof r=="function"?r(e):r;return s==="always"||s!==!1&&c3(e,t)}return!1}function yE(e,t,r,s){return(e!==t||bc(s.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&c3(e,r)}function c3(e,t){return bc(t.enabled,e)!==!1&&e.isStaleByTime(jf(t.staleTime,e))}function FJ(e,t){return!Ub(e.getCurrentResult(),t)}function bE(e){return{onFetch:(t,r)=>{var u,h,g,x,b;const s=t.options,a=(g=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:g.direction,i=((x=t.state.data)==null?void 0:x.pages)||[],o=((b=t.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let y=!1;const v=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(t.signal.aborted?y=!0:t.signal.addEventListener("abort",()=>{y=!0}),t.signal)})},j=_9(t.options,t.fetchOptions),w=async(N,A,C)=>{if(y)return Promise.reject();if(A==null&&N.pages.length)return Promise.resolve(N);const I=(()=>{const D={client:t.client,queryKey:t.queryKey,pageParam:A,direction:C?"backward":"forward",meta:t.options.meta};return v(D),D})(),F=await j(I),{maxPages:U}=t.options,W=C?CJ:AJ;return{pages:W(N.pages,F,U),pageParams:W(N.pageParams,A,U)}};if(a&&i.length){const N=a==="backward",A=N?$J:jE,C={pages:i,pageParams:o},M=A(s,C);l=await w(C,M,N)}else{const N=e??i.length;do{const A=c===0?o[0]??s.initialPageParam:jE(s,l);if(c>0&&A==null)break;l=await w(l,A),c++}while(c<N)}return l};t.options.persister?t.fetchFn=()=>{var y,v;return(v=(y=t.options).persister)==null?void 0:v.call(y,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function jE(e,{pages:t,pageParams:r}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,r[s],r):void 0}function $J(e,{pages:t,pageParams:r}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,r[0],r):void 0}var Bv,Qd,Co,Om,Jd,Jh,D7,BJ=(D7=class extends P9{constructor(t){super();hn(this,Jd);hn(this,Bv);hn(this,Qd);hn(this,Co);hn(this,Om);Wt(this,Bv,t.client),this.mutationId=t.mutationId,Wt(this,Co,t.mutationCache),Wt(this,Qd,[]),this.state=t.state||T9(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Me(this,Qd).includes(t)||(Me(this,Qd).push(t),this.clearGcTimeout(),Me(this,Co).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Wt(this,Qd,Me(this,Qd).filter(r=>r!==t)),this.scheduleGc(),Me(this,Co).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Me(this,Qd).length||(this.state.status==="pending"?this.scheduleGc():Me(this,Co).remove(this))}continue(){var t;return((t=Me(this,Om))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,d,u,h,g,x,b,y,v,j,w,N,A,C,M,I,F,U;const r=()=>{Jn(this,Jd,Jh).call(this,{type:"continue"})},s={client:Me(this,Bv),meta:this.options.meta,mutationKey:this.options.mutationKey};Wt(this,Om,S9({fn:()=>this.options.mutationFn?this.options.mutationFn(t,s):Promise.reject(new Error("No mutationFn found")),onFail:(W,D)=>{Jn(this,Jd,Jh).call(this,{type:"failed",failureCount:W,error:D})},onPause:()=>{Jn(this,Jd,Jh).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Me(this,Co).canRun(this)}));const a=this.state.status==="pending",i=!Me(this,Om).canStart();try{if(a)r();else{Jn(this,Jd,Jh).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=Me(this,Co).config).onMutate)==null?void 0:l.call(o,t,this,s));const D=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t,s));D!==this.state.context&&Jn(this,Jd,Jh).call(this,{type:"pending",context:D,variables:t,isPaused:i})}const W=await Me(this,Om).start();return await((h=(u=Me(this,Co).config).onSuccess)==null?void 0:h.call(u,W,t,this.state.context,this,s)),await((x=(g=this.options).onSuccess)==null?void 0:x.call(g,W,t,this.state.context,s)),await((y=(b=Me(this,Co).config).onSettled)==null?void 0:y.call(b,W,null,this.state.variables,this.state.context,this,s)),await((j=(v=this.options).onSettled)==null?void 0:j.call(v,W,null,t,this.state.context,s)),Jn(this,Jd,Jh).call(this,{type:"success",data:W}),W}catch(W){try{throw await((N=(w=Me(this,Co).config).onError)==null?void 0:N.call(w,W,t,this.state.context,this,s)),await((C=(A=this.options).onError)==null?void 0:C.call(A,W,t,this.state.context,s)),await((I=(M=Me(this,Co).config).onSettled)==null?void 0:I.call(M,void 0,W,this.state.variables,this.state.context,this,s)),await((U=(F=this.options).onSettled)==null?void 0:U.call(F,void 0,W,t,this.state.context,s)),W}finally{Jn(this,Jd,Jh).call(this,{type:"error",error:W})}}finally{Me(this,Co).runNext(this)}}},Bv=new WeakMap,Qd=new WeakMap,Co=new WeakMap,Om=new WeakMap,Jd=new WeakSet,Jh=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Xa.batch(()=>{Me(this,Qd).forEach(s=>{s.onMutationUpdate(t)}),Me(this,Co).notify({mutation:this,type:"updated",action:t})})},D7);function T9(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var eh,hd,qv,I7,qJ=(I7=class extends dg{constructor(t={}){super();hn(this,eh);hn(this,hd);hn(this,qv);this.config=t,Wt(this,eh,new Set),Wt(this,hd,new Map),Wt(this,qv,0)}build(t,r,s){const a=new BJ({client:t,mutationCache:this,mutationId:++Wy(this,qv)._,options:t.defaultMutationOptions(r),state:s});return this.add(a),a}add(t){Me(this,eh).add(t);const r=Qy(t);if(typeof r=="string"){const s=Me(this,hd).get(r);s?s.push(t):Me(this,hd).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Me(this,eh).delete(t)){const r=Qy(t);if(typeof r=="string"){const s=Me(this,hd).get(r);if(s)if(s.length>1){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}else s[0]===t&&Me(this,hd).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Qy(t);if(typeof r=="string"){const s=Me(this,hd).get(r),a=s==null?void 0:s.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var s;const r=Qy(t);if(typeof r=="string"){const a=(s=Me(this,hd).get(r))==null?void 0:s.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Xa.batch(()=>{Me(this,eh).forEach(t=>{this.notify({type:"removed",mutation:t})}),Me(this,eh).clear(),Me(this,hd).clear()})}getAll(){return Array.from(Me(this,eh))}find(t){const r={exact:!0,...t};return this.getAll().find(s=>mE(r,s))}findAll(t={}){return this.getAll().filter(r=>mE(t,r))}notify(t){Xa.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Xa.batch(()=>Promise.all(t.map(r=>r.continue().catch(To))))}},eh=new WeakMap,hd=new WeakMap,qv=new WeakMap,I7);function Qy(e){var t;return(t=e.options.scope)==null?void 0:t.id}var th,ff,dl,nh,ph,Cb,OS,R7,zJ=(R7=class extends dg{constructor(r,s){super();hn(this,ph);hn(this,th);hn(this,ff);hn(this,dl);hn(this,nh);Wt(this,th,r),this.setOptions(s),this.bindMethods(),Jn(this,ph,Cb).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const s=this.options;this.options=Me(this,th).defaultMutationOptions(r),Ub(this.options,s)||Me(this,th).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Me(this,dl),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Bm(s.mutationKey)!==Bm(this.options.mutationKey)?this.reset():((a=Me(this,dl))==null?void 0:a.state.status)==="pending"&&Me(this,dl).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=Me(this,dl))==null||r.removeObserver(this)}onMutationUpdate(r){Jn(this,ph,Cb).call(this),Jn(this,ph,OS).call(this,r)}getCurrentResult(){return Me(this,ff)}reset(){var r;(r=Me(this,dl))==null||r.removeObserver(this),Wt(this,dl,void 0),Jn(this,ph,Cb).call(this),Jn(this,ph,OS).call(this)}mutate(r,s){var a;return Wt(this,nh,s),(a=Me(this,dl))==null||a.removeObserver(this),Wt(this,dl,Me(this,th).getMutationCache().build(Me(this,th),this.options)),Me(this,dl).addObserver(this),Me(this,dl).execute(r)}},th=new WeakMap,ff=new WeakMap,dl=new WeakMap,nh=new WeakMap,ph=new WeakSet,Cb=function(){var s;const r=((s=Me(this,dl))==null?void 0:s.state)??T9();Wt(this,ff,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},OS=function(r){Xa.batch(()=>{var s,a,i,o,l,c,d,u;if(Me(this,nh)&&this.hasListeners()){const h=Me(this,ff).variables,g=Me(this,ff).context,x={client:Me(this,th),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((a=(s=Me(this,nh)).onSuccess)==null||a.call(s,r.data,h,g,x),(o=(i=Me(this,nh)).onSettled)==null||o.call(i,r.data,null,h,g,x)):(r==null?void 0:r.type)==="error"&&((c=(l=Me(this,nh)).onError)==null||c.call(l,r.error,h,g,x),(u=(d=Me(this,nh)).onSettled)==null||u.call(d,void 0,r.error,h,g,x))}this.listeners.forEach(h=>{h(Me(this,ff))})})},R7),eu,F7,VJ=(F7=class extends dg{constructor(t={}){super();hn(this,eu);this.config=t,Wt(this,eu,new Map)}build(t,r,s){const a=r.queryKey,i=r.queryHash??i3(a,r);let o=this.get(i);return o||(o=new DJ({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){Me(this,eu).has(t.queryHash)||(Me(this,eu).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Me(this,eu).get(t.queryHash);r&&(t.destroy(),r===t&&Me(this,eu).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Xa.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Me(this,eu).get(t)}getAll(){return[...Me(this,eu).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(s=>fE(r,s))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(s=>fE(t,s)):r}notify(t){Xa.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Xa.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Xa.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},eu=new WeakMap,F7),Xs,mf,pf,bx,jx,xf,wx,_x,$7,UJ=($7=class{constructor(e={}){hn(this,Xs);hn(this,mf);hn(this,pf);hn(this,bx);hn(this,jx);hn(this,xf);hn(this,wx);hn(this,_x);Wt(this,Xs,e.queryCache||new VJ),Wt(this,mf,e.mutationCache||new qJ),Wt(this,pf,e.defaultOptions||{}),Wt(this,bx,new Map),Wt(this,jx,new Map),Wt(this,xf,0)}mount(){Wy(this,xf)._++,Me(this,xf)===1&&(Wt(this,wx,l3.subscribe(async e=>{e&&(await this.resumePausedMutations(),Me(this,Xs).onFocus())})),Wt(this,_x,Hb.subscribe(async e=>{e&&(await this.resumePausedMutations(),Me(this,Xs).onOnline())})))}unmount(){var e,t;Wy(this,xf)._--,Me(this,xf)===0&&((e=Me(this,wx))==null||e.call(this),Wt(this,wx,void 0),(t=Me(this,_x))==null||t.call(this),Wt(this,_x,void 0))}isFetching(e){return Me(this,Xs).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Me(this,mf).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Me(this,Xs).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=Me(this,Xs).build(this,t),s=r.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(jf(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return Me(this,Xs).findAll(e).map(({queryKey:t,state:r})=>{const s=r.data;return[t,s]})}setQueryData(e,t,r){const s=this.defaultQueryOptions({queryKey:e}),a=Me(this,Xs).get(s.queryHash),i=a==null?void 0:a.state.data,o=kJ(t,i);if(o!==void 0)return Me(this,Xs).build(this,s).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Xa.batch(()=>Me(this,Xs).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Me(this,Xs).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=Me(this,Xs);Xa.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=Me(this,Xs);return Xa.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},s=Xa.batch(()=>Me(this,Xs).findAll(e).map(a=>a.cancel(r)));return Promise.all(s).then(To).catch(To)}invalidateQueries(e,t={}){return Xa.batch(()=>(Me(this,Xs).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},s=Xa.batch(()=>Me(this,Xs).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(To)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(To)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=Me(this,Xs).build(this,t);return r.isStaleByTime(jf(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(To).catch(To)}fetchInfiniteQuery(e){return e.behavior=bE(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(To).catch(To)}ensureInfiniteQueryData(e){return e.behavior=bE(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Hb.isOnline()?Me(this,mf).resumePausedMutations():Promise.resolve()}getQueryCache(){return Me(this,Xs)}getMutationCache(){return Me(this,mf)}getDefaultOptions(){return Me(this,pf)}setDefaultOptions(e){Wt(this,pf,e)}setQueryDefaults(e,t){Me(this,bx).set(Bm(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Me(this,bx).values()],r={};return t.forEach(s=>{V0(e,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(e,t){Me(this,jx).set(Bm(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Me(this,jx).values()],r={};return t.forEach(s=>{V0(e,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Me(this,pf).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=i3(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===o3&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Me(this,pf).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Me(this,Xs).clear(),Me(this,mf).clear()}},Xs=new WeakMap,mf=new WeakMap,pf=new WeakMap,bx=new WeakMap,jx=new WeakMap,xf=new WeakMap,wx=new WeakMap,_x=new WeakMap,$7),E9=P.createContext(void 0),$n=e=>{const t=P.useContext(E9);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},HJ=({client:e,children:t})=>(P.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(E9.Provider,{value:e,children:t})),O9=P.createContext(!1),WJ=()=>P.useContext(O9);O9.Provider;function KJ(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var GJ=P.createContext(KJ()),ZJ=()=>P.useContext(GJ),YJ=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},XJ=e=>{P.useEffect(()=>{e.clearReset()},[e])},QJ=({result:e,errorResetBoundary:t,throwOnError:r,query:s,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(a&&e.data===void 0||N9(r,[e.error,s])),JJ=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),s=e.staleTime;e.staleTime=typeof s=="function"?(...a)=>r(s(...a)):r(s),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},eee=(e,t)=>e.isLoading&&e.isFetching&&!t,tee=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,wE=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function nee(e,t,r){var h,g,x,b,y;const s=WJ(),a=ZJ(),i=$n(),o=i.defaultQueryOptions(e);(g=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||g.call(h,o),o._optimisticResults=s?"isRestoring":"optimistic",JJ(o),YJ(o,a),XJ(a);const l=!i.getQueryCache().get(o.queryHash),[c]=P.useState(()=>new t(i,o)),d=c.getOptimisticResult(o),u=!s&&e.subscribed!==!1;if(P.useSyncExternalStore(P.useCallback(v=>{const j=u?c.subscribe(Xa.batchCalls(v)):To;return c.updateResult(),j},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),P.useEffect(()=>{c.setOptions(o)},[o,c]),tee(o,d))throw wE(o,c,a);if(QJ({result:d,errorResetBoundary:a,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;if((b=(x=i.getDefaultOptions().queries)==null?void 0:x._experimental_afterQuery)==null||b.call(x,o,d),o.experimental_prefetchInRender&&!$m&&eee(d,s)){const v=l?wE(o,c,a):(y=i.getQueryCache().get(o.queryHash))==null?void 0:y.promise;v==null||v.catch(To).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function He(e,t){return nee(e,IJ)}function Xt(e,t){const r=$n(),[s]=P.useState(()=>new zJ(r,e));P.useEffect(()=>{s.setOptions(e)},[s,e]);const a=P.useSyncExternalStore(P.useCallback(o=>s.subscribe(Xa.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=P.useCallback((o,l)=>{s.mutate(o,l).catch(To)},[s]);if(a.error&&N9(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}const ree=new UJ({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}});var ug=B7();const see=Dr(ug);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function U0(){return U0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},U0.apply(this,arguments)}var vf;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(vf||(vf={}));const _E="popstate";function aee(e){e===void 0&&(e={});function t(a,i){let{pathname:o="/",search:l="",hash:c=""}=np(a.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),MS("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(a,i){let o=a.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=a.location.href,d=c.indexOf("#");l=d===-1?c:c.slice(0,d)}return l+"#"+(typeof i=="string"?i:Wb(i))}function s(a,i){d3(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return oee(t,r,s,e)}function Da(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function d3(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function iee(){return Math.random().toString(36).substr(2,8)}function NE(e,t){return{usr:e.state,key:e.key,idx:t}}function MS(e,t,r,s){return r===void 0&&(r=null),U0({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?np(t):t,{state:r,key:t&&t.key||s||iee()})}function Wb(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function np(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function oee(e,t,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:i=!1}=s,o=a.history,l=vf.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(U0({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function h(){l=vf.Pop;let v=u(),j=v==null?null:v-d;d=v,c&&c({action:l,location:y.location,delta:j})}function g(v,j){l=vf.Push;let w=MS(y.location,v,j);r&&r(w,v),d=u()+1;let N=NE(w,d),A=y.createHref(w);try{o.pushState(N,"",A)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;a.location.assign(A)}i&&c&&c({action:l,location:y.location,delta:1})}function x(v,j){l=vf.Replace;let w=MS(y.location,v,j);r&&r(w,v),d=u();let N=NE(w,d),A=y.createHref(w);o.replaceState(N,"",A),i&&c&&c({action:l,location:y.location,delta:0})}function b(v){let j=a.location.origin!=="null"?a.location.origin:a.location.href,w=typeof v=="string"?v:Wb(v);return w=w.replace(/ $/,"%20"),Da(j,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,j)}let y={get action(){return l},get location(){return e(a,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(_E,h),c=v,()=>{a.removeEventListener(_E,h),c=null}},createHref(v){return t(a,v)},createURL:b,encodeLocation(v){let j=b(v);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:g,replace:x,go(v){return o.go(v)}};return y}var kE;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(kE||(kE={}));function lee(e,t,r){return r===void 0&&(r="/"),cee(e,t,r)}function cee(e,t,r,s){let a=typeof t=="string"?np(t):t,i=u3(a.pathname||"/",r);if(i==null)return null;let o=M9(e);dee(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=wee(i);l=yee(o[c],d)}return l}function M9(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Da(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=wf([s,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(Da(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),M9(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:gee(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of L9(i.path))a(i,o,c)}),t}function L9(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let o=L9(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function dee(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:vee(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const uee=/^:[\w-]+$/,hee=3,fee=2,mee=1,pee=10,xee=-2,SE=e=>e==="*";function gee(e,t){let r=e.split("/"),s=r.length;return r.some(SE)&&(s+=xee),t&&(s+=fee),r.filter(a=>!SE(a)).reduce((a,i)=>a+(uee.test(i)?hee:i===""?mee:pee),s)}function vee(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function yee(e,t,r){let{routesMeta:s}=e,a={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=bee({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),g=c.route;if(!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:wf([i,h.pathname]),pathnameBase:See(wf([i,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(i=wf([i,h.pathnameBase]))}return o}function bee(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=jee(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:s.reduce((d,u,h)=>{let{paramName:g,isOptional:x}=u;if(g==="*"){let y=l[h]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const b=l[h];return x&&!b?d[g]=void 0:d[g]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function jee(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),d3(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function wee(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return d3(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function u3(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function _ee(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:a=""}=typeof e=="string"?np(e):e;return{pathname:r?r.startsWith("/")?r:Nee(r,t):t,search:Pee(s),hash:Aee(a)}}function Nee(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function P2(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kee(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function D9(e,t){let r=kee(e);return t?r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function I9(e,t,r,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=np(e):(a=U0({},e),Da(!a.pathname||!a.pathname.includes("?"),P2("?","pathname","search",a)),Da(!a.pathname||!a.pathname.includes("#"),P2("#","pathname","hash",a)),Da(!a.search||!a.search.includes("#"),P2("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!s&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),h-=1;a.pathname=g.join("/")}l=h>=0?t[h]:"/"}let c=_ee(a,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const wf=e=>e.join("/").replace(/\/\/+/g,"/"),See=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Pee=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Aee=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Cee(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const R9=["post","put","patch","delete"];new Set(R9);const Tee=["get",...R9];new Set(Tee);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function H0(){return H0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},H0.apply(this,arguments)}const h3=P.createContext(null),Eee=P.createContext(null),rp=P.createContext(null),pj=P.createContext(null),sp=P.createContext({outlet:null,matches:[],isDataRoute:!1}),F9=P.createContext(null);function Oee(e,t){let{relative:r}=t===void 0?{}:t;Uv()||Da(!1);let{basename:s,navigator:a}=P.useContext(rp),{hash:i,pathname:o,search:l}=B9(e,{relative:r}),c=o;return s!=="/"&&(c=o==="/"?s:wf([s,o])),a.createHref({pathname:c,search:l,hash:i})}function Uv(){return P.useContext(pj)!=null}function hg(){return Uv()||Da(!1),P.useContext(pj).location}function $9(e){P.useContext(rp).static||P.useLayoutEffect(e)}function Mf(){let{isDataRoute:e}=P.useContext(sp);return e?Hee():Mee()}function Mee(){Uv()||Da(!1);let e=P.useContext(h3),{basename:t,future:r,navigator:s}=P.useContext(rp),{matches:a}=P.useContext(sp),{pathname:i}=hg(),o=JSON.stringify(D9(a,r.v7_relativeSplatPath)),l=P.useRef(!1);return $9(()=>{l.current=!0}),P.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let h=I9(d,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:wf([t,h.pathname])),(u.replace?s.replace:s.push)(h,u.state,u)},[t,s,o,i,e])}function B9(e,t){let{relative:r}=t===void 0?{}:t,{future:s}=P.useContext(rp),{matches:a}=P.useContext(sp),{pathname:i}=hg(),o=JSON.stringify(D9(a,s.v7_relativeSplatPath));return P.useMemo(()=>I9(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function Lee(e,t){return Dee(e,t)}function Dee(e,t,r,s){Uv()||Da(!1);let{navigator:a}=P.useContext(rp),{matches:i}=P.useContext(sp),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=hg(),u;if(t){var h;let v=typeof t=="string"?np(t):t;c==="/"||(h=v.pathname)!=null&&h.startsWith(c)||Da(!1),u=v}else u=d;let g=u.pathname||"/",x=g;if(c!=="/"){let v=c.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(v.length).join("/")}let b=lee(e,{pathname:x}),y=Bee(b&&b.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:wf([c,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:wf([c,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,r,s);return t&&y?P.createElement(pj.Provider,{value:{location:H0({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:vf.Pop}},y):y}function Iee(){let e=Uee(),t=Cee(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),r?P.createElement("pre",{style:a},r):null,null)}const Ree=P.createElement(Iee,null);class Fee extends P.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?P.createElement(sp.Provider,{value:this.props.routeContext},P.createElement(F9.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $ee(e){let{routeContext:t,match:r,children:s}=e,a=P.useContext(h3);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),P.createElement(sp.Provider,{value:t},s)}function Bee(e,t,r,s){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=s)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let u=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);u>=0||Da(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(r&&s&&s.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:g,errors:x}=r,b=h.route.loader&&g[h.route.id]===void 0&&(!x||x[h.route.id]===void 0);if(h.route.lazy||b){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,h,g)=>{let x,b=!1,y=null,v=null;r&&(x=l&&h.route.id?l[h.route.id]:void 0,y=h.route.errorElement||Ree,c&&(d<0&&g===0?(Wee("route-fallback"),b=!0,v=null):d===g&&(b=!0,v=h.route.hydrateFallbackElement||null)));let j=t.concat(o.slice(0,g+1)),w=()=>{let N;return x?N=y:b?N=v:h.route.Component?N=P.createElement(h.route.Component,null):h.route.element?N=h.route.element:N=u,P.createElement($ee,{match:h,routeContext:{outlet:u,matches:j,isDataRoute:r!=null},children:N})};return r&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?P.createElement(Fee,{location:r.location,revalidation:r.revalidation,component:y,error:x,children:w(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):w()},null)}var q9=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(q9||{}),z9=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(z9||{});function qee(e){let t=P.useContext(h3);return t||Da(!1),t}function zee(e){let t=P.useContext(Eee);return t||Da(!1),t}function Vee(e){let t=P.useContext(sp);return t||Da(!1),t}function V9(e){let t=Vee(),r=t.matches[t.matches.length-1];return r.route.id||Da(!1),r.route.id}function Uee(){var e;let t=P.useContext(F9),r=zee(),s=V9();return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function Hee(){let{router:e}=qee(q9.UseNavigateStable),t=V9(z9.UseNavigateStable),r=P.useRef(!1);return $9(()=>{r.current=!0}),P.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,H0({fromRouteId:t},i)))},[e,t])}const PE={};function Wee(e,t,r){PE[e]||(PE[e]=!0)}function Kee(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function x0(e){Da(!1)}function Gee(e){let{basename:t="/",children:r=null,location:s,navigationType:a=vf.Pop,navigator:i,static:o=!1,future:l}=e;Uv()&&Da(!1);let c=t.replace(/^\/*/,"/"),d=P.useMemo(()=>({basename:c,navigator:i,static:o,future:H0({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof s=="string"&&(s=np(s));let{pathname:u="/",search:h="",hash:g="",state:x=null,key:b="default"}=s,y=P.useMemo(()=>{let v=u3(u,c);return v==null?null:{location:{pathname:v,search:h,hash:g,state:x,key:b},navigationType:a}},[c,u,h,g,x,b,a]);return y==null?null:P.createElement(rp.Provider,{value:d},P.createElement(pj.Provider,{children:r,value:y}))}function AE(e){let{children:t,location:r}=e;return Lee(LS(t),r)}new Promise(()=>{});function LS(e,t){t===void 0&&(t=[]);let r=[];return P.Children.forEach(e,(s,a)=>{if(!P.isValidElement(s))return;let i=[...t,a];if(s.type===P.Fragment){r.push.apply(r,LS(s.props.children,i));return}s.type!==x0&&Da(!1),!s.props.index||!s.props.children||Da(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=LS(s.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function DS(){return DS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},DS.apply(this,arguments)}function Zee(e,t){if(e==null)return{};var r={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Yee(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Xee(e,t){return e.button===0&&(!t||t==="_self")&&!Yee(e)}const Qee=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Jee="6";try{window.__reactRouterVersion=Jee}catch{}const ete="startTransition",CE=QP[ete];function tte(e){let{basename:t,children:r,future:s,window:a}=e,i=P.useRef();i.current==null&&(i.current=aee({window:a,v5Compat:!0}));let o=i.current,[l,c]=P.useState({action:o.action,location:o.location}),{v7_startTransition:d}=s||{},u=P.useCallback(h=>{d&&CE?CE(()=>c(h)):c(h)},[c,d]);return P.useLayoutEffect(()=>o.listen(u),[o,u]),P.useEffect(()=>Kee(s),[s]),P.createElement(Gee,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:s})}const nte=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rte=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wr=P.forwardRef(function(t,r){let{onClick:s,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h}=t,g=Zee(t,Qee),{basename:x}=P.useContext(rp),b,y=!1;if(typeof d=="string"&&rte.test(d)&&(b=d,nte))try{let N=new URL(window.location.href),A=d.startsWith("//")?new URL(N.protocol+d):new URL(d),C=u3(A.pathname,x);A.origin===N.origin&&C!=null?d=C+A.search+A.hash:y=!0}catch{}let v=Oee(d,{relative:a}),j=ste(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:a,viewTransition:h});function w(N){s&&s(N),N.defaultPrevented||j(N)}return P.createElement("a",DS({},g,{href:b||v,onClick:y||i?s:w,ref:r,target:c}))});var TE;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(TE||(TE={}));var EE;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(EE||(EE={}));function ste(e,t){let{target:r,replace:s,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Mf(),d=hg(),u=B9(e,{relative:o});return P.useCallback(h=>{if(Xee(h,r)){h.preventDefault();let g=s!==void 0?s:Wb(d)===Wb(u);c(e,{replace:g,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,s,a,r,e,i,o,l])}const ate="mock",ll=new Map,ite=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,ote=e=>(ll.has(e)||ll.set(e,[]),{list:async(t="created_date",r=100)=>[...ll.get(e)||[]].sort((i,o)=>{const l=t.startsWith("-")?t.slice(1):t,c=t.startsWith("-")?-1:1;return i[l]<o[l]?-1*c:i[l]>o[l]?1*c:0}).slice(0,r),filter:async(t,r=null,s=100)=>{let a=ll.get(e)||[];if(a=a.filter(i=>Object.entries(t).every(([o,l])=>Array.isArray(l)?l.includes(i[o]):i[o]===l)),r){const i=r.startsWith("-")?r.slice(1):r,o=r.startsWith("-")?-1:1;a.sort((l,c)=>l[i]<c[i]?-1*o:l[i]>c[i]?1*o:0)}return a.slice(0,s)},create:async t=>{const r=ll.get(e)||[],s={id:ite(),...t,created_date:new Date().toISOString(),updated_date:new Date().toISOString()};return r.push(s),ll.set(e,r),s},update:async(t,r)=>{const s=ll.get(e)||[],a=s.findIndex(i=>i.id===t);if(a===-1)throw new Error(`${e} with id ${t} not found`);return s[a]={...s[a],...r,updated_date:new Date().toISOString()},ll.set(e,s),s[a]},delete:async t=>{const s=(ll.get(e)||[]).filter(a=>a.id!==t);return ll.set(e,s),{success:!0}},get:async t=>(ll.get(e)||[]).find(s=>s.id===t)||null}),lte=()=>{let e=null;const t=typeof window<"u"?localStorage.getItem("app_current_user"):null;if(t)try{e=JSON.parse(t)}catch(r){console.error("Failed to parse stored user:",r)}return{me:async()=>{const r=typeof window<"u"?localStorage.getItem("app_current_user"):null;if(r&&!e)try{e=JSON.parse(r)}catch(s){console.error("Failed to parse stored user:",s)}if(!e){const s=new Error("Not authenticated");throw s.status=401,s}return e},login:async(r,s)=>{{const i=(ll.get("User")||[]).find(o=>o.email===r);if(i)e={id:i.id,email:i.email,full_name:i.full_name,role:i.role||"user"};else if(r==="demo@example.com")e={id:"user-1",email:r,full_name:"Demo Anvndare",role:"admin"};else throw new Error("Anvndaren finns inte. Kontakta administratren.");return localStorage.setItem("app_current_user",JSON.stringify(e)),e}},logout:(r=null)=>{e=null,localStorage.removeItem("app_current_user"),r&&typeof window<"u"&&(window.location.href=r)},redirectToLogin:(r=null)=>{if(typeof window<"u"){const s=r?`/login?returnUrl=${encodeURIComponent(r)}`:"/login";window.location.href=s}},setUser:r=>{e=r,r?localStorage.setItem("app_current_user",JSON.stringify(r)):localStorage.removeItem("app_current_user")},isAuthenticated:()=>!!e}},cte=()=>{const e={};return new Proxy({},{get:(t,r)=>(e[r]||(e[r]=ote(r)),e[r])})},sf={auth:lte(),entities:cte(),initMockData:(e,t)=>{ll.set(e,t)},clearMockData:()=>{ll.clear()},getMode:()=>ate},oe=sf,dte=[{id:"user-1",email:"anna.andersson@example.com",full_name:"Anna Andersson",role:"admin",created_date:"2024-01-15T08:00:00Z"},{id:"user-2",email:"erik.svensson@example.com",full_name:"Erik Svensson",role:"user",created_date:"2024-02-01T08:00:00Z"},{id:"user-3",email:"maria.johansson@example.com",full_name:"Maria Johansson",role:"user",created_date:"2024-02-15T08:00:00Z"},{id:"user-4",email:"johan.lindberg@example.com",full_name:"Johan Lindberg",role:"manager",created_date:"2024-03-01T08:00:00Z"}],ute=[{id:"emp-1",user_email:"anna.andersson@example.com",first_name:"Anna",last_name:"Andersson",department:"Administration",position:"VD",phone:"070-123 45 67",start_date:"2020-01-15",status:"active",created_date:"2024-01-15T08:00:00Z"},{id:"emp-2",user_email:"erik.svensson@example.com",first_name:"Erik",last_name:"Svensson",department:"Teknik",position:"Tekniker",phone:"070-234 56 78",start_date:"2022-03-01",status:"active",created_date:"2024-02-01T08:00:00Z"},{id:"emp-3",user_email:"maria.johansson@example.com",first_name:"Maria",last_name:"Johansson",department:"Frsljning",position:"Sljare",phone:"070-345 67 89",start_date:"2023-06-15",status:"active",created_date:"2024-02-15T08:00:00Z"},{id:"emp-4",user_email:"johan.lindberg@example.com",first_name:"Johan",last_name:"Lindberg",department:"Teknik",position:"Projektledare",phone:"070-456 78 90",start_date:"2021-09-01",status:"active",created_date:"2024-03-01T08:00:00Z"}],hte=[{id:"veh-1",registration_number:"ABC 123",make:"Volvo",model:"XC60",year:2022,type:"Personbil",status:"available",mileage:45e3,fuel_type:"Diesel",assigned_employee_id:null,created_date:"2024-01-01T08:00:00Z"},{id:"veh-2",registration_number:"DEF 456",make:"Volkswagen",model:"Transporter",year:2021,type:"Skpbil",status:"in_use",mileage:78e3,fuel_type:"Diesel",assigned_employee_id:"emp-2",created_date:"2024-01-01T08:00:00Z"},{id:"veh-3",registration_number:"GHI 789",make:"Tesla",model:"Model 3",year:2023,type:"Personbil",status:"available",mileage:15e3,fuel_type:"El",assigned_employee_id:null,created_date:"2024-02-01T08:00:00Z"}],fte=[{id:"proj-1",name:"Kontorsrenovering Storgatan",description:"Renovering av kontorslokaler p Storgatan 15",status:"active",start_date:"2024-01-01",end_date:"2024-06-30",budget_hours:500,used_hours:234,client:"Fastighets AB",created_date:"2024-01-01T08:00:00Z"},{id:"proj-2",name:"IT-infrastruktur Industrivgen",description:"Installation av ntverk och servrar",status:"active",start_date:"2024-02-15",end_date:"2024-04-30",budget_hours:200,used_hours:89,client:"Industri AB",created_date:"2024-02-15T08:00:00Z"},{id:"proj-3",name:"Underhll Q1 2024",description:"Lpande underhllsarbeten",status:"active",start_date:"2024-01-01",end_date:"2024-03-31",budget_hours:300,used_hours:267,client:"Internt",created_date:"2024-01-01T08:00:00Z"}],mte=[{id:"time-1",employee_id:"emp-2",project_id:"proj-1",date:"2024-01-29",start_time:"07:00",end_time:"16:00",break_minutes:60,hours:8,description:"Elinstallation rum 201-205",status:"approved",created_date:"2024-01-29T16:00:00Z"},{id:"time-2",employee_id:"emp-2",project_id:"proj-1",date:"2024-01-30",start_time:"07:00",end_time:"15:30",break_minutes:30,hours:8,description:"Fortsatt elinstallation",status:"approved",created_date:"2024-01-30T15:30:00Z"},{id:"time-3",employee_id:"emp-3",project_id:"proj-2",date:"2024-01-30",start_time:"08:00",end_time:"17:00",break_minutes:60,hours:8,description:"Kundmte och offertarbete",status:"pending",created_date:"2024-01-30T17:00:00Z"}],pte=[{id:"news-1",title:"Vlkommen till nya intrantet!",content:"Vi har lanserat ett nytt intrant fr att frbttra kommunikationen inom fretaget. Hr kommer ni kunna hitta viktig information, nyheter och verktyg fr ert dagliga arbete.",author_id:"emp-1",author_name:"Anna Andersson",is_important:!0,requires_acknowledgment:!0,created_date:"2024-01-28T10:00:00Z"},{id:"news-2",title:"Nya skerhetsrutiner",content:"Frn och med 1 februari gller nya skerhetsrutiner p alla arbetsplatser. Ls igenom dokumentet som delats ut och signera att ni tagit del av informationen.",author_id:"emp-4",author_name:"Johan Lindberg",is_important:!0,requires_acknowledgment:!0,created_date:"2024-01-25T14:00:00Z"},{id:"news-3",title:"Fredagsfika denna vecka",content:"Glm inte fredagsfikat kl 14:00 i lunchrummet. Denna vecka bjuder vi p prinsesstrta!",author_id:"emp-1",author_name:"Anna Andersson",is_important:!1,requires_acknowledgment:!1,created_date:"2024-01-29T08:00:00Z"}],xte=[{id:"leave-1",employee_id:"emp-3",type:"vacation",start_date:"2024-02-19",end_date:"2024-02-23",days:5,status:"pending",reason:"Sportlov med familjen",created_date:"2024-01-20T10:00:00Z"},{id:"leave-2",employee_id:"emp-2",type:"sick",start_date:"2024-01-22",end_date:"2024-01-22",days:1,status:"approved",reason:"Sjuk",created_date:"2024-01-22T07:00:00Z"}],gte=[{id:"journal-1",vehicle_id:"veh-2",employee_id:"emp-2",date:"2024-01-29",start_location:"Kontoret, Stockholm",end_location:"Storgatan 15, Stockholm",start_mileage:77850,end_mileage:77865,distance_km:15,purpose:"business",project_id:"proj-1",notes:"Transport av verktyg till arbetsplatsen",created_date:"2024-01-29T07:30:00Z"},{id:"journal-2",vehicle_id:"veh-2",employee_id:"emp-2",date:"2024-01-29",start_location:"Storgatan 15, Stockholm",end_location:"Kontoret, Stockholm",start_mileage:77865,end_mileage:77880,distance_km:15,purpose:"business",project_id:"proj-1",notes:"Hemresa",created_date:"2024-01-29T16:30:00Z"}],vte=[{id:"geo-1",name:"Huvudkontoret",latitude:59.3293,longitude:18.0686,radius:100,type:"office",is_active:!0,created_date:"2024-01-01T08:00:00Z"},{id:"geo-2",name:"Storgatan 15",latitude:59.335,longitude:18.055,radius:50,type:"worksite",is_active:!0,created_date:"2024-01-15T08:00:00Z"}],yte=[{id:"notif-1",user_id:"user-1",title:"Ny ledighetsanskan",message:"Maria Johansson har anskt om semester 19-23 februari",type:"leave_request",is_read:!1,created_date:"2024-01-20T10:00:00Z"},{id:"notif-2",user_id:"user-2",title:"Tidrapport godknd",message:"Din tidrapport fr vecka 4 har godknts",type:"time_approved",is_read:!0,created_date:"2024-01-28T15:00:00Z"}],bte=[{id:"manual-1",title:"Skerhetshandbok",description:"Skerhetsrutiner och riktlinjer fr alla anstllda",category:"Skerhet",content:`# Skerhetshandbok

Detta dokument beskriver vra skerhetsrutiner...`,version:"2.1",is_published:!0,created_date:"2024-01-01T08:00:00Z"},{id:"manual-2",title:"Tidrapportering - Guide",description:"Hur du rapporterar din tid korrekt",category:"Administration",content:`# Tidrapportering

## Steg 1: Logga in...`,version:"1.0",is_published:!0,created_date:"2024-01-10T08:00:00Z"}],jte=[{id:"approval-1",type:"time_entry",requester_id:"emp-3",approver_id:"emp-4",status:"pending",data:{time_entry_id:"time-3"},created_date:"2024-01-30T17:00:00Z"}],wte=[{id:"conv-1",participants:["user-1","user-2"],last_message:"Ok, vi ses imorgon!",updated_date:"2024-01-29T15:30:00Z",created_date:"2024-01-25T10:00:00Z"}],_te=[{id:"msg-1",conversation_id:"conv-1",sender_id:"user-1",content:"Hej Erik! Kan du ta en titt p ritningarna fr Storgatan?",is_read:!0,created_date:"2024-01-29T14:00:00Z"},{id:"msg-2",conversation_id:"conv-1",sender_id:"user-2",content:"Absolut, jag kollar p det direkt!",is_read:!0,created_date:"2024-01-29T14:15:00Z"},{id:"msg-3",conversation_id:"conv-1",sender_id:"user-2",content:"Ok, vi ses imorgon!",is_read:!1,created_date:"2024-01-29T15:30:00Z"}],Nte=e=>{e.initMockData("User",dte),e.initMockData("Employee",ute),e.initMockData("Vehicle",hte),e.initMockData("Project",fte),e.initMockData("TimeEntry",mte),e.initMockData("NewsPost",pte),e.initMockData("LeaveRequest",xte),e.initMockData("DrivingJournalEntry",gte),e.initMockData("Geofence",vte),e.initMockData("Notification",yte),e.initMockData("Manual",bte),e.initMockData("ApprovalRequest",jte),e.initMockData("Conversation",wte),e.initMockData("Message",_te),e.initMockData("FuelLog",[]),e.initMockData("MaintenanceIssue",[]),e.initMockData("Document",[]),e.initMockData("PushSubscription",[]),e.initMockData("ProjectTask",[]),e.initMockData("OnboardingTemplate",[]),e.initMockData("OnboardingTask",[]),e.initMockData("BluetoothDevice",[]),e.initMockData("NotificationSettings",[]),e.initMockData("JournalPolicy",[]),e.initMockData("WorkPolicy",[]),e.initMockData("WeeklyReport",[]),e.initMockData("ScheduleEvent",[]),e.initMockData("MileagePolicy",[]),console.log("Mock data initialized successfully!")};sf.getMode()==="mock"&&Nte(sf);const U9=P.createContext(),kte=({children:e})=>{const[t,r]=P.useState(null),[s,a]=P.useState(!1),[i,o]=P.useState(!0),[l,c]=P.useState(!0),[d,u]=P.useState(null),[h,g]=P.useState(null);P.useEffect(()=>{x()},[]);const x=async()=>{try{c(!0),u(null),g({id:"local-app",public_settings:{app_name:"Personalhantering",require_auth:!1}}),c(!1),await b()}catch(w){console.error("Unexpected error:",w),u({type:"unknown",message:w.message||"An unexpected error occurred"}),c(!1),o(!1)}},b=async()=>{try{o(!0);const w=await sf.auth.me();r(w),a(!0),o(!1)}catch(w){console.error("User auth check failed:",w),o(!1),a(!1),(w.status===401||w.status===403)&&u({type:"auth_required",message:"Authentication required"})}},y=async(w,N)=>{try{const A=await sf.auth.login(w,N);return r(A),a(!0),u(null),A}catch(A){throw u({type:"login_failed",message:A.message||"Login failed"}),A}},v=(w=!0)=>{r(null),a(!1),w?sf.auth.logout(window.location.origin):sf.auth.logout()},j=()=>{sf.auth.redirectToLogin(window.location.href)};return n.jsx(U9.Provider,{value:{user:t,isAuthenticated:s,isLoadingAuth:i,isLoadingPublicSettings:l,authError:d,appPublicSettings:h,login:y,logout:v,navigateToLogin:j,checkAppState:x},children:e})},f3=()=>{const e=P.useContext(U9);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e};function OE(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function H9(...e){return t=>{let r=!1;const s=e.map(a=>{const i=OE(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<s.length;a++){const i=s[a];typeof i=="function"?i():OE(e[a],null)}}}}function Vn(...e){return P.useCallback(H9(...e),e)}function kx(e){const t=Pte(e),r=P.forwardRef((s,a)=>{const{children:i,...o}=s,l=P.Children.toArray(i),c=l.find(Cte);if(c){const d=c.props.children,u=l.map(h=>h===c?P.Children.count(d)>1?P.Children.only(null):P.isValidElement(d)?d.props.children:null:h);return n.jsx(t,{...o,ref:a,children:P.isValidElement(d)?P.cloneElement(d,void 0,u):null})}return n.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var Ste=kx("Slot");function Pte(e){const t=P.forwardRef((r,s)=>{const{children:a,...i}=r;if(P.isValidElement(a)){const o=Ete(a),l=Tte(i,a.props);return a.type!==P.Fragment&&(l.ref=s?H9(s,o):o),P.cloneElement(a,l)}return P.Children.count(a)>1?P.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var W9=Symbol("radix.slottable");function Ate(e){const t=({children:r})=>n.jsx(n.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=W9,t}function Cte(e){return P.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===W9}function Tte(e,t){const r={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?r[s]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[s]=a):s==="style"?r[s]={...a,...i}:s==="className"&&(r[s]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function Ete(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const m3=ig("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),ye=P.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...a},i)=>{const o=s?Ste:"button";return n.jsx(o,{className:Yt(m3({variant:t,size:r,className:e})),ref:i,...a})});ye.displayName="Button";const De=P.forwardRef(({className:e,type:t,...r},s)=>n.jsx("input",{type:t,className:Yt("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...r}));De.displayName="Input";var Ote=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],cn=Ote.reduce((e,t)=>{const r=kx(`Primitive.${t}`),s=P.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(c,{...l,ref:i})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function Mte(e,t){e&&ug.flushSync(()=>e.dispatchEvent(t))}var Lte="Label",K9=P.forwardRef((e,t)=>n.jsx(cn.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));K9.displayName=Lte;var G9=K9;const Dte=ig("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ve=P.forwardRef(({className:e,...t},r)=>n.jsx(G9,{ref:r,className:Yt(Dte(),e),...t}));ve.displayName=G9.displayName;const Zn=P.forwardRef(({className:e,...t},r)=>n.jsx("textarea",{className:Yt("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));Zn.displayName="Textarea";function W0(e,[t,r]){return Math.min(r,Math.max(t,e))}function fn(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function Ite(e,t){const r=P.createContext(t),s=i=>{const{children:o,...l}=i,c=P.useMemo(()=>l,Object.values(l));return n.jsx(r.Provider,{value:c,children:o})};s.displayName=e+"Provider";function a(i){const o=P.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[s,a]}function ho(e,t=[]){let r=[];function s(i,o){const l=P.createContext(o),c=r.length;r=[...r,o];const d=h=>{var j;const{scope:g,children:x,...b}=h,y=((j=g==null?void 0:g[e])==null?void 0:j[c])||l,v=P.useMemo(()=>b,Object.values(b));return n.jsx(y.Provider,{value:v,children:x})};d.displayName=i+"Provider";function u(h,g){var y;const x=((y=g==null?void 0:g[e])==null?void 0:y[c])||l,b=P.useContext(x);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=r.map(o=>P.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return P.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[s,Rte(a,...t)]}function Rte(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=s.reduce((l,{useScope:c,scopeName:d})=>{const h=c(i)[`__scope${d}`];return{...l,...h}},{});return P.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function p3(e){const t=e+"CollectionProvider",[r,s]=ho(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:v,children:j}=y,w=Te.useRef(null),N=Te.useRef(new Map).current;return n.jsx(a,{scope:v,itemMap:N,collectionRef:w,children:j})};o.displayName=t;const l=e+"CollectionSlot",c=kx(l),d=Te.forwardRef((y,v)=>{const{scope:j,children:w}=y,N=i(l,j),A=Vn(v,N.collectionRef);return n.jsx(c,{ref:A,children:w})});d.displayName=l;const u=e+"CollectionItemSlot",h="data-radix-collection-item",g=kx(u),x=Te.forwardRef((y,v)=>{const{scope:j,children:w,...N}=y,A=Te.useRef(null),C=Vn(v,A),M=i(u,j);return Te.useEffect(()=>(M.itemMap.set(A,{ref:A,...N}),()=>void M.itemMap.delete(A))),n.jsx(g,{[h]:"",ref:C,children:w})});x.displayName=u;function b(y){const v=i(e+"CollectionConsumer",y);return Te.useCallback(()=>{const w=v.collectionRef.current;if(!w)return[];const N=Array.from(w.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((M,I)=>N.indexOf(M.ref.current)-N.indexOf(I.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:d,ItemSlot:x},b,s]}var Fte=P.createContext(void 0);function fg(e){const t=P.useContext(Fte);return e||t||"ltr"}function io(e){const t=P.useRef(e);return P.useEffect(()=>{t.current=e}),P.useMemo(()=>(...r)=>{var s;return(s=t.current)==null?void 0:s.call(t,...r)},[])}function $te(e,t=globalThis==null?void 0:globalThis.document){const r=io(e);P.useEffect(()=>{const s=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[r,t])}var Bte="DismissableLayer",IS="dismissableLayer.update",qte="dismissableLayer.pointerDownOutside",zte="dismissableLayer.focusOutside",ME,Z9=P.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),x3=P.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=P.useContext(Z9),[u,h]=P.useState(null),g=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=P.useState({}),b=Vn(t,I=>h(I)),y=Array.from(d.layers),[v]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),j=y.indexOf(v),w=u?y.indexOf(u):-1,N=d.layersWithOutsidePointerEventsDisabled.size>0,A=w>=j,C=Hte(I=>{const F=I.target,U=[...d.branches].some(W=>W.contains(F));!A||U||(a==null||a(I),o==null||o(I),I.defaultPrevented||l==null||l())},g),M=Wte(I=>{const F=I.target;[...d.branches].some(W=>W.contains(F))||(i==null||i(I),o==null||o(I),I.defaultPrevented||l==null||l())},g);return $te(I=>{w===d.layers.size-1&&(s==null||s(I),!I.defaultPrevented&&l&&(I.preventDefault(),l()))},g),P.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(ME=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),LE(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=ME)}},[u,g,r,d]),P.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),LE())},[u,d]),P.useEffect(()=>{const I=()=>x({});return document.addEventListener(IS,I),()=>document.removeEventListener(IS,I)},[]),n.jsx(cn.div,{...c,ref:b,style:{pointerEvents:N?A?"auto":"none":void 0,...e.style},onFocusCapture:fn(e.onFocusCapture,M.onFocusCapture),onBlurCapture:fn(e.onBlurCapture,M.onBlurCapture),onPointerDownCapture:fn(e.onPointerDownCapture,C.onPointerDownCapture)})});x3.displayName=Bte;var Vte="DismissableLayerBranch",Ute=P.forwardRef((e,t)=>{const r=P.useContext(Z9),s=P.useRef(null),a=Vn(t,s);return P.useEffect(()=>{const i=s.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),n.jsx(cn.div,{...e,ref:a})});Ute.displayName=Vte;function Hte(e,t=globalThis==null?void 0:globalThis.document){const r=io(e),s=P.useRef(!1),a=P.useRef(()=>{});return P.useEffect(()=>{const i=l=>{if(l.target&&!s.current){let c=function(){Y9(qte,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);s.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>s.current=!0}}function Wte(e,t=globalThis==null?void 0:globalThis.document){const r=io(e),s=P.useRef(!1);return P.useEffect(()=>{const a=i=>{i.target&&!s.current&&Y9(zte,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function LE(){const e=new CustomEvent(IS);document.dispatchEvent(e)}function Y9(e,t,r,{discrete:s}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),s?Mte(a,i):a.dispatchEvent(i)}var A2=0;function X9(){P.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??DE()),document.body.insertAdjacentElement("beforeend",e[1]??DE()),A2++,()=>{A2===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),A2--}},[])}function DE(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var C2="focusScope.autoFocusOnMount",T2="focusScope.autoFocusOnUnmount",IE={bubbles:!1,cancelable:!0},Kte="FocusScope",g3=P.forwardRef((e,t)=>{const{loop:r=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=P.useState(null),d=io(a),u=io(i),h=P.useRef(null),g=Vn(t,y=>c(y)),x=P.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;P.useEffect(()=>{if(s){let y=function(N){if(x.paused||!l)return;const A=N.target;l.contains(A)?h.current=A:ef(h.current,{select:!0})},v=function(N){if(x.paused||!l)return;const A=N.relatedTarget;A!==null&&(l.contains(A)||ef(h.current,{select:!0}))},j=function(N){if(document.activeElement===document.body)for(const C of N)C.removedNodes.length>0&&ef(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",v);const w=new MutationObserver(j);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",v),w.disconnect()}}},[s,l,x.paused]),P.useEffect(()=>{if(l){FE.add(x);const y=document.activeElement;if(!l.contains(y)){const j=new CustomEvent(C2,IE);l.addEventListener(C2,d),l.dispatchEvent(j),j.defaultPrevented||(Gte(Jte(Q9(l)),{select:!0}),document.activeElement===y&&ef(l))}return()=>{l.removeEventListener(C2,d),setTimeout(()=>{const j=new CustomEvent(T2,IE);l.addEventListener(T2,u),l.dispatchEvent(j),j.defaultPrevented||ef(y??document.body,{select:!0}),l.removeEventListener(T2,u),FE.remove(x)},0)}}},[l,d,u,x]);const b=P.useCallback(y=>{if(!r&&!s||x.paused)return;const v=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,j=document.activeElement;if(v&&j){const w=y.currentTarget,[N,A]=Zte(w);N&&A?!y.shiftKey&&j===A?(y.preventDefault(),r&&ef(N,{select:!0})):y.shiftKey&&j===N&&(y.preventDefault(),r&&ef(A,{select:!0})):j===w&&y.preventDefault()}},[r,s,x.paused]);return n.jsx(cn.div,{tabIndex:-1,...o,ref:g,onKeyDown:b})});g3.displayName=Kte;function Gte(e,{select:t=!1}={}){const r=document.activeElement;for(const s of e)if(ef(s,{select:t}),document.activeElement!==r)return}function Zte(e){const t=Q9(e),r=RE(t,e),s=RE(t.reverse(),e);return[r,s]}function Q9(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function RE(e,t){for(const r of e)if(!Yte(r,{upTo:t}))return r}function Yte(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Xte(e){return e instanceof HTMLInputElement&&"select"in e}function ef(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Xte(e)&&t&&e.select()}}var FE=Qte();function Qte(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=$E(e,t),e.unshift(t)},remove(t){var r;e=$E(e,t),(r=e[0])==null||r.resume()}}}function $E(e,t){const r=[...e],s=r.indexOf(t);return s!==-1&&r.splice(s,1),r}function Jte(e){return e.filter(t=>t.tagName!=="A")}var wa=globalThis!=null&&globalThis.document?P.useLayoutEffect:()=>{},ene=QP[" useId ".trim().toString()]||(()=>{}),tne=0;function lh(e){const[t,r]=P.useState(ene());return wa(()=>{r(s=>s??String(tne++))},[e]),t?`radix-${t}`:""}const nne=["top","right","bottom","left"],Pf=Math.min,Tl=Math.max,Kb=Math.round,Jy=Math.floor,cu=e=>({x:e,y:e}),rne={left:"right",right:"left",bottom:"top",top:"bottom"},sne={start:"end",end:"start"};function RS(e,t,r){return Tl(e,Pf(t,r))}function gh(e,t){return typeof e=="function"?e(t):e}function vh(e){return e.split("-")[0]}function mg(e){return e.split("-")[1]}function v3(e){return e==="x"?"y":"x"}function y3(e){return e==="y"?"height":"width"}const ane=new Set(["top","bottom"]);function au(e){return ane.has(vh(e))?"y":"x"}function b3(e){return v3(au(e))}function ine(e,t,r){r===void 0&&(r=!1);const s=mg(e),a=b3(e),i=y3(a);let o=a==="x"?s===(r?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Gb(o)),[o,Gb(o)]}function one(e){const t=Gb(e);return[FS(e),t,FS(t)]}function FS(e){return e.replace(/start|end/g,t=>sne[t])}const BE=["left","right"],qE=["right","left"],lne=["top","bottom"],cne=["bottom","top"];function dne(e,t,r){switch(e){case"top":case"bottom":return r?t?qE:BE:t?BE:qE;case"left":case"right":return t?lne:cne;default:return[]}}function une(e,t,r,s){const a=mg(e);let i=dne(vh(e),r==="start",s);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(FS)))),i}function Gb(e){return e.replace(/left|right|bottom|top/g,t=>rne[t])}function hne(e){return{top:0,right:0,bottom:0,left:0,...e}}function J9(e){return typeof e!="number"?hne(e):{top:e,right:e,bottom:e,left:e}}function Zb(e){const{x:t,y:r,width:s,height:a}=e;return{width:s,height:a,top:r,left:t,right:t+s,bottom:r+a,x:t,y:r}}function zE(e,t,r){let{reference:s,floating:a}=e;const i=au(t),o=b3(t),l=y3(o),c=vh(t),d=i==="y",u=s.x+s.width/2-a.width/2,h=s.y+s.height/2-a.height/2,g=s[l]/2-a[l]/2;let x;switch(c){case"top":x={x:u,y:s.y-a.height};break;case"bottom":x={x:u,y:s.y+s.height};break;case"right":x={x:s.x+s.width,y:h};break;case"left":x={x:s.x-a.width,y:h};break;default:x={x:s.x,y:s.y}}switch(mg(t)){case"start":x[o]-=g*(r&&d?-1:1);break;case"end":x[o]+=g*(r&&d?-1:1);break}return x}const fne=async(e,t,r)=>{const{placement:s="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:h}=zE(d,s,c),g=s,x={},b=0;for(let y=0;y<l.length;y++){const{name:v,fn:j}=l[y],{x:w,y:N,data:A,reset:C}=await j({x:u,y:h,initialPlacement:s,placement:g,strategy:a,middlewareData:x,rects:d,platform:o,elements:{reference:e,floating:t}});u=w??u,h=N??h,x={...x,[v]:{...x[v],...A}},C&&b<=50&&(b++,typeof C=="object"&&(C.placement&&(g=C.placement),C.rects&&(d=C.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):C.rects),{x:u,y:h}=zE(d,g,c)),y=-1)}return{x:u,y:h,placement:g,strategy:a,middlewareData:x}};async function K0(e,t){var r;t===void 0&&(t={});const{x:s,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:g=!1,padding:x=0}=gh(t,e),b=J9(x),v=l[g?h==="floating"?"reference":"floating":h],j=Zb(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(v)))==null||r?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),w=h==="floating"?{x:s,y:a,width:o.floating.width,height:o.floating.height}:o.reference,N=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),A=await(i.isElement==null?void 0:i.isElement(N))?await(i.getScale==null?void 0:i.getScale(N))||{x:1,y:1}:{x:1,y:1},C=Zb(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:N,strategy:c}):w);return{top:(j.top-C.top+b.top)/A.y,bottom:(C.bottom-j.bottom+b.bottom)/A.y,left:(j.left-C.left+b.left)/A.x,right:(C.right-j.right+b.right)/A.x}}const mne=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:s,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=gh(e,t)||{};if(d==null)return{};const h=J9(u),g={x:r,y:s},x=b3(a),b=y3(x),y=await o.getDimensions(d),v=x==="y",j=v?"top":"left",w=v?"bottom":"right",N=v?"clientHeight":"clientWidth",A=i.reference[b]+i.reference[x]-g[x]-i.floating[b],C=g[x]-i.reference[x],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let I=M?M[N]:0;(!I||!await(o.isElement==null?void 0:o.isElement(M)))&&(I=l.floating[N]||i.floating[b]);const F=A/2-C/2,U=I/2-y[b]/2-1,W=Pf(h[j],U),D=Pf(h[w],U),R=W,z=I-y[b]-D,Z=I/2-y[b]/2+F,se=RS(R,Z,z),J=!c.arrow&&mg(a)!=null&&Z!==se&&i.reference[b]/2-(Z<R?W:D)-y[b]/2<0,Q=J?Z<R?Z-R:Z-z:0;return{[x]:g[x]+Q,data:{[x]:se,centerOffset:Z-se-Q,...J&&{alignmentOffset:Q}},reset:J}}}),pne=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,s;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:g,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:y=!0,...v}=gh(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const j=vh(a),w=au(l),N=vh(l)===l,A=await(c.isRTL==null?void 0:c.isRTL(d.floating)),C=g||(N||!y?[Gb(l)]:one(l)),M=b!=="none";!g&&M&&C.push(...une(l,y,b,A));const I=[l,...C],F=await K0(t,v),U=[];let W=((s=i.flip)==null?void 0:s.overflows)||[];if(u&&U.push(F[j]),h){const Z=ine(a,o,A);U.push(F[Z[0]],F[Z[1]])}if(W=[...W,{placement:a,overflows:U}],!U.every(Z=>Z<=0)){var D,R;const Z=(((D=i.flip)==null?void 0:D.index)||0)+1,se=I[Z];if(se&&(!(h==="alignment"?w!==au(se):!1)||W.every(H=>au(H.placement)===w?H.overflows[0]>0:!0)))return{data:{index:Z,overflows:W},reset:{placement:se}};let J=(R=W.filter(Q=>Q.overflows[0]<=0).sort((Q,H)=>Q.overflows[1]-H.overflows[1])[0])==null?void 0:R.placement;if(!J)switch(x){case"bestFit":{var z;const Q=(z=W.filter(H=>{if(M){const ne=au(H.placement);return ne===w||ne==="y"}return!0}).map(H=>[H.placement,H.overflows.filter(ne=>ne>0).reduce((ne,ue)=>ne+ue,0)]).sort((H,ne)=>H[1]-ne[1])[0])==null?void 0:z[0];Q&&(J=Q);break}case"initialPlacement":J=l;break}if(a!==J)return{reset:{placement:J}}}return{}}}};function VE(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function UE(e){return nne.some(t=>e[t]>=0)}const xne=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:s="referenceHidden",...a}=gh(e,t);switch(s){case"referenceHidden":{const i=await K0(t,{...a,elementContext:"reference"}),o=VE(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:UE(o)}}}case"escaped":{const i=await K0(t,{...a,altBoundary:!0}),o=VE(i,r.floating);return{data:{escapedOffsets:o,escaped:UE(o)}}}default:return{}}}}},e$=new Set(["left","top"]);async function gne(e,t){const{placement:r,platform:s,elements:a}=e,i=await(s.isRTL==null?void 0:s.isRTL(a.floating)),o=vh(r),l=mg(r),c=au(r)==="y",d=e$.has(o)?-1:1,u=i&&c?-1:1,h=gh(t,e);let{mainAxis:g,crossAxis:x,alignmentAxis:b}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof b=="number"&&(x=l==="end"?b*-1:b),c?{x:x*u,y:g*d}:{x:g*d,y:x*u}}const vne=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,s;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await gne(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},yne=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:s,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:v=>{let{x:j,y:w}=v;return{x:j,y:w}}},...c}=gh(e,t),d={x:r,y:s},u=await K0(t,c),h=au(vh(a)),g=v3(h);let x=d[g],b=d[h];if(i){const v=g==="y"?"top":"left",j=g==="y"?"bottom":"right",w=x+u[v],N=x-u[j];x=RS(w,x,N)}if(o){const v=h==="y"?"top":"left",j=h==="y"?"bottom":"right",w=b+u[v],N=b-u[j];b=RS(w,b,N)}const y=l.fn({...t,[g]:x,[h]:b});return{...y,data:{x:y.x-r,y:y.y-s,enabled:{[g]:i,[h]:o}}}}}},bne=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:s,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=gh(e,t),u={x:r,y:s},h=au(a),g=v3(h);let x=u[g],b=u[h];const y=gh(l,t),v=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const N=g==="y"?"height":"width",A=i.reference[g]-i.floating[N]+v.mainAxis,C=i.reference[g]+i.reference[N]-v.mainAxis;x<A?x=A:x>C&&(x=C)}if(d){var j,w;const N=g==="y"?"width":"height",A=e$.has(vh(a)),C=i.reference[h]-i.floating[N]+(A&&((j=o.offset)==null?void 0:j[h])||0)+(A?0:v.crossAxis),M=i.reference[h]+i.reference[N]+(A?0:((w=o.offset)==null?void 0:w[h])||0)-(A?v.crossAxis:0);b<C?b=C:b>M&&(b=M)}return{[g]:x,[h]:b}}}},jne=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,s;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...d}=gh(e,t),u=await K0(t,d),h=vh(a),g=mg(a),x=au(a)==="y",{width:b,height:y}=i.floating;let v,j;h==="top"||h==="bottom"?(v=h,j=g===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(j=h,v=g==="end"?"top":"bottom");const w=y-u.top-u.bottom,N=b-u.left-u.right,A=Pf(y-u[v],w),C=Pf(b-u[j],N),M=!t.middlewareData.shift;let I=A,F=C;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(F=N),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(I=w),M&&!g){const W=Tl(u.left,0),D=Tl(u.right,0),R=Tl(u.top,0),z=Tl(u.bottom,0);x?F=b-2*(W!==0||D!==0?W+D:Tl(u.left,u.right)):I=y-2*(R!==0||z!==0?R+z:Tl(u.top,u.bottom))}await c({...t,availableWidth:F,availableHeight:I});const U=await o.getDimensions(l.floating);return b!==U.width||y!==U.height?{reset:{rects:!0}}:{}}}};function xj(){return typeof window<"u"}function pg(e){return t$(e)?(e.nodeName||"").toLowerCase():"#document"}function Ll(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ku(e){var t;return(t=(t$(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function t$(e){return xj()?e instanceof Node||e instanceof Ll(e).Node:!1}function gd(e){return xj()?e instanceof Element||e instanceof Ll(e).Element:!1}function yu(e){return xj()?e instanceof HTMLElement||e instanceof Ll(e).HTMLElement:!1}function HE(e){return!xj()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ll(e).ShadowRoot}const wne=new Set(["inline","contents"]);function Hv(e){const{overflow:t,overflowX:r,overflowY:s,display:a}=vd(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+r)&&!wne.has(a)}const _ne=new Set(["table","td","th"]);function Nne(e){return _ne.has(pg(e))}const kne=[":popover-open",":modal"];function gj(e){return kne.some(t=>{try{return e.matches(t)}catch{return!1}})}const Sne=["transform","translate","scale","rotate","perspective"],Pne=["transform","translate","scale","rotate","perspective","filter"],Ane=["paint","layout","strict","content"];function j3(e){const t=w3(),r=gd(e)?vd(e):e;return Sne.some(s=>r[s]?r[s]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||Pne.some(s=>(r.willChange||"").includes(s))||Ane.some(s=>(r.contain||"").includes(s))}function Cne(e){let t=Af(e);for(;yu(t)&&!Sx(t);){if(j3(t))return t;if(gj(t))return null;t=Af(t)}return null}function w3(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Tne=new Set(["html","body","#document"]);function Sx(e){return Tne.has(pg(e))}function vd(e){return Ll(e).getComputedStyle(e)}function vj(e){return gd(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Af(e){if(pg(e)==="html")return e;const t=e.assignedSlot||e.parentNode||HE(e)&&e.host||ku(e);return HE(t)?t.host:t}function n$(e){const t=Af(e);return Sx(t)?e.ownerDocument?e.ownerDocument.body:e.body:yu(t)&&Hv(t)?t:n$(t)}function G0(e,t,r){var s;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=n$(e),i=a===((s=e.ownerDocument)==null?void 0:s.body),o=Ll(a);if(i){const l=$S(o);return t.concat(o,o.visualViewport||[],Hv(a)?a:[],l&&r?G0(l):[])}return t.concat(a,G0(a,[],r))}function $S(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function r$(e){const t=vd(e);let r=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const a=yu(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:s,l=Kb(r)!==i||Kb(s)!==o;return l&&(r=i,s=o),{width:r,height:s,$:l}}function _3(e){return gd(e)?e:e.contextElement}function ex(e){const t=_3(e);if(!yu(t))return cu(1);const r=t.getBoundingClientRect(),{width:s,height:a,$:i}=r$(t);let o=(i?Kb(r.width):r.width)/s,l=(i?Kb(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Ene=cu(0);function s$(e){const t=Ll(e);return!w3()||!t.visualViewport?Ene:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function One(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Ll(e)?!1:t}function qm(e,t,r,s){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=_3(e);let o=cu(1);t&&(s?gd(s)&&(o=ex(s)):o=ex(e));const l=One(i,r,s)?s$(i):cu(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,u=a.width/o.x,h=a.height/o.y;if(i){const g=Ll(i),x=s&&gd(s)?Ll(s):s;let b=g,y=$S(b);for(;y&&s&&x!==b;){const v=ex(y),j=y.getBoundingClientRect(),w=vd(y),N=j.left+(y.clientLeft+parseFloat(w.paddingLeft))*v.x,A=j.top+(y.clientTop+parseFloat(w.paddingTop))*v.y;c*=v.x,d*=v.y,u*=v.x,h*=v.y,c+=N,d+=A,b=Ll(y),y=$S(b)}}return Zb({width:u,height:h,x:c,y:d})}function yj(e,t){const r=vj(e).scrollLeft;return t?t.left+r:qm(ku(e)).left+r}function a$(e,t){const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-yj(e,r),a=r.top+t.scrollTop;return{x:s,y:a}}function Mne(e){let{elements:t,rect:r,offsetParent:s,strategy:a}=e;const i=a==="fixed",o=ku(s),l=t?gj(t.floating):!1;if(s===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},d=cu(1);const u=cu(0),h=yu(s);if((h||!h&&!i)&&((pg(s)!=="body"||Hv(o))&&(c=vj(s)),yu(s))){const x=qm(s);d=ex(s),u.x=x.x+s.clientLeft,u.y=x.y+s.clientTop}const g=o&&!h&&!i?a$(o,c):cu(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x+g.x,y:r.y*d.y-c.scrollTop*d.y+u.y+g.y}}function Lne(e){return Array.from(e.getClientRects())}function Dne(e){const t=ku(e),r=vj(e),s=e.ownerDocument.body,a=Tl(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),i=Tl(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let o=-r.scrollLeft+yj(e);const l=-r.scrollTop;return vd(s).direction==="rtl"&&(o+=Tl(t.clientWidth,s.clientWidth)-a),{width:a,height:i,x:o,y:l}}const WE=25;function Ine(e,t){const r=Ll(e),s=ku(e),a=r.visualViewport;let i=s.clientWidth,o=s.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const u=w3();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}const d=yj(s);if(d<=0){const u=s.ownerDocument,h=u.body,g=getComputedStyle(h),x=u.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,b=Math.abs(s.clientWidth-h.clientWidth-x);b<=WE&&(i-=b)}else d<=WE&&(i+=d);return{width:i,height:o,x:l,y:c}}const Rne=new Set(["absolute","fixed"]);function Fne(e,t){const r=qm(e,!0,t==="fixed"),s=r.top+e.clientTop,a=r.left+e.clientLeft,i=yu(e)?ex(e):cu(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,d=s*i.y;return{width:o,height:l,x:c,y:d}}function KE(e,t,r){let s;if(t==="viewport")s=Ine(e,r);else if(t==="document")s=Dne(ku(e));else if(gd(t))s=Fne(t,r);else{const a=s$(e);s={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Zb(s)}function i$(e,t){const r=Af(e);return r===t||!gd(r)||Sx(r)?!1:vd(r).position==="fixed"||i$(r,t)}function $ne(e,t){const r=t.get(e);if(r)return r;let s=G0(e,[],!1).filter(l=>gd(l)&&pg(l)!=="body"),a=null;const i=vd(e).position==="fixed";let o=i?Af(e):e;for(;gd(o)&&!Sx(o);){const l=vd(o),c=j3(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&Rne.has(a.position)||Hv(o)&&!c&&i$(e,o))?s=s.filter(u=>u!==o):a=l,o=Af(o)}return t.set(e,s),s}function Bne(e){let{element:t,boundary:r,rootBoundary:s,strategy:a}=e;const o=[...r==="clippingAncestors"?gj(t)?[]:$ne(t,this._c):[].concat(r),s],l=o[0],c=o.reduce((d,u)=>{const h=KE(t,u,a);return d.top=Tl(h.top,d.top),d.right=Pf(h.right,d.right),d.bottom=Pf(h.bottom,d.bottom),d.left=Tl(h.left,d.left),d},KE(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function qne(e){const{width:t,height:r}=r$(e);return{width:t,height:r}}function zne(e,t,r){const s=yu(t),a=ku(t),i=r==="fixed",o=qm(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=cu(0);function d(){c.x=yj(a)}if(s||!s&&!i)if((pg(t)!=="body"||Hv(a))&&(l=vj(t)),s){const x=qm(t,!0,i,t);c.x=x.x+t.clientLeft,c.y=x.y+t.clientTop}else a&&d();i&&!s&&a&&d();const u=a&&!s&&!i?a$(a,l):cu(0),h=o.left+l.scrollLeft-c.x-u.x,g=o.top+l.scrollTop-c.y-u.y;return{x:h,y:g,width:o.width,height:o.height}}function E2(e){return vd(e).position==="static"}function GE(e,t){if(!yu(e)||vd(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return ku(e)===r&&(r=r.ownerDocument.body),r}function o$(e,t){const r=Ll(e);if(gj(e))return r;if(!yu(e)){let a=Af(e);for(;a&&!Sx(a);){if(gd(a)&&!E2(a))return a;a=Af(a)}return r}let s=GE(e,t);for(;s&&Nne(s)&&E2(s);)s=GE(s,t);return s&&Sx(s)&&E2(s)&&!j3(s)?r:s||Cne(e)||r}const Vne=async function(e){const t=this.getOffsetParent||o$,r=this.getDimensions,s=await r(e.floating);return{reference:zne(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function Une(e){return vd(e).direction==="rtl"}const Hne={convertOffsetParentRelativeRectToViewportRelativeRect:Mne,getDocumentElement:ku,getClippingRect:Bne,getOffsetParent:o$,getElementRects:Vne,getClientRects:Lne,getDimensions:qne,getScale:ex,isElement:gd,isRTL:Une};function l$(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Wne(e,t){let r=null,s;const a=ku(e);function i(){var l;clearTimeout(s),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:u,top:h,width:g,height:x}=d;if(l||t(),!g||!x)return;const b=Jy(h),y=Jy(a.clientWidth-(u+g)),v=Jy(a.clientHeight-(h+x)),j=Jy(u),N={rootMargin:-b+"px "+-y+"px "+-v+"px "+-j+"px",threshold:Tl(0,Pf(1,c))||1};let A=!0;function C(M){const I=M[0].intersectionRatio;if(I!==c){if(!A)return o();I?o(!1,I):s=setTimeout(()=>{o(!1,1e-7)},1e3)}I===1&&!l$(d,e.getBoundingClientRect())&&o(),A=!1}try{r=new IntersectionObserver(C,{...N,root:a.ownerDocument})}catch{r=new IntersectionObserver(C,N)}r.observe(e)}return o(!0),i}function Kne(e,t,r,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,d=_3(e),u=a||i?[...d?G0(d):[],...G0(t)]:[];u.forEach(j=>{a&&j.addEventListener("scroll",r,{passive:!0}),i&&j.addEventListener("resize",r)});const h=d&&l?Wne(d,r):null;let g=-1,x=null;o&&(x=new ResizeObserver(j=>{let[w]=j;w&&w.target===d&&x&&(x.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var N;(N=x)==null||N.observe(t)})),r()}),d&&!c&&x.observe(d),x.observe(t));let b,y=c?qm(e):null;c&&v();function v(){const j=qm(e);y&&!l$(y,j)&&r(),y=j,b=requestAnimationFrame(v)}return r(),()=>{var j;u.forEach(w=>{a&&w.removeEventListener("scroll",r),i&&w.removeEventListener("resize",r)}),h==null||h(),(j=x)==null||j.disconnect(),x=null,c&&cancelAnimationFrame(b)}}const Gne=vne,Zne=yne,Yne=pne,Xne=jne,Qne=xne,ZE=mne,Jne=bne,ere=(e,t,r)=>{const s=new Map,a={platform:Hne,...r},i={...a.platform,_c:s};return fne(e,t,{...a,platform:i})};var tre=typeof document<"u",nre=function(){},Tb=tre?P.useLayoutEffect:nre;function Yb(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,s,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(s=r;s--!==0;)if(!Yb(e[s],t[s]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!{}.hasOwnProperty.call(t,a[s]))return!1;for(s=r;s--!==0;){const i=a[s];if(!(i==="_owner"&&e.$$typeof)&&!Yb(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function c$(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function YE(e,t){const r=c$(e);return Math.round(t*r)/r}function O2(e){const t=P.useRef(e);return Tb(()=>{t.current=e}),t}function rre(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:s=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,h]=P.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[g,x]=P.useState(s);Yb(g,s)||x(s);const[b,y]=P.useState(null),[v,j]=P.useState(null),w=P.useCallback(H=>{H!==M.current&&(M.current=H,y(H))},[]),N=P.useCallback(H=>{H!==I.current&&(I.current=H,j(H))},[]),A=i||b,C=o||v,M=P.useRef(null),I=P.useRef(null),F=P.useRef(u),U=c!=null,W=O2(c),D=O2(a),R=O2(d),z=P.useCallback(()=>{if(!M.current||!I.current)return;const H={placement:t,strategy:r,middleware:g};D.current&&(H.platform=D.current),ere(M.current,I.current,H).then(ne=>{const ue={...ne,isPositioned:R.current!==!1};Z.current&&!Yb(F.current,ue)&&(F.current=ue,ug.flushSync(()=>{h(ue)}))})},[g,t,r,D,R]);Tb(()=>{d===!1&&F.current.isPositioned&&(F.current.isPositioned=!1,h(H=>({...H,isPositioned:!1})))},[d]);const Z=P.useRef(!1);Tb(()=>(Z.current=!0,()=>{Z.current=!1}),[]),Tb(()=>{if(A&&(M.current=A),C&&(I.current=C),A&&C){if(W.current)return W.current(A,C,z);z()}},[A,C,z,W,U]);const se=P.useMemo(()=>({reference:M,floating:I,setReference:w,setFloating:N}),[w,N]),J=P.useMemo(()=>({reference:A,floating:C}),[A,C]),Q=P.useMemo(()=>{const H={position:r,left:0,top:0};if(!J.floating)return H;const ne=YE(J.floating,u.x),ue=YE(J.floating,u.y);return l?{...H,transform:"translate("+ne+"px, "+ue+"px)",...c$(J.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:ne,top:ue}},[r,l,J.floating,u.x,u.y]);return P.useMemo(()=>({...u,update:z,refs:se,elements:J,floatingStyles:Q}),[u,z,se,J,Q])}const sre=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:s,padding:a}=typeof e=="function"?e(r):e;return s&&t(s)?s.current!=null?ZE({element:s.current,padding:a}).fn(r):{}:s?ZE({element:s,padding:a}).fn(r):{}}}},are=(e,t)=>({...Gne(e),options:[e,t]}),ire=(e,t)=>({...Zne(e),options:[e,t]}),ore=(e,t)=>({...Jne(e),options:[e,t]}),lre=(e,t)=>({...Yne(e),options:[e,t]}),cre=(e,t)=>({...Xne(e),options:[e,t]}),dre=(e,t)=>({...Qne(e),options:[e,t]}),ure=(e,t)=>({...sre(e),options:[e,t]});var hre="Arrow",d$=P.forwardRef((e,t)=>{const{children:r,width:s=10,height:a=5,...i}=e;return n.jsx(cn.svg,{...i,ref:t,width:s,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});d$.displayName=hre;var fre=d$;function Wv(e){const[t,r]=P.useState(void 0);return wa(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else r(void 0)},[e]),t}var N3="Popper",[u$,h$]=ho(N3),[mre,f$]=u$(N3),m$=e=>{const{__scopePopper:t,children:r}=e,[s,a]=P.useState(null);return n.jsx(mre,{scope:t,anchor:s,onAnchorChange:a,children:r})};m$.displayName=N3;var p$="PopperAnchor",x$=P.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:s,...a}=e,i=f$(p$,r),o=P.useRef(null),l=Vn(t,o),c=P.useRef(null);return P.useEffect(()=>{const d=c.current;c.current=(s==null?void 0:s.current)||o.current,d!==c.current&&i.onAnchorChange(c.current)}),s?null:n.jsx(cn.div,{...a,ref:l})});x$.displayName=p$;var k3="PopperContent",[pre,xre]=u$(k3),g$=P.forwardRef((e,t)=>{var we,Pe,_e,Ve,Ue,Le;const{__scopePopper:r,side:s="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:g=!1,updatePositionStrategy:x="optimized",onPlaced:b,...y}=e,v=f$(k3,r),[j,w]=P.useState(null),N=Vn(t,dt=>w(dt)),[A,C]=P.useState(null),M=Wv(A),I=(M==null?void 0:M.width)??0,F=(M==null?void 0:M.height)??0,U=s+(i!=="center"?"-"+i:""),W=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},D=Array.isArray(d)?d:[d],R=D.length>0,z={padding:W,boundary:D.filter(vre),altBoundary:R},{refs:Z,floatingStyles:se,placement:J,isPositioned:Q,middlewareData:H}=rre({strategy:"fixed",placement:U,whileElementsMounted:(...dt)=>Kne(...dt,{animationFrame:x==="always"}),elements:{reference:v.anchor},middleware:[are({mainAxis:a+F,alignmentAxis:o}),c&&ire({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?ore():void 0,...z}),c&&lre({...z}),cre({...z,apply:({elements:dt,rects:xt,availableWidth:Xe,availableHeight:ke})=>{const{width:Bt,height:Ft}=xt.reference,mt=dt.floating.style;mt.setProperty("--radix-popper-available-width",`${Xe}px`),mt.setProperty("--radix-popper-available-height",`${ke}px`),mt.setProperty("--radix-popper-anchor-width",`${Bt}px`),mt.setProperty("--radix-popper-anchor-height",`${Ft}px`)}}),A&&ure({element:A,padding:l}),yre({arrowWidth:I,arrowHeight:F}),g&&dre({strategy:"referenceHidden",...z})]}),[ne,ue]=b$(J),ae=io(b);wa(()=>{Q&&(ae==null||ae())},[Q,ae]);const G=(we=H.arrow)==null?void 0:we.x,te=(Pe=H.arrow)==null?void 0:Pe.y,fe=((_e=H.arrow)==null?void 0:_e.centerOffset)!==0,[be,xe]=P.useState();return wa(()=>{j&&xe(window.getComputedStyle(j).zIndex)},[j]),n.jsx("div",{ref:Z.setFloating,"data-radix-popper-content-wrapper":"",style:{...se,transform:Q?se.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:be,"--radix-popper-transform-origin":[(Ve=H.transformOrigin)==null?void 0:Ve.x,(Ue=H.transformOrigin)==null?void 0:Ue.y].join(" "),...((Le=H.hide)==null?void 0:Le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:n.jsx(pre,{scope:r,placedSide:ne,onArrowChange:C,arrowX:G,arrowY:te,shouldHideArrow:fe,children:n.jsx(cn.div,{"data-side":ne,"data-align":ue,...y,ref:N,style:{...y.style,animation:Q?void 0:"none"}})})})});g$.displayName=k3;var v$="PopperArrow",gre={top:"bottom",right:"left",bottom:"top",left:"right"},y$=P.forwardRef(function(t,r){const{__scopePopper:s,...a}=t,i=xre(v$,s),o=gre[i.placedSide];return n.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:n.jsx(fre,{...a,ref:r,style:{...a.style,display:"block"}})})});y$.displayName=v$;function vre(e){return e!==null}var yre=e=>({name:"transformOrigin",options:e,fn(t){var v,j,w;const{placement:r,rects:s,middlewareData:a}=t,o=((v=a.arrow)==null?void 0:v.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,u]=b$(r),h={start:"0%",center:"50%",end:"100%"}[u],g=(((j=a.arrow)==null?void 0:j.x)??0)+l/2,x=(((w=a.arrow)==null?void 0:w.y)??0)+c/2;let b="",y="";return d==="bottom"?(b=o?h:`${g}px`,y=`${-c}px`):d==="top"?(b=o?h:`${g}px`,y=`${s.floating.height+c}px`):d==="right"?(b=`${-c}px`,y=o?h:`${x}px`):d==="left"&&(b=`${s.floating.width+c}px`,y=o?h:`${x}px`),{data:{x:b,y}}}});function b$(e){const[t,r="center"]=e.split("-");return[t,r]}var bre=m$,jre=x$,wre=g$,_re=y$,Nre="Portal",S3=P.forwardRef((e,t)=>{var l;const{container:r,...s}=e,[a,i]=P.useState(!1);wa(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?see.createPortal(n.jsx(cn.div,{...s,ref:t}),o):null});S3.displayName=Nre;var kre=QP[" useInsertionEffect ".trim().toString()]||wa;function bu({prop:e,defaultProp:t,onChange:r=()=>{},caller:s}){const[a,i,o]=Sre({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:a;{const u=P.useRef(e!==void 0);P.useEffect(()=>{const h=u.current;h!==l&&console.warn(`${s} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,s])}const d=P.useCallback(u=>{var h;if(l){const g=Pre(u)?u(e):u;g!==e&&((h=o.current)==null||h.call(o,g))}else i(u)},[l,e,i,o]);return[c,d]}function Sre({defaultProp:e,onChange:t}){const[r,s]=P.useState(e),a=P.useRef(r),i=P.useRef(t);return kre(()=>{i.current=t},[t]),P.useEffect(()=>{var o;a.current!==r&&((o=i.current)==null||o.call(i,r),a.current=r)},[r,a]),[r,s,i]}function Pre(e){return typeof e=="function"}function Kv(e){const t=P.useRef({value:e,previous:e});return P.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var j$=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Are="VisuallyHidden",Cre=P.forwardRef((e,t)=>n.jsx(cn.span,{...e,ref:t,style:{...j$,...e.style}}));Cre.displayName=Are;var Tre=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Tp=new WeakMap,eb=new WeakMap,tb={},M2=0,w$=function(e){return e&&(e.host||w$(e.parentNode))},Ere=function(e,t){return t.map(function(r){if(e.contains(r))return r;var s=w$(r);return s&&e.contains(s)?s:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},Ore=function(e,t,r,s){var a=Ere(t,Array.isArray(e)?e:[e]);tb[r]||(tb[r]=new WeakMap);var i=tb[r],o=[],l=new Set,c=new Set(a),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};a.forEach(d);var u=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(g){if(l.has(g))u(g);else try{var x=g.getAttribute(s),b=x!==null&&x!=="false",y=(Tp.get(g)||0)+1,v=(i.get(g)||0)+1;Tp.set(g,y),i.set(g,v),o.push(g),y===1&&b&&eb.set(g,!0),v===1&&g.setAttribute(r,"true"),b||g.setAttribute(s,"true")}catch(j){console.error("aria-hidden: cannot operate on ",g,j)}})};return u(t),l.clear(),M2++,function(){o.forEach(function(h){var g=Tp.get(h)-1,x=i.get(h)-1;Tp.set(h,g),i.set(h,x),g||(eb.has(h)||h.removeAttribute(s),eb.delete(h)),x||h.removeAttribute(r)}),M2--,M2||(Tp=new WeakMap,Tp=new WeakMap,eb=new WeakMap,tb={})}},_$=function(e,t,r){r===void 0&&(r="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),a=Tre(e);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live], script"))),Ore(s,a,r,"aria-hidden")):function(){return null}},nu=function(){return nu=Object.assign||function(t){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},nu.apply(this,arguments)};function N$(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r}function Mre(e,t,r){if(r||arguments.length===2)for(var s=0,a=t.length,i;s<a;s++)(i||!(s in t))&&(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}var Eb="right-scroll-bar-position",Ob="width-before-scroll-bar",Lre="with-scroll-bars-hidden",Dre="--removed-body-scroll-bar-size";function L2(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Ire(e,t){var r=P.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(s){var a=r.value;a!==s&&(r.value=s,r.callback(s,a))}}}})[0];return r.callback=t,r.facade}var Rre=typeof window<"u"?P.useLayoutEffect:P.useEffect,XE=new WeakMap;function Fre(e,t){var r=Ire(null,function(s){return e.forEach(function(a){return L2(a,s)})});return Rre(function(){var s=XE.get(r);if(s){var a=new Set(s),i=new Set(e),o=r.current;a.forEach(function(l){i.has(l)||L2(l,null)}),i.forEach(function(l){a.has(l)||L2(l,o)})}XE.set(r,e)},[e]),r}function $re(e){return e}function Bre(e,t){t===void 0&&(t=$re);var r=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,s);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(s=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){s=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var u=o;o=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),r}}}};return a}function qre(e){e===void 0&&(e={});var t=Bre(null);return t.options=nu({async:!0,ssr:!1},e),t}var k$=function(e){var t=e.sideCar,r=N$(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return P.createElement(s,nu({},r))};k$.isSideCarExport=!0;function zre(e,t){return e.useMedium(t),k$}var S$=qre(),D2=function(){},bj=P.forwardRef(function(e,t){var r=P.useRef(null),s=P.useState({onScrollCapture:D2,onWheelCapture:D2,onTouchMoveCapture:D2}),a=s[0],i=s[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,g=e.sideCar,x=e.noRelative,b=e.noIsolation,y=e.inert,v=e.allowPinchZoom,j=e.as,w=j===void 0?"div":j,N=e.gapMode,A=N$(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=g,M=Fre([r,t]),I=nu(nu({},A),a);return P.createElement(P.Fragment,null,u&&P.createElement(C,{sideCar:S$,removeScrollBar:d,shards:h,noRelative:x,noIsolation:b,inert:y,setCallbacks:i,allowPinchZoom:!!v,lockRef:r,gapMode:N}),o?P.cloneElement(P.Children.only(l),nu(nu({},I),{ref:M})):P.createElement(w,nu({},I,{className:c,ref:M}),l))});bj.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};bj.classNames={fullWidth:Ob,zeroRight:Eb};var Vre=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Ure(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Vre();return t&&e.setAttribute("nonce",t),e}function Hre(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Wre(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Kre=function(){var e=0,t=null;return{add:function(r){e==0&&(t=Ure())&&(Hre(t,r),Wre(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Gre=function(){var e=Kre();return function(t,r){P.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},P$=function(){var e=Gre(),t=function(r){var s=r.styles,a=r.dynamic;return e(s,a),null};return t},Zre={left:0,top:0,right:0,gap:0},I2=function(e){return parseInt(e||"",10)||0},Yre=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[I2(r),I2(s),I2(a)]},Xre=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Zre;var t=Yre(e),r=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-r+t[2]-t[0])}},Qre=P$(),tx="data-scroll-locked",Jre=function(e,t,r,s){var a=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(Lre,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(tx,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Eb,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Ob,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Eb," .").concat(Eb,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Ob," .").concat(Ob,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(tx,`] {
    `).concat(Dre,": ").concat(l,`px;
  }
`)},QE=function(){var e=parseInt(document.body.getAttribute(tx)||"0",10);return isFinite(e)?e:0},ese=function(){P.useEffect(function(){return document.body.setAttribute(tx,(QE()+1).toString()),function(){var e=QE()-1;e<=0?document.body.removeAttribute(tx):document.body.setAttribute(tx,e.toString())}},[])},tse=function(e){var t=e.noRelative,r=e.noImportant,s=e.gapMode,a=s===void 0?"margin":s;ese();var i=P.useMemo(function(){return Xre(a)},[a]);return P.createElement(Qre,{styles:Jre(i,!t,a,r?"":"!important")})},BS=!1;if(typeof window<"u")try{var nb=Object.defineProperty({},"passive",{get:function(){return BS=!0,!0}});window.addEventListener("test",nb,nb),window.removeEventListener("test",nb,nb)}catch{BS=!1}var Ep=BS?{passive:!1}:!1,nse=function(e){return e.tagName==="TEXTAREA"},A$=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!nse(e)&&r[t]==="visible")},rse=function(e){return A$(e,"overflowY")},sse=function(e){return A$(e,"overflowX")},JE=function(e,t){var r=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=C$(e,s);if(a){var i=T$(e,s),o=i[1],l=i[2];if(o>l)return!0}s=s.parentNode}while(s&&s!==r.body);return!1},ase=function(e){var t=e.scrollTop,r=e.scrollHeight,s=e.clientHeight;return[t,r,s]},ise=function(e){var t=e.scrollLeft,r=e.scrollWidth,s=e.clientWidth;return[t,r,s]},C$=function(e,t){return e==="v"?rse(t):sse(t)},T$=function(e,t){return e==="v"?ase(t):ise(t)},ose=function(e,t){return e==="h"&&t==="rtl"?-1:1},lse=function(e,t,r,s,a){var i=ose(e,window.getComputedStyle(t).direction),o=i*s,l=r.target,c=t.contains(l),d=!1,u=o>0,h=0,g=0;do{if(!l)break;var x=T$(e,l),b=x[0],y=x[1],v=x[2],j=y-v-i*b;(b||j)&&C$(e,l)&&(h+=j,g+=b);var w=l.parentNode;l=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&Math.abs(h)<1||!u&&Math.abs(g)<1)&&(d=!0),d},rb=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},eO=function(e){return[e.deltaX,e.deltaY]},tO=function(e){return e&&"current"in e?e.current:e},cse=function(e,t){return e[0]===t[0]&&e[1]===t[1]},dse=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},use=0,Op=[];function hse(e){var t=P.useRef([]),r=P.useRef([0,0]),s=P.useRef(),a=P.useState(use++)[0],i=P.useState(P$)[0],o=P.useRef(e);P.useEffect(function(){o.current=e},[e]),P.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var y=Mre([e.lockRef.current],(e.shards||[]).map(tO),!0).filter(Boolean);return y.forEach(function(v){return v.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),y.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=P.useCallback(function(y,v){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var j=rb(y),w=r.current,N="deltaX"in y?y.deltaX:w[0]-j[0],A="deltaY"in y?y.deltaY:w[1]-j[1],C,M=y.target,I=Math.abs(N)>Math.abs(A)?"h":"v";if("touches"in y&&I==="h"&&M.type==="range")return!1;var F=JE(I,M);if(!F)return!0;if(F?C=I:(C=I==="v"?"h":"v",F=JE(I,M)),!F)return!1;if(!s.current&&"changedTouches"in y&&(N||A)&&(s.current=C),!C)return!0;var U=s.current||C;return lse(U,v,y,U==="h"?N:A)},[]),c=P.useCallback(function(y){var v=y;if(!(!Op.length||Op[Op.length-1]!==i)){var j="deltaY"in v?eO(v):rb(v),w=t.current.filter(function(C){return C.name===v.type&&(C.target===v.target||v.target===C.shadowParent)&&cse(C.delta,j)})[0];if(w&&w.should){v.cancelable&&v.preventDefault();return}if(!w){var N=(o.current.shards||[]).map(tO).filter(Boolean).filter(function(C){return C.contains(v.target)}),A=N.length>0?l(v,N[0]):!o.current.noIsolation;A&&v.cancelable&&v.preventDefault()}}},[]),d=P.useCallback(function(y,v,j,w){var N={name:y,delta:v,target:j,should:w,shadowParent:fse(j)};t.current.push(N),setTimeout(function(){t.current=t.current.filter(function(A){return A!==N})},1)},[]),u=P.useCallback(function(y){r.current=rb(y),s.current=void 0},[]),h=P.useCallback(function(y){d(y.type,eO(y),y.target,l(y,e.lockRef.current))},[]),g=P.useCallback(function(y){d(y.type,rb(y),y.target,l(y,e.lockRef.current))},[]);P.useEffect(function(){return Op.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:g}),document.addEventListener("wheel",c,Ep),document.addEventListener("touchmove",c,Ep),document.addEventListener("touchstart",u,Ep),function(){Op=Op.filter(function(y){return y!==i}),document.removeEventListener("wheel",c,Ep),document.removeEventListener("touchmove",c,Ep),document.removeEventListener("touchstart",u,Ep)}},[]);var x=e.removeScrollBar,b=e.inert;return P.createElement(P.Fragment,null,b?P.createElement(i,{styles:dse(a)}):null,x?P.createElement(tse,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function fse(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const mse=zre(S$,hse);var P3=P.forwardRef(function(e,t){return P.createElement(bj,nu({},e,{ref:t,sideCar:mse}))});P3.classNames=bj.classNames;var pse=[" ","Enter","ArrowUp","ArrowDown"],xse=[" ","Enter"],zm="Select",[jj,wj,gse]=p3(zm),[xg]=ho(zm,[gse,h$]),_j=h$(),[vse,Lf]=xg(zm),[yse,bse]=xg(zm),E$=e=>{const{__scopeSelect:t,children:r,open:s,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:h,disabled:g,required:x,form:b}=e,y=_j(t),[v,j]=P.useState(null),[w,N]=P.useState(null),[A,C]=P.useState(!1),M=fg(d),[I,F]=bu({prop:s,defaultProp:a??!1,onChange:i,caller:zm}),[U,W]=bu({prop:o,defaultProp:l,onChange:c,caller:zm}),D=P.useRef(null),R=v?b||!!v.closest("form"):!0,[z,Z]=P.useState(new Set),se=Array.from(z).map(J=>J.props.value).join(";");return n.jsx(bre,{...y,children:n.jsxs(vse,{required:x,scope:t,trigger:v,onTriggerChange:j,valueNode:w,onValueNodeChange:N,valueNodeHasChildren:A,onValueNodeHasChildrenChange:C,contentId:lh(),value:U,onValueChange:W,open:I,onOpenChange:F,dir:M,triggerPointerDownPosRef:D,disabled:g,children:[n.jsx(jj.Provider,{scope:t,children:n.jsx(yse,{scope:e.__scopeSelect,onNativeOptionAdd:P.useCallback(J=>{Z(Q=>new Set(Q).add(J))},[]),onNativeOptionRemove:P.useCallback(J=>{Z(Q=>{const H=new Set(Q);return H.delete(J),H})},[]),children:r})}),R?n.jsxs(tB,{"aria-hidden":!0,required:x,tabIndex:-1,name:u,autoComplete:h,value:U,onChange:J=>W(J.target.value),disabled:g,form:b,children:[U===void 0?n.jsx("option",{value:""}):null,Array.from(z)]},se):null]})})};E$.displayName=zm;var O$="SelectTrigger",M$=P.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:s=!1,...a}=e,i=_j(r),o=Lf(O$,r),l=o.disabled||s,c=Vn(t,o.onTriggerChange),d=wj(r),u=P.useRef("touch"),[h,g,x]=rB(y=>{const v=d().filter(N=>!N.disabled),j=v.find(N=>N.value===o.value),w=sB(v,y,j);w!==void 0&&o.onValueChange(w.value)}),b=y=>{l||(o.onOpenChange(!0),x()),y&&(o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return n.jsx(jre,{asChild:!0,...i,children:n.jsx(cn.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":nB(o.value)?"":void 0,...a,ref:c,onClick:fn(a.onClick,y=>{y.currentTarget.focus(),u.current!=="mouse"&&b(y)}),onPointerDown:fn(a.onPointerDown,y=>{u.current=y.pointerType;const v=y.target;v.hasPointerCapture(y.pointerId)&&v.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(b(y),y.preventDefault())}),onKeyDown:fn(a.onKeyDown,y=>{const v=h.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&g(y.key),!(v&&y.key===" ")&&pse.includes(y.key)&&(b(),y.preventDefault())})})})});M$.displayName=O$;var L$="SelectValue",D$=P.forwardRef((e,t)=>{const{__scopeSelect:r,className:s,style:a,children:i,placeholder:o="",...l}=e,c=Lf(L$,r),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,h=Vn(t,c.onValueNodeChange);return wa(()=>{d(u)},[d,u]),n.jsx(cn.span,{...l,ref:h,style:{pointerEvents:"none"},children:nB(c.value)?n.jsx(n.Fragment,{children:o}):i})});D$.displayName=L$;var jse="SelectIcon",I$=P.forwardRef((e,t)=>{const{__scopeSelect:r,children:s,...a}=e;return n.jsx(cn.span,{"aria-hidden":!0,...a,ref:t,children:s||""})});I$.displayName=jse;var wse="SelectPortal",R$=e=>n.jsx(S3,{asChild:!0,...e});R$.displayName=wse;var Vm="SelectContent",F$=P.forwardRef((e,t)=>{const r=Lf(Vm,e.__scopeSelect),[s,a]=P.useState();if(wa(()=>{a(new DocumentFragment)},[]),!r.open){const i=s;return i?ug.createPortal(n.jsx($$,{scope:e.__scopeSelect,children:n.jsx(jj.Slot,{scope:e.__scopeSelect,children:n.jsx("div",{children:e.children})})}),i):null}return n.jsx(B$,{...e,ref:t})});F$.displayName=Vm;var od=10,[$$,Df]=xg(Vm),_se="SelectContentImpl",Nse=kx("SelectContent.RemoveScroll"),B$=P.forwardRef((e,t)=>{const{__scopeSelect:r,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:g,collisionPadding:x,sticky:b,hideWhenDetached:y,avoidCollisions:v,...j}=e,w=Lf(Vm,r),[N,A]=P.useState(null),[C,M]=P.useState(null),I=Vn(t,we=>A(we)),[F,U]=P.useState(null),[W,D]=P.useState(null),R=wj(r),[z,Z]=P.useState(!1),se=P.useRef(!1);P.useEffect(()=>{if(N)return _$(N)},[N]),X9();const J=P.useCallback(we=>{const[Pe,..._e]=R().map(Le=>Le.ref.current),[Ve]=_e.slice(-1),Ue=document.activeElement;for(const Le of we)if(Le===Ue||(Le==null||Le.scrollIntoView({block:"nearest"}),Le===Pe&&C&&(C.scrollTop=0),Le===Ve&&C&&(C.scrollTop=C.scrollHeight),Le==null||Le.focus(),document.activeElement!==Ue))return},[R,C]),Q=P.useCallback(()=>J([F,N]),[J,F,N]);P.useEffect(()=>{z&&Q()},[z,Q]);const{onOpenChange:H,triggerPointerDownPosRef:ne}=w;P.useEffect(()=>{if(N){let we={x:0,y:0};const Pe=Ve=>{var Ue,Le;we={x:Math.abs(Math.round(Ve.pageX)-(((Ue=ne.current)==null?void 0:Ue.x)??0)),y:Math.abs(Math.round(Ve.pageY)-(((Le=ne.current)==null?void 0:Le.y)??0))}},_e=Ve=>{we.x<=10&&we.y<=10?Ve.preventDefault():N.contains(Ve.target)||H(!1),document.removeEventListener("pointermove",Pe),ne.current=null};return ne.current!==null&&(document.addEventListener("pointermove",Pe),document.addEventListener("pointerup",_e,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Pe),document.removeEventListener("pointerup",_e,{capture:!0})}}},[N,H,ne]),P.useEffect(()=>{const we=()=>H(!1);return window.addEventListener("blur",we),window.addEventListener("resize",we),()=>{window.removeEventListener("blur",we),window.removeEventListener("resize",we)}},[H]);const[ue,ae]=rB(we=>{const Pe=R().filter(Ue=>!Ue.disabled),_e=Pe.find(Ue=>Ue.ref.current===document.activeElement),Ve=sB(Pe,we,_e);Ve&&setTimeout(()=>Ve.ref.current.focus())}),G=P.useCallback((we,Pe,_e)=>{const Ve=!se.current&&!_e;(w.value!==void 0&&w.value===Pe||Ve)&&(U(we),Ve&&(se.current=!0))},[w.value]),te=P.useCallback(()=>N==null?void 0:N.focus(),[N]),fe=P.useCallback((we,Pe,_e)=>{const Ve=!se.current&&!_e;(w.value!==void 0&&w.value===Pe||Ve)&&D(we)},[w.value]),be=s==="popper"?qS:q$,xe=be===qS?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:g,collisionPadding:x,sticky:b,hideWhenDetached:y,avoidCollisions:v}:{};return n.jsx($$,{scope:r,content:N,viewport:C,onViewportChange:M,itemRefCallback:G,selectedItem:F,onItemLeave:te,itemTextRefCallback:fe,focusSelectedItem:Q,selectedItemText:W,position:s,isPositioned:z,searchRef:ue,children:n.jsx(P3,{as:Nse,allowPinchZoom:!0,children:n.jsx(g3,{asChild:!0,trapped:w.open,onMountAutoFocus:we=>{we.preventDefault()},onUnmountAutoFocus:fn(a,we=>{var Pe;(Pe=w.trigger)==null||Pe.focus({preventScroll:!0}),we.preventDefault()}),children:n.jsx(x3,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:we=>we.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:n.jsx(be,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:we=>we.preventDefault(),...j,...xe,onPlaced:()=>Z(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:fn(j.onKeyDown,we=>{const Pe=we.ctrlKey||we.altKey||we.metaKey;if(we.key==="Tab"&&we.preventDefault(),!Pe&&we.key.length===1&&ae(we.key),["ArrowUp","ArrowDown","Home","End"].includes(we.key)){let Ve=R().filter(Ue=>!Ue.disabled).map(Ue=>Ue.ref.current);if(["ArrowUp","End"].includes(we.key)&&(Ve=Ve.slice().reverse()),["ArrowUp","ArrowDown"].includes(we.key)){const Ue=we.target,Le=Ve.indexOf(Ue);Ve=Ve.slice(Le+1)}setTimeout(()=>J(Ve)),we.preventDefault()}})})})})})})});B$.displayName=_se;var kse="SelectItemAlignedPosition",q$=P.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:s,...a}=e,i=Lf(Vm,r),o=Df(Vm,r),[l,c]=P.useState(null),[d,u]=P.useState(null),h=Vn(t,I=>u(I)),g=wj(r),x=P.useRef(!1),b=P.useRef(!0),{viewport:y,selectedItem:v,selectedItemText:j,focusSelectedItem:w}=o,N=P.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&y&&v&&j){const I=i.trigger.getBoundingClientRect(),F=d.getBoundingClientRect(),U=i.valueNode.getBoundingClientRect(),W=j.getBoundingClientRect();if(i.dir!=="rtl"){const Ue=W.left-F.left,Le=U.left-Ue,dt=I.left-Le,xt=I.width+dt,Xe=Math.max(xt,F.width),ke=window.innerWidth-od,Bt=W0(Le,[od,Math.max(od,ke-Xe)]);l.style.minWidth=xt+"px",l.style.left=Bt+"px"}else{const Ue=F.right-W.right,Le=window.innerWidth-U.right-Ue,dt=window.innerWidth-I.right-Le,xt=I.width+dt,Xe=Math.max(xt,F.width),ke=window.innerWidth-od,Bt=W0(Le,[od,Math.max(od,ke-Xe)]);l.style.minWidth=xt+"px",l.style.right=Bt+"px"}const D=g(),R=window.innerHeight-od*2,z=y.scrollHeight,Z=window.getComputedStyle(d),se=parseInt(Z.borderTopWidth,10),J=parseInt(Z.paddingTop,10),Q=parseInt(Z.borderBottomWidth,10),H=parseInt(Z.paddingBottom,10),ne=se+J+z+H+Q,ue=Math.min(v.offsetHeight*5,ne),ae=window.getComputedStyle(y),G=parseInt(ae.paddingTop,10),te=parseInt(ae.paddingBottom,10),fe=I.top+I.height/2-od,be=R-fe,xe=v.offsetHeight/2,we=v.offsetTop+xe,Pe=se+J+we,_e=ne-Pe;if(Pe<=fe){const Ue=D.length>0&&v===D[D.length-1].ref.current;l.style.bottom="0px";const Le=d.clientHeight-y.offsetTop-y.offsetHeight,dt=Math.max(be,xe+(Ue?te:0)+Le+Q),xt=Pe+dt;l.style.height=xt+"px"}else{const Ue=D.length>0&&v===D[0].ref.current;l.style.top="0px";const dt=Math.max(fe,se+y.offsetTop+(Ue?G:0)+xe)+_e;l.style.height=dt+"px",y.scrollTop=Pe-fe+y.offsetTop}l.style.margin=`${od}px 0`,l.style.minHeight=ue+"px",l.style.maxHeight=R+"px",s==null||s(),requestAnimationFrame(()=>x.current=!0)}},[g,i.trigger,i.valueNode,l,d,y,v,j,i.dir,s]);wa(()=>N(),[N]);const[A,C]=P.useState();wa(()=>{d&&C(window.getComputedStyle(d).zIndex)},[d]);const M=P.useCallback(I=>{I&&b.current===!0&&(N(),w==null||w(),b.current=!1)},[N,w]);return n.jsx(Pse,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:x,onScrollButtonChange:M,children:n.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:n.jsx(cn.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});q$.displayName=kse;var Sse="SelectPopperPosition",qS=P.forwardRef((e,t)=>{const{__scopeSelect:r,align:s="start",collisionPadding:a=od,...i}=e,o=_j(r);return n.jsx(wre,{...o,...i,ref:t,align:s,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});qS.displayName=Sse;var[Pse,A3]=xg(Vm,{}),zS="SelectViewport",z$=P.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:s,...a}=e,i=Df(zS,r),o=A3(zS,r),l=Vn(t,i.onViewportChange),c=P.useRef(0);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),n.jsx(jj.Slot,{scope:r,children:n.jsx(cn.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:fn(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:g}=o;if(g!=null&&g.current&&h){const x=Math.abs(c.current-u.scrollTop);if(x>0){const b=window.innerHeight-od*2,y=parseFloat(h.style.minHeight),v=parseFloat(h.style.height),j=Math.max(y,v);if(j<b){const w=j+x,N=Math.min(b,w),A=w-N;h.style.height=N+"px",h.style.bottom==="0px"&&(u.scrollTop=A>0?A:0,h.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});z$.displayName=zS;var V$="SelectGroup",[Ase,Cse]=xg(V$),Tse=P.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=lh();return n.jsx(Ase,{scope:r,id:a,children:n.jsx(cn.div,{role:"group","aria-labelledby":a,...s,ref:t})})});Tse.displayName=V$;var U$="SelectLabel",H$=P.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=Cse(U$,r);return n.jsx(cn.div,{id:a.id,...s,ref:t})});H$.displayName=U$;var Xb="SelectItem",[Ese,W$]=xg(Xb),K$=P.forwardRef((e,t)=>{const{__scopeSelect:r,value:s,disabled:a=!1,textValue:i,...o}=e,l=Lf(Xb,r),c=Df(Xb,r),d=l.value===s,[u,h]=P.useState(i??""),[g,x]=P.useState(!1),b=Vn(t,w=>{var N;return(N=c.itemRefCallback)==null?void 0:N.call(c,w,s,a)}),y=lh(),v=P.useRef("touch"),j=()=>{a||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return n.jsx(Ese,{scope:r,value:s,disabled:a,textId:y,isSelected:d,onItemTextChange:P.useCallback(w=>{h(N=>N||((w==null?void 0:w.textContent)??"").trim())},[]),children:n.jsx(jj.ItemSlot,{scope:r,value:s,disabled:a,textValue:u,children:n.jsx(cn.div,{role:"option","aria-labelledby":y,"data-highlighted":g?"":void 0,"aria-selected":d&&g,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:b,onFocus:fn(o.onFocus,()=>x(!0)),onBlur:fn(o.onBlur,()=>x(!1)),onClick:fn(o.onClick,()=>{v.current!=="mouse"&&j()}),onPointerUp:fn(o.onPointerUp,()=>{v.current==="mouse"&&j()}),onPointerDown:fn(o.onPointerDown,w=>{v.current=w.pointerType}),onPointerMove:fn(o.onPointerMove,w=>{var N;v.current=w.pointerType,a?(N=c.onItemLeave)==null||N.call(c):v.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:fn(o.onPointerLeave,w=>{var N;w.currentTarget===document.activeElement&&((N=c.onItemLeave)==null||N.call(c))}),onKeyDown:fn(o.onKeyDown,w=>{var A;((A=c.searchRef)==null?void 0:A.current)!==""&&w.key===" "||(xse.includes(w.key)&&j(),w.key===" "&&w.preventDefault())})})})})});K$.displayName=Xb;var g0="SelectItemText",G$=P.forwardRef((e,t)=>{const{__scopeSelect:r,className:s,style:a,...i}=e,o=Lf(g0,r),l=Df(g0,r),c=W$(g0,r),d=bse(g0,r),[u,h]=P.useState(null),g=Vn(t,j=>h(j),c.onItemTextChange,j=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,j,c.value,c.disabled)}),x=u==null?void 0:u.textContent,b=P.useMemo(()=>n.jsx("option",{value:c.value,disabled:c.disabled,children:x},c.value),[c.disabled,c.value,x]),{onNativeOptionAdd:y,onNativeOptionRemove:v}=d;return wa(()=>(y(b),()=>v(b)),[y,v,b]),n.jsxs(n.Fragment,{children:[n.jsx(cn.span,{id:c.textId,...i,ref:g}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?ug.createPortal(i.children,o.valueNode):null]})});G$.displayName=g0;var Z$="SelectItemIndicator",Y$=P.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e;return W$(Z$,r).isSelected?n.jsx(cn.span,{"aria-hidden":!0,...s,ref:t}):null});Y$.displayName=Z$;var VS="SelectScrollUpButton",X$=P.forwardRef((e,t)=>{const r=Df(VS,e.__scopeSelect),s=A3(VS,e.__scopeSelect),[a,i]=P.useState(!1),o=Vn(t,s.onScrollButtonChange);return wa(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?n.jsx(J$,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});X$.displayName=VS;var US="SelectScrollDownButton",Q$=P.forwardRef((e,t)=>{const r=Df(US,e.__scopeSelect),s=A3(US,e.__scopeSelect),[a,i]=P.useState(!1),o=Vn(t,s.onScrollButtonChange);return wa(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?n.jsx(J$,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Q$.displayName=US;var J$=P.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:s,...a}=e,i=Df("SelectScrollButton",r),o=P.useRef(null),l=wj(r),c=P.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return P.useEffect(()=>()=>c(),[c]),wa(()=>{var u;const d=l().find(h=>h.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),n.jsx(cn.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:fn(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(s,50))}),onPointerMove:fn(a.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(s,50))}),onPointerLeave:fn(a.onPointerLeave,()=>{c()})})}),Ose="SelectSeparator",eB=P.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e;return n.jsx(cn.div,{"aria-hidden":!0,...s,ref:t})});eB.displayName=Ose;var HS="SelectArrow",Mse=P.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=_j(r),i=Lf(HS,r),o=Df(HS,r);return i.open&&o.position==="popper"?n.jsx(_re,{...a,...s,ref:t}):null});Mse.displayName=HS;var Lse="SelectBubbleInput",tB=P.forwardRef(({__scopeSelect:e,value:t,...r},s)=>{const a=P.useRef(null),i=Vn(s,a),o=Kv(t);return P.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&u){const h=new Event("change",{bubbles:!0});u.call(l,t),l.dispatchEvent(h)}},[o,t]),n.jsx(cn.select,{...r,style:{...j$,...r.style},ref:i,defaultValue:t})});tB.displayName=Lse;function nB(e){return e===""||e===void 0}function rB(e){const t=io(e),r=P.useRef(""),s=P.useRef(0),a=P.useCallback(o=>{const l=r.current+o;t(l),(function c(d){r.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))})(l)},[t]),i=P.useCallback(()=>{r.current="",window.clearTimeout(s.current)},[]);return P.useEffect(()=>()=>window.clearTimeout(s.current),[]),[r,a,i]}function sB(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=Dse(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function Dse(e,t){return e.map((r,s)=>e[(t+s)%e.length])}var Ise=E$,aB=M$,Rse=D$,Fse=I$,$se=R$,iB=F$,Bse=z$,oB=H$,lB=K$,qse=G$,zse=Y$,cB=X$,dB=Q$,uB=eB;const Nt=Ise,kt=Rse,jt=P.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(aB,{ref:s,className:Yt("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,n.jsx(Fse,{asChild:!0,children:n.jsx(fj,{className:"h-4 w-4 opacity-50"})})]}));jt.displayName=aB.displayName;const hB=P.forwardRef(({className:e,...t},r)=>n.jsx(cB,{ref:r,className:Yt("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(K7,{className:"h-4 w-4"})}));hB.displayName=cB.displayName;const fB=P.forwardRef(({className:e,...t},r)=>n.jsx(dB,{ref:r,className:Yt("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(fj,{className:"h-4 w-4"})}));fB.displayName=dB.displayName;const wt=P.forwardRef(({className:e,children:t,position:r="popper",...s},a)=>n.jsx($se,{children:n.jsxs(iB,{ref:a,className:Yt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...s,children:[n.jsx(hB,{}),n.jsx(Bse,{className:Yt("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),n.jsx(fB,{})]})}));wt.displayName=iB.displayName;const Vse=P.forwardRef(({className:e,...t},r)=>n.jsx(oB,{ref:r,className:Yt("px-2 py-1.5 text-sm font-semibold",e),...t}));Vse.displayName=oB.displayName;const Ne=P.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(lB,{ref:s,className:Yt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[n.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(zse,{children:n.jsx(Rm,{className:"h-4 w-4"})})}),n.jsx(qse,{children:t})]}));Ne.displayName=lB.displayName;const Use=P.forwardRef(({className:e,...t},r)=>n.jsx(uB,{ref:r,className:Yt("-mx-1 my-1 h-px bg-muted",e),...t}));Use.displayName=uB.displayName;const ce=P.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Yt("rounded-xl border bg-card text-card-foreground shadow",e),...t}));ce.displayName="Card";const At=P.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Yt("flex flex-col space-y-1.5 p-6",e),...t}));At.displayName="CardHeader";const Ct=P.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Yt("font-semibold leading-none tracking-tight",e),...t}));Ct.displayName="CardTitle";const cd=P.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Yt("text-sm text-muted-foreground",e),...t}));cd.displayName="CardDescription";const he=P.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Yt("p-6 pt-0",e),...t}));he.displayName="CardContent";const Hse=P.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Yt("flex items-center p-6 pt-0",e),...t}));Hse.displayName="CardFooter";function Pn(e){return"/"+e.replace(/ /g,"-")}const Nj=P.createContext(null);function gg(e){const t=P.useRef(null);return t.current===null&&(t.current=e()),t.current}const kj=P.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class Wse extends P.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=r.offsetHeight||0,s.width=r.offsetWidth||0,s.top=r.offsetTop,s.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Kse({children:e,isPresent:t}){const r=P.useId(),s=P.useRef(null),a=P.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=P.useContext(kj);return P.useInsertionEffect(()=>{const{width:o,height:l,top:c,left:d}=a.current;if(t||!s.current||!o||!l)return;s.current.dataset.motionPopId=r;const u=document.createElement("style");return i&&(u.nonce=i),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            top: ${c}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),n.jsx(Wse,{isPresent:t,childRef:s,sizeRef:a,children:P.cloneElement(e,{ref:s})})}const Gse=({children:e,initial:t,isPresent:r,onExitComplete:s,custom:a,presenceAffectsLayout:i,mode:o})=>{const l=gg(Zse),c=P.useId(),d=P.useCallback(h=>{l.set(h,!0);for(const g of l.values())if(!g)return;s&&s()},[l,s]),u=P.useMemo(()=>({id:c,initial:t,isPresent:r,custom:a,onExitComplete:d,register:h=>(l.set(h,!1),()=>l.delete(h))}),i?[Math.random(),d]:[r,d]);return P.useMemo(()=>{l.forEach((h,g)=>l.set(g,!1))},[r]),P.useEffect(()=>{!r&&!l.size&&s&&s()},[r]),o==="popLayout"&&(e=n.jsx(Kse,{isPresent:r,children:e})),n.jsx(Nj.Provider,{value:u,children:e})};function Zse(){return new Map}const C3=P.createContext({}),Dl=e=>e;let mB=Dl;function T3(e){let t;return()=>(t===void 0&&(t=e()),t)}const Px=(e,t,r)=>{const s=t-e;return s===0?1:(r-e)/s},ch=e=>e*1e3,dh=e=>e/1e3,sb=e=>e.key||"";function nO(e){const t=[];return P.Children.forEach(e,r=>{P.isValidElement(r)&&t.push(r)}),t}const E3=typeof window<"u",Sj=E3?P.useLayoutEffect:P.useEffect,_a=({children:e,exitBeforeEnter:t,custom:r,initial:s=!0,onExitComplete:a,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const l=P.useMemo(()=>nO(e),[e]),c=l.map(sb),d=P.useRef(!0),u=P.useRef(l),h=gg(()=>new Map),[g,x]=P.useState(l),[b,y]=P.useState(l);Sj(()=>{d.current=!1,u.current=l;for(let w=0;w<b.length;w++){const N=sb(b[w]);c.includes(N)?h.delete(N):h.get(N)!==!0&&h.set(N,!1)}},[b,c.length,c.join("-")]);const v=[];if(l!==g){let w=[...l];for(let N=0;N<b.length;N++){const A=b[N],C=sb(A);c.includes(C)||(w.splice(N,0,A),v.push(A))}o==="wait"&&v.length&&(w=v),y(nO(w)),x(l);return}const{forceRender:j}=P.useContext(C3);return n.jsx(n.Fragment,{children:b.map(w=>{const N=sb(w),A=l===b||c.includes(N),C=()=>{if(h.has(N))h.set(N,!0);else return;let M=!0;h.forEach(I=>{I||(M=!1)}),M&&(j==null||j(),y(u.current),a&&a())};return n.jsx(Gse,{isPresent:A,initial:!d.current||s?void 0:!1,custom:A?void 0:r,presenceAffectsLayout:i,mode:o,onExitComplete:A?void 0:C,children:w},N)})})},Yse={useManualTiming:!1};function Xse(e){let t=new Set,r=new Set,s=!1,a=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){i.has(d)&&(c.schedule(d),e()),d(o)}const c={schedule:(d,u=!1,h=!1)=>{const x=h&&s?t:r;return u&&i.add(d),x.has(d)||x.add(d),d},cancel:d=>{r.delete(d),i.delete(d)},process:d=>{if(o=d,s){a=!0;return}s=!0,[t,r]=[r,t],t.forEach(l),t.clear(),s=!1,a&&(a=!1,c.process(d))}};return c}const ab=["read","resolveKeyframes","update","preRender","render","postRender"],Qse=40;function pB(e,t){let r=!1,s=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=ab.reduce((j,w)=>(j[w]=Xse(i),j),{}),{read:l,resolveKeyframes:c,update:d,preRender:u,render:h,postRender:g}=o,x=()=>{const j=performance.now();r=!1,a.delta=s?1e3/60:Math.max(Math.min(j-a.timestamp,Qse),1),a.timestamp=j,a.isProcessing=!0,l.process(a),c.process(a),d.process(a),u.process(a),h.process(a),g.process(a),a.isProcessing=!1,r&&t&&(s=!1,e(x))},b=()=>{r=!0,s=!0,a.isProcessing||e(x)};return{schedule:ab.reduce((j,w)=>{const N=o[w];return j[w]=(A,C=!1,M=!1)=>(r||b(),N.schedule(A,C,M)),j},{}),cancel:j=>{for(let w=0;w<ab.length;w++)o[ab[w]].cancel(j)},state:a,steps:o}}const{schedule:ws,cancel:yh,state:Ii,steps:R2}=pB(typeof requestAnimationFrame<"u"?requestAnimationFrame:Dl,!0),xB=P.createContext({strict:!1}),rO={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ax={};for(const e in rO)Ax[e]={isEnabled:t=>rO[e].some(r=>!!t[r])};function Jse(e){for(const t in e)Ax[t]={...Ax[t],...e[t]}}const eae=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Qb(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||eae.has(e)}let gB=e=>!Qb(e);function tae(e){e&&(gB=t=>t.startsWith("on")?!Qb(t):e(t))}try{tae(require("@emotion/is-prop-valid").default)}catch{}function nae(e,t,r){const s={};for(const a in e)a==="values"&&typeof e.values=="object"||(gB(a)||r===!0&&Qb(a)||!t&&!Qb(a)||e.draggable&&a.startsWith("onDrag"))&&(s[a]=e[a]);return s}function rae(e){if(typeof Proxy>"u")return e;const t=new Map,r=(...s)=>e(...s);return new Proxy(r,{get:(s,a)=>a==="create"?e:(t.has(a)||t.set(a,e(a)),t.get(a))})}const Pj=P.createContext({});function Z0(e){return typeof e=="string"||Array.isArray(e)}function Aj(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const O3=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],M3=["initial",...O3];function Cj(e){return Aj(e.animate)||M3.some(t=>Z0(e[t]))}function vB(e){return!!(Cj(e)||e.variants)}function sae(e,t){if(Cj(e)){const{initial:r,animate:s}=e;return{initial:r===!1||Z0(r)?r:void 0,animate:Z0(s)?s:void 0}}return e.inherit!==!1?t:{}}function aae(e){const{initial:t,animate:r}=sae(e,P.useContext(Pj));return P.useMemo(()=>({initial:t,animate:r}),[sO(t),sO(r)])}function sO(e){return Array.isArray(e)?e.join(" "):e}const iae=Symbol.for("motionComponentSymbol");function Vp(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function oae(e,t,r){return P.useCallback(s=>{s&&e.mount&&e.mount(s),t&&(s?t.mount(s):t.unmount()),r&&(typeof r=="function"?r(s):Vp(r)&&(r.current=s))},[t])}const L3=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),lae="framerAppearId",yB="data-"+L3(lae),{schedule:D3}=pB(queueMicrotask,!1),bB=P.createContext({});function cae(e,t,r,s,a){var i,o;const{visualElement:l}=P.useContext(Pj),c=P.useContext(xB),d=P.useContext(Nj),u=P.useContext(kj).reducedMotion,h=P.useRef(null);s=s||c.renderer,!h.current&&s&&(h.current=s(e,{visualState:t,parent:l,props:r,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:u}));const g=h.current,x=P.useContext(bB);g&&!g.projection&&a&&(g.type==="html"||g.type==="svg")&&dae(h.current,r,a,x);const b=P.useRef(!1);P.useInsertionEffect(()=>{g&&b.current&&g.update(r,d)});const y=r[yB],v=P.useRef(!!y&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,y))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,y)));return Sj(()=>{g&&(b.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),D3.render(g.render),v.current&&g.animationState&&g.animationState.animateChanges())}),P.useEffect(()=>{g&&(!v.current&&g.animationState&&g.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var j;(j=window.MotionHandoffMarkAsComplete)===null||j===void 0||j.call(window,y)}),v.current=!1))}),g}function dae(e,t,r,s){const{layoutId:a,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:jB(e.parent)),e.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!o||l&&Vp(l),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:s,layoutScroll:c,layoutRoot:d})}function jB(e){if(e)return e.options.allowProjection!==!1?e.projection:jB(e.parent)}function uae({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:s,Component:a}){var i,o;e&&Jse(e);function l(d,u){let h;const g={...P.useContext(kj),...d,layoutId:hae(d)},{isStatic:x}=g,b=aae(d),y=s(d,x);if(!x&&E3){fae();const v=mae(g);h=v.MeasureLayout,b.visualElement=cae(a,y,g,t,v.ProjectionNode)}return n.jsxs(Pj.Provider,{value:b,children:[h&&b.visualElement?n.jsx(h,{visualElement:b.visualElement,...g}):null,r(a,d,oae(y,b.visualElement,u),y,x,b.visualElement)]})}l.displayName=`motion.${typeof a=="string"?a:`create(${(o=(i=a.displayName)!==null&&i!==void 0?i:a.name)!==null&&o!==void 0?o:""})`}`;const c=P.forwardRef(l);return c[iae]=a,c}function hae({layoutId:e}){const t=P.useContext(C3).id;return t&&e!==void 0?t+"-"+e:e}function fae(e,t){P.useContext(xB).strict}function mae(e){const{drag:t,layout:r}=Ax;if(!t&&!r)return{};const s={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const pae=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function I3(e){return typeof e!="string"||e.includes("-")?!1:!!(pae.indexOf(e)>-1||/[A-Z]/u.test(e))}function wB(e,{style:t,vars:r},s,a){Object.assign(e.style,t,a&&a.getProjectionStyles(s));for(const i in r)e.style.setProperty(i,r[i])}const _B=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function NB(e,t,r,s){wB(e,t,void 0,s);for(const a in t.attrs)e.setAttribute(_B.has(a)?a:L3(a),t.attrs[a])}const co=e=>!!(e&&e.getVelocity),Jb={};function xae(e){Object.assign(Jb,e)}const Gv=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ap=new Set(Gv);function kB(e,{layout:t,layoutId:r}){return ap.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!Jb[e]||e==="opacity")}function R3(e,t,r){var s;const{style:a}=e,i={};for(const o in a)(co(a[o])||t.style&&co(t.style[o])||kB(o,e)||((s=r==null?void 0:r.getValue(o))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(i[o]=a[o]);return i}function SB(e,t,r){const s=R3(e,t,r);for(const a in e)if(co(e[a])||co(t[a])){const i=Gv.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;s[i]=e[a]}return s}function aO(e){const t=[{},{}];return e==null||e.values.forEach((r,s)=>{t[0][s]=r.get(),t[1][s]=r.getVelocity()}),t}function F3(e,t,r,s){if(typeof t=="function"){const[a,i]=aO(s);t=t(r!==void 0?r:e.custom,a,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,i]=aO(s);t=t(r!==void 0?r:e.custom,a,i)}return t}const WS=e=>Array.isArray(e),gae=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),vae=e=>WS(e)?e[e.length-1]||0:e;function Mb(e){const t=co(e)?e.get():e;return gae(t)?t.toValue():t}function yae({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},s,a,i){const o={latestValues:bae(s,a,i,e),renderState:t()};return r&&(o.mount=l=>r(s,l,o)),o}const PB=e=>(t,r)=>{const s=P.useContext(Pj),a=P.useContext(Nj),i=()=>yae(e,t,s,a);return r?i():gg(i)};function bae(e,t,r,s){const a={},i=s(e,{});for(const g in i)a[g]=Mb(i[g]);let{initial:o,animate:l}=e;const c=Cj(e),d=vB(e);t&&d&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let u=r?r.initial===!1:!1;u=u||o===!1;const h=u?l:o;if(h&&typeof h!="boolean"&&!Aj(h)){const g=Array.isArray(h)?h:[h];for(let x=0;x<g.length;x++){const b=F3(e,g[x]);if(b){const{transitionEnd:y,transition:v,...j}=b;for(const w in j){let N=j[w];if(Array.isArray(N)){const A=u?N.length-1:0;N=N[A]}N!==null&&(a[w]=N)}for(const w in y)a[w]=y[w]}}}return a}const $3=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),AB=()=>({...$3(),attrs:{}}),CB=(e,t)=>t&&typeof e=="number"?t.transform(e):e,bh=(e,t,r)=>r>t?t:r<e?e:r,vg={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Y0={...vg,transform:e=>bh(0,1,e)},ib={...vg,default:1},Zv=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),tf=Zv("deg"),du=Zv("%"),kn=Zv("px"),jae=Zv("vh"),wae=Zv("vw"),iO={...du,parse:e=>du.parse(e)/100,transform:e=>du.transform(e*100)},_ae={borderWidth:kn,borderTopWidth:kn,borderRightWidth:kn,borderBottomWidth:kn,borderLeftWidth:kn,borderRadius:kn,radius:kn,borderTopLeftRadius:kn,borderTopRightRadius:kn,borderBottomRightRadius:kn,borderBottomLeftRadius:kn,width:kn,maxWidth:kn,height:kn,maxHeight:kn,top:kn,right:kn,bottom:kn,left:kn,padding:kn,paddingTop:kn,paddingRight:kn,paddingBottom:kn,paddingLeft:kn,margin:kn,marginTop:kn,marginRight:kn,marginBottom:kn,marginLeft:kn,backgroundPositionX:kn,backgroundPositionY:kn},Nae={rotate:tf,rotateX:tf,rotateY:tf,rotateZ:tf,scale:ib,scaleX:ib,scaleY:ib,scaleZ:ib,skew:tf,skewX:tf,skewY:tf,distance:kn,translateX:kn,translateY:kn,translateZ:kn,x:kn,y:kn,z:kn,perspective:kn,transformPerspective:kn,opacity:Y0,originX:iO,originY:iO,originZ:kn},oO={...vg,transform:Math.round},B3={..._ae,...Nae,zIndex:oO,size:kn,fillOpacity:Y0,strokeOpacity:Y0,numOctaves:oO},kae={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Sae=Gv.length;function Pae(e,t,r){let s="",a=!0;for(let i=0;i<Sae;i++){const o=Gv[i],l=e[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||r){const d=CB(l,B3[o]);if(!c){a=!1;const u=kae[o]||o;s+=`${u}(${d}) `}r&&(t[o]=d)}}return s=s.trim(),r?s=r(t,a?"":s):a&&(s="none"),s}const TB=e=>t=>typeof t=="string"&&t.startsWith(e),EB=TB("--"),Aae=TB("var(--"),q3=e=>Aae(e)?Cae.test(e.split("/*")[0].trim()):!1,Cae=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function z3(e,t,r){const{style:s,vars:a,transformOrigin:i}=e;let o=!1,l=!1;for(const c in t){const d=t[c];if(ap.has(c)){o=!0;continue}else if(EB(c)){a[c]=d;continue}else{const u=CB(d,B3[c]);c.startsWith("origin")?(l=!0,i[c]=u):s[c]=u}}if(t.transform||(o||r?s.transform=Pae(t,e.transform,r):s.transform&&(s.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:u=0}=i;s.transformOrigin=`${c} ${d} ${u}`}}function lO(e,t,r){return typeof e=="string"?e:kn.transform(t+r*e)}function Tae(e,t,r){const s=lO(t,e.x,e.width),a=lO(r,e.y,e.height);return`${s} ${a}`}const Eae={offset:"stroke-dashoffset",array:"stroke-dasharray"},Oae={offset:"strokeDashoffset",array:"strokeDasharray"};function Mae(e,t,r=1,s=0,a=!0){e.pathLength=1;const i=a?Eae:Oae;e[i.offset]=kn.transform(-s);const o=kn.transform(t),l=kn.transform(r);e[i.array]=`${o} ${l}`}function V3(e,{attrX:t,attrY:r,attrScale:s,originX:a,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...d},u,h){if(z3(e,d,h),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:g,style:x,dimensions:b}=e;g.transform&&(b&&(x.transform=g.transform),delete g.transform),b&&(a!==void 0||i!==void 0||x.transform)&&(x.transformOrigin=Tae(b,a!==void 0?a:.5,i!==void 0?i:.5)),t!==void 0&&(g.x=t),r!==void 0&&(g.y=r),s!==void 0&&(g.scale=s),o!==void 0&&Mae(g,o,l,c,!1)}const U3=e=>typeof e=="string"&&e.toLowerCase()==="svg",Lae={useVisualState:PB({scrapeMotionValuesFromProps:SB,createRenderState:AB,onMount:(e,t,{renderState:r,latestValues:s})=>{ws.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),ws.render(()=>{V3(r,s,U3(t.tagName),e.transformTemplate),NB(t,r)})}})},Dae={useVisualState:PB({scrapeMotionValuesFromProps:R3,createRenderState:$3})};function OB(e,t,r){for(const s in t)!co(t[s])&&!kB(s,r)&&(e[s]=t[s])}function Iae({transformTemplate:e},t){return P.useMemo(()=>{const r=$3();return z3(r,t,e),Object.assign({},r.vars,r.style)},[t])}function Rae(e,t){const r=e.style||{},s={};return OB(s,r,e),Object.assign(s,Iae(e,t)),s}function Fae(e,t){const r={},s=Rae(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=s,r}function $ae(e,t,r,s){const a=P.useMemo(()=>{const i=AB();return V3(i,t,U3(s),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};OB(i,e.style,e),a.style={...i,...a.style}}return a}function Bae(e=!1){return(r,s,a,{latestValues:i},o)=>{const c=(I3(r)?$ae:Fae)(s,i,o,r),d=nae(s,typeof r=="string",e),u=r!==P.Fragment?{...d,...c,ref:a}:{},{children:h}=s,g=P.useMemo(()=>co(h)?h.get():h,[h]);return P.createElement(r,{...u,children:g})}}function qae(e,t){return function(s,{forwardMotionProps:a}={forwardMotionProps:!1}){const o={...I3(s)?Lae:Dae,preloadedFeatures:e,useRender:Bae(a),createVisualElement:t,Component:s};return uae(o)}}function MB(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let s=0;s<r;s++)if(t[s]!==e[s])return!1;return!0}function Tj(e,t,r){const s=e.getProps();return F3(s,t,r!==void 0?r:s.custom,e)}const zae=T3(()=>window.ScrollTimeline!==void 0);class Vae{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,r){for(let s=0;s<this.animations.length;s++)this.animations[s][t]=r}attachTimeline(t,r){const s=this.animations.map(a=>{if(zae()&&a.attachTimeline)return a.attachTimeline(t);if(typeof r=="function")return r(a)});return()=>{s.forEach((a,i)=>{a&&a(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let r=0;r<this.animations.length;r++)t=Math.max(t,this.animations[r].duration);return t}runAll(t){this.animations.forEach(r=>r[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Uae extends Vae{then(t,r){return Promise.all(this.animations).then(t).catch(r)}}function H3(e,t){return e?e[t]||e.default||e:void 0}const KS=2e4;function LB(e){let t=0;const r=50;let s=e.next(t);for(;!s.done&&t<KS;)t+=r,s=e.next(t);return t>=KS?1/0:t}function W3(e){return typeof e=="function"}function cO(e,t){e.timeline=t,e.onfinish=null}const K3=e=>Array.isArray(e)&&typeof e[0]=="number",Hae={linearEasing:void 0};function Wae(e,t){const r=T3(e);return()=>{var s;return(s=Hae[t])!==null&&s!==void 0?s:r()}}const e1=Wae(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),DB=(e,t,r=10)=>{let s="";const a=Math.max(Math.round(t/r),2);for(let i=0;i<a;i++)s+=e(Px(0,a-1,i))+", ";return`linear(${s.substring(0,s.length-2)})`};function IB(e){return!!(typeof e=="function"&&e1()||!e||typeof e=="string"&&(e in GS||e1())||K3(e)||Array.isArray(e)&&e.every(IB))}const v0=([e,t,r,s])=>`cubic-bezier(${e}, ${t}, ${r}, ${s})`,GS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:v0([0,.65,.55,1]),circOut:v0([.55,0,1,.45]),backIn:v0([.31,.01,.66,-.59]),backOut:v0([.33,1.53,.69,.99])};function RB(e,t){if(e)return typeof e=="function"&&e1()?DB(e,t):K3(e)?v0(e):Array.isArray(e)?e.map(r=>RB(r,t)||GS.easeOut):GS[e]}const ld={x:!1,y:!1};function FB(){return ld.x||ld.y}function Kae(e,t,r){var s;if(e instanceof Element)return[e];if(typeof e=="string"){let a=document;const i=(s=void 0)!==null&&s!==void 0?s:a.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}function $B(e,t){const r=Kae(e),s=new AbortController,a={passive:!0,...t,signal:s.signal};return[r,a,()=>s.abort()]}function dO(e){return t=>{t.pointerType==="touch"||FB()||e(t)}}function Gae(e,t,r={}){const[s,a,i]=$B(e,r),o=dO(l=>{const{target:c}=l,d=t(l);if(typeof d!="function"||!c)return;const u=dO(h=>{d(h),c.removeEventListener("pointerleave",u)});c.addEventListener("pointerleave",u,a)});return s.forEach(l=>{l.addEventListener("pointerenter",o,a)}),i}const BB=(e,t)=>t?e===t?!0:BB(e,t.parentElement):!1,G3=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Zae=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Yae(e){return Zae.has(e.tagName)||e.tabIndex!==-1}const y0=new WeakSet;function uO(e){return t=>{t.key==="Enter"&&e(t)}}function F2(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Xae=(e,t)=>{const r=e.currentTarget;if(!r)return;const s=uO(()=>{if(y0.has(r))return;F2(r,"down");const a=uO(()=>{F2(r,"up")}),i=()=>F2(r,"cancel");r.addEventListener("keyup",a,t),r.addEventListener("blur",i,t)});r.addEventListener("keydown",s,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",s),t)};function hO(e){return G3(e)&&!FB()}function Qae(e,t,r={}){const[s,a,i]=$B(e,r),o=l=>{const c=l.currentTarget;if(!hO(l)||y0.has(c))return;y0.add(c);const d=t(l),u=(x,b)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",g),!(!hO(x)||!y0.has(c))&&(y0.delete(c),typeof d=="function"&&d(x,{success:b}))},h=x=>{u(x,r.useGlobalTarget||BB(c,x.target))},g=x=>{u(x,!1)};window.addEventListener("pointerup",h,a),window.addEventListener("pointercancel",g,a)};return s.forEach(l=>{!Yae(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(r.useGlobalTarget?window:l).addEventListener("pointerdown",o,a),l.addEventListener("focus",d=>Xae(d,a),a)}),i}function Jae(e){return e==="x"||e==="y"?ld[e]?null:(ld[e]=!0,()=>{ld[e]=!1}):ld.x||ld.y?null:(ld.x=ld.y=!0,()=>{ld.x=ld.y=!1})}let Lb;function eie(){Lb=void 0}const uu={now:()=>(Lb===void 0&&uu.set(Ii.isProcessing||Yse.useManualTiming?Ii.timestamp:performance.now()),Lb),set:e=>{Lb=e,queueMicrotask(eie)}};function Z3(e,t){e.indexOf(t)===-1&&e.push(t)}function Y3(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class X3{constructor(){this.subscriptions=[]}add(t){return Z3(this.subscriptions,t),()=>Y3(this.subscriptions,t)}notify(t,r,s){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,r,s);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(t,r,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function qB(e,t){return t?e*(1e3/t):0}const fO=30,tie=e=>!isNaN(parseFloat(e)),S0={current:void 0};class nie{constructor(t,r={}){this.version="11.16.4",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,a=!0)=>{const i=uu.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=uu.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=tie(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new X3);const s=this.events[t].add(r);return t==="change"?()=>{s(),ws.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,s){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return S0.current&&S0.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=uu.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>fO)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,fO);return qB(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Cx(e,t){return new nie(e,t)}function rie(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Cx(r))}function Q3(e,t){const r=Tj(e,t);let{transitionEnd:s={},transition:a={},...i}=r||{};i={...i,...s};for(const o in i){const l=vae(i[o]);rie(e,o,l)}}function sie(e){return!!(co(e)&&e.add)}function ZS(e,t){const r=e.getValue("willChange");if(sie(r))return r.add(t)}function zB(e){return e.props[yB]}const VB=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,aie=1e-7,iie=12;function oie(e,t,r,s,a){let i,o,l=0;do o=t+(r-t)/2,i=VB(o,s,a)-e,i>0?r=o:t=o;while(Math.abs(i)>aie&&++l<iie);return o}function Yv(e,t,r,s){if(e===t&&r===s)return Dl;const a=i=>oie(i,0,1,e,r);return i=>i===0||i===1?i:VB(a(i),t,s)}const UB=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,HB=e=>t=>1-e(1-t),WB=Yv(.33,1.53,.69,.99),J3=HB(WB),KB=UB(J3),GB=e=>(e*=2)<1?.5*J3(e):.5*(2-Math.pow(2,-10*(e-1))),eA=e=>1-Math.sin(Math.acos(e)),ZB=HB(eA),YB=UB(eA),XB=e=>/^0[^.\s]+$/u.test(e);function lie(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||XB(e):!0}const QB=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),cie=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function die(e){const t=cie.exec(e);if(!t)return[,];const[,r,s,a]=t;return[`--${r??s}`,a]}function JB(e,t,r=1){const[s,a]=die(e);if(!s)return;const i=window.getComputedStyle(t).getPropertyValue(s);if(i){const o=i.trim();return QB(o)?parseFloat(o):o}return q3(a)?JB(a,t,r+1):a}const uie=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),mO=e=>e===vg||e===kn,pO=(e,t)=>parseFloat(e.split(", ")[t]),xO=(e,t)=>(r,{transform:s})=>{if(s==="none"||!s)return 0;const a=s.match(/^matrix3d\((.+)\)$/u);if(a)return pO(a[1],t);{const i=s.match(/^matrix\((.+)\)$/u);return i?pO(i[1],e):0}},hie=new Set(["x","y","z"]),fie=Gv.filter(e=>!hie.has(e));function mie(e){const t=[];return fie.forEach(r=>{const s=e.getValue(r);s!==void 0&&(t.push([r,s.get()]),s.set(r.startsWith("scale")?1:0))}),t}const Tx={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:xO(4,13),y:xO(5,14)};Tx.translateX=Tx.x;Tx.translateY=Tx.y;const eq=e=>t=>t.test(e),pie={test:e=>e==="auto",parse:e=>e},tq=[vg,kn,du,tf,wae,jae,pie],gO=e=>tq.find(eq(e)),Mm=new Set;let YS=!1,XS=!1;function nq(){if(XS){const e=Array.from(Mm).filter(s=>s.needsMeasurement),t=new Set(e.map(s=>s.element)),r=new Map;t.forEach(s=>{const a=mie(s);a.length&&(r.set(s,a),s.render())}),e.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const a=r.get(s);a&&a.forEach(([i,o])=>{var l;(l=s.getValue(i))===null||l===void 0||l.set(o)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}XS=!1,YS=!1,Mm.forEach(e=>e.complete()),Mm.clear()}function rq(){Mm.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(XS=!0)})}function xie(){rq(),nq()}class tA{constructor(t,r,s,a,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=s,this.motionValue=a,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Mm.add(this),YS||(YS=!0,ws.read(rq),ws.resolveKeyframes(nq))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:s,motionValue:a}=this;for(let i=0;i<t.length;i++)if(t[i]===null)if(i===0){const o=a==null?void 0:a.get(),l=t[t.length-1];if(o!==void 0)t[0]=o;else if(s&&r){const c=s.readValue(r,l);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=l),a&&o===void 0&&a.set(t[0])}else t[i]=t[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Mm.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Mm.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const P0=e=>Math.round(e*1e5)/1e5,nA=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function gie(e){return e==null}const vie=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,rA=(e,t)=>r=>!!(typeof r=="string"&&vie.test(r)&&r.startsWith(e)||t&&!gie(r)&&Object.prototype.hasOwnProperty.call(r,t)),sq=(e,t,r)=>s=>{if(typeof s!="string")return s;const[a,i,o,l]=s.match(nA);return{[e]:parseFloat(a),[t]:parseFloat(i),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},yie=e=>bh(0,255,e),$2={...vg,transform:e=>Math.round(yie(e))},ym={test:rA("rgb","red"),parse:sq("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:s=1})=>"rgba("+$2.transform(e)+", "+$2.transform(t)+", "+$2.transform(r)+", "+P0(Y0.transform(s))+")"};function bie(e){let t="",r="",s="",a="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),s=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),s=e.substring(3,4),a=e.substring(4,5),t+=t,r+=r,s+=s,a+=a),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(s,16),alpha:a?parseInt(a,16)/255:1}}const QS={test:rA("#"),parse:bie,transform:ym.transform},Up={test:rA("hsl","hue"),parse:sq("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:s=1})=>"hsla("+Math.round(e)+", "+du.transform(P0(t))+", "+du.transform(P0(r))+", "+P0(Y0.transform(s))+")"},ro={test:e=>ym.test(e)||QS.test(e)||Up.test(e),parse:e=>ym.test(e)?ym.parse(e):Up.test(e)?Up.parse(e):QS.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?ym.transform(e):Up.transform(e)},jie=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function wie(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(nA))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(jie))===null||r===void 0?void 0:r.length)||0)>0}const aq="number",iq="color",_ie="var",Nie="var(",vO="${}",kie=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function X0(e){const t=e.toString(),r=[],s={color:[],number:[],var:[]},a=[];let i=0;const l=t.replace(kie,c=>(ro.test(c)?(s.color.push(i),a.push(iq),r.push(ro.parse(c))):c.startsWith(Nie)?(s.var.push(i),a.push(_ie),r.push(c)):(s.number.push(i),a.push(aq),r.push(parseFloat(c))),++i,vO)).split(vO);return{values:r,split:l,indexes:s,types:a}}function oq(e){return X0(e).values}function lq(e){const{split:t,types:r}=X0(e),s=t.length;return a=>{let i="";for(let o=0;o<s;o++)if(i+=t[o],a[o]!==void 0){const l=r[o];l===aq?i+=P0(a[o]):l===iq?i+=ro.transform(a[o]):i+=a[o]}return i}}const Sie=e=>typeof e=="number"?0:e;function Pie(e){const t=oq(e);return lq(e)(t.map(Sie))}const Cf={test:wie,parse:oq,createTransformer:lq,getAnimatableNone:Pie},Aie=new Set(["brightness","contrast","saturate","opacity"]);function Cie(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=r.match(nA)||[];if(!s)return e;const a=r.replace(s,"");let i=Aie.has(t)?1:0;return s!==r&&(i*=100),t+"("+i+a+")"}const Tie=/\b([a-z-]*)\(.*?\)/gu,JS={...Cf,getAnimatableNone:e=>{const t=e.match(Tie);return t?t.map(Cie).join(" "):e}},Eie={...B3,color:ro,backgroundColor:ro,outlineColor:ro,fill:ro,stroke:ro,borderColor:ro,borderTopColor:ro,borderRightColor:ro,borderBottomColor:ro,borderLeftColor:ro,filter:JS,WebkitFilter:JS},sA=e=>Eie[e];function cq(e,t){let r=sA(e);return r!==JS&&(r=Cf),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const Oie=new Set(["auto","none","0"]);function Mie(e,t,r){let s=0,a;for(;s<e.length&&!a;){const i=e[s];typeof i=="string"&&!Oie.has(i)&&X0(i).values.length&&(a=e[s]),s++}if(a&&r)for(const i of t)e[i]=cq(r,a)}class dq extends tA{constructor(t,r,s,a,i){super(t,r,s,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:s}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let d=t[c];if(typeof d=="string"&&(d=d.trim(),q3(d))){const u=JB(d,r.current);u!==void 0&&(t[c]=u),c===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!uie.has(s)||t.length!==2)return;const[a,i]=t,o=gO(a),l=gO(i);if(o!==l)if(mO(o)&&mO(l))for(let c=0;c<t.length;c++){const d=t[c];typeof d=="string"&&(t[c]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,s=[];for(let a=0;a<t.length;a++)lie(t[a])&&s.push(a);s.length&&Mie(t,s,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Tx[s](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const a=r[r.length-1];a!==void 0&&t.getValue(s,a).jump(a,!1)}measureEndState(){var t;const{element:r,name:s,unresolvedKeyframes:a}=this;if(!r||!r.current)return;const i=r.getValue(s);i&&i.jump(this.measuredOrigin,!1);const o=a.length-1,l=a[o];a[o]=Tx[s](r.measureViewportBox(),window.getComputedStyle(r.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([c,d])=>{r.getValue(c).set(d)}),this.resolveNoneKeyframes()}}const yO=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Cf.test(e)||e==="0")&&!e.startsWith("url("));function Lie(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function Die(e,t,r,s){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=yO(a,t),l=yO(i,t);return!o||!l?!1:Lie(e)||(r==="spring"||W3(r))&&s}const Iie=e=>e!==null;function Ej(e,{repeat:t,repeatType:r="loop"},s){const a=e.filter(Iie),i=t&&r!=="loop"&&t%2===1?0:a.length-1;return!i||s===void 0?a[i]:s}const Rie=40;class uq{constructor({autoplay:t=!0,delay:r=0,type:s="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=uu.now(),this.options={autoplay:t,delay:r,type:s,repeat:a,repeatDelay:i,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Rie?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&xie(),this._resolved}onKeyframesResolved(t,r){this.resolvedAt=uu.now(),this.hasAttemptedResolve=!0;const{name:s,type:a,velocity:i,delay:o,onComplete:l,onUpdate:c,isGenerator:d}=this.options;if(!d&&!Die(t,s,a,i))if(o)this.options.duration=0;else{c==null||c(Ej(t,this.options,r)),l==null||l(),this.resolveFinishedPromise();return}const u=this.initPlayback(t,r);u!==!1&&(this._resolved={keyframes:t,finalKeyframe:r,...u},this.onPostResolved())}onPostResolved(){}then(t,r){return this.currentFinishedPromise.then(t,r)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const zs=(e,t,r)=>e+(t-e)*r;function B2(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Fie({hue:e,saturation:t,lightness:r,alpha:s}){e/=360,t/=100,r/=100;let a=0,i=0,o=0;if(!t)a=i=o=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;a=B2(c,l,e+1/3),i=B2(c,l,e),o=B2(c,l,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:s}}function t1(e,t){return r=>r>0?t:e}const q2=(e,t,r)=>{const s=e*e,a=r*(t*t-s)+s;return a<0?0:Math.sqrt(a)},$ie=[QS,ym,Up],Bie=e=>$ie.find(t=>t.test(e));function bO(e){const t=Bie(e);if(!t)return!1;let r=t.parse(e);return t===Up&&(r=Fie(r)),r}const jO=(e,t)=>{const r=bO(e),s=bO(t);if(!r||!s)return t1(e,t);const a={...r};return i=>(a.red=q2(r.red,s.red,i),a.green=q2(r.green,s.green,i),a.blue=q2(r.blue,s.blue,i),a.alpha=zs(r.alpha,s.alpha,i),ym.transform(a))},qie=(e,t)=>r=>t(e(r)),Xv=(...e)=>e.reduce(qie),e4=new Set(["none","hidden"]);function zie(e,t){return e4.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function Vie(e,t){return r=>zs(e,t,r)}function aA(e){return typeof e=="number"?Vie:typeof e=="string"?q3(e)?t1:ro.test(e)?jO:Wie:Array.isArray(e)?hq:typeof e=="object"?ro.test(e)?jO:Uie:t1}function hq(e,t){const r=[...e],s=r.length,a=e.map((i,o)=>aA(i)(i,t[o]));return i=>{for(let o=0;o<s;o++)r[o]=a[o](i);return r}}function Uie(e,t){const r={...e,...t},s={};for(const a in r)e[a]!==void 0&&t[a]!==void 0&&(s[a]=aA(e[a])(e[a],t[a]));return a=>{for(const i in s)r[i]=s[i](a);return r}}function Hie(e,t){var r;const s=[],a={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const o=t.types[i],l=e.indexes[o][a[o]],c=(r=e.values[l])!==null&&r!==void 0?r:0;s[i]=c,a[o]++}return s}const Wie=(e,t)=>{const r=Cf.createTransformer(t),s=X0(e),a=X0(t);return s.indexes.var.length===a.indexes.var.length&&s.indexes.color.length===a.indexes.color.length&&s.indexes.number.length>=a.indexes.number.length?e4.has(e)&&!a.values.length||e4.has(t)&&!s.values.length?zie(e,t):Xv(hq(Hie(s,a),a.values),r):t1(e,t)};function fq(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?zs(e,t,r):aA(e)(e,t)}const Kie=5;function mq(e,t,r){const s=Math.max(t-Kie,0);return qB(r-e(s),t-s)}const Js={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},z2=.001;function Gie({duration:e=Js.duration,bounce:t=Js.bounce,velocity:r=Js.velocity,mass:s=Js.mass}){let a,i,o=1-t;o=bh(Js.minDamping,Js.maxDamping,o),e=bh(Js.minDuration,Js.maxDuration,dh(e)),o<1?(a=d=>{const u=d*o,h=u*e,g=u-r,x=t4(d,o),b=Math.exp(-h);return z2-g/x*b},i=d=>{const h=d*o*e,g=h*r+r,x=Math.pow(o,2)*Math.pow(d,2)*e,b=Math.exp(-h),y=t4(Math.pow(d,2),o);return(-a(d)+z2>0?-1:1)*((g-x)*b)/y}):(a=d=>{const u=Math.exp(-d*e),h=(d-r)*e+1;return-z2+u*h},i=d=>{const u=Math.exp(-d*e),h=(r-d)*(e*e);return u*h});const l=5/e,c=Yie(a,i,l);if(e=ch(e),isNaN(c))return{stiffness:Js.stiffness,damping:Js.damping,duration:e};{const d=Math.pow(c,2)*s;return{stiffness:d,damping:o*2*Math.sqrt(s*d),duration:e}}}const Zie=12;function Yie(e,t,r){let s=r;for(let a=1;a<Zie;a++)s=s-e(s)/t(s);return s}function t4(e,t){return e*Math.sqrt(1-t*t)}const Xie=["duration","bounce"],Qie=["stiffness","damping","mass"];function wO(e,t){return t.some(r=>e[r]!==void 0)}function Jie(e){let t={velocity:Js.velocity,stiffness:Js.stiffness,damping:Js.damping,mass:Js.mass,isResolvedFromDuration:!1,...e};if(!wO(e,Qie)&&wO(e,Xie))if(e.visualDuration){const r=e.visualDuration,s=2*Math.PI/(r*1.2),a=s*s,i=2*bh(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:Js.mass,stiffness:a,damping:i}}else{const r=Gie(e);t={...t,...r,mass:Js.mass},t.isResolvedFromDuration=!0}return t}function pq(e=Js.visualDuration,t=Js.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:a}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:d,mass:u,duration:h,velocity:g,isResolvedFromDuration:x}=Jie({...r,velocity:-dh(r.velocity||0)}),b=g||0,y=d/(2*Math.sqrt(c*u)),v=o-i,j=dh(Math.sqrt(c/u)),w=Math.abs(v)<5;s||(s=w?Js.restSpeed.granular:Js.restSpeed.default),a||(a=w?Js.restDelta.granular:Js.restDelta.default);let N;if(y<1){const C=t4(j,y);N=M=>{const I=Math.exp(-y*j*M);return o-I*((b+y*j*v)/C*Math.sin(C*M)+v*Math.cos(C*M))}}else if(y===1)N=C=>o-Math.exp(-j*C)*(v+(b+j*v)*C);else{const C=j*Math.sqrt(y*y-1);N=M=>{const I=Math.exp(-y*j*M),F=Math.min(C*M,300);return o-I*((b+y*j*v)*Math.sinh(F)+C*v*Math.cosh(F))/C}}const A={calculatedDuration:x&&h||null,next:C=>{const M=N(C);if(x)l.done=C>=h;else{let I=0;y<1&&(I=C===0?ch(b):mq(N,C,M));const F=Math.abs(I)<=s,U=Math.abs(o-M)<=a;l.done=F&&U}return l.value=l.done?o:M,l},toString:()=>{const C=Math.min(LB(A),KS),M=DB(I=>A.next(C*I).value,C,30);return C+"ms "+M}};return A}function _O({keyframes:e,velocity:t=0,power:r=.8,timeConstant:s=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}){const h=e[0],g={done:!1,value:h},x=F=>l!==void 0&&F<l||c!==void 0&&F>c,b=F=>l===void 0?c:c===void 0||Math.abs(l-F)<Math.abs(c-F)?l:c;let y=r*t;const v=h+y,j=o===void 0?v:o(v);j!==v&&(y=j-h);const w=F=>-y*Math.exp(-F/s),N=F=>j+w(F),A=F=>{const U=w(F),W=N(F);g.done=Math.abs(U)<=d,g.value=g.done?j:W};let C,M;const I=F=>{x(g.value)&&(C=F,M=pq({keyframes:[g.value,b(g.value)],velocity:mq(N,F,g.value),damping:a,stiffness:i,restDelta:d,restSpeed:u}))};return I(0),{calculatedDuration:null,next:F=>{let U=!1;return!M&&C===void 0&&(U=!0,A(F),I(F)),C!==void 0&&F>=C?M.next(F-C):(!U&&A(F),g)}}}const eoe=Yv(.42,0,1,1),toe=Yv(0,0,.58,1),xq=Yv(.42,0,.58,1),noe=e=>Array.isArray(e)&&typeof e[0]!="number",roe={linear:Dl,easeIn:eoe,easeInOut:xq,easeOut:toe,circIn:eA,circInOut:YB,circOut:ZB,backIn:J3,backInOut:KB,backOut:WB,anticipate:GB},NO=e=>{if(K3(e)){mB(e.length===4);const[t,r,s,a]=e;return Yv(t,r,s,a)}else if(typeof e=="string")return roe[e];return e};function soe(e,t,r){const s=[],a=r||fq,i=e.length-1;for(let o=0;o<i;o++){let l=a(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||Dl:t;l=Xv(c,l)}s.push(l)}return s}function gq(e,t,{clamp:r=!0,ease:s,mixer:a}={}){const i=e.length;if(mB(i===t.length),i===1)return()=>t[0];if(i===2&&e[0]===e[1])return()=>t[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=soe(t,s,a),l=o.length,c=d=>{let u=0;if(l>1)for(;u<e.length-2&&!(d<e[u+1]);u++);const h=Px(e[u],e[u+1],d);return o[u](h)};return r?d=>c(bh(e[0],e[i-1],d)):c}function aoe(e,t){const r=e[e.length-1];for(let s=1;s<=t;s++){const a=Px(0,t,s);e.push(zs(r,1,a))}}function ioe(e){const t=[0];return aoe(t,e.length-1),t}function ooe(e,t){return e.map(r=>r*t)}function loe(e,t){return e.map(()=>t||xq).splice(0,e.length-1)}function n1({duration:e=300,keyframes:t,times:r,ease:s="easeInOut"}){const a=noe(s)?s.map(NO):NO(s),i={done:!1,value:t[0]},o=ooe(r&&r.length===t.length?r:ioe(t),e),l=gq(o,t,{ease:Array.isArray(a)?a:loe(t,a)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}const coe=e=>{const t=({timestamp:r})=>e(r);return{start:()=>ws.update(t,!0),stop:()=>yh(t),now:()=>Ii.isProcessing?Ii.timestamp:uu.now()}},doe={decay:_O,inertia:_O,tween:n1,keyframes:n1,spring:pq},uoe=e=>e/100;class iA extends uq{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:r,motionValue:s,element:a,keyframes:i}=this.options,o=(a==null?void 0:a.KeyframeResolver)||tA,l=(c,d)=>this.onKeyframesResolved(c,d);this.resolver=new o(i,l,r,s,a),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:i,velocity:o=0}=this.options,l=W3(r)?r:doe[r]||n1;let c,d;l!==n1&&typeof t[0]!="number"&&(c=Xv(uoe,fq(t[0],t[1])),t=[0,100]);const u=l({...this.options,keyframes:t});i==="mirror"&&(d=l({...this.options,keyframes:[...t].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=LB(u));const{calculatedDuration:h}=u,g=h+a,x=g*(s+1)-a;return{generator:u,mirroredGenerator:d,mapPercentToKeyframes:c,calculatedDuration:h,resolvedDuration:g,totalDuration:x}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,r=!1){const{resolved:s}=this;if(!s){const{keyframes:F}=this.options;return{done:!0,value:F[F.length-1]}}const{finalKeyframe:a,generator:i,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:d,totalDuration:u,resolvedDuration:h}=s;if(this.startTime===null)return i.next(0);const{delay:g,repeat:x,repeatType:b,repeatDelay:y,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-u/this.speed,this.startTime)),r?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const j=this.currentTime-g*(this.speed>=0?1:-1),w=this.speed>=0?j<0:j>u;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let N=this.currentTime,A=i;if(x){const F=Math.min(this.currentTime,u)/h;let U=Math.floor(F),W=F%1;!W&&F>=1&&(W=1),W===1&&U--,U=Math.min(U,x+1),!!(U%2)&&(b==="reverse"?(W=1-W,y&&(W-=y/h)):b==="mirror"&&(A=o)),N=bh(0,1,W)*h}const C=w?{done:!1,value:c[0]}:A.next(N);l&&(C.value=l(C.value));let{done:M}=C;!w&&d!==null&&(M=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return I&&a!==void 0&&(C.value=Ej(c,this.options,a)),v&&v(C.value),I&&this.finish(),C}get duration(){const{resolved:t}=this;return t?dh(t.calculatedDuration):0}get time(){return dh(this.currentTime)}set time(t){t=ch(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=dh(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=coe,onPlay:r,startTime:s}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),r&&r();const a=this.driver.now();this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=a):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const hoe=new Set(["opacity","clipPath","filter","transform"]);function foe(e,t,r,{delay:s=0,duration:a=300,repeat:i=0,repeatType:o="loop",ease:l="easeInOut",times:c}={}){const d={[t]:r};c&&(d.offset=c);const u=RB(l,a);return Array.isArray(u)&&(d.easing=u),e.animate(d,{delay:s,duration:a,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const moe=T3(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),r1=10,poe=2e4;function xoe(e){return W3(e.type)||e.type==="spring"||!IB(e.ease)}function goe(e,t){const r=new iA({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:e[0]};const a=[];let i=0;for(;!s.done&&i<poe;)s=r.sample(i),a.push(s.value),i+=r1;return{times:void 0,keyframes:a,duration:i-r1,ease:"linear"}}const vq={anticipate:GB,backInOut:KB,circInOut:YB};function voe(e){return e in vq}class kO extends uq{constructor(t){super(t);const{name:r,motionValue:s,element:a,keyframes:i}=this.options;this.resolver=new dq(i,(o,l)=>this.onKeyframesResolved(o,l),r,s,a),this.resolver.scheduleResolve()}initPlayback(t,r){var s;let{duration:a=300,times:i,ease:o,type:l,motionValue:c,name:d,startTime:u}=this.options;if(!(!((s=c.owner)===null||s===void 0)&&s.current))return!1;if(typeof o=="string"&&e1()&&voe(o)&&(o=vq[o]),xoe(this.options)){const{onComplete:g,onUpdate:x,motionValue:b,element:y,...v}=this.options,j=goe(t,v);t=j.keyframes,t.length===1&&(t[1]=t[0]),a=j.duration,i=j.times,o=j.ease,l="keyframes"}const h=foe(c.owner.current,d,t,{...this.options,duration:a,times:i,ease:o});return h.startTime=u??this.calcStartTime(),this.pendingTimeline?(cO(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:g}=this.options;c.set(Ej(t,this.options,r)),g&&g(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:a,times:i,type:l,ease:o,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:r}=t;return dh(r)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:r}=t;return dh(r.currentTime||0)}set time(t){const{resolved:r}=this;if(!r)return;const{animation:s}=r;s.currentTime=ch(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:r}=t;return r.playbackRate}set speed(t){const{resolved:r}=this;if(!r)return;const{animation:s}=r;s.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:r}=t;return r.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:r}=t;return r.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:r}=this;if(!r)return Dl;const{animation:s}=r;cO(s,t)}return Dl}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:r,keyframes:s,duration:a,type:i,ease:o,times:l}=t;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:u,onComplete:h,element:g,...x}=this.options,b=new iA({...x,keyframes:s,duration:a,type:i,ease:o,times:l,isGenerator:!0}),y=ch(this.time);d.setWithVelocity(b.sample(y-r1).value,b.sample(y).value,r1)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:r,name:s,repeatDelay:a,repeatType:i,damping:o,type:l}=t;return moe()&&s&&hoe.has(s)&&r&&r.owner&&r.owner.current instanceof HTMLElement&&!r.owner.getProps().onUpdate&&!a&&i!=="mirror"&&o!==0&&l!=="inertia"}}const yoe={type:"spring",stiffness:500,damping:25,restSpeed:10},boe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),joe={type:"keyframes",duration:.8},woe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},_oe=(e,{keyframes:t})=>t.length>2?joe:ap.has(e)?e.startsWith("scale")?boe(t[1]):yoe:woe;function Noe({when:e,delay:t,delayChildren:r,staggerChildren:s,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d,...u}){return!!Object.keys(u).length}const oA=(e,t,r,s={},a,i)=>o=>{const l=H3(s,e)||{},c=l.delay||s.delay||0;let{elapsed:d=0}=s;d=d-ch(c);let u={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:g=>{t.set(g),l.onUpdate&&l.onUpdate(g)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:i?void 0:a};Noe(l)||(u={...u,..._oe(e,u)}),u.duration&&(u.duration=ch(u.duration)),u.repeatDelay&&(u.repeatDelay=ch(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),h&&!i&&t.get()!==void 0){const g=Ej(u.keyframes,l);if(g!==void 0)return ws.update(()=>{u.onUpdate(g),u.onComplete()}),new Uae([])}return!i&&kO.supports(u)?new kO(u):new iA(u)};function koe({protectedKeys:e,needsAnimating:t},r){const s=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,s}function yq(e,t,{delay:r=0,transitionOverride:s,type:a}={}){var i;let{transition:o=e.getDefaultTransition(),transitionEnd:l,...c}=t;s&&(o=s);const d=[],u=a&&e.animationState&&e.animationState.getState()[a];for(const h in c){const g=e.getValue(h,(i=e.latestValues[h])!==null&&i!==void 0?i:null),x=c[h];if(x===void 0||u&&koe(u,h))continue;const b={delay:r,...H3(o||{},h)};let y=!1;if(window.MotionHandoffAnimation){const j=zB(e);if(j){const w=window.MotionHandoffAnimation(j,h,ws);w!==null&&(b.startTime=w,y=!0)}}ZS(e,h),g.start(oA(h,g,x,e.shouldReduceMotion&&ap.has(h)?{type:!1}:b,e,y));const v=g.animation;v&&d.push(v)}return l&&Promise.all(d).then(()=>{ws.update(()=>{l&&Q3(e,l)})}),d}function n4(e,t,r={}){var s;const a=Tj(e,t,r.type==="exit"?(s=e.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(i=r.transitionOverride);const o=a?()=>Promise.all(yq(e,a,r)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:g}=i;return Soe(e,t,u+d,h,g,r)}:()=>Promise.resolve(),{when:c}=i;if(c){const[d,u]=c==="beforeChildren"?[o,l]:[l,o];return d().then(()=>u())}else return Promise.all([o(),l(r.delay)])}function Soe(e,t,r=0,s=0,a=1,i){const o=[],l=(e.variantChildren.size-1)*s,c=a===1?(d=0)=>d*s:(d=0)=>l-d*s;return Array.from(e.variantChildren).sort(Poe).forEach((d,u)=>{d.notify("AnimationStart",t),o.push(n4(d,t,{...i,delay:r+c(u)}).then(()=>d.notify("AnimationComplete",t)))}),Promise.all(o)}function Poe(e,t){return e.sortNodePosition(t)}function bq(e,t,r={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const a=t.map(i=>n4(e,i,r));s=Promise.all(a)}else if(typeof t=="string")s=n4(e,t,r);else{const a=typeof t=="function"?Tj(e,t,r.custom):t;s=Promise.all(yq(e,a,r))}return s.then(()=>{e.notify("AnimationComplete",t)})}const Aoe=M3.length;function jq(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?jq(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<Aoe;r++){const s=M3[r],a=e.props[s];(Z0(a)||a===!1)&&(t[s]=a)}return t}const Coe=[...O3].reverse(),Toe=O3.length;function Eoe(e){return t=>Promise.all(t.map(({animation:r,options:s})=>bq(e,r,s)))}function Ooe(e){let t=Eoe(e),r=SO(),s=!0;const a=c=>(d,u)=>{var h;const g=Tj(e,u,c==="exit"?(h=e.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(g){const{transition:x,transitionEnd:b,...y}=g;d={...d,...y,...b}}return d};function i(c){t=c(e)}function o(c){const{props:d}=e,u=jq(e.parent)||{},h=[],g=new Set;let x={},b=1/0;for(let v=0;v<Toe;v++){const j=Coe[v],w=r[j],N=d[j]!==void 0?d[j]:u[j],A=Z0(N),C=j===c?w.isActive:null;C===!1&&(b=v);let M=N===u[j]&&N!==d[j]&&A;if(M&&s&&e.manuallyAnimateOnMount&&(M=!1),w.protectedKeys={...x},!w.isActive&&C===null||!N&&!w.prevProp||Aj(N)||typeof N=="boolean")continue;const I=Moe(w.prevProp,N);let F=I||j===c&&w.isActive&&!M&&A||v>b&&A,U=!1;const W=Array.isArray(N)?N:[N];let D=W.reduce(a(j),{});C===!1&&(D={});const{prevResolvedValues:R={}}=w,z={...R,...D},Z=Q=>{F=!0,g.has(Q)&&(U=!0,g.delete(Q)),w.needsAnimating[Q]=!0;const H=e.getValue(Q);H&&(H.liveStyle=!1)};for(const Q in z){const H=D[Q],ne=R[Q];if(x.hasOwnProperty(Q))continue;let ue=!1;WS(H)&&WS(ne)?ue=!MB(H,ne):ue=H!==ne,ue?H!=null?Z(Q):g.add(Q):H!==void 0&&g.has(Q)?Z(Q):w.protectedKeys[Q]=!0}w.prevProp=N,w.prevResolvedValues=D,w.isActive&&(x={...x,...D}),s&&e.blockInitialAnimation&&(F=!1),F&&(!(M&&I)||U)&&h.push(...W.map(Q=>({animation:Q,options:{type:j}})))}if(g.size){const v={};g.forEach(j=>{const w=e.getBaseTarget(j),N=e.getValue(j);N&&(N.liveStyle=!0),v[j]=w??null}),h.push({animation:v})}let y=!!h.length;return s&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(y=!1),s=!1,y?t(h):Promise.resolve()}function l(c,d){var u;if(r[c].isActive===d)return Promise.resolve();(u=e.variantChildren)===null||u===void 0||u.forEach(g=>{var x;return(x=g.animationState)===null||x===void 0?void 0:x.setActive(c,d)}),r[c].isActive=d;const h=o(c);for(const g in r)r[g].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>r,reset:()=>{r=SO(),s=!0}}}function Moe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!MB(t,e):!1}function am(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function SO(){return{animate:am(!0),whileInView:am(),whileHover:am(),whileTap:am(),whileDrag:am(),whileFocus:am(),exit:am()}}class If{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Loe extends If{constructor(t){super(t),t.animationState||(t.animationState=Ooe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Aj(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let Doe=0;class Ioe extends If{constructor(){super(...arguments),this.id=Doe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const a=this.node.animationState.setActive("exit",!t);r&&!t&&a.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const Roe={animation:{Feature:Loe},exit:{Feature:Ioe}};function Q0(e,t,r,s={passive:!0}){return e.addEventListener(t,r,s),()=>e.removeEventListener(t,r)}function Qv(e){return{point:{x:e.pageX,y:e.pageY}}}const Foe=e=>t=>G3(t)&&e(t,Qv(t));function A0(e,t,r,s){return Q0(e,t,Foe(r),s)}const PO=(e,t)=>Math.abs(e-t);function $oe(e,t){const r=PO(e.x,t.x),s=PO(e.y,t.y);return Math.sqrt(r**2+s**2)}class wq{constructor(t,r,{transformPagePoint:s,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=U2(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,x=$oe(h.offset,{x:0,y:0})>=3;if(!g&&!x)return;const{point:b}=h,{timestamp:y}=Ii;this.history.push({...b,timestamp:y});const{onStart:v,onMove:j}=this.handlers;g||(v&&v(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),j&&j(this.lastMoveEvent,h)},this.handlePointerMove=(h,g)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=V2(g,this.transformPagePoint),ws.update(this.updatePoint,!0)},this.handlePointerUp=(h,g)=>{this.end();const{onEnd:x,onSessionEnd:b,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=U2(h.type==="pointercancel"?this.lastMoveEventInfo:V2(g,this.transformPagePoint),this.history);this.startEvent&&x&&x(h,v),b&&b(h,v)},!G3(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=s,this.contextWindow=a||window;const o=Qv(t),l=V2(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=Ii;this.history=[{...c,timestamp:d}];const{onSessionStart:u}=r;u&&u(t,U2(l,this.history)),this.removeListeners=Xv(A0(this.contextWindow,"pointermove",this.handlePointerMove),A0(this.contextWindow,"pointerup",this.handlePointerUp),A0(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),yh(this.updatePoint)}}function V2(e,t){return t?{point:t(e.point)}:e}function AO(e,t){return{x:e.x-t.x,y:e.y-t.y}}function U2({point:e},t){return{point:e,delta:AO(e,_q(t)),offset:AO(e,Boe(t)),velocity:qoe(t,.1)}}function Boe(e){return e[0]}function _q(e){return e[e.length-1]}function qoe(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,s=null;const a=_q(e);for(;r>=0&&(s=e[r],!(a.timestamp-s.timestamp>ch(t)));)r--;if(!s)return{x:0,y:0};const i=dh(a.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-s.x)/i,y:(a.y-s.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const Nq=1e-4,zoe=1-Nq,Voe=1+Nq,kq=.01,Uoe=0-kq,Hoe=0+kq;function $l(e){return e.max-e.min}function Woe(e,t,r){return Math.abs(e-t)<=r}function CO(e,t,r,s=.5){e.origin=s,e.originPoint=zs(t.min,t.max,e.origin),e.scale=$l(r)/$l(t),e.translate=zs(r.min,r.max,e.origin)-e.originPoint,(e.scale>=zoe&&e.scale<=Voe||isNaN(e.scale))&&(e.scale=1),(e.translate>=Uoe&&e.translate<=Hoe||isNaN(e.translate))&&(e.translate=0)}function C0(e,t,r,s){CO(e.x,t.x,r.x,s?s.originX:void 0),CO(e.y,t.y,r.y,s?s.originY:void 0)}function TO(e,t,r){e.min=r.min+t.min,e.max=e.min+$l(t)}function Koe(e,t,r){TO(e.x,t.x,r.x),TO(e.y,t.y,r.y)}function EO(e,t,r){e.min=t.min-r.min,e.max=e.min+$l(t)}function T0(e,t,r){EO(e.x,t.x,r.x),EO(e.y,t.y,r.y)}function Goe(e,{min:t,max:r},s){return t!==void 0&&e<t?e=s?zs(t,e,s.min):Math.max(e,t):r!==void 0&&e>r&&(e=s?zs(r,e,s.max):Math.min(e,r)),e}function OO(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function Zoe(e,{top:t,left:r,bottom:s,right:a}){return{x:OO(e.x,r,a),y:OO(e.y,t,s)}}function MO(e,t){let r=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,s]=[s,r]),{min:r,max:s}}function Yoe(e,t){return{x:MO(e.x,t.x),y:MO(e.y,t.y)}}function Xoe(e,t){let r=.5;const s=$l(e),a=$l(t);return a>s?r=Px(t.min,t.max-s,e.min):s>a&&(r=Px(e.min,e.max-a,t.min)),bh(0,1,r)}function Qoe(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const r4=.35;function Joe(e=r4){return e===!1?e=0:e===!0&&(e=r4),{x:LO(e,"left","right"),y:LO(e,"top","bottom")}}function LO(e,t,r){return{min:DO(e,t),max:DO(e,r)}}function DO(e,t){return typeof e=="number"?e:e[t]||0}const IO=()=>({translate:0,scale:1,origin:0,originPoint:0}),Hp=()=>({x:IO(),y:IO()}),RO=()=>({min:0,max:0}),pa=()=>({x:RO(),y:RO()});function gc(e){return[e("x"),e("y")]}function Sq({top:e,left:t,right:r,bottom:s}){return{x:{min:t,max:r},y:{min:e,max:s}}}function ele({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function tle(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:s.y,right:s.x}}function H2(e){return e===void 0||e===1}function s4({scale:e,scaleX:t,scaleY:r}){return!H2(e)||!H2(t)||!H2(r)}function cm(e){return s4(e)||Pq(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Pq(e){return FO(e.x)||FO(e.y)}function FO(e){return e&&e!=="0%"}function s1(e,t,r){const s=e-r,a=t*s;return r+a}function $O(e,t,r,s,a){return a!==void 0&&(e=s1(e,a,s)),s1(e,r,s)+t}function a4(e,t=0,r=1,s,a){e.min=$O(e.min,t,r,s,a),e.max=$O(e.max,t,r,s,a)}function Aq(e,{x:t,y:r}){a4(e.x,t.translate,t.scale,t.originPoint),a4(e.y,r.translate,r.scale,r.originPoint)}const BO=.999999999999,qO=1.0000000000001;function nle(e,t,r,s=!1){const a=r.length;if(!a)return;t.x=t.y=1;let i,o;for(let l=0;l<a;l++){i=r[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Kp(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Aq(e,o)),s&&cm(i.latestValues)&&Kp(e,i.latestValues))}t.x<qO&&t.x>BO&&(t.x=1),t.y<qO&&t.y>BO&&(t.y=1)}function Wp(e,t){e.min=e.min+t,e.max=e.max+t}function zO(e,t,r,s,a=.5){const i=zs(e.min,e.max,a);a4(e,t,r,i,s)}function Kp(e,t){zO(e.x,t.x,t.scaleX,t.scale,t.originX),zO(e.y,t.y,t.scaleY,t.scale,t.originY)}function Cq(e,t){return Sq(tle(e.getBoundingClientRect(),t))}function rle(e,t,r){const s=Cq(e,r),{scroll:a}=t;return a&&(Wp(s.x,a.offset.x),Wp(s.y,a.offset.y)),s}const Tq=({current:e})=>e?e.ownerDocument.defaultView:null,sle=new WeakMap;class ale{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=pa(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Qv(u).point)},i=(u,h)=>{const{drag:g,dragPropagation:x,onDragStart:b}=this.getProps();if(g&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Jae(g),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gc(v=>{let j=this.getAxisMotionValue(v).get()||0;if(du.test(j)){const{projection:w}=this.visualElement;if(w&&w.layout){const N=w.layout.layoutBox[v];N&&(j=$l(N)*(parseFloat(j)/100))}}this.originPoint[v]=j}),b&&ws.postRender(()=>b(u,h)),ZS(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:g,dragDirectionLock:x,onDirectionLock:b,onDrag:y}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:v}=h;if(x&&this.currentDirection===null){this.currentDirection=ile(v),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",h.point,v),this.updateAxis("y",h.point,v),this.visualElement.render(),y&&y(u,h)},l=(u,h)=>this.stop(u,h),c=()=>gc(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new wq(t,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:Tq(this.visualElement)})}stop(t,r){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&ws.postRender(()=>i(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,s){const{drag:a}=this.getProps();if(!s||!ob(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(o=Goe(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:s}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;r&&Vp(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&a?this.constraints=Zoe(a.layoutBox,r):this.constraints=!1,this.elastic=Joe(s),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&gc(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Qoe(a.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Vp(t))return!1;const s=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=rle(s,a.root,this.visualElement.getTransformPagePoint());let o=Yoe(a.layout.layoutBox,i);if(r){const l=r(ele(o));this.hasMutatedConstraints=!!l,l&&(o=Sq(l))}return o}startAnimation(t){const{drag:r,dragMomentum:s,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=gc(u=>{if(!ob(u,r,this.currentDirection))return;let h=c&&c[u]||{};o&&(h={min:0,max:0});const g=a?200:1e6,x=a?40:1e7,b={type:"inertia",velocity:s?t[u]:0,bounceStiffness:g,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,b)});return Promise.all(d).then(l)}startAxisValueAnimation(t,r){const s=this.getAxisMotionValue(t);return ZS(this.visualElement,t),s.start(oA(t,s,0,r,this.visualElement,!1))}stopAnimation(){gc(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){gc(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),a=s[r];return a||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){gc(r=>{const{drag:s}=this.getProps();if(!ob(r,s,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(r);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[r];i.set(t[r]-zs(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:s}=this.visualElement;if(!Vp(r)||!s||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};gc(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();a[o]=Xoe({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),gc(o=>{if(!ob(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(zs(c,d,a[o]))})}addListeners(){if(!this.visualElement.current)return;sle.set(this.visualElement,this);const t=this.visualElement.current,r=A0(t,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();Vp(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),ws.read(s);const o=Q0(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(gc(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=c[u].translate,h.set(h.get()+c[u].translate))}),this.visualElement.render())}));return()=>{o(),r(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:s=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=r4,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:s,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function ob(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function ile(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class ole extends If{constructor(t){super(t),this.removeGroupControls=Dl,this.removeListeners=Dl,this.controls=new ale(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Dl}unmount(){this.removeGroupControls(),this.removeListeners()}}const VO=e=>(t,r)=>{e&&ws.postRender(()=>e(t,r))};class lle extends If{constructor(){super(...arguments),this.removePointerDownListener=Dl}onPointerDown(t){this.session=new wq(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Tq(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:s,onPanEnd:a}=this.node.getProps();return{onSessionStart:VO(t),onStart:VO(r),onMove:s,onEnd:(i,o)=>{delete this.session,a&&ws.postRender(()=>a(i,o))}}}mount(){this.removePointerDownListener=A0(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function cle(){const e=P.useContext(Nj);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=e,a=P.useId();P.useEffect(()=>s(a),[]);const i=P.useCallback(()=>r&&r(a),[a,r]);return!t&&r?[!1,i]:[!0]}const Db={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function UO(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const n0={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(kn.test(e))e=parseFloat(e);else return e;const r=UO(e,t.target.x),s=UO(e,t.target.y);return`${r}% ${s}%`}},dle={correct:(e,{treeScale:t,projectionDelta:r})=>{const s=e,a=Cf.parse(e);if(a.length>5)return s;const i=Cf.createTransformer(e),o=typeof a[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;a[0+o]/=l,a[1+o]/=c;const d=zs(l,c,.5);return typeof a[2+o]=="number"&&(a[2+o]/=d),typeof a[3+o]=="number"&&(a[3+o]/=d),i(a)}};class ule extends P.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:s,layoutId:a}=this.props,{projection:i}=t;xae(hle),i&&(r.group&&r.group.add(i),s&&s.register&&a&&s.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Db.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:s,drag:a,isPresent:i}=this.props,o=s.projection;return o&&(o.isPresent=i,a||t.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||ws.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),D3.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:s}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),s&&s.deregister&&s.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Eq(e){const[t,r]=cle(),s=P.useContext(C3);return n.jsx(ule,{...e,layoutGroup:s,switchLayoutGroup:P.useContext(bB),isPresent:t,safeToRemove:r})}const hle={borderRadius:{...n0,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:n0,borderTopRightRadius:n0,borderBottomLeftRadius:n0,borderBottomRightRadius:n0,boxShadow:dle};function fle(e,t,r){const s=co(e)?e:Cx(e);return s.start(oA("",s,t,r)),s.animation}function mle(e){return e instanceof SVGElement&&e.tagName!=="svg"}const ple=(e,t)=>e.depth-t.depth;class xle{constructor(){this.children=[],this.isDirty=!1}add(t){Z3(this.children,t),this.isDirty=!0}remove(t){Y3(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(ple),this.isDirty=!1,this.children.forEach(t)}}function gle(e,t){const r=uu.now(),s=({timestamp:a})=>{const i=a-r;i>=t&&(yh(s),e(i-t))};return ws.read(s,!0),()=>yh(s)}const Oq=["TopLeft","TopRight","BottomLeft","BottomRight"],vle=Oq.length,HO=e=>typeof e=="string"?parseFloat(e):e,WO=e=>typeof e=="number"||kn.test(e);function yle(e,t,r,s,a,i){a?(e.opacity=zs(0,r.opacity!==void 0?r.opacity:1,ble(s)),e.opacityExit=zs(t.opacity!==void 0?t.opacity:1,0,jle(s))):i&&(e.opacity=zs(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,s));for(let o=0;o<vle;o++){const l=`border${Oq[o]}Radius`;let c=KO(t,l),d=KO(r,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||WO(c)===WO(d)?(e[l]=Math.max(zs(HO(c),HO(d),s),0),(du.test(d)||du.test(c))&&(e[l]+="%")):e[l]=d}(t.rotate||r.rotate)&&(e.rotate=zs(t.rotate||0,r.rotate||0,s))}function KO(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const ble=Mq(0,.5,ZB),jle=Mq(.5,.95,Dl);function Mq(e,t,r){return s=>s<e?0:s>t?1:r(Px(e,t,s))}function GO(e,t){e.min=t.min,e.max=t.max}function fc(e,t){GO(e.x,t.x),GO(e.y,t.y)}function ZO(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function YO(e,t,r,s,a){return e-=t,e=s1(e,1/r,s),a!==void 0&&(e=s1(e,1/a,s)),e}function wle(e,t=0,r=1,s=.5,a,i=e,o=e){if(du.test(t)&&(t=parseFloat(t),t=zs(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=zs(i.min,i.max,s);e===i&&(l-=t),e.min=YO(e.min,t,r,l,a),e.max=YO(e.max,t,r,l,a)}function XO(e,t,[r,s,a],i,o){wle(e,t[r],t[s],t[a],t.scale,i,o)}const _le=["x","scaleX","originX"],Nle=["y","scaleY","originY"];function QO(e,t,r,s){XO(e.x,t,_le,r?r.x:void 0,s?s.x:void 0),XO(e.y,t,Nle,r?r.y:void 0,s?s.y:void 0)}function JO(e){return e.translate===0&&e.scale===1}function Lq(e){return JO(e.x)&&JO(e.y)}function e6(e,t){return e.min===t.min&&e.max===t.max}function kle(e,t){return e6(e.x,t.x)&&e6(e.y,t.y)}function t6(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Dq(e,t){return t6(e.x,t.x)&&t6(e.y,t.y)}function n6(e){return $l(e.x)/$l(e.y)}function r6(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Sle{constructor(){this.members=[]}add(t){Z3(this.members,t),t.scheduleRender()}remove(t){if(Y3(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(a=>t===a);if(r===0)return!1;let s;for(let a=r;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(t,r){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,r&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:s}=t;r.onExitComplete&&r.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Ple(e,t,r){let s="";const a=e.x.translate/t.x,i=e.y.translate/t.y,o=(r==null?void 0:r.z)||0;if((a||i||o)&&(s=`translate3d(${a}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:d,rotate:u,rotateX:h,rotateY:g,skewX:x,skewY:b}=r;d&&(s=`perspective(${d}px) ${s}`),u&&(s+=`rotate(${u}deg) `),h&&(s+=`rotateX(${h}deg) `),g&&(s+=`rotateY(${g}deg) `),x&&(s+=`skewX(${x}deg) `),b&&(s+=`skewY(${b}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(s+=`scale(${l}, ${c})`),s||"none"}const dm={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},b0=typeof window<"u"&&window.MotionDebug!==void 0,W2=["","X","Y","Z"],Ale={visibility:"hidden"},s6=1e3;let Cle=0;function K2(e,t,r,s){const{latestValues:a}=t;a[e]&&(r[e]=a[e],t.setStaticValue(e,0),s&&(s[e]=0))}function Iq(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=zB(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:a,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",ws,!(a||i))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&Iq(s)}function Rq({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:s,resetTransform:a}){return class{constructor(o={},l=t==null?void 0:t()){this.id=Cle++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,b0&&(dm.totalNodes=dm.resolvedTargetDeltas=dm.recalculatedProjection=0),this.nodes.forEach(Ole),this.nodes.forEach(Rle),this.nodes.forEach(Fle),this.nodes.forEach(Mle),b0&&window.MotionDebug.record(dm)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new xle)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new X3),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=mle(o),this.instance=o;const{layoutId:c,layout:d,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),e){let h;const g=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=gle(g,250),Db.hasAnimatedSinceResize&&(Db.hasAnimatedSinceResize=!1,this.nodes.forEach(i6))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&u&&(c||d)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:g,hasRelativeTargetChanged:x,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||Vle,{onLayoutAnimationStart:v,onLayoutAnimationComplete:j}=u.getProps(),w=!this.targetLayout||!Dq(this.targetLayout,b)||x,N=!g&&x;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||N||g&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,N);const A={...H3(y,"layout"),onPlay:v,onComplete:j};(u.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A)}else g||i6(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,yh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach($le),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Iq(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(a6);return}this.isUpdating||this.nodes.forEach(Dle),this.isUpdating=!1,this.nodes.forEach(Ile),this.nodes.forEach(Tle),this.nodes.forEach(Ele),this.clearAllSnapshots();const l=uu.now();Ii.delta=bh(0,1e3/60,l-Ii.timestamp),Ii.timestamp=l,Ii.isProcessing=!0,R2.update.process(Ii),R2.preRender.process(Ii),R2.render.process(Ii),Ii.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,D3.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Lle),this.sharedNodes.forEach(Ble)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ws.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ws.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=pa(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const c=s(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Lq(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;o&&(l||cm(this.latestValues)||u)&&(a(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),Ule(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return pa();const c=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(Hle))){const{scroll:u}=this.root;u&&(Wp(c.x,u.offset.x),Wp(c.y,u.offset.y))}return c}removeElementScroll(o){var l;const c=pa();if(fc(c,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let d=0;d<this.path.length;d++){const u=this.path[d],{scroll:h,options:g}=u;u!==this.root&&h&&g.layoutScroll&&(h.wasRoot&&fc(c,o),Wp(c.x,h.offset.x),Wp(c.y,h.offset.y))}return c}applyTransform(o,l=!1){const c=pa();fc(c,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Kp(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),cm(u.latestValues)&&Kp(c,u.latestValues)}return cm(this.latestValues)&&Kp(c,this.latestValues),c}removeTransform(o){const l=pa();fc(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!cm(d.latestValues))continue;s4(d.latestValues)&&d.updateSnapshot();const u=pa(),h=d.measurePageBox();fc(u,h),QO(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return cm(this.latestValues)&&QO(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ii.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:g}=this.options;if(!(!this.layout||!(h||g))){if(this.resolvedRelativeTargetAt=Ii.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pa(),this.relativeTargetOrigin=pa(),T0(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),fc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=pa(),this.targetWithTransforms=pa()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Koe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):fc(this.target,this.layout.layoutBox),Aq(this.target,this.targetDelta)):fc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pa(),this.relativeTargetOrigin=pa(),T0(this.relativeTargetOrigin,this.target,x.target),fc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}b0&&dm.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||s4(this.parent.latestValues)||Pq(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Ii.timestamp&&(d=!1),d)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;fc(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,x=this.treeScale.y;nle(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=pa());const{target:b}=l;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ZO(this.prevProjectionDelta.x,this.projectionDelta.x),ZO(this.prevProjectionDelta.y,this.projectionDelta.y)),C0(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==x||!r6(this.projectionDelta.x,this.prevProjectionDelta.x)||!r6(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),b0&&dm.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Hp(),this.projectionDelta=Hp(),this.projectionDeltaWithTransform=Hp()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},h=Hp();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const g=pa(),x=c?c.source:void 0,b=this.layout?this.layout.source:void 0,y=x!==b,v=this.getStack(),j=!v||v.members.length<=1,w=!!(y&&!j&&this.options.crossfade===!0&&!this.path.some(zle));this.animationProgress=0;let N;this.mixTargetDelta=A=>{const C=A/1e3;o6(h.x,o.x,C),o6(h.y,o.y,C),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(T0(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),qle(this.relativeTarget,this.relativeTargetOrigin,g,C),N&&kle(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=pa()),fc(N,this.relativeTarget)),y&&(this.animationValues=u,yle(u,d,this.latestValues,C,w,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(yh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ws.update(()=>{Db.hasAnimatedSinceResize=!0,this.currentAnimation=fle(0,s6,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(s6),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:u}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&Fq(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||pa();const h=$l(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const g=$l(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+g}fc(l,c),Kp(l,u),C0(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Sle),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&K2("z",o,d,this.animationValues);for(let u=0;u<W2.length;u++)K2(`rotate${W2[u]}`,o,d,this.animationValues),K2(`skew${W2[u]}`,o,d,this.animationValues);o.render();for(const u in d)o.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Ale;const d={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Mb(o==null?void 0:o.pointerEvents)||"",d.transform=u?u(this.latestValues,""):"none",d;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=Mb(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!cm(this.latestValues)&&(y.transform=u?u({},""):"none",this.hasProjected=!1),y}const g=h.animationValues||h.latestValues;this.applyTransformsToTarget(),d.transform=Ple(this.projectionDeltaWithTransform,this.treeScale,g),u&&(d.transform=u(g,d.transform));const{x,y:b}=this.projectionDelta;d.transformOrigin=`${x.origin*100}% ${b.origin*100}% 0`,h.animationValues?d.opacity=h===this?(c=(l=g.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:d.opacity=h===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const y in Jb){if(g[y]===void 0)continue;const{correct:v,applyTo:j}=Jb[y],w=d.transform==="none"?g[y]:v(g[y],h);if(j){const N=j.length;for(let A=0;A<N;A++)d[j[A]]=w}else d[y]=w}return this.options.layoutId&&(d.pointerEvents=h===this?Mb(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(a6),this.root.sharedNodes.clear()}}}function Tle(e){e.updateLayout()}function Ele(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:a}=e.layout,{animationType:i}=e.options,o=r.source!==e.layout.source;i==="size"?gc(h=>{const g=o?r.measuredBox[h]:r.layoutBox[h],x=$l(g);g.min=s[h].min,g.max=g.min+x}):Fq(i,r.layoutBox,s)&&gc(h=>{const g=o?r.measuredBox[h]:r.layoutBox[h],x=$l(s[h]);g.max=g.min+x,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+x)});const l=Hp();C0(l,s,r.layoutBox);const c=Hp();o?C0(c,e.applyTransform(a,!0),r.measuredBox):C0(c,s,r.layoutBox);const d=!Lq(l);let u=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:g,layout:x}=h;if(g&&x){const b=pa();T0(b,r.layoutBox,g.layoutBox);const y=pa();T0(y,s,x.layoutBox),Dq(b,y)||(u=!0),h.options.layoutRoot&&(e.relativeTarget=y,e.relativeTargetOrigin=b,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:r,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:u})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function Ole(e){b0&&dm.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Mle(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Lle(e){e.clearSnapshot()}function a6(e){e.clearMeasurements()}function Dle(e){e.isLayoutDirty=!1}function Ile(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function i6(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Rle(e){e.resolveTargetDelta()}function Fle(e){e.calcProjection()}function $le(e){e.resetSkewAndRotation()}function Ble(e){e.removeLeadSnapshot()}function o6(e,t,r){e.translate=zs(t.translate,0,r),e.scale=zs(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function l6(e,t,r,s){e.min=zs(t.min,r.min,s),e.max=zs(t.max,r.max,s)}function qle(e,t,r,s){l6(e.x,t.x,r.x,s),l6(e.y,t.y,r.y,s)}function zle(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Vle={duration:.45,ease:[.4,0,.1,1]},c6=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),d6=c6("applewebkit/")&&!c6("chrome/")?Math.round:Dl;function u6(e){e.min=d6(e.min),e.max=d6(e.max)}function Ule(e){u6(e.x),u6(e.y)}function Fq(e,t,r){return e==="position"||e==="preserve-aspect"&&!Woe(n6(t),n6(r),.2)}function Hle(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const Wle=Rq({attachResizeListener:(e,t)=>Q0(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),G2={current:void 0},$q=Rq({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!G2.current){const e=new Wle({});e.mount(window),e.setOptions({layoutScroll:!0}),G2.current=e}return G2.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Kle={pan:{Feature:lle},drag:{Feature:ole,ProjectionNode:$q,MeasureLayout:Eq}};function h6(e,t,r){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",r==="Start");const a="onHover"+r,i=s[a];i&&ws.postRender(()=>i(t,Qv(t)))}class Gle extends If{mount(){const{current:t}=this.node;t&&(this.unmount=Gae(t,r=>(h6(this.node,r,"Start"),s=>h6(this.node,s,"End"))))}unmount(){}}class Zle extends If{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Xv(Q0(this.node.current,"focus",()=>this.onFocus()),Q0(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function f6(e,t,r){const{props:s}=e;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap",r==="Start");const a="onTap"+(r==="End"?"":r),i=s[a];i&&ws.postRender(()=>i(t,Qv(t)))}class Yle extends If{mount(){const{current:t}=this.node;t&&(this.unmount=Qae(t,r=>(f6(this.node,r,"Start"),(s,{success:a})=>f6(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const i4=new WeakMap,Z2=new WeakMap,Xle=e=>{const t=i4.get(e.target);t&&t(e)},Qle=e=>{e.forEach(Xle)};function Jle({root:e,...t}){const r=e||document;Z2.has(r)||Z2.set(r,{});const s=Z2.get(r),a=JSON.stringify(t);return s[a]||(s[a]=new IntersectionObserver(Qle,{root:e,...t})),s[a]}function ece(e,t,r){const s=Jle(t);return i4.set(e,r),s.observe(e),()=>{i4.delete(e),s.unobserve(e)}}const tce={some:0,all:1};class nce extends If{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:s,amount:a="some",once:i}=t,o={root:r?r.current:void 0,rootMargin:s,threshold:typeof a=="number"?a:tce[a]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),g=d?u:h;g&&g(c)};return ece(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(rce(t,r))&&this.startObserver()}unmount(){}}function rce({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const sce={inView:{Feature:nce},tap:{Feature:Yle},focus:{Feature:Zle},hover:{Feature:Gle}},ace={layout:{ProjectionNode:$q,MeasureLayout:Eq}},o4={current:null},Bq={current:!1};function ice(){if(Bq.current=!0,!!E3)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>o4.current=e.matches;e.addListener(t),t()}else o4.current=!1}function oce(e,t,r){for(const s in t){const a=t[s],i=r[s];if(co(a))e.addValue(s,a);else if(co(i))e.addValue(s,Cx(a,{owner:e}));else if(i!==a)if(e.hasValue(s)){const o=e.getValue(s);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=e.getStaticValue(s);e.addValue(s,Cx(o!==void 0?o:a,{owner:e}))}}for(const s in r)t[s]===void 0&&e.removeValue(s);return t}const m6=new WeakMap,lce=[...tq,ro,Cf],cce=e=>lce.find(eq(e)),p6=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class dce{scrapeMotionValuesFromProps(t,r,s){return{}}constructor({parent:t,props:r,presenceContext:s,reducedMotionConfig:a,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=tA,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=uu.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,ws.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=d,this.parent=t,this.props=r,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=Cj(r),this.isVariantNode=vB(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const g in h){const x=h[g];c[g]!==void 0&&co(x)&&x.set(c[g],!1)}}mount(t){this.current=t,m6.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),Bq.current||ice(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:o4.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){m6.delete(this.current),this.projection&&this.projection.unmount(),yh(this.notifyUpdate),yh(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const s=ap.has(t),a=r.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&ws.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{a(),i(),o&&o(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ax){const r=Ax[t];if(!r)continue;const{isEnabled:s,Feature:a}=r;if(!this.features[t]&&a&&s(this.props)&&(this.features[t]=new a(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):pa()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let s=0;s<p6.length;s++){const a=p6[s];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,o=t[i];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=oce(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const s=this.values.get(t);r!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&r!==void 0&&(s=Cx(r===null?void 0:r,{owner:this}),this.addValue(t,s)),s}readValue(t,r){var s;let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(s=this.getBaseTargetFromProps(this.props,t))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(QB(a)||XB(a))?a=parseFloat(a):!cce(a)&&Cf.test(r)&&(a=cq(t,r)),this.setBaseTarget(t,co(a)?a.get():a)),co(a)?a.get():a}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:s}=this.props;let a;if(typeof s=="string"||typeof s=="object"){const o=F3(this.props,s,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);o&&(a=o[t])}if(s&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!co(i)?i:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new X3),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class qq extends dce{constructor(){super(...arguments),this.KeyframeResolver=dq}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:s}){delete r[t],delete s[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;co(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function uce(e){return window.getComputedStyle(e)}class hce extends qq{constructor(){super(...arguments),this.type="html",this.renderInstance=wB}readValueFromInstance(t,r){if(ap.has(r)){const s=sA(r);return s&&s.default||0}else{const s=uce(t),a=(EB(r)?s.getPropertyValue(r):s[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:r}){return Cq(t,r)}build(t,r,s){z3(t,r,s.transformTemplate)}scrapeMotionValuesFromProps(t,r,s){return R3(t,r,s)}}class fce extends qq{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=pa}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(ap.has(r)){const s=sA(r);return s&&s.default||0}return r=_B.has(r)?r:L3(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,s){return SB(t,r,s)}build(t,r,s){V3(t,r,this.isSVGTag,s.transformTemplate)}renderInstance(t,r,s,a){NB(t,r,s,a)}mount(t){this.isSVGTag=U3(t.tagName),super.mount(t)}}const mce=(e,t)=>I3(e)?new fce(t):new hce(t,{allowProjection:e!==P.Fragment}),pce=qae({...Roe,...sce,...Kle,...ace},mce),tt=rae(pce);function zq(e){const t=gg(()=>Cx(e)),{isStatic:r}=P.useContext(kj);if(r){const[,s]=P.useState(e);P.useEffect(()=>t.on("change",s),[])}return t}function Vq(e,t){const r=zq(t()),s=()=>r.set(t());return s(),Sj(()=>{const a=()=>ws.preRender(s,!1,!0),i=e.map(o=>o.on("change",a));return()=>{i.forEach(o=>o()),yh(s)}}),r}const xce=e=>e&&typeof e=="object"&&e.mix,gce=e=>xce(e)?e.mix:void 0;function vce(...e){const t=!Array.isArray(e[0]),r=t?0:-1,s=e[0+r],a=e[1+r],i=e[2+r],o=e[3+r],l=gq(a,i,{mixer:gce(i[0]),...o});return t?l(s):l}function yce(e){S0.current=[],e();const t=Vq(S0.current,e);return S0.current=void 0,t}function x6(e,t,r,s){if(typeof e=="function")return yce(e);const a=typeof t=="function"?t:vce(t,r,s);return Array.isArray(e)?g6(e,a):g6([e],([i])=>a(i))}function g6(e,t){const r=gg(()=>[]);return Vq(e,()=>{r.length=0;const s=e.length;for(let a=0;a<s;a++)r[a]=e[a].get();return t(r)})}function bce(e){e.values.forEach(t=>t.stop())}function l4(e,t){[...t].reverse().forEach(s=>{const a=e.getVariant(s);a&&Q3(e,a),e.variantChildren&&e.variantChildren.forEach(i=>{l4(i,t)})})}function jce(e,t){if(Array.isArray(t))return l4(e,t);if(typeof t=="string")return l4(e,[t]);Q3(e,t)}function wce(){const e=new Set,t={subscribe(r){return e.add(r),()=>void e.delete(r)},start(r,s){const a=[];return e.forEach(i=>{a.push(bq(i,r,{transitionOverride:s}))}),Promise.all(a)},set(r){return e.forEach(s=>{jce(s,r)})},stop(){e.forEach(r=>{bce(r)})},mount(){return()=>{t.stop()}}};return t}function _ce(){const e=gg(wce);return Sj(e.mount,[]),e}const Nce=_ce;function kce(){var j;const e=Mf(),[t,r]=P.useState(!1),[s,a]=P.useState(!1),[i,o]=P.useState(null),[l,c]=P.useState(null),[d,u]=P.useState(!1),[h,g]=P.useState({registration_number:"",gps_device_id:"",make:"",model:"",year:"",category:"personbil",vehicle_type:"personbil",fuel_type:"bensin",fuel_cards:[],is_pool_vehicle:!1,assigned_driver:"",current_mileage:"",next_service_date:"",next_service_mileage:"",next_inspection_date:"",tire_change_date:"",insurance_document_url:"",lease_document_url:"",manual_url:"",status:"aktiv",image_url:"",notes:""});P.useEffect(()=>{(async()=>{try{if(await oe.auth.isAuthenticated()){const A=await oe.auth.me();c(A)}}catch(N){console.error("Auth check failed:",N)}finally{u(!0)}})()},[]);const{data:x=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list(),enabled:!!l});if(!d)return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Ot,{className:"w-8 h-8 text-slate-400 animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Laddar..."})]})});if(!l)return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white flex items-center justify-center",children:n.jsx(ce,{className:"max-w-md mx-4",children:n.jsxs(he,{className:"p-6 text-center",children:[n.jsx("p",{className:"text-slate-900 mb-4",children:"Du mste vara inloggad fr att lgga till fordon"}),n.jsx(ye,{onClick:()=>oe.auth.redirectToLogin(),children:"Logga in"})]})})});const b=async w=>{const N=w.target.files[0];if(N){a(!0);try{const{file_url:A}=await oe.integrations.Core.UploadFile({file:N});o(A);const C=await oe.integrations.Core.InvokeLLM({prompt:`Analysera denna bild av fordonsinformation och extrahera fljande uppgifter om fordonet:
        - Registreringsnummer
        - Mrke (t.ex. Volvo, Tesla)
        - Modell
        - rsmodell (endast ret som nummer)
        - Fordonstyp (vlj en av: personbil, ltt lastbil, lastbil, skpbil, annat)
        - Brnsletyp (vlj en av: bensin, diesel, el, hybrid, plugin-hybrid, annat)
        
        Om ngon uppgift inte finns synlig i bilden, anvnd null fr det fltet.
        Svara endast med strukturerad data enligt schemat.`,file_urls:[A],response_json_schema:{type:"object",properties:{registration_number:{type:["string","null"]},make:{type:["string","null"]},model:{type:["string","null"]},year:{type:["number","null"]},vehicle_type:{type:["string","null"]},fuel_type:{type:["string","null"]}}}});g(M=>({...M,...Object.fromEntries(Object.entries(C).filter(([I,F])=>F!==null)),image_url:A}))}catch(A){console.error("Error analyzing image:",A),alert("Kunde inte analysera bilden. Du kan fortfarande fylla i uppgifterna manuellt.")}a(!1)}},y=async w=>{w.preventDefault(),r(!0);try{const N={...h,year:h.year?Number(h.year):void 0,current_mileage:h.current_mileage?Number(h.current_mileage):void 0,next_service_mileage:h.next_service_mileage?Number(h.next_service_mileage):void 0,next_service_date:h.next_service_date||void 0,next_inspection_date:h.next_inspection_date||void 0,tire_change_date:h.tire_change_date||void 0};Object.keys(N).forEach(A=>{(N[A]===""||N[A]===void 0)&&delete N[A]}),await oe.entities.Vehicle.create(N),e(Pn("Vehicles"))}catch(N){console.error("Error creating vehicle:",N),alert("Ett fel uppstod nr fordonet skulle sparas.")}r(!1)},v=()=>{o(null),g(w=>({...w,image_url:""}))};return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pb-24",children:n.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-6",children:[n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6",children:[n.jsxs(ye,{variant:"ghost",onClick:()=>e(Pn("Vehicles")),className:"mb-4 -ml-2",children:[n.jsx(xu,{className:"w-4 h-4 mr-2"}),"Tillbaka"]}),n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Lgg till fordon"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Fyll i fordonsuppgifter eller ladda upp en bild"})]}),n.jsxs("form",{onSubmit:y,className:"space-y-6",children:[n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:n.jsx(ce,{className:"border-0 shadow-sm overflow-hidden",children:n.jsxs(he,{className:"p-6",children:[n.jsx(ve,{className:"text-sm font-medium text-slate-700 mb-3 block",children:"Ladda upp bild med fordonsuppgifter"}),n.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Ladda upp en skrmdump frn bilpriser.se eller liknande s analyserar AI bilden och fyller i uppgifterna automatiskt"}),i?n.jsxs("div",{className:"relative rounded-2xl overflow-hidden",children:[n.jsx("img",{src:i,alt:"Fordonsuppgifter",className:"w-full h-48 object-cover"}),n.jsx(ye,{type:"button",variant:"ghost",size:"icon",onClick:v,className:"absolute top-2 right-2 h-8 w-8 rounded-full bg-white/90 hover:bg-white shadow-md",children:n.jsx(Ra,{className:"h-4 w-4"})}),n.jsxs("div",{className:"absolute bottom-2 left-2 flex items-center gap-1.5 px-3 py-1.5 bg-emerald-500/90 backdrop-blur-sm rounded-full",children:[n.jsx(yi,{className:"w-3.5 h-3.5 text-white"}),n.jsx("span",{className:"text-xs font-medium text-white",children:"Analyserad"})]})]}):n.jsxs("label",{className:"relative flex flex-col items-center justify-center h-48 border-2 border-dashed border-slate-200 rounded-2xl cursor-pointer hover:border-slate-300 hover:bg-slate-50 transition-all",children:[n.jsx("input",{type:"file",accept:"image/*",onChange:b,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:s}),s?n.jsxs("div",{className:"flex flex-col items-center gap-3",children:[n.jsx(Ot,{className:"w-8 h-8 text-slate-400 animate-spin"}),n.jsx("p",{className:"text-sm text-slate-600 font-medium",children:"Analyserar bild..."}),n.jsx("p",{className:"text-xs text-slate-400",children:"AI extraherar fordonsuppgifter"})]}):n.jsxs("div",{className:"flex flex-col items-center gap-3",children:[n.jsx("div",{className:"h-12 w-12 rounded-xl bg-slate-100 flex items-center justify-center",children:n.jsx(lu,{className:"w-6 h-6 text-slate-400"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Klicka fr att ladda upp"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"PNG, JPG upp till 10MB"})]}),n.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-indigo-50 rounded-full",children:[n.jsx(yi,{className:"w-3.5 h-3.5 text-indigo-600"}),n.jsx("span",{className:"text-xs font-medium text-indigo-700",children:"AI-analys"})]})]})]})]})})}),n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-6 space-y-4",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:"Grunduppgifter"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"registration_number",children:"Registreringsnummer *"}),n.jsx(De,{id:"registration_number",value:h.registration_number,onChange:w=>g(N=>({...N,registration_number:w.target.value.toUpperCase()})),placeholder:"ABC123",className:"h-11",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"gps_device_id",children:"GPS Device ID"}),n.jsx(De,{id:"gps_device_id",value:h.gps_device_id,onChange:w=>g(N=>({...N,gps_device_id:w.target.value})),placeholder:"GPS Device ID",className:"h-11"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"make",children:"Mrke *"}),n.jsx(De,{id:"make",value:h.make,onChange:w=>g(N=>({...N,make:w.target.value})),placeholder:"Volvo",className:"h-11",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"model",children:"Modell *"}),n.jsx(De,{id:"model",value:h.model,onChange:w=>g(N=>({...N,model:w.target.value})),placeholder:"V60",className:"h-11",required:!0})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"year",children:"rsmodell"}),n.jsx(De,{id:"year",type:"number",value:h.year,onChange:w=>g(N=>({...N,year:w.target.value})),placeholder:"2023",className:"h-11"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"status",children:"Status"}),n.jsxs(Nt,{value:h.status,onValueChange:w=>g(N=>({...N,status:w})),children:[n.jsx(jt,{className:"h-11",children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"aktiv",children:"Aktiv"}),n.jsx(Ne,{value:"service",children:"Service"}),n.jsx(Ne,{value:"skadad",children:"Skadad"}),n.jsx(Ne,{value:"avstlld",children:"Avstlld"})]})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"category",children:"Kategori"}),n.jsxs(Nt,{value:h.category,onValueChange:w=>g(N=>({...N,category:w})),children:[n.jsx(jt,{className:"h-11",children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"personbil",children:"Personbil"}),n.jsx(Ne,{value:"ltt lastbil",children:"Ltt lastbil"}),n.jsx(Ne,{value:"lastbil",children:"Lastbil"}),n.jsx(Ne,{value:"skpbil",children:"Skpbil"}),n.jsx(Ne,{value:"specialfordon",children:"Specialfordon"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"vehicle_type",children:"Fordonstyp"}),n.jsxs(Nt,{value:h.vehicle_type,onValueChange:w=>g(N=>({...N,vehicle_type:w})),children:[n.jsx(jt,{className:"h-11",children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"personbil",children:"Personbil"}),n.jsx(Ne,{value:"ltt lastbil",children:"Ltt lastbil"}),n.jsx(Ne,{value:"lastbil",children:"Lastbil"}),n.jsx(Ne,{value:"skpbil",children:"Skpbil"}),n.jsx(Ne,{value:"annat",children:"Annat"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"fuel_type",children:"Brnsletyp"}),n.jsxs(Nt,{value:h.fuel_type,onValueChange:w=>g(N=>({...N,fuel_type:w})),children:[n.jsx(jt,{className:"h-11",children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"bensin",children:"Bensin"}),n.jsx(Ne,{value:"diesel",children:"Diesel"}),n.jsx(Ne,{value:"el",children:"El"}),n.jsx(Ne,{value:"hybrid",children:"Hybrid"}),n.jsx(Ne,{value:"plugin-hybrid",children:"Plugin-hybrid"}),n.jsx(Ne,{value:"annat",children:"Annat"})]})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"assigned_driver",children:"Frare"}),n.jsxs(Nt,{value:h.assigned_driver,onValueChange:w=>g(N=>({...N,assigned_driver:w})),children:[n.jsx(jt,{className:"h-11",children:n.jsx(kt,{placeholder:"Vlj frare"})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:null,children:"Ingen frare"}),x.map(w=>n.jsx(Ne,{value:w.user_email,children:w.user_email},w.id))]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"current_mileage",children:"Nuvarande mtarstllning (km)"}),n.jsx(De,{id:"current_mileage",type:"number",value:h.current_mileage,onChange:w=>g(N=>({...N,current_mileage:w.target.value})),placeholder:"0",className:"h-11"})]})]})})}),n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-6 space-y-4",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:"Service & Underhll"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"next_service_date",children:"Nsta service (datum)"}),n.jsx(De,{id:"next_service_date",type:"date",value:h.next_service_date||"",onChange:w=>g(N=>({...N,next_service_date:w.target.value||""})),className:"h-11"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"next_service_mileage",children:"Nsta service (km)"}),n.jsx(De,{id:"next_service_mileage",type:"number",value:h.next_service_mileage,onChange:w=>g(N=>({...N,next_service_mileage:w.target.value})),placeholder:"0",className:"h-11"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"next_inspection_date",children:"Nsta besiktning"}),n.jsx(De,{id:"next_inspection_date",type:"date",value:h.next_inspection_date||"",onChange:w=>g(N=>({...N,next_inspection_date:w.target.value||""})),className:"h-11"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"tire_change_date",children:"Dckbyte"}),n.jsx(De,{id:"tire_change_date",type:"date",value:h.tire_change_date||"",onChange:w=>g(N=>({...N,tire_change_date:w.target.value||""})),className:"h-11"})]})]})]})})}),n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-6 space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:"Tankkort"}),n.jsx(ye,{type:"button",variant:"outline",size:"sm",onClick:()=>g(w=>({...w,fuel_cards:[...w.fuel_cards||[],{provider:"",card_number:"",pin_code:""}]})),children:"Lgg till kort"})]}),((j=h.fuel_cards)==null?void 0:j.length)>0?n.jsx("div",{className:"space-y-3",children:h.fuel_cards.map((w,N)=>n.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["Kort ",N+1]}),n.jsx(ye,{type:"button",variant:"ghost",size:"sm",onClick:()=>g(A=>({...A,fuel_cards:A.fuel_cards.filter((C,M)=>M!==N)})),className:"h-7 text-rose-600 hover:text-rose-700",children:n.jsx(Ra,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(ve,{className:"text-xs",children:"Leverantr"}),n.jsx(De,{value:w.provider,onChange:A=>{const C=[...h.fuel_cards];C[N].provider=A.target.value,g(M=>({...M,fuel_cards:C}))},placeholder:"Circle K",className:"h-9"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(ve,{className:"text-xs",children:"Kortnummer"}),n.jsx(De,{value:w.card_number,onChange:A=>{const C=[...h.fuel_cards];C[N].card_number=A.target.value,g(M=>({...M,fuel_cards:C}))},placeholder:"123456",className:"h-9"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(ve,{className:"text-xs",children:"PIN/Kod"}),n.jsx(De,{value:w.pin_code,onChange:A=>{const C=[...h.fuel_cards];C[N].pin_code=A.target.value,g(M=>({...M,fuel_cards:C}))},placeholder:"1234",className:"h-9",type:"password"})]})]})]},N))}):n.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"Inga tankkort tillagda"})]})})}),n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-6 space-y-4",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:"Anteckningar"}),n.jsx("div",{className:"space-y-2",children:n.jsx(Zn,{id:"notes",value:h.notes,onChange:w=>g(N=>({...N,notes:w.target.value})),placeholder:"vriga anteckningar om fordonet...",className:"min-h-[100px] resize-none"})})]})})}),n.jsxs(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"flex gap-3",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:()=>e(Pn("Vehicles")),className:"flex-1 h-12 rounded-2xl",children:"Avbryt"}),n.jsx(ye,{type:"submit",disabled:t||!h.registration_number||!h.make||!h.model,className:"flex-1 h-12 rounded-2xl shadow-md hover:shadow-lg transition-all",children:t?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"w-4 h-4 mr-2 animate-spin"}),"Sparar..."]}):"Spara fordon"})]})]})]})})}const Sce=ig("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function it({className:e,variant:t,...r}){return n.jsx("div",{className:Yt(Sce({variant:t}),e),...r})}var Y2="rovingFocusGroup.onEntryFocus",Pce={bubbles:!1,cancelable:!0},Jv="RovingFocusGroup",[c4,Uq,Ace]=p3(Jv),[Cce,Oj]=ho(Jv,[Ace]),[Tce,Ece]=Cce(Jv),Hq=P.forwardRef((e,t)=>n.jsx(c4.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(c4.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(Oce,{...e,ref:t})})}));Hq.displayName=Jv;var Oce=P.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:s,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=e,g=P.useRef(null),x=Vn(t,g),b=fg(i),[y,v]=bu({prop:o,defaultProp:l??null,onChange:c,caller:Jv}),[j,w]=P.useState(!1),N=io(d),A=Uq(r),C=P.useRef(!1),[M,I]=P.useState(0);return P.useEffect(()=>{const F=g.current;if(F)return F.addEventListener(Y2,N),()=>F.removeEventListener(Y2,N)},[N]),n.jsx(Tce,{scope:r,orientation:s,dir:b,loop:a,currentTabStopId:y,onItemFocus:P.useCallback(F=>v(F),[v]),onItemShiftTab:P.useCallback(()=>w(!0),[]),onFocusableItemAdd:P.useCallback(()=>I(F=>F+1),[]),onFocusableItemRemove:P.useCallback(()=>I(F=>F-1),[]),children:n.jsx(cn.div,{tabIndex:j||M===0?-1:0,"data-orientation":s,...h,ref:x,style:{outline:"none",...e.style},onMouseDown:fn(e.onMouseDown,()=>{C.current=!0}),onFocus:fn(e.onFocus,F=>{const U=!C.current;if(F.target===F.currentTarget&&U&&!j){const W=new CustomEvent(Y2,Pce);if(F.currentTarget.dispatchEvent(W),!W.defaultPrevented){const D=A().filter(J=>J.focusable),R=D.find(J=>J.active),z=D.find(J=>J.id===y),se=[R,z,...D].filter(Boolean).map(J=>J.ref.current);Gq(se,u)}}C.current=!1}),onBlur:fn(e.onBlur,()=>w(!1))})})}),Wq="RovingFocusGroupItem",Kq=P.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:s=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=lh(),d=i||c,u=Ece(Wq,r),h=u.currentTabStopId===d,g=Uq(r),{onFocusableItemAdd:x,onFocusableItemRemove:b,currentTabStopId:y}=u;return P.useEffect(()=>{if(s)return x(),()=>b()},[s,x,b]),n.jsx(c4.ItemSlot,{scope:r,id:d,focusable:s,active:a,children:n.jsx(cn.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...l,ref:t,onMouseDown:fn(e.onMouseDown,v=>{s?u.onItemFocus(d):v.preventDefault()}),onFocus:fn(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:fn(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const j=Dce(v,u.orientation,u.dir);if(j!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let N=g().filter(A=>A.focusable).map(A=>A.ref.current);if(j==="last")N.reverse();else if(j==="prev"||j==="next"){j==="prev"&&N.reverse();const A=N.indexOf(v.currentTarget);N=u.loop?Ice(N,A+1):N.slice(A+1)}setTimeout(()=>Gq(N))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:y!=null}):o})})});Kq.displayName=Wq;var Mce={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Lce(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Dce(e,t,r){const s=Lce(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return Mce[s]}function Gq(e,t=!1){const r=document.activeElement;for(const s of e)if(s===r||(s.focus({preventScroll:t}),document.activeElement!==r))return}function Ice(e,t){return e.map((r,s)=>e[(t+s)%e.length])}var Zq=Hq,Yq=Kq;function Rce(e,t){return P.useReducer((r,s)=>t[r][s]??r,e)}var Sc=e=>{const{present:t,children:r}=e,s=Fce(t),a=typeof r=="function"?r({present:s.isPresent}):P.Children.only(r),i=Vn(s.ref,$ce(a));return typeof r=="function"||s.isPresent?P.cloneElement(a,{ref:i}):null};Sc.displayName="Presence";function Fce(e){const[t,r]=P.useState(),s=P.useRef(null),a=P.useRef(e),i=P.useRef("none"),o=e?"mounted":"unmounted",[l,c]=Rce(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return P.useEffect(()=>{const d=lb(s.current);i.current=l==="mounted"?d:"none"},[l]),wa(()=>{const d=s.current,u=a.current;if(u!==e){const g=i.current,x=lb(d);e?c("MOUNT"):x==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&g!==x?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),wa(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,h=x=>{const y=lb(s.current).includes(CSS.escape(x.animationName));if(x.target===t&&y&&(c("ANIMATION_END"),!a.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},g=x=>{x.target===t&&(i.current=lb(s.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:P.useCallback(d=>{s.current=d?getComputedStyle(d):null,r(d)},[])}}function lb(e){return(e==null?void 0:e.animationName)||"none"}function $ce(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Mj="Tabs",[Bce]=ho(Mj,[Oj]),Xq=Oj(),[qce,lA]=Bce(Mj),Qq=P.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=fg(l),[h,g]=bu({prop:s,onChange:a,defaultProp:i??"",caller:Mj});return n.jsx(qce,{scope:r,baseId:lh(),value:h,onValueChange:g,orientation:o,dir:u,activationMode:c,children:n.jsx(cn.div,{dir:u,"data-orientation":o,...d,ref:t})})});Qq.displayName=Mj;var Jq="TabsList",ez=P.forwardRef((e,t)=>{const{__scopeTabs:r,loop:s=!0,...a}=e,i=lA(Jq,r),o=Xq(r);return n.jsx(Zq,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:s,children:n.jsx(cn.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});ez.displayName=Jq;var tz="TabsTrigger",nz=P.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,disabled:a=!1,...i}=e,o=lA(tz,r),l=Xq(r),c=az(o.baseId,s),d=iz(o.baseId,s),u=s===o.value;return n.jsx(Yq,{asChild:!0,...l,focusable:!a,active:u,children:n.jsx(cn.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:fn(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(s):h.preventDefault()}),onKeyDown:fn(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(s)}),onFocus:fn(e.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!a&&h&&o.onValueChange(s)})})})});nz.displayName=tz;var rz="TabsContent",sz=P.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,forceMount:a,children:i,...o}=e,l=lA(rz,r),c=az(l.baseId,s),d=iz(l.baseId,s),u=s===l.value,h=P.useRef(u);return P.useEffect(()=>{const g=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(g)},[]),n.jsx(Sc,{present:a||u,children:({present:g})=>n.jsx(cn.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!g,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:g&&i})})});sz.displayName=rz;function az(e,t){return`${e}-trigger-${t}`}function iz(e,t){return`${e}-content-${t}`}var zce=Qq,oz=ez,lz=nz,cz=sz;const Ls=zce,As=P.forwardRef(({className:e,...t},r)=>n.jsx(oz,{ref:r,className:Yt("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));As.displayName=oz.displayName;const gt=P.forwardRef(({className:e,...t},r)=>n.jsx(lz,{ref:r,className:Yt("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));gt.displayName=lz.displayName;const Dt=P.forwardRef(({className:e,...t},r)=>n.jsx(cz,{ref:r,className:Yt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Dt.displayName=cz.displayName;var Lj="Switch",[Vce]=ho(Lj),[Uce,Hce]=Vce(Lj),dz=P.forwardRef((e,t)=>{const{__scopeSwitch:r,name:s,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=e,[g,x]=P.useState(null),b=Vn(t,N=>x(N)),y=P.useRef(!1),v=g?u||!!g.closest("form"):!0,[j,w]=bu({prop:a,defaultProp:i??!1,onChange:d,caller:Lj});return n.jsxs(Uce,{scope:r,checked:j,disabled:l,children:[n.jsx(cn.button,{type:"button",role:"switch","aria-checked":j,"aria-required":o,"data-state":mz(j),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:b,onClick:fn(e.onClick,N=>{w(A=>!A),v&&(y.current=N.isPropagationStopped(),y.current||N.stopPropagation())})}),v&&n.jsx(fz,{control:g,bubbles:!y.current,name:s,value:c,checked:j,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});dz.displayName=Lj;var uz="SwitchThumb",hz=P.forwardRef((e,t)=>{const{__scopeSwitch:r,...s}=e,a=Hce(uz,r);return n.jsx(cn.span,{"data-state":mz(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})});hz.displayName=uz;var Wce="SwitchBubbleInput",fz=P.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:s=!0,...a},i)=>{const o=P.useRef(null),l=Vn(o,i),c=Kv(r),d=Wv(t);return P.useEffect(()=>{const u=o.current;if(!u)return;const h=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&x){const b=new Event("click",{bubbles:s});x.call(u,r),u.dispatchEvent(b)}},[c,r,s]),n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});fz.displayName=Wce;function mz(e){return e?"checked":"unchecked"}var pz=dz,Kce=hz;const Io=P.forwardRef(({className:e,...t},r)=>n.jsx(pz,{className:Yt("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:n.jsx(Kce,{className:Yt("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));Io.displayName=pz.displayName;function xz(){const[e,t]=P.useState(!1),[r,s]=P.useState({name:"",normal_work_hours_per_day:8,normal_work_hours_per_week:40,required_break_minutes:30,break_after_hours:5,max_work_hours_per_day:12,overtime_threshold_daily:8,qualified_overtime_after_hours:10,overtime_compensation_rate:1.5,qualified_overtime_rate:2,vacation_days_per_year:25,flex_time_enabled:!0,max_flex_balance:40,gps_verification_required:!1}),a=$n(),{data:i=[]}=He({queryKey:["workPolicies"],queryFn:()=>oe.entities.WorkPolicy.list()}),o=Xt({mutationFn:async c=>{const d=await oe.entities.WorkPolicy.create(c),h=(await oe.entities.User.list()).filter(g=>g.role==="admin");for(const g of h)await oe.entities.Notification.create({recipient_email:g.email,type:"system",title:"Ny arbetspolicy skapad",message:`En ny arbetspolicy "${c.name}" har skapats och r nu aktiv.`,priority:"normal",sent_via:["app"]});return d},onSuccess:()=>{a.invalidateQueries({queryKey:["workPolicies"]}),t(!1),s({name:"",normal_work_hours_per_day:8,normal_work_hours_per_week:40,required_break_minutes:30,break_after_hours:5,max_work_hours_per_day:12,overtime_threshold_daily:8,qualified_overtime_after_hours:10,overtime_compensation_rate:1.5,qualified_overtime_rate:2,vacation_days_per_year:25,flex_time_enabled:!0,max_flex_balance:40,gps_verification_required:!1})}}),l=c=>{c.preventDefault(),o.mutate({...r,is_active:!0})};return n.jsxs("div",{className:"space-y-4",children:[n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-slate-900 to-slate-800 text-white",children:n.jsx(he,{className:"p-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(z0,{className:"h-8 w-8"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-1",children:"Arbetspolicys"}),n.jsx("p",{className:"text-sm text-white/70",children:"Definiera regler fr arbetstid, vertid och ledighet"})]})]})})}),!e&&n.jsxs(ye,{onClick:()=>t(!0),className:"w-full h-12",children:[n.jsx(xr,{className:"w-4 h-4 mr-2"}),"Skapa ny policy"]}),e&&n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsx(Ct,{children:"Ny arbetspolicy"})}),n.jsx(he,{children:n.jsxs("form",{onSubmit:l,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Namn p policy"}),n.jsx(De,{value:r.name,onChange:c=>s(d=>({...d,name:c.target.value})),placeholder:"Standard arbetstid",required:!0})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h4",{className:"font-medium text-sm",children:"Arbetstid"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Timmar per dag"}),n.jsx(De,{type:"number",value:r.normal_work_hours_per_day,onChange:c=>s(d=>({...d,normal_work_hours_per_day:Number(c.target.value)}))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Timmar per vecka"}),n.jsx(De,{type:"number",value:r.normal_work_hours_per_week,onChange:c=>s(d=>({...d,normal_work_hours_per_week:Number(c.target.value)}))})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h4",{className:"font-medium text-sm",children:"Raster"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Obligatorisk rast (min)"}),n.jsx(De,{type:"number",value:r.required_break_minutes,onChange:c=>s(d=>({...d,required_break_minutes:Number(c.target.value)}))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Rast efter (timmar)"}),n.jsx(De,{type:"number",value:r.break_after_hours,onChange:c=>s(d=>({...d,break_after_hours:Number(c.target.value)}))})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h4",{className:"font-medium text-sm",children:"vertid"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"vertid efter (h/dag)"}),n.jsx(De,{type:"number",value:r.overtime_threshold_daily,onChange:c=>s(d=>({...d,overtime_threshold_daily:Number(c.target.value)}))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Kvalificerad efter (h)"}),n.jsx(De,{type:"number",value:r.qualified_overtime_after_hours,onChange:c=>s(d=>({...d,qualified_overtime_after_hours:Number(c.target.value)}))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Enkel vertid (faktor)"}),n.jsx(De,{type:"number",step:"0.1",value:r.overtime_compensation_rate,onChange:c=>s(d=>({...d,overtime_compensation_rate:Number(c.target.value)}))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Kvalificerad vertid (faktor)"}),n.jsx(De,{type:"number",step:"0.1",value:r.qualified_overtime_rate,onChange:c=>s(d=>({...d,qualified_overtime_rate:Number(c.target.value)}))})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h4",{className:"font-medium text-sm",children:"Semester & Flex"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Semesterdagar per r"}),n.jsx(De,{type:"number",value:r.vacation_days_per_year,onChange:c=>s(d=>({...d,vacation_days_per_year:Number(c.target.value)}))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Max flexsaldo (h)"}),n.jsx(De,{type:"number",value:r.max_flex_balance,onChange:c=>s(d=>({...d,max_flex_balance:Number(c.target.value)}))})]})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[n.jsx(ve,{children:"Aktivera flextid"}),n.jsx(Io,{checked:r.flex_time_enabled,onCheckedChange:c=>s(d=>({...d,flex_time_enabled:c}))})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h4",{className:"font-medium text-sm",children:"Skerhet"}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[n.jsx(ve,{children:"Krv GPS-verifiering"}),n.jsx(Io,{checked:r.gps_verification_required,onCheckedChange:c=>s(d=>({...d,gps_verification_required:c}))})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:()=>t(!1),className:"flex-1",children:"Avbryt"}),n.jsx(ye,{type:"submit",disabled:o.isPending,className:"flex-1",children:o.isPending?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"w-4 h-4 mr-2 animate-spin"}),"Sparar..."]}):"Spara policy"})]})]})})]})}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"text-sm font-medium text-slate-700",children:"Befintliga policys"}),i.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-6 text-center",children:n.jsx("p",{className:"text-sm text-slate-500",children:"Inga policys skapade"})})}):i.map((c,d)=>n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:d*.05},children:n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-semibold text-slate-900",children:c.name}),c.is_active&&n.jsx("span",{className:"px-2 py-1 bg-emerald-100 text-emerald-700 text-xs rounded-full",children:"Aktiv"})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs text-slate-600",children:[n.jsx("div",{children:n.jsxs("p",{children:["Arbetstid: ",c.normal_work_hours_per_day,"h/dag"]})}),n.jsx("div",{children:n.jsxs("p",{children:["vertid: ",c.overtime_threshold_daily,"h+"]})}),n.jsx("div",{children:n.jsxs("p",{children:["Semester: ",c.vacation_days_per_year," dagar"]})})]})]})})},c.id))]})]})}function Mr(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function ju(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function J0(e,t){const r=Mr(e);return isNaN(t)?ju(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function gz(e,t){const r=Mr(e);if(isNaN(t))return ju(e,NaN);if(!t)return r;const s=r.getDate(),a=ju(e,r.getTime());a.setMonth(r.getMonth()+t+1,0);const i=a.getDate();return s>=i?a:(r.setFullYear(a.getFullYear(),a.getMonth(),s),r)}function v6(e){const t=Mr(e).getDay();return t===0||t===6}const vz=6048e5,Gce=864e5,yz=6e4,bz=36e5;let Zce={};function ey(){return Zce}function Fa(e,t){var l,c,d,u;const r=ey(),s=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=Mr(e),i=a.getDay(),o=(i<s?7:0)+i-s;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function a1(e){return Fa(e,{weekStartsOn:1})}function jz(e){const t=Mr(e),r=t.getFullYear(),s=ju(e,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=a1(s),i=ju(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=a1(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function wu(e){const t=Mr(e);return t.setHours(0,0,0,0),t}function y6(e){const t=Mr(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function wz(e,t){const r=wu(e),s=wu(t),a=+r-y6(r),i=+s-y6(s);return Math.round((a-i)/Gce)}function Yce(e){const t=jz(e),r=ju(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),a1(r)}function ev(e,t){const r=t*7;return J0(e,r)}function Il(e,t){const r=wu(e),s=wu(t);return+r==+s}function Xce(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function _z(e){if(!Xce(e)&&typeof e!="number")return!1;const t=Mr(e);return!isNaN(Number(t))}function jh(e,t){const r=Mr(e),s=Mr(t),a=b6(r,s),i=Math.abs(wz(r,s));r.setDate(r.getDate()-a*i);const o=+(b6(r,s)===-a),l=a*(i-o);return l===0?0:l}function b6(e,t){const r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function i1(e){const t=Mr(e);return t.setHours(23,59,59,999),t}function ni(e){const t=Mr(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function cA(e,t){const r=Mr(e.start),s=Mr(e.end);let a=+r>+s;const i=a?+r:+s,o=a?s:r;o.setHours(0,0,0,0);let l=1;const c=[];for(;+o<=i;)c.push(Mr(o)),o.setDate(o.getDate()+l),o.setHours(0,0,0,0);return a?c.reverse():c}function ri(e){const t=Mr(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Qce(e){const t=Mr(e),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t}function Nz(e){const t=Mr(e),r=ju(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Pc(e,t){var l,c,d,u;const r=ey(),s=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=Mr(e),i=a.getDay(),o=(i<s?-7:0)+6-(i-s);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}const Jce={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ede=(e,t,r)=>{let s;const a=Jce[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function nx(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const tde={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},nde={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},rde={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},sde={date:nx({formats:tde,defaultWidth:"full"}),time:nx({formats:nde,defaultWidth:"full"}),dateTime:nx({formats:rde,defaultWidth:"full"})},ade={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ide=(e,t,r,s)=>ade[e];function ru(e){return(t,r)=>{const s=r!=null&&r.context?String(r.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const ode={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},lde={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},cde={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dde={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ude={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},hde={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},fde=(e,t)=>{const r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},mde={ordinalNumber:fde,era:ru({values:ode,defaultWidth:"wide"}),quarter:ru({values:lde,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ru({values:cde,defaultWidth:"wide"}),day:ru({values:dde,defaultWidth:"wide"}),dayPeriod:ru({values:ude,defaultWidth:"wide",formattingValues:hde,defaultFormattingWidth:"wide"})};function su(e){return(t,r={})=>{const s=r.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?xde(l,h=>h.test(o)):pde(l,h=>h.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function pde(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function xde(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function kz(e){return(t,r={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const gde=/^(\d+)(th|st|nd|rd)?/i,vde=/\d+/i,yde={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},bde={any:[/^b/i,/^(a|c)/i]},jde={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},wde={any:[/1/i,/2/i,/3/i,/4/i]},_de={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Nde={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},kde={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Sde={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Pde={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ade={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Cde={ordinalNumber:kz({matchPattern:gde,parsePattern:vde,valueCallback:e=>parseInt(e,10)}),era:su({matchPatterns:yde,defaultMatchWidth:"wide",parsePatterns:bde,defaultParseWidth:"any"}),quarter:su({matchPatterns:jde,defaultMatchWidth:"wide",parsePatterns:wde,defaultParseWidth:"any",valueCallback:e=>e+1}),month:su({matchPatterns:_de,defaultMatchWidth:"wide",parsePatterns:Nde,defaultParseWidth:"any"}),day:su({matchPatterns:kde,defaultMatchWidth:"wide",parsePatterns:Sde,defaultParseWidth:"any"}),dayPeriod:su({matchPatterns:Pde,defaultMatchWidth:"any",parsePatterns:Ade,defaultParseWidth:"any"})},Tde={code:"en-US",formatDistance:ede,formatLong:sde,formatRelative:ide,localize:mde,match:Cde,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ede(e){const t=Mr(e);return wz(t,Nz(t))+1}function Ode(e){const t=Mr(e),r=+a1(t)-+Yce(t);return Math.round(r/vz)+1}function Sz(e,t){var u,h,g,x;const r=Mr(e),s=r.getFullYear(),a=ey(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((x=(g=a.locale)==null?void 0:g.options)==null?void 0:x.firstWeekContainsDate)??1,o=ju(e,0);o.setFullYear(s+1,0,i),o.setHours(0,0,0,0);const l=Fa(o,t),c=ju(e,0);c.setFullYear(s,0,i),c.setHours(0,0,0,0);const d=Fa(c,t);return r.getTime()>=l.getTime()?s+1:r.getTime()>=d.getTime()?s:s-1}function Mde(e,t){var l,c,d,u;const r=ey(),s=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=Sz(e,t),i=ju(e,0);return i.setFullYear(a,0,s),i.setHours(0,0,0,0),Fa(i,t)}function Pz(e,t){const r=Mr(e),s=+Fa(r,t)-+Mde(r,t);return Math.round(s/vz)+1}function Xr(e,t){const r=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return r+s}const Yh={y(e,t){const r=e.getFullYear(),s=r>0?r:1-r;return Xr(t==="yy"?s%100:s,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Xr(r+1,2)},d(e,t){return Xr(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Xr(e.getHours()%12||12,t.length)},H(e,t){return Xr(e.getHours(),t.length)},m(e,t){return Xr(e.getMinutes(),t.length)},s(e,t){return Xr(e.getSeconds(),t.length)},S(e,t){const r=t.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,r-3));return Xr(a,t.length)}},Mp={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},j6={G:function(e,t,r){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return Yh.y(e,t)},Y:function(e,t,r,s){const a=Sz(e,s),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return Xr(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):Xr(i,t.length)},R:function(e,t){const r=jz(e);return Xr(r,t.length)},u:function(e,t){const r=e.getFullYear();return Xr(r,t.length)},Q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return Xr(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return Xr(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,r){const s=e.getMonth();switch(t){case"M":case"MM":return Yh.M(e,t);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,r){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return Xr(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,r,s){const a=Pz(e,s);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):Xr(a,t.length)},I:function(e,t,r){const s=Ode(e);return t==="Io"?r.ordinalNumber(s,{unit:"week"}):Xr(s,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Yh.d(e,t)},D:function(e,t,r){const s=Ede(e);return t==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):Xr(s,t.length)},E:function(e,t,r){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,r,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Xr(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Xr(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const s=e.getDay(),a=s===0?7:s;switch(t){case"i":return String(a);case"ii":return Xr(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const s=e.getHours();let a;switch(s===12?a=Mp.noon:s===0?a=Mp.midnight:a=s/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const s=e.getHours();let a;switch(s>=17?a=Mp.evening:s>=12?a=Mp.afternoon:s>=4?a=Mp.morning:a=Mp.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return Yh.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Yh.H(e,t)},K:function(e,t,r){const s=e.getHours()%12;return t==="Ko"?r.ordinalNumber(s,{unit:"hour"}):Xr(s,t.length)},k:function(e,t,r){let s=e.getHours();return s===0&&(s=24),t==="ko"?r.ordinalNumber(s,{unit:"hour"}):Xr(s,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Yh.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Yh.s(e,t)},S:function(e,t){return Yh.S(e,t)},X:function(e,t,r){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return _6(s);case"XXXX":case"XX":return um(s);case"XXXXX":case"XXX":default:return um(s,":")}},x:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"x":return _6(s);case"xxxx":case"xx":return um(s);case"xxxxx":case"xxx":default:return um(s,":")}},O:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+w6(s,":");case"OOOO":default:return"GMT"+um(s,":")}},z:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+w6(s,":");case"zzzz":default:return"GMT"+um(s,":")}},t:function(e,t,r){const s=Math.trunc(e.getTime()/1e3);return Xr(s,t.length)},T:function(e,t,r){const s=e.getTime();return Xr(s,t.length)}};function w6(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),i=s%60;return i===0?r+String(a):r+String(a)+t+Xr(i,2)}function _6(e,t){return e%60===0?(e>0?"-":"+")+Xr(Math.abs(e)/60,2):um(e,t)}function um(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Xr(Math.trunc(s/60),2),i=Xr(s%60,2);return r+a+t+i}const N6=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Az=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Lde=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return N6(e,t);let i;switch(s){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",N6(s,t)).replace("{{time}}",Az(a,t))},Dde={p:Az,P:Lde},Ide=/^D+$/,Rde=/^Y+$/,Fde=["D","DD","YY","YYYY"];function $de(e){return Ide.test(e)}function Bde(e){return Rde.test(e)}function qde(e,t,r){const s=zde(e,t,r);if(console.warn(s),Fde.includes(e))throw new RangeError(s)}function zde(e,t,r){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Vde=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ude=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Hde=/^'([^]*?)'?$/,Wde=/''/g,Kde=/[a-zA-Z]/;function Ce(e,t,r){var u,h,g,x,b,y,v,j;const s=ey(),a=(r==null?void 0:r.locale)??s.locale??Tde,i=(r==null?void 0:r.firstWeekContainsDate)??((h=(u=r==null?void 0:r.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((x=(g=s.locale)==null?void 0:g.options)==null?void 0:x.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((y=(b=r==null?void 0:r.locale)==null?void 0:b.options)==null?void 0:y.weekStartsOn)??s.weekStartsOn??((j=(v=s.locale)==null?void 0:v.options)==null?void 0:j.weekStartsOn)??0,l=Mr(e);if(!_z(l))throw new RangeError("Invalid time value");let c=t.match(Ude).map(w=>{const N=w[0];if(N==="p"||N==="P"){const A=Dde[N];return A(w,a.formatLong)}return w}).join("").match(Vde).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const N=w[0];if(N==="'")return{isToken:!1,value:Gde(w)};if(j6[N])return{isToken:!0,value:w};if(N.match(Kde))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");return{isToken:!1,value:w}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(w=>{if(!w.isToken)return w.value;const N=w.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&Bde(N)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&$de(N))&&qde(N,t,String(e));const A=j6[N[0]];return A(l,N,a.localize,d)}).join("")}function Gde(e){const t=e.match(Hde);return t?t[1].replace(Wde,"'"):e}function Zde(e){return Mr(e).getFullYear()}function Yde(e){return+Mr(e)>Date.now()}function Xde(e){return+Mr(e)<Date.now()}function Qde(e,t){const r=Mr(e),s=Mr(t);return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()}function _f(e,t){const r=+Mr(e),[s,a]=[+Mr(t.start),+Mr(t.end)].sort((i,o)=>i-o);return r>=s&&r<=a}function sh(e,t){return J0(e,-t)}function bs(e,t){const s=nue(e);let a;if(s.date){const c=rue(s.date,2);a=sue(c.restDateString,c.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const i=a.getTime();let o=0,l;if(s.time&&(o=aue(s.time),isNaN(o)))return new Date(NaN);if(s.timezone){if(l=iue(s.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(i+o),d=new Date(0);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return new Date(i+o+l)}const cb={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Jde=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,eue=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,tue=/^([+-])(\d{2})(?::?(\d{2}))?$/;function nue(e){const t={},r=e.split(cb.dateTimeDelimiter);let s;if(r.length>2)return t;if(/:/.test(r[0])?s=r[0]:(t.date=r[0],s=r[1],cb.timeZoneDelimiter.test(t.date)&&(t.date=e.split(cb.timeZoneDelimiter)[0],s=e.substr(t.date.length,e.length))),s){const a=cb.timezone.exec(s);a?(t.time=s.replace(a[1],""),t.timezone=a[1]):t.time=s}return t}function rue(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),s=e.match(r);if(!s)return{year:NaN,restDateString:""};const a=s[1]?parseInt(s[1]):null,i=s[2]?parseInt(s[2]):null;return{year:i===null?a:i*100,restDateString:e.slice((s[1]||s[2]).length)}}function sue(e,t){if(t===null)return new Date(NaN);const r=e.match(Jde);if(!r)return new Date(NaN);const s=!!r[4],a=r0(r[1]),i=r0(r[2])-1,o=r0(r[3]),l=r0(r[4]),c=r0(r[5])-1;if(s)return uue(t,l,c)?oue(t,l,c):new Date(NaN);{const d=new Date(0);return!cue(t,i,o)||!due(t,a)?new Date(NaN):(d.setUTCFullYear(t,i,Math.max(a,o)),d)}}function r0(e){return e?parseInt(e):1}function aue(e){const t=e.match(eue);if(!t)return NaN;const r=X2(t[1]),s=X2(t[2]),a=X2(t[3]);return hue(r,s,a)?r*bz+s*yz+a*1e3:NaN}function X2(e){return e&&parseFloat(e.replace(",","."))||0}function iue(e){if(e==="Z")return 0;const t=e.match(tue);if(!t)return 0;const r=t[1]==="+"?-1:1,s=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return fue(s,a)?r*(s*bz+a*yz):NaN}function oue(e,t,r){const s=new Date(0);s.setUTCFullYear(e,0,4);const a=s.getUTCDay()||7,i=(t-1)*7+r+1-a;return s.setUTCDate(s.getUTCDate()+i),s}const lue=[31,null,31,30,31,30,31,31,30,31,30,31];function Cz(e){return e%400===0||e%4===0&&e%100!==0}function cue(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(lue[t]||(Cz(e)?29:28))}function due(e,t){return t>=1&&t<=(Cz(e)?366:365)}function uue(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function hue(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function fue(e,t){return t>=0&&t<=59}function mue(e,t){return gz(e,-1)}function Tz(e,t){return ev(e,-1)}const pue={lessThanXSeconds:{one:"mindre n en sekund",other:"mindre n {{count}} sekunder"},xSeconds:{one:"en sekund",other:"{{count}} sekunder"},halfAMinute:"en halv minut",lessThanXMinutes:{one:"mindre n en minut",other:"mindre n {{count}} minuter"},xMinutes:{one:"en minut",other:"{{count}} minuter"},aboutXHours:{one:"ungefr en timme",other:"ungefr {{count}} timmar"},xHours:{one:"en timme",other:"{{count}} timmar"},xDays:{one:"en dag",other:"{{count}} dagar"},aboutXWeeks:{one:"ungefr en vecka",other:"ungefr {{count}} veckor"},xWeeks:{one:"en vecka",other:"{{count}} veckor"},aboutXMonths:{one:"ungefr en mnad",other:"ungefr {{count}} mnader"},xMonths:{one:"en mnad",other:"{{count}} mnader"},aboutXYears:{one:"ungefr ett r",other:"ungefr {{count}} r"},xYears:{one:"ett r",other:"{{count}} r"},overXYears:{one:"ver ett r",other:"ver {{count}} r"},almostXYears:{one:"nstan ett r",other:"nstan {{count}} r"}},xue=["noll","en","tv","tre","fyra","fem","sex","sju","tta","nio","tio","elva","tolv"],gue=(e,t,r)=>{let s;const a=pue[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t<13?xue[t]:String(t)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"om "+s:s+" sedan":s},vue={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"y-MM-dd"},yue={full:"'kl'. HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},bue={full:"{{date}} 'kl.' {{time}}",long:"{{date}} 'kl.' {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},jue={date:nx({formats:vue,defaultWidth:"full"}),time:nx({formats:yue,defaultWidth:"full"}),dateTime:nx({formats:bue,defaultWidth:"full"})},wue={lastWeek:"'i' EEEE's kl.' p",yesterday:"'igr kl.' p",today:"'idag kl.' p",tomorrow:"'imorgon kl.' p",nextWeek:"EEEE 'kl.' p",other:"P"},_ue=(e,t,r,s)=>wue[e],Nue={narrow:["f.Kr.","e.Kr."],abbreviated:["f.Kr.","e.Kr."],wide:["fre Kristus","efter Kristus"]},kue={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1:a kvartalet","2:a kvartalet","3:e kvartalet","4:e kvartalet"]},Sue={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["jan.","feb.","mars","apr.","maj","juni","juli","aug.","sep.","okt.","nov.","dec."],wide:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"]},Pue={narrow:["S","M","T","O","T","F","L"],short:["s","m","ti","on","to","fr","l"],abbreviated:["sn","mn","tis","ons","tors","fre","lr"],wide:["sndag","mndag","tisdag","onsdag","torsdag","fredag","lrdag"]},Aue={narrow:{am:"fm",pm:"em",midnight:"midnatt",noon:"middag",morning:"morg.",afternoon:"efterm.",evening:"kvll",night:"natt"},abbreviated:{am:"f.m.",pm:"e.m.",midnight:"midnatt",noon:"middag",morning:"morgon",afternoon:"efterm.",evening:"kvll",night:"natt"},wide:{am:"frmiddag",pm:"eftermiddag",midnight:"midnatt",noon:"middag",morning:"morgon",afternoon:"eftermiddag",evening:"kvll",night:"natt"}},Cue={narrow:{am:"fm",pm:"em",midnight:"midnatt",noon:"middag",morning:"p morg.",afternoon:"p efterm.",evening:"p kvllen",night:"p natten"},abbreviated:{am:"fm",pm:"em",midnight:"midnatt",noon:"middag",morning:"p morg.",afternoon:"p efterm.",evening:"p kvllen",night:"p natten"},wide:{am:"fm",pm:"em",midnight:"midnatt",noon:"middag",morning:"p morgonen",afternoon:"p eftermiddagen",evening:"p kvllen",night:"p natten"}},Tue=(e,t)=>{const r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:case 2:return r+":a"}return r+":e"},Eue={ordinalNumber:Tue,era:ru({values:Nue,defaultWidth:"wide"}),quarter:ru({values:kue,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ru({values:Sue,defaultWidth:"wide"}),day:ru({values:Pue,defaultWidth:"wide"}),dayPeriod:ru({values:Aue,defaultWidth:"wide",formattingValues:Cue,defaultFormattingWidth:"wide"})},Oue=/^(\d+)(:a|:e)?/i,Mue=/\d+/i,Lue={narrow:/^(f\.? ?Kr\.?|f\.? ?v\.? ?t\.?|e\.? ?Kr\.?|v\.? ?t\.?)/i,abbreviated:/^(f\.? ?Kr\.?|f\.? ?v\.? ?t\.?|e\.? ?Kr\.?|v\.? ?t\.?)/i,wide:/^(fre Kristus|fre vr tid|efter Kristus|vr tid)/i},Due={any:[/^f/i,/^[ev]/i]},Iue={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](:a|:e)? kvartalet/i},Rue={any:[/1/i,/2/i,/3/i,/4/i]},Fue={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar[s]?|apr|maj|jun[i]?|jul[i]?|aug|sep|okt|nov|dec)\.?/i,wide:/^(januari|februari|mars|april|maj|juni|juli|augusti|september|oktober|november|december)/i},$ue={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^maj/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Bue={narrow:/^[smtofl]/i,short:/^(s|m|ti|on|to|fr|l)/i,abbreviated:/^(sn|mn|tis|ons|tors|fre|lr)/i,wide:/^(sndag|mndag|tisdag|onsdag|torsdag|fredag|lrdag)/i},que={any:[/^s/i,/^m/i,/^ti/i,/^o/i,/^to/i,/^f/i,/^l/i]},zue={any:/^([fe]\.?\s?m\.?|midn(att)?|midd(ag)?|(p) (morgonen|eftermiddagen|kvllen|natten))/i},Vue={any:{am:/^f/i,pm:/^e/i,midnight:/^midn/i,noon:/^midd/i,morning:/morgon/i,afternoon:/eftermiddag/i,evening:/kvll/i,night:/natt/i}},Uue={ordinalNumber:kz({matchPattern:Oue,parsePattern:Mue,valueCallback:e=>parseInt(e,10)}),era:su({matchPatterns:Lue,defaultMatchWidth:"wide",parsePatterns:Due,defaultParseWidth:"any"}),quarter:su({matchPatterns:Iue,defaultMatchWidth:"wide",parsePatterns:Rue,defaultParseWidth:"any",valueCallback:e=>e+1}),month:su({matchPatterns:Fue,defaultMatchWidth:"wide",parsePatterns:$ue,defaultParseWidth:"any"}),day:su({matchPatterns:Bue,defaultMatchWidth:"wide",parsePatterns:que,defaultParseWidth:"any"}),dayPeriod:su({matchPatterns:zue,defaultMatchWidth:"any",parsePatterns:Vue,defaultParseWidth:"any"})},ut={code:"sv",formatDistance:gue,formatLong:jue,formatRelative:_ue,localize:Eue,match:Uue,options:{weekStartsOn:1,firstWeekContainsDate:4}};function Ez(){const[e,t]=P.useState(Ce(new Date,"yyyy-MM")),{data:r=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list()}),{data:s=[]}=He({queryKey:["timeEntries"],queryFn:()=>oe.entities.TimeEntry.list()}),{data:a=[]}=He({queryKey:["leaveRequests"],queryFn:()=>oe.entities.LeaveRequest.list()}),i=ri(new Date(e+"-01")),o=ni(i),l=s.filter(x=>{const b=new Date(x.date);return b>=i&&b<=o&&x.status==="completed"}),c=l.reduce((x,b)=>x+(b.total_hours||0),0),d=l.reduce((x,b)=>x+(b.overtime_hours||0),0),u=l.filter(x=>x.anomaly_flag).length,h=[{label:"Total arbetstid",value:`${c.toFixed(0)}h`,icon:Vt,color:"text-blue-600",bg:"bg-blue-50"},{label:"Aktiva medarbetare",value:r.length,icon:Fr,color:"text-emerald-600",bg:"bg-emerald-50"},{label:"vertid",value:`${d.toFixed(0)}h`,icon:ta,color:"text-amber-600",bg:"bg-amber-50"},{label:"Avvikelser",value:u,icon:$0,color:"text-rose-600",bg:"bg-rose-50"}],g=()=>{const x=[["Datum","Anstlld","Kategori","In-tid","Ut-tid","Timmar","vertid","Status"].join(","),...l.map(j=>{var w,N;return[j.date,j.employee_email,j.category,Ce(new Date(j.clock_in_time),"HH:mm"),j.clock_out_time?Ce(new Date(j.clock_out_time),"HH:mm"):"",((w=j.total_hours)==null?void 0:w.toFixed(2))||"",((N=j.overtime_hours)==null?void 0:N.toFixed(2))||"",j.status].join(",")})].join(`
`),b=new Blob([x],{type:"text/csv"}),y=window.URL.createObjectURL(b),v=document.createElement("a");v.href=y,v.download=`tidrapport-${e}.csv`,v.click()};return n.jsxs("div",{className:"space-y-4",children:[n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:"Vlj period"}),n.jsxs(Nt,{value:e,onValueChange:t,children:[n.jsx(jt,{className:"w-40",children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:Ce(new Date,"yyyy-MM"),children:"Denna mnad"}),n.jsx(Ne,{value:Ce(new Date(new Date().setMonth(new Date().getMonth()-1)),"yyyy-MM"),children:"Frra mnaden"}),n.jsx(Ne,{value:Ce(new Date(new Date().setMonth(new Date().getMonth()-2)),"yyyy-MM"),children:Ce(new Date(new Date().setMonth(new Date().getMonth()-2)),"MMMM",{locale:ut})})]})]})]})})}),n.jsx("div",{className:"grid grid-cols-2 gap-4",children:h.map(x=>{const b=x.icon;return n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-4",children:[n.jsx("div",{className:`inline-flex p-2 rounded-lg ${x.bg} mb-3`,children:n.jsx(b,{className:`h-4 w-4 ${x.color}`})}),n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:x.label}),n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:x.value})]})},x.label)})}),n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsx(Ct,{className:"text-base",children:"Exportera rapporter"})}),n.jsxs(he,{className:"space-y-3",children:[n.jsxs(ye,{onClick:g,className:"w-full",variant:"outline",children:[n.jsx(Eo,{className:"w-4 h-4 mr-2"}),"Exportera som CSV"]}),n.jsx("p",{className:"text-xs text-slate-500 text-center",children:"Exporterar alla tidrapporter fr vald period"})]})]}),n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsx(Ct,{className:"text-base",children:"Topplista - mest arbetade timmar"})}),n.jsx(he,{children:n.jsx("div",{className:"space-y-2",children:r.map(x=>({employee:x,hours:l.filter(b=>b.employee_email===x.user_email).reduce((b,y)=>b+(y.total_hours||0),0)})).sort((x,b)=>b.hours-x.hours).slice(0,5).map((x,b)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"text-sm font-bold text-slate-400",children:["#",b+1]}),n.jsx("span",{className:"text-sm font-medium text-slate-900",children:x.employee.user_email})]}),n.jsxs("span",{className:"text-sm font-bold text-slate-900",children:[x.hours.toFixed(0),"h"]})]},x.employee.id))})})]})]})}function Oz(){const[e,t]=P.useState(!1),[r,s]=P.useState(!1),[a,i]=P.useState(null),[o,l]=P.useState({startDate:Ce(new Date,"yyyy-MM-dd"),endDate:Ce(new Date,"yyyy-MM-dd"),vehicleId:"all",employeeEmail:"all",tripType:"all",reportType:"summary"}),{data:c=[]}=He({queryKey:["vehicles"],queryFn:()=>oe.entities.Vehicle.list()}),{data:d=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list()}),u=async()=>{t(!0);try{const b=(await oe.entities.DrivingJournalEntry.list()).filter(v=>{const j=new Date(v.start_time),w=new Date(o.startDate),N=new Date(o.endDate);N.setHours(23,59,59,999);const A=j>=w&&j<=N,C=o.vehicleId==="all"||v.vehicle_id===o.vehicleId,M=o.employeeEmail==="all"||v.driver_email===o.employeeEmail,I=o.tripType==="all"||v.trip_type===o.tripType;return A&&C&&M&&I});if(b.length===0){alert("Inga resor hittades fr valda filter"),t(!1);return}const y=await oe.integrations.Core.InvokeLLM({prompt:`Skapa en detaljerad krjournalsrapport baserat p fljande data:

Period: ${o.startDate} till ${o.endDate}
Antal resor: ${b.length}
Total krstrcka: ${b.reduce((v,j)=>v+(j.distance_km||0),0).toFixed(1)} km

Resetyp: ${o.tripType==="all"?"Alla":o.tripType}

Resor:
${b.slice(0,50).map((v,j)=>`
${j+1}. ${Ce(new Date(v.start_time),"yyyy-MM-dd HH:mm")}
   Fordon: ${v.registration_number||"Oknd"}
   Frare: ${v.driver_name||v.driver_email||"Oknd"}
   Typ: ${v.trip_type||"Oknd"}
   Strcka: ${(v.distance_km||0).toFixed(1)} km
   Tid: ${Math.round(v.duration_minutes||0)} min
   ${v.purpose?`Syfte: ${v.purpose}`:""}
   ${v.project_code?`Projekt: ${v.project_code}`:""}
   ${v.customer?`Kund: ${v.customer}`:""}
`).join(`
`)}

Skapa en rapport med:
1. Sammanfattning (vergripande statistik och insights)
2. Analys av resmnster
3. Kostnadsbedmning (anvnd schablon 18,50 kr/mil fr tjnsteresor)
4. Rekommendationer fr optimering
5. Potentiella avvikelser eller observationer

Anvnd svensk sprk och professionell ton. Var koncis men informativ.`,add_context_from_internet:!1});i({content:y,filters:o,entries:b,generatedAt:new Date().toISOString()})}catch(x){console.error("Error generating report:",x),alert("Kunde inte generera rapport: "+x.message)}t(!1)},h=async()=>{if(a){s(!0);try{const x=await oe.functions.invoke("exportJournalPDF",{startDate:o.startDate,endDate:o.endDate,vehicleId:o.vehicleId!=="all"?o.vehicleId:null,employeeEmail:o.employeeEmail!=="all"?o.employeeEmail:null,aiReport:a.content}),b=new Blob([x.data],{type:"application/pdf"}),y=window.URL.createObjectURL(b),v=document.createElement("a");v.href=y,v.download=`ai-rapport_${o.startDate}_${o.endDate}.pdf`,document.body.appendChild(v),v.click(),window.URL.revokeObjectURL(y),v.remove()}catch(x){alert("Kunde inte exportera PDF: "+x.message)}s(!1)}},g=async()=>{if(a){s(!0);try{const x=await oe.functions.invoke("exportJournalCSV",{startDate:o.startDate,endDate:o.endDate,vehicleId:o.vehicleId!=="all"?o.vehicleId:null,employeeEmail:o.employeeEmail!=="all"?o.employeeEmail:null}),b=new Blob([x.data],{type:"text/csv"}),y=window.URL.createObjectURL(b),v=document.createElement("a");v.href=y,v.download=`krjournal_${o.startDate}_${o.endDate}.csv`,document.body.appendChild(v),v.click(),window.URL.revokeObjectURL(y),v.remove()}catch(x){alert("Kunde inte exportera CSV: "+x.message)}s(!1)}};return n.jsxs("div",{className:"space-y-6",children:[n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center",children:n.jsx(yi,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"AI Krjournalrapporter"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Generera intelligenta rapporter med AI-analys"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(ve,{children:"Frn datum"}),n.jsx(De,{type:"date",value:o.startDate,onChange:x=>l({...o,startDate:x.target.value})})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Till datum"}),n.jsx(De,{type:"date",value:o.endDate,onChange:x=>l({...o,endDate:x.target.value})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(ve,{children:"Fordon"}),n.jsxs(Nt,{value:o.vehicleId,onValueChange:x=>l({...o,vehicleId:x}),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"all",children:"Alla fordon"}),c.map(x=>n.jsx(Ne,{value:x.id,children:x.registration_number},x.id))]})]})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Frare"}),n.jsxs(Nt,{value:o.employeeEmail,onValueChange:x=>l({...o,employeeEmail:x}),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"all",children:"Alla frare"}),d.map(x=>n.jsx(Ne,{value:x.user_email,children:x.user_email},x.user_email))]})]})]})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Resetyp"}),n.jsxs(Nt,{value:o.tripType,onValueChange:x=>l({...o,tripType:x}),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"all",children:"Alla typer"}),n.jsx(Ne,{value:"tjnst",children:"Tjnsteresa"}),n.jsx(Ne,{value:"privat",children:"Privatresa"})]})]})]}),n.jsx(ye,{onClick:u,disabled:e,className:"w-full h-12 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700",children:e?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-5 w-5 mr-2 animate-spin"}),"Genererar AI-rapport..."]}):n.jsxs(n.Fragment,{children:[n.jsx(yi,{className:"h-5 w-5 mr-2"}),"Generera AI-rapport"]})})]})]})})}),a&&n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:"Genererad rapport"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ye,{size:"sm",variant:"outline",onClick:h,disabled:r,children:[n.jsx(nX,{className:"h-4 w-4 mr-2"}),"PDF"]}),n.jsxs(ye,{size:"sm",variant:"outline",onClick:g,disabled:r,children:[n.jsx(Jr,{className:"h-4 w-4 mr-2"}),"CSV"]})]})]}),n.jsx("div",{className:"prose prose-sm max-w-none",children:n.jsx("div",{className:"whitespace-pre-wrap text-slate-700 leading-relaxed",children:a.content})}),n.jsx("div",{className:"mt-6 pt-4 border-t border-slate-200",children:n.jsxs("p",{className:"text-xs text-slate-500",children:["Rapport genererad: ",Ce(new Date(a.generatedAt),"PPpp",{locale:{code:"sv"}}),"  ",a.entries.length," resor analyserade"]})})]})})})]})}const Hue={support_service:"Support & service",install:"Install",rental:"Rental",interntid:"Interntid"};function Mz(){const[e,t]=P.useState("month"),[r,s]=P.useState("all"),[a,i]=P.useState("all"),{data:o=[]}=He({queryKey:["timeEntries"],queryFn:()=>oe.entities.TimeEntry.list("-date",1e3)}),{data:l=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list()}),c=new Date;let d,u;e==="week"?(d=Fa(c,{weekStartsOn:1}),u=Pc(c,{weekStartsOn:1})):(d=ri(c),u=ni(c));const h=o.filter(v=>{var C;const j=new Date(v.date),w=j>=d&&j<=u,N=r==="all"||v.employee_email===r,A=v.status==="completed"||v.status==="approved";return!(!w||!N||!A||a!=="all"&&!(v.project_id===a||((C=v.project_allocations)==null?void 0:C.some(I=>I.project_id===a))))}),g=new Set;h.forEach(v=>{v.project_id&&g.add(v.project_id),v.project_allocations&&v.project_allocations.forEach(j=>g.add(j.project_id))});const x={};h.forEach(v=>{var j;if(((j=v.project_allocations)==null?void 0:j.length)>0)v.project_allocations.forEach(w=>{if(a==="all"||w.project_id===a){const N=w.project_id;x[N]||(x[N]={project_id:w.project_id,total_hours:0,categories:{}});const A=w.category||"interntid";x[N].categories[A]||(x[N].categories[A]=0),x[N].total_hours+=w.hours||0,x[N].categories[A]+=w.hours||0}});else if(v.project_id&&(a==="all"||v.project_id===a)){const w=v.project_id;x[w]||(x[w]={project_id:v.project_id,total_hours:0,categories:{}});const N=v.category||"interntid";x[w].categories[N]||(x[w].categories[N]=0),x[w].total_hours+=v.total_hours||0,x[w].categories[N]+=v.total_hours||0}});const b=Object.values(x).sort((v,j)=>j.total_hours-v.total_hours),y=b.reduce((v,j)=>v+j.total_hours,0);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>t("week"),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all ${e==="week"?"bg-slate-900 text-white":"bg-white text-slate-600 hover:bg-slate-100"}`,children:"Denna vecka"}),n.jsx("button",{onClick:()=>t("month"),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all ${e==="month"?"bg-slate-900 text-white":"bg-white text-slate-600 hover:bg-slate-100"}`,children:"Denna mnad"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs(Nt,{value:r,onValueChange:s,children:[n.jsx(jt,{className:"h-11 rounded-2xl",children:n.jsx(kt,{placeholder:"Vlj anstlld"})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"all",children:"Alla anstllda"}),l.map(v=>n.jsx(Ne,{value:v.user_email,children:v.user_email},v.id))]})]}),n.jsxs(Nt,{value:a,onValueChange:i,children:[n.jsx(jt,{className:"h-11 rounded-2xl",children:n.jsx(kt,{placeholder:"Vlj projekt"})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"all",children:"Alla projekt"}),Array.from(g).sort().map(v=>n.jsx(Ne,{value:v,children:v},v))]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-indigo-100 flex items-center justify-center",children:n.jsx(Vt,{className:"h-5 w-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Totalt"}),n.jsxs("p",{className:"text-xl font-bold text-slate-900",children:[y.toFixed(1),"h"]})]})]})})}),n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-emerald-100 flex items-center justify-center",children:n.jsx(Do,{className:"h-5 w-5 text-emerald-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Projekt"}),n.jsx("p",{className:"text-xl font-bold text-slate-900",children:b.length})]})]})})}),n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-purple-100 flex items-center justify-center",children:n.jsx(bd,{className:"h-5 w-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Poster"}),n.jsx("p",{className:"text-xl font-bold text-slate-900",children:h.length})]})]})})})]}),n.jsx("div",{className:"space-y-3",children:b.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(ta,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Ingen data fr vald period"})]})}):b.map((v,j)=>n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:j*.05},children:n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ct,{className:"text-base font-semibold text-slate-900",children:v.project_id}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[v.total_hours.toFixed(1),"h"]}),n.jsxs("p",{className:"text-xs text-slate-500",children:[(v.total_hours/y*100).toFixed(0),"% av total"]})]})]})}),n.jsx(he,{className:"pt-0",children:n.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(v.categories).map(([w,N])=>n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:Hue[w]||w}),n.jsxs("p",{className:"text-lg font-semibold text-slate-900",children:[N.toFixed(1),"h"]}),n.jsxs("p",{className:"text-xs text-slate-400",children:[(N/v.total_hours*100).toFixed(0),"% av projekt"]})]},w))})})]})},v.project_id))})]})}var Dj="Dialog",[Lz,Dz]=ho(Dj),[Wue,jd]=Lz(Dj),Iz=e=>{const{__scopeDialog:t,children:r,open:s,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=P.useRef(null),c=P.useRef(null),[d,u]=bu({prop:s,defaultProp:a??!1,onChange:i,caller:Dj});return n.jsx(Wue,{scope:t,triggerRef:l,contentRef:c,contentId:lh(),titleId:lh(),descriptionId:lh(),open:d,onOpenChange:u,onOpenToggle:P.useCallback(()=>u(h=>!h),[u]),modal:o,children:r})};Iz.displayName=Dj;var Rz="DialogTrigger",Fz=P.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=jd(Rz,r),i=Vn(t,a.triggerRef);return n.jsx(cn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":hA(a.open),...s,ref:i,onClick:fn(e.onClick,a.onOpenToggle)})});Fz.displayName=Rz;var dA="DialogPortal",[Kue,$z]=Lz(dA,{forceMount:void 0}),Bz=e=>{const{__scopeDialog:t,forceMount:r,children:s,container:a}=e,i=jd(dA,t);return n.jsx(Kue,{scope:t,forceMount:r,children:P.Children.map(s,o=>n.jsx(Sc,{present:r||i.open,children:n.jsx(S3,{asChild:!0,container:a,children:o})}))})};Bz.displayName=dA;var o1="DialogOverlay",qz=P.forwardRef((e,t)=>{const r=$z(o1,e.__scopeDialog),{forceMount:s=r.forceMount,...a}=e,i=jd(o1,e.__scopeDialog);return i.modal?n.jsx(Sc,{present:s||i.open,children:n.jsx(Zue,{...a,ref:t})}):null});qz.displayName=o1;var Gue=kx("DialogOverlay.RemoveScroll"),Zue=P.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=jd(o1,r);return n.jsx(P3,{as:Gue,allowPinchZoom:!0,shards:[a.contentRef],children:n.jsx(cn.div,{"data-state":hA(a.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Um="DialogContent",zz=P.forwardRef((e,t)=>{const r=$z(Um,e.__scopeDialog),{forceMount:s=r.forceMount,...a}=e,i=jd(Um,e.__scopeDialog);return n.jsx(Sc,{present:s||i.open,children:i.modal?n.jsx(Yue,{...a,ref:t}):n.jsx(Xue,{...a,ref:t})})});zz.displayName=Um;var Yue=P.forwardRef((e,t)=>{const r=jd(Um,e.__scopeDialog),s=P.useRef(null),a=Vn(t,r.contentRef,s);return P.useEffect(()=>{const i=s.current;if(i)return _$(i)},[]),n.jsx(Vz,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:fn(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:fn(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:fn(e.onFocusOutside,i=>i.preventDefault())})}),Xue=P.forwardRef((e,t)=>{const r=jd(Um,e.__scopeDialog),s=P.useRef(!1),a=P.useRef(!1);return n.jsx(Vz,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(s.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),Vz=P.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=jd(Um,r),c=P.useRef(null),d=Vn(t,c);return X9(),n.jsxs(n.Fragment,{children:[n.jsx(g3,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:i,children:n.jsx(x3,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":hA(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(Jue,{titleId:l.titleId}),n.jsx(the,{contentRef:c,descriptionId:l.descriptionId})]})]})}),uA="DialogTitle",Uz=P.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=jd(uA,r);return n.jsx(cn.h2,{id:a.titleId,...s,ref:t})});Uz.displayName=uA;var Hz="DialogDescription",Wz=P.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=jd(Hz,r);return n.jsx(cn.p,{id:a.descriptionId,...s,ref:t})});Wz.displayName=Hz;var Kz="DialogClose",Gz=P.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=jd(Kz,r);return n.jsx(cn.button,{type:"button",...s,ref:t,onClick:fn(e.onClick,()=>a.onOpenChange(!1))})});Gz.displayName=Kz;function hA(e){return e?"open":"closed"}var Zz="DialogTitleWarning",[Que,Yz]=Ite(Zz,{contentName:Um,titleName:uA,docsSlug:"dialog"}),Jue=({titleId:e})=>{const t=Yz(Zz),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return P.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},ehe="DialogDescriptionWarning",the=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Yz(ehe).contentName}}.`;return P.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},fA=Iz,Xz=Fz,mA=Bz,ty=qz,ny=zz,ry=Uz,sy=Wz,Ij=Gz;const Xn=fA,nhe=mA,Qz=P.forwardRef(({className:e,...t},r)=>n.jsx(ty,{ref:r,className:Yt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Qz.displayName=ty.displayName;const Yn=P.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(nhe,{children:[n.jsx(Qz,{}),n.jsxs(ny,{ref:s,className:Yt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,n.jsxs(Ij,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[n.jsx(Ra,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Yn.displayName=ny.displayName;const er=({className:e,...t})=>n.jsx("div",{className:Yt("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});er.displayName="DialogHeader";const pA=({className:e,...t})=>n.jsx("div",{className:Yt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});pA.displayName="DialogFooter";const tr=P.forwardRef(({className:e,...t},r)=>n.jsx(ry,{ref:r,className:Yt("text-lg font-semibold leading-none tracking-tight",e),...t}));tr.displayName=ry.displayName;const rhe=P.forwardRef(({className:e,...t},r)=>n.jsx(sy,{ref:r,className:Yt("text-sm text-muted-foreground",e),...t}));rhe.displayName=sy.displayName;function she({employee:e,users:t,onClose:r}){const[s,a]=P.useState(""),i=$n(),o=t==null?void 0:t.find(d=>d.email===e.user_email);P.useEffect(()=>{o&&a(o.full_name||"")},[o]);const l=Xt({mutationFn:async()=>{await oe.asServiceRole.entities.User.update(o.id,{full_name:s})},onSuccess:()=>{i.invalidateQueries({queryKey:["users"]}),i.invalidateQueries({queryKey:["employees"]}),r()}}),c=()=>{s.trim()&&l.mutate()};return n.jsx(Xn,{open:!0,onOpenChange:r,children:n.jsxs(Yn,{className:"max-w-md",children:[n.jsx(er,{children:n.jsx(tr,{children:"Redigera anvndarnamn"})}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Email"}),n.jsx(De,{value:e.user_email,disabled:!0,className:"bg-slate-50"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Fullstndigt namn"}),n.jsx(De,{value:s,onChange:d=>a(d.target.value),placeholder:"Fr- och efternamn",className:"h-11"})]})]}),n.jsxs("div",{className:"flex justify-end gap-3",children:[n.jsx(ye,{variant:"outline",onClick:r,children:"Avbryt"}),n.jsx(ye,{onClick:c,disabled:l.isPending||!s.trim(),children:l.isPending?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-4 w-4 mr-2 animate-spin"}),"Sparar..."]}):"Spara"})]})]})})}var Rj="Checkbox",[ahe]=ho(Rj),[ihe,xA]=ahe(Rj);function ohe(e){const{__scopeCheckbox:t,checked:r,children:s,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:h}=e,[g,x]=bu({prop:r,defaultProp:a??!1,onChange:c,caller:Rj}),[b,y]=P.useState(null),[v,j]=P.useState(null),w=P.useRef(!1),N=b?!!o||!!b.closest("form"):!0,A={checked:g,disabled:i,setChecked:x,control:b,setControl:y,name:l,form:o,value:u,hasConsumerStoppedPropagationRef:w,required:d,defaultChecked:Nf(a)?!1:a,isFormControl:N,bubbleInput:v,setBubbleInput:j};return n.jsx(ihe,{scope:t,...A,children:lhe(h)?h(A):s})}var Jz="CheckboxTrigger",eV=P.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...s},a)=>{const{control:i,value:o,disabled:l,checked:c,required:d,setControl:u,setChecked:h,hasConsumerStoppedPropagationRef:g,isFormControl:x,bubbleInput:b}=xA(Jz,e),y=Vn(a,u),v=P.useRef(c);return P.useEffect(()=>{const j=i==null?void 0:i.form;if(j){const w=()=>h(v.current);return j.addEventListener("reset",w),()=>j.removeEventListener("reset",w)}},[i,h]),n.jsx(cn.button,{type:"button",role:"checkbox","aria-checked":Nf(c)?"mixed":c,"aria-required":d,"data-state":aV(c),"data-disabled":l?"":void 0,disabled:l,value:o,...s,ref:y,onKeyDown:fn(t,j=>{j.key==="Enter"&&j.preventDefault()}),onClick:fn(r,j=>{h(w=>Nf(w)?!0:!w),b&&x&&(g.current=j.isPropagationStopped(),g.current||j.stopPropagation())})})});eV.displayName=Jz;var gA=P.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:s,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:d,form:u,...h}=e;return n.jsx(ohe,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:d,name:s,form:u,value:c,internal_do_not_use_render:({isFormControl:g})=>n.jsxs(n.Fragment,{children:[n.jsx(eV,{...h,ref:t,__scopeCheckbox:r}),g&&n.jsx(sV,{__scopeCheckbox:r})]})})});gA.displayName=Rj;var tV="CheckboxIndicator",nV=P.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:s,...a}=e,i=xA(tV,r);return n.jsx(Sc,{present:s||Nf(i.checked)||i.checked===!0,children:n.jsx(cn.span,{"data-state":aV(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});nV.displayName=tV;var rV="CheckboxBubbleInput",sV=P.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:s,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:d,value:u,form:h,bubbleInput:g,setBubbleInput:x}=xA(rV,e),b=Vn(r,x),y=Kv(i),v=Wv(s);P.useEffect(()=>{const w=g;if(!w)return;const N=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(N,"checked").set,M=!a.current;if(y!==i&&C){const I=new Event("click",{bubbles:M});w.indeterminate=Nf(i),C.call(w,Nf(i)?!1:i),w.dispatchEvent(I)}},[g,y,i,a]);const j=P.useRef(Nf(i)?!1:i);return n.jsx(cn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??j.current,required:l,disabled:c,name:d,value:u,form:h,...t,tabIndex:-1,ref:b,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});sV.displayName=rV;function lhe(e){return typeof e=="function"}function Nf(e){return e==="indeterminate"}function aV(e){return Nf(e)?"indeterminate":e?"checked":"unchecked"}const wh=P.forwardRef(({className:e,...t},r)=>n.jsx(gA,{ref:r,className:Yt("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:n.jsx(nV,{className:Yt("flex items-center justify-center text-current"),children:n.jsx(Rm,{className:"h-4 w-4"})})}));wh.displayName=gA.displayName;const k6=[{id:"TimeTracking",label:"Tidrapportering",icon:""},{id:"Vehicles",label:"Fordon",icon:""},{id:"GPS",label:"GPS-sprning",icon:""},{id:"DrivingJournal",label:"Krjournal",icon:""},{id:"Manuals",label:"Manualer",icon:""},{id:"Chat",label:"Chat",icon:""},{id:"Reports",label:"Rapporter",icon:""}];function che({employee:e,onClose:t}){const[r,s]=P.useState([]),a=$n();P.useEffect(()=>{e!=null&&e.assigned_features&&s(e.assigned_features)},[e]);const i=Xt({mutationFn:async()=>{await oe.entities.Employee.update(e.id,{assigned_features:r})},onSuccess:()=>{a.invalidateQueries({queryKey:["employees"]}),t()}}),o=l=>{s(c=>c.includes(l)?c.filter(d=>d!==l):[...c,l])};return n.jsx(Xn,{open:!0,onOpenChange:t,children:n.jsxs(Yn,{className:"max-w-md",children:[n.jsxs(er,{children:[n.jsx(tr,{children:"Hantera funktioner"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:e.full_name||e.user_email})]}),n.jsx("div",{className:"space-y-3 py-4",children:k6.map(l=>n.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-slate-50 transition-colors",children:[n.jsx(wh,{id:l.id,checked:r.includes(l.id),onCheckedChange:()=>o(l.id)}),n.jsxs(ve,{htmlFor:l.id,className:"flex items-center gap-2 cursor-pointer flex-1",children:[n.jsx("span",{className:"text-lg",children:l.icon}),n.jsx("span",{className:"font-medium",children:l.label})]})]},l.id))}),n.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[n.jsxs("p",{className:"text-xs text-slate-500",children:[r.length," av ",k6.length," valda"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ye,{variant:"outline",onClick:t,children:"Avbryt"}),n.jsx(ye,{onClick:()=>i.mutate(),disabled:i.isPending,children:i.isPending?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-4 w-4 mr-2 animate-spin"}),"Sparar..."]}):"Spara"})]})]})]})})}const S6=[{id:"TimeTracking",label:"Tidrapportering",icon:""},{id:"Vehicles",label:"Fordon",icon:""},{id:"GPS",label:"GPS-sprning",icon:""},{id:"DrivingJournal",label:"Krjournal",icon:""},{id:"Manuals",label:"Manualer",icon:""},{id:"Chat",label:"Chat",icon:""},{id:"Reports",label:"Rapporter",icon:""}],dhe=["Administration","Teknik","Frsljning","Produktion","Lager","Transport","vrigt"];function uhe({onClose:e}){const[t,r]=P.useState({email:"",password:"",full_name:"",role:"user",department:"",job_title:"",phone:"",selectedFeatures:[]}),[s,a]=P.useState(""),i=$n(),o=Xt({mutationFn:async()=>{const u=await oe.entities.User.create({email:t.email,full_name:t.full_name,role:t.role,password:t.password});return await oe.entities.Employee.create({user_email:t.email,first_name:t.full_name.split(" ")[0]||"",last_name:t.full_name.split(" ").slice(1).join(" ")||"",department:t.department,job_title:t.job_title,phone:t.phone,status:"active",assigned_features:t.selectedFeatures,start_date:new Date().toISOString().split("T")[0]}),u},onSuccess:()=>{i.invalidateQueries({queryKey:["users"]}),i.invalidateQueries({queryKey:["employees"]}),e()},onError:u=>{a(u.message||"Kunde inte skapa anvndaren")}}),l=u=>{r(h=>({...h,selectedFeatures:h.selectedFeatures.includes(u)?h.selectedFeatures.filter(g=>g!==u):[...h.selectedFeatures,u]}))},c=()=>{r(u=>({...u,selectedFeatures:S6.map(h=>h.id)}))},d=u=>{if(u.preventDefault(),a(""),!t.email||!t.password||!t.full_name){a("Fyll i alla obligatoriska flt");return}if(t.password.length<4){a("Lsenordet mste vara minst 4 tecken");return}o.mutate()};return n.jsx(Xn,{open:!0,onOpenChange:e,children:n.jsxs(Yn,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[n.jsx(er,{children:n.jsxs(tr,{className:"flex items-center gap-2",children:[n.jsx(pS,{className:"h-5 w-5"}),"Skapa ny anvndare"]})}),n.jsxs("form",{onSubmit:d,className:"space-y-6 py-4",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-sm font-semibold text-slate-900 flex items-center gap-2",children:[n.jsx(_c,{className:"h-4 w-4"}),"Inloggningsuppgifter"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(ve,{htmlFor:"full_name",children:"Namn *"}),n.jsx(De,{id:"full_name",placeholder:"Anna Andersson",value:t.full_name,onChange:u=>r(h=>({...h,full_name:u.target.value})),required:!0})]}),n.jsxs("div",{children:[n.jsx(ve,{htmlFor:"email",children:"E-post *"}),n.jsx(De,{id:"email",type:"email",placeholder:"anna@foretag.se",value:t.email,onChange:u=>r(h=>({...h,email:u.target.value})),required:!0})]}),n.jsxs("div",{children:[n.jsx(ve,{htmlFor:"password",children:"Lsenord *"}),n.jsx(De,{id:"password",type:"password",placeholder:"Minst 4 tecken",value:t.password,onChange:u=>r(h=>({...h,password:u.target.value})),required:!0})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-sm font-semibold text-slate-900 flex items-center gap-2",children:[n.jsx(Do,{className:"h-4 w-4"}),"Roll och avdelning"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ve,{children:"Roll"}),n.jsxs(Nt,{value:t.role,onValueChange:u=>r(h=>({...h,role:u})),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"user",children:"Anvndare"}),n.jsx(Ne,{value:"manager",children:"Chef"}),n.jsx(Ne,{value:"admin",children:"Administratr"})]})]})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Avdelning"}),n.jsxs(Nt,{value:t.department,onValueChange:u=>r(h=>({...h,department:u})),children:[n.jsx(jt,{children:n.jsx(kt,{placeholder:"Vlj..."})}),n.jsx(wt,{children:dhe.map(u=>n.jsx(Ne,{value:u,children:u},u))})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ve,{htmlFor:"job_title",children:"Befattning"}),n.jsx(De,{id:"job_title",placeholder:"t.ex. Tekniker",value:t.job_title,onChange:u=>r(h=>({...h,job_title:u.target.value}))})]}),n.jsxs("div",{children:[n.jsx(ve,{htmlFor:"phone",children:"Telefon"}),n.jsx(De,{id:"phone",placeholder:"070-123 45 67",value:t.phone,onChange:u=>r(h=>({...h,phone:u.target.value}))})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-sm font-semibold text-slate-900 flex items-center gap-2",children:[n.jsx(Fr,{className:"h-4 w-4"}),"Behrigheter"]}),n.jsx(ye,{type:"button",variant:"ghost",size:"sm",onClick:c,children:"Vlj alla"})]}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:S6.map(u=>n.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-slate-50 transition-colors",children:[n.jsx(wh,{id:`feature-${u.id}`,checked:t.selectedFeatures.includes(u.id),onCheckedChange:()=>l(u.id)}),n.jsxs(ve,{htmlFor:`feature-${u.id}`,className:"flex items-center gap-2 cursor-pointer text-sm",children:[n.jsx("span",{children:u.icon}),n.jsx("span",{children:u.label})]})]},u.id))})]}),s&&n.jsx("div",{className:"text-sm text-red-500 bg-red-50 p-3 rounded-lg",children:s}),n.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:e,children:"Avbryt"}),n.jsx(ye,{type:"submit",disabled:o.isPending,children:o.isPending?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-4 w-4 mr-2 animate-spin"}),"Skapar..."]}):n.jsxs(n.Fragment,{children:[n.jsx(pS,{className:"h-4 w-4 mr-2"}),"Skapa anvndare"]})})]})]})]})})}function iV(){const[e,t]=P.useState(""),[r,s]=P.useState("all"),[a,i]=P.useState(null),[o,l]=P.useState(null),[c,d]=P.useState(!1);$n();const{data:u=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list()}),{data:h=[]}=He({queryKey:["users"],queryFn:()=>oe.entities.User.list()}),x=u.map(j=>{const w=h.find(N=>N.email===j.user_email);return{...j,full_name:(w==null?void 0:w.full_name)||j.user_email,role:(w==null?void 0:w.role)||"user"}}).filter(j=>{const w=j.full_name.toLowerCase().includes(e.toLowerCase())||j.user_email.toLowerCase().includes(e.toLowerCase()),N=r==="all"||j.department===r;return w&&N}),b=[...new Set(u.map(j=>j.department).filter(Boolean))],y=u.length,v={};return u.forEach(j=>{const w=j.department||"vrigt";v[w]=(v[w]||0)+1}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-indigo-100 flex items-center justify-center",children:n.jsx(Fr,{className:"h-5 w-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Totalt anstllda"}),n.jsx("p",{className:"text-xl font-bold text-slate-900",children:y})]})]})})}),n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-emerald-100 flex items-center justify-center",children:n.jsx(Do,{className:"h-5 w-5 text-emerald-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Avdelningar"}),n.jsx("p",{className:"text-xl font-bold text-slate-900",children:Object.keys(v).length})]})]})})}),n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-purple-100 flex items-center justify-center",children:n.jsx(pS,{className:"h-5 w-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Chefer"}),n.jsx("p",{className:"text-xl font-bold text-slate-900",children:u.filter(j=>j.is_manager).length})]})]})})})]}),n.jsxs(ye,{onClick:()=>d(!0),className:"w-full h-12 rounded-2xl bg-slate-900 hover:bg-slate-800",children:[n.jsx(xr,{className:"h-5 w-5 mr-2"}),"Lgg till ny anvndare"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx(uo,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),n.jsx(De,{placeholder:"Sk anstllda...",value:e,onChange:j=>t(j.target.value),className:"pl-11 h-12 rounded-2xl border-0 bg-white shadow-sm"})]}),n.jsxs(Nt,{value:r,onValueChange:s,children:[n.jsx(jt,{className:"h-11 rounded-2xl",children:n.jsx(kt,{placeholder:"Vlj avdelning"})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"all",children:"Alla avdelningar"}),b.map(j=>n.jsx(Ne,{value:j,children:j},j))]})]})]}),n.jsx("div",{className:"space-y-3",children:x.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(Fr,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Inga anstllda hittades"})]})}):x.map((j,w)=>n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:w*.03},children:n.jsx(ce,{className:"border-0 shadow-sm hover:shadow-md transition-shadow",children:n.jsx(he,{className:"p-5",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:j.full_name}),j.is_manager&&n.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-indigo-100 text-indigo-700",children:"Chef"}),j.role==="admin"&&n.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-purple-100 text-purple-700",children:"Admin"})]}),n.jsxs("div",{className:"space-y-1 mt-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(_c,{className:"h-3 w-3"}),n.jsx("span",{children:j.user_email})]}),j.job_title&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(Do,{className:"h-3 w-3"}),n.jsx("span",{children:j.job_title})]}),j.department&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(Fr,{className:"h-3 w-3"}),n.jsx("span",{children:j.department})]}),j.start_date&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(_r,{className:"h-3 w-3"}),n.jsxs("span",{children:["Startade ",j.start_date]})]}),j.assigned_features&&j.assigned_features.length>0&&n.jsxs("div",{className:"flex items-center gap-1 mt-2 flex-wrap",children:[j.assigned_features.slice(0,3).map(N=>n.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-blue-50 text-blue-700",children:N},N)),j.assigned_features.length>3&&n.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs bg-slate-100 text-slate-600",children:["+",j.assigned_features.length-3]})]})]})]}),n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"text-right",children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Arbetstid/dag"}),n.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[j.normal_work_hours_per_day||8,"h"]})]}),j.vacation_balance!==void 0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Semester"}),n.jsxs("p",{className:"text-sm font-semibold text-emerald-600",children:[j.vacation_balance," dagar"]})]})]})}),n.jsx(ye,{size:"icon",variant:"ghost",onClick:()=>l(j),className:"h-8 w-8",title:"Hantera funktioner",children:n.jsx(z0,{className:"h-4 w-4"})}),n.jsx(ye,{size:"icon",variant:"ghost",onClick:()=>i(j),className:"h-8 w-8",title:"Redigera namn",children:n.jsx(ql,{className:"h-4 w-4"})})]})]})})})},j.id))}),a&&n.jsx(she,{employee:a,users:h,onClose:()=>i(null)}),o&&n.jsx(che,{employee:o,onClose:()=>l(null)}),c&&n.jsx(uhe,{onClose:()=>d(!1)})]})}function hhe(){const[e,t]=P.useState(""),[r,s]=P.useState(null),[a,i]=P.useState(Ce(ri(new Date),"yyyy-MM-dd")),[o,l]=P.useState(Ce(ni(new Date),"yyyy-MM-dd")),[c,d]=P.useState("month"),u=C=>{d(C);const M=new Date;switch(C){case"today":i(Ce(wu(M),"yyyy-MM-dd")),l(Ce(i1(M),"yyyy-MM-dd"));break;case"week":i(Ce(Fa(M,{weekStartsOn:1}),"yyyy-MM-dd")),l(Ce(Pc(M,{weekStartsOn:1}),"yyyy-MM-dd"));break;case"month":i(Ce(ri(M),"yyyy-MM-dd")),l(Ce(ni(M),"yyyy-MM-dd"));break}},{data:h=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list(),initialData:[]}),{data:g=[]}=He({queryKey:["users"],queryFn:()=>oe.entities.User.list(),initialData:[]}),{data:x=[]}=He({queryKey:["all-time-entries",a,o],queryFn:async()=>(await oe.entities.TimeEntry.list()).filter(M=>{const I=new Date(M.date);return I>=new Date(a)&&I<=new Date(o)}),initialData:[]}),{data:b=[]}=He({queryKey:["time-entries",r==null?void 0:r.email,a,o],queryFn:async()=>r?(await oe.entities.TimeEntry.filter({employee_email:r.email})).filter(M=>{const I=new Date(M.date);return I>=new Date(a)&&I<=new Date(o)}):[],enabled:!!r,initialData:[]}),{data:y=[]}=He({queryKey:["projects"],queryFn:()=>oe.entities.Project.list(),initialData:[]}),v=g.filter(C=>{var F,U,W;const M=e.toLowerCase(),I=h.find(D=>D.user_email===C.email);return((F=C.full_name)==null?void 0:F.toLowerCase().includes(M))||((U=C.email)==null?void 0:U.toLowerCase().includes(M))||((W=I==null?void 0:I.department)==null?void 0:W.toLowerCase().includes(M))}),j=()=>{if(!x.length)return{totalHours:0,totalEmployees:0,totalDays:0,employeeHours:{}};const C=x.reduce((U,W)=>U+(W.total_hours||0),0),M=new Set(x.map(U=>U.employee_email)),I=new Set(x.map(U=>U.date)),F={};return x.forEach(U=>{F[U.employee_email]||(F[U.employee_email]=0),F[U.employee_email]+=U.total_hours||0}),{totalHours:C,totalEmployees:M.size,totalDays:I.size,employeeHours:F}},w=()=>{if(!b.length)return{totalHours:0,projects:{}};const C=b.reduce((I,F)=>I+(F.total_hours||0),0),M={};return b.forEach(I=>{I.project_allocations&&I.project_allocations.forEach(F=>{const U=y.find(D=>D.id===F.project_id),W=(U==null?void 0:U.name)||F.project_id;M[W]||(M[W]={hours:0,count:0}),M[W].hours+=F.hours,M[W].count+=1})}),{totalHours:C,projects:M}},N=j(),A=r?w():null;return n.jsxs("div",{className:"space-y-6",children:[n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(Ct,{className:"flex items-center gap-2",children:[n.jsx(Fr,{className:"h-5 w-5"}),"Anstlldversikt"]}),n.jsxs(it,{variant:"outline",className:"text-sm",children:[v.length," anvndare"]})]})}),n.jsxs(he,{className:"space-y-4",children:[n.jsxs("div",{className:"flex gap-2 mb-4",children:[n.jsx(ye,{variant:c==="today"?"default":"outline",size:"sm",onClick:()=>u("today"),className:c==="today"?"bg-slate-900":"",children:"Idag"}),n.jsx(ye,{variant:c==="week"?"default":"outline",size:"sm",onClick:()=>u("week"),className:c==="week"?"bg-slate-900":"",children:"1V"}),n.jsx(ye,{variant:c==="month"?"default":"outline",size:"sm",onClick:()=>u("month"),className:c==="month"?"bg-slate-900":"",children:"Denna mnad"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-blue-50 to-indigo-50",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-100 flex items-center justify-center",children:n.jsx(Vt,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[N.totalHours.toFixed(1),"h"]}),n.jsx("p",{className:"text-xs text-slate-600",children:"Total arbetstid"})]})]})})}),n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-emerald-50 to-teal-50",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-emerald-100 flex items-center justify-center",children:n.jsx(Fr,{className:"h-5 w-5 text-emerald-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:N.totalEmployees}),n.jsx("p",{className:"text-xs text-slate-600",children:"Aktiva anvndare"})]})]})})}),n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-purple-50 to-pink-50",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-purple-100 flex items-center justify-center",children:n.jsx(_r,{className:"h-5 w-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:N.totalDays}),n.jsx("p",{className:"text-xs text-slate-600",children:"Arbetsdagar"})]})]})})})]}),n.jsxs("div",{className:"relative",children:[n.jsx(uo,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),n.jsx(De,{placeholder:"Sk p namn, email eller avdelning...",value:e,onChange:C=>t(C.target.value),className:"pl-10"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:v.map(C=>{const M=h.find(F=>F.user_email===C.email),I=N.employeeHours[C.email]||0;return n.jsx(ce,{className:"border-0 shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>s(C),children:n.jsxs(he,{className:"p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:C.full_name}),n.jsx("p",{className:"text-sm text-slate-500",children:C.email})]}),n.jsx(it,{className:C.role==="admin"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700",children:C.role==="admin"?"Admin":"User"})]}),(M==null?void 0:M.department)&&n.jsxs("p",{className:"text-xs text-slate-600 mt-2",children:[" ",M.department]}),(M==null?void 0:M.job_title)&&n.jsxs("p",{className:"text-xs text-slate-600",children:[" ",M.job_title]}),I>0&&n.jsx("div",{className:"mt-2 pt-2 border-t border-slate-200",children:n.jsxs("p",{className:"text-xs text-slate-500",children:[n.jsx(Vt,{className:"inline h-3 w-3 mr-1"}),I.toFixed(1),"h denna period"]})})]})},C.id)})}),v.length===0&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Fr,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-slate-600",children:"Inga anvndare hittades"})]})]})]}),n.jsx(Xn,{open:!!r,onOpenChange:()=>s(null),children:n.jsxs(Yn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(er,{children:n.jsxs(tr,{className:"text-xl",children:[r==null?void 0:r.full_name," - Tidrapporter"]})}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ye,{variant:c==="today"?"default":"outline",size:"sm",onClick:()=>u("today"),className:c==="today"?"bg-slate-900":"",children:"Idag"}),n.jsx(ye,{variant:c==="week"?"default":"outline",size:"sm",onClick:()=>u("week"),className:c==="week"?"bg-slate-900":"",children:"1V"}),n.jsx(ye,{variant:c==="month"?"default":"outline",size:"sm",onClick:()=>u("month"),className:c==="month"?"bg-slate-900":"",children:"Denna mnad"})]}),n.jsx(ce,{className:"border-0 shadow-sm bg-slate-50",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{className:"text-sm font-medium",children:"Frn datum"}),n.jsx(De,{type:"date",value:a,onChange:C=>{i(C.target.value),d(null)},className:"h-10"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{className:"text-sm font-medium",children:"Till datum"}),n.jsx(De,{type:"date",value:o,onChange:C=>{l(C.target.value),d(null)},className:"h-10"})]})]})})}),A&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-blue-50 to-indigo-50",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-100 flex items-center justify-center",children:n.jsx(Vt,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[A.totalHours.toFixed(1),"h"]}),n.jsx("p",{className:"text-xs text-slate-600",children:"Total arbetstid"})]})]})})}),n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-emerald-50 to-teal-50",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-emerald-100 flex items-center justify-center",children:n.jsx(_r,{className:"h-5 w-5 text-emerald-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:b.length}),n.jsx("p",{className:"text-xs text-slate-600",children:"Arbetsdagar"})]})]})})}),n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-purple-50 to-pink-50",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-purple-100 flex items-center justify-center",children:n.jsx(Do,{className:"h-5 w-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:Object.keys(A.projects).length}),n.jsx("p",{className:"text-xs text-slate-600",children:"Projekt"})]})]})})})]}),A&&Object.keys(A.projects).length>0&&n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"text-base flex items-center gap-2",children:[n.jsx(ta,{className:"h-4 w-4"}),"Projektfrdelning"]})}),n.jsx(he,{className:"space-y-2",children:Object.entries(A.projects).map(([C,M])=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-slate-900",children:C}),n.jsxs("p",{className:"text-xs text-slate-500",children:[M.count," registreringar"]})]}),n.jsxs(it,{variant:"outline",className:"text-sm font-semibold",children:[M.hours.toFixed(1),"h"]})]},C))})]}),n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"text-base flex items-center gap-2",children:[n.jsx(Vt,{className:"h-4 w-4"}),"Tidrapporter"]})}),n.jsx(he,{className:"space-y-2",children:b.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(_r,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-slate-600",children:"Inga tidrapporter fr vald period"})]}):b.map(C=>{var M;return n.jsxs("div",{className:"p-3 border border-slate-200 rounded-lg space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-900",children:Ce(new Date(C.date),"EEEE d MMMM yyyy",{locale:ut})}),n.jsxs("p",{className:"text-sm text-slate-500",children:[C.clock_in_time&&Ce(new Date(C.clock_in_time),"HH:mm")," -",C.clock_out_time&&Ce(new Date(C.clock_out_time),"HH:mm")]})]}),n.jsxs(it,{variant:"outline",className:"font-semibold",children:[(M=C.total_hours)==null?void 0:M.toFixed(1),"h"]})]}),C.project_allocations&&C.project_allocations.length>0&&n.jsx("div",{className:"space-y-1 pl-4 border-l-2 border-slate-200",children:C.project_allocations.map((I,F)=>{const U=y.find(W=>W.id===I.project_id);return n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsxs("span",{className:"text-slate-600",children:[(U==null?void 0:U.name)||I.project_id," - ",I.category]}),n.jsxs("span",{className:"font-medium text-slate-900",children:[I.hours,"h"]})]},F)})})]},C.id)})})]})]})]})})]})}function oV(){const[e,t]=P.useState(Ce(new Date,"yyyy-MM")),[r,s]=P.useState(!1),{data:a=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list()}),{data:i=[]}=He({queryKey:["timeEntries"],queryFn:()=>oe.entities.TimeEntry.list()}),o=ri(new Date(e+"-01")),l=ni(o),c=i.filter(u=>{const h=new Date(u.date);return h>=o&&h<=l&&u.status==="approved"}),d=()=>{const u=a.map(y=>{const v=c.filter(N=>N.employee_email===y.user_email),j=v.reduce((N,A)=>N+((A.total_hours||0)-(A.overtime_hours||0)),0),w=v.reduce((N,A)=>N+(A.overtime_hours||0),0);return{email:y.user_email,name:y.user_email,department:y.department,regularHours:j.toFixed(2),overtimeHours:w.toFixed(2),totalHours:(j+w).toFixed(2),vacationDays:y.vacation_used_this_year||0,sickDays:y.sick_days_this_year||0}}),h=[["Email","Avdelning","Reg. timmar","vertid","Totalt timmar","Semester","Sjukdagar"].join(","),...u.map(y=>[y.email,y.department,y.regularHours,y.overtimeHours,y.totalHours,y.vacationDays,y.sickDays].join(","))].join(`
`),g=new Blob([h],{type:"text/csv;charset=utf-8;"}),x=window.URL.createObjectURL(g),b=document.createElement("a");b.href=x,b.download=`lon-underlag-${e}.csv`,b.click()};return n.jsxs("div",{className:"space-y-4",children:[n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-slate-900 to-slate-800 text-white",children:n.jsx(he,{className:"p-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(sX,{className:"h-8 w-8"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-1",children:"Lneunderlag"}),n.jsx("p",{className:"text-sm text-white/70",children:"Exportera godknd tid fr lnehantering"})]})]})})}),n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"Vlj lneperiod"}),n.jsxs(Nt,{value:e,onValueChange:t,children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:Ce(new Date,"yyyy-MM"),children:Ce(new Date,"MMMM yyyy",{locale:ut})}),n.jsx(Ne,{value:Ce(new Date(new Date().setMonth(new Date().getMonth()-1)),"yyyy-MM"),children:Ce(new Date(new Date().setMonth(new Date().getMonth()-1)),"MMMM yyyy",{locale:ut})}),n.jsx(Ne,{value:Ce(new Date(new Date().setMonth(new Date().getMonth()-2)),"yyyy-MM"),children:Ce(new Date(new Date().setMonth(new Date().getMonth()-2)),"MMMM yyyy",{locale:ut})})]})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Godknda tider"}),n.jsx("span",{className:"text-lg font-bold text-slate-900",children:c.length})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Totalt timmar"}),n.jsxs("span",{className:"text-lg font-bold text-slate-900",children:[c.reduce((u,h)=>u+(h.total_hours||0),0).toFixed(0),"h"]})]})]}),n.jsxs(ye,{onClick:d,className:"w-full h-12",disabled:c.length===0,children:[n.jsx(Eo,{className:"w-4 h-4 mr-2"}),"Exportera lneunderlag (CSV)"]})]})})}),n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsx(Ct,{className:"text-base",children:"Ls lneperiod"})}),n.jsxs(he,{className:"space-y-3",children:[n.jsx("p",{className:"text-sm text-slate-600",children:"Nr en period r lst kan inga ndringar gras av anstllda. Detta br gras efter att lneunderlaget exporterats."}),n.jsxs(ye,{variant:r?"destructive":"outline",onClick:()=>s(!r),className:"w-full",children:[n.jsx(n3,{className:"w-4 h-4 mr-2"}),r?"Ls upp period":"Ls period fr ndringar"]})]})]}),n.jsx(ce,{className:"border-0 shadow-sm bg-blue-50",children:n.jsx(he,{className:"p-4",children:n.jsxs("p",{className:"text-sm text-blue-900",children:[" ",n.jsx("strong",{children:"Tips:"})," Exportera alltid lneunderlaget innan du lser perioden. Efter att perioden r lst kan du skert skicka underlaget till lnesystemet."]})})})]})}function lV(){const[e,t]=P.useState({forgotClockOut:{enabled:!0,hours:12,channels:["app","email"]},overtimeWarning:{enabled:!0,threshold:10,channels:["app"]},approvalNeeded:{enabled:!0,channels:["app","email"]},weeklyReminder:{enabled:!1,day:"friday",time:"15:00",channels:["email"]}}),r=()=>{alert("Instllningar sparade!")};return n.jsxs("div",{className:"space-y-4",children:[n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-slate-900 to-slate-800 text-white",children:n.jsx(he,{className:"p-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(cs,{className:"h-8 w-8"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-1",children:"Pminnelser & Notiser"}),n.jsx("p",{className:"text-sm text-white/70",children:"Konfigurera automatiska pminnelser fr anstllda"})]})]})})}),n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ct,{className:"text-base",children:"Glmd utstmpling"}),n.jsx(Io,{checked:e.forgotClockOut.enabled,onCheckedChange:s=>t(a=>({...a,forgotClockOut:{...a.forgotClockOut,enabled:s}}))})]})}),e.forgotClockOut.enabled&&n.jsxs(he,{className:"space-y-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Pminn efter (timmar)"}),n.jsx(De,{type:"number",value:e.forgotClockOut.hours,onChange:s=>t(a=>({...a,forgotClockOut:{...a.forgotClockOut,hours:Number(s.target.value)}}))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Kanaler"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ye,{variant:e.forgotClockOut.channels.includes("app")?"default":"outline",size:"sm",onClick:()=>{const s=e.forgotClockOut.channels.includes("app")?e.forgotClockOut.channels.filter(a=>a!=="app"):[...e.forgotClockOut.channels,"app"];t(a=>({...a,forgotClockOut:{...a.forgotClockOut,channels:s}}))},children:[n.jsx(cs,{className:"h-3 w-3 mr-1"}),"App"]}),n.jsxs(ye,{variant:e.forgotClockOut.channels.includes("email")?"default":"outline",size:"sm",onClick:()=>{const s=e.forgotClockOut.channels.includes("email")?e.forgotClockOut.channels.filter(a=>a!=="email"):[...e.forgotClockOut.channels,"email"];t(a=>({...a,forgotClockOut:{...a.forgotClockOut,channels:s}}))},children:[n.jsx(_c,{className:"h-3 w-3 mr-1"}),"Email"]})]})]})]})]}),n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ct,{className:"text-base",children:"vertidsvarning"}),n.jsx(Io,{checked:e.overtimeWarning.enabled,onCheckedChange:s=>t(a=>({...a,overtimeWarning:{...a.overtimeWarning,enabled:s}}))})]})}),e.overtimeWarning.enabled&&n.jsx(he,{className:"space-y-3",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Varna efter (timmar per dag)"}),n.jsx(De,{type:"number",value:e.overtimeWarning.threshold,onChange:s=>t(a=>({...a,overtimeWarning:{...a.overtimeWarning,threshold:Number(s.target.value)}}))}),n.jsx("p",{className:"text-xs text-slate-500",children:"Anstlld fr pminnelse nr de jobbar mer n detta antal timmar"})]})})]}),n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ct,{className:"text-base",children:"Godknnandenotiser till chefer"}),n.jsx(Io,{checked:e.approvalNeeded.enabled,onCheckedChange:s=>t(a=>({...a,approvalNeeded:{...a.approvalNeeded,enabled:s}}))})]})}),n.jsx(he,{children:n.jsx("p",{className:"text-sm text-slate-600",children:"Chefer fr notiser nr nya anskningar behver godknnas"})})]}),n.jsxs(ye,{onClick:r,className:"w-full h-12",children:[n.jsx(og,{className:"w-4 h-4 mr-2"}),"Spara instllningar"]}),n.jsx(ce,{className:"border-0 shadow-sm bg-blue-50",children:n.jsx(he,{className:"p-4",children:n.jsxs("p",{className:"text-sm text-blue-900",children:[" ",n.jsx("strong",{children:"Kom ihg:"})," Pminnelser via SMS och push-notiser krver ytterligare konfiguration. Kontakta support fr att aktivera dessa funktioner."]})})})]})}function fhe(){const[e,t]=P.useState("Test-meddelande"),[r,s]=P.useState("Detta r ett testmeddelande fr push-notifikationer."),[a,i]=P.useState(!1),[o,l]=P.useState(null),[c,d]=P.useState(!1);P.useEffect(()=>{d("Notification"in window)},[]);const u=async()=>{if(!("Notification"in window)){alert("Din webblsare stder inte push-notifikationer");return}if(Notification.permission==="granted"){alert("Du har redan godknt notifikationer");return}await Notification.requestPermission()==="granted"&&new Notification("Notifikationer aktiverade!",{icon:"/logo.png",body:"Du kommer nu att motta push-notifikationer"})},h=async()=>{if(!e.trim()||!r.trim()){alert("Fyll i rubrik och meddelande");return}i(!0),l(null);try{const g=await oe.functions.invoke("sendPushNotification",{title:e.trim(),message:r.trim()});l({success:!0,data:g.data}),Notification.permission==="granted"&&new Notification(e,{body:r,icon:"/logo.png"})}catch(g){l({success:!1,error:g.message})}i(!1)};return n.jsxs(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-blue-50 to-indigo-50",children:n.jsx(At,{children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-12 w-12 rounded-xl bg-blue-100 flex items-center justify-center",children:n.jsx(cs,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx(Ct,{children:"Push-notifikationer"}),n.jsx("p",{className:"text-sm text-slate-600 mt-1",children:c?`Status: ${Notification.permission==="granted"?" Aktiverad":" Behver godknnas"}`:"Din webblsare stder inte notifikationer"})]})]})})}),c&&Notification.permission!=="granted"&&n.jsx(ce,{className:"border-0 shadow-sm bg-amber-50 border-l-4 border-amber-500",children:n.jsxs(he,{className:"p-4",children:[n.jsx("p",{className:"text-sm text-amber-900 mb-3",children:"Du behver godknna notifikationer fr att testa funktionen."}),n.jsx(ye,{onClick:u,className:"bg-amber-600 hover:bg-amber-700",children:"Aktivera notifikationer"})]})}),n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ve,{className:"font-semibold mb-2 block",children:"Rubrik"}),n.jsx(De,{value:e,onChange:g=>t(g.target.value),placeholder:"T.ex. Nytt tidrapport klart",disabled:a,className:"h-11"})]}),n.jsxs("div",{children:[n.jsx(ve,{className:"font-semibold mb-2 block",children:"Meddelande"}),n.jsx(Zn,{value:r,onChange:g=>s(g.target.value),placeholder:"Skriv testmeddelandet hr...",disabled:a,className:"min-h-24 resize-none"})]}),n.jsx(ye,{onClick:h,disabled:a||!c,className:"w-full h-11 bg-indigo-600 hover:bg-indigo-700",children:a?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-4 w-4 mr-2 animate-spin"}),"Skickar..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Fm,{className:"h-4 w-4 mr-2"}),"Skicka testnotifiering"]})})]})})}),o&&n.jsx(tt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:n.jsx(ce,{className:`border-0 shadow-sm ${o.success?"bg-emerald-50":"bg-red-50"}`,children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[o.success?n.jsx($r,{className:"h-5 w-5 text-emerald-600 mt-0.5 flex-shrink-0"}):n.jsx(ja,{className:"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:`font-semibold ${o.success?"text-emerald-900":"text-red-900"}`,children:o.success?"Notifiering skickad!":"Fel vid skickning"}),n.jsx("p",{className:`text-sm mt-1 ${o.success?"text-emerald-700":"text-red-700"}`,children:o.success?o.data.message:o.error})]})]})})})}),n.jsxs(ce,{className:"border-0 shadow-sm bg-slate-50",children:[n.jsx(At,{children:n.jsx(Ct,{className:"text-base",children:"Info"})}),n.jsxs(he,{className:"text-sm text-slate-600 space-y-2",children:[n.jsx("p",{children:" Notifikationer skickas till alla anvndare i systemet"}),n.jsx("p",{children:" En test-notifiering visas ven lokalt p din enhet"}),n.jsx("p",{children:" Notifikationer sparas i systemet fr senare lsning"}),n.jsx("p",{children:" Anvndare kan aktivera/inaktivera notifikationer i sina instllningar"})]})]})]})}var cV="AlertDialog",[mhe]=ho(cV,[Dz]),Ah=Dz(),dV=e=>{const{__scopeAlertDialog:t,...r}=e,s=Ah(t);return n.jsx(fA,{...s,...r,modal:!0})};dV.displayName=cV;var phe="AlertDialogTrigger",xhe=P.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=Ah(r);return n.jsx(Xz,{...a,...s,ref:t})});xhe.displayName=phe;var ghe="AlertDialogPortal",uV=e=>{const{__scopeAlertDialog:t,...r}=e,s=Ah(t);return n.jsx(mA,{...s,...r})};uV.displayName=ghe;var vhe="AlertDialogOverlay",hV=P.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=Ah(r);return n.jsx(ty,{...a,...s,ref:t})});hV.displayName=vhe;var rx="AlertDialogContent",[yhe,bhe]=mhe(rx),jhe=Ate("AlertDialogContent"),fV=P.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:s,...a}=e,i=Ah(r),o=P.useRef(null),l=Vn(t,o),c=P.useRef(null);return n.jsx(Que,{contentName:rx,titleName:mV,docsSlug:"alert-dialog",children:n.jsx(yhe,{scope:r,cancelRef:c,children:n.jsxs(ny,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:fn(a.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[n.jsx(jhe,{children:s}),n.jsx(_he,{contentRef:o})]})})})});fV.displayName=rx;var mV="AlertDialogTitle",pV=P.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=Ah(r);return n.jsx(ry,{...a,...s,ref:t})});pV.displayName=mV;var xV="AlertDialogDescription",gV=P.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=Ah(r);return n.jsx(sy,{...a,...s,ref:t})});gV.displayName=xV;var whe="AlertDialogAction",vV=P.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=Ah(r);return n.jsx(Ij,{...a,...s,ref:t})});vV.displayName=whe;var yV="AlertDialogCancel",bV=P.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,{cancelRef:a}=bhe(yV,r),i=Ah(r),o=Vn(t,a);return n.jsx(Ij,{...i,...s,ref:o})});bV.displayName=yV;var _he=({contentRef:e})=>{const t=`\`${rx}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${rx}\` by passing a \`${xV}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${rx}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return P.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},Nhe=dV,khe=uV,jV=hV,wV=fV,_V=vV,NV=bV,kV=pV,SV=gV;const ay=Nhe,She=khe,PV=P.forwardRef(({className:e,...t},r)=>n.jsx(jV,{className:Yt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));PV.displayName=jV.displayName;const yg=P.forwardRef(({className:e,...t},r)=>n.jsxs(She,{children:[n.jsx(PV,{}),n.jsx(wV,{ref:r,className:Yt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));yg.displayName=wV.displayName;const bg=({className:e,...t})=>n.jsx("div",{className:Yt("flex flex-col space-y-2 text-center sm:text-left",e),...t});bg.displayName="AlertDialogHeader";const jg=({className:e,...t})=>n.jsx("div",{className:Yt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});jg.displayName="AlertDialogFooter";const wg=P.forwardRef(({className:e,...t},r)=>n.jsx(kV,{ref:r,className:Yt("text-lg font-semibold",e),...t}));wg.displayName=kV.displayName;const _g=P.forwardRef(({className:e,...t},r)=>n.jsx(SV,{ref:r,className:Yt("text-sm text-muted-foreground",e),...t}));_g.displayName=SV.displayName;const Ng=P.forwardRef(({className:e,...t},r)=>n.jsx(_V,{ref:r,className:Yt(m3(),e),...t}));Ng.displayName=_V.displayName;const kg=P.forwardRef(({className:e,...t},r)=>n.jsx(NV,{ref:r,className:Yt(m3({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));kg.displayName=NV.displayName;function Phe(e,t){return P.useReducer((r,s)=>t[r][s]??r,e)}var vA="ScrollArea",[AV]=ho(vA),[Ahe,Ac]=AV(vA),CV=P.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:s="hover",dir:a,scrollHideDelay:i=600,...o}=e,[l,c]=P.useState(null),[d,u]=P.useState(null),[h,g]=P.useState(null),[x,b]=P.useState(null),[y,v]=P.useState(null),[j,w]=P.useState(0),[N,A]=P.useState(0),[C,M]=P.useState(!1),[I,F]=P.useState(!1),U=Vn(t,D=>c(D)),W=fg(a);return n.jsx(Ahe,{scope:r,type:s,dir:W,scrollHideDelay:i,scrollArea:l,viewport:d,onViewportChange:u,content:h,onContentChange:g,scrollbarX:x,onScrollbarXChange:b,scrollbarXEnabled:C,onScrollbarXEnabledChange:M,scrollbarY:y,onScrollbarYChange:v,scrollbarYEnabled:I,onScrollbarYEnabledChange:F,onCornerWidthChange:w,onCornerHeightChange:A,children:n.jsx(cn.div,{dir:W,...o,ref:U,style:{position:"relative","--radix-scroll-area-corner-width":j+"px","--radix-scroll-area-corner-height":N+"px",...e.style}})})});CV.displayName=vA;var TV="ScrollAreaViewport",EV=P.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:s,nonce:a,...i}=e,o=Ac(TV,r),l=P.useRef(null),c=Vn(t,l,o.onViewportChange);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),n.jsx(cn.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:n.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});EV.displayName=TV;var Su="ScrollAreaScrollbar",yA=P.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=Ac(Su,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return P.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),a.type==="hover"?n.jsx(Che,{...s,ref:t,forceMount:r}):a.type==="scroll"?n.jsx(The,{...s,ref:t,forceMount:r}):a.type==="auto"?n.jsx(OV,{...s,ref:t,forceMount:r}):a.type==="always"?n.jsx(bA,{...s,ref:t}):null});yA.displayName=Su;var Che=P.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=Ac(Su,e.__scopeScrollArea),[i,o]=P.useState(!1);return P.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},u=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),n.jsx(Sc,{present:r||i,children:n.jsx(OV,{"data-state":i?"visible":"hidden",...s,ref:t})})}),The=P.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=Ac(Su,e.__scopeScrollArea),i=e.orientation==="horizontal",o=$j(()=>c("SCROLL_END"),100),[l,c]=Phe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return P.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,a.scrollHideDelay,c]),P.useEffect(()=>{const d=a.viewport,u=i?"scrollLeft":"scrollTop";if(d){let h=d[u];const g=()=>{const x=d[u];h!==x&&(c("SCROLL"),o()),h=x};return d.addEventListener("scroll",g),()=>d.removeEventListener("scroll",g)}},[a.viewport,i,c,o]),n.jsx(Sc,{present:r||l!=="hidden",children:n.jsx(bA,{"data-state":l==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:fn(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:fn(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),OV=P.forwardRef((e,t)=>{const r=Ac(Su,e.__scopeScrollArea),{forceMount:s,...a}=e,[i,o]=P.useState(!1),l=e.orientation==="horizontal",c=$j(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?d:u)}},10);return Ex(r.viewport,c),Ex(r.content,c),n.jsx(Sc,{present:s||i,children:n.jsx(bA,{"data-state":i?"visible":"hidden",...a,ref:t})})}),bA=P.forwardRef((e,t)=>{const{orientation:r="vertical",...s}=e,a=Ac(Su,e.__scopeScrollArea),i=P.useRef(null),o=P.useRef(0),[l,c]=P.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=RV(l.viewport,l.content),u={...s,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:g=>i.current=g,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:g=>o.current=g};function h(g,x){return Ihe(g,o.current,l,x)}return r==="horizontal"?n.jsx(Ehe,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const g=a.viewport.scrollLeft,x=P6(g,l,a.dir);i.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:g=>{a.viewport&&(a.viewport.scrollLeft=g)},onDragScroll:g=>{a.viewport&&(a.viewport.scrollLeft=h(g,a.dir))}}):r==="vertical"?n.jsx(Ohe,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const g=a.viewport.scrollTop,x=P6(g,l);i.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:g=>{a.viewport&&(a.viewport.scrollTop=g)},onDragScroll:g=>{a.viewport&&(a.viewport.scrollTop=h(g))}}):null}),Ehe=P.forwardRef((e,t)=>{const{sizes:r,onSizesChange:s,...a}=e,i=Ac(Su,e.__scopeScrollArea),[o,l]=P.useState(),c=P.useRef(null),d=Vn(t,c,i.onScrollbarXChange);return P.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),n.jsx(LV,{"data-orientation":"horizontal",...a,ref:d,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Fj(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,h)=>{if(i.viewport){const g=i.viewport.scrollLeft+u.deltaX;e.onWheelScroll(g),$V(g,h)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&s({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:c1(o.paddingLeft),paddingEnd:c1(o.paddingRight)}})}})}),Ohe=P.forwardRef((e,t)=>{const{sizes:r,onSizesChange:s,...a}=e,i=Ac(Su,e.__scopeScrollArea),[o,l]=P.useState(),c=P.useRef(null),d=Vn(t,c,i.onScrollbarYChange);return P.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),n.jsx(LV,{"data-orientation":"vertical",...a,ref:d,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Fj(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,h)=>{if(i.viewport){const g=i.viewport.scrollTop+u.deltaY;e.onWheelScroll(g),$V(g,h)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&s({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:c1(o.paddingTop),paddingEnd:c1(o.paddingBottom)}})}})}),[Mhe,MV]=AV(Su),LV=P.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:s,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:h,...g}=e,x=Ac(Su,r),[b,y]=P.useState(null),v=Vn(t,U=>y(U)),j=P.useRef(null),w=P.useRef(""),N=x.viewport,A=s.content-s.viewport,C=io(u),M=io(c),I=$j(h,10);function F(U){if(j.current){const W=U.clientX-j.current.left,D=U.clientY-j.current.top;d({x:W,y:D})}}return P.useEffect(()=>{const U=W=>{const D=W.target;(b==null?void 0:b.contains(D))&&C(W,A)};return document.addEventListener("wheel",U,{passive:!1}),()=>document.removeEventListener("wheel",U,{passive:!1})},[N,b,A,C]),P.useEffect(M,[s,M]),Ex(b,I),Ex(x.content,I),n.jsx(Mhe,{scope:r,scrollbar:b,hasThumb:a,onThumbChange:io(i),onThumbPointerUp:io(o),onThumbPositionChange:M,onThumbPointerDown:io(l),children:n.jsx(cn.div,{...g,ref:v,style:{position:"absolute",...g.style},onPointerDown:fn(e.onPointerDown,U=>{U.button===0&&(U.target.setPointerCapture(U.pointerId),j.current=b.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),F(U))}),onPointerMove:fn(e.onPointerMove,F),onPointerUp:fn(e.onPointerUp,U=>{const W=U.target;W.hasPointerCapture(U.pointerId)&&W.releasePointerCapture(U.pointerId),document.body.style.webkitUserSelect=w.current,x.viewport&&(x.viewport.style.scrollBehavior=""),j.current=null})})})}),l1="ScrollAreaThumb",DV=P.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=MV(l1,e.__scopeScrollArea);return n.jsx(Sc,{present:r||a.hasThumb,children:n.jsx(Lhe,{ref:t,...s})})}),Lhe=P.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:s,...a}=e,i=Ac(l1,r),o=MV(l1,r),{onThumbPositionChange:l}=o,c=Vn(t,h=>o.onThumbChange(h)),d=P.useRef(void 0),u=$j(()=>{d.current&&(d.current(),d.current=void 0)},100);return P.useEffect(()=>{const h=i.viewport;if(h){const g=()=>{if(u(),!d.current){const x=Rhe(h,l);d.current=x,l()}};return l(),h.addEventListener("scroll",g),()=>h.removeEventListener("scroll",g)}},[i.viewport,u,l]),n.jsx(cn.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:fn(e.onPointerDownCapture,h=>{const x=h.target.getBoundingClientRect(),b=h.clientX-x.left,y=h.clientY-x.top;o.onThumbPointerDown({x:b,y})}),onPointerUp:fn(e.onPointerUp,o.onThumbPointerUp)})});DV.displayName=l1;var jA="ScrollAreaCorner",IV=P.forwardRef((e,t)=>{const r=Ac(jA,e.__scopeScrollArea),s=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&s?n.jsx(Dhe,{...e,ref:t}):null});IV.displayName=jA;var Dhe=P.forwardRef((e,t)=>{const{__scopeScrollArea:r,...s}=e,a=Ac(jA,r),[i,o]=P.useState(0),[l,c]=P.useState(0),d=!!(i&&l);return Ex(a.scrollbarX,()=>{var h;const u=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(u),c(u)}),Ex(a.scrollbarY,()=>{var h;const u=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(u),o(u)}),d?n.jsx(cn.div,{...s,ref:t,style:{width:i,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function c1(e){return e?parseInt(e,10):0}function RV(e,t){const r=e/t;return isNaN(r)?0:r}function Fj(e){const t=RV(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-r)*t;return Math.max(s,18)}function Ihe(e,t,r,s="ltr"){const a=Fj(r),i=a/2,o=t||i,l=a-o,c=r.scrollbar.paddingStart+o,d=r.scrollbar.size-r.scrollbar.paddingEnd-l,u=r.content-r.viewport,h=s==="ltr"?[0,u]:[u*-1,0];return FV([c,d],h)(e)}function P6(e,t,r="ltr"){const s=Fj(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,l=i-s,c=r==="ltr"?[0,o]:[o*-1,0],d=W0(e,c);return FV([0,o],[0,l])(d)}function FV(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(r-e[0])}}function $V(e,t){return e>0&&e<t}var Rhe=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},s=0;return(function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&t(),r=i,s=window.requestAnimationFrame(a)})(),()=>window.cancelAnimationFrame(s)};function $j(e,t){const r=io(e),s=P.useRef(0);return P.useEffect(()=>()=>window.clearTimeout(s.current),[]),P.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(r,t)},[r,t])}function Ex(e,t){const r=io(t);wa(()=>{let s=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(s),a.unobserve(e)}}},[e,r])}var BV=CV,Fhe=EV,$he=IV;const qV=P.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(BV,{ref:s,className:Yt("relative overflow-hidden",e),...r,children:[n.jsx(Fhe,{className:"h-full w-full rounded-[inherit]",children:t}),n.jsx(zV,{}),n.jsx($he,{})]}));qV.displayName=BV.displayName;const zV=P.forwardRef(({className:e,orientation:t="vertical",...r},s)=>n.jsx(yA,{ref:s,orientation:t,className:Yt("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:n.jsx(DV,{className:"relative flex-1 rounded-full bg-border"})}));zV.displayName=yA.displayName;function Bhe({open:e,onClose:t,onSuccess:r}){const[s,a]=P.useState(!1),[i,o]=P.useState(!1),[l,c]=P.useState(null),[d,u]=P.useState({registration_number:"",gps_device_id:"",make:"",model:"",year:"",category:"personbil",vehicle_type:"personbil",fuel_type:"bensin",assigned_driver:"",current_mileage:"",next_service_date:"",next_inspection_date:"",status:"aktiv",image_url:"",notes:""}),{data:h=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list()}),g=async y=>{const v=y.target.files[0];if(v){o(!0);try{const{file_url:j}=await oe.integrations.Core.UploadFile({file:v});c(j);const w=await oe.integrations.Core.InvokeLLM({prompt:"Analysera denna bild och extrahera fordonsuppgifter: registreringsnummer, mrke, modell, rsmodell, fordonstyp, brnsletyp. Om ngot saknas, anvnd null.",file_urls:[j],response_json_schema:{type:"object",properties:{registration_number:{type:["string","null"]},make:{type:["string","null"]},model:{type:["string","null"]},year:{type:["number","null"]},vehicle_type:{type:["string","null"]},fuel_type:{type:["string","null"]}}}});u(N=>({...N,...Object.fromEntries(Object.entries(w).filter(([A,C])=>C!==null)),image_url:j}))}catch(j){console.error("Error analyzing image:",j)}o(!1)}},x=async y=>{y.preventDefault(),a(!0);try{const v={...d,year:d.year?Number(d.year):void 0,current_mileage:d.current_mileage?Number(d.current_mileage):void 0};Object.keys(v).forEach(j=>{v[j]===""&&delete v[j]}),await oe.entities.Vehicle.create(v),r&&r()}catch(v){console.error("Error creating vehicle:",v),alert("Ett fel uppstod nr fordonet skulle sparas.")}a(!1)},b=()=>{c(null),u(y=>({...y,image_url:""}))};return n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"max-w-2xl max-h-[90vh]",children:[n.jsx(er,{children:n.jsx(tr,{children:"Lgg till fordon"})}),n.jsx(qV,{className:"h-[calc(90vh-120px)] pr-4",children:n.jsxs("form",{onSubmit:x,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ve,{className:"text-sm mb-2 block",children:"Ladda upp bild (valfritt)"}),l?n.jsxs("div",{className:"relative rounded-lg overflow-hidden",children:[n.jsx("img",{src:l,alt:"Fordon",className:"w-full h-32 object-cover"}),n.jsx(ye,{type:"button",variant:"ghost",size:"icon",onClick:b,className:"absolute top-2 right-2 h-7 w-7 rounded-full bg-white/90",children:n.jsx(Ra,{className:"h-4 w-4"})})]}):n.jsxs("label",{className:"relative flex flex-col items-center justify-center h-32 border-2 border-dashed border-slate-200 rounded-lg cursor-pointer hover:border-slate-300 transition-colors",children:[n.jsx("input",{type:"file",accept:"image/*",onChange:g,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:i}),i?n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(Ot,{className:"w-6 h-6 text-slate-400 animate-spin"}),n.jsx("p",{className:"text-xs text-slate-600",children:"Analyserar bild..."})]}):n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(lu,{className:"w-6 h-6 text-slate-400"}),n.jsx("p",{className:"text-xs text-slate-600",children:"Klicka fr att ladda upp"}),n.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-indigo-50 rounded-full",children:[n.jsx(yi,{className:"w-3 h-3 text-indigo-600"}),n.jsx("span",{className:"text-xs text-indigo-700",children:"AI-analys"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ve,{children:"Registreringsnummer *"}),n.jsx(De,{value:d.registration_number,onChange:y=>u(v=>({...v,registration_number:y.target.value.toUpperCase()})),placeholder:"ABC123",required:!0})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"GPS Device ID"}),n.jsx(De,{value:d.gps_device_id,onChange:y=>u(v=>({...v,gps_device_id:y.target.value})),placeholder:"GPS Device ID"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ve,{children:"Mrke *"}),n.jsx(De,{value:d.make,onChange:y=>u(v=>({...v,make:y.target.value})),placeholder:"Volvo",required:!0})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Modell *"}),n.jsx(De,{value:d.model,onChange:y=>u(v=>({...v,model:y.target.value})),placeholder:"V60",required:!0})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ve,{children:"rsmodell"}),n.jsx(De,{type:"number",value:d.year,onChange:y=>u(v=>({...v,year:y.target.value})),placeholder:"2023"})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Status"}),n.jsxs(Nt,{value:d.status,onValueChange:y=>u(v=>({...v,status:y})),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"aktiv",children:"Aktiv"}),n.jsx(Ne,{value:"service",children:"Service"}),n.jsx(Ne,{value:"skadad",children:"Skadad"}),n.jsx(Ne,{value:"avstlld",children:"Avstlld"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ve,{children:"Kategori"}),n.jsxs(Nt,{value:d.category,onValueChange:y=>u(v=>({...v,category:y})),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"personbil",children:"Personbil"}),n.jsx(Ne,{value:"ltt lastbil",children:"Ltt lastbil"}),n.jsx(Ne,{value:"lastbil",children:"Lastbil"}),n.jsx(Ne,{value:"skpbil",children:"Skpbil"})]})]})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Brnsletyp"}),n.jsxs(Nt,{value:d.fuel_type,onValueChange:y=>u(v=>({...v,fuel_type:y})),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"bensin",children:"Bensin"}),n.jsx(Ne,{value:"diesel",children:"Diesel"}),n.jsx(Ne,{value:"el",children:"El"}),n.jsx(Ne,{value:"hybrid",children:"Hybrid"})]})]})]})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Frare"}),n.jsxs(Nt,{value:d.assigned_driver,onValueChange:y=>u(v=>({...v,assigned_driver:y})),children:[n.jsx(jt,{children:n.jsx(kt,{placeholder:"Vlj frare"})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:null,children:"Ingen frare"}),h.map(y=>n.jsx(Ne,{value:y.user_email,children:y.user_email},y.id))]})]})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Nuvarande mtarstllning (km)"}),n.jsx(De,{type:"number",value:d.current_mileage,onChange:y=>u(v=>({...v,current_mileage:y.target.value})),placeholder:"0"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ve,{children:"Nsta service"}),n.jsx(De,{type:"date",value:d.next_service_date,onChange:y=>u(v=>({...v,next_service_date:y.target.value}))})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Nsta besiktning"}),n.jsx(De,{type:"date",value:d.next_inspection_date,onChange:y=>u(v=>({...v,next_inspection_date:y.target.value}))})]})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Anteckningar"}),n.jsx(Zn,{value:d.notes,onChange:y=>u(v=>({...v,notes:y.target.value})),placeholder:"vriga anteckningar...",rows:3})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:t,className:"flex-1",disabled:s,children:"Avbryt"}),n.jsx(ye,{type:"submit",disabled:s||!d.registration_number||!d.make||!d.model,className:"flex-1",children:s?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"w-4 h-4 mr-2 animate-spin"}),"Sparar..."]}):"Spara fordon"})]})]})})]})})}function qhe(){const e=$n(),[t,r]=P.useState(""),[s,a]=P.useState(null),[i,o]=P.useState(!1),{data:l=[],isLoading:c}=He({queryKey:["vehicles"],queryFn:()=>oe.entities.Vehicle.list()}),d=Xt({mutationFn:g=>oe.entities.Vehicle.delete(g),onSuccess:()=>{e.invalidateQueries({queryKey:["vehicles"]}),a(null)}}),u=l.filter(g=>{var x,b,y;return((x=g.registration_number)==null?void 0:x.toLowerCase().includes(t.toLowerCase()))||((b=g.make)==null?void 0:b.toLowerCase().includes(t.toLowerCase()))||((y=g.model)==null?void 0:y.toLowerCase().includes(t.toLowerCase()))}),h={aktiv:"bg-emerald-100 text-emerald-700",service:"bg-amber-100 text-amber-700",skadad:"bg-rose-100 text-rose-700",avstlld:"bg-slate-100 text-slate-700"};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(Ct,{className:"flex items-center gap-2",children:[n.jsx(us,{className:"h-5 w-5"}),"Fordonshantering"]}),n.jsxs(ye,{onClick:()=>o(!0),size:"sm",children:[n.jsx(xr,{className:"h-4 w-4 mr-2"}),"Lgg till fordon"]})]})}),n.jsxs(he,{className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(uo,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),n.jsx(De,{placeholder:"Sk fordon...",value:t,onChange:g=>r(g.target.value),className:"pl-9"})]}),n.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[n.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Totalt"}),n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:l.length})]}),n.jsxs("div",{className:"p-3 bg-emerald-50 rounded-lg",children:[n.jsx("p",{className:"text-xs text-emerald-700 mb-1",children:"Aktiva"}),n.jsx("p",{className:"text-2xl font-bold text-emerald-900",children:l.filter(g=>g.status==="aktiv").length})]}),n.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg",children:[n.jsx("p",{className:"text-xs text-amber-700 mb-1",children:"Service"}),n.jsx("p",{className:"text-2xl font-bold text-amber-900",children:l.filter(g=>g.status==="service").length})]}),n.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[n.jsx("p",{className:"text-xs text-blue-700 mb-1",children:"Med GPS"}),n.jsx("p",{className:"text-2xl font-bold text-blue-900",children:l.filter(g=>g.gps_device_id).length})]})]}),c?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(Ot,{className:"h-8 w-8 animate-spin text-slate-400"})}):u.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(us,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-slate-500",children:"Inga fordon hittades"})]}):n.jsx("div",{className:"space-y-2",children:u.map(g=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border border-slate-200 rounded-lg hover:shadow-sm transition-shadow",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-slate-100 flex items-center justify-center",children:n.jsx(us,{className:"h-5 w-5 text-slate-600"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h4",{className:"font-semibold text-slate-900",children:g.registration_number}),n.jsx(it,{variant:"outline",className:h[g.status],children:g.status}),g.gps_device_id&&n.jsx(it,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"GPS"})]}),n.jsxs("p",{className:"text-sm text-slate-600",children:[g.make," ",g.model," ",g.year?`(${g.year})`:""]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(wr,{to:Pn("VehicleDetails")+`?id=${g.id}`,children:n.jsxs(ye,{variant:"outline",size:"sm",children:[n.jsx(ql,{className:"h-3 w-3 mr-1"}),"Redigera"]})}),n.jsx(ye,{variant:"outline",size:"sm",onClick:()=>a(g.id),className:"text-rose-600 hover:text-rose-700 hover:bg-rose-50",children:n.jsx(bi,{className:"h-3 w-3"})})]})]},g.id))})]})]}),n.jsx(ay,{open:!!s,onOpenChange:()=>a(null),children:n.jsxs(yg,{children:[n.jsxs(bg,{children:[n.jsx(wg,{children:"Radera fordon?"}),n.jsx(_g,{children:"Detta kommer permanent ta bort fordonet och all tillhrande data. Denna tgrd kan inte ngras."})]}),n.jsxs(jg,{children:[n.jsx(kg,{children:"Avbryt"}),n.jsx(Ng,{onClick:()=>d.mutate(s),className:"bg-rose-600 hover:bg-rose-700",children:d.isPending?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-4 w-4 mr-2 animate-spin"}),"Raderar..."]}):"Radera"})]})]})}),n.jsx(Bhe,{open:i,onClose:()=>o(!1),onSuccess:()=>{e.invalidateQueries({queryKey:["vehicles"]}),o(!1)}})]})}function VV(e,t){const r=P.useRef(t);P.useEffect(function(){t!==r.current&&e.attributionControl!=null&&(r.current!=null&&e.attributionControl.removeAttribution(r.current),t!=null&&e.attributionControl.addAttribution(t)),r.current=t},[e,t])}function zhe(e,t,r){t.center!==r.center&&e.setLatLng(t.center),t.radius!=null&&t.radius!==r.radius&&e.setRadius(t.radius)}const Vhe=1;function Uhe(e){return Object.freeze({__version:Vhe,map:e})}function wA(e,t){return Object.freeze({...e,...t})}const UV=P.createContext(null),HV=UV.Provider;function Bj(){const e=P.useContext(UV);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function WV(e){function t(r,s){const{instance:a,context:i}=e(r).current;return P.useImperativeHandle(s,()=>a),r.children==null?null:Te.createElement(HV,{value:i},r.children)}return P.forwardRef(t)}function Hhe(e){function t(r,s){const[a,i]=P.useState(!1),{instance:o}=e(r,i).current;P.useImperativeHandle(s,()=>o),P.useEffect(function(){a&&o.update()},[o,a,r.children]);const l=o._contentNode;return l?ug.createPortal(r.children,l):null}return P.forwardRef(t)}function Whe(e){function t(r,s){const{instance:a}=e(r).current;return P.useImperativeHandle(s,()=>a),null}return P.forwardRef(t)}function _A(e,t){const r=P.useRef();P.useEffect(function(){return t!=null&&e.instance.on(t),r.current=t,function(){r.current!=null&&e.instance.off(r.current),r.current=null}},[e,t])}function qj(e,t){const r=e.pane??t.pane;return r?{...e,pane:r}:e}function Khe(e,t){return function(s,a){const i=Bj(),o=e(qj(s,i),i);return VV(i.map,s.attribution),_A(o.current,s.eventHandlers),t(o.current,i,s,a),o}}var j0={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Ghe=j0.exports,A6;function Zhe(){return A6||(A6=1,(function(e,t){(function(r,s){s(t)})(Ghe,(function(r){var s="1.9.4";function a(m){var _,T,B,X;for(T=1,B=arguments.length;T<B;T++){X=arguments[T];for(_ in X)m[_]=X[_]}return m}var i=Object.create||(function(){function m(){}return function(_){return m.prototype=_,new m}})();function o(m,_){var T=Array.prototype.slice;if(m.bind)return m.bind.apply(m,T.call(arguments,1));var B=T.call(arguments,2);return function(){return m.apply(_,B.length?B.concat(T.call(arguments)):arguments)}}var l=0;function c(m){return"_leaflet_id"in m||(m._leaflet_id=++l),m._leaflet_id}function d(m,_,T){var B,X,me,Ee;return Ee=function(){B=!1,X&&(me.apply(T,X),X=!1)},me=function(){B?X=arguments:(m.apply(T,arguments),setTimeout(Ee,_),B=!0)},me}function u(m,_,T){var B=_[1],X=_[0],me=B-X;return m===B&&T?m:((m-X)%me+me)%me+X}function h(){return!1}function g(m,_){if(_===!1)return m;var T=Math.pow(10,_===void 0?6:_);return Math.round(m*T)/T}function x(m){return m.trim?m.trim():m.replace(/^\s+|\s+$/g,"")}function b(m){return x(m).split(/\s+/)}function y(m,_){Object.prototype.hasOwnProperty.call(m,"options")||(m.options=m.options?i(m.options):{});for(var T in _)m.options[T]=_[T];return m.options}function v(m,_,T){var B=[];for(var X in m)B.push(encodeURIComponent(T?X.toUpperCase():X)+"="+encodeURIComponent(m[X]));return(!_||_.indexOf("?")===-1?"?":"&")+B.join("&")}var j=/\{ *([\w_ -]+) *\}/g;function w(m,_){return m.replace(j,function(T,B){var X=_[B];if(X===void 0)throw new Error("No value provided for variable "+T);return typeof X=="function"&&(X=X(_)),X})}var N=Array.isArray||function(m){return Object.prototype.toString.call(m)==="[object Array]"};function A(m,_){for(var T=0;T<m.length;T++)if(m[T]===_)return T;return-1}var C="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function M(m){return window["webkit"+m]||window["moz"+m]||window["ms"+m]}var I=0;function F(m){var _=+new Date,T=Math.max(0,16-(_-I));return I=_+T,window.setTimeout(m,T)}var U=window.requestAnimationFrame||M("RequestAnimationFrame")||F,W=window.cancelAnimationFrame||M("CancelAnimationFrame")||M("CancelRequestAnimationFrame")||function(m){window.clearTimeout(m)};function D(m,_,T){if(T&&U===F)m.call(_);else return U.call(window,o(m,_))}function R(m){m&&W.call(window,m)}var z={__proto__:null,extend:a,create:i,bind:o,get lastId(){return l},stamp:c,throttle:d,wrapNum:u,falseFn:h,formatNum:g,trim:x,splitWords:b,setOptions:y,getParamString:v,template:w,isArray:N,indexOf:A,emptyImageUrl:C,requestFn:U,cancelFn:W,requestAnimFrame:D,cancelAnimFrame:R};function Z(){}Z.extend=function(m){var _=function(){y(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},T=_.__super__=this.prototype,B=i(T);B.constructor=_,_.prototype=B;for(var X in this)Object.prototype.hasOwnProperty.call(this,X)&&X!=="prototype"&&X!=="__super__"&&(_[X]=this[X]);return m.statics&&a(_,m.statics),m.includes&&(se(m.includes),a.apply(null,[B].concat(m.includes))),a(B,m),delete B.statics,delete B.includes,B.options&&(B.options=T.options?i(T.options):{},a(B.options,m.options)),B._initHooks=[],B.callInitHooks=function(){if(!this._initHooksCalled){T.callInitHooks&&T.callInitHooks.call(this),this._initHooksCalled=!0;for(var me=0,Ee=B._initHooks.length;me<Ee;me++)B._initHooks[me].call(this)}},_},Z.include=function(m){var _=this.prototype.options;return a(this.prototype,m),m.options&&(this.prototype.options=_,this.mergeOptions(m.options)),this},Z.mergeOptions=function(m){return a(this.prototype.options,m),this},Z.addInitHook=function(m){var _=Array.prototype.slice.call(arguments,1),T=typeof m=="function"?m:function(){this[m].apply(this,_)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(T),this};function se(m){if(!(typeof L>"u"||!L||!L.Mixin)){m=N(m)?m:[m];for(var _=0;_<m.length;_++)m[_]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var J={on:function(m,_,T){if(typeof m=="object")for(var B in m)this._on(B,m[B],_);else{m=b(m);for(var X=0,me=m.length;X<me;X++)this._on(m[X],_,T)}return this},off:function(m,_,T){if(!arguments.length)delete this._events;else if(typeof m=="object")for(var B in m)this._off(B,m[B],_);else{m=b(m);for(var X=arguments.length===1,me=0,Ee=m.length;me<Ee;me++)X?this._off(m[me]):this._off(m[me],_,T)}return this},_on:function(m,_,T,B){if(typeof _!="function"){console.warn("wrong listener type: "+typeof _);return}if(this._listens(m,_,T)===!1){T===this&&(T=void 0);var X={fn:_,ctx:T};B&&(X.once=!0),this._events=this._events||{},this._events[m]=this._events[m]||[],this._events[m].push(X)}},_off:function(m,_,T){var B,X,me;if(this._events&&(B=this._events[m],!!B)){if(arguments.length===1){if(this._firingCount)for(X=0,me=B.length;X<me;X++)B[X].fn=h;delete this._events[m];return}if(typeof _!="function"){console.warn("wrong listener type: "+typeof _);return}var Ee=this._listens(m,_,T);if(Ee!==!1){var Ze=B[Ee];this._firingCount&&(Ze.fn=h,this._events[m]=B=B.slice()),B.splice(Ee,1)}}},fire:function(m,_,T){if(!this.listens(m,T))return this;var B=a({},_,{type:m,target:this,sourceTarget:_&&_.sourceTarget||this});if(this._events){var X=this._events[m];if(X){this._firingCount=this._firingCount+1||1;for(var me=0,Ee=X.length;me<Ee;me++){var Ze=X[me],Je=Ze.fn;Ze.once&&this.off(m,Je,Ze.ctx),Je.call(Ze.ctx||this,B)}this._firingCount--}}return T&&this._propagateEvent(B),this},listens:function(m,_,T,B){typeof m!="string"&&console.warn('"string" type argument expected');var X=_;typeof _!="function"&&(B=!!_,X=void 0,T=void 0);var me=this._events&&this._events[m];if(me&&me.length&&this._listens(m,X,T)!==!1)return!0;if(B){for(var Ee in this._eventParents)if(this._eventParents[Ee].listens(m,_,T,B))return!0}return!1},_listens:function(m,_,T){if(!this._events)return!1;var B=this._events[m]||[];if(!_)return!!B.length;T===this&&(T=void 0);for(var X=0,me=B.length;X<me;X++)if(B[X].fn===_&&B[X].ctx===T)return X;return!1},once:function(m,_,T){if(typeof m=="object")for(var B in m)this._on(B,m[B],_,!0);else{m=b(m);for(var X=0,me=m.length;X<me;X++)this._on(m[X],_,T,!0)}return this},addEventParent:function(m){return this._eventParents=this._eventParents||{},this._eventParents[c(m)]=m,this},removeEventParent:function(m){return this._eventParents&&delete this._eventParents[c(m)],this},_propagateEvent:function(m){for(var _ in this._eventParents)this._eventParents[_].fire(m.type,a({layer:m.target,propagatedFrom:m.target},m),!0)}};J.addEventListener=J.on,J.removeEventListener=J.clearAllEventListeners=J.off,J.addOneTimeEventListener=J.once,J.fireEvent=J.fire,J.hasEventListeners=J.listens;var Q=Z.extend(J);function H(m,_,T){this.x=T?Math.round(m):m,this.y=T?Math.round(_):_}var ne=Math.trunc||function(m){return m>0?Math.floor(m):Math.ceil(m)};H.prototype={clone:function(){return new H(this.x,this.y)},add:function(m){return this.clone()._add(ue(m))},_add:function(m){return this.x+=m.x,this.y+=m.y,this},subtract:function(m){return this.clone()._subtract(ue(m))},_subtract:function(m){return this.x-=m.x,this.y-=m.y,this},divideBy:function(m){return this.clone()._divideBy(m)},_divideBy:function(m){return this.x/=m,this.y/=m,this},multiplyBy:function(m){return this.clone()._multiplyBy(m)},_multiplyBy:function(m){return this.x*=m,this.y*=m,this},scaleBy:function(m){return new H(this.x*m.x,this.y*m.y)},unscaleBy:function(m){return new H(this.x/m.x,this.y/m.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ne(this.x),this.y=ne(this.y),this},distanceTo:function(m){m=ue(m);var _=m.x-this.x,T=m.y-this.y;return Math.sqrt(_*_+T*T)},equals:function(m){return m=ue(m),m.x===this.x&&m.y===this.y},contains:function(m){return m=ue(m),Math.abs(m.x)<=Math.abs(this.x)&&Math.abs(m.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function ue(m,_,T){return m instanceof H?m:N(m)?new H(m[0],m[1]):m==null?m:typeof m=="object"&&"x"in m&&"y"in m?new H(m.x,m.y):new H(m,_,T)}function ae(m,_){if(m)for(var T=_?[m,_]:m,B=0,X=T.length;B<X;B++)this.extend(T[B])}ae.prototype={extend:function(m){var _,T;if(!m)return this;if(m instanceof H||typeof m[0]=="number"||"x"in m)_=T=ue(m);else if(m=G(m),_=m.min,T=m.max,!_||!T)return this;return!this.min&&!this.max?(this.min=_.clone(),this.max=T.clone()):(this.min.x=Math.min(_.x,this.min.x),this.max.x=Math.max(T.x,this.max.x),this.min.y=Math.min(_.y,this.min.y),this.max.y=Math.max(T.y,this.max.y)),this},getCenter:function(m){return ue((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,m)},getBottomLeft:function(){return ue(this.min.x,this.max.y)},getTopRight:function(){return ue(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(m){var _,T;return typeof m[0]=="number"||m instanceof H?m=ue(m):m=G(m),m instanceof ae?(_=m.min,T=m.max):_=T=m,_.x>=this.min.x&&T.x<=this.max.x&&_.y>=this.min.y&&T.y<=this.max.y},intersects:function(m){m=G(m);var _=this.min,T=this.max,B=m.min,X=m.max,me=X.x>=_.x&&B.x<=T.x,Ee=X.y>=_.y&&B.y<=T.y;return me&&Ee},overlaps:function(m){m=G(m);var _=this.min,T=this.max,B=m.min,X=m.max,me=X.x>_.x&&B.x<T.x,Ee=X.y>_.y&&B.y<T.y;return me&&Ee},isValid:function(){return!!(this.min&&this.max)},pad:function(m){var _=this.min,T=this.max,B=Math.abs(_.x-T.x)*m,X=Math.abs(_.y-T.y)*m;return G(ue(_.x-B,_.y-X),ue(T.x+B,T.y+X))},equals:function(m){return m?(m=G(m),this.min.equals(m.getTopLeft())&&this.max.equals(m.getBottomRight())):!1}};function G(m,_){return!m||m instanceof ae?m:new ae(m,_)}function te(m,_){if(m)for(var T=_?[m,_]:m,B=0,X=T.length;B<X;B++)this.extend(T[B])}te.prototype={extend:function(m){var _=this._southWest,T=this._northEast,B,X;if(m instanceof be)B=m,X=m;else if(m instanceof te){if(B=m._southWest,X=m._northEast,!B||!X)return this}else return m?this.extend(xe(m)||fe(m)):this;return!_&&!T?(this._southWest=new be(B.lat,B.lng),this._northEast=new be(X.lat,X.lng)):(_.lat=Math.min(B.lat,_.lat),_.lng=Math.min(B.lng,_.lng),T.lat=Math.max(X.lat,T.lat),T.lng=Math.max(X.lng,T.lng)),this},pad:function(m){var _=this._southWest,T=this._northEast,B=Math.abs(_.lat-T.lat)*m,X=Math.abs(_.lng-T.lng)*m;return new te(new be(_.lat-B,_.lng-X),new be(T.lat+B,T.lng+X))},getCenter:function(){return new be((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new be(this.getNorth(),this.getWest())},getSouthEast:function(){return new be(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(m){typeof m[0]=="number"||m instanceof be||"lat"in m?m=xe(m):m=fe(m);var _=this._southWest,T=this._northEast,B,X;return m instanceof te?(B=m.getSouthWest(),X=m.getNorthEast()):B=X=m,B.lat>=_.lat&&X.lat<=T.lat&&B.lng>=_.lng&&X.lng<=T.lng},intersects:function(m){m=fe(m);var _=this._southWest,T=this._northEast,B=m.getSouthWest(),X=m.getNorthEast(),me=X.lat>=_.lat&&B.lat<=T.lat,Ee=X.lng>=_.lng&&B.lng<=T.lng;return me&&Ee},overlaps:function(m){m=fe(m);var _=this._southWest,T=this._northEast,B=m.getSouthWest(),X=m.getNorthEast(),me=X.lat>_.lat&&B.lat<T.lat,Ee=X.lng>_.lng&&B.lng<T.lng;return me&&Ee},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(m,_){return m?(m=fe(m),this._southWest.equals(m.getSouthWest(),_)&&this._northEast.equals(m.getNorthEast(),_)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function fe(m,_){return m instanceof te?m:new te(m,_)}function be(m,_,T){if(isNaN(m)||isNaN(_))throw new Error("Invalid LatLng object: ("+m+", "+_+")");this.lat=+m,this.lng=+_,T!==void 0&&(this.alt=+T)}be.prototype={equals:function(m,_){if(!m)return!1;m=xe(m);var T=Math.max(Math.abs(this.lat-m.lat),Math.abs(this.lng-m.lng));return T<=(_===void 0?1e-9:_)},toString:function(m){return"LatLng("+g(this.lat,m)+", "+g(this.lng,m)+")"},distanceTo:function(m){return Pe.distance(this,xe(m))},wrap:function(){return Pe.wrapLatLng(this)},toBounds:function(m){var _=180*m/40075017,T=_/Math.cos(Math.PI/180*this.lat);return fe([this.lat-_,this.lng-T],[this.lat+_,this.lng+T])},clone:function(){return new be(this.lat,this.lng,this.alt)}};function xe(m,_,T){return m instanceof be?m:N(m)&&typeof m[0]!="object"?m.length===3?new be(m[0],m[1],m[2]):m.length===2?new be(m[0],m[1]):null:m==null?m:typeof m=="object"&&"lat"in m?new be(m.lat,"lng"in m?m.lng:m.lon,m.alt):_===void 0?null:new be(m,_,T)}var we={latLngToPoint:function(m,_){var T=this.projection.project(m),B=this.scale(_);return this.transformation._transform(T,B)},pointToLatLng:function(m,_){var T=this.scale(_),B=this.transformation.untransform(m,T);return this.projection.unproject(B)},project:function(m){return this.projection.project(m)},unproject:function(m){return this.projection.unproject(m)},scale:function(m){return 256*Math.pow(2,m)},zoom:function(m){return Math.log(m/256)/Math.LN2},getProjectedBounds:function(m){if(this.infinite)return null;var _=this.projection.bounds,T=this.scale(m),B=this.transformation.transform(_.min,T),X=this.transformation.transform(_.max,T);return new ae(B,X)},infinite:!1,wrapLatLng:function(m){var _=this.wrapLng?u(m.lng,this.wrapLng,!0):m.lng,T=this.wrapLat?u(m.lat,this.wrapLat,!0):m.lat,B=m.alt;return new be(T,_,B)},wrapLatLngBounds:function(m){var _=m.getCenter(),T=this.wrapLatLng(_),B=_.lat-T.lat,X=_.lng-T.lng;if(B===0&&X===0)return m;var me=m.getSouthWest(),Ee=m.getNorthEast(),Ze=new be(me.lat-B,me.lng-X),Je=new be(Ee.lat-B,Ee.lng-X);return new te(Ze,Je)}},Pe=a({},we,{wrapLng:[-180,180],R:6371e3,distance:function(m,_){var T=Math.PI/180,B=m.lat*T,X=_.lat*T,me=Math.sin((_.lat-m.lat)*T/2),Ee=Math.sin((_.lng-m.lng)*T/2),Ze=me*me+Math.cos(B)*Math.cos(X)*Ee*Ee,Je=2*Math.atan2(Math.sqrt(Ze),Math.sqrt(1-Ze));return this.R*Je}}),_e=6378137,Ve={R:_e,MAX_LATITUDE:85.0511287798,project:function(m){var _=Math.PI/180,T=this.MAX_LATITUDE,B=Math.max(Math.min(T,m.lat),-T),X=Math.sin(B*_);return new H(this.R*m.lng*_,this.R*Math.log((1+X)/(1-X))/2)},unproject:function(m){var _=180/Math.PI;return new be((2*Math.atan(Math.exp(m.y/this.R))-Math.PI/2)*_,m.x*_/this.R)},bounds:(function(){var m=_e*Math.PI;return new ae([-m,-m],[m,m])})()};function Ue(m,_,T,B){if(N(m)){this._a=m[0],this._b=m[1],this._c=m[2],this._d=m[3];return}this._a=m,this._b=_,this._c=T,this._d=B}Ue.prototype={transform:function(m,_){return this._transform(m.clone(),_)},_transform:function(m,_){return _=_||1,m.x=_*(this._a*m.x+this._b),m.y=_*(this._c*m.y+this._d),m},untransform:function(m,_){return _=_||1,new H((m.x/_-this._b)/this._a,(m.y/_-this._d)/this._c)}};function Le(m,_,T,B){return new Ue(m,_,T,B)}var dt=a({},Pe,{code:"EPSG:3857",projection:Ve,transformation:(function(){var m=.5/(Math.PI*Ve.R);return Le(m,.5,-m,.5)})()}),xt=a({},dt,{code:"EPSG:900913"});function Xe(m){return document.createElementNS("http://www.w3.org/2000/svg",m)}function ke(m,_){var T="",B,X,me,Ee,Ze,Je;for(B=0,me=m.length;B<me;B++){for(Ze=m[B],X=0,Ee=Ze.length;X<Ee;X++)Je=Ze[X],T+=(X?"L":"M")+Je.x+" "+Je.y;T+=_?Et.svg?"z":"x":""}return T||"M0 0"}var Bt=document.documentElement.style,Ft="ActiveXObject"in window,mt=Ft&&!document.addEventListener,yt="msLaunchUri"in navigator&&!("documentMode"in document),Tt=wn("webkit"),St=wn("android"),Kt=wn("android 2")||wn("android 3"),mn=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),jn=St&&wn("Google")&&mn<537&&!("AudioNode"in window),Ln=!!window.opera,Wn=!yt&&wn("chrome"),lr=wn("gecko")&&!Tt&&!Ln&&!Ft,pn=!Wn&&wn("safari"),Tn=wn("phantom"),It="OTransition"in Bt,Vs=navigator.platform.indexOf("Win")===0,Qn=Ft&&"transition"in Bt,Na="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Kt,gr="MozPerspective"in Bt,ur=!window.L_DISABLE_3D&&(Qn||Na||gr)&&!It&&!Tn,Nr=typeof orientation<"u"||wn("mobile"),nr=Nr&&Tt,$a=Nr&&Na,kr=!window.PointerEvent&&window.MSPointerEvent,rs=!!(window.PointerEvent||kr),Ts="ontouchstart"in window||!!window.TouchEvent,Br=!window.L_NO_TOUCH&&(Ts||rs),Oe=Nr&&Ln,ot=Nr&&lr,an=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,on=(function(){var m=!1;try{var _=Object.defineProperty({},"passive",{get:function(){m=!0}});window.addEventListener("testPassiveEventSupport",h,_),window.removeEventListener("testPassiveEventSupport",h,_)}catch{}return m})(),Kn=(function(){return!!document.createElement("canvas").getContext})(),ss=!!(document.createElementNS&&Xe("svg").createSVGRect),Ut=!!ss&&(function(){var m=document.createElement("div");return m.innerHTML="<svg/>",(m.firstChild&&m.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),es=!ss&&(function(){try{var m=document.createElement("div");m.innerHTML='<v:shape adj="1"/>';var _=m.firstChild;return _.style.behavior="url(#default#VML)",_&&typeof _.adj=="object"}catch{return!1}})(),hs=navigator.platform.indexOf("Mac")===0,fr=navigator.platform.indexOf("Linux")===0;function wn(m){return navigator.userAgent.toLowerCase().indexOf(m)>=0}var Et={ie:Ft,ielt9:mt,edge:yt,webkit:Tt,android:St,android23:Kt,androidStock:jn,opera:Ln,chrome:Wn,gecko:lr,safari:pn,phantom:Tn,opera12:It,win:Vs,ie3d:Qn,webkit3d:Na,gecko3d:gr,any3d:ur,mobile:Nr,mobileWebkit:nr,mobileWebkit3d:$a,msPointer:kr,pointer:rs,touch:Br,touchNative:Ts,mobileOpera:Oe,mobileGecko:ot,retina:an,passiveEvents:on,canvas:Kn,svg:ss,vml:es,inlineSvg:Ut,mac:hs,linux:fr},fs=Et.msPointer?"MSPointerDown":"pointerdown",_s=Et.msPointer?"MSPointerMove":"pointermove",na=Et.msPointer?"MSPointerUp":"pointerup",Ba=Et.msPointer?"MSPointerCancel":"pointercancel",wi={touchstart:fs,touchmove:_s,touchend:na,touchcancel:Ba},Us={touchstart:as,touchmove:Oc,touchend:Oc,touchcancel:Oc},ka={},ai=!1;function Ro(m,_,T){return _==="touchstart"&&Sd(),Us[_]?(T=Us[_].bind(this,T),m.addEventListener(wi[_],T,!1),T):(console.warn("wrong event specified:",_),h)}function zl(m,_,T){if(!wi[_]){console.warn("wrong event specified:",_);return}m.removeEventListener(wi[_],T,!1)}function Tc(m){ka[m.pointerId]=m}function Ec(m){ka[m.pointerId]&&(ka[m.pointerId]=m)}function Vl(m){delete ka[m.pointerId]}function Sd(){ai||(document.addEventListener(fs,Tc,!0),document.addEventListener(_s,Ec,!0),document.addEventListener(na,Vl,!0),document.addEventListener(Ba,Vl,!0),ai=!0)}function Oc(m,_){if(_.pointerType!==(_.MSPOINTER_TYPE_MOUSE||"mouse")){_.touches=[];for(var T in ka)_.touches.push(ka[T]);_.changedTouches=[_],m(_)}}function as(m,_){_.MSPOINTER_TYPE_TOUCH&&_.pointerType===_.MSPOINTER_TYPE_TOUCH&&Gr(_),Oc(m,_)}function Wf(m){var _={},T,B;for(B in m)T=m[B],_[B]=T&&T.bind?T.bind(m):T;return m=_,_.type="dblclick",_.detail=2,_.isTrusted=!1,_._simulated=!0,_}var Ul=200;function Tu(m,_){m.addEventListener("dblclick",_);var T=0,B;function X(me){if(me.detail!==1){B=me.detail;return}if(!(me.pointerType==="mouse"||me.sourceCapabilities&&!me.sourceCapabilities.firesTouchEvents)){var Ee=oi(me);if(!(Ee.some(function(Je){return Je instanceof HTMLLabelElement&&Je.attributes.for})&&!Ee.some(function(Je){return Je instanceof HTMLInputElement||Je instanceof HTMLSelectElement}))){var Ze=Date.now();Ze-T<=Ul?(B++,B===2&&_(Wf(me))):B=1,T=Ze}}}return m.addEventListener("click",X),{dblclick:_,simDblclick:X}}function Pd(m,_){m.removeEventListener("dblclick",_.dblclick),m.removeEventListener("click",_.simDblclick)}var Mc=Gl(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Hl=Gl(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Wl=Hl==="webkitTransition"||Hl==="OTransition"?Hl+"End":"transitionend";function _i(m){return typeof m=="string"?document.getElementById(m):m}function Fo(m,_){var T=m.style[_]||m.currentStyle&&m.currentStyle[_];if((!T||T==="auto")&&document.defaultView){var B=document.defaultView.getComputedStyle(m,null);T=B?B[_]:null}return T==="auto"?null:T}function En(m,_,T){var B=document.createElement(m);return B.className=_||"",T&&T.appendChild(B),B}function Dn(m){var _=m.parentNode;_&&_.removeChild(m)}function Lc(m){for(;m.firstChild;)m.removeChild(m.firstChild)}function ml(m){var _=m.parentNode;_&&_.lastChild!==m&&_.appendChild(m)}function Fi(m){var _=m.parentNode;_&&_.firstChild!==m&&_.insertBefore(m,_.firstChild)}function $o(m,_){if(m.classList!==void 0)return m.classList.contains(_);var T=ra(m);return T.length>0&&new RegExp("(^|\\s)"+_+"(\\s|$)").test(T)}function _n(m,_){if(m.classList!==void 0)for(var T=b(_),B=0,X=T.length;B<X;B++)m.classList.add(T[B]);else if(!$o(m,_)){var me=ra(m);Kl(m,(me?me+" ":"")+_)}}function cr(m,_){m.classList!==void 0?m.classList.remove(_):Kl(m,x((" "+ra(m)+" ").replace(" "+_+" "," ")))}function Kl(m,_){m.className.baseVal===void 0?m.className=_:m.className.baseVal=_}function ra(m){return m.correspondingElement&&(m=m.correspondingElement),m.className.baseVal===void 0?m.className:m.className.baseVal}function Hs(m,_){"opacity"in m.style?m.style.opacity=_:"filter"in m.style&&Eu(m,_)}function Eu(m,_){var T=!1,B="DXImageTransform.Microsoft.Alpha";try{T=m.filters.item(B)}catch{if(_===1)return}_=Math.round(_*100),T?(T.Enabled=_!==100,T.Opacity=_):m.style.filter+=" progid:"+B+"(opacity="+_+")"}function Gl(m){for(var _=document.documentElement.style,T=0;T<m.length;T++)if(m[T]in _)return m[T];return!1}function ii(m,_,T){var B=_||new H(0,0);m.style[Mc]=(Et.ie3d?"translate("+B.x+"px,"+B.y+"px)":"translate3d("+B.x+"px,"+B.y+"px,0)")+(T?" scale("+T+")":"")}function ms(m,_){m._leaflet_pos=_,Et.any3d?ii(m,_):(m.style.left=_.x+"px",m.style.top=_.y+"px")}function $i(m){return m._leaflet_pos||new H(0,0)}var rr,Bo,Ad;if("onselectstart"in document)rr=function(){gn(window,"selectstart",Gr)},Bo=function(){sr(window,"selectstart",Gr)};else{var pl=Gl(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);rr=function(){if(pl){var m=document.documentElement.style;Ad=m[pl],m[pl]="none"}},Bo=function(){pl&&(document.documentElement.style[pl]=Ad,Ad=void 0)}}function Cd(){gn(window,"dragstart",Gr)}function Bi(){sr(window,"dragstart",Gr)}var qo,zo;function xl(m){for(;m.tabIndex===-1;)m=m.parentNode;m.style&&(qr(),qo=m,zo=m.style.outlineStyle,m.style.outlineStyle="none",gn(window,"keydown",qr))}function qr(){qo&&(qo.style.outlineStyle=zo,qo=void 0,zo=void 0,sr(window,"keydown",qr))}function fo(m){do m=m.parentNode;while((!m.offsetWidth||!m.offsetHeight)&&m!==document.body);return m}function Ni(m){var _=m.getBoundingClientRect();return{x:_.width/m.offsetWidth||1,y:_.height/m.offsetHeight||1,boundingClientRect:_}}var xn={__proto__:null,TRANSFORM:Mc,TRANSITION:Hl,TRANSITION_END:Wl,get:_i,getStyle:Fo,create:En,remove:Dn,empty:Lc,toFront:ml,toBack:Fi,hasClass:$o,addClass:_n,removeClass:cr,setClass:Kl,getClass:ra,setOpacity:Hs,testProp:Gl,setTransform:ii,setPosition:ms,getPosition:$i,get disableTextSelection(){return rr},get enableTextSelection(){return Bo},disableImageDrag:Cd,enableImageDrag:Bi,preventOutline:xl,restoreOutline:qr,getSizedParentNode:fo,getScale:Ni};function gn(m,_,T,B){if(_&&typeof _=="object")for(var X in _)Zl(m,X,_[X],T);else{_=b(_);for(var me=0,Ee=_.length;me<Ee;me++)Zl(m,_[me],T,B)}return this}var Is="_leaflet_events";function sr(m,_,T,B){if(arguments.length===1)Td(m),delete m[Is];else if(_&&typeof _=="object")for(var X in _)Yl(m,X,_[X],T);else if(_=b(_),arguments.length===2)Td(m,function(Ze){return A(_,Ze)!==-1});else for(var me=0,Ee=_.length;me<Ee;me++)Yl(m,_[me],T,B);return this}function Td(m,_){for(var T in m[Is]){var B=T.split(/\d/)[0];(!_||_(B))&&Yl(m,B,null,null,T)}}var Vo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Zl(m,_,T,B){var X=_+c(T)+(B?"_"+c(B):"");if(m[Is]&&m[Is][X])return this;var me=function(Ze){return T.call(B||m,Ze||window.event)},Ee=me;!Et.touchNative&&Et.pointer&&_.indexOf("touch")===0?me=Ro(m,_,me):Et.touch&&_==="dblclick"?me=Tu(m,me):"addEventListener"in m?_==="touchstart"||_==="touchmove"||_==="wheel"||_==="mousewheel"?m.addEventListener(Vo[_]||_,me,Et.passiveEvents?{passive:!1}:!1):_==="mouseenter"||_==="mouseleave"?(me=function(Ze){Ze=Ze||window.event,Uo(m,Ze)&&Ee(Ze)},m.addEventListener(Vo[_],me,!1)):m.addEventListener(_,Ee,!1):m.attachEvent("on"+_,me),m[Is]=m[Is]||{},m[Is][X]=me}function Yl(m,_,T,B,X){X=X||_+c(T)+(B?"_"+c(B):"");var me=m[Is]&&m[Is][X];if(!me)return this;!Et.touchNative&&Et.pointer&&_.indexOf("touch")===0?zl(m,_,me):Et.touch&&_==="dblclick"?Pd(m,me):"removeEventListener"in m?m.removeEventListener(Vo[_]||_,me,!1):m.detachEvent("on"+_,me),m[Is][X]=null}function qi(m){return m.stopPropagation?m.stopPropagation():m.originalEvent?m.originalEvent._stopped=!0:m.cancelBubble=!0,this}function Ed(m){return Zl(m,"wheel",qi),this}function Dc(m){return gn(m,"mousedown touchstart dblclick contextmenu",qi),m._leaflet_disable_click=!0,this}function Gr(m){return m.preventDefault?m.preventDefault():m.returnValue=!1,this}function sa(m){return Gr(m),qi(m),this}function oi(m){if(m.composedPath)return m.composedPath();for(var _=[],T=m.target;T;)_.push(T),T=T.parentNode;return _}function Ic(m,_){if(!_)return new H(m.clientX,m.clientY);var T=Ni(_),B=T.boundingClientRect;return new H((m.clientX-B.left)/T.x-_.clientLeft,(m.clientY-B.top)/T.y-_.clientTop)}var Rc=Et.linux&&Et.chrome?window.devicePixelRatio:Et.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Od(m){return Et.edge?m.wheelDeltaY/2:m.deltaY&&m.deltaMode===0?-m.deltaY/Rc:m.deltaY&&m.deltaMode===1?-m.deltaY*20:m.deltaY&&m.deltaMode===2?-m.deltaY*60:m.deltaX||m.deltaZ?0:m.wheelDelta?(m.wheelDeltaY||m.wheelDelta)/2:m.detail&&Math.abs(m.detail)<32765?-m.detail*20:m.detail?m.detail/-32765*60:0}function Uo(m,_){var T=_.relatedTarget;if(!T)return!0;try{for(;T&&T!==m;)T=T.parentNode}catch{return!1}return T!==m}var Fc={__proto__:null,on:gn,off:sr,stopPropagation:qi,disableScrollPropagation:Ed,disableClickPropagation:Dc,preventDefault:Gr,stop:sa,getPropagationPath:oi,getMousePosition:Ic,getWheelDelta:Od,isExternalTarget:Uo,addListener:gn,removeListener:sr},$c=Q.extend({run:function(m,_,T,B){this.stop(),this._el=m,this._inProgress=!0,this._duration=T||.25,this._easeOutPower=1/Math.max(B||.5,.2),this._startPos=$i(m),this._offset=_.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(m){var _=+new Date-this._startTime,T=this._duration*1e3;_<T?this._runFrame(this._easeOut(_/T),m):(this._runFrame(1),this._complete())},_runFrame:function(m,_){var T=this._startPos.add(this._offset.multiplyBy(m));_&&T._round(),ms(this._el,T),this.fire("step")},_complete:function(){R(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(m){return 1-Math.pow(1-m,this._easeOutPower)}}),Gn=Q.extend({options:{crs:dt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(m,_){_=y(this,_),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(m),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),_.maxBounds&&this.setMaxBounds(_.maxBounds),_.zoom!==void 0&&(this._zoom=this._limitZoom(_.zoom)),_.center&&_.zoom!==void 0&&this.setView(xe(_.center),_.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Hl&&Et.any3d&&!Et.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),gn(this._proxy,Wl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(m,_,T){if(_=_===void 0?this._zoom:this._limitZoom(_),m=this._limitCenter(xe(m),_,this.options.maxBounds),T=T||{},this._stop(),this._loaded&&!T.reset&&T!==!0){T.animate!==void 0&&(T.zoom=a({animate:T.animate},T.zoom),T.pan=a({animate:T.animate,duration:T.duration},T.pan));var B=this._zoom!==_?this._tryAnimatedZoom&&this._tryAnimatedZoom(m,_,T.zoom):this._tryAnimatedPan(m,T.pan);if(B)return clearTimeout(this._sizeTimer),this}return this._resetView(m,_,T.pan&&T.pan.noMoveStart),this},setZoom:function(m,_){return this._loaded?this.setView(this.getCenter(),m,{zoom:_}):(this._zoom=m,this)},zoomIn:function(m,_){return m=m||(Et.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+m,_)},zoomOut:function(m,_){return m=m||(Et.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-m,_)},setZoomAround:function(m,_,T){var B=this.getZoomScale(_),X=this.getSize().divideBy(2),me=m instanceof H?m:this.latLngToContainerPoint(m),Ee=me.subtract(X).multiplyBy(1-1/B),Ze=this.containerPointToLatLng(X.add(Ee));return this.setView(Ze,_,{zoom:T})},_getBoundsCenterZoom:function(m,_){_=_||{},m=m.getBounds?m.getBounds():fe(m);var T=ue(_.paddingTopLeft||_.padding||[0,0]),B=ue(_.paddingBottomRight||_.padding||[0,0]),X=this.getBoundsZoom(m,!1,T.add(B));if(X=typeof _.maxZoom=="number"?Math.min(_.maxZoom,X):X,X===1/0)return{center:m.getCenter(),zoom:X};var me=B.subtract(T).divideBy(2),Ee=this.project(m.getSouthWest(),X),Ze=this.project(m.getNorthEast(),X),Je=this.unproject(Ee.add(Ze).divideBy(2).add(me),X);return{center:Je,zoom:X}},fitBounds:function(m,_){if(m=fe(m),!m.isValid())throw new Error("Bounds are not valid.");var T=this._getBoundsCenterZoom(m,_);return this.setView(T.center,T.zoom,_)},fitWorld:function(m){return this.fitBounds([[-90,-180],[90,180]],m)},panTo:function(m,_){return this.setView(m,this._zoom,{pan:_})},panBy:function(m,_){if(m=ue(m).round(),_=_||{},!m.x&&!m.y)return this.fire("moveend");if(_.animate!==!0&&!this.getSize().contains(m))return this._resetView(this.unproject(this.project(this.getCenter()).add(m)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new $c,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),_.noMoveStart||this.fire("movestart"),_.animate!==!1){_n(this._mapPane,"leaflet-pan-anim");var T=this._getMapPanePos().subtract(m).round();this._panAnim.run(this._mapPane,T,_.duration||.25,_.easeLinearity)}else this._rawPanBy(m),this.fire("move").fire("moveend");return this},flyTo:function(m,_,T){if(T=T||{},T.animate===!1||!Et.any3d)return this.setView(m,_,T);this._stop();var B=this.project(this.getCenter()),X=this.project(m),me=this.getSize(),Ee=this._zoom;m=xe(m),_=_===void 0?Ee:_;var Ze=Math.max(me.x,me.y),Je=Ze*this.getZoomScale(Ee,_),pt=X.distanceTo(B)||1,zt=1.42,dn=zt*zt;function Bn(ir){var da=ir?-1:1,Fg=ir?Je:Ze,$g=Je*Je-Ze*Ze+da*dn*dn*pt*pt,sc=2*Fg*dn*pt,ac=$g/sc,ic=Math.sqrt(ac*ac+1)-ac,$u=ic<1e-9?-18:Math.log(ic);return $u}function ca(ir){return(Math.exp(ir)-Math.exp(-ir))/2}function $s(ir){return(Math.exp(ir)+Math.exp(-ir))/2}function Ei(ir){return ca(ir)/$s(ir)}var di=Bn(0);function Hd(ir){return Ze*($s(di)/$s(di+zt*ir))}function Gf(ir){return Ze*($s(di)*Ei(di+zt*ir)-ca(di))/dn}function za(ir){return 1-Math.pow(1-ir,1.5)}var Ki=Date.now(),Va=(Bn(1)-di)/zt,Jo=T.duration?1e3*T.duration:1e3*Va*.8;function Wc(){var ir=(Date.now()-Ki)/Jo,da=za(ir)*Va;ir<=1?(this._flyToFrame=D(Wc,this),this._move(this.unproject(B.add(X.subtract(B).multiplyBy(Gf(da)/pt)),Ee),this.getScaleZoom(Ze/Hd(da),Ee),{flyTo:!0})):this._move(m,_)._moveEnd(!0)}return this._moveStart(!0,T.noMoveStart),Wc.call(this),this},flyToBounds:function(m,_){var T=this._getBoundsCenterZoom(m,_);return this.flyTo(T.center,T.zoom,_)},setMaxBounds:function(m){return m=fe(m),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),m.isValid()?(this.options.maxBounds=m,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(m){var _=this.options.minZoom;return this.options.minZoom=m,this._loaded&&_!==m&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(m):this},setMaxZoom:function(m){var _=this.options.maxZoom;return this.options.maxZoom=m,this._loaded&&_!==m&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(m):this},panInsideBounds:function(m,_){this._enforcingBounds=!0;var T=this.getCenter(),B=this._limitCenter(T,this._zoom,fe(m));return T.equals(B)||this.panTo(B,_),this._enforcingBounds=!1,this},panInside:function(m,_){_=_||{};var T=ue(_.paddingTopLeft||_.padding||[0,0]),B=ue(_.paddingBottomRight||_.padding||[0,0]),X=this.project(this.getCenter()),me=this.project(m),Ee=this.getPixelBounds(),Ze=G([Ee.min.add(T),Ee.max.subtract(B)]),Je=Ze.getSize();if(!Ze.contains(me)){this._enforcingBounds=!0;var pt=me.subtract(Ze.getCenter()),zt=Ze.extend(me).getSize().subtract(Je);X.x+=pt.x<0?-zt.x:zt.x,X.y+=pt.y<0?-zt.y:zt.y,this.panTo(this.unproject(X),_),this._enforcingBounds=!1}return this},invalidateSize:function(m){if(!this._loaded)return this;m=a({animate:!1,pan:!0},m===!0?{animate:!0}:m);var _=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var T=this.getSize(),B=_.divideBy(2).round(),X=T.divideBy(2).round(),me=B.subtract(X);return!me.x&&!me.y?this:(m.animate&&m.pan?this.panBy(me):(m.pan&&this._rawPanBy(me),this.fire("move"),m.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:_,newSize:T}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(m){if(m=this._locateOptions=a({timeout:1e4,watch:!1},m),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var _=o(this._handleGeolocationResponse,this),T=o(this._handleGeolocationError,this);return m.watch?this._locationWatchId=navigator.geolocation.watchPosition(_,T,m):navigator.geolocation.getCurrentPosition(_,T,m),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(m){if(this._container._leaflet_id){var _=m.code,T=m.message||(_===1?"permission denied":_===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:_,message:"Geolocation error: "+T+"."})}},_handleGeolocationResponse:function(m){if(this._container._leaflet_id){var _=m.coords.latitude,T=m.coords.longitude,B=new be(_,T),X=B.toBounds(m.coords.accuracy*2),me=this._locateOptions;if(me.setView){var Ee=this.getBoundsZoom(X);this.setView(B,me.maxZoom?Math.min(Ee,me.maxZoom):Ee)}var Ze={latlng:B,bounds:X,timestamp:m.timestamp};for(var Je in m.coords)typeof m.coords[Je]=="number"&&(Ze[Je]=m.coords[Je]);this.fire("locationfound",Ze)}},addHandler:function(m,_){if(!_)return this;var T=this[m]=new _(this);return this._handlers.push(T),this.options[m]&&T.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Dn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(R(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var m;for(m in this._layers)this._layers[m].remove();for(m in this._panes)Dn(this._panes[m]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(m,_){var T="leaflet-pane"+(m?" leaflet-"+m.replace("Pane","")+"-pane":""),B=En("div",T,_||this._mapPane);return m&&(this._panes[m]=B),B},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var m=this.getPixelBounds(),_=this.unproject(m.getBottomLeft()),T=this.unproject(m.getTopRight());return new te(_,T)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(m,_,T){m=fe(m),T=ue(T||[0,0]);var B=this.getZoom()||0,X=this.getMinZoom(),me=this.getMaxZoom(),Ee=m.getNorthWest(),Ze=m.getSouthEast(),Je=this.getSize().subtract(T),pt=G(this.project(Ze,B),this.project(Ee,B)).getSize(),zt=Et.any3d?this.options.zoomSnap:1,dn=Je.x/pt.x,Bn=Je.y/pt.y,ca=_?Math.max(dn,Bn):Math.min(dn,Bn);return B=this.getScaleZoom(ca,B),zt&&(B=Math.round(B/(zt/100))*(zt/100),B=_?Math.ceil(B/zt)*zt:Math.floor(B/zt)*zt),Math.max(X,Math.min(me,B))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new H(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(m,_){var T=this._getTopLeftPoint(m,_);return new ae(T,T.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(m){return this.options.crs.getProjectedBounds(m===void 0?this.getZoom():m)},getPane:function(m){return typeof m=="string"?this._panes[m]:m},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(m,_){var T=this.options.crs;return _=_===void 0?this._zoom:_,T.scale(m)/T.scale(_)},getScaleZoom:function(m,_){var T=this.options.crs;_=_===void 0?this._zoom:_;var B=T.zoom(m*T.scale(_));return isNaN(B)?1/0:B},project:function(m,_){return _=_===void 0?this._zoom:_,this.options.crs.latLngToPoint(xe(m),_)},unproject:function(m,_){return _=_===void 0?this._zoom:_,this.options.crs.pointToLatLng(ue(m),_)},layerPointToLatLng:function(m){var _=ue(m).add(this.getPixelOrigin());return this.unproject(_)},latLngToLayerPoint:function(m){var _=this.project(xe(m))._round();return _._subtract(this.getPixelOrigin())},wrapLatLng:function(m){return this.options.crs.wrapLatLng(xe(m))},wrapLatLngBounds:function(m){return this.options.crs.wrapLatLngBounds(fe(m))},distance:function(m,_){return this.options.crs.distance(xe(m),xe(_))},containerPointToLayerPoint:function(m){return ue(m).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(m){return ue(m).add(this._getMapPanePos())},containerPointToLatLng:function(m){var _=this.containerPointToLayerPoint(ue(m));return this.layerPointToLatLng(_)},latLngToContainerPoint:function(m){return this.layerPointToContainerPoint(this.latLngToLayerPoint(xe(m)))},mouseEventToContainerPoint:function(m){return Ic(m,this._container)},mouseEventToLayerPoint:function(m){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(m))},mouseEventToLatLng:function(m){return this.layerPointToLatLng(this.mouseEventToLayerPoint(m))},_initContainer:function(m){var _=this._container=_i(m);if(_){if(_._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");gn(_,"scroll",this._onScroll,this),this._containerId=c(_)},_initLayout:function(){var m=this._container;this._fadeAnimated=this.options.fadeAnimation&&Et.any3d,_n(m,"leaflet-container"+(Et.touch?" leaflet-touch":"")+(Et.retina?" leaflet-retina":"")+(Et.ielt9?" leaflet-oldie":"")+(Et.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var _=Fo(m,"position");_!=="absolute"&&_!=="relative"&&_!=="fixed"&&_!=="sticky"&&(m.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var m=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ms(this._mapPane,new H(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(_n(m.markerPane,"leaflet-zoom-hide"),_n(m.shadowPane,"leaflet-zoom-hide"))},_resetView:function(m,_,T){ms(this._mapPane,new H(0,0));var B=!this._loaded;this._loaded=!0,_=this._limitZoom(_),this.fire("viewprereset");var X=this._zoom!==_;this._moveStart(X,T)._move(m,_)._moveEnd(X),this.fire("viewreset"),B&&this.fire("load")},_moveStart:function(m,_){return m&&this.fire("zoomstart"),_||this.fire("movestart"),this},_move:function(m,_,T,B){_===void 0&&(_=this._zoom);var X=this._zoom!==_;return this._zoom=_,this._lastCenter=m,this._pixelOrigin=this._getNewPixelOrigin(m),B?T&&T.pinch&&this.fire("zoom",T):((X||T&&T.pinch)&&this.fire("zoom",T),this.fire("move",T)),this},_moveEnd:function(m){return m&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return R(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(m){ms(this._mapPane,this._getMapPanePos().subtract(m))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(m){this._targets={},this._targets[c(this._container)]=this;var _=m?sr:gn;_(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&_(window,"resize",this._onResize,this),Et.any3d&&this.options.transform3DLimit&&(m?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){R(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var m=this._getMapPanePos();Math.max(Math.abs(m.x),Math.abs(m.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(m,_){for(var T=[],B,X=_==="mouseout"||_==="mouseover",me=m.target||m.srcElement,Ee=!1;me;){if(B=this._targets[c(me)],B&&(_==="click"||_==="preclick")&&this._draggableMoved(B)){Ee=!0;break}if(B&&B.listens(_,!0)&&(X&&!Uo(me,m)||(T.push(B),X))||me===this._container)break;me=me.parentNode}return!T.length&&!Ee&&!X&&this.listens(_,!0)&&(T=[this]),T},_isClickDisabled:function(m){for(;m&&m!==this._container;){if(m._leaflet_disable_click)return!0;m=m.parentNode}},_handleDOMEvent:function(m){var _=m.target||m.srcElement;if(!(!this._loaded||_._leaflet_disable_events||m.type==="click"&&this._isClickDisabled(_))){var T=m.type;T==="mousedown"&&xl(_),this._fireDOMEvent(m,T)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(m,_,T){if(m.type==="click"){var B=a({},m);B.type="preclick",this._fireDOMEvent(B,B.type,T)}var X=this._findEventTargets(m,_);if(T){for(var me=[],Ee=0;Ee<T.length;Ee++)T[Ee].listens(_,!0)&&me.push(T[Ee]);X=me.concat(X)}if(X.length){_==="contextmenu"&&Gr(m);var Ze=X[0],Je={originalEvent:m};if(m.type!=="keypress"&&m.type!=="keydown"&&m.type!=="keyup"){var pt=Ze.getLatLng&&(!Ze._radius||Ze._radius<=10);Je.containerPoint=pt?this.latLngToContainerPoint(Ze.getLatLng()):this.mouseEventToContainerPoint(m),Je.layerPoint=this.containerPointToLayerPoint(Je.containerPoint),Je.latlng=pt?Ze.getLatLng():this.layerPointToLatLng(Je.layerPoint)}for(Ee=0;Ee<X.length;Ee++)if(X[Ee].fire(_,Je,!0),Je.originalEvent._stopped||X[Ee].options.bubblingMouseEvents===!1&&A(this._mouseEvents,_)!==-1)return}},_draggableMoved:function(m){return m=m.dragging&&m.dragging.enabled()?m:this,m.dragging&&m.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var m=0,_=this._handlers.length;m<_;m++)this._handlers[m].disable()},whenReady:function(m,_){return this._loaded?m.call(_||this,{target:this}):this.on("load",m,_),this},_getMapPanePos:function(){return $i(this._mapPane)||new H(0,0)},_moved:function(){var m=this._getMapPanePos();return m&&!m.equals([0,0])},_getTopLeftPoint:function(m,_){var T=m&&_!==void 0?this._getNewPixelOrigin(m,_):this.getPixelOrigin();return T.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(m,_){var T=this.getSize()._divideBy(2);return this.project(m,_)._subtract(T)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(m,_,T){var B=this._getNewPixelOrigin(T,_);return this.project(m,_)._subtract(B)},_latLngBoundsToNewLayerBounds:function(m,_,T){var B=this._getNewPixelOrigin(T,_);return G([this.project(m.getSouthWest(),_)._subtract(B),this.project(m.getNorthWest(),_)._subtract(B),this.project(m.getSouthEast(),_)._subtract(B),this.project(m.getNorthEast(),_)._subtract(B)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(m){return this.latLngToLayerPoint(m).subtract(this._getCenterLayerPoint())},_limitCenter:function(m,_,T){if(!T)return m;var B=this.project(m,_),X=this.getSize().divideBy(2),me=new ae(B.subtract(X),B.add(X)),Ee=this._getBoundsOffset(me,T,_);return Math.abs(Ee.x)<=1&&Math.abs(Ee.y)<=1?m:this.unproject(B.add(Ee),_)},_limitOffset:function(m,_){if(!_)return m;var T=this.getPixelBounds(),B=new ae(T.min.add(m),T.max.add(m));return m.add(this._getBoundsOffset(B,_))},_getBoundsOffset:function(m,_,T){var B=G(this.project(_.getNorthEast(),T),this.project(_.getSouthWest(),T)),X=B.min.subtract(m.min),me=B.max.subtract(m.max),Ee=this._rebound(X.x,-me.x),Ze=this._rebound(X.y,-me.y);return new H(Ee,Ze)},_rebound:function(m,_){return m+_>0?Math.round(m-_)/2:Math.max(0,Math.ceil(m))-Math.max(0,Math.floor(_))},_limitZoom:function(m){var _=this.getMinZoom(),T=this.getMaxZoom(),B=Et.any3d?this.options.zoomSnap:1;return B&&(m=Math.round(m/B)*B),Math.max(_,Math.min(T,m))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){cr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(m,_){var T=this._getCenterOffset(m)._trunc();return(_&&_.animate)!==!0&&!this.getSize().contains(T)?!1:(this.panBy(T,_),!0)},_createAnimProxy:function(){var m=this._proxy=En("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(m),this.on("zoomanim",function(_){var T=Mc,B=this._proxy.style[T];ii(this._proxy,this.project(_.center,_.zoom),this.getZoomScale(_.zoom,1)),B===this._proxy.style[T]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Dn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var m=this.getCenter(),_=this.getZoom();ii(this._proxy,this.project(m,_),this.getZoomScale(_,1))},_catchTransitionEnd:function(m){this._animatingZoom&&m.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(m,_,T){if(this._animatingZoom)return!0;if(T=T||{},!this._zoomAnimated||T.animate===!1||this._nothingToAnimate()||Math.abs(_-this._zoom)>this.options.zoomAnimationThreshold)return!1;var B=this.getZoomScale(_),X=this._getCenterOffset(m)._divideBy(1-1/B);return T.animate!==!0&&!this.getSize().contains(X)?!1:(D(function(){this._moveStart(!0,T.noMoveStart||!1)._animateZoom(m,_,!0)},this),!0)},_animateZoom:function(m,_,T,B){this._mapPane&&(T&&(this._animatingZoom=!0,this._animateToCenter=m,this._animateToZoom=_,_n(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:m,zoom:_,noUpdate:B}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&cr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function mo(m,_){return new Gn(m,_)}var ps=Z.extend({options:{position:"topright"},initialize:function(m){y(this,m)},getPosition:function(){return this.options.position},setPosition:function(m){var _=this._map;return _&&_.removeControl(this),this.options.position=m,_&&_.addControl(this),this},getContainer:function(){return this._container},addTo:function(m){this.remove(),this._map=m;var _=this._container=this.onAdd(m),T=this.getPosition(),B=m._controlCorners[T];return _n(_,"leaflet-control"),T.indexOf("bottom")!==-1?B.insertBefore(_,B.firstChild):B.appendChild(_),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Dn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(m){this._map&&m&&m.screenX>0&&m.screenY>0&&this._map.getContainer().focus()}}),Sa=function(m){return new ps(m)};Gn.include({addControl:function(m){return m.addTo(this),this},removeControl:function(m){return m.remove(),this},_initControlPos:function(){var m=this._controlCorners={},_="leaflet-",T=this._controlContainer=En("div",_+"control-container",this._container);function B(X,me){var Ee=_+X+" "+_+me;m[X+me]=En("div",Ee,T)}B("top","left"),B("top","right"),B("bottom","left"),B("bottom","right")},_clearControlPos:function(){for(var m in this._controlCorners)Dn(this._controlCorners[m]);Dn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ou=ps.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(m,_,T,B){return T<B?-1:B<T?1:0}},initialize:function(m,_,T){y(this,T),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var B in m)this._addLayer(m[B],B);for(B in _)this._addLayer(_[B],B,!0)},onAdd:function(m){this._initLayout(),this._update(),this._map=m,m.on("zoomend",this._checkDisabledLayers,this);for(var _=0;_<this._layers.length;_++)this._layers[_].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(m){return ps.prototype.addTo.call(this,m),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var m=0;m<this._layers.length;m++)this._layers[m].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(m,_){return this._addLayer(m,_),this._map?this._update():this},addOverlay:function(m,_){return this._addLayer(m,_,!0),this._map?this._update():this},removeLayer:function(m){m.off("add remove",this._onLayerChange,this);var _=this._getLayer(c(m));return _&&this._layers.splice(this._layers.indexOf(_),1),this._map?this._update():this},expand:function(){_n(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var m=this._map.getSize().y-(this._container.offsetTop+50);return m<this._section.clientHeight?(_n(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=m+"px"):cr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return cr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var m="leaflet-control-layers",_=this._container=En("div",m),T=this.options.collapsed;_.setAttribute("aria-haspopup",!0),Dc(_),Ed(_);var B=this._section=En("section",m+"-list");T&&(this._map.on("click",this.collapse,this),gn(_,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var X=this._layersLink=En("a",m+"-toggle",_);X.href="#",X.title="Layers",X.setAttribute("role","button"),gn(X,{keydown:function(me){me.keyCode===13&&this._expandSafely()},click:function(me){Gr(me),this._expandSafely()}},this),T||this.expand(),this._baseLayersList=En("div",m+"-base",B),this._separator=En("div",m+"-separator",B),this._overlaysList=En("div",m+"-overlays",B),_.appendChild(B)},_getLayer:function(m){for(var _=0;_<this._layers.length;_++)if(this._layers[_]&&c(this._layers[_].layer)===m)return this._layers[_]},_addLayer:function(m,_,T){this._map&&m.on("add remove",this._onLayerChange,this),this._layers.push({layer:m,name:_,overlay:T}),this.options.sortLayers&&this._layers.sort(o(function(B,X){return this.options.sortFunction(B.layer,X.layer,B.name,X.name)},this)),this.options.autoZIndex&&m.setZIndex&&(this._lastZIndex++,m.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Lc(this._baseLayersList),Lc(this._overlaysList),this._layerControlInputs=[];var m,_,T,B,X=0;for(T=0;T<this._layers.length;T++)B=this._layers[T],this._addItem(B),_=_||B.overlay,m=m||!B.overlay,X+=B.overlay?0:1;return this.options.hideSingleBase&&(m=m&&X>1,this._baseLayersList.style.display=m?"":"none"),this._separator.style.display=_&&m?"":"none",this},_onLayerChange:function(m){this._handlingClick||this._update();var _=this._getLayer(c(m.target)),T=_.overlay?m.type==="add"?"overlayadd":"overlayremove":m.type==="add"?"baselayerchange":null;T&&this._map.fire(T,_)},_createRadioElement:function(m,_){var T='<input type="radio" class="leaflet-control-layers-selector" name="'+m+'"'+(_?' checked="checked"':"")+"/>",B=document.createElement("div");return B.innerHTML=T,B.firstChild},_addItem:function(m){var _=document.createElement("label"),T=this._map.hasLayer(m.layer),B;m.overlay?(B=document.createElement("input"),B.type="checkbox",B.className="leaflet-control-layers-selector",B.defaultChecked=T):B=this._createRadioElement("leaflet-base-layers_"+c(this),T),this._layerControlInputs.push(B),B.layerId=c(m.layer),gn(B,"click",this._onInputClick,this);var X=document.createElement("span");X.innerHTML=" "+m.name;var me=document.createElement("span");_.appendChild(me),me.appendChild(B),me.appendChild(X);var Ee=m.overlay?this._overlaysList:this._baseLayersList;return Ee.appendChild(_),this._checkDisabledLayers(),_},_onInputClick:function(){if(!this._preventClick){var m=this._layerControlInputs,_,T,B=[],X=[];this._handlingClick=!0;for(var me=m.length-1;me>=0;me--)_=m[me],T=this._getLayer(_.layerId).layer,_.checked?B.push(T):_.checked||X.push(T);for(me=0;me<X.length;me++)this._map.hasLayer(X[me])&&this._map.removeLayer(X[me]);for(me=0;me<B.length;me++)this._map.hasLayer(B[me])||this._map.addLayer(B[me]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var m=this._layerControlInputs,_,T,B=this._map.getZoom(),X=m.length-1;X>=0;X--)_=m[X],T=this._getLayer(_.layerId).layer,_.disabled=T.options.minZoom!==void 0&&B<T.options.minZoom||T.options.maxZoom!==void 0&&B>T.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var m=this._section;this._preventClick=!0,gn(m,"click",Gr),this.expand();var _=this;setTimeout(function(){sr(m,"click",Gr),_._preventClick=!1})}}),po=function(m,_,T){return new Ou(m,_,T)},Pa=ps.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(m){var _="leaflet-control-zoom",T=En("div",_+" leaflet-bar"),B=this.options;return this._zoomInButton=this._createButton(B.zoomInText,B.zoomInTitle,_+"-in",T,this._zoomIn),this._zoomOutButton=this._createButton(B.zoomOutText,B.zoomOutTitle,_+"-out",T,this._zoomOut),this._updateDisabled(),m.on("zoomend zoomlevelschange",this._updateDisabled,this),T},onRemove:function(m){m.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(m){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(m.shiftKey?3:1))},_zoomOut:function(m){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(m.shiftKey?3:1))},_createButton:function(m,_,T,B,X){var me=En("a",T,B);return me.innerHTML=m,me.href="#",me.title=_,me.setAttribute("role","button"),me.setAttribute("aria-label",_),Dc(me),gn(me,"click",sa),gn(me,"click",X,this),gn(me,"click",this._refocusOnMap,this),me},_updateDisabled:function(){var m=this._map,_="leaflet-disabled";cr(this._zoomInButton,_),cr(this._zoomOutButton,_),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||m._zoom===m.getMinZoom())&&(_n(this._zoomOutButton,_),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||m._zoom===m.getMaxZoom())&&(_n(this._zoomInButton,_),this._zoomInButton.setAttribute("aria-disabled","true"))}});Gn.mergeOptions({zoomControl:!0}),Gn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Pa,this.addControl(this.zoomControl))});var Md=function(m){return new Pa(m)},Es=ps.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(m){var _="leaflet-control-scale",T=En("div",_),B=this.options;return this._addScales(B,_+"-line",T),m.on(B.updateWhenIdle?"moveend":"move",this._update,this),m.whenReady(this._update,this),T},onRemove:function(m){m.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(m,_,T){m.metric&&(this._mScale=En("div",_,T)),m.imperial&&(this._iScale=En("div",_,T))},_update:function(){var m=this._map,_=m.getSize().y/2,T=m.distance(m.containerPointToLatLng([0,_]),m.containerPointToLatLng([this.options.maxWidth,_]));this._updateScales(T)},_updateScales:function(m){this.options.metric&&m&&this._updateMetric(m),this.options.imperial&&m&&this._updateImperial(m)},_updateMetric:function(m){var _=this._getRoundNum(m),T=_<1e3?_+" m":_/1e3+" km";this._updateScale(this._mScale,T,_/m)},_updateImperial:function(m){var _=m*3.2808399,T,B,X;_>5280?(T=_/5280,B=this._getRoundNum(T),this._updateScale(this._iScale,B+" mi",B/T)):(X=this._getRoundNum(_),this._updateScale(this._iScale,X+" ft",X/_))},_updateScale:function(m,_,T){m.style.width=Math.round(this.options.maxWidth*T)+"px",m.innerHTML=_},_getRoundNum:function(m){var _=Math.pow(10,(Math.floor(m)+"").length-1),T=m/_;return T=T>=10?10:T>=5?5:T>=3?3:T>=2?2:1,_*T}}),Xl=function(m){return new Es(m)},Ql='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',gl=ps.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Et.inlineSvg?Ql+" ":"")+"Leaflet</a>"},initialize:function(m){y(this,m),this._attributions={}},onAdd:function(m){m.attributionControl=this,this._container=En("div","leaflet-control-attribution"),Dc(this._container);for(var _ in m._layers)m._layers[_].getAttribution&&this.addAttribution(m._layers[_].getAttribution());return this._update(),m.on("layeradd",this._addAttribution,this),this._container},onRemove:function(m){m.off("layeradd",this._addAttribution,this)},_addAttribution:function(m){m.layer.getAttribution&&(this.addAttribution(m.layer.getAttribution()),m.layer.once("remove",function(){this.removeAttribution(m.layer.getAttribution())},this))},setPrefix:function(m){return this.options.prefix=m,this._update(),this},addAttribution:function(m){return m?(this._attributions[m]||(this._attributions[m]=0),this._attributions[m]++,this._update(),this):this},removeAttribution:function(m){return m?(this._attributions[m]&&(this._attributions[m]--,this._update()),this):this},_update:function(){if(this._map){var m=[];for(var _ in this._attributions)this._attributions[_]&&m.push(_);var T=[];this.options.prefix&&T.push(this.options.prefix),m.length&&T.push(m.join(", ")),this._container.innerHTML=T.join(' <span aria-hidden="true">|</span> ')}}});Gn.mergeOptions({attributionControl:!0}),Gn.addInitHook(function(){this.options.attributionControl&&new gl().addTo(this)});var Mu=function(m){return new gl(m)};ps.Layers=Ou,ps.Zoom=Pa,ps.Scale=Es,ps.Attribution=gl,Sa.layers=po,Sa.zoom=Md,Sa.scale=Xl,Sa.attribution=Mu;var Aa=Z.extend({initialize:function(m){this._map=m},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Aa.addTo=function(m,_){return m.addHandler(_,this),this};var Ld={Events:J},xo=Et.touch?"touchstart mousedown":"mousedown",qa=Q.extend({options:{clickTolerance:3},initialize:function(m,_,T,B){y(this,B),this._element=m,this._dragStartTarget=_||m,this._preventOutline=T},enable:function(){this._enabled||(gn(this._dragStartTarget,xo,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(qa._dragging===this&&this.finishDrag(!0),sr(this._dragStartTarget,xo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(m){if(this._enabled&&(this._moved=!1,!$o(this._element,"leaflet-zoom-anim"))){if(m.touches&&m.touches.length!==1){qa._dragging===this&&this.finishDrag();return}if(!(qa._dragging||m.shiftKey||m.which!==1&&m.button!==1&&!m.touches)&&(qa._dragging=this,this._preventOutline&&xl(this._element),Cd(),rr(),!this._moving)){this.fire("down");var _=m.touches?m.touches[0]:m,T=fo(this._element);this._startPoint=new H(_.clientX,_.clientY),this._startPos=$i(this._element),this._parentScale=Ni(T);var B=m.type==="mousedown";gn(document,B?"mousemove":"touchmove",this._onMove,this),gn(document,B?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(m){if(this._enabled){if(m.touches&&m.touches.length>1){this._moved=!0;return}var _=m.touches&&m.touches.length===1?m.touches[0]:m,T=new H(_.clientX,_.clientY)._subtract(this._startPoint);!T.x&&!T.y||Math.abs(T.x)+Math.abs(T.y)<this.options.clickTolerance||(T.x/=this._parentScale.x,T.y/=this._parentScale.y,Gr(m),this._moved||(this.fire("dragstart"),this._moved=!0,_n(document.body,"leaflet-dragging"),this._lastTarget=m.target||m.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),_n(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(T),this._moving=!0,this._lastEvent=m,this._updatePosition())}},_updatePosition:function(){var m={originalEvent:this._lastEvent};this.fire("predrag",m),ms(this._element,this._newPos),this.fire("drag",m)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(m){cr(document.body,"leaflet-dragging"),this._lastTarget&&(cr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),sr(document,"mousemove touchmove",this._onMove,this),sr(document,"mouseup touchend touchcancel",this._onUp,this),Bi(),Bo();var _=this._moved&&this._moving;this._moving=!1,qa._dragging=!1,_&&this.fire("dragend",{noInertia:m,distance:this._newPos.distanceTo(this._startPos)})}});function Bc(m,_,T){var B,X=[1,4,2,8],me,Ee,Ze,Je,pt,zt,dn,Bn;for(me=0,zt=m.length;me<zt;me++)m[me]._code=nt(m[me],_);for(Ze=0;Ze<4;Ze++){for(dn=X[Ze],B=[],me=0,zt=m.length,Ee=zt-1;me<zt;Ee=me++)Je=m[me],pt=m[Ee],Je._code&dn?pt._code&dn||(Bn=We(pt,Je,dn,_,T),Bn._code=nt(Bn,_),B.push(Bn)):(pt._code&dn&&(Bn=We(pt,Je,dn,_,T),Bn._code=nt(Bn,_),B.push(Bn)),B.push(Je));m=B}return m}function Lu(m,_){var T,B,X,me,Ee,Ze,Je,pt,zt;if(!m||m.length===0)throw new Error("latlngs not passed");Gt(m)||(console.warn("latlngs are not flat! Only the first ring will be used"),m=m[0]);var dn=xe([0,0]),Bn=fe(m),ca=Bn.getNorthWest().distanceTo(Bn.getSouthWest())*Bn.getNorthEast().distanceTo(Bn.getNorthWest());ca<1700&&(dn=Du(m));var $s=m.length,Ei=[];for(T=0;T<$s;T++){var di=xe(m[T]);Ei.push(_.project(xe([di.lat-dn.lat,di.lng-dn.lng])))}for(Ze=Je=pt=0,T=0,B=$s-1;T<$s;B=T++)X=Ei[T],me=Ei[B],Ee=X.y*me.x-me.y*X.x,Je+=(X.x+me.x)*Ee,pt+=(X.y+me.y)*Ee,Ze+=Ee*3;Ze===0?zt=Ei[0]:zt=[Je/Ze,pt/Ze];var Hd=_.unproject(ue(zt));return xe([Hd.lat+dn.lat,Hd.lng+dn.lng])}function Du(m){for(var _=0,T=0,B=0,X=0;X<m.length;X++){var me=xe(m[X]);_+=me.lat,T+=me.lng,B++}return xe([_/B,T/B])}var Dd={__proto__:null,clipPolygon:Bc,polygonCenter:Lu,centroid:Du};function Ho(m,_){if(!_||!m.length)return m.slice();var T=_*_;return m=re(m,T),m=Iu(m,T),m}function Id(m,_,T){return Math.sqrt($t(m,_,T,!0))}function Jl(m,_,T){return $t(m,_,T)}function Iu(m,_){var T=m.length,B=typeof Uint8Array<"u"?Uint8Array:Array,X=new B(T);X[0]=X[T-1]=1,$(m,X,_,0,T-1);var me,Ee=[];for(me=0;me<T;me++)X[me]&&Ee.push(m[me]);return Ee}function $(m,_,T,B,X){var me=0,Ee,Ze,Je;for(Ze=B+1;Ze<=X-1;Ze++)Je=$t(m[Ze],m[B],m[X],!0),Je>me&&(Ee=Ze,me=Je);me>T&&(_[Ee]=1,$(m,_,T,B,Ee),$(m,_,T,Ee,X))}function re(m,_){for(var T=[m[0]],B=1,X=0,me=m.length;B<me;B++)vt(m[B],m[X])>_&&(T.push(m[B]),X=B);return X<me-1&&T.push(m[me-1]),T}var Se;function Ie(m,_,T,B,X){var me=B?Se:nt(m,T),Ee=nt(_,T),Ze,Je,pt;for(Se=Ee;;){if(!(me|Ee))return[m,_];if(me&Ee)return!1;Ze=me||Ee,Je=We(m,_,Ze,T,X),pt=nt(Je,T),Ze===me?(m=Je,me=pt):(_=Je,Ee=pt)}}function We(m,_,T,B,X){var me=_.x-m.x,Ee=_.y-m.y,Ze=B.min,Je=B.max,pt,zt;return T&8?(pt=m.x+me*(Je.y-m.y)/Ee,zt=Je.y):T&4?(pt=m.x+me*(Ze.y-m.y)/Ee,zt=Ze.y):T&2?(pt=Je.x,zt=m.y+Ee*(Je.x-m.x)/me):T&1&&(pt=Ze.x,zt=m.y+Ee*(Ze.x-m.x)/me),new H(pt,zt,X)}function nt(m,_){var T=0;return m.x<_.min.x?T|=1:m.x>_.max.x&&(T|=2),m.y<_.min.y?T|=4:m.y>_.max.y&&(T|=8),T}function vt(m,_){var T=_.x-m.x,B=_.y-m.y;return T*T+B*B}function $t(m,_,T,B){var X=_.x,me=_.y,Ee=T.x-X,Ze=T.y-me,Je=Ee*Ee+Ze*Ze,pt;return Je>0&&(pt=((m.x-X)*Ee+(m.y-me)*Ze)/Je,pt>1?(X=T.x,me=T.y):pt>0&&(X+=Ee*pt,me+=Ze*pt)),Ee=m.x-X,Ze=m.y-me,B?Ee*Ee+Ze*Ze:new H(X,me)}function Gt(m){return!N(m[0])||typeof m[0][0]!="object"&&typeof m[0][0]<"u"}function On(m){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Gt(m)}function An(m,_){var T,B,X,me,Ee,Ze,Je,pt;if(!m||m.length===0)throw new Error("latlngs not passed");Gt(m)||(console.warn("latlngs are not flat! Only the first ring will be used"),m=m[0]);var zt=xe([0,0]),dn=fe(m),Bn=dn.getNorthWest().distanceTo(dn.getSouthWest())*dn.getNorthEast().distanceTo(dn.getNorthWest());Bn<1700&&(zt=Du(m));var ca=m.length,$s=[];for(T=0;T<ca;T++){var Ei=xe(m[T]);$s.push(_.project(xe([Ei.lat-zt.lat,Ei.lng-zt.lng])))}for(T=0,B=0;T<ca-1;T++)B+=$s[T].distanceTo($s[T+1])/2;if(B===0)pt=$s[0];else for(T=0,me=0;T<ca-1;T++)if(Ee=$s[T],Ze=$s[T+1],X=Ee.distanceTo(Ze),me+=X,me>B){Je=(me-B)/X,pt=[Ze.x-Je*(Ze.x-Ee.x),Ze.y-Je*(Ze.y-Ee.y)];break}var di=_.unproject(ue(pt));return xe([di.lat+zt.lat,di.lng+zt.lng])}var ar={__proto__:null,simplify:Ho,pointToSegmentDistance:Id,closestPointOnSegment:Jl,clipSegment:Ie,_getEdgeIntersection:We,_getBitCode:nt,_sqClosestPointOnSegment:$t,isFlat:Gt,_flat:On,polylineCenter:An},Zr={project:function(m){return new H(m.lng,m.lat)},unproject:function(m){return new be(m.y,m.x)},bounds:new ae([-180,-90],[180,90])},ts={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ae([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(m){var _=Math.PI/180,T=this.R,B=m.lat*_,X=this.R_MINOR/T,me=Math.sqrt(1-X*X),Ee=me*Math.sin(B),Ze=Math.tan(Math.PI/4-B/2)/Math.pow((1-Ee)/(1+Ee),me/2);return B=-T*Math.log(Math.max(Ze,1e-10)),new H(m.lng*_*T,B)},unproject:function(m){for(var _=180/Math.PI,T=this.R,B=this.R_MINOR/T,X=Math.sqrt(1-B*B),me=Math.exp(-m.y/T),Ee=Math.PI/2-2*Math.atan(me),Ze=0,Je=.1,pt;Ze<15&&Math.abs(Je)>1e-7;Ze++)pt=X*Math.sin(Ee),pt=Math.pow((1-pt)/(1+pt),X/2),Je=Math.PI/2-2*Math.atan(me*pt)-Ee,Ee+=Je;return new be(Ee*_,m.x*_/T)}},Os={__proto__:null,LonLat:Zr,Mercator:ts,SphericalMercator:Ve},Ca=a({},Pe,{code:"EPSG:3395",projection:ts,transformation:(function(){var m=.5/(Math.PI*ts.R);return Le(m,.5,-m,.5)})()}),Rs=a({},Pe,{code:"EPSG:4326",projection:Zr,transformation:Le(1/180,1,-1/180,.5)}),go=a({},we,{projection:Zr,transformation:Le(1,0,-1,0),scale:function(m){return Math.pow(2,m)},zoom:function(m){return Math.log(m)/Math.LN2},distance:function(m,_){var T=_.lng-m.lng,B=_.lat-m.lat;return Math.sqrt(T*T+B*B)},infinite:!0});we.Earth=Pe,we.EPSG3395=Ca,we.EPSG3857=dt,we.EPSG900913=xt,we.EPSG4326=Rs,we.Simple=go;var is=Q.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(m){return m.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(m){return m&&m.removeLayer(this),this},getPane:function(m){return this._map.getPane(m?this.options[m]||m:this.options.pane)},addInteractiveTarget:function(m){return this._map._targets[c(m)]=this,this},removeInteractiveTarget:function(m){return delete this._map._targets[c(m)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(m){var _=m.target;if(_.hasLayer(this)){if(this._map=_,this._zoomAnimated=_._zoomAnimated,this.getEvents){var T=this.getEvents();_.on(T,this),this.once("remove",function(){_.off(T,this)},this)}this.onAdd(_),this.fire("add"),_.fire("layeradd",{layer:this})}}});Gn.include({addLayer:function(m){if(!m._layerAdd)throw new Error("The provided object is not a Layer.");var _=c(m);return this._layers[_]?this:(this._layers[_]=m,m._mapToAdd=this,m.beforeAdd&&m.beforeAdd(this),this.whenReady(m._layerAdd,m),this)},removeLayer:function(m){var _=c(m);return this._layers[_]?(this._loaded&&m.onRemove(this),delete this._layers[_],this._loaded&&(this.fire("layerremove",{layer:m}),m.fire("remove")),m._map=m._mapToAdd=null,this):this},hasLayer:function(m){return c(m)in this._layers},eachLayer:function(m,_){for(var T in this._layers)m.call(_,this._layers[T]);return this},_addLayers:function(m){m=m?N(m)?m:[m]:[];for(var _=0,T=m.length;_<T;_++)this.addLayer(m[_])},_addZoomLimit:function(m){(!isNaN(m.options.maxZoom)||!isNaN(m.options.minZoom))&&(this._zoomBoundLayers[c(m)]=m,this._updateZoomLevels())},_removeZoomLimit:function(m){var _=c(m);this._zoomBoundLayers[_]&&(delete this._zoomBoundLayers[_],this._updateZoomLevels())},_updateZoomLevels:function(){var m=1/0,_=-1/0,T=this._getZoomSpan();for(var B in this._zoomBoundLayers){var X=this._zoomBoundLayers[B].options;m=X.minZoom===void 0?m:Math.min(m,X.minZoom),_=X.maxZoom===void 0?_:Math.max(_,X.maxZoom)}this._layersMaxZoom=_===-1/0?void 0:_,this._layersMinZoom=m===1/0?void 0:m,T!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var aa=is.extend({initialize:function(m,_){y(this,_),this._layers={};var T,B;if(m)for(T=0,B=m.length;T<B;T++)this.addLayer(m[T])},addLayer:function(m){var _=this.getLayerId(m);return this._layers[_]=m,this._map&&this._map.addLayer(m),this},removeLayer:function(m){var _=m in this._layers?m:this.getLayerId(m);return this._map&&this._layers[_]&&this._map.removeLayer(this._layers[_]),delete this._layers[_],this},hasLayer:function(m){var _=typeof m=="number"?m:this.getLayerId(m);return _ in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(m){var _=Array.prototype.slice.call(arguments,1),T,B;for(T in this._layers)B=this._layers[T],B[m]&&B[m].apply(B,_);return this},onAdd:function(m){this.eachLayer(m.addLayer,m)},onRemove:function(m){this.eachLayer(m.removeLayer,m)},eachLayer:function(m,_){for(var T in this._layers)m.call(_,this._layers[T]);return this},getLayer:function(m){return this._layers[m]},getLayers:function(){var m=[];return this.eachLayer(m.push,m),m},setZIndex:function(m){return this.invoke("setZIndex",m)},getLayerId:function(m){return c(m)}}),ec=function(m,_){return new aa(m,_)},ki=aa.extend({addLayer:function(m){return this.hasLayer(m)?this:(m.addEventParent(this),aa.prototype.addLayer.call(this,m),this.fire("layeradd",{layer:m}))},removeLayer:function(m){return this.hasLayer(m)?(m in this._layers&&(m=this._layers[m]),m.removeEventParent(this),aa.prototype.removeLayer.call(this,m),this.fire("layerremove",{layer:m})):this},setStyle:function(m){return this.invoke("setStyle",m)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var m=new te;for(var _ in this._layers){var T=this._layers[_];m.extend(T.getBounds?T.getBounds():T.getLatLng())}return m}}),Rd=function(m,_){return new ki(m,_)},zi=Z.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(m){y(this,m)},createIcon:function(m){return this._createIcon("icon",m)},createShadow:function(m){return this._createIcon("shadow",m)},_createIcon:function(m,_){var T=this._getIconUrl(m);if(!T){if(m==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var B=this._createImg(T,_&&_.tagName==="IMG"?_:null);return this._setIconStyles(B,m),(this.options.crossOrigin||this.options.crossOrigin==="")&&(B.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),B},_setIconStyles:function(m,_){var T=this.options,B=T[_+"Size"];typeof B=="number"&&(B=[B,B]);var X=ue(B),me=ue(_==="shadow"&&T.shadowAnchor||T.iconAnchor||X&&X.divideBy(2,!0));m.className="leaflet-marker-"+_+" "+(T.className||""),me&&(m.style.marginLeft=-me.x+"px",m.style.marginTop=-me.y+"px"),X&&(m.style.width=X.x+"px",m.style.height=X.y+"px")},_createImg:function(m,_){return _=_||document.createElement("img"),_.src=m,_},_getIconUrl:function(m){return Et.retina&&this.options[m+"RetinaUrl"]||this.options[m+"Url"]}});function Fd(m){return new zi(m)}var Wo=zi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(m){return typeof Wo.imagePath!="string"&&(Wo.imagePath=this._detectIconPath()),(this.options.imagePath||Wo.imagePath)+zi.prototype._getIconUrl.call(this,m)},_stripUrl:function(m){var _=function(T,B,X){var me=B.exec(T);return me&&me[X]};return m=_(m,/^url\((['"])?(.+)\1\)$/,2),m&&_(m,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var m=En("div","leaflet-default-icon-path",document.body),_=Fo(m,"background-image")||Fo(m,"backgroundImage");if(document.body.removeChild(m),_=this._stripUrl(_),_)return _;var T=document.querySelector('link[href$="leaflet.css"]');return T?T.href.substring(0,T.href.length-11-1):""}}),tc=Aa.extend({initialize:function(m){this._marker=m},addHooks:function(){var m=this._marker._icon;this._draggable||(this._draggable=new qa(m,m,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),_n(m,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&cr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(m){var _=this._marker,T=_._map,B=this._marker.options.autoPanSpeed,X=this._marker.options.autoPanPadding,me=$i(_._icon),Ee=T.getPixelBounds(),Ze=T.getPixelOrigin(),Je=G(Ee.min._subtract(Ze).add(X),Ee.max._subtract(Ze).subtract(X));if(!Je.contains(me)){var pt=ue((Math.max(Je.max.x,me.x)-Je.max.x)/(Ee.max.x-Je.max.x)-(Math.min(Je.min.x,me.x)-Je.min.x)/(Ee.min.x-Je.min.x),(Math.max(Je.max.y,me.y)-Je.max.y)/(Ee.max.y-Je.max.y)-(Math.min(Je.min.y,me.y)-Je.min.y)/(Ee.min.y-Je.min.y)).multiplyBy(B);T.panBy(pt,{animate:!1}),this._draggable._newPos._add(pt),this._draggable._startPos._add(pt),ms(_._icon,this._draggable._newPos),this._onDrag(m),this._panRequest=D(this._adjustPan.bind(this,m))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(m){this._marker.options.autoPan&&(R(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,m)))},_onDrag:function(m){var _=this._marker,T=_._shadow,B=$i(_._icon),X=_._map.layerPointToLatLng(B);T&&ms(T,B),_._latlng=X,m.latlng=X,m.oldLatLng=this._oldLatLng,_.fire("move",m).fire("drag",m)},_onDragEnd:function(m){R(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",m)}}),Yr=is.extend({options:{icon:new Wo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(m,_){y(this,_),this._latlng=xe(m)},onAdd:function(m){this._zoomAnimated=this._zoomAnimated&&m.options.markerZoomAnimation,this._zoomAnimated&&m.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(m){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&m.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(m){var _=this._latlng;return this._latlng=xe(m),this.update(),this.fire("move",{oldLatLng:_,latlng:this._latlng})},setZIndexOffset:function(m){return this.options.zIndexOffset=m,this.update()},getIcon:function(){return this.options.icon},setIcon:function(m){return this.options.icon=m,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var m=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(m)}return this},_initIcon:function(){var m=this.options,_="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),T=m.icon.createIcon(this._icon),B=!1;T!==this._icon&&(this._icon&&this._removeIcon(),B=!0,m.title&&(T.title=m.title),T.tagName==="IMG"&&(T.alt=m.alt||"")),_n(T,_),m.keyboard&&(T.tabIndex="0",T.setAttribute("role","button")),this._icon=T,m.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&gn(T,"focus",this._panOnFocus,this);var X=m.icon.createShadow(this._shadow),me=!1;X!==this._shadow&&(this._removeShadow(),me=!0),X&&(_n(X,_),X.alt=""),this._shadow=X,m.opacity<1&&this._updateOpacity(),B&&this.getPane().appendChild(this._icon),this._initInteraction(),X&&me&&this.getPane(m.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&sr(this._icon,"focus",this._panOnFocus,this),Dn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Dn(this._shadow),this._shadow=null},_setPos:function(m){this._icon&&ms(this._icon,m),this._shadow&&ms(this._shadow,m),this._zIndex=m.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(m){this._icon&&(this._icon.style.zIndex=this._zIndex+m)},_animateZoom:function(m){var _=this._map._latLngToNewLayerPoint(this._latlng,m.zoom,m.center).round();this._setPos(_)},_initInteraction:function(){if(this.options.interactive&&(_n(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),tc)){var m=this.options.draggable;this.dragging&&(m=this.dragging.enabled(),this.dragging.disable()),this.dragging=new tc(this),m&&this.dragging.enable()}},setOpacity:function(m){return this.options.opacity=m,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var m=this.options.opacity;this._icon&&Hs(this._icon,m),this._shadow&&Hs(this._shadow,m)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var m=this._map;if(m){var _=this.options.icon.options,T=_.iconSize?ue(_.iconSize):ue(0,0),B=_.iconAnchor?ue(_.iconAnchor):ue(0,0);m.panInside(this._latlng,{paddingTopLeft:B,paddingBottomRight:T.subtract(B)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function $d(m,_){return new Yr(m,_)}var Si=is.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(m){this._renderer=m.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(m){return y(this,m),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&m&&Object.prototype.hasOwnProperty.call(m,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),vl=Si.extend({options:{fill:!0,radius:10},initialize:function(m,_){y(this,_),this._latlng=xe(m),this._radius=this.options.radius},setLatLng:function(m){var _=this._latlng;return this._latlng=xe(m),this.redraw(),this.fire("move",{oldLatLng:_,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(m){return this.options.radius=this._radius=m,this.redraw()},getRadius:function(){return this._radius},setStyle:function(m){var _=m&&m.radius||this._radius;return Si.prototype.setStyle.call(this,m),this.setRadius(_),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var m=this._radius,_=this._radiusY||m,T=this._clickTolerance(),B=[m+T,_+T];this._pxBounds=new ae(this._point.subtract(B),this._point.add(B))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(m){return m.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Bd(m,_){return new vl(m,_)}var ia=vl.extend({initialize:function(m,_,T){if(typeof _=="number"&&(_=a({},T,{radius:_})),y(this,_),this._latlng=xe(m),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(m){return this._mRadius=m,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var m=[this._radius,this._radiusY||this._radius];return new te(this._map.layerPointToLatLng(this._point.subtract(m)),this._map.layerPointToLatLng(this._point.add(m)))},setStyle:Si.prototype.setStyle,_project:function(){var m=this._latlng.lng,_=this._latlng.lat,T=this._map,B=T.options.crs;if(B.distance===Pe.distance){var X=Math.PI/180,me=this._mRadius/Pe.R/X,Ee=T.project([_+me,m]),Ze=T.project([_-me,m]),Je=Ee.add(Ze).divideBy(2),pt=T.unproject(Je).lat,zt=Math.acos((Math.cos(me*X)-Math.sin(_*X)*Math.sin(pt*X))/(Math.cos(_*X)*Math.cos(pt*X)))/X;(isNaN(zt)||zt===0)&&(zt=me/Math.cos(Math.PI/180*_)),this._point=Je.subtract(T.getPixelOrigin()),this._radius=isNaN(zt)?0:Je.x-T.project([pt,m-zt]).x,this._radiusY=Je.y-Ee.y}else{var dn=B.unproject(B.project(this._latlng).subtract([this._mRadius,0]));this._point=T.latLngToLayerPoint(this._latlng),this._radius=this._point.x-T.latLngToLayerPoint(dn).x}this._updateBounds()}});function qc(m,_,T){return new ia(m,_,T)}var oa=Si.extend({options:{smoothFactor:1,noClip:!1},initialize:function(m,_){y(this,_),this._setLatLngs(m)},getLatLngs:function(){return this._latlngs},setLatLngs:function(m){return this._setLatLngs(m),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(m){for(var _=1/0,T=null,B=$t,X,me,Ee=0,Ze=this._parts.length;Ee<Ze;Ee++)for(var Je=this._parts[Ee],pt=1,zt=Je.length;pt<zt;pt++){X=Je[pt-1],me=Je[pt];var dn=B(m,X,me,!0);dn<_&&(_=dn,T=B(m,X,me))}return T&&(T.distance=Math.sqrt(_)),T},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return An(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(m,_){return _=_||this._defaultShape(),m=xe(m),_.push(m),this._bounds.extend(m),this.redraw()},_setLatLngs:function(m){this._bounds=new te,this._latlngs=this._convertLatLngs(m)},_defaultShape:function(){return Gt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(m){for(var _=[],T=Gt(m),B=0,X=m.length;B<X;B++)T?(_[B]=xe(m[B]),this._bounds.extend(_[B])):_[B]=this._convertLatLngs(m[B]);return _},_project:function(){var m=new ae;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,m),this._bounds.isValid()&&m.isValid()&&(this._rawPxBounds=m,this._updateBounds())},_updateBounds:function(){var m=this._clickTolerance(),_=new H(m,m);this._rawPxBounds&&(this._pxBounds=new ae([this._rawPxBounds.min.subtract(_),this._rawPxBounds.max.add(_)]))},_projectLatlngs:function(m,_,T){var B=m[0]instanceof be,X=m.length,me,Ee;if(B){for(Ee=[],me=0;me<X;me++)Ee[me]=this._map.latLngToLayerPoint(m[me]),T.extend(Ee[me]);_.push(Ee)}else for(me=0;me<X;me++)this._projectLatlngs(m[me],_,T)},_clipPoints:function(){var m=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(m))){if(this.options.noClip){this._parts=this._rings;return}var _=this._parts,T,B,X,me,Ee,Ze,Je;for(T=0,X=0,me=this._rings.length;T<me;T++)for(Je=this._rings[T],B=0,Ee=Je.length;B<Ee-1;B++)Ze=Ie(Je[B],Je[B+1],m,B,!0),Ze&&(_[X]=_[X]||[],_[X].push(Ze[0]),(Ze[1]!==Je[B+1]||B===Ee-2)&&(_[X].push(Ze[1]),X++))}},_simplifyPoints:function(){for(var m=this._parts,_=this.options.smoothFactor,T=0,B=m.length;T<B;T++)m[T]=Ho(m[T],_)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(m,_){var T,B,X,me,Ee,Ze,Je=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(m))return!1;for(T=0,me=this._parts.length;T<me;T++)for(Ze=this._parts[T],B=0,Ee=Ze.length,X=Ee-1;B<Ee;X=B++)if(!(!_&&B===0)&&Id(m,Ze[X],Ze[B])<=Je)return!0;return!1}});function Oh(m,_){return new oa(m,_)}oa._flat=On;var Ms=oa.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Lu(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(m){var _=oa.prototype._convertLatLngs.call(this,m),T=_.length;return T>=2&&_[0]instanceof be&&_[0].equals(_[T-1])&&_.pop(),_},_setLatLngs:function(m){oa.prototype._setLatLngs.call(this,m),Gt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Gt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var m=this._renderer._bounds,_=this.options.weight,T=new H(_,_);if(m=new ae(m.min.subtract(T),m.max.add(T)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(m))){if(this.options.noClip){this._parts=this._rings;return}for(var B=0,X=this._rings.length,me;B<X;B++)me=Bc(this._rings[B],m,!0),me.length&&this._parts.push(me)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(m){var _=!1,T,B,X,me,Ee,Ze,Je,pt;if(!this._pxBounds||!this._pxBounds.contains(m))return!1;for(me=0,Je=this._parts.length;me<Je;me++)for(T=this._parts[me],Ee=0,pt=T.length,Ze=pt-1;Ee<pt;Ze=Ee++)B=T[Ee],X=T[Ze],B.y>m.y!=X.y>m.y&&m.x<(X.x-B.x)*(m.y-B.y)/(X.y-B.y)+B.x&&(_=!_);return _||oa.prototype._containsPoint.call(this,m,!0)}});function qd(m,_){return new Ms(m,_)}var Pi=ki.extend({initialize:function(m,_){y(this,_),this._layers={},m&&this.addData(m)},addData:function(m){var _=N(m)?m:m.features,T,B,X;if(_){for(T=0,B=_.length;T<B;T++)X=_[T],(X.geometries||X.geometry||X.features||X.coordinates)&&this.addData(X);return this}var me=this.options;if(me.filter&&!me.filter(m))return this;var Ee=yl(m,me);return Ee?(Ee.feature=Vi(m),Ee.defaultOptions=Ee.options,this.resetStyle(Ee),me.onEachFeature&&me.onEachFeature(m,Ee),this.addLayer(Ee)):this},resetStyle:function(m){return m===void 0?this.eachLayer(this.resetStyle,this):(m.options=a({},m.defaultOptions),this._setLayerStyle(m,this.options.style),this)},setStyle:function(m){return this.eachLayer(function(_){this._setLayerStyle(_,m)},this)},_setLayerStyle:function(m,_){m.setStyle&&(typeof _=="function"&&(_=_(m.feature)),m.setStyle(_))}});function yl(m,_){var T=m.type==="Feature"?m.geometry:m,B=T?T.coordinates:null,X=[],me=_&&_.pointToLayer,Ee=_&&_.coordsToLatLng||Ko,Ze,Je,pt,zt;if(!B&&!T)return null;switch(T.type){case"Point":return Ze=Ee(B),vo(me,m,Ze,_);case"MultiPoint":for(pt=0,zt=B.length;pt<zt;pt++)Ze=Ee(B[pt]),X.push(vo(me,m,Ze,_));return new ki(X);case"LineString":case"MultiLineString":return Je=Ws(B,T.type==="LineString"?0:1,Ee),new oa(Je,_);case"Polygon":case"MultiPolygon":return Je=Ws(B,T.type==="Polygon"?1:2,Ee),new Ms(Je,_);case"GeometryCollection":for(pt=0,zt=T.geometries.length;pt<zt;pt++){var dn=yl({geometry:T.geometries[pt],type:"Feature",properties:m.properties},_);dn&&X.push(dn)}return new ki(X);case"FeatureCollection":for(pt=0,zt=T.features.length;pt<zt;pt++){var Bn=yl(T.features[pt],_);Bn&&X.push(Bn)}return new ki(X);default:throw new Error("Invalid GeoJSON object.")}}function vo(m,_,T,B){return m?m(_,T):new Yr(T,B&&B.markersInheritOptions&&B)}function Ko(m){return new be(m[1],m[0],m[2])}function Ws(m,_,T){for(var B=[],X=0,me=m.length,Ee;X<me;X++)Ee=_?Ws(m[X],_-1,T):(T||Ko)(m[X]),B.push(Ee);return B}function Ks(m,_){return m=xe(m),m.alt!==void 0?[g(m.lng,_),g(m.lat,_),g(m.alt,_)]:[g(m.lng,_),g(m.lat,_)]}function yo(m,_,T,B){for(var X=[],me=0,Ee=m.length;me<Ee;me++)X.push(_?yo(m[me],Gt(m[me])?0:_-1,T,B):Ks(m[me],B));return!_&&T&&X.length>0&&X.push(X[0].slice()),X}function li(m,_){return m.feature?a({},m.feature,{geometry:_}):Vi(_)}function Vi(m){return m.type==="Feature"||m.type==="FeatureCollection"?m:{type:"Feature",properties:{},geometry:m}}var nc={toGeoJSON:function(m){return li(this,{type:"Point",coordinates:Ks(this.getLatLng(),m)})}};Yr.include(nc),ia.include(nc),vl.include(nc),oa.include({toGeoJSON:function(m){var _=!Gt(this._latlngs),T=yo(this._latlngs,_?1:0,!1,m);return li(this,{type:(_?"Multi":"")+"LineString",coordinates:T})}}),Ms.include({toGeoJSON:function(m){var _=!Gt(this._latlngs),T=_&&!Gt(this._latlngs[0]),B=yo(this._latlngs,T?2:_?1:0,!0,m);return _||(B=[B]),li(this,{type:(T?"Multi":"")+"Polygon",coordinates:B})}}),aa.include({toMultiPoint:function(m){var _=[];return this.eachLayer(function(T){_.push(T.toGeoJSON(m).geometry.coordinates)}),li(this,{type:"MultiPoint",coordinates:_})},toGeoJSON:function(m){var _=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(_==="MultiPoint")return this.toMultiPoint(m);var T=_==="GeometryCollection",B=[];return this.eachLayer(function(X){if(X.toGeoJSON){var me=X.toGeoJSON(m);if(T)B.push(me.geometry);else{var Ee=Vi(me);Ee.type==="FeatureCollection"?B.push.apply(B,Ee.features):B.push(Ee)}}}),T?li(this,{geometries:B,type:"GeometryCollection"}):{type:"FeatureCollection",features:B}}});function Go(m,_){return new Pi(m,_)}var mr=Go,Ui=is.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(m,_,T){this._url=m,this._bounds=fe(_),y(this,T)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(_n(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Dn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(m){return this.options.opacity=m,this._image&&this._updateOpacity(),this},setStyle:function(m){return m.opacity&&this.setOpacity(m.opacity),this},bringToFront:function(){return this._map&&ml(this._image),this},bringToBack:function(){return this._map&&Fi(this._image),this},setUrl:function(m){return this._url=m,this._image&&(this._image.src=m),this},setBounds:function(m){return this._bounds=fe(m),this._map&&this._reset(),this},getEvents:function(){var m={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(m.zoomanim=this._animateZoom),m},setZIndex:function(m){return this.options.zIndex=m,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var m=this._url.tagName==="IMG",_=this._image=m?this._url:En("img");if(_n(_,"leaflet-image-layer"),this._zoomAnimated&&_n(_,"leaflet-zoom-animated"),this.options.className&&_n(_,this.options.className),_.onselectstart=h,_.onmousemove=h,_.onload=o(this.fire,this,"load"),_.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),m){this._url=_.src;return}_.src=this._url,_.alt=this.options.alt},_animateZoom:function(m){var _=this._map.getZoomScale(m.zoom),T=this._map._latLngBoundsToNewLayerBounds(this._bounds,m.zoom,m.center).min;ii(this._image,T,_)},_reset:function(){var m=this._image,_=new ae(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),T=_.getSize();ms(m,_.min),m.style.width=T.x+"px",m.style.height=T.y+"px"},_updateOpacity:function(){Hs(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var m=this.options.errorOverlayUrl;m&&this._url!==m&&(this._url=m,this._image.src=m)},getCenter:function(){return this._bounds.getCenter()}}),Ta=function(m,_,T){return new Ui(m,_,T)},ci=Ui.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var m=this._url.tagName==="VIDEO",_=this._image=m?this._url:En("video");if(_n(_,"leaflet-image-layer"),this._zoomAnimated&&_n(_,"leaflet-zoom-animated"),this.options.className&&_n(_,this.options.className),_.onselectstart=h,_.onmousemove=h,_.onloadeddata=o(this.fire,this,"load"),m){for(var T=_.getElementsByTagName("source"),B=[],X=0;X<T.length;X++)B.push(T[X].src);this._url=T.length>0?B:[_.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(_.style,"objectFit")&&(_.style.objectFit="fill"),_.autoplay=!!this.options.autoplay,_.loop=!!this.options.loop,_.muted=!!this.options.muted,_.playsInline=!!this.options.playsInline;for(var me=0;me<this._url.length;me++){var Ee=En("source");Ee.src=this._url[me],_.appendChild(Ee)}}});function zc(m,_,T){return new ci(m,_,T)}var zd=Ui.extend({_initImage:function(){var m=this._image=this._url;_n(m,"leaflet-image-layer"),this._zoomAnimated&&_n(m,"leaflet-zoom-animated"),this.options.className&&_n(m,this.options.className),m.onselectstart=h,m.onmousemove=h}});function Vc(m,_,T){return new zd(m,_,T)}var Ea=is.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(m,_){m&&(m instanceof be||N(m))?(this._latlng=xe(m),y(this,_)):(y(this,m),this._source=_),this.options.content&&(this._content=this.options.content)},openOn:function(m){return m=arguments.length?m:this._source._map,m.hasLayer(this)||m.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(m){return this._map?this.close():(arguments.length?this._source=m:m=this._source,this._prepareOpen(),this.openOn(m._map)),this},onAdd:function(m){this._zoomAnimated=m._zoomAnimated,this._container||this._initLayout(),m._fadeAnimated&&Hs(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),m._fadeAnimated&&Hs(this._container,1),this.bringToFront(),this.options.interactive&&(_n(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(m){m._fadeAnimated?(Hs(this._container,0),this._removeTimeout=setTimeout(o(Dn,void 0,this._container),200)):Dn(this._container),this.options.interactive&&(cr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(m){return this._latlng=xe(m),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(m){return this._content=m,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var m={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(m.zoomanim=this._animateZoom),m},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ml(this._container),this},bringToBack:function(){return this._map&&Fi(this._container),this},_prepareOpen:function(m){var _=this._source;if(!_._map)return!1;if(_ instanceof ki){_=null;var T=this._source._layers;for(var B in T)if(T[B]._map){_=T[B];break}if(!_)return!1;this._source=_}if(!m)if(_.getCenter)m=_.getCenter();else if(_.getLatLng)m=_.getLatLng();else if(_.getBounds)m=_.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(m),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var m=this._contentNode,_=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof _=="string")m.innerHTML=_;else{for(;m.hasChildNodes();)m.removeChild(m.firstChild);m.appendChild(_)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var m=this._map.latLngToLayerPoint(this._latlng),_=ue(this.options.offset),T=this._getAnchor();this._zoomAnimated?ms(this._container,m.add(T)):_=_.add(m).add(T);var B=this._containerBottom=-_.y,X=this._containerLeft=-Math.round(this._containerWidth/2)+_.x;this._container.style.bottom=B+"px",this._container.style.left=X+"px"}},_getAnchor:function(){return[0,0]}});Gn.include({_initOverlay:function(m,_,T,B){var X=_;return X instanceof m||(X=new m(B).setContent(_)),T&&X.setLatLng(T),X}}),is.include({_initOverlay:function(m,_,T,B){var X=T;return X instanceof m?(y(X,B),X._source=this):(X=_&&!B?_:new m(B,this),X.setContent(T)),X}});var Zo=Ea.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(m){return m=arguments.length?m:this._source._map,!m.hasLayer(this)&&m._popup&&m._popup.options.autoClose&&m.removeLayer(m._popup),m._popup=this,Ea.prototype.openOn.call(this,m)},onAdd:function(m){Ea.prototype.onAdd.call(this,m),m.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Si||this._source.on("preclick",qi))},onRemove:function(m){Ea.prototype.onRemove.call(this,m),m.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Si||this._source.off("preclick",qi))},getEvents:function(){var m=Ea.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(m.preclick=this.close),this.options.keepInView&&(m.moveend=this._adjustPan),m},_initLayout:function(){var m="leaflet-popup",_=this._container=En("div",m+" "+(this.options.className||"")+" leaflet-zoom-animated"),T=this._wrapper=En("div",m+"-content-wrapper",_);if(this._contentNode=En("div",m+"-content",T),Dc(_),Ed(this._contentNode),gn(_,"contextmenu",qi),this._tipContainer=En("div",m+"-tip-container",_),this._tip=En("div",m+"-tip",this._tipContainer),this.options.closeButton){var B=this._closeButton=En("a",m+"-close-button",_);B.setAttribute("role","button"),B.setAttribute("aria-label","Close popup"),B.href="#close",B.innerHTML='<span aria-hidden="true">&#215;</span>',gn(B,"click",function(X){Gr(X),this.close()},this)}},_updateLayout:function(){var m=this._contentNode,_=m.style;_.width="",_.whiteSpace="nowrap";var T=m.offsetWidth;T=Math.min(T,this.options.maxWidth),T=Math.max(T,this.options.minWidth),_.width=T+1+"px",_.whiteSpace="",_.height="";var B=m.offsetHeight,X=this.options.maxHeight,me="leaflet-popup-scrolled";X&&B>X?(_.height=X+"px",_n(m,me)):cr(m,me),this._containerWidth=this._container.offsetWidth},_animateZoom:function(m){var _=this._map._latLngToNewLayerPoint(this._latlng,m.zoom,m.center),T=this._getAnchor();ms(this._container,_.add(T))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var m=this._map,_=parseInt(Fo(this._container,"marginBottom"),10)||0,T=this._container.offsetHeight+_,B=this._containerWidth,X=new H(this._containerLeft,-T-this._containerBottom);X._add($i(this._container));var me=m.layerPointToContainerPoint(X),Ee=ue(this.options.autoPanPadding),Ze=ue(this.options.autoPanPaddingTopLeft||Ee),Je=ue(this.options.autoPanPaddingBottomRight||Ee),pt=m.getSize(),zt=0,dn=0;me.x+B+Je.x>pt.x&&(zt=me.x+B-pt.x+Je.x),me.x-zt-Ze.x<0&&(zt=me.x-Ze.x),me.y+T+Je.y>pt.y&&(dn=me.y+T-pt.y+Je.y),me.y-dn-Ze.y<0&&(dn=me.y-Ze.y),(zt||dn)&&(this.options.keepInView&&(this._autopanning=!0),m.fire("autopanstart").panBy([zt,dn]))}},_getAnchor:function(){return ue(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ai=function(m,_){return new Zo(m,_)};Gn.mergeOptions({closePopupOnClick:!0}),Gn.include({openPopup:function(m,_,T){return this._initOverlay(Zo,m,_,T).openOn(this),this},closePopup:function(m){return m=arguments.length?m:this._popup,m&&m.close(),this}}),is.include({bindPopup:function(m,_){return this._popup=this._initOverlay(Zo,this._popup,m,_),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(m){return this._popup&&(this instanceof ki||(this._popup._source=this),this._popup._prepareOpen(m||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(m){return this._popup&&this._popup.setContent(m),this},getPopup:function(){return this._popup},_openPopup:function(m){if(!(!this._popup||!this._map)){sa(m);var _=m.layer||m.target;if(this._popup._source===_&&!(_ instanceof Si)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(m.latlng);return}this._popup._source=_,this.openPopup(m.latlng)}},_movePopup:function(m){this._popup.setLatLng(m.latlng)},_onKeyPress:function(m){m.originalEvent.keyCode===13&&this._openPopup(m)}});var Hi=Ea.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(m){Ea.prototype.onAdd.call(this,m),this.setOpacity(this.options.opacity),m.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(m){Ea.prototype.onRemove.call(this,m),m.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var m=Ea.prototype.getEvents.call(this);return this.options.permanent||(m.preclick=this.close),m},_initLayout:function(){var m="leaflet-tooltip",_=m+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=En("div",_),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(m){var _,T,B=this._map,X=this._container,me=B.latLngToContainerPoint(B.getCenter()),Ee=B.layerPointToContainerPoint(m),Ze=this.options.direction,Je=X.offsetWidth,pt=X.offsetHeight,zt=ue(this.options.offset),dn=this._getAnchor();Ze==="top"?(_=Je/2,T=pt):Ze==="bottom"?(_=Je/2,T=0):Ze==="center"?(_=Je/2,T=pt/2):Ze==="right"?(_=0,T=pt/2):Ze==="left"?(_=Je,T=pt/2):Ee.x<me.x?(Ze="right",_=0,T=pt/2):(Ze="left",_=Je+(zt.x+dn.x)*2,T=pt/2),m=m.subtract(ue(_,T,!0)).add(zt).add(dn),cr(X,"leaflet-tooltip-right"),cr(X,"leaflet-tooltip-left"),cr(X,"leaflet-tooltip-top"),cr(X,"leaflet-tooltip-bottom"),_n(X,"leaflet-tooltip-"+Ze),ms(X,m)},_updatePosition:function(){var m=this._map.latLngToLayerPoint(this._latlng);this._setPosition(m)},setOpacity:function(m){this.options.opacity=m,this._container&&Hs(this._container,m)},_animateZoom:function(m){var _=this._map._latLngToNewLayerPoint(this._latlng,m.zoom,m.center);this._setPosition(_)},_getAnchor:function(){return ue(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Yo=function(m,_){return new Hi(m,_)};Gn.include({openTooltip:function(m,_,T){return this._initOverlay(Hi,m,_,T).openOn(this),this},closeTooltip:function(m){return m.close(),this}}),is.include({bindTooltip:function(m,_){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Hi,this._tooltip,m,_),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(m){if(!(!m&&this._tooltipHandlersAdded)){var _=m?"off":"on",T={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?T.add=this._openTooltip:(T.mouseover=this._openTooltip,T.mouseout=this.closeTooltip,T.click=this._openTooltip,this._map?this._addFocusListeners():T.add=this._addFocusListeners),this._tooltip.options.sticky&&(T.mousemove=this._moveTooltip),this[_](T),this._tooltipHandlersAdded=!m}},openTooltip:function(m){return this._tooltip&&(this instanceof ki||(this._tooltip._source=this),this._tooltip._prepareOpen(m)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(m){return this._tooltip&&this._tooltip.setContent(m),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(m){var _=typeof m.getElement=="function"&&m.getElement();_&&(gn(_,"focus",function(){this._tooltip._source=m,this.openTooltip()},this),gn(_,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(m){var _=typeof m.getElement=="function"&&m.getElement();_&&_.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(m){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var _=this;this._map.once("moveend",function(){_._openOnceFlag=!1,_._openTooltip(m)});return}this._tooltip._source=m.layer||m.target,this.openTooltip(this._tooltip.options.sticky?m.latlng:void 0)}},_moveTooltip:function(m){var _=m.latlng,T,B;this._tooltip.options.sticky&&m.originalEvent&&(T=this._map.mouseEventToContainerPoint(m.originalEvent),B=this._map.containerPointToLayerPoint(T),_=this._map.layerPointToLatLng(B)),this._tooltip.setLatLng(_)}});var Xo=zi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(m){var _=m&&m.tagName==="DIV"?m:document.createElement("div"),T=this.options;if(T.html instanceof Element?(Lc(_),_.appendChild(T.html)):_.innerHTML=T.html!==!1?T.html:"",T.bgPos){var B=ue(T.bgPos);_.style.backgroundPosition=-B.x+"px "+-B.y+"px"}return this._setIconStyles(_,"icon"),_},createShadow:function(){return null}});function bl(m){return new Xo(m)}zi.Default=Wo;var Wi=is.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Et.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(m){y(this,m)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(m){m._addZoomLimit(this)},onRemove:function(m){this._removeAllTiles(),Dn(this._container),m._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ml(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Fi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(m){return this.options.opacity=m,this._updateOpacity(),this},setZIndex:function(m){return this.options.zIndex=m,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var m=this._clampZoom(this._map.getZoom());m!==this._tileZoom&&(this._tileZoom=m,this._updateLevels()),this._update()}return this},getEvents:function(){var m={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),m.move=this._onMove),this._zoomAnimated&&(m.zoomanim=this._animateZoom),m},createTile:function(){return document.createElement("div")},getTileSize:function(){var m=this.options.tileSize;return m instanceof H?m:new H(m,m)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(m){for(var _=this.getPane().children,T=-m(-1/0,1/0),B=0,X=_.length,me;B<X;B++)me=_[B].style.zIndex,_[B]!==this._container&&me&&(T=m(T,+me));isFinite(T)&&(this.options.zIndex=T+m(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Et.ielt9){Hs(this._container,this.options.opacity);var m=+new Date,_=!1,T=!1;for(var B in this._tiles){var X=this._tiles[B];if(!(!X.current||!X.loaded)){var me=Math.min(1,(m-X.loaded)/200);Hs(X.el,me),me<1?_=!0:(X.active?T=!0:this._onOpaqueTile(X),X.active=!0)}}T&&!this._noPrune&&this._pruneTiles(),_&&(R(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:h,_initContainer:function(){this._container||(this._container=En("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var m=this._tileZoom,_=this.options.maxZoom;if(m!==void 0){for(var T in this._levels)T=Number(T),this._levels[T].el.children.length||T===m?(this._levels[T].el.style.zIndex=_-Math.abs(m-T),this._onUpdateLevel(T)):(Dn(this._levels[T].el),this._removeTilesAtZoom(T),this._onRemoveLevel(T),delete this._levels[T]);var B=this._levels[m],X=this._map;return B||(B=this._levels[m]={},B.el=En("div","leaflet-tile-container leaflet-zoom-animated",this._container),B.el.style.zIndex=_,B.origin=X.project(X.unproject(X.getPixelOrigin()),m).round(),B.zoom=m,this._setZoomTransform(B,X.getCenter(),X.getZoom()),h(B.el.offsetWidth),this._onCreateLevel(B)),this._level=B,B}},_onUpdateLevel:h,_onRemoveLevel:h,_onCreateLevel:h,_pruneTiles:function(){if(this._map){var m,_,T=this._map.getZoom();if(T>this.options.maxZoom||T<this.options.minZoom){this._removeAllTiles();return}for(m in this._tiles)_=this._tiles[m],_.retain=_.current;for(m in this._tiles)if(_=this._tiles[m],_.current&&!_.active){var B=_.coords;this._retainParent(B.x,B.y,B.z,B.z-5)||this._retainChildren(B.x,B.y,B.z,B.z+2)}for(m in this._tiles)this._tiles[m].retain||this._removeTile(m)}},_removeTilesAtZoom:function(m){for(var _ in this._tiles)this._tiles[_].coords.z===m&&this._removeTile(_)},_removeAllTiles:function(){for(var m in this._tiles)this._removeTile(m)},_invalidateAll:function(){for(var m in this._levels)Dn(this._levels[m].el),this._onRemoveLevel(Number(m)),delete this._levels[m];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(m,_,T,B){var X=Math.floor(m/2),me=Math.floor(_/2),Ee=T-1,Ze=new H(+X,+me);Ze.z=+Ee;var Je=this._tileCoordsToKey(Ze),pt=this._tiles[Je];return pt&&pt.active?(pt.retain=!0,!0):(pt&&pt.loaded&&(pt.retain=!0),Ee>B?this._retainParent(X,me,Ee,B):!1)},_retainChildren:function(m,_,T,B){for(var X=2*m;X<2*m+2;X++)for(var me=2*_;me<2*_+2;me++){var Ee=new H(X,me);Ee.z=T+1;var Ze=this._tileCoordsToKey(Ee),Je=this._tiles[Ze];if(Je&&Je.active){Je.retain=!0;continue}else Je&&Je.loaded&&(Je.retain=!0);T+1<B&&this._retainChildren(X,me,T+1,B)}},_resetView:function(m){var _=m&&(m.pinch||m.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),_,_)},_animateZoom:function(m){this._setView(m.center,m.zoom,!0,m.noUpdate)},_clampZoom:function(m){var _=this.options;return _.minNativeZoom!==void 0&&m<_.minNativeZoom?_.minNativeZoom:_.maxNativeZoom!==void 0&&_.maxNativeZoom<m?_.maxNativeZoom:m},_setView:function(m,_,T,B){var X=Math.round(_);this.options.maxZoom!==void 0&&X>this.options.maxZoom||this.options.minZoom!==void 0&&X<this.options.minZoom?X=void 0:X=this._clampZoom(X);var me=this.options.updateWhenZooming&&X!==this._tileZoom;(!B||me)&&(this._tileZoom=X,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),X!==void 0&&this._update(m),T||this._pruneTiles(),this._noPrune=!!T),this._setZoomTransforms(m,_)},_setZoomTransforms:function(m,_){for(var T in this._levels)this._setZoomTransform(this._levels[T],m,_)},_setZoomTransform:function(m,_,T){var B=this._map.getZoomScale(T,m.zoom),X=m.origin.multiplyBy(B).subtract(this._map._getNewPixelOrigin(_,T)).round();Et.any3d?ii(m.el,X,B):ms(m.el,X)},_resetGrid:function(){var m=this._map,_=m.options.crs,T=this._tileSize=this.getTileSize(),B=this._tileZoom,X=this._map.getPixelWorldBounds(this._tileZoom);X&&(this._globalTileRange=this._pxBoundsToTileRange(X)),this._wrapX=_.wrapLng&&!this.options.noWrap&&[Math.floor(m.project([0,_.wrapLng[0]],B).x/T.x),Math.ceil(m.project([0,_.wrapLng[1]],B).x/T.y)],this._wrapY=_.wrapLat&&!this.options.noWrap&&[Math.floor(m.project([_.wrapLat[0],0],B).y/T.x),Math.ceil(m.project([_.wrapLat[1],0],B).y/T.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(m){var _=this._map,T=_._animatingZoom?Math.max(_._animateToZoom,_.getZoom()):_.getZoom(),B=_.getZoomScale(T,this._tileZoom),X=_.project(m,this._tileZoom).floor(),me=_.getSize().divideBy(B*2);return new ae(X.subtract(me),X.add(me))},_update:function(m){var _=this._map;if(_){var T=this._clampZoom(_.getZoom());if(m===void 0&&(m=_.getCenter()),this._tileZoom!==void 0){var B=this._getTiledPixelBounds(m),X=this._pxBoundsToTileRange(B),me=X.getCenter(),Ee=[],Ze=this.options.keepBuffer,Je=new ae(X.getBottomLeft().subtract([Ze,-Ze]),X.getTopRight().add([Ze,-Ze]));if(!(isFinite(X.min.x)&&isFinite(X.min.y)&&isFinite(X.max.x)&&isFinite(X.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var pt in this._tiles){var zt=this._tiles[pt].coords;(zt.z!==this._tileZoom||!Je.contains(new H(zt.x,zt.y)))&&(this._tiles[pt].current=!1)}if(Math.abs(T-this._tileZoom)>1){this._setView(m,T);return}for(var dn=X.min.y;dn<=X.max.y;dn++)for(var Bn=X.min.x;Bn<=X.max.x;Bn++){var ca=new H(Bn,dn);if(ca.z=this._tileZoom,!!this._isValidTile(ca)){var $s=this._tiles[this._tileCoordsToKey(ca)];$s?$s.current=!0:Ee.push(ca)}}if(Ee.sort(function(di,Hd){return di.distanceTo(me)-Hd.distanceTo(me)}),Ee.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ei=document.createDocumentFragment();for(Bn=0;Bn<Ee.length;Bn++)this._addTile(Ee[Bn],Ei);this._level.el.appendChild(Ei)}}}},_isValidTile:function(m){var _=this._map.options.crs;if(!_.infinite){var T=this._globalTileRange;if(!_.wrapLng&&(m.x<T.min.x||m.x>T.max.x)||!_.wrapLat&&(m.y<T.min.y||m.y>T.max.y))return!1}if(!this.options.bounds)return!0;var B=this._tileCoordsToBounds(m);return fe(this.options.bounds).overlaps(B)},_keyToBounds:function(m){return this._tileCoordsToBounds(this._keyToTileCoords(m))},_tileCoordsToNwSe:function(m){var _=this._map,T=this.getTileSize(),B=m.scaleBy(T),X=B.add(T),me=_.unproject(B,m.z),Ee=_.unproject(X,m.z);return[me,Ee]},_tileCoordsToBounds:function(m){var _=this._tileCoordsToNwSe(m),T=new te(_[0],_[1]);return this.options.noWrap||(T=this._map.wrapLatLngBounds(T)),T},_tileCoordsToKey:function(m){return m.x+":"+m.y+":"+m.z},_keyToTileCoords:function(m){var _=m.split(":"),T=new H(+_[0],+_[1]);return T.z=+_[2],T},_removeTile:function(m){var _=this._tiles[m];_&&(Dn(_.el),delete this._tiles[m],this.fire("tileunload",{tile:_.el,coords:this._keyToTileCoords(m)}))},_initTile:function(m){_n(m,"leaflet-tile");var _=this.getTileSize();m.style.width=_.x+"px",m.style.height=_.y+"px",m.onselectstart=h,m.onmousemove=h,Et.ielt9&&this.options.opacity<1&&Hs(m,this.options.opacity)},_addTile:function(m,_){var T=this._getTilePos(m),B=this._tileCoordsToKey(m),X=this.createTile(this._wrapCoords(m),o(this._tileReady,this,m));this._initTile(X),this.createTile.length<2&&D(o(this._tileReady,this,m,null,X)),ms(X,T),this._tiles[B]={el:X,coords:m,current:!0},_.appendChild(X),this.fire("tileloadstart",{tile:X,coords:m})},_tileReady:function(m,_,T){_&&this.fire("tileerror",{error:_,tile:T,coords:m});var B=this._tileCoordsToKey(m);T=this._tiles[B],T&&(T.loaded=+new Date,this._map._fadeAnimated?(Hs(T.el,0),R(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(T.active=!0,this._pruneTiles()),_||(_n(T.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:T.el,coords:m})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Et.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(m){return m.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(m){var _=new H(this._wrapX?u(m.x,this._wrapX):m.x,this._wrapY?u(m.y,this._wrapY):m.y);return _.z=m.z,_},_pxBoundsToTileRange:function(m){var _=this.getTileSize();return new ae(m.min.unscaleBy(_).floor(),m.max.unscaleBy(_).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var m in this._tiles)if(!this._tiles[m].loaded)return!1;return!0}});function la(m){return new Wi(m)}var Fs=Wi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(m,_){this._url=m,_=y(this,_),_.detectRetina&&Et.retina&&_.maxZoom>0?(_.tileSize=Math.floor(_.tileSize/2),_.zoomReverse?(_.zoomOffset--,_.minZoom=Math.min(_.maxZoom,_.minZoom+1)):(_.zoomOffset++,_.maxZoom=Math.max(_.minZoom,_.maxZoom-1)),_.minZoom=Math.max(0,_.minZoom)):_.zoomReverse?_.minZoom=Math.min(_.maxZoom,_.minZoom):_.maxZoom=Math.max(_.minZoom,_.maxZoom),typeof _.subdomains=="string"&&(_.subdomains=_.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(m,_){return this._url===m&&_===void 0&&(_=!0),this._url=m,_||this.redraw(),this},createTile:function(m,_){var T=document.createElement("img");return gn(T,"load",o(this._tileOnLoad,this,_,T)),gn(T,"error",o(this._tileOnError,this,_,T)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(T.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(T.referrerPolicy=this.options.referrerPolicy),T.alt="",T.src=this.getTileUrl(m),T},getTileUrl:function(m){var _={r:Et.retina?"@2x":"",s:this._getSubdomain(m),x:m.x,y:m.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var T=this._globalTileRange.max.y-m.y;this.options.tms&&(_.y=T),_["-y"]=T}return w(this._url,a(_,this.options))},_tileOnLoad:function(m,_){Et.ielt9?setTimeout(o(m,this,null,_),0):m(null,_)},_tileOnError:function(m,_,T){var B=this.options.errorTileUrl;B&&_.getAttribute("src")!==B&&(_.src=B),m(T,_)},_onTileRemove:function(m){m.tile.onload=null},_getZoomForUrl:function(){var m=this._tileZoom,_=this.options.maxZoom,T=this.options.zoomReverse,B=this.options.zoomOffset;return T&&(m=_-m),m+B},_getSubdomain:function(m){var _=Math.abs(m.x+m.y)%this.options.subdomains.length;return this.options.subdomains[_]},_abortLoading:function(){var m,_;for(m in this._tiles)if(this._tiles[m].coords.z!==this._tileZoom&&(_=this._tiles[m].el,_.onload=h,_.onerror=h,!_.complete)){_.src=C;var T=this._tiles[m].coords;Dn(_),delete this._tiles[m],this.fire("tileabort",{tile:_,coords:T})}},_removeTile:function(m){var _=this._tiles[m];if(_)return _.el.setAttribute("src",C),Wi.prototype._removeTile.call(this,m)},_tileReady:function(m,_,T){if(!(!this._map||T&&T.getAttribute("src")===C))return Wi.prototype._tileReady.call(this,m,_,T)}});function Sr(m,_){return new Fs(m,_)}var vr=Fs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(m,_){this._url=m;var T=a({},this.defaultWmsParams);for(var B in _)B in this.options||(T[B]=_[B]);_=y(this,_);var X=_.detectRetina&&Et.retina?2:1,me=this.getTileSize();T.width=me.x*X,T.height=me.y*X,this.wmsParams=T},onAdd:function(m){this._crs=this.options.crs||m.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var _=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[_]=this._crs.code,Fs.prototype.onAdd.call(this,m)},getTileUrl:function(m){var _=this._tileCoordsToNwSe(m),T=this._crs,B=G(T.project(_[0]),T.project(_[1])),X=B.min,me=B.max,Ee=(this._wmsVersion>=1.3&&this._crs===Rs?[X.y,X.x,me.y,me.x]:[X.x,X.y,me.x,me.y]).join(","),Ze=Fs.prototype.getTileUrl.call(this,m);return Ze+v(this.wmsParams,Ze,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Ee},setParams:function(m,_){return a(this.wmsParams,m),_||this.redraw(),this}});function xs(m,_){return new vr(m,_)}Fs.WMS=vr,Sr.wms=xs;var Pr=is.extend({options:{padding:.1},initialize:function(m){y(this,m),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),_n(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var m={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(m.zoomanim=this._onAnimZoom),m},_onAnimZoom:function(m){this._updateTransform(m.center,m.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(m,_){var T=this._map.getZoomScale(_,this._zoom),B=this._map.getSize().multiplyBy(.5+this.options.padding),X=this._map.project(this._center,_),me=B.multiplyBy(-T).add(X).subtract(this._map._getNewPixelOrigin(m,_));Et.any3d?ii(this._container,me,T):ms(this._container,me)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var m in this._layers)this._layers[m]._reset()},_onZoomEnd:function(){for(var m in this._layers)this._layers[m]._project()},_updatePaths:function(){for(var m in this._layers)this._layers[m]._update()},_update:function(){var m=this.options.padding,_=this._map.getSize(),T=this._map.containerPointToLayerPoint(_.multiplyBy(-m)).round();this._bounds=new ae(T,T.add(_.multiplyBy(1+m*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),bo=Pr.extend({options:{tolerance:0},getEvents:function(){var m=Pr.prototype.getEvents.call(this);return m.viewprereset=this._onViewPreReset,m},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Pr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var m=this._container=document.createElement("canvas");gn(m,"mousemove",this._onMouseMove,this),gn(m,"click dblclick mousedown mouseup contextmenu",this._onClick,this),gn(m,"mouseout",this._handleMouseOut,this),m._leaflet_disable_events=!0,this._ctx=m.getContext("2d")},_destroyContainer:function(){R(this._redrawRequest),delete this._ctx,Dn(this._container),sr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var m;this._redrawBounds=null;for(var _ in this._layers)m=this._layers[_],m._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Pr.prototype._update.call(this);var m=this._bounds,_=this._container,T=m.getSize(),B=Et.retina?2:1;ms(_,m.min),_.width=B*T.x,_.height=B*T.y,_.style.width=T.x+"px",_.style.height=T.y+"px",Et.retina&&this._ctx.scale(2,2),this._ctx.translate(-m.min.x,-m.min.y),this.fire("update")}},_reset:function(){Pr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(m){this._updateDashArray(m),this._layers[c(m)]=m;var _=m._order={layer:m,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=_),this._drawLast=_,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(m){this._requestRedraw(m)},_removePath:function(m){var _=m._order,T=_.next,B=_.prev;T?T.prev=B:this._drawLast=B,B?B.next=T:this._drawFirst=T,delete m._order,delete this._layers[c(m)],this._requestRedraw(m)},_updatePath:function(m){this._extendRedrawBounds(m),m._project(),m._update(),this._requestRedraw(m)},_updateStyle:function(m){this._updateDashArray(m),this._requestRedraw(m)},_updateDashArray:function(m){if(typeof m.options.dashArray=="string"){var _=m.options.dashArray.split(/[, ]+/),T=[],B,X;for(X=0;X<_.length;X++){if(B=Number(_[X]),isNaN(B))return;T.push(B)}m.options._dashArray=T}else m.options._dashArray=m.options.dashArray},_requestRedraw:function(m){this._map&&(this._extendRedrawBounds(m),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(m){if(m._pxBounds){var _=(m.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ae,this._redrawBounds.extend(m._pxBounds.min.subtract([_,_])),this._redrawBounds.extend(m._pxBounds.max.add([_,_]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var m=this._redrawBounds;if(m){var _=m.getSize();this._ctx.clearRect(m.min.x,m.min.y,_.x,_.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var m,_=this._redrawBounds;if(this._ctx.save(),_){var T=_.getSize();this._ctx.beginPath(),this._ctx.rect(_.min.x,_.min.y,T.x,T.y),this._ctx.clip()}this._drawing=!0;for(var B=this._drawFirst;B;B=B.next)m=B.layer,(!_||m._pxBounds&&m._pxBounds.intersects(_))&&m._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(m,_){if(this._drawing){var T,B,X,me,Ee=m._parts,Ze=Ee.length,Je=this._ctx;if(Ze){for(Je.beginPath(),T=0;T<Ze;T++){for(B=0,X=Ee[T].length;B<X;B++)me=Ee[T][B],Je[B?"lineTo":"moveTo"](me.x,me.y);_&&Je.closePath()}this._fillStroke(Je,m)}}},_updateCircle:function(m){if(!(!this._drawing||m._empty())){var _=m._point,T=this._ctx,B=Math.max(Math.round(m._radius),1),X=(Math.max(Math.round(m._radiusY),1)||B)/B;X!==1&&(T.save(),T.scale(1,X)),T.beginPath(),T.arc(_.x,_.y/X,B,0,Math.PI*2,!1),X!==1&&T.restore(),this._fillStroke(T,m)}},_fillStroke:function(m,_){var T=_.options;T.fill&&(m.globalAlpha=T.fillOpacity,m.fillStyle=T.fillColor||T.color,m.fill(T.fillRule||"evenodd")),T.stroke&&T.weight!==0&&(m.setLineDash&&m.setLineDash(_.options&&_.options._dashArray||[]),m.globalAlpha=T.opacity,m.lineWidth=T.weight,m.strokeStyle=T.color,m.lineCap=T.lineCap,m.lineJoin=T.lineJoin,m.stroke())},_onClick:function(m){for(var _=this._map.mouseEventToLayerPoint(m),T,B,X=this._drawFirst;X;X=X.next)T=X.layer,T.options.interactive&&T._containsPoint(_)&&(!(m.type==="click"||m.type==="preclick")||!this._map._draggableMoved(T))&&(B=T);this._fireEvent(B?[B]:!1,m)},_onMouseMove:function(m){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var _=this._map.mouseEventToLayerPoint(m);this._handleMouseHover(m,_)}},_handleMouseOut:function(m){var _=this._hoveredLayer;_&&(cr(this._container,"leaflet-interactive"),this._fireEvent([_],m,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(m,_){if(!this._mouseHoverThrottled){for(var T,B,X=this._drawFirst;X;X=X.next)T=X.layer,T.options.interactive&&T._containsPoint(_)&&(B=T);B!==this._hoveredLayer&&(this._handleMouseOut(m),B&&(_n(this._container,"leaflet-interactive"),this._fireEvent([B],m,"mouseover"),this._hoveredLayer=B)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,m),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(m,_,T){this._map._fireDOMEvent(_,T||_.type,m)},_bringToFront:function(m){var _=m._order;if(_){var T=_.next,B=_.prev;if(T)T.prev=B;else return;B?B.next=T:T&&(this._drawFirst=T),_.prev=this._drawLast,this._drawLast.next=_,_.next=null,this._drawLast=_,this._requestRedraw(m)}},_bringToBack:function(m){var _=m._order;if(_){var T=_.next,B=_.prev;if(B)B.next=T;else return;T?T.prev=B:B&&(this._drawLast=B),_.prev=null,_.next=this._drawFirst,this._drawFirst.prev=_,this._drawFirst=_,this._requestRedraw(m)}}});function Uc(m){return Et.canvas?new bo(m):null}var jo=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(m){return document.createElement("<lvml:"+m+' class="lvml">')}}catch{}return function(m){return document.createElement("<"+m+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Ru={_initContainer:function(){this._container=En("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Pr.prototype._update.call(this),this.fire("update"))},_initPath:function(m){var _=m._container=jo("shape");_n(_,"leaflet-vml-shape "+(this.options.className||"")),_.coordsize="1 1",m._path=jo("path"),_.appendChild(m._path),this._updateStyle(m),this._layers[c(m)]=m},_addPath:function(m){var _=m._container;this._container.appendChild(_),m.options.interactive&&m.addInteractiveTarget(_)},_removePath:function(m){var _=m._container;Dn(_),m.removeInteractiveTarget(_),delete this._layers[c(m)]},_updateStyle:function(m){var _=m._stroke,T=m._fill,B=m.options,X=m._container;X.stroked=!!B.stroke,X.filled=!!B.fill,B.stroke?(_||(_=m._stroke=jo("stroke")),X.appendChild(_),_.weight=B.weight+"px",_.color=B.color,_.opacity=B.opacity,B.dashArray?_.dashStyle=N(B.dashArray)?B.dashArray.join(" "):B.dashArray.replace(/( *, *)/g," "):_.dashStyle="",_.endcap=B.lineCap.replace("butt","flat"),_.joinstyle=B.lineJoin):_&&(X.removeChild(_),m._stroke=null),B.fill?(T||(T=m._fill=jo("fill")),X.appendChild(T),T.color=B.fillColor||B.color,T.opacity=B.fillOpacity):T&&(X.removeChild(T),m._fill=null)},_updateCircle:function(m){var _=m._point.round(),T=Math.round(m._radius),B=Math.round(m._radiusY||T);this._setPath(m,m._empty()?"M0 0":"AL "+_.x+","+_.y+" "+T+","+B+" 0,"+65535*360)},_setPath:function(m,_){m._path.v=_},_bringToFront:function(m){ml(m._container)},_bringToBack:function(m){Fi(m._container)}},Ci=Et.vml?jo:Xe,Qo=Pr.extend({_initContainer:function(){this._container=Ci("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ci("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Dn(this._container),sr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Pr.prototype._update.call(this);var m=this._bounds,_=m.getSize(),T=this._container;(!this._svgSize||!this._svgSize.equals(_))&&(this._svgSize=_,T.setAttribute("width",_.x),T.setAttribute("height",_.y)),ms(T,m.min),T.setAttribute("viewBox",[m.min.x,m.min.y,_.x,_.y].join(" ")),this.fire("update")}},_initPath:function(m){var _=m._path=Ci("path");m.options.className&&_n(_,m.options.className),m.options.interactive&&_n(_,"leaflet-interactive"),this._updateStyle(m),this._layers[c(m)]=m},_addPath:function(m){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(m._path),m.addInteractiveTarget(m._path)},_removePath:function(m){Dn(m._path),m.removeInteractiveTarget(m._path),delete this._layers[c(m)]},_updatePath:function(m){m._project(),m._update()},_updateStyle:function(m){var _=m._path,T=m.options;_&&(T.stroke?(_.setAttribute("stroke",T.color),_.setAttribute("stroke-opacity",T.opacity),_.setAttribute("stroke-width",T.weight),_.setAttribute("stroke-linecap",T.lineCap),_.setAttribute("stroke-linejoin",T.lineJoin),T.dashArray?_.setAttribute("stroke-dasharray",T.dashArray):_.removeAttribute("stroke-dasharray"),T.dashOffset?_.setAttribute("stroke-dashoffset",T.dashOffset):_.removeAttribute("stroke-dashoffset")):_.setAttribute("stroke","none"),T.fill?(_.setAttribute("fill",T.fillColor||T.color),_.setAttribute("fill-opacity",T.fillOpacity),_.setAttribute("fill-rule",T.fillRule||"evenodd")):_.setAttribute("fill","none"))},_updatePoly:function(m,_){this._setPath(m,ke(m._parts,_))},_updateCircle:function(m){var _=m._point,T=Math.max(Math.round(m._radius),1),B=Math.max(Math.round(m._radiusY),1)||T,X="a"+T+","+B+" 0 1,0 ",me=m._empty()?"M0 0":"M"+(_.x-T)+","+_.y+X+T*2+",0 "+X+-T*2+",0 ";this._setPath(m,me)},_setPath:function(m,_){m._path.setAttribute("d",_)},_bringToFront:function(m){ml(m._path)},_bringToBack:function(m){Fi(m._path)}});Et.vml&&Qo.include(Ru);function Oa(m){return Et.svg||Et.vml?new Qo(m):null}Gn.include({getRenderer:function(m){var _=m.options.renderer||this._getPaneRenderer(m.options.pane)||this.options.renderer||this._renderer;return _||(_=this._renderer=this._createRenderer()),this.hasLayer(_)||this.addLayer(_),_},_getPaneRenderer:function(m){if(m==="overlayPane"||m===void 0)return!1;var _=this._paneRenderers[m];return _===void 0&&(_=this._createRenderer({pane:m}),this._paneRenderers[m]=_),_},_createRenderer:function(m){return this.options.preferCanvas&&Uc(m)||Oa(m)}});var Ti=Ms.extend({initialize:function(m,_){Ms.prototype.initialize.call(this,this._boundsToLatLngs(m),_)},setBounds:function(m){return this.setLatLngs(this._boundsToLatLngs(m))},_boundsToLatLngs:function(m){return m=fe(m),[m.getSouthWest(),m.getNorthWest(),m.getNorthEast(),m.getSouthEast()]}});function Mh(m,_){return new Ti(m,_)}Qo.create=Ci,Qo.pointsToPath=ke,Pi.geometryToLayer=yl,Pi.coordsToLatLng=Ko,Pi.coordsToLatLngs=Ws,Pi.latLngToCoords=Ks,Pi.latLngsToCoords=yo,Pi.getFeature=li,Pi.asFeature=Vi,Gn.mergeOptions({boxZoom:!0});var jl=Aa.extend({initialize:function(m){this._map=m,this._container=m._container,this._pane=m._panes.overlayPane,this._resetStateTimeout=0,m.on("unload",this._destroy,this)},addHooks:function(){gn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){sr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Dn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(m){if(!m.shiftKey||m.which!==1&&m.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),rr(),Cd(),this._startPoint=this._map.mouseEventToContainerPoint(m),gn(document,{contextmenu:sa,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(m){this._moved||(this._moved=!0,this._box=En("div","leaflet-zoom-box",this._container),_n(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(m);var _=new ae(this._point,this._startPoint),T=_.getSize();ms(this._box,_.min),this._box.style.width=T.x+"px",this._box.style.height=T.y+"px"},_finish:function(){this._moved&&(Dn(this._box),cr(this._container,"leaflet-crosshair")),Bo(),Bi(),sr(document,{contextmenu:sa,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(m){if(!(m.which!==1&&m.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var _=new te(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(_).fire("boxzoomend",{boxZoomBounds:_})}},_onKeyDown:function(m){m.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Gn.addInitHook("addHandler","boxZoom",jl),Gn.mergeOptions({doubleClickZoom:!0});var Kf=Aa.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(m){var _=this._map,T=_.getZoom(),B=_.options.zoomDelta,X=m.originalEvent.shiftKey?T-B:T+B;_.options.doubleClickZoom==="center"?_.setZoom(X):_.setZoomAround(m.containerPoint,X)}});Gn.addInitHook("addHandler","doubleClickZoom",Kf),Gn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Vd=Aa.extend({addHooks:function(){if(!this._draggable){var m=this._map;this._draggable=new qa(m._mapPane,m._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),m.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),m.on("zoomend",this._onZoomEnd,this),m.whenReady(this._onZoomEnd,this))}_n(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){cr(this._map._container,"leaflet-grab"),cr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var m=this._map;if(m._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var _=fe(this._map.options.maxBounds);this._offsetLimit=G(this._map.latLngToContainerPoint(_.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(_.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;m.fire("movestart").fire("dragstart"),m.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(m){if(this._map.options.inertia){var _=this._lastTime=+new Date,T=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(T),this._times.push(_),this._prunePositions(_)}this._map.fire("move",m).fire("drag",m)},_prunePositions:function(m){for(;this._positions.length>1&&m-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var m=this._map.getSize().divideBy(2),_=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=_.subtract(m).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(m,_){return m-(m-_)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var m=this._draggable._newPos.subtract(this._draggable._startPos),_=this._offsetLimit;m.x<_.min.x&&(m.x=this._viscousLimit(m.x,_.min.x)),m.y<_.min.y&&(m.y=this._viscousLimit(m.y,_.min.y)),m.x>_.max.x&&(m.x=this._viscousLimit(m.x,_.max.x)),m.y>_.max.y&&(m.y=this._viscousLimit(m.y,_.max.y)),this._draggable._newPos=this._draggable._startPos.add(m)}},_onPreDragWrap:function(){var m=this._worldWidth,_=Math.round(m/2),T=this._initialWorldOffset,B=this._draggable._newPos.x,X=(B-_+T)%m+_-T,me=(B+_+T)%m-_-T,Ee=Math.abs(X+T)<Math.abs(me+T)?X:me;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Ee},_onDragEnd:function(m){var _=this._map,T=_.options,B=!T.inertia||m.noInertia||this._times.length<2;if(_.fire("dragend",m),B)_.fire("moveend");else{this._prunePositions(+new Date);var X=this._lastPos.subtract(this._positions[0]),me=(this._lastTime-this._times[0])/1e3,Ee=T.easeLinearity,Ze=X.multiplyBy(Ee/me),Je=Ze.distanceTo([0,0]),pt=Math.min(T.inertiaMaxSpeed,Je),zt=Ze.multiplyBy(pt/Je),dn=pt/(T.inertiaDeceleration*Ee),Bn=zt.multiplyBy(-dn/2).round();!Bn.x&&!Bn.y?_.fire("moveend"):(Bn=_._limitOffset(Bn,_.options.maxBounds),D(function(){_.panBy(Bn,{duration:dn,easeLinearity:Ee,noMoveStart:!0,animate:!0})}))}}});Gn.addInitHook("addHandler","dragging",Vd),Gn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ud=Aa.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(m){this._map=m,this._setPanDelta(m.options.keyboardPanDelta),this._setZoomDelta(m.options.zoomDelta)},addHooks:function(){var m=this._map._container;m.tabIndex<=0&&(m.tabIndex="0"),gn(m,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),sr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var m=document.body,_=document.documentElement,T=m.scrollTop||_.scrollTop,B=m.scrollLeft||_.scrollLeft;this._map._container.focus(),window.scrollTo(B,T)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(m){var _=this._panKeys={},T=this.keyCodes,B,X;for(B=0,X=T.left.length;B<X;B++)_[T.left[B]]=[-1*m,0];for(B=0,X=T.right.length;B<X;B++)_[T.right[B]]=[m,0];for(B=0,X=T.down.length;B<X;B++)_[T.down[B]]=[0,m];for(B=0,X=T.up.length;B<X;B++)_[T.up[B]]=[0,-1*m]},_setZoomDelta:function(m){var _=this._zoomKeys={},T=this.keyCodes,B,X;for(B=0,X=T.zoomIn.length;B<X;B++)_[T.zoomIn[B]]=m;for(B=0,X=T.zoomOut.length;B<X;B++)_[T.zoomOut[B]]=-m},_addHooks:function(){gn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){sr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(m){if(!(m.altKey||m.ctrlKey||m.metaKey)){var _=m.keyCode,T=this._map,B;if(_ in this._panKeys){if(!T._panAnim||!T._panAnim._inProgress)if(B=this._panKeys[_],m.shiftKey&&(B=ue(B).multiplyBy(3)),T.options.maxBounds&&(B=T._limitOffset(ue(B),T.options.maxBounds)),T.options.worldCopyJump){var X=T.wrapLatLng(T.unproject(T.project(T.getCenter()).add(B)));T.panTo(X)}else T.panBy(B)}else if(_ in this._zoomKeys)T.setZoom(T.getZoom()+(m.shiftKey?3:1)*this._zoomKeys[_]);else if(_===27&&T._popup&&T._popup.options.closeOnEscapeKey)T.closePopup();else return;sa(m)}}});Gn.addInitHook("addHandler","keyboard",Ud),Gn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ar=Aa.extend({addHooks:function(){gn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){sr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(m){var _=Od(m),T=this._map.options.wheelDebounceTime;this._delta+=_,this._lastMousePos=this._map.mouseEventToContainerPoint(m),this._startTime||(this._startTime=+new Date);var B=Math.max(T-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),B),sa(m)},_performZoom:function(){var m=this._map,_=m.getZoom(),T=this._map.options.zoomSnap||0;m._stop();var B=this._delta/(this._map.options.wheelPxPerZoomLevel*4),X=4*Math.log(2/(1+Math.exp(-Math.abs(B))))/Math.LN2,me=T?Math.ceil(X/T)*T:X,Ee=m._limitZoom(_+(this._delta>0?me:-me))-_;this._delta=0,this._startTime=null,Ee&&(m.options.scrollWheelZoom==="center"?m.setZoom(_+Ee):m.setZoomAround(this._lastMousePos,_+Ee))}});Gn.addInitHook("addHandler","scrollWheelZoom",Ar);var Lh=600;Gn.mergeOptions({tapHold:Et.touchNative&&Et.safari&&Et.mobile,tapTolerance:15});var Hc=Aa.extend({addHooks:function(){gn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){sr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(m){if(clearTimeout(this._holdTimeout),m.touches.length===1){var _=m.touches[0];this._startPos=this._newPos=new H(_.clientX,_.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(gn(document,"touchend",Gr),gn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",_))},this),Lh),gn(document,"touchend touchcancel contextmenu",this._cancel,this),gn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function m(){sr(document,"touchend",Gr),sr(document,"touchend touchcancel",m)},_cancel:function(){clearTimeout(this._holdTimeout),sr(document,"touchend touchcancel contextmenu",this._cancel,this),sr(document,"touchmove",this._onMove,this)},_onMove:function(m){var _=m.touches[0];this._newPos=new H(_.clientX,_.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(m,_){var T=new MouseEvent(m,{bubbles:!0,cancelable:!0,view:window,screenX:_.screenX,screenY:_.screenY,clientX:_.clientX,clientY:_.clientY});T._simulated=!0,_.target.dispatchEvent(T)}});Gn.addInitHook("addHandler","tapHold",Hc),Gn.mergeOptions({touchZoom:Et.touch,bounceAtZoomLimits:!0});var rc=Aa.extend({addHooks:function(){_n(this._map._container,"leaflet-touch-zoom"),gn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){cr(this._map._container,"leaflet-touch-zoom"),sr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(m){var _=this._map;if(!(!m.touches||m.touches.length!==2||_._animatingZoom||this._zooming)){var T=_.mouseEventToContainerPoint(m.touches[0]),B=_.mouseEventToContainerPoint(m.touches[1]);this._centerPoint=_.getSize()._divideBy(2),this._startLatLng=_.containerPointToLatLng(this._centerPoint),_.options.touchZoom!=="center"&&(this._pinchStartLatLng=_.containerPointToLatLng(T.add(B)._divideBy(2))),this._startDist=T.distanceTo(B),this._startZoom=_.getZoom(),this._moved=!1,this._zooming=!0,_._stop(),gn(document,"touchmove",this._onTouchMove,this),gn(document,"touchend touchcancel",this._onTouchEnd,this),Gr(m)}},_onTouchMove:function(m){if(!(!m.touches||m.touches.length!==2||!this._zooming)){var _=this._map,T=_.mouseEventToContainerPoint(m.touches[0]),B=_.mouseEventToContainerPoint(m.touches[1]),X=T.distanceTo(B)/this._startDist;if(this._zoom=_.getScaleZoom(X,this._startZoom),!_.options.bounceAtZoomLimits&&(this._zoom<_.getMinZoom()&&X<1||this._zoom>_.getMaxZoom()&&X>1)&&(this._zoom=_._limitZoom(this._zoom)),_.options.touchZoom==="center"){if(this._center=this._startLatLng,X===1)return}else{var me=T._add(B)._divideBy(2)._subtract(this._centerPoint);if(X===1&&me.x===0&&me.y===0)return;this._center=_.unproject(_.project(this._pinchStartLatLng,this._zoom).subtract(me),this._zoom)}this._moved||(_._moveStart(!0,!1),this._moved=!0),R(this._animRequest);var Ee=o(_._move,_,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(Ee,this,!0),Gr(m)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,R(this._animRequest),sr(document,"touchmove",this._onTouchMove,this),sr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Gn.addInitHook("addHandler","touchZoom",rc),Gn.BoxZoom=jl,Gn.DoubleClickZoom=Kf,Gn.Drag=Vd,Gn.Keyboard=Ud,Gn.ScrollWheelZoom=Ar,Gn.TapHold=Hc,Gn.TouchZoom=rc,r.Bounds=ae,r.Browser=Et,r.CRS=we,r.Canvas=bo,r.Circle=ia,r.CircleMarker=vl,r.Class=Z,r.Control=ps,r.DivIcon=Xo,r.DivOverlay=Ea,r.DomEvent=Fc,r.DomUtil=xn,r.Draggable=qa,r.Evented=Q,r.FeatureGroup=ki,r.GeoJSON=Pi,r.GridLayer=Wi,r.Handler=Aa,r.Icon=zi,r.ImageOverlay=Ui,r.LatLng=be,r.LatLngBounds=te,r.Layer=is,r.LayerGroup=aa,r.LineUtil=ar,r.Map=Gn,r.Marker=Yr,r.Mixin=Ld,r.Path=Si,r.Point=H,r.PolyUtil=Dd,r.Polygon=Ms,r.Polyline=oa,r.Popup=Zo,r.PosAnimation=$c,r.Projection=Os,r.Rectangle=Ti,r.Renderer=Pr,r.SVG=Qo,r.SVGOverlay=zd,r.TileLayer=Fs,r.Tooltip=Hi,r.Transformation=Ue,r.Util=z,r.VideoOverlay=ci,r.bind=o,r.bounds=G,r.canvas=Uc,r.circle=qc,r.circleMarker=Bd,r.control=Sa,r.divIcon=bl,r.extend=a,r.featureGroup=Rd,r.geoJSON=Go,r.geoJson=mr,r.gridLayer=la,r.icon=Fd,r.imageOverlay=Ta,r.latLng=xe,r.latLngBounds=fe,r.layerGroup=ec,r.map=mo,r.marker=$d,r.point=ue,r.polygon=qd,r.polyline=Oh,r.popup=Ai,r.rectangle=Mh,r.setOptions=y,r.stamp=c,r.svg=Oa,r.svgOverlay=Vc,r.tileLayer=Sr,r.tooltip=Yo,r.transformation=Le,r.version=s,r.videoOverlay=zc;var Fu=window.L;r.noConflict=function(){return window.L=Fu,this},window.L=r}))})(j0,j0.exports)),j0.exports}var Rf=Zhe();const Ff=Dr(Rf);function Sg(e,t,r){return Object.freeze({instance:e,context:t,container:r})}function zj(e,t){return t==null?function(s,a){const i=P.useRef();return i.current||(i.current=e(s,a)),i}:function(s,a){const i=P.useRef();i.current||(i.current=e(s,a));const o=P.useRef(s),{instance:l}=i.current;return P.useEffect(function(){o.current!==s&&(t(l,s,o.current),o.current=s)},[l,s,a]),i}}function KV(e,t){P.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var i;(i=t.layerContainer)==null||i.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function GV(e){return function(r){const s=Bj(),a=e(qj(r,s),s);return VV(s.map,r.attribution),_A(a.current,r.eventHandlers),KV(a.current,s),a}}function Yhe(e,t){const r=P.useRef();P.useEffect(function(){if(t.pathOptions!==r.current){const a=t.pathOptions??{};e.instance.setStyle(a),r.current=a}},[e,t])}function Xhe(e){return function(r){const s=Bj(),a=e(qj(r,s),s);return _A(a.current,r.eventHandlers),KV(a.current,s),Yhe(a.current,r),a}}function Qhe(e,t){const r=zj(e,t),s=GV(r);return WV(s)}function ZV(e,t){const r=zj(e),s=Khe(r,t);return Hhe(s)}function YV(e,t){const r=zj(e,t),s=Xhe(r);return WV(s)}function Jhe(e,t){const r=zj(e,t),s=GV(r);return Whe(s)}function efe(e,t,r){const{opacity:s,zIndex:a}=t;s!=null&&s!==r.opacity&&e.setOpacity(s),a!=null&&a!==r.zIndex&&e.setZIndex(a)}function tfe(){return Bj().map}function nfe(e){const t=tfe();return P.useEffect(function(){return t.on(e),function(){t.off(e)}},[t,e]),t}const XV=YV(function({center:t,children:r,...s},a){const i=new Rf.Circle(t,s);return Sg(i,wA(a,{overlayContainer:i}))},zhe);function d4(){return d4=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},d4.apply(this,arguments)}function rfe({bounds:e,boundsOptions:t,center:r,children:s,className:a,id:i,placeholder:o,style:l,whenReady:c,zoom:d,...u},h){const[g]=P.useState({className:a,id:i,style:l}),[x,b]=P.useState(null);P.useImperativeHandle(h,()=>(x==null?void 0:x.map)??null,[x]);const y=P.useCallback(j=>{if(j!==null&&x===null){const w=new Rf.Map(j,u);r!=null&&d!=null?w.setView(r,d):e!=null&&w.fitBounds(e,t),c!=null&&w.whenReady(c),b(Uhe(w))}},[]);P.useEffect(()=>()=>{x==null||x.map.remove()},[x]);const v=x?Te.createElement(HV,{value:x},s):o??null;return Te.createElement("div",d4({},g,{ref:y}),v)}const Pg=P.forwardRef(rfe),Hm=Qhe(function({position:t,...r},s){const a=new Rf.Marker(t,r);return Sg(a,wA(s,{overlayContainer:a}))},function(t,r,s){r.position!==s.position&&t.setLatLng(r.position),r.icon!=null&&r.icon!==s.icon&&t.setIcon(r.icon),r.zIndexOffset!=null&&r.zIndexOffset!==s.zIndexOffset&&t.setZIndexOffset(r.zIndexOffset),r.opacity!=null&&r.opacity!==s.opacity&&t.setOpacity(r.opacity),t.dragging!=null&&r.draggable!==s.draggable&&(r.draggable===!0?t.dragging.enable():t.dragging.disable())}),sfe=YV(function({positions:t,...r},s){const a=new Rf.Polyline(t,r);return Sg(a,wA(s,{overlayContainer:a}))},function(t,r,s){r.positions!==s.positions&&t.setLatLngs(r.positions)}),Wm=ZV(function(t,r){const s=new Rf.Popup(t,r.overlayContainer);return Sg(s,r)},function(t,r,{position:s},a){P.useEffect(function(){const{instance:o}=t;function l(d){d.popup===o&&(o.update(),a(!0))}function c(d){d.popup===o&&a(!1)}return r.map.on({popupopen:l,popupclose:c}),r.overlayContainer==null?(s!=null&&o.setLatLng(s),o.openOn(r.map)):r.overlayContainer.bindPopup(o),function(){var u;r.map.off({popupopen:l,popupclose:c}),(u=r.overlayContainer)==null||u.unbindPopup(),r.map.removeLayer(o)}},[t,r,a,s])}),Ag=Jhe(function({url:t,...r},s){const a=new Rf.TileLayer(t,qj(r,s));return Sg(a,s)},function(t,r,s){efe(t,r,s);const{url:a}=r;a!=null&&a!==s.url&&t.setUrl(a)}),QV=ZV(function(t,r){const s=new Rf.Tooltip(t,r.overlayContainer);return Sg(s,r)},function(t,r,{position:s},a){P.useEffect(function(){const o=r.overlayContainer;if(o==null)return;const{instance:l}=t,c=u=>{u.tooltip===l&&(s!=null&&l.setLatLng(s),l.update(),a(!0))},d=u=>{u.tooltip===l&&a(!1)};return o.on({tooltipopen:c,tooltipclose:d}),o.bindTooltip(l),function(){o.off({tooltipopen:c,tooltipclose:d}),o._map!=null&&o.unbindTooltip()}},[t,r,a,s])});delete Ff.Icon.Default.prototype._getIconUrl;Ff.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function afe(){const{data:e=[],isLoading:t}=He({queryKey:["activeTimeEntries"],queryFn:async()=>(await oe.entities.TimeEntry.list()).filter(l=>l.status==="active"&&l.clock_in_location),refetchInterval:3e4}),{data:r=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list()}),{data:s=[]}=He({queryKey:["users"],queryFn:()=>oe.entities.User.list()}),a=P.useMemo(()=>e.map(o=>{var d,u,h;const l=r.find(g=>g.user_email===o.employee_email),c=s.find(g=>g.email===o.employee_email);return{id:o.id,name:(c==null?void 0:c.full_name)||o.employee_email,email:o.employee_email,department:(l==null?void 0:l.department)||"Oknd",lat:(d=o.clock_in_location)==null?void 0:d.latitude,lng:(u=o.clock_in_location)==null?void 0:u.longitude,address:((h=o.clock_in_location)==null?void 0:h.address)||"Oknd plats",clockInTime:o.clock_in_time}}).filter(o=>o.lat&&o.lng),[e,r,s]),i=a.length>0?[a[0].lat,a[0].lng]:[59.3293,18.0686];return t?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-6 h-96 flex items-center justify-center",children:n.jsx(Ot,{className:"h-8 w-8 animate-spin text-slate-400"})})}):n.jsxs(ce,{className:"border-0 shadow-sm overflow-hidden",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"flex items-center gap-2",children:[n.jsx(Fn,{className:"h-5 w-5"}),"Personalens position"]})}),n.jsxs(he,{className:"p-0",children:[n.jsx("div",{className:"h-96 rounded-b-xl overflow-hidden",children:n.jsxs(Pg,{center:i,zoom:13,style:{height:"100%",width:"100%"},children:[n.jsx(Ag,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),a.map(o=>n.jsx(Hm,{position:[o.lat,o.lng],children:n.jsx(Wm,{children:n.jsxs("div",{className:"text-sm",children:[n.jsx("p",{className:"font-semibold",children:o.name}),n.jsx("p",{className:"text-xs text-slate-500",children:o.department}),n.jsx("p",{className:"text-xs text-slate-600 mt-1",children:o.address}),n.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Instmplad: ",new Date(o.clockInTime).toLocaleTimeString("sv-SE")]})]})})},o.id))]})}),n.jsx("div",{className:"p-4 bg-slate-50 border-t",children:n.jsxs("p",{className:"text-sm text-slate-600",children:[a.length," anstlld",a.length!==1?"a":""," instmplad",a.length!==1?"a":""]})})]})]})}function ife(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}Array(12).fill(0);let u4=1;class ofe{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:s,...a}=t,i=typeof(t==null?void 0:t.id)=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:u4++,o=this.toasts.find(c=>c.id===i),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...t,id:i,title:s}),{...c,...t,id:i,dismissible:l,title:s}):c):this.addToast({title:s,...a,dismissible:l,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(s=>s({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let s;r.loading!==void 0&&(s=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=s!==void 0,o;const l=a.then(async d=>{if(o=["resolve",d],Te.isValidElement(d))i=!1,this.create({id:s,type:"default",message:d});else if(cfe(d)&&!d.ok){i=!1;const h=typeof r.error=="function"?await r.error(`HTTP error! status: ${d.status}`):r.error,g=typeof r.description=="function"?await r.description(`HTTP error! status: ${d.status}`):r.description,b=typeof h=="object"&&!Te.isValidElement(h)?h:{message:h};this.create({id:s,type:"error",description:g,...b})}else if(d instanceof Error){i=!1;const h=typeof r.error=="function"?await r.error(d):r.error,g=typeof r.description=="function"?await r.description(d):r.description,b=typeof h=="object"&&!Te.isValidElement(h)?h:{message:h};this.create({id:s,type:"error",description:g,...b})}else if(r.success!==void 0){i=!1;const h=typeof r.success=="function"?await r.success(d):r.success,g=typeof r.description=="function"?await r.description(d):r.description,b=typeof h=="object"&&!Te.isValidElement(h)?h:{message:h};this.create({id:s,type:"success",description:g,...b})}}).catch(async d=>{if(o=["reject",d],r.error!==void 0){i=!1;const u=typeof r.error=="function"?await r.error(d):r.error,h=typeof r.description=="function"?await r.description(d):r.description,x=typeof u=="object"&&!Te.isValidElement(u)?u:{message:u};this.create({id:s,type:"error",description:h,...x})}}).finally(()=>{i&&(this.dismiss(s),s=void 0),r.finally==null||r.finally.call(r)}),c=()=>new Promise((d,u)=>l.then(()=>o[0]==="reject"?u(o[1]):d(o[1])).catch(u));return typeof s!="string"&&typeof s!="number"?{unwrap:c}:Object.assign(s,{unwrap:c})},this.custom=(t,r)=>{const s=(r==null?void 0:r.id)||u4++;return this.create({jsx:t(s),id:s,...r}),s},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const vc=new ofe,lfe=(e,t)=>{const r=(t==null?void 0:t.id)||u4++;return vc.addToast({title:e,...t,id:r}),r},cfe=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",dfe=lfe,ufe=()=>vc.toasts,hfe=()=>vc.getActiveToasts(),oo=Object.assign(dfe,{success:vc.success,info:vc.info,warning:vc.warning,error:vc.error,custom:vc.custom,message:vc.message,promise:vc.promise,dismiss:vc.dismiss,loading:vc.loading},{getHistory:ufe,getToasts:hfe});ife("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function ffe(){const[e,t]=P.useState(!1),[r,s]=P.useState({vehicle_id:"",device_type:"mobile",mac_address:"",driver_email:"",driver_name:"",driver_code:"",clock_in_enabled:!1,power_cutoff_enabled:!1,notes:""}),a=$n(),{data:i=[]}=He({queryKey:["bluetooth-devices"],queryFn:()=>oe.entities.BluetoothDevice.list("-created_date")}),{data:o=[]}=He({queryKey:["vehicles"],queryFn:()=>oe.entities.Vehicle.list()}),{data:l=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list()}),c=Xt({mutationFn:async b=>{const y=await oe.entities.BluetoothDevice.create(b);return o.find(v=>v.id===b.vehicle_id),await oe.functions.invoke("bluetoothGPS",{action:"authorizeDevice",params:{vehicleId:b.vehicle_id,bluetoothDeviceId:y.id,macAddress:b.mac_address,driverName:b.driver_name,driverCode:b.driver_code,deviceType:b.device_type}}),y},onSuccess:()=>{a.invalidateQueries(["bluetooth-devices"]),t(!1),h(),oo.success("Bluetooth-enhet tillagd och auktoriserad")},onError:b=>{oo.error("Kunde inte lgga till enhet: "+b.message)}}),d=Xt({mutationFn:b=>oe.entities.BluetoothDevice.delete(b),onSuccess:()=>{a.invalidateQueries(["bluetooth-devices"]),oo.success("Bluetooth-enhet borttagen")}}),u=Xt({mutationFn:async({deviceId:b,feature:y,enabled:v})=>{const j=i.find(w=>w.id===b);await oe.functions.invoke("bluetoothGPS",{action:y==="clock_in"?"enableClockIn":"enablePowerCutoff",params:{vehicleId:j.vehicle_id,enabled:v}}),await oe.entities.BluetoothDevice.update(b,{[y==="clock_in"?"clock_in_enabled":"power_cutoff_enabled"]:v})},onSuccess:()=>{a.invalidateQueries(["bluetooth-devices"]),oo.success("Instllning uppdaterad")},onError:b=>{oo.error("Fel: "+b.message)}}),h=()=>{s({vehicle_id:"",device_type:"mobile",mac_address:"",driver_email:"",driver_name:"",driver_code:"",clock_in_enabled:!1,power_cutoff_enabled:!1,notes:""})},g=b=>{const y=l.find(v=>v.user_email===b);s({...r,driver_email:b,driver_name:(y==null?void 0:y.user_email)||b})},x=b=>{b.preventDefault();const y=o.find(v=>v.id===r.vehicle_id);c.mutate({...r,registration_number:y==null?void 0:y.registration_number})};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Bluetooth-enheter"}),n.jsx("p",{className:"text-slate-600 text-sm",children:"Hantera Bluetooth-anslutna enheter fr fordon"})]}),n.jsxs(ye,{onClick:()=>t(!0),className:"bg-slate-900",children:[n.jsx(xr,{className:"h-4 w-4 mr-2"}),"Lgg till enhet"]})]}),n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:i.map(b=>{const y=o.find(v=>v.id===b.vehicle_id);return n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`h-10 w-10 rounded-lg flex items-center justify-center ${b.device_type==="beacon"?"bg-purple-100":"bg-blue-100"}`,children:b.device_type==="beacon"?n.jsx(r3,{className:"h-5 w-5 text-purple-600"}):n.jsx(s3,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx(Ct,{className:"text-base",children:b.driver_name}),n.jsx("p",{className:"text-xs text-slate-500",children:y==null?void 0:y.registration_number})]})]}),n.jsx(ye,{variant:"ghost",size:"icon",onClick:()=>d.mutate(b.id),className:"text-rose-600",children:n.jsx(bi,{className:"h-4 w-4"})})]})}),n.jsxs(he,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-slate-600",children:"MAC-adress"}),n.jsx("span",{className:"font-mono text-xs",children:b.mac_address})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-slate-600",children:"Frarkod"}),n.jsx("span",{className:"font-mono text-xs",children:b.driver_code})]}),b.last_synced&&n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-slate-600",children:"Senast synkad"}),n.jsx("span",{className:"text-xs",children:Ce(new Date(b.last_synced),"PPp",{locale:ut})})]})]}),n.jsxs("div",{className:"pt-3 border-t space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vt,{className:"h-4 w-4 text-slate-500"}),n.jsx("span",{className:"text-sm text-slate-700",children:"Automatisk in-/utcheckning"})]}),n.jsx(Io,{checked:b.clock_in_enabled,onCheckedChange:v=>u.mutate({deviceId:b.id,feature:"clock_in",enabled:v})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(QX,{className:"h-4 w-4 text-slate-500"}),n.jsx("span",{className:"text-sm text-slate-700",children:"Fjrrstyrning strm/brnsle"})]}),n.jsx(Io,{checked:b.power_cutoff_enabled,onCheckedChange:v=>u.mutate({deviceId:b.id,feature:"power_cutoff",enabled:v})})]})]}),b.notes&&n.jsx("p",{className:"text-xs text-slate-500 pt-2 border-t",children:b.notes})]})]},b.id)})}),i.length===0&&n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(hY,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Inga Bluetooth-enheter"}),n.jsx("p",{className:"text-slate-600 mb-4",children:"Lgg till en Bluetooth-enhet fr automatisk fraridentifiering"}),n.jsxs(ye,{onClick:()=>t(!0),children:[n.jsx(xr,{className:"h-4 w-4 mr-2"}),"Lgg till enhet"]})]})}),n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"max-w-2xl",children:[n.jsx(er,{children:n.jsx(tr,{children:"Lgg till Bluetooth-enhet"})}),n.jsxs("form",{onSubmit:x,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Fordon *"}),n.jsxs(Nt,{value:r.vehicle_id,onValueChange:b=>s({...r,vehicle_id:b}),children:[n.jsx(jt,{children:n.jsx(kt,{placeholder:"Vlj fordon"})}),n.jsx(wt,{children:o.filter(b=>b.gps_device_id).map(b=>n.jsxs(Ne,{value:b.id,children:[b.registration_number," - ",b.make," ",b.model]},b.id))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Enhetstyp"}),n.jsxs(Nt,{value:r.device_type,onValueChange:b=>s({...r,device_type:b}),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"mobile",children:"Mobiltelefon"}),n.jsx(Ne,{value:"beacon",children:"Bluetooth Beacon"})]})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"MAC-adress *"}),n.jsx(De,{value:r.mac_address,onChange:b=>s({...r,mac_address:b.target.value.toUpperCase()}),placeholder:"T.ex. BC64D97DF612",required:!0}),n.jsx("p",{className:"text-xs text-slate-500",children:"MAC-adress utan kolon eller bindestreck"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Frare *"}),n.jsxs(Nt,{value:r.driver_email,onValueChange:g,children:[n.jsx(jt,{children:n.jsx(kt,{placeholder:"Vlj frare"})}),n.jsx(wt,{children:l.map(b=>n.jsx(Ne,{value:b.user_email,children:b.user_email},b.user_email))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Frarkod/Personnummer *"}),n.jsx(De,{value:r.driver_code,onChange:b=>s({...r,driver_code:b.target.value}),placeholder:"T.ex. personnummer eller ID",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Anteckningar"}),n.jsx(De,{value:r.notes,onChange:b=>s({...r,notes:b.target.value}),placeholder:"Valfri information"})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:()=>t(!1),className:"flex-1",children:"Avbryt"}),n.jsx(ye,{type:"submit",className:"flex-1 bg-slate-900",disabled:c.isPending,children:c.isPending?"Lgger till...":"Lgg till enhet"})]})]})]})})]})}const mfe=["Ledning","HR","Slj","Marknad","IT","Ekonomi","Produktion","Kundtjnst","vrigt"];function pfe(){const[e,t]=P.useState({title:"",message:"",priority:"normal",target_type:"all",target_departments:[],target_emails:[]}),[r,s]=P.useState(!1),{data:a=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list()}),i=Xt({mutationFn:async()=>{let d=[];e.target_type==="all"?d=a.map(h=>h.user_email):e.target_type==="departments"?d=a.filter(h=>e.target_departments.includes(h.department)).map(h=>h.user_email):e.target_type==="custom"&&(d=e.target_emails);const u=d.map(h=>({recipient_email:h,type:"system",title:e.title,message:e.message,priority:e.priority,is_read:!1,sent_via:["app","push"]}));for(const h of u)await oe.entities.Notification.create(h);return{count:u.length}},onSuccess:d=>{s(!0),setTimeout(()=>{s(!1),t({title:"",message:"",priority:"normal",target_type:"all",target_departments:[],target_emails:[]})},3e3)}}),o=d=>{t(u=>({...u,target_departments:u.target_departments.includes(d)?u.target_departments.filter(h=>h!==d):[...u.target_departments,d]}))},l=()=>e.target_type==="all"?a.length:e.target_type==="departments"?a.filter(d=>e.target_departments.includes(d.department)).length:e.target_emails.length,c=d=>{d.preventDefault(),i.mutate()};return n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"flex items-center gap-2",children:[n.jsx(Fm,{className:"h-5 w-5"}),"Skicka massnotiser"]})}),n.jsx(he,{children:r?n.jsxs(tt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"py-12 text-center",children:[n.jsx($r,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Notiser skickade!"}),n.jsx("p",{className:"text-slate-500",children:"Meddelandet har skickats till alla valda mottagare"})]}):n.jsxs("form",{onSubmit:c,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"title",children:"Titel *"}),n.jsx(De,{id:"title",value:e.title,onChange:d=>t(u=>({...u,title:d.target.value})),placeholder:"T.ex. Viktigt meddelande",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"message",children:"Meddelande *"}),n.jsx(Zn,{id:"message",value:e.message,onChange:d=>t(u=>({...u,message:d.target.value})),placeholder:"Skriv ditt meddelande hr...",className:"min-h-[120px]",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"priority",children:"Prioritet"}),n.jsxs(Nt,{value:e.priority,onValueChange:d=>t(u=>({...u,priority:d})),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"low",children:"Lg"}),n.jsx(Ne,{value:"normal",children:"Normal"}),n.jsx(Ne,{value:"high",children:"Hg"}),n.jsx(Ne,{value:"urgent",children:"Brdskande"})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(ve,{children:"Mottagare"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",checked:e.target_type==="all",onChange:()=>t(d=>({...d,target_type:"all"})),className:"w-4 h-4"}),n.jsxs("span",{className:"text-sm",children:["Alla medarbetare (",a.length,")"]})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",checked:e.target_type==="departments",onChange:()=>t(d=>({...d,target_type:"departments"})),className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:"Specifika avdelningar"})]}),e.target_type==="departments"&&n.jsx("div",{className:"ml-6 space-y-2 pt-2",children:mfe.map(d=>n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx(wh,{checked:e.target_departments.includes(d),onCheckedChange:()=>o(d)}),n.jsx("span",{className:"text-sm text-slate-700",children:d})]},d))})]})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Fr,{className:"h-5 w-5 text-blue-600"}),n.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[l()," mottagare valda"]})]}),n.jsx(ye,{type:"submit",disabled:i.isPending||!e.title||!e.message,children:i.isPending?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"w-4 h-4 mr-2 animate-spin"}),"Skickar..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Fm,{className:"w-4 h-4 mr-2"}),"Skicka notis"]})})]})]})})]})}function xfe(){const[e,t]=P.useState(null),r=$n();P.useEffect(()=>{oe.auth.me().then(t).catch(()=>t(null))},[]);const{data:s=[]}=He({queryKey:["scheduled-tasks"],queryFn:async()=>(await fetch("/.base44/api/scheduled-tasks",{headers:{Authorization:`Bearer ${await oe.auth.getToken()}`}})).json()}),a=Xt({mutationFn:async u=>(await fetch(`/.base44/api/scheduled-tasks/${u}/toggle`,{method:"POST",headers:{Authorization:`Bearer ${await oe.auth.getToken()}`}})).json(),onSuccess:()=>{r.invalidateQueries({queryKey:["scheduled-tasks"]}),oo.success("Automation uppdaterad")}}),i=Xt({mutationFn:async u=>(await oe.functions.invoke(u)).data,onSuccess:()=>{oo.success("Automation krd")},onError:u=>{oo.error(`Fel: ${u.message}`)}}),o=s.find(u=>u.function_name==="sendTimeReportReminders"),l=s.find(u=>u.function_name==="generateMonthlySummaries"),c=s.find(u=>u.function_name==="archiveOldData"),d=Xt({mutationFn:async({name:u,functionName:h,schedule:g})=>(await fetch("/.base44/api/scheduled-tasks",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await oe.auth.getToken()}`},body:JSON.stringify({name:u,function_name:h,schedule_type:g.type,repeat_interval:g.interval,repeat_unit:g.unit,start_time:g.time,is_active:!0})})).json(),onSuccess:()=>{r.invalidateQueries({queryKey:["scheduled-tasks"]}),oo.success("Automation skapad")}});return(e==null?void 0:e.role)!=="admin"?null:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Automatisering"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Automatisera repetitiva uppgifter och schemalgg processer"})]}),n.jsxs(Ls,{defaultValue:"reminders",children:[n.jsxs(As,{className:"grid grid-cols-3 w-full",children:[n.jsxs(gt,{value:"reminders",children:[n.jsx(cs,{className:"h-4 w-4 mr-2"}),"Pminnelser"]}),n.jsxs(gt,{value:"summaries",children:[n.jsx(Jr,{className:"h-4 w-4 mr-2"}),"Sammanstllningar"]}),n.jsxs(gt,{value:"archive",children:[n.jsx(Zy,{className:"h-4 w-4 mr-2"}),"Arkivering"]})]}),n.jsx(Dt,{value:"reminders",className:"space-y-4",children:n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"text-base flex items-center justify-between",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(cs,{className:"h-5 w-5 text-blue-600"}),"Automatiska pminnelser"]}),o&&n.jsx(it,{variant:o.is_active?"default":"outline",children:o.is_active?"Aktiv":"Pausad"})]})}),n.jsxs(he,{className:"space-y-4",children:[n.jsx("p",{className:"text-sm text-slate-600",children:"Skicka automatiska pminnelser till anstllda som inte har lmnat in tidrapporter eller krtjournaler."}),o?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Vt,{className:"h-4 w-4 text-slate-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-900",children:"Schema"}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Varje ",o.repeat_unit==="days"?"dag":o.repeat_unit," kl ",o.start_time||"09:00"]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ye,{size:"sm",variant:"outline",onClick:()=>i.mutate("sendTimeReportReminders"),disabled:i.isPending,children:[n.jsx(Ap,{className:"h-4 w-4 mr-1"}),"Kr nu"]}),n.jsx(ye,{size:"sm",variant:o.is_active?"outline":"default",onClick:()=>a.mutate(o.id),disabled:a.isPending,children:o.is_active?n.jsxs(n.Fragment,{children:[n.jsx(N2,{className:"h-4 w-4 mr-1"}),"Pausa"]}):n.jsxs(n.Fragment,{children:[n.jsx(Ap,{className:"h-4 w-4 mr-1"}),"Aktivera"]})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-blue-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Tidrapporter"}),n.jsx("p",{className:"text-sm font-medium text-slate-900",children:"Pminner om ofullstndiga veckorapporter"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Krjournal"}),n.jsx("p",{className:"text-sm font-medium text-slate-900",children:"Pminner om ej kategoriserade resor"})]})]})]}):n.jsxs(ye,{onClick:()=>d.mutate({name:"Dagliga pminnelser",functionName:"sendTimeReportReminders",schedule:{type:"simple",interval:1,unit:"days",time:"09:00"}}),disabled:d.isPending,children:[d.isPending?n.jsx(Ot,{className:"h-4 w-4 mr-2 animate-spin"}):n.jsx(cs,{className:"h-4 w-4 mr-2"}),"Aktivera automatiska pminnelser"]})]})]})}),n.jsx(Dt,{value:"summaries",className:"space-y-4",children:n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"text-base flex items-center justify-between",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Jr,{className:"h-5 w-5 text-green-600"}),"Mnatliga sammanstllningar"]}),l&&n.jsx(it,{variant:l.is_active?"default":"outline",children:l.is_active?"Aktiv":"Pausad"})]})}),n.jsxs(he,{className:"space-y-4",children:[n.jsx("p",{className:"text-sm text-slate-600",children:"Generera automatiska mnatliga sammanstllningar av krtider och krstrckor per anstlld."}),l?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(_r,{className:"h-4 w-4 text-slate-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-900",children:"Schema"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Frsta dagen varje mnad"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ye,{size:"sm",variant:"outline",onClick:()=>i.mutate("generateMonthlySummaries"),disabled:i.isPending,children:[n.jsx(Ap,{className:"h-4 w-4 mr-1"}),"Kr nu"]}),n.jsx(ye,{size:"sm",variant:l.is_active?"outline":"default",onClick:()=>a.mutate(l.id),disabled:a.isPending,children:l.is_active?n.jsxs(n.Fragment,{children:[n.jsx(N2,{className:"h-4 w-4 mr-1"}),"Pausa"]}):n.jsxs(n.Fragment,{children:[n.jsx(Ap,{className:"h-4 w-4 mr-1"}),"Aktivera"]})})]})]}),n.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[n.jsx("h4",{className:"text-sm font-medium text-slate-900 mb-2",children:"Vad inkluderas:"}),n.jsxs("ul",{className:"space-y-1 text-sm text-slate-600",children:[n.jsx("li",{children:" Totala arbetstimmar per anstlld"}),n.jsx("li",{children:" Krstrckor och kostnader"}),n.jsx("li",{children:" Tjnst- vs privatresor"}),n.jsx("li",{children:" vertid och semester"})]})]})]}):n.jsxs(ye,{onClick:()=>d.mutate({name:"Mnatlig sammanstllning",functionName:"generateMonthlySummaries",schedule:{type:"simple",interval:1,unit:"months",time:"08:00"}}),disabled:d.isPending,children:[d.isPending?n.jsx(Ot,{className:"h-4 w-4 mr-2 animate-spin"}):n.jsx(Jr,{className:"h-4 w-4 mr-2"}),"Aktivera mnatliga sammanstllningar"]})]})]})}),n.jsx(Dt,{value:"archive",className:"space-y-4",children:n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"text-base flex items-center justify-between",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Zy,{className:"h-5 w-5 text-purple-600"}),"Automatisk arkivering"]}),c&&n.jsx(it,{variant:c.is_active?"default":"outline",children:c.is_active?"Aktiv":"Pausad"})]})}),n.jsxs(he,{className:"space-y-4",children:[n.jsx("p",{className:"text-sm text-slate-600",children:"Arkivera automatiskt gamla data och rapporter efter en viss tid fr att hlla systemet rent."}),c?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Zy,{className:"h-4 w-4 text-slate-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-900",children:"Schema"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Varje mnad"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ye,{size:"sm",variant:"outline",onClick:()=>i.mutate("archiveOldData"),disabled:i.isPending,children:[n.jsx(Ap,{className:"h-4 w-4 mr-1"}),"Kr nu"]}),n.jsx(ye,{size:"sm",variant:c.is_active?"outline":"default",onClick:()=>a.mutate(c.id),disabled:a.isPending,children:c.is_active?n.jsxs(n.Fragment,{children:[n.jsx(N2,{className:"h-4 w-4 mr-1"}),"Pausa"]}):n.jsxs(n.Fragment,{children:[n.jsx(Ap,{className:"h-4 w-4 mr-1"}),"Aktivera"]})})]})]}),n.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[n.jsx("h4",{className:"text-sm font-medium text-slate-900 mb-2",children:"Arkiveringsregler:"}),n.jsxs("ul",{className:"space-y-1 text-sm text-slate-600",children:[n.jsx("li",{children:" Tidrapporter ldre n 12 mnader"}),n.jsx("li",{children:" Krjournaler ldre n 24 mnader"}),n.jsx("li",{children:" Notifikationer ldre n 3 mnader"}),n.jsx("li",{children:" Chattmeddelanden ldre n 6 mnader"})]})]})]}):n.jsxs(ye,{onClick:()=>d.mutate({name:"Automatisk arkivering",functionName:"archiveOldData",schedule:{type:"simple",interval:1,unit:"months",time:"02:00"}}),disabled:d.isPending,children:[d.isPending?n.jsx(Ot,{className:"h-4 w-4 mr-2 animate-spin"}):n.jsx(Zy,{className:"h-4 w-4 mr-2"}),"Aktivera automatisk arkivering"]})]})]})})]})]})}function gfe(){const[e,t]=P.useState("today"),[r,s]=P.useState("all"),[a,i]=P.useState(""),[o,l]=P.useState(!0),{data:c=[],refetch:d}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list()}),{data:u=[],refetch:h}=He({queryKey:["time-entries-all"],queryFn:()=>oe.entities.TimeEntry.list()}),{data:g=[]}=He({queryKey:["projects"],queryFn:()=>oe.entities.Project.list()}),{data:x=[]}=He({queryKey:["users"],queryFn:()=>oe.entities.User.list()});P.useEffect(()=>{if(!o)return;const D=setInterval(()=>{h(),d()},3e4);return()=>clearInterval(D)},[o,h,d]);const b=()=>{const D=new Date;switch(e){case"today":return{start:Ce(D,"yyyy-MM-dd"),end:Ce(D,"yyyy-MM-dd")};case"week":return{start:Ce(sh(D,7),"yyyy-MM-dd"),end:Ce(D,"yyyy-MM-dd")};case"month":return{start:Ce(ri(D),"yyyy-MM-dd"),end:Ce(ni(D),"yyyy-MM-dd")};default:return{start:Ce(D,"yyyy-MM-dd"),end:Ce(D,"yyyy-MM-dd")}}},{start:y,end:v}=b(),j=u.filter(D=>{const R=D.date;return R>=y&&R<=v}),w=u.filter(D=>D.status==="active"),N=j.filter(D=>D.status==="completed").reduce((D,R)=>D+(R.total_hours||0),0),A=j.filter(D=>D.overtime_hours>0).reduce((D,R)=>D+(R.overtime_hours||0),0),C={};j.forEach(D=>{D.project_allocations&&D.project_allocations.forEach(R=>{C[R.project_id]||(C[R.project_id]={hours:0,entries:0}),C[R.project_id].hours+=R.hours||0,C[R.project_id].entries+=1})});const M=Object.entries(C).map(([D,R])=>({project:g.find(z=>z.id===D),...R})).filter(D=>D.project).sort((D,R)=>R.hours-D.hours).slice(0,5),I=c.filter(D=>{var se,J;const R=x.find(Q=>Q.email===D.user_email),z=r==="all"||D.department===r,Z=!a||((se=R==null?void 0:R.full_name)==null?void 0:se.toLowerCase().includes(a.toLowerCase()))||((J=D.user_email)==null?void 0:J.toLowerCase().includes(a.toLowerCase()));return z&&Z}),F=D=>{const R=j.filter(J=>J.employee_email===D),z=R.filter(J=>J.status==="completed").reduce((J,Q)=>J+(Q.total_hours||0),0),Z=R.some(J=>J.status==="active"),se=R.reduce((J,Q)=>J+(Q.overtime_hours||0),0);return{totalHours:z,isActive:Z,overtimeHours:se}},U=()=>{const D=["Namn","Email","Avdelning","Totalt (h)","vertid (h)","Status"],R=I.map(J=>{const Q=x.find(ne=>ne.email===J.user_email),H=F(J.user_email);return[(Q==null?void 0:Q.full_name)||"",J.user_email,J.department,H.totalHours.toFixed(2),H.overtimeHours.toFixed(2),H.isActive?"Aktiv":"Inaktiv"]}),z=[D,...R].map(J=>J.map(Q=>`"${Q}"`).join(",")).join(`
`),Z=new Blob(["\uFEFF"+z],{type:"text/csv;charset=utf-8;"}),se=document.createElement("a");se.href=URL.createObjectURL(Z),se.download=`tidrapport_${Ce(new Date,"yyyy-MM-dd")}.csv`,se.click()},W=[...new Set(c.map(D=>D.department).filter(Boolean))];return n.jsxs("div",{className:"space-y-6",children:[n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(_r,{className:"h-4 w-4 text-slate-500"}),n.jsxs(Nt,{value:e,onValueChange:t,children:[n.jsx(jt,{className:"w-32",children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"today",children:"Idag"}),n.jsx(Ne,{value:"week",children:"7 dagar"}),n.jsx(Ne,{value:"month",children:"Denna mnad"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(e3,{className:"h-4 w-4 text-slate-500"}),n.jsxs(Nt,{value:r,onValueChange:s,children:[n.jsx(jt,{className:"w-40",children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"all",children:"Alla avdelningar"}),W.map(D=>n.jsx(Ne,{value:D,children:D},D))]})]})]}),n.jsx(De,{placeholder:"Sk medarbetare...",value:a,onChange:D=>i(D.target.value),className:"max-w-xs"}),n.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[n.jsxs(ye,{variant:"outline",size:"sm",onClick:()=>{h(),d()},children:[n.jsx(t9,{className:"h-4 w-4 mr-2"}),"Uppdatera"]}),n.jsxs(ye,{variant:o?"default":"outline",size:"sm",onClick:()=>l(!o),children:[n.jsx(tu,{className:"h-4 w-4 mr-2"}),"Auto"]}),n.jsxs(ye,{variant:"outline",size:"sm",onClick:U,children:[n.jsx(Eo,{className:"h-4 w-4 mr-2"}),"Exportera"]})]})]})})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-emerald-50 to-teal-50",children:n.jsxs(he,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx(Fr,{className:"h-8 w-8 text-emerald-600"}),n.jsx(it,{className:"bg-emerald-100 text-emerald-700 border-0",children:"Live"})]}),n.jsx("p",{className:"text-3xl font-bold text-slate-900 mb-1",children:w.length}),n.jsx("p",{className:"text-sm text-slate-600",children:"Aktiva nu"})]})})}),n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-blue-50 to-indigo-50",children:n.jsxs(he,{className:"p-6",children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsx(Vt,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("p",{className:"text-3xl font-bold text-slate-900 mb-1",children:[N.toFixed(1),"h"]}),n.jsx("p",{className:"text-sm text-slate-600",children:"Totalt arbetade timmar"})]})})}),n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-amber-50 to-orange-50",children:n.jsxs(he,{className:"p-6",children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsx(Kr,{className:"h-8 w-8 text-amber-600"})}),n.jsxs("p",{className:"text-3xl font-bold text-slate-900 mb-1",children:[A.toFixed(1),"h"]}),n.jsx("p",{className:"text-sm text-slate-600",children:"vertid"})]})})}),n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-purple-50 to-pink-50",children:n.jsxs(he,{className:"p-6",children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsx(Do,{className:"h-8 w-8 text-purple-600"})}),n.jsx("p",{className:"text-3xl font-bold text-slate-900 mb-1",children:Object.keys(C).length}),n.jsx("p",{className:"text-sm text-slate-600",children:"Aktiva projekt"})]})})})]}),M.length>0&&n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"text-base font-semibold flex items-center gap-2",children:[n.jsx(ta,{className:"h-4 w-4 text-slate-600"}),"Mest aktiva projekt"]})}),n.jsx(he,{children:n.jsx("div",{className:"space-y-3",children:M.map((D,R)=>n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg",children:[n.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-slate-900 text-white flex items-center justify-center text-sm font-bold",children:R+1}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-slate-900 truncate",children:D.project.name}),n.jsx("p",{className:"text-xs text-slate-500",children:D.project.project_code})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-lg font-bold text-slate-900",children:[D.hours.toFixed(1),"h"]}),n.jsxs("p",{className:"text-xs text-slate-500",children:[D.entries," poster"]})]})]},D.project.id))})})]}),n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"text-base font-semibold",children:["Medarbetarversikt (",I.length,")"]})}),n.jsx(he,{children:n.jsx("div",{className:"space-y-2",children:I.map(D=>{const R=x.find(Z=>Z.email===D.user_email),z=F(D.user_email);return n.jsxs(tt.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-lg hover:shadow-sm transition-shadow",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:`w-3 h-3 rounded-full ${z.isActive?"bg-emerald-500 animate-pulse":"bg-slate-300"}`})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-slate-900 truncate",children:(R==null?void 0:R.full_name)||D.user_email}),n.jsxs("p",{className:"text-xs text-slate-500",children:[D.department,"  ",D.job_title||"Medarbetare"]})]}),n.jsxs("div",{className:"text-right flex-shrink-0",children:[n.jsxs("p",{className:"text-sm font-bold text-slate-900",children:[z.totalHours.toFixed(1),"h"]}),z.overtimeHours>0&&n.jsxs("p",{className:"text-xs text-amber-600",children:["+",z.overtimeHours.toFixed(1),"h vertid"]})]}),n.jsx(it,{variant:z.isActive?"default":"outline",className:z.isActive?"bg-emerald-100 text-emerald-700 border-0":"",children:z.isActive?"Aktiv":"Inaktiv"})]},D.id)})})})]})]})}const vfe="modulepreload",yfe=function(e){return"/"+e},C6={},h4=function(t,r,s){let a=Promise.resolve();if(r&&r.length>0){let o=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=o(r.map(d=>{if(d=yfe(d),d in C6)return;C6[d]=!0;const u=d.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const g=document.createElement("link");if(g.rel=u?"stylesheet":vfe,u||(g.as="script"),g.crossOrigin="",g.href=d,c&&g.setAttribute("nonce",c),document.head.appendChild(g),u)return new Promise((x,b)=>{g.addEventListener("load",x),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};function Qr(e){"@babel/helpers - typeof";return Qr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qr(e)}var lo=Uint8Array,Ml=Uint16Array,NA=Int32Array,Vj=new lo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Uj=new lo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),f4=new lo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),JV=function(e,t){for(var r=new Ml(31),s=0;s<31;++s)r[s]=t+=1<<e[s-1];for(var a=new NA(r[30]),s=1;s<30;++s)for(var i=r[s];i<r[s+1];++i)a[i]=i-r[s]<<5|s;return{b:r,r:a}},eU=JV(Vj,2),tU=eU.b,m4=eU.r;tU[28]=258,m4[258]=28;var nU=JV(Uj,0),bfe=nU.b,T6=nU.r,p4=new Ml(32768);for(var Cs=0;Cs<32768;++Cs){var Xh=(Cs&43690)>>1|(Cs&21845)<<1;Xh=(Xh&52428)>>2|(Xh&13107)<<2,Xh=(Xh&61680)>>4|(Xh&3855)<<4,p4[Cs]=((Xh&65280)>>8|(Xh&255)<<8)>>1}var hu=(function(e,t,r){for(var s=e.length,a=0,i=new Ml(t);a<s;++a)e[a]&&++i[e[a]-1];var o=new Ml(t);for(a=1;a<t;++a)o[a]=o[a-1]+i[a-1]<<1;var l;if(r){l=new Ml(1<<t);var c=15-t;for(a=0;a<s;++a)if(e[a])for(var d=a<<4|e[a],u=t-e[a],h=o[e[a]-1]++<<u,g=h|(1<<u)-1;h<=g;++h)l[p4[h]>>c]=d}else for(l=new Ml(s),a=0;a<s;++a)e[a]&&(l[a]=p4[o[e[a]-1]++]>>15-e[a]);return l}),Tf=new lo(288);for(var Cs=0;Cs<144;++Cs)Tf[Cs]=8;for(var Cs=144;Cs<256;++Cs)Tf[Cs]=9;for(var Cs=256;Cs<280;++Cs)Tf[Cs]=7;for(var Cs=280;Cs<288;++Cs)Tf[Cs]=8;var tv=new lo(32);for(var Cs=0;Cs<32;++Cs)tv[Cs]=5;var jfe=hu(Tf,9,0),wfe=hu(Tf,9,1),_fe=hu(tv,5,0),Nfe=hu(tv,5,1),Q2=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},sd=function(e,t,r){var s=t/8|0;return(e[s]|e[s+1]<<8)>>(t&7)&r},J2=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},kA=function(e){return(e+7)/8|0},rU=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new lo(e.subarray(t,r))},kfe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],dd=function(e,t,r){var s=new Error(t||kfe[e]);if(s.code=e,Error.captureStackTrace&&Error.captureStackTrace(s,dd),!r)throw s;return s},Sfe=function(e,t,r,s){var a=e.length,i=0;if(!a||t.f&&!t.l)return r||new lo(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new lo(a*3));var d=function(Ue){var Le=r.length;if(Ue>Le){var dt=new lo(Math.max(Le*2,Ue));dt.set(r),r=dt}},u=t.f||0,h=t.p||0,g=t.b||0,x=t.l,b=t.d,y=t.m,v=t.n,j=a*8;do{if(!x){u=sd(e,h,1);var w=sd(e,h+1,3);if(h+=3,w)if(w==1)x=wfe,b=Nfe,y=9,v=5;else if(w==2){var M=sd(e,h,31)+257,I=sd(e,h+10,15)+4,F=M+sd(e,h+5,31)+1;h+=14;for(var U=new lo(F),W=new lo(19),D=0;D<I;++D)W[f4[D]]=sd(e,h+D*3,7);h+=I*3;for(var R=Q2(W),z=(1<<R)-1,Z=hu(W,R,1),D=0;D<F;){var se=Z[sd(e,h,z)];h+=se&15;var N=se>>4;if(N<16)U[D++]=N;else{var J=0,Q=0;for(N==16?(Q=3+sd(e,h,3),h+=2,J=U[D-1]):N==17?(Q=3+sd(e,h,7),h+=3):N==18&&(Q=11+sd(e,h,127),h+=7);Q--;)U[D++]=J}}var H=U.subarray(0,M),ne=U.subarray(M);y=Q2(H),v=Q2(ne),x=hu(H,y,1),b=hu(ne,v,1)}else dd(1);else{var N=kA(h)+4,A=e[N-4]|e[N-3]<<8,C=N+A;if(C>a){c&&dd(0);break}l&&d(g+A),r.set(e.subarray(N,C),g),t.b=g+=A,t.p=h=C*8,t.f=u;continue}if(h>j){c&&dd(0);break}}l&&d(g+131072);for(var ue=(1<<y)-1,ae=(1<<v)-1,G=h;;G=h){var J=x[J2(e,h)&ue],te=J>>4;if(h+=J&15,h>j){c&&dd(0);break}if(J||dd(2),te<256)r[g++]=te;else if(te==256){G=h,x=null;break}else{var fe=te-254;if(te>264){var D=te-257,be=Vj[D];fe=sd(e,h,(1<<be)-1)+tU[D],h+=be}var xe=b[J2(e,h)&ae],we=xe>>4;xe||dd(3),h+=xe&15;var ne=bfe[we];if(we>3){var be=Uj[we];ne+=J2(e,h)&(1<<be)-1,h+=be}if(h>j){c&&dd(0);break}l&&d(g+131072);var Pe=g+fe;if(g<ne){var _e=i-ne,Ve=Math.min(ne,Pe);for(_e+g<0&&dd(3);g<Ve;++g)r[g]=s[_e+g]}for(;g<Pe;++g)r[g]=r[g-ne]}}t.l=x,t.p=G,t.b=g,t.f=u,x&&(u=1,t.m=y,t.d=b,t.n=v)}while(!u);return g!=r.length&&o?rU(r,0,g):r.subarray(0,g)},Gu=function(e,t,r){r<<=t&7;var s=t/8|0;e[s]|=r,e[s+1]|=r>>8},s0=function(e,t,r){r<<=t&7;var s=t/8|0;e[s]|=r,e[s+1]|=r>>8,e[s+2]|=r>>16},e_=function(e,t){for(var r=[],s=0;s<e.length;++s)e[s]&&r.push({s,f:e[s]});var a=r.length,i=r.slice();if(!a)return{t:aU,l:0};if(a==1){var o=new lo(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(C,M){return C.f-M.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],d=0,u=1,h=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};u!=a-1;)l=r[r[d].f<r[h].f?d++:h++],c=r[d!=u&&r[d].f<r[h].f?d++:h++],r[u++]={s:-1,f:l.f+c.f,l,r:c};for(var g=i[0].s,s=1;s<a;++s)i[s].s>g&&(g=i[s].s);var x=new Ml(g+1),b=x4(r[u-1],x,0);if(b>t){var s=0,y=0,v=b-t,j=1<<v;for(i.sort(function(M,I){return x[I.s]-x[M.s]||M.f-I.f});s<a;++s){var w=i[s].s;if(x[w]>t)y+=j-(1<<b-x[w]),x[w]=t;else break}for(y>>=v;y>0;){var N=i[s].s;x[N]<t?y-=1<<t-x[N]++-1:++s}for(;s>=0&&y;--s){var A=i[s].s;x[A]==t&&(--x[A],++y)}b=t}return{t:new lo(x),l:b}},x4=function(e,t,r){return e.s==-1?Math.max(x4(e.l,t,r+1),x4(e.r,t,r+1)):t[e.s]=r},E6=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Ml(++t),s=0,a=e[0],i=1,o=function(c){r[s++]=c},l=1;l<=t;++l)if(e[l]==a&&l!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=e[l]}return{c:r.subarray(0,s),n:t}},a0=function(e,t){for(var r=0,s=0;s<t.length;++s)r+=e[s]*t[s];return r},sU=function(e,t,r){var s=r.length,a=kA(t+2);e[a]=s&255,e[a+1]=s>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<s;++i)e[a+i+4]=r[i];return(a+4+s)*8},O6=function(e,t,r,s,a,i,o,l,c,d,u){Gu(t,u++,r),++a[256];for(var h=e_(a,15),g=h.t,x=h.l,b=e_(i,15),y=b.t,v=b.l,j=E6(g),w=j.c,N=j.n,A=E6(y),C=A.c,M=A.n,I=new Ml(19),F=0;F<w.length;++F)++I[w[F]&31];for(var F=0;F<C.length;++F)++I[C[F]&31];for(var U=e_(I,7),W=U.t,D=U.l,R=19;R>4&&!W[f4[R-1]];--R);var z=d+5<<3,Z=a0(a,Tf)+a0(i,tv)+o,se=a0(a,g)+a0(i,y)+o+14+3*R+a0(I,W)+2*I[16]+3*I[17]+7*I[18];if(c>=0&&z<=Z&&z<=se)return sU(t,u,e.subarray(c,c+d));var J,Q,H,ne;if(Gu(t,u,1+(se<Z)),u+=2,se<Z){J=hu(g,x,0),Q=g,H=hu(y,v,0),ne=y;var ue=hu(W,D,0);Gu(t,u,N-257),Gu(t,u+5,M-1),Gu(t,u+10,R-4),u+=14;for(var F=0;F<R;++F)Gu(t,u+3*F,W[f4[F]]);u+=3*R;for(var ae=[w,C],G=0;G<2;++G)for(var te=ae[G],F=0;F<te.length;++F){var fe=te[F]&31;Gu(t,u,ue[fe]),u+=W[fe],fe>15&&(Gu(t,u,te[F]>>5&127),u+=te[F]>>12)}}else J=jfe,Q=Tf,H=_fe,ne=tv;for(var F=0;F<l;++F){var be=s[F];if(be>255){var fe=be>>18&31;s0(t,u,J[fe+257]),u+=Q[fe+257],fe>7&&(Gu(t,u,be>>23&31),u+=Vj[fe]);var xe=be&31;s0(t,u,H[xe]),u+=ne[xe],xe>3&&(s0(t,u,be>>5&8191),u+=Uj[xe])}else s0(t,u,J[be]),u+=Q[be]}return s0(t,u,J[256]),u+Q[256]},Pfe=new NA([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),aU=new lo(0),Afe=function(e,t,r,s,a,i){var o=i.z||e.length,l=new lo(s+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(s,l.length-a),d=i.l,u=(i.r||0)&7;if(t){u&&(c[0]=i.r>>3);for(var h=Pfe[t-1],g=h>>13,x=h&8191,b=(1<<r)-1,y=i.p||new Ml(32768),v=i.h||new Ml(b+1),j=Math.ceil(r/3),w=2*j,N=function(xt){return(e[xt]^e[xt+1]<<j^e[xt+2]<<w)&b},A=new NA(25e3),C=new Ml(288),M=new Ml(32),I=0,F=0,U=i.i||0,W=0,D=i.w||0,R=0;U+2<o;++U){var z=N(U),Z=U&32767,se=v[z];if(y[Z]=se,v[z]=Z,D<=U){var J=o-U;if((I>7e3||W>24576)&&(J>423||!d)){u=O6(e,c,0,A,C,M,F,W,R,U-R,u),W=I=F=0,R=U;for(var Q=0;Q<286;++Q)C[Q]=0;for(var Q=0;Q<30;++Q)M[Q]=0}var H=2,ne=0,ue=x,ae=Z-se&32767;if(J>2&&z==N(U-ae))for(var G=Math.min(g,J)-1,te=Math.min(32767,U),fe=Math.min(258,J);ae<=te&&--ue&&Z!=se;){if(e[U+H]==e[U+H-ae]){for(var be=0;be<fe&&e[U+be]==e[U+be-ae];++be);if(be>H){if(H=be,ne=ae,be>G)break;for(var xe=Math.min(ae,be-2),we=0,Q=0;Q<xe;++Q){var Pe=U-ae+Q&32767,_e=y[Pe],Ve=Pe-_e&32767;Ve>we&&(we=Ve,se=Pe)}}}Z=se,se=y[Z],ae+=Z-se&32767}if(ne){A[W++]=268435456|m4[H]<<18|T6[ne];var Ue=m4[H]&31,Le=T6[ne]&31;F+=Vj[Ue]+Uj[Le],++C[257+Ue],++M[Le],D=U+H,++I}else A[W++]=e[U],++C[e[U]]}}for(U=Math.max(U,D);U<o;++U)A[W++]=e[U],++C[e[U]];u=O6(e,c,d,A,C,M,F,W,R,U-R,u),d||(i.r=u&7|c[u/8|0]<<3,u-=7,i.h=v,i.p=y,i.i=U,i.w=D)}else{for(var U=i.w||0;U<o+d;U+=65535){var dt=U+65535;dt>=o&&(c[u/8|0]=d,dt=o),u=sU(c,u+1,e.subarray(U,dt))}i.i=o}return rU(l,0,s+kA(u)+a)},iU=function(){var e=1,t=0;return{p:function(r){for(var s=e,a=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)a+=s+=r[o];s=(s&65535)+15*(s>>16),a=(a&65535)+15*(a>>16)}e=s,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Cfe=function(e,t,r,s,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new lo(i.length+e.length);o.set(i),o.set(e,i.length),e=o,a.w=i.length}return Afe(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,s,a)},oU=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},Tfe=function(e,t){var r=t.level,s=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=s<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=iU();a.p(t.dictionary),oU(e,2,a.d())}},Efe=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&dd(6,"invalid zlib data"),(e[1]>>5&1)==1&&dd(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function g4(e,t){t||(t={});var r=iU();r.p(e);var s=Cfe(e,t,t.dictionary?6:2,4);return Tfe(s,t),oU(s,s.length-4,r.d()),s}function Ofe(e,t){return Sfe(e.subarray(Efe(e),-4),{i:2},t,t)}var Mfe=typeof TextDecoder<"u"&&new TextDecoder,Lfe=0;try{Mfe.decode(aU,{stream:!0}),Lfe=1}catch{}var Cn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function t_(){Cn.console&&typeof Cn.console.log=="function"&&Cn.console.log.apply(Cn.console,arguments)}var ls={log:t_,warn:function(e){Cn.console&&(typeof Cn.console.warn=="function"?Cn.console.warn.apply(Cn.console,arguments):t_.call(null,arguments))},error:function(e){Cn.console&&(typeof Cn.console.error=="function"?Cn.console.error.apply(Cn.console,arguments):t_(e))}};function n_(e,t,r){var s=new XMLHttpRequest;s.open("GET",e),s.responseType="blob",s.onload=function(){hm(s.response,t,r)},s.onerror=function(){ls.error("could not download file")},s.send()}function M6(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function db(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var E0,v4,hm=Cn.saveAs||((typeof window>"u"?"undefined":Qr(window))!=="object"||window!==Cn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var s=Cn.URL||Cn.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?M6(a.href)?n_(e,t,r):db(a,a.target="_blank"):db(a)):(a.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(a.href)}),4e4),setTimeout((function(){db(a)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(M6(e))n_(e,t,r);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout((function(){db(s)}))}else navigator.msSaveOrOpenBlob((function(a,i){return i===void 0?i={autoBom:!1}:Qr(i)!=="object"&&(ls.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(e,r),t)}:function(e,t,r,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof e=="string")return n_(e,t,r);var a=e.type==="application/octet-stream",i=/constructor/i.test(Cn.HTMLElement)||Cn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&i)&&(typeof FileReader>"u"?"undefined":Qr(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var u=l.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=u:location=u,s=null},l.readAsDataURL(e)}else{var c=Cn.URL||Cn.webkitURL,d=c.createObjectURL(e);s?s.location=d:location.href=d,s=null,setTimeout((function(){c.revokeObjectURL(d)}),4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function lU(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],s=0;s<r.length;s++){var a=r[s].re,i=r[s].process,o=a.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function r_(e,t){var r=e[0],s=e[1],a=e[2],i=e[3];r=Ji(r,s,a,i,t[0],7,-680876936),i=Ji(i,r,s,a,t[1],12,-389564586),a=Ji(a,i,r,s,t[2],17,606105819),s=Ji(s,a,i,r,t[3],22,-1044525330),r=Ji(r,s,a,i,t[4],7,-176418897),i=Ji(i,r,s,a,t[5],12,1200080426),a=Ji(a,i,r,s,t[6],17,-1473231341),s=Ji(s,a,i,r,t[7],22,-45705983),r=Ji(r,s,a,i,t[8],7,1770035416),i=Ji(i,r,s,a,t[9],12,-1958414417),a=Ji(a,i,r,s,t[10],17,-42063),s=Ji(s,a,i,r,t[11],22,-1990404162),r=Ji(r,s,a,i,t[12],7,1804603682),i=Ji(i,r,s,a,t[13],12,-40341101),a=Ji(a,i,r,s,t[14],17,-1502002290),r=eo(r,s=Ji(s,a,i,r,t[15],22,1236535329),a,i,t[1],5,-165796510),i=eo(i,r,s,a,t[6],9,-1069501632),a=eo(a,i,r,s,t[11],14,643717713),s=eo(s,a,i,r,t[0],20,-373897302),r=eo(r,s,a,i,t[5],5,-701558691),i=eo(i,r,s,a,t[10],9,38016083),a=eo(a,i,r,s,t[15],14,-660478335),s=eo(s,a,i,r,t[4],20,-405537848),r=eo(r,s,a,i,t[9],5,568446438),i=eo(i,r,s,a,t[14],9,-1019803690),a=eo(a,i,r,s,t[3],14,-187363961),s=eo(s,a,i,r,t[8],20,1163531501),r=eo(r,s,a,i,t[13],5,-1444681467),i=eo(i,r,s,a,t[2],9,-51403784),a=eo(a,i,r,s,t[7],14,1735328473),r=to(r,s=eo(s,a,i,r,t[12],20,-1926607734),a,i,t[5],4,-378558),i=to(i,r,s,a,t[8],11,-2022574463),a=to(a,i,r,s,t[11],16,1839030562),s=to(s,a,i,r,t[14],23,-35309556),r=to(r,s,a,i,t[1],4,-1530992060),i=to(i,r,s,a,t[4],11,1272893353),a=to(a,i,r,s,t[7],16,-155497632),s=to(s,a,i,r,t[10],23,-1094730640),r=to(r,s,a,i,t[13],4,681279174),i=to(i,r,s,a,t[0],11,-358537222),a=to(a,i,r,s,t[3],16,-722521979),s=to(s,a,i,r,t[6],23,76029189),r=to(r,s,a,i,t[9],4,-640364487),i=to(i,r,s,a,t[12],11,-421815835),a=to(a,i,r,s,t[15],16,530742520),r=no(r,s=to(s,a,i,r,t[2],23,-995338651),a,i,t[0],6,-198630844),i=no(i,r,s,a,t[7],10,1126891415),a=no(a,i,r,s,t[14],15,-1416354905),s=no(s,a,i,r,t[5],21,-57434055),r=no(r,s,a,i,t[12],6,1700485571),i=no(i,r,s,a,t[3],10,-1894986606),a=no(a,i,r,s,t[10],15,-1051523),s=no(s,a,i,r,t[1],21,-2054922799),r=no(r,s,a,i,t[8],6,1873313359),i=no(i,r,s,a,t[15],10,-30611744),a=no(a,i,r,s,t[6],15,-1560198380),s=no(s,a,i,r,t[13],21,1309151649),r=no(r,s,a,i,t[4],6,-145523070),i=no(i,r,s,a,t[11],10,-1120210379),a=no(a,i,r,s,t[2],15,718787259),s=no(s,a,i,r,t[9],21,-343485551),e[0]=yf(r,e[0]),e[1]=yf(s,e[1]),e[2]=yf(a,e[2]),e[3]=yf(i,e[3])}function Hj(e,t,r,s,a,i){return t=yf(yf(t,e),yf(s,i)),yf(t<<a|t>>>32-a,r)}function Ji(e,t,r,s,a,i,o){return Hj(t&r|~t&s,e,t,a,i,o)}function eo(e,t,r,s,a,i,o){return Hj(t&s|r&~s,e,t,a,i,o)}function to(e,t,r,s,a,i,o){return Hj(t^r^s,e,t,a,i,o)}function no(e,t,r,s,a,i,o){return Hj(r^(t|~s),e,t,a,i,o)}function cU(e){var t,r=e.length,s=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)r_(s,Dfe(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(r_(s,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,r_(s,a),s}function Dfe(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}E0=Cn.atob.bind(Cn),v4=Cn.btoa.bind(Cn);var L6="0123456789abcdef".split("");function Ife(e){for(var t="",r=0;r<4;r++)t+=L6[e>>8*r+4&15]+L6[e>>8*r&15];return t}function Rfe(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function y4(e){return cU(e).map(Rfe).join("")}var Ffe=(function(e){for(var t=0;t<e.length;t++)e[t]=Ife(e[t]);return e.join("")})(cU("hello"))!="5d41402abc4b2a76b9719d911017c592";function yf(e,t){if(Ffe){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function b4(e,t){var r,s,a,i;if(e!==r){for(var o=(a=e,i=1+(256/e.length>>0),new Array(i+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var u=l[c];d=(d+u+o.charCodeAt(c))%256,l[c]=l[d],l[d]=u}r=e,s=l}else l=s;var h=t.length,g=0,x=0,b="";for(c=0;c<h;c++)x=(x+(u=l[g=(g+1)%256]))%256,l[g]=l[x],l[x]=u,o=l[(l[g]+l[x])%256],b+=String.fromCharCode(t.charCodeAt(c)^o);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var D6={print:4,modify:8,copy:16,"annot-forms":32};function qp(e,t,r,s){this.v=1,this.r=2;var a=192;e.forEach((function(l){if(D6.perm!==void 0)throw new Error("Invalid permission: "+l);a+=D6[l]})),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^a)),this.encryptionKey=y4(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=b4(this.encryptionKey,this.padding)}function zp(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,s=0;s<r;s++){var a=e.charCodeAt(s);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[s]}return t}function I6(e){if(Qr(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,s,a){if(a=a||!1,typeof r!="string"||typeof s!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[s,!!a],i},this.unsubscribe=function(r){for(var s in t)if(t[s][r])return delete t[s][r],Object.keys(t[s]).length===0&&delete t[s],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var s=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,s)}catch(l){Cn.console&&ls.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function d1(e){if(!(this instanceof d1))return new d1(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function dU(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function pm(e,t,r,s,a){if(!(this instanceof pm))return new pm(e,t,r,s,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,dU.call(this,s,a)}function Gp(e,t,r,s,a){if(!(this instanceof Gp))return new Gp(e,t,r,s,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,dU.call(this,s,a)}function Sn(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],a=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",u=null;Qr(e=e||{})==="object"&&(r=e.orientation,s=e.unit||s,a=e.format||a,i=e.compress||e.compressPdf||i,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),s=s||"mm",r=(""+(r||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,g={},x={internal:{},__private__:{}};x.__private__.PubSub=I6;var b="1.3",y=x.__private__.getPdfVersion=function(){return b};x.__private__.setPdfVersion=function($){b=$};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return v};var j=x.__private__.getPageFormat=function($){return v[$]};a=a||"a4";var w={COMPAT:"compat",ADVANCED:"advanced"},N=w.COMPAT;function A(){this.saveGraphicsState(),ke(new Ut(It,0,0,-It,0,Jl()*It).toString()+" cm"),this.setFontSize(this.getFontSize()/It),d="n",N=w.ADVANCED}function C(){this.restoreGraphicsState(),d="S",N=w.COMPAT}var M=x.__private__.combineFontStyleAndFontWeight=function($,re){if($=="bold"&&re=="normal"||$=="bold"&&re==400||$=="normal"&&re=="italic"||$=="bold"&&re=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return re&&($=re==400||re==="normal"?$==="italic"?"italic":"normal":re!=700&&re!=="bold"||$!=="normal"?(re==700?"bold":re)+""+$:"bold"),$};x.advancedAPI=function($){var re=N===w.COMPAT;return re&&A.call(this),typeof $!="function"||($(this),re&&C.call(this)),this},x.compatAPI=function($){var re=N===w.ADVANCED;return re&&C.call(this),typeof $!="function"||($(this),re&&A.call(this)),this},x.isAdvancedAPI=function(){return N===w.ADVANCED};var I,F=function($){if(N!==w.ADVANCED)throw new Error($+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},U=x.roundToPrecision=x.__private__.roundToPrecision=function($,re){var Se=t||re;if(isNaN($)||isNaN(Se))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return $.toFixed(Se).replace(/0+$/,"")};I=x.hpf=x.__private__.hpf=typeof c=="number"?function($){if(isNaN($))throw new Error("Invalid argument passed to jsPDF.hpf");return U($,c)}:c==="smart"?function($){if(isNaN($))throw new Error("Invalid argument passed to jsPDF.hpf");return U($,$>-1&&$<1?16:5)}:function($){if(isNaN($))throw new Error("Invalid argument passed to jsPDF.hpf");return U($,16)};var W=x.f2=x.__private__.f2=function($){if(isNaN($))throw new Error("Invalid argument passed to jsPDF.f2");return U($,2)},D=x.__private__.f3=function($){if(isNaN($))throw new Error("Invalid argument passed to jsPDF.f3");return U($,3)},R=x.scale=x.__private__.scale=function($){if(isNaN($))throw new Error("Invalid argument passed to jsPDF.scale");return N===w.COMPAT?$*It:N===w.ADVANCED?$:void 0},z=function($){return N===w.COMPAT?Jl()-$:N===w.ADVANCED?$:void 0},Z=function($){return R(z($))};x.__private__.setPrecision=x.setPrecision=function($){typeof parseInt($,10)=="number"&&(t=parseInt($,10))};var se,J="00000000000000000000000000000000",Q=x.__private__.getFileId=function(){return J},H=x.__private__.setFileId=function($){return J=$!==void 0&&/^[a-fA-F0-9]{32}$/.test($)?$.toUpperCase():J.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),u!==null&&(qr=new qp(u.userPermissions,u.userPassword,u.ownerPassword,J)),J};x.setFileId=function($){return H($),this},x.getFileId=function(){return Q()};var ne=x.__private__.convertDateToPDFDate=function($){var re=$.getTimezoneOffset(),Se=re<0?"+":"-",Ie=Math.floor(Math.abs(re/60)),We=Math.abs(re%60),nt=[Se,fe(Ie),"'",fe(We),"'"].join("");return["D:",$.getFullYear(),fe($.getMonth()+1),fe($.getDate()),fe($.getHours()),fe($.getMinutes()),fe($.getSeconds()),nt].join("")},ue=x.__private__.convertPDFDateToDate=function($){var re=parseInt($.substr(2,4),10),Se=parseInt($.substr(6,2),10)-1,Ie=parseInt($.substr(8,2),10),We=parseInt($.substr(10,2),10),nt=parseInt($.substr(12,2),10),vt=parseInt($.substr(14,2),10);return new Date(re,Se,Ie,We,nt,vt,0)},ae=x.__private__.setCreationDate=function($){var re;if($===void 0&&($=new Date),$ instanceof Date)re=ne($);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test($))throw new Error("Invalid argument passed to jsPDF.setCreationDate");re=$}return se=re},G=x.__private__.getCreationDate=function($){var re=se;return $==="jsDate"&&(re=ue(se)),re};x.setCreationDate=function($){return ae($),this},x.getCreationDate=function($){return G($)};var te,fe=x.__private__.padd2=function($){return("0"+parseInt($)).slice(-2)},be=x.__private__.padd2Hex=function($){return("00"+($=$.toString())).substr($.length)},xe=0,we=[],Pe=[],_e=0,Ve=[],Ue=[],Le=!1,dt=Pe,xt=function(){xe=0,_e=0,Pe=[],we=[],Ve=[],na=Et(),Ba=Et()};x.__private__.setCustomOutputDestination=function($){Le=!0,dt=$};var Xe=function($){Le||(dt=$)};x.__private__.resetCustomOutputDestination=function(){Le=!1,dt=Pe};var ke=x.__private__.out=function($){return $=$.toString(),_e+=$.length+1,dt.push($),dt},Bt=x.__private__.write=function($){return ke(arguments.length===1?$.toString():Array.prototype.join.call(arguments," "))},Ft=x.__private__.getArrayBuffer=function($){for(var re=$.length,Se=new ArrayBuffer(re),Ie=new Uint8Array(Se);re--;)Ie[re]=$.charCodeAt(re);return Se},mt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return mt};var yt=e.fontSize||16;x.__private__.setFontSize=x.setFontSize=function($){return yt=N===w.ADVANCED?$/It:$,this};var Tt,St=x.__private__.getFontSize=x.getFontSize=function(){return N===w.COMPAT?yt:yt*It},Kt=e.R2L||!1;x.__private__.setR2L=x.setR2L=function($){return Kt=$,this},x.__private__.getR2L=x.getR2L=function(){return Kt};var mn,jn=x.__private__.setZoomMode=function($){var re=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test($))Tt=$;else if(isNaN($)){if(re.indexOf($)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+$+'" is not recognized.');Tt=$}else Tt=parseInt($,10)};x.__private__.getZoomMode=function(){return Tt};var Ln,Wn=x.__private__.setPageMode=function($){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf($)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+$+'" is not recognized.');mn=$};x.__private__.getPageMode=function(){return mn};var lr=x.__private__.setLayoutMode=function($){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf($)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+$+'" is not recognized.');Ln=$};x.__private__.getLayoutMode=function(){return Ln},x.__private__.setDisplayMode=x.setDisplayMode=function($,re,Se){return jn($),lr(re),Wn(Se),this};var pn={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function($){if(Object.keys(pn).indexOf($)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return pn[$]},x.__private__.getDocumentProperties=function(){return pn},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function($){for(var re in pn)pn.hasOwnProperty(re)&&$[re]&&(pn[re]=$[re]);return this},x.__private__.setDocumentProperty=function($,re){if(Object.keys(pn).indexOf($)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return pn[$]=re};var Tn,It,Vs,Qn,Na,gr={},ur={},Nr=[],nr={},$a={},kr={},rs={},Ts=null,Br=0,Oe=[],ot=new I6(x),an=e.hotfixes||[],on={},Kn={},ss=[],Ut=function $(re,Se,Ie,We,nt,vt){if(!(this instanceof $))return new $(re,Se,Ie,We,nt,vt);isNaN(re)&&(re=1),isNaN(Se)&&(Se=0),isNaN(Ie)&&(Ie=0),isNaN(We)&&(We=1),isNaN(nt)&&(nt=0),isNaN(vt)&&(vt=0),this._matrix=[re,Se,Ie,We,nt,vt]};Object.defineProperty(Ut.prototype,"sx",{get:function(){return this._matrix[0]},set:function($){this._matrix[0]=$}}),Object.defineProperty(Ut.prototype,"shy",{get:function(){return this._matrix[1]},set:function($){this._matrix[1]=$}}),Object.defineProperty(Ut.prototype,"shx",{get:function(){return this._matrix[2]},set:function($){this._matrix[2]=$}}),Object.defineProperty(Ut.prototype,"sy",{get:function(){return this._matrix[3]},set:function($){this._matrix[3]=$}}),Object.defineProperty(Ut.prototype,"tx",{get:function(){return this._matrix[4]},set:function($){this._matrix[4]=$}}),Object.defineProperty(Ut.prototype,"ty",{get:function(){return this._matrix[5]},set:function($){this._matrix[5]=$}}),Object.defineProperty(Ut.prototype,"a",{get:function(){return this._matrix[0]},set:function($){this._matrix[0]=$}}),Object.defineProperty(Ut.prototype,"b",{get:function(){return this._matrix[1]},set:function($){this._matrix[1]=$}}),Object.defineProperty(Ut.prototype,"c",{get:function(){return this._matrix[2]},set:function($){this._matrix[2]=$}}),Object.defineProperty(Ut.prototype,"d",{get:function(){return this._matrix[3]},set:function($){this._matrix[3]=$}}),Object.defineProperty(Ut.prototype,"e",{get:function(){return this._matrix[4]},set:function($){this._matrix[4]=$}}),Object.defineProperty(Ut.prototype,"f",{get:function(){return this._matrix[5]},set:function($){this._matrix[5]=$}}),Object.defineProperty(Ut.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ut.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ut.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ut.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ut.prototype.join=function($){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(I).join($)},Ut.prototype.multiply=function($){var re=$.sx*this.sx+$.shy*this.shx,Se=$.sx*this.shy+$.shy*this.sy,Ie=$.shx*this.sx+$.sy*this.shx,We=$.shx*this.shy+$.sy*this.sy,nt=$.tx*this.sx+$.ty*this.shx+this.tx,vt=$.tx*this.shy+$.ty*this.sy+this.ty;return new Ut(re,Se,Ie,We,nt,vt)},Ut.prototype.decompose=function(){var $=this.sx,re=this.shy,Se=this.shx,Ie=this.sy,We=this.tx,nt=this.ty,vt=Math.sqrt($*$+re*re),$t=($/=vt)*Se+(re/=vt)*Ie;Se-=$*$t,Ie-=re*$t;var Gt=Math.sqrt(Se*Se+Ie*Ie);return $t/=Gt,$*(Ie/=Gt)<re*(Se/=Gt)&&($=-$,re=-re,$t=-$t,vt=-vt),{scale:new Ut(vt,0,0,Gt,0,0),translate:new Ut(1,0,0,1,We,nt),rotate:new Ut($,re,-re,$,0,0),skew:new Ut(1,0,$t,1,0,0)}},Ut.prototype.toString=function($){return this.join(" ")},Ut.prototype.inversed=function(){var $=this.sx,re=this.shy,Se=this.shx,Ie=this.sy,We=this.tx,nt=this.ty,vt=1/($*Ie-re*Se),$t=Ie*vt,Gt=-re*vt,On=-Se*vt,An=$*vt;return new Ut($t,Gt,On,An,-$t*We-On*nt,-Gt*We-An*nt)},Ut.prototype.applyToPoint=function($){var re=$.x*this.sx+$.y*this.shx+this.tx,Se=$.x*this.shy+$.y*this.sy+this.ty;return new xo(re,Se)},Ut.prototype.applyToRectangle=function($){var re=this.applyToPoint($),Se=this.applyToPoint(new xo($.x+$.w,$.y+$.h));return new qa(re.x,re.y,Se.x-re.x,Se.y-re.y)},Ut.prototype.clone=function(){var $=this.sx,re=this.shy,Se=this.shx,Ie=this.sy,We=this.tx,nt=this.ty;return new Ut($,re,Se,Ie,We,nt)},x.Matrix=Ut;var es=x.matrixMult=function($,re){return re.multiply($)},hs=new Ut(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=hs;var fr=function($,re){if(!$a[$]){var Se=(re instanceof pm?"Sh":"P")+(Object.keys(nr).length+1).toString(10);re.id=Se,$a[$]=Se,nr[Se]=re,ot.publish("addPattern",re)}};x.ShadingPattern=pm,x.TilingPattern=Gp,x.addShadingPattern=function($,re){return F("addShadingPattern()"),fr($,re),this},x.beginTilingPattern=function($){F("beginTilingPattern()"),Lu($.boundingBox[0],$.boundingBox[1],$.boundingBox[2]-$.boundingBox[0],$.boundingBox[3]-$.boundingBox[1],$.matrix)},x.endTilingPattern=function($,re){F("endTilingPattern()"),re.stream=Ue[te].join(`
`),fr($,re),ot.publish("endTilingPattern",re),ss.pop().restore()};var wn=x.__private__.newObject=function(){var $=Et();return fs($,!0),$},Et=x.__private__.newObjectDeferred=function(){return xe++,we[xe]=function(){return _e},xe},fs=function($,re){return re=typeof re=="boolean"&&re,we[$]=_e,re&&ke($+" 0 obj"),$},_s=x.__private__.newAdditionalObject=function(){var $={objId:Et(),content:""};return Ve.push($),$},na=Et(),Ba=Et(),wi=x.__private__.decodeColorString=function($){var re=$.split(" ");if(re.length!==2||re[1]!=="g"&&re[1]!=="G")re.length===5&&(re[4]==="k"||re[4]==="K")&&(re=[(1-re[0])*(1-re[3]),(1-re[1])*(1-re[3]),(1-re[2])*(1-re[3]),"r"]);else{var Se=parseFloat(re[0]);re=[Se,Se,Se,"r"]}for(var Ie="#",We=0;We<3;We++)Ie+=("0"+Math.floor(255*parseFloat(re[We])).toString(16)).slice(-2);return Ie},Us=x.__private__.encodeColorString=function($){var re;typeof $=="string"&&($={ch1:$});var Se=$.ch1,Ie=$.ch2,We=$.ch3,nt=$.ch4,vt=$.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Se=="string"&&Se.charAt(0)!=="#"){var $t=new lU(Se);if($t.ok)Se=$t.toHex();else if(!/^\d*\.?\d*$/.test(Se))throw new Error('Invalid color "'+Se+'" passed to jsPDF.encodeColorString.')}if(typeof Se=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Se)&&(Se="#"+Se[1]+Se[1]+Se[2]+Se[2]+Se[3]+Se[3]),typeof Se=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Se)){var Gt=parseInt(Se.substr(1),16);Se=Gt>>16&255,Ie=Gt>>8&255,We=255&Gt}if(Ie===void 0||nt===void 0&&Se===Ie&&Ie===We)if(typeof Se=="string")re=Se+" "+vt[0];else switch($.precision){case 2:re=W(Se/255)+" "+vt[0];break;case 3:default:re=D(Se/255)+" "+vt[0]}else if(nt===void 0||Qr(nt)==="object"){if(nt&&!isNaN(nt.a)&&nt.a===0)return re=["1.","1.","1.",vt[1]].join(" ");if(typeof Se=="string")re=[Se,Ie,We,vt[1]].join(" ");else switch($.precision){case 2:re=[W(Se/255),W(Ie/255),W(We/255),vt[1]].join(" ");break;default:case 3:re=[D(Se/255),D(Ie/255),D(We/255),vt[1]].join(" ")}}else if(typeof Se=="string")re=[Se,Ie,We,nt,vt[2]].join(" ");else switch($.precision){case 2:re=[W(Se),W(Ie),W(We),W(nt),vt[2]].join(" ");break;case 3:default:re=[D(Se),D(Ie),D(We),D(nt),vt[2]].join(" ")}return re},ka=x.__private__.getFilters=function(){return o},ai=x.__private__.putStream=function($){var re=($=$||{}).data||"",Se=$.filters||ka(),Ie=$.alreadyAppliedFilters||[],We=$.addLength1||!1,nt=re.length,vt=$.objectId,$t=function(Ca){return Ca};if(u!==null&&vt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&($t=qr.encryptor(vt,0));var Gt={};Se===!0&&(Se=["FlateEncode"]);var On=$.additionalKeyValues||[],An=(Gt=Sn.API.processDataByFilters!==void 0?Sn.API.processDataByFilters(re,Se):{data:re,reverseChain:[]}).reverseChain+(Array.isArray(Ie)?Ie.join(" "):Ie.toString());if(Gt.data.length!==0&&(On.push({key:"Length",value:Gt.data.length}),We===!0&&On.push({key:"Length1",value:nt})),An.length!=0)if(An.split("/").length-1==1)On.push({key:"Filter",value:An});else{On.push({key:"Filter",value:"["+An+"]"});for(var ar=0;ar<On.length;ar+=1)if(On[ar].key==="DecodeParms"){for(var Zr=[],ts=0;ts<Gt.reverseChain.split("/").length-1;ts+=1)Zr.push("null");Zr.push(On[ar].value),On[ar].value="["+Zr.join(" ")+"]"}}ke("<<");for(var Os=0;Os<On.length;Os++)ke("/"+On[Os].key+" "+On[Os].value);ke(">>"),Gt.data.length!==0&&(ke("stream"),ke($t(Gt.data)),ke("endstream"))},Ro=x.__private__.putPage=function($){var re=$.number,Se=$.data,Ie=$.objId,We=$.contentsObjId;fs(Ie,!0),ke("<</Type /Page"),ke("/Parent "+$.rootDictionaryObjId+" 0 R"),ke("/Resources "+$.resourceDictionaryObjId+" 0 R"),ke("/MediaBox ["+parseFloat(I($.mediaBox.bottomLeftX))+" "+parseFloat(I($.mediaBox.bottomLeftY))+" "+I($.mediaBox.topRightX)+" "+I($.mediaBox.topRightY)+"]"),$.cropBox!==null&&ke("/CropBox ["+I($.cropBox.bottomLeftX)+" "+I($.cropBox.bottomLeftY)+" "+I($.cropBox.topRightX)+" "+I($.cropBox.topRightY)+"]"),$.bleedBox!==null&&ke("/BleedBox ["+I($.bleedBox.bottomLeftX)+" "+I($.bleedBox.bottomLeftY)+" "+I($.bleedBox.topRightX)+" "+I($.bleedBox.topRightY)+"]"),$.trimBox!==null&&ke("/TrimBox ["+I($.trimBox.bottomLeftX)+" "+I($.trimBox.bottomLeftY)+" "+I($.trimBox.topRightX)+" "+I($.trimBox.topRightY)+"]"),$.artBox!==null&&ke("/ArtBox ["+I($.artBox.bottomLeftX)+" "+I($.artBox.bottomLeftY)+" "+I($.artBox.topRightX)+" "+I($.artBox.topRightY)+"]"),typeof $.userUnit=="number"&&$.userUnit!==1&&ke("/UserUnit "+$.userUnit),ot.publish("putPage",{objId:Ie,pageContext:Oe[re],pageNumber:re,page:Se}),ke("/Contents "+We+" 0 R"),ke(">>"),ke("endobj");var nt=Se.join(`
`);return N===w.ADVANCED&&(nt+=`
Q`),fs(We,!0),ai({data:nt,filters:ka(),objectId:We}),ke("endobj"),Ie},zl=x.__private__.putPages=function(){var $,re,Se=[];for($=1;$<=Br;$++)Oe[$].objId=Et(),Oe[$].contentsObjId=Et();for($=1;$<=Br;$++)Se.push(Ro({number:$,data:Ue[$],objId:Oe[$].objId,contentsObjId:Oe[$].contentsObjId,mediaBox:Oe[$].mediaBox,cropBox:Oe[$].cropBox,bleedBox:Oe[$].bleedBox,trimBox:Oe[$].trimBox,artBox:Oe[$].artBox,userUnit:Oe[$].userUnit,rootDictionaryObjId:na,resourceDictionaryObjId:Ba}));fs(na,!0),ke("<</Type /Pages");var Ie="/Kids [";for(re=0;re<Br;re++)Ie+=Se[re]+" 0 R ";ke(Ie+"]"),ke("/Count "+Br),ke(">>"),ke("endobj"),ot.publish("postPutPages")},Tc=function($){ot.publish("putFont",{font:$,out:ke,newObject:wn,putStream:ai}),$.isAlreadyPutted!==!0&&($.objectNumber=wn(),ke("<<"),ke("/Type /Font"),ke("/BaseFont /"+zp($.postScriptName)),ke("/Subtype /Type1"),typeof $.encoding=="string"&&ke("/Encoding /"+$.encoding),ke("/FirstChar 32"),ke("/LastChar 255"),ke(">>"),ke("endobj"))},Ec=function(){for(var $ in gr)gr.hasOwnProperty($)&&(h===!1||h===!0&&g.hasOwnProperty($))&&Tc(gr[$])},Vl=function($){$.objectNumber=wn();var re=[];re.push({key:"Type",value:"/XObject"}),re.push({key:"Subtype",value:"/Form"}),re.push({key:"BBox",value:"["+[I($.x),I($.y),I($.x+$.width),I($.y+$.height)].join(" ")+"]"}),re.push({key:"Matrix",value:"["+$.matrix.toString()+"]"});var Se=$.pages[1].join(`
`);ai({data:Se,additionalKeyValues:re,objectId:$.objectNumber}),ke("endobj")},Sd=function(){for(var $ in on)on.hasOwnProperty($)&&Vl(on[$])},Oc=function($,re){var Se,Ie=[],We=1/(re-1);for(Se=0;Se<1;Se+=We)Ie.push(Se);if(Ie.push(1),$[0].offset!=0){var nt={offset:0,color:$[0].color};$.unshift(nt)}if($[$.length-1].offset!=1){var vt={offset:1,color:$[$.length-1].color};$.push(vt)}for(var $t="",Gt=0,On=0;On<Ie.length;On++){for(Se=Ie[On];Se>$[Gt+1].offset;)Gt++;var An=$[Gt].offset,ar=(Se-An)/($[Gt+1].offset-An),Zr=$[Gt].color,ts=$[Gt+1].color;$t+=be(Math.round((1-ar)*Zr[0]+ar*ts[0]).toString(16))+be(Math.round((1-ar)*Zr[1]+ar*ts[1]).toString(16))+be(Math.round((1-ar)*Zr[2]+ar*ts[2]).toString(16))}return $t.trim()},as=function($,re){re||(re=21);var Se=wn(),Ie=Oc($.colors,re),We=[];We.push({key:"FunctionType",value:"0"}),We.push({key:"Domain",value:"[0.0 1.0]"}),We.push({key:"Size",value:"["+re+"]"}),We.push({key:"BitsPerSample",value:"8"}),We.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),We.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ai({data:Ie,additionalKeyValues:We,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Se}),ke("endobj"),$.objectNumber=wn(),ke("<< /ShadingType "+$.type),ke("/ColorSpace /DeviceRGB");var nt="/Coords ["+I(parseFloat($.coords[0]))+" "+I(parseFloat($.coords[1]))+" ";$.type===2?nt+=I(parseFloat($.coords[2]))+" "+I(parseFloat($.coords[3])):nt+=I(parseFloat($.coords[2]))+" "+I(parseFloat($.coords[3]))+" "+I(parseFloat($.coords[4]))+" "+I(parseFloat($.coords[5])),ke(nt+="]"),$.matrix&&ke("/Matrix ["+$.matrix.toString()+"]"),ke("/Function "+Se+" 0 R"),ke("/Extend [true true]"),ke(">>"),ke("endobj")},Wf=function($,re){var Se=Et(),Ie=wn();re.push({resourcesOid:Se,objectOid:Ie}),$.objectNumber=Ie;var We=[];We.push({key:"Type",value:"/Pattern"}),We.push({key:"PatternType",value:"1"}),We.push({key:"PaintType",value:"1"}),We.push({key:"TilingType",value:"1"}),We.push({key:"BBox",value:"["+$.boundingBox.map(I).join(" ")+"]"}),We.push({key:"XStep",value:I($.xStep)}),We.push({key:"YStep",value:I($.yStep)}),We.push({key:"Resources",value:Se+" 0 R"}),$.matrix&&We.push({key:"Matrix",value:"["+$.matrix.toString()+"]"}),ai({data:$.stream,additionalKeyValues:We,objectId:$.objectNumber}),ke("endobj")},Ul=function($){var re;for(re in nr)nr.hasOwnProperty(re)&&(nr[re]instanceof pm?as(nr[re]):nr[re]instanceof Gp&&Wf(nr[re],$))},Tu=function($){for(var re in $.objectNumber=wn(),ke("<<"),$)switch(re){case"opacity":ke("/ca "+W($[re]));break;case"stroke-opacity":ke("/CA "+W($[re]))}ke(">>"),ke("endobj")},Pd=function(){var $;for($ in kr)kr.hasOwnProperty($)&&Tu(kr[$])},Mc=function(){for(var $ in ke("/XObject <<"),on)on.hasOwnProperty($)&&on[$].objectNumber>=0&&ke("/"+$+" "+on[$].objectNumber+" 0 R");ot.publish("putXobjectDict"),ke(">>")},Hl=function(){qr.oid=wn(),ke("<<"),ke("/Filter /Standard"),ke("/V "+qr.v),ke("/R "+qr.r),ke("/U <"+qr.toHexString(qr.U)+">"),ke("/O <"+qr.toHexString(qr.O)+">"),ke("/P "+qr.P),ke(">>"),ke("endobj")},Wl=function(){for(var $ in ke("/Font <<"),gr)gr.hasOwnProperty($)&&(h===!1||h===!0&&g.hasOwnProperty($))&&ke("/"+$+" "+gr[$].objectNumber+" 0 R");ke(">>")},_i=function(){if(Object.keys(nr).length>0){for(var $ in ke("/Shading <<"),nr)nr.hasOwnProperty($)&&nr[$]instanceof pm&&nr[$].objectNumber>=0&&ke("/"+$+" "+nr[$].objectNumber+" 0 R");ot.publish("putShadingPatternDict"),ke(">>")}},Fo=function($){if(Object.keys(nr).length>0){for(var re in ke("/Pattern <<"),nr)nr.hasOwnProperty(re)&&nr[re]instanceof x.TilingPattern&&nr[re].objectNumber>=0&&nr[re].objectNumber<$&&ke("/"+re+" "+nr[re].objectNumber+" 0 R");ot.publish("putTilingPatternDict"),ke(">>")}},En=function(){if(Object.keys(kr).length>0){var $;for($ in ke("/ExtGState <<"),kr)kr.hasOwnProperty($)&&kr[$].objectNumber>=0&&ke("/"+$+" "+kr[$].objectNumber+" 0 R");ot.publish("putGStateDict"),ke(">>")}},Dn=function($){fs($.resourcesOid,!0),ke("<<"),ke("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Wl(),_i(),Fo($.objectOid),En(),Mc(),ke(">>"),ke("endobj")},Lc=function(){var $=[];Ec(),Pd(),Sd(),Ul($),ot.publish("putResources"),$.forEach(Dn),Dn({resourcesOid:Ba,objectOid:Number.MAX_SAFE_INTEGER}),ot.publish("postPutResources")},ml=function(){ot.publish("putAdditionalObjects");for(var $=0;$<Ve.length;$++){var re=Ve[$];fs(re.objId,!0),ke(re.content),ke("endobj")}ot.publish("postPutAdditionalObjects")},Fi=function($){ur[$.fontName]=ur[$.fontName]||{},ur[$.fontName][$.fontStyle]=$.id},$o=function($,re,Se,Ie,We){var nt={id:"F"+(Object.keys(gr).length+1).toString(10),postScriptName:$,fontName:re,fontStyle:Se,encoding:Ie,isStandardFont:We||!1,metadata:{}};return ot.publish("addFont",{font:nt,instance:this}),gr[nt.id]=nt,Fi(nt),nt.id},_n=function($){for(var re=0,Se=mt.length;re<Se;re++){var Ie=$o.call(this,$[re][0],$[re][1],$[re][2],mt[re][3],!0);h===!1&&(g[Ie]=!0);var We=$[re][0].split("-");Fi({id:Ie,fontName:We[0],fontStyle:We[1]||""})}ot.publish("addFonts",{fonts:gr,dictionary:ur})},cr=function($){return $.foo=function(){try{return $.apply(this,arguments)}catch(Ie){var re=Ie.stack||"";~re.indexOf(" at ")&&(re=re.split(" at ")[1]);var Se="Error in function "+re.split(`
`)[0].split("<")[0]+": "+Ie.message;if(!Cn.console)throw new Error(Se);Cn.console.error(Se,Ie),Cn.alert&&alert(Se)}},$.foo.bar=$,$.foo},Kl=function($,re){var Se,Ie,We,nt,vt,$t,Gt,On,An;if(We=(re=re||{}).sourceEncoding||"Unicode",vt=re.outputEncoding,(re.autoencode||vt)&&gr[Tn].metadata&&gr[Tn].metadata[We]&&gr[Tn].metadata[We].encoding&&(nt=gr[Tn].metadata[We].encoding,!vt&&gr[Tn].encoding&&(vt=gr[Tn].encoding),!vt&&nt.codePages&&(vt=nt.codePages[0]),typeof vt=="string"&&(vt=nt[vt]),vt)){for(Gt=!1,$t=[],Se=0,Ie=$.length;Se<Ie;Se++)(On=vt[$.charCodeAt(Se)])?$t.push(String.fromCharCode(On)):$t.push($[Se]),$t[Se].charCodeAt(0)>>8&&(Gt=!0);$=$t.join("")}for(Se=$.length;Gt===void 0&&Se!==0;)$.charCodeAt(Se-1)>>8&&(Gt=!0),Se--;if(!Gt)return $;for($t=re.noBOM?[]:[254,255],Se=0,Ie=$.length;Se<Ie;Se++){if((An=(On=$.charCodeAt(Se))>>8)>>8)throw new Error("Character at position "+Se+" of string '"+$+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");$t.push(An),$t.push(On-(An<<8))}return String.fromCharCode.apply(void 0,$t)},ra=x.__private__.pdfEscape=x.pdfEscape=function($,re){return Kl($,re).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Hs=x.__private__.beginPage=function($){Ue[++Br]=[],Oe[Br]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number($[0]),topRightY:Number($[1])}},ii(Br),Xe(Ue[te])},Eu=function($,re){var Se,Ie,We;switch(r=re||r,typeof $=="string"&&(Se=j($.toLowerCase()),Array.isArray(Se)&&(Ie=Se[0],We=Se[1])),Array.isArray($)&&(Ie=$[0]*It,We=$[1]*It),isNaN(Ie)&&(Ie=a[0],We=a[1]),(Ie>14400||We>14400)&&(ls.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ie=Math.min(14400,Ie),We=Math.min(14400,We)),a=[Ie,We],r.substr(0,1)){case"l":We>Ie&&(a=[We,Ie]);break;case"p":Ie>We&&(a=[We,Ie])}Hs(a),Fc(Od),ke(Pa),Mu!==0&&ke(Mu+" J"),Aa!==0&&ke(Aa+" j"),ot.publish("addPage",{pageNumber:Br})},Gl=function($){$>0&&$<=Br&&(Ue.splice($,1),Oe.splice($,1),Br--,te>Br&&(te=Br),this.setPage(te))},ii=function($){$>0&&$<=Br&&(te=$)},ms=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return Ue.length-1},$i=function($,re,Se){var Ie,We=void 0;return Se=Se||{},$=$!==void 0?$:gr[Tn].fontName,re=re!==void 0?re:gr[Tn].fontStyle,Ie=$.toLowerCase(),ur[Ie]!==void 0&&ur[Ie][re]!==void 0?We=ur[Ie][re]:ur[$]!==void 0&&ur[$][re]!==void 0?We=ur[$][re]:Se.disableWarning===!1&&ls.warn("Unable to look up font label for font '"+$+"', '"+re+"'. Refer to getFontList() for available fonts."),We||Se.noFallback||(We=ur.times[re])==null&&(We=ur.times.normal),We},rr=x.__private__.putInfo=function(){var $=wn(),re=function(Ie){return Ie};for(var Se in u!==null&&(re=qr.encryptor($,0)),ke("<<"),ke("/Producer ("+ra(re("jsPDF "+Sn.version))+")"),pn)pn.hasOwnProperty(Se)&&pn[Se]&&ke("/"+Se.substr(0,1).toUpperCase()+Se.substr(1)+" ("+ra(re(pn[Se]))+")");ke("/CreationDate ("+ra(re(se))+")"),ke(">>"),ke("endobj")},Bo=x.__private__.putCatalog=function($){var re=($=$||{}).rootDictionaryObjId||na;switch(wn(),ke("<<"),ke("/Type /Catalog"),ke("/Pages "+re+" 0 R"),Tt||(Tt="fullwidth"),Tt){case"fullwidth":ke("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ke("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ke("/OpenAction [3 0 R /Fit]");break;case"original":ke("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Se=""+Tt;Se.substr(Se.length-1)==="%"&&(Tt=parseInt(Tt)/100),typeof Tt=="number"&&ke("/OpenAction [3 0 R /XYZ null null "+W(Tt)+"]")}switch(Ln||(Ln="continuous"),Ln){case"continuous":ke("/PageLayout /OneColumn");break;case"single":ke("/PageLayout /SinglePage");break;case"two":case"twoleft":ke("/PageLayout /TwoColumnLeft");break;case"tworight":ke("/PageLayout /TwoColumnRight")}mn&&ke("/PageMode /"+mn),ot.publish("putCatalog"),ke(">>"),ke("endobj")},Ad=x.__private__.putTrailer=function(){ke("trailer"),ke("<<"),ke("/Size "+(xe+1)),ke("/Root "+xe+" 0 R"),ke("/Info "+(xe-1)+" 0 R"),u!==null&&ke("/Encrypt "+qr.oid+" 0 R"),ke("/ID [ <"+J+"> <"+J+"> ]"),ke(">>")},pl=x.__private__.putHeader=function(){ke("%PDF-"+b),ke("%")},Cd=x.__private__.putXRef=function(){var $="0000000000";ke("xref"),ke("0 "+(xe+1)),ke("0000000000 65535 f ");for(var re=1;re<=xe;re++)typeof we[re]=="function"?ke(($+we[re]()).slice(-10)+" 00000 n "):we[re]!==void 0?ke(($+we[re]).slice(-10)+" 00000 n "):ke("0000000000 00000 n ")},Bi=x.__private__.buildDocument=function(){xt(),Xe(Pe),ot.publish("buildDocument"),pl(),zl(),ml(),Lc(),u!==null&&Hl(),rr(),Bo();var $=_e;return Cd(),Ad(),ke("startxref"),ke(""+$),ke("%%EOF"),Xe(Ue[te]),Pe.join(`
`)},qo=x.__private__.getBlob=function($){return new Blob([Ft($)],{type:"application/pdf"})},zo=x.output=x.__private__.output=cr((function($,re){switch(typeof(re=re||{})=="string"?re={filename:re}:re.filename=re.filename||"generated.pdf",$){case void 0:return Bi();case"save":x.save(re.filename);break;case"arraybuffer":return Ft(Bi());case"blob":return qo(Bi());case"bloburi":case"bloburl":if(Cn.URL!==void 0&&typeof Cn.URL.createObjectURL=="function")return Cn.URL&&Cn.URL.createObjectURL(qo(Bi()))||void 0;ls.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Se="",Ie=Bi();try{Se=v4(Ie)}catch{Se=v4(unescape(encodeURIComponent(Ie)))}return"data:application/pdf;filename="+re.filename+";base64,"+Se;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Cn)==="[object Window]"){var We="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",nt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';re.pdfObjectUrl&&(We=re.pdfObjectUrl,nt="");var vt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+We+'"'+nt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(re)+");<\/script></body></html>",$t=Cn.open();return $t!==null&&$t.document.write(vt),$t}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Cn)==="[object Window]"){var Gt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(re.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+re.filename+'" width="500px" height="400px" /></body></html>',On=Cn.open();if(On!==null){On.document.write(Gt);var An=this;On.document.documentElement.querySelector("#pdfViewer").onload=function(){On.document.title=re.filename,On.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(An.output("bloburl"))}}return On}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Cn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ar='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",re)+'"></iframe></body></html>',Zr=Cn.open();if(Zr!==null&&(Zr.document.write(ar),Zr.document.title=re.filename),Zr||typeof safari>"u")return Zr;break;case"datauri":case"dataurl":return Cn.document.location.href=this.output("datauristring",re);default:return null}})),xl=function($){return Array.isArray(an)===!0&&an.indexOf($)>-1};switch(s){case"pt":It=1;break;case"mm":It=72/25.4;break;case"cm":It=72/2.54;break;case"in":It=72;break;case"px":It=xl("px_scaling")==1?.75:96/72;break;case"pc":case"em":It=12;break;case"ex":It=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);It=s}var qr=null;ae(),H();var fo=function($){return u!==null?qr.encryptor($,0):function(re){return re}},Ni=x.__private__.getPageInfo=x.getPageInfo=function($){if(isNaN($)||$%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Oe[$].objId,pageNumber:$,pageContext:Oe[$]}},xn=x.__private__.getPageInfoByObjId=function($){if(isNaN($)||$%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var re in Oe)if(Oe[re].objId===$)break;return Ni(re)},gn=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:Oe[te].objId,pageNumber:te,pageContext:Oe[te]}};x.addPage=function(){return Eu.apply(this,arguments),this},x.setPage=function(){return ii.apply(this,arguments),Xe.call(this,Ue[te]),this},x.insertPage=function($){return this.addPage(),this.movePage(te,$),this},x.movePage=function($,re){var Se,Ie;if($>re){Se=Ue[$],Ie=Oe[$];for(var We=$;We>re;We--)Ue[We]=Ue[We-1],Oe[We]=Oe[We-1];Ue[re]=Se,Oe[re]=Ie,this.setPage(re)}else if($<re){Se=Ue[$],Ie=Oe[$];for(var nt=$;nt<re;nt++)Ue[nt]=Ue[nt+1],Oe[nt]=Oe[nt+1];Ue[re]=Se,Oe[re]=Ie,this.setPage(re)}return this},x.deletePage=function(){return Gl.apply(this,arguments),this},x.__private__.text=x.text=function($,re,Se,Ie,We){var nt,vt,$t,Gt,On,An,ar,Zr,ts,Os=(Ie=Ie||{}).scope||this;if(typeof $=="number"&&typeof re=="number"&&(typeof Se=="string"||Array.isArray(Se))){var Ca=Se;Se=re,re=$,$=Ca}if(arguments[3]instanceof Ut?(F("The transform parameter of text() with a Matrix value"),ts=We):($t=arguments[4],Gt=arguments[5],Qr(ar=arguments[3])==="object"&&ar!==null||(typeof $t=="string"&&(Gt=$t,$t=null),typeof ar=="string"&&(Gt=ar,ar=null),typeof ar=="number"&&($t=ar,ar=null),Ie={flags:ar,angle:$t,align:Gt})),isNaN(re)||isNaN(Se)||$==null)throw new Error("Invalid arguments passed to jsPDF.text");if($.length===0)return Os;var Rs="",go=!1,is=typeof Ie.lineHeightFactor=="number"?Ie.lineHeightFactor:Rc,aa=Os.internal.scaleFactor;function ec(Sr){return Sr=Sr.split("	").join(Array(Ie.TabLen||9).join(" ")),ra(Sr,ar)}function ki(Sr){for(var vr,xs=Sr.concat(),Pr=[],bo=xs.length;bo--;)typeof(vr=xs.shift())=="string"?Pr.push(vr):Array.isArray(Sr)&&(vr.length===1||vr[1]===void 0&&vr[2]===void 0)?Pr.push(vr[0]):Pr.push([vr[0],vr[1],vr[2]]);return Pr}function Rd(Sr,vr){var xs;if(typeof Sr=="string")xs=vr(Sr)[0];else if(Array.isArray(Sr)){for(var Pr,bo,Uc=Sr.concat(),jo=[],Ru=Uc.length;Ru--;)typeof(Pr=Uc.shift())=="string"?jo.push(vr(Pr)[0]):Array.isArray(Pr)&&typeof Pr[0]=="string"&&(bo=vr(Pr[0],Pr[1],Pr[2]),jo.push([bo[0],bo[1],bo[2]]));xs=jo}return xs}var zi=!1,Fd=!0;if(typeof $=="string")zi=!0;else if(Array.isArray($)){var Wo=$.concat();vt=[];for(var tc,Yr=Wo.length;Yr--;)(typeof(tc=Wo.shift())!="string"||Array.isArray(tc)&&typeof tc[0]!="string")&&(Fd=!1);zi=Fd}if(zi===!1)throw new Error('Type of text must be string or Array. "'+$+'" is not recognized.');typeof $=="string"&&($=$.match(/[\r?\n]/)?$.split(/\r\n|\r|\n/g):[$]);var $d=yt/Os.internal.scaleFactor,Si=$d*(is-1);switch(Ie.baseline){case"bottom":Se-=Si;break;case"top":Se+=$d-Si;break;case"hanging":Se+=$d-2*Si;break;case"middle":Se+=$d/2-Si}if((An=Ie.maxWidth||0)>0&&(typeof $=="string"?$=Os.splitTextToSize($,An):Object.prototype.toString.call($)==="[object Array]"&&($=$.reduce((function(Sr,vr){return Sr.concat(Os.splitTextToSize(vr,An))}),[]))),nt={text:$,x:re,y:Se,options:Ie,mutex:{pdfEscape:ra,activeFontKey:Tn,fonts:gr,activeFontSize:yt}},ot.publish("preProcessText",nt),$=nt.text,$t=(Ie=nt.options).angle,!(ts instanceof Ut)&&$t&&typeof $t=="number"){$t*=Math.PI/180,Ie.rotationDirection===0&&($t=-$t),N===w.ADVANCED&&($t=-$t);var vl=Math.cos($t),Bd=Math.sin($t);ts=new Ut(vl,Bd,-Bd,vl,0,0)}else $t&&$t instanceof Ut&&(ts=$t);N!==w.ADVANCED||ts||(ts=hs),(On=Ie.charSpace||Ql)!==void 0&&(Rs+=I(R(On))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Zr=Ie.horizontalScale)!==void 0&&(Rs+=I(100*Zr)+` Tz
`),Ie.lang;var ia=-1,qc=Ie.renderingMode!==void 0?Ie.renderingMode:Ie.stroke,oa=Os.internal.getCurrentPageInfo().pageContext;switch(qc){case 0:case!1:case"fill":ia=0;break;case 1:case!0:case"stroke":ia=1;break;case 2:case"fillThenStroke":ia=2;break;case 3:case"invisible":ia=3;break;case 4:case"fillAndAddForClipping":ia=4;break;case 5:case"strokeAndAddPathForClipping":ia=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ia=6;break;case 7:case"addToPathForClipping":ia=7}var Oh=oa.usedRenderingMode!==void 0?oa.usedRenderingMode:-1;ia!==-1?Rs+=ia+` Tr
`:Oh!==-1&&(Rs+=`0 Tr
`),ia!==-1&&(oa.usedRenderingMode=ia),Gt=Ie.align||"left";var Ms,qd=yt*is,Pi=Os.internal.pageSize.getWidth(),yl=gr[Tn];On=Ie.charSpace||Ql,An=Ie.maxWidth||0,ar=Object.assign({autoencode:!0,noBOM:!0},Ie.flags);var vo=[],Ko=function(Sr){return Os.getStringUnitWidth(Sr,{font:yl,charSpace:On,fontSize:yt,doKerning:!1})*yt/aa};if(Object.prototype.toString.call($)==="[object Array]"){var Ws;vt=ki($),Gt!=="left"&&(Ms=vt.map(Ko));var Ks,yo=0;if(Gt==="right"){re-=Ms[0],$=[],Yr=vt.length;for(var li=0;li<Yr;li++)li===0?(Ks=ps(re),Ws=Sa(Se)):(Ks=R(yo-Ms[li]),Ws=-qd),$.push([vt[li],Ks,Ws]),yo=Ms[li]}else if(Gt==="center"){re-=Ms[0]/2,$=[],Yr=vt.length;for(var Vi=0;Vi<Yr;Vi++)Vi===0?(Ks=ps(re),Ws=Sa(Se)):(Ks=R((yo-Ms[Vi])/2),Ws=-qd),$.push([vt[Vi],Ks,Ws]),yo=Ms[Vi]}else if(Gt==="left"){$=[],Yr=vt.length;for(var nc=0;nc<Yr;nc++)$.push(vt[nc])}else if(Gt==="justify"&&yl.encoding==="Identity-H"){$=[],Yr=vt.length,An=An!==0?An:Pi;for(var Go=0,mr=0;mr<Yr;mr++)if(Ws=mr===0?Sa(Se):-qd,Ks=mr===0?ps(re):Go,mr<Yr-1){var Ui=R((An-Ms[mr])/(vt[mr].split(" ").length-1)),Ta=vt[mr].split(" ");$.push([Ta[0]+" ",Ks,Ws]),Go=0;for(var ci=1;ci<Ta.length;ci++){var zc=(Ko(Ta[ci-1]+" "+Ta[ci])-Ko(Ta[ci]))*aa+Ui;ci==Ta.length-1?$.push([Ta[ci],zc,0]):$.push([Ta[ci]+" ",zc,0]),Go-=zc}}else $.push([vt[mr],Ks,Ws]);$.push(["",Go,0])}else{if(Gt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for($=[],Yr=vt.length,An=An!==0?An:Pi,mr=0;mr<Yr;mr++)Ws=mr===0?Sa(Se):-qd,Ks=mr===0?ps(re):0,mr<Yr-1?vo.push(I(R((An-Ms[mr])/(vt[mr].split(" ").length-1)))):vo.push(0),$.push([vt[mr],Ks,Ws])}}var zd=typeof Ie.R2L=="boolean"?Ie.R2L:Kt;zd===!0&&($=Rd($,(function(Sr,vr,xs){return[Sr.split("").reverse().join(""),vr,xs]}))),nt={text:$,x:re,y:Se,options:Ie,mutex:{pdfEscape:ra,activeFontKey:Tn,fonts:gr,activeFontSize:yt}},ot.publish("postProcessText",nt),$=nt.text,go=nt.mutex.isHex||!1;var Vc=gr[Tn].encoding;Vc!=="WinAnsiEncoding"&&Vc!=="StandardEncoding"||($=Rd($,(function(Sr,vr,xs){return[ec(Sr),vr,xs]}))),vt=ki($),$=[];for(var Ea,Zo,Ai,Hi=0,Yo=1,Xo=Array.isArray(vt[0])?Yo:Hi,bl="",Wi=function(Sr,vr,xs){var Pr="";return xs instanceof Ut?(xs=typeof Ie.angle=="number"?es(xs,new Ut(1,0,0,1,Sr,vr)):es(new Ut(1,0,0,1,Sr,vr),xs),N===w.ADVANCED&&(xs=es(new Ut(1,0,0,-1,0,0),xs)),Pr=xs.join(" ")+` Tm
`):Pr=I(Sr)+" "+I(vr)+` Td
`,Pr},la=0;la<vt.length;la++){switch(bl="",Xo){case Yo:Ai=(go?"<":"(")+vt[la][0]+(go?">":")"),Ea=parseFloat(vt[la][1]),Zo=parseFloat(vt[la][2]);break;case Hi:Ai=(go?"<":"(")+vt[la]+(go?">":")"),Ea=ps(re),Zo=Sa(Se)}vo!==void 0&&vo[la]!==void 0&&(bl=vo[la]+` Tw
`),la===0?$.push(bl+Wi(Ea,Zo,ts)+Ai):Xo===Hi?$.push(bl+Ai):Xo===Yo&&$.push(bl+Wi(Ea,Zo,ts)+Ai)}$=Xo===Hi?$.join(` Tj
T* `):$.join(` Tj
`),$+=` Tj
`;var Fs=`BT
/`;return Fs+=Tn+" "+yt+` Tf
`,Fs+=I(yt*is)+` TL
`,Fs+=Es+`
`,Fs+=Rs,Fs+=$,ke(Fs+="ET"),g[Tn]=!0,Os};var Is=x.__private__.clip=x.clip=function($){return ke($==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return Is("evenodd")},x.__private__.discardPath=x.discardPath=function(){return ke("n"),this};var sr=x.__private__.isValidStyle=function($){var re=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf($)!==-1&&(re=!0),re};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function($){return sr($)&&(d=$),this};var Td=x.__private__.getStyle=x.getStyle=function($){var re=d;switch($){case"D":case"S":re="S";break;case"F":re="f";break;case"FD":case"DF":re="B";break;case"f":case"f*":case"B":case"B*":re=$}return re},Vo=x.close=function(){return ke("h"),this};x.stroke=function(){return ke("S"),this},x.fill=function($){return Zl("f",$),this},x.fillEvenOdd=function($){return Zl("f*",$),this},x.fillStroke=function($){return Zl("B",$),this},x.fillStrokeEvenOdd=function($){return Zl("B*",$),this};var Zl=function($,re){Qr(re)==="object"?Ed(re,$):ke($)},Yl=function($){$===null||N===w.ADVANCED&&$===void 0||($=Td($),ke($))};function qi($,re,Se,Ie,We){var nt=new Gp(re||this.boundingBox,Se||this.xStep,Ie||this.yStep,this.gState,We||this.matrix);nt.stream=this.stream;var vt=$+"$$"+this.cloneIndex+++"$$";return fr(vt,nt),nt}var Ed=function($,re){var Se=$a[$.key],Ie=nr[Se];if(Ie instanceof pm)ke("q"),ke(Dc(re)),Ie.gState&&x.setGState(Ie.gState),ke($.matrix.toString()+" cm"),ke("/"+Se+" sh"),ke("Q");else if(Ie instanceof Gp){var We=new Ut(1,0,0,-1,0,Jl());$.matrix&&(We=We.multiply($.matrix||hs),Se=qi.call(Ie,$.key,$.boundingBox,$.xStep,$.yStep,We).id),ke("q"),ke("/Pattern cs"),ke("/"+Se+" scn"),Ie.gState&&x.setGState(Ie.gState),ke(re),ke("Q")}},Dc=function($){switch($){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Gr=x.moveTo=function($,re){return ke(I(R($))+" "+I(Z(re))+" m"),this},sa=x.lineTo=function($,re){return ke(I(R($))+" "+I(Z(re))+" l"),this},oi=x.curveTo=function($,re,Se,Ie,We,nt){return ke([I(R($)),I(Z(re)),I(R(Se)),I(Z(Ie)),I(R(We)),I(Z(nt)),"c"].join(" ")),this};x.__private__.line=x.line=function($,re,Se,Ie,We){if(isNaN($)||isNaN(re)||isNaN(Se)||isNaN(Ie)||!sr(We))throw new Error("Invalid arguments passed to jsPDF.line");return N===w.COMPAT?this.lines([[Se-$,Ie-re]],$,re,[1,1],We||"S"):this.lines([[Se-$,Ie-re]],$,re,[1,1]).stroke()},x.__private__.lines=x.lines=function($,re,Se,Ie,We,nt){var vt,$t,Gt,On,An,ar,Zr,ts,Os,Ca,Rs,go;if(typeof $=="number"&&(go=Se,Se=re,re=$,$=go),Ie=Ie||[1,1],nt=nt||!1,isNaN(re)||isNaN(Se)||!Array.isArray($)||!Array.isArray(Ie)||!sr(We)||typeof nt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Gr(re,Se),vt=Ie[0],$t=Ie[1],On=$.length,Ca=re,Rs=Se,Gt=0;Gt<On;Gt++)(An=$[Gt]).length===2?(Ca=An[0]*vt+Ca,Rs=An[1]*$t+Rs,sa(Ca,Rs)):(ar=An[0]*vt+Ca,Zr=An[1]*$t+Rs,ts=An[2]*vt+Ca,Os=An[3]*$t+Rs,Ca=An[4]*vt+Ca,Rs=An[5]*$t+Rs,oi(ar,Zr,ts,Os,Ca,Rs));return nt&&Vo(),Yl(We),this},x.path=function($){for(var re=0;re<$.length;re++){var Se=$[re],Ie=Se.c;switch(Se.op){case"m":Gr(Ie[0],Ie[1]);break;case"l":sa(Ie[0],Ie[1]);break;case"c":oi.apply(this,Ie);break;case"h":Vo()}}return this},x.__private__.rect=x.rect=function($,re,Se,Ie,We){if(isNaN($)||isNaN(re)||isNaN(Se)||isNaN(Ie)||!sr(We))throw new Error("Invalid arguments passed to jsPDF.rect");return N===w.COMPAT&&(Ie=-Ie),ke([I(R($)),I(Z(re)),I(R(Se)),I(R(Ie)),"re"].join(" ")),Yl(We),this},x.__private__.triangle=x.triangle=function($,re,Se,Ie,We,nt,vt){if(isNaN($)||isNaN(re)||isNaN(Se)||isNaN(Ie)||isNaN(We)||isNaN(nt)||!sr(vt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Se-$,Ie-re],[We-Se,nt-Ie],[$-We,re-nt]],$,re,[1,1],vt,!0),this},x.__private__.roundedRect=x.roundedRect=function($,re,Se,Ie,We,nt,vt){if(isNaN($)||isNaN(re)||isNaN(Se)||isNaN(Ie)||isNaN(We)||isNaN(nt)||!sr(vt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var $t=4/3*(Math.SQRT2-1);return We=Math.min(We,.5*Se),nt=Math.min(nt,.5*Ie),this.lines([[Se-2*We,0],[We*$t,0,We,nt-nt*$t,We,nt],[0,Ie-2*nt],[0,nt*$t,-We*$t,nt,-We,nt],[2*We-Se,0],[-We*$t,0,-We,-nt*$t,-We,-nt],[0,2*nt-Ie],[0,-nt*$t,We*$t,-nt,We,-nt]],$+We,re,[1,1],vt,!0),this},x.__private__.ellipse=x.ellipse=function($,re,Se,Ie,We){if(isNaN($)||isNaN(re)||isNaN(Se)||isNaN(Ie)||!sr(We))throw new Error("Invalid arguments passed to jsPDF.ellipse");var nt=4/3*(Math.SQRT2-1)*Se,vt=4/3*(Math.SQRT2-1)*Ie;return Gr($+Se,re),oi($+Se,re-vt,$+nt,re-Ie,$,re-Ie),oi($-nt,re-Ie,$-Se,re-vt,$-Se,re),oi($-Se,re+vt,$-nt,re+Ie,$,re+Ie),oi($+nt,re+Ie,$+Se,re+vt,$+Se,re),Yl(We),this},x.__private__.circle=x.circle=function($,re,Se,Ie){if(isNaN($)||isNaN(re)||isNaN(Se)||!sr(Ie))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse($,re,Se,Se,Ie)},x.setFont=function($,re,Se){return Se&&(re=M(re,Se)),Tn=$i($,re,{disableWarning:!1}),this};var Ic=x.__private__.getFont=x.getFont=function(){return gr[$i.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var $,re,Se={};for($ in ur)if(ur.hasOwnProperty($))for(re in Se[$]=[],ur[$])ur[$].hasOwnProperty(re)&&Se[$].push(re);return Se},x.addFont=function($,re,Se,Ie,We){var nt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&nt.indexOf(arguments[3])!==-1?We=arguments[3]:arguments[3]&&nt.indexOf(arguments[3])==-1&&(Se=M(Se,Ie)),We=We||"Identity-H",$o.call(this,$,re,Se,We)};var Rc,Od=e.lineWidth||.200025,Uo=x.__private__.getLineWidth=x.getLineWidth=function(){return Od},Fc=x.__private__.setLineWidth=x.setLineWidth=function($){return Od=$,ke(I(R($))+" w"),this};x.__private__.setLineDash=Sn.API.setLineDash=Sn.API.setLineDashPattern=function($,re){if($=$||[],re=re||0,isNaN(re)||!Array.isArray($))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return $=$.map((function(Se){return I(R(Se))})).join(" "),re=I(R(re)),ke("["+$+"] "+re+" d"),this};var $c=x.__private__.getLineHeight=x.getLineHeight=function(){return yt*Rc};x.__private__.getLineHeight=x.getLineHeight=function(){return yt*Rc};var Gn=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function($){return typeof($=$||1.15)=="number"&&(Rc=$),this},mo=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return Rc};Gn(e.lineHeight);var ps=x.__private__.getHorizontalCoordinate=function($){return R($)},Sa=x.__private__.getVerticalCoordinate=function($){return N===w.ADVANCED?$:Oe[te].mediaBox.topRightY-Oe[te].mediaBox.bottomLeftY-R($)},Ou=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function($){return I(ps($))},po=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function($){return I(Sa($))},Pa=e.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return wi(Pa)},x.__private__.setStrokeColor=x.setDrawColor=function($,re,Se,Ie){return Pa=Us({ch1:$,ch2:re,ch3:Se,ch4:Ie,pdfColorType:"draw",precision:2}),ke(Pa),this};var Md=e.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return wi(Md)},x.__private__.setFillColor=x.setFillColor=function($,re,Se,Ie){return Md=Us({ch1:$,ch2:re,ch3:Se,ch4:Ie,pdfColorType:"fill",precision:2}),ke(Md),this};var Es=e.textColor||"0 g",Xl=x.__private__.getTextColor=x.getTextColor=function(){return wi(Es)};x.__private__.setTextColor=x.setTextColor=function($,re,Se,Ie){return Es=Us({ch1:$,ch2:re,ch3:Se,ch4:Ie,pdfColorType:"text",precision:3}),this};var Ql=e.charSpace,gl=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(Ql||0)};x.__private__.setCharSpace=x.setCharSpace=function($){if(isNaN($))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ql=$,this};var Mu=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function($){var re=x.CapJoinStyles[$];if(re===void 0)throw new Error("Line cap style of '"+$+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Mu=re,ke(re+" J"),this};var Aa=0;x.__private__.setLineJoin=x.setLineJoin=function($){var re=x.CapJoinStyles[$];if(re===void 0)throw new Error("Line join style of '"+$+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Aa=re,ke(re+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function($){if($=$||0,isNaN($))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ke(I(R($))+" M"),this},x.GState=d1,x.setGState=function($){($=typeof $=="string"?kr[rs[$]]:Ld(null,$)).equals(Ts)||(ke("/"+$.id+" gs"),Ts=$)};var Ld=function($,re){if(!$||!rs[$]){var Se=!1;for(var Ie in kr)if(kr.hasOwnProperty(Ie)&&kr[Ie].equals(re)){Se=!0;break}if(Se)re=kr[Ie];else{var We="GS"+(Object.keys(kr).length+1).toString(10);kr[We]=re,re.id=We}return $&&(rs[$]=re.id),ot.publish("addGState",re),re}};x.addGState=function($,re){return Ld($,re),this},x.saveGraphicsState=function(){return ke("q"),Nr.push({key:Tn,size:yt,color:Es}),this},x.restoreGraphicsState=function(){ke("Q");var $=Nr.pop();return Tn=$.key,yt=$.size,Es=$.color,Ts=null,this},x.setCurrentTransformationMatrix=function($){return ke($.toString()+" cm"),this},x.comment=function($){return ke("#"+$),this};var xo=function($,re){var Se=$||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Se},set:function(nt){isNaN(nt)||(Se=parseFloat(nt))}});var Ie=re||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ie},set:function(nt){isNaN(nt)||(Ie=parseFloat(nt))}});var We="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return We},set:function(nt){We=nt.toString()}}),this},qa=function($,re,Se,Ie){xo.call(this,$,re),this.type="rect";var We=Se||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return We},set:function(vt){isNaN(vt)||(We=parseFloat(vt))}});var nt=Ie||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return nt},set:function(vt){isNaN(vt)||(nt=parseFloat(vt))}}),this},Bc=function(){this.page=Br,this.currentPage=te,this.pages=Ue.slice(0),this.pagesContext=Oe.slice(0),this.x=Vs,this.y=Qn,this.matrix=Na,this.width=Ho(te),this.height=Jl(te),this.outputDestination=dt,this.id="",this.objectNumber=-1};Bc.prototype.restore=function(){Br=this.page,te=this.currentPage,Oe=this.pagesContext,Ue=this.pages,Vs=this.x,Qn=this.y,Na=this.matrix,Id(te,this.width),Iu(te,this.height),dt=this.outputDestination};var Lu=function($,re,Se,Ie,We){ss.push(new Bc),Br=te=0,Ue=[],Vs=$,Qn=re,Na=We,Hs([Se,Ie])},Du=function($){if(Kn[$])ss.pop().restore();else{var re=new Bc,Se="Xo"+(Object.keys(on).length+1).toString(10);re.id=Se,Kn[$]=Se,on[Se]=re,ot.publish("addFormObject",re),ss.pop().restore()}};for(var Dd in x.beginFormObject=function($,re,Se,Ie,We){return Lu($,re,Se,Ie,We),this},x.endFormObject=function($){return Du($),this},x.doFormObject=function($,re){var Se=on[Kn[$]];return ke("q"),ke(re.toString()+" cm"),ke("/"+Se.id+" Do"),ke("Q"),this},x.getFormObject=function($){var re=on[Kn[$]];return{x:re.x,y:re.y,width:re.width,height:re.height,matrix:re.matrix}},x.save=function($,re){return $=$||"generated.pdf",(re=re||{}).returnPromise=re.returnPromise||!1,re.returnPromise===!1?(hm(qo(Bi()),$),typeof hm.unload=="function"&&Cn.setTimeout&&setTimeout(hm.unload,911),this):new Promise((function(Se,Ie){try{var We=hm(qo(Bi()),$);typeof hm.unload=="function"&&Cn.setTimeout&&setTimeout(hm.unload,911),Se(We)}catch(nt){Ie(nt.message)}}))},Sn.API)Sn.API.hasOwnProperty(Dd)&&(Dd==="events"&&Sn.API.events.length?(function($,re){var Se,Ie,We;for(We=re.length-1;We!==-1;We--)Se=re[We][0],Ie=re[We][1],$.subscribe.apply($,[Se].concat(typeof Ie=="function"?[Ie]:Ie))})(ot,Sn.API.events):x[Dd]=Sn.API[Dd]);var Ho=x.getPageWidth=function($){return(Oe[$=$||te].mediaBox.topRightX-Oe[$].mediaBox.bottomLeftX)/It},Id=x.setPageWidth=function($,re){Oe[$].mediaBox.topRightX=re*It+Oe[$].mediaBox.bottomLeftX},Jl=x.getPageHeight=function($){return(Oe[$=$||te].mediaBox.topRightY-Oe[$].mediaBox.bottomLeftY)/It},Iu=x.setPageHeight=function($,re){Oe[$].mediaBox.topRightY=re*It+Oe[$].mediaBox.bottomLeftY};return x.internal={pdfEscape:ra,getStyle:Td,getFont:Ic,getFontSize:St,getCharSpace:gl,getTextColor:Xl,getLineHeight:$c,getLineHeightFactor:mo,getLineWidth:Uo,write:Bt,getHorizontalCoordinate:ps,getVerticalCoordinate:Sa,getCoordinateString:Ou,getVerticalCoordinateString:po,collections:{},newObject:wn,newAdditionalObject:_s,newObjectDeferred:Et,newObjectDeferredBegin:fs,getFilters:ka,putStream:ai,events:ot,scaleFactor:It,pageSize:{getWidth:function(){return Ho(te)},setWidth:function($){Id(te,$)},getHeight:function(){return Jl(te)},setHeight:function($){Iu(te,$)}},encryptionOptions:u,encryption:qr,getEncryptor:fo,output:zo,getNumberOfPages:ms,pages:Ue,out:ke,f2:W,f3:D,getPageInfo:Ni,getPageInfoByObjId:xn,getCurrentPageInfo:gn,getPDFVersion:y,Point:xo,Rectangle:qa,Matrix:Ut,hasHotfix:xl},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return Ho(te)},set:function($){Id(te,$)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return Jl(te)},set:function($){Iu(te,$)},enumerable:!0,configurable:!0}),_n.call(x,mt),Tn="F1",Eu(a,r),ot.publish("initialized"),x}qp.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},qp.prototype.toHexString=function(e){return e.split("").map((function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)})).join("")},qp.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},qp.prototype.processOwnerPassword=function(e,t){return b4(y4(t).substr(0,5),e)},qp.prototype.encryptor=function(e,t){var r=y4(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(s){return b4(r,s)}},d1.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Qr(e)!==Qr(this))return!1;var s=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;s++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&s--;return s===0},Sn.API={events:[]},Sn.version="2.5.2";var Qs=Sn.API,SA=1,ip=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Lp=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},qn=function(e){return e.toFixed(2)},Qh=function(e){return e.toFixed(5)};Qs.__acroform__={};var hl=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},R6=function(e){return e*SA},Xd=function(e){var t=new hU,r=rn.internal.getHeight(e)||0,s=rn.internal.getWidth(e)||0;return t.BBox=[0,0,Number(qn(s)),Number(qn(r))],t},$fe=Qs.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},Bfe=Qs.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},qfe=Qs.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},va=Qs.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return qfe(e,t-1)},ya=Qs.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return $fe(e,t-1)},ba=Qs.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Bfe(e,t-1)},zfe=Qs.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,s=t.internal.getVerticalCoordinate,a=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=s(i+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=s(i)||0,[Number(qn(c.lowerLeft_X)),Number(qn(c.lowerLeft_Y)),Number(qn(c.upperRight_X)),Number(qn(c.upperRight_Y))]},Vfe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,s=j4(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+qn(s.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Xd(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},j4=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,s={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map((function(D){return D.split(`
`)})):a.map((function(D){return[D]}));var i=r,o=rn.internal.getHeight(e)||0;o=o<0?-o:o;var l=rn.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(D,R,z){if(D+1<a.length){var Z=R+" "+a[D+1][0];return ub(Z,e,z).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var d,u,h=ub("3",e,i).height,g=e.multiline?o-i:(o-h)/2,x=g+=2,b=0,y=0,v=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+ub(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var j="",w=0,N=0;N<a.length;N++)if(a.hasOwnProperty(N)){var A=!1;if(a[N].length!==1&&v!==a[N].length-1){if((h+2)*(w+2)+2>o)continue e;j+=a[N][v],A=!0,y=N,N--}else{j=(j+=a[N][v]+" ").substr(j.length-1)==" "?j.substr(0,j.length-1):j;var C=parseInt(N),M=c(C,j,i),I=N>=a.length-1;if(M&&!I){j+=" ",v=0;continue}if(M||I){if(I)y=C;else if(e.multiline&&(h+2)*(w+2)+2>o)continue e}else{if(!e.multiline||(h+2)*(w+2)+2>o)continue e;y=C}}for(var F="",U=b;U<=y;U++){var W=a[U];if(e.multiline){if(U===y){F+=W[v]+" ",v=(v+1)%W.length;continue}if(U===b){F+=W[W.length-1]+" ";continue}}F+=W[0]+" "}switch(F=F.substr(F.length-1)==" "?F.substr(0,F.length-1):F,u=ub(F,e,i).width,e.textAlign){case"right":d=l-u-2;break;case"center":d=(l-u)/2;break;case"left":default:d=2}t+=qn(d)+" "+qn(x)+` Td
`,t+="("+ip(F)+`) Tj
`,t+=-qn(d)+` 0 Td
`,x=-(i+2),u=0,b=A?y:y+1,w++,j=""}break}return s.text=t,s.fontSize=i,s},ub=function(e,t,r){var s=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},Ufe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Hfe=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find((function(s){return s.type===r.type&&s.object===r.object}))===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},Wfe=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var s=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),Qr(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[s]}},Kfe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(wd.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Ufe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");SA=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new fU,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",(function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)})),e.internal.events.subscribe("buildDocument",(function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in s)if(s.hasOwnProperty(a)){var i=s[a];i.objId=void 0,i.hasAnnotation&&Hfe(i,r)}})(e)})),e.internal.events.subscribe("putCatalog",(function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)})),e.internal.events.subscribe("postPutPages",(function(r){(function(s,a){var i=!s;for(var o in s||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(o)){var l=s[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=zfe(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=rn.createDefaultAppearanceStream(l),Qr(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var u=Vfe(l);c.push({key:"AP",value:"<</N "+u+">>"}),a.internal.acroformPlugin.xForms.push(u)}if(l.appearanceStreamContent){var h="";for(var g in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(g)){var x=l.appearanceStreamContent[g];if(h+="/"+g+" ",h+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var o in x)if(x.hasOwnProperty(o)){var b=x[o];typeof b=="function"&&(b=b.call(a,l)),h+="/"+o+" "+b+" ",a.internal.acroformPlugin.xForms.indexOf(b)>=0||a.internal.acroformPlugin.xForms.push(b)}}else typeof(b=x)=="function"&&(b=b.call(a,l)),h+="/"+o+" "+b,a.internal.acroformPlugin.xForms.indexOf(b)>=0||a.internal.acroformPlugin.xForms.push(b);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}i&&Wfe(a.internal.acroformPlugin.xForms,a)})(r,e)})),e.internal.acroformPlugin.isInitialized=!0}},uU=Qs.__acroform__.arrayToPdfArray=function(e,t,r){var s=function(o){return o};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),Qr(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(s=r.internal.getEncryptor(t)),a+="("+ip(s(e[i].toString()))+")"):a+=e[i].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},s_=function(e,t,r){var s=function(a){return a};return t!==void 0&&r&&(s=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+ip(s(e))+")"},iu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};iu.prototype.toString=function(){return this.objId+" 0 R"},iu.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},iu.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter((function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"}));for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var s=t[r],a=this[s];a&&(Array.isArray(a)?e.push({key:s,value:uU(a,this.objId,this.scope)}):a instanceof iu?(a.scope=this.scope,e.push({key:s,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:s,value:a}))}return e};var hU=function(){iu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};hl(hU,iu);var fU=function(){iu.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(s){return s};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+ip(r(e))+")"}},set:function(r){e=r}})};hl(fU,iu);var wd=function e(){iu.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute F supplied.');t=j}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!va(t,3)},set:function(j){j?this.F=ya(t,3):this.F=ba(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute Ff supplied.');r=j}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(j){s=j!==void 0?j:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(j){s[0]=j}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(j){s[1]=j}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(j){s[2]=j}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(j){s[3]=j}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(j){switch(j){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=j;break;default:throw new Error('Invalid value "'+j+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof u1)return;i="FieldObject"+e.FieldNum++}var j=function(w){return w};return this.scope&&(j=this.scope.internal.getEncryptor(this.objId)),"("+ip(j(i))+")"},set:function(j){i=j.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(j){i=j}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(j){o=j}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(j){l=j}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(j){c=j}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/SA:d},set:function(j){d=j}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(j){u=j}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof u1||this instanceof Lm))return s_(h,this.objId,this.scope)},set:function(j){j=j.toString(),h=j}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof gi?g:s_(g,this.objId,this.scope)},set:function(j){j=j.toString(),g=this instanceof gi?j:j.substr(0,1)==="("?Lp(j.substr(1,j.length-2)):Lp(j)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof gi?Lp(g.substr(1,g.length-1)):g},set:function(j){j=j.toString(),g=this instanceof gi?"/"+j:j}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(j){this.V=j}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof gi?x:s_(x,this.objId,this.scope)},set:function(j){j=j.toString(),x=this instanceof gi?j:j.substr(0,1)==="("?Lp(j.substr(1,j.length-2)):Lp(j)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof gi?Lp(x.substr(1,x.length-1)):x},set:function(j){j=j.toString(),x=this instanceof gi?"/"+j:j}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(j){j=!!j,y=j}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(j){b=j}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,1)},set:function(j){j?this.Ff=ya(this.Ff,1):this.Ff=ba(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,2)},set:function(j){j?this.Ff=ya(this.Ff,2):this.Ff=ba(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,3)},set:function(j){j?this.Ff=ya(this.Ff,3):this.Ff=ba(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(j){if([0,1,2].indexOf(j)===-1)throw new Error('Invalid value "'+j+'" for attribute Q supplied.');v=j}}),Object.defineProperty(this,"textAlign",{get:function(){var j;switch(v){case 0:default:j="left";break;case 1:j="center";break;case 2:j="right"}return j},configurable:!0,enumerable:!0,set:function(j){switch(j){case"right":case 2:v=2;break;case"center":case 1:v=1;break;case"left":case 0:default:v=0}}})};hl(wd,iu);var sx=function(){wd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return uU(t,this.objId,this.scope)},set:function(r){var s,a;a=[],typeof(s=r)=="string"&&(a=(function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d})(s,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,s){for(s=s||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,18)},set:function(r){r?this.Ff=ya(this.Ff,18):this.Ff=ba(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=ya(this.Ff,19):this.Ff=ba(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,20)},set:function(r){r?(this.Ff=ya(this.Ff,20),t.sort()):this.Ff=ba(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,22)},set:function(r){r?this.Ff=ya(this.Ff,22):this.Ff=ba(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,23)},set:function(r){r?this.Ff=ya(this.Ff,23):this.Ff=ba(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,27)},set:function(r){r?this.Ff=ya(this.Ff,27):this.Ff=ba(this.Ff,27)}}),this.hasAppearanceStream=!1};hl(sx,wd);var ax=function(){sx.call(this),this.fontName="helvetica",this.combo=!1};hl(ax,sx);var ix=function(){ax.call(this),this.combo=!0};hl(ix,ax);var Ib=function(){ix.call(this),this.edit=!0};hl(Ib,ix);var gi=function(){wd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,15)},set:function(r){r?this.Ff=ya(this.Ff,15):this.Ff=ba(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,16)},set:function(r){r?this.Ff=ya(this.Ff,16):this.Ff=ba(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,17)},set:function(r){r?this.Ff=ya(this.Ff,17):this.Ff=ba(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,26)},set:function(r){r?this.Ff=ya(this.Ff,26):this.Ff=ba(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var s,a=[];for(s in a.push("<<"),t)a.push("/"+s+" ("+ip(r(t[s]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Qr(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};hl(gi,wd);var Rb=function(){gi.call(this),this.pushButton=!0};hl(Rb,gi);var ox=function(){gi.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};hl(ox,gi);var u1=function(){var e,t;wd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),s)o.push("/"+i+" ("+ip(a(s[i]))+")");return o.push(">>"),o.join(`
`)},set:function(a){Qr(a)==="object"&&(s=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(a){typeof a=="string"&&(s.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=rn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};hl(u1,wd),ox.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},ox.prototype.createOption=function(e){var t=new u1;return t.Parent=this,t.optionName=e,this.Kids.push(t),Gfe.call(this.scope,t),t};var Fb=function(){gi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=rn.CheckBox.createAppearanceStream()};hl(Fb,gi);var Lm=function(){wd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,13)},set:function(t){t?this.Ff=ya(this.Ff,13):this.Ff=ba(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,21)},set:function(t){t?this.Ff=ya(this.Ff,21):this.Ff=ba(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,23)},set:function(t){t?this.Ff=ya(this.Ff,23):this.Ff=ba(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,24)},set:function(t){t?this.Ff=ya(this.Ff,24):this.Ff=ba(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,25)},set:function(t){t?this.Ff=ya(this.Ff,25):this.Ff=ba(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,26)},set:function(t){t?this.Ff=ya(this.Ff,26):this.Ff=ba(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};hl(Lm,wd);var $b=function(){Lm.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,14)},set:function(e){e?this.Ff=ya(this.Ff,14):this.Ff=ba(this.Ff,14)}}),this.password=!0};hl($b,Lm);var rn={CheckBox:{createAppearanceStream:function(){return{N:{On:rn.CheckBox.YesNormal},D:{On:rn.CheckBox.YesPushDown,Off:rn.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Xd(e);t.scope=e.scope;var r=[],s=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=j4(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+qn(rn.internal.getWidth(e))+" "+qn(rn.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+s+" "+qn(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Xd(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),a=[],i=rn.internal.getHeight(e),o=rn.internal.getWidth(e),l=j4(e,e.caption);return a.push("1 g"),a.push("0 0 "+qn(o)+" "+qn(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+qn(o-1)+" "+qn(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+qn(l.fontSize)+" Tf "+s),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Xd(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+qn(rn.internal.getWidth(e))+" "+qn(rn.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:rn.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=rn.RadioButton.Circle.YesNormal,t.D[e]=rn.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Xd(e);t.scope=e.scope;var r=[],s=rn.internal.getWidth(e)<=rn.internal.getHeight(e)?rn.internal.getWidth(e)/4:rn.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var a=rn.internal.Bezier_C,i=Number((s*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Qh(rn.internal.getWidth(e)/2)+" "+Qh(rn.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Xd(e);t.scope=e.scope;var r=[],s=rn.internal.getWidth(e)<=rn.internal.getHeight(e)?rn.internal.getWidth(e)/4:rn.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),i=Number((a*rn.internal.Bezier_C).toFixed(5)),o=Number((s*rn.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Qh(rn.internal.getWidth(e)/2)+" "+Qh(rn.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Qh(rn.internal.getWidth(e)/2)+" "+Qh(rn.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),r.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),r.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),r.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Xd(e);t.scope=e.scope;var r=[],s=rn.internal.getWidth(e)<=rn.internal.getHeight(e)?rn.internal.getWidth(e)/4:rn.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),i=Number((a*rn.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Qh(rn.internal.getWidth(e)/2)+" "+Qh(rn.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:rn.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=rn.RadioButton.Cross.YesNormal,t.D[e]=rn.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Xd(e);t.scope=e.scope;var r=[],s=rn.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+qn(rn.internal.getWidth(e)-2)+" "+qn(rn.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(qn(s.x1.x)+" "+qn(s.x1.y)+" m"),r.push(qn(s.x2.x)+" "+qn(s.x2.y)+" l"),r.push(qn(s.x4.x)+" "+qn(s.x4.y)+" m"),r.push(qn(s.x3.x)+" "+qn(s.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Xd(e);t.scope=e.scope;var r=rn.internal.calculateCross(e),s=[];return s.push("0.749023 g"),s.push("0 0 "+qn(rn.internal.getWidth(e))+" "+qn(rn.internal.getHeight(e))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+qn(rn.internal.getWidth(e)-2)+" "+qn(rn.internal.getHeight(e)-2)+" re"),s.push("W"),s.push("n"),s.push(qn(r.x1.x)+" "+qn(r.x1.y)+" m"),s.push(qn(r.x2.x)+" "+qn(r.x2.y)+" l"),s.push(qn(r.x4.x)+" "+qn(r.x4.y)+" m"),s.push(qn(r.x3.x)+" "+qn(r.x3.y)+" l"),s.push("s"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=Xd(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+qn(rn.internal.getWidth(e))+" "+qn(rn.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};rn.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=rn.internal.getWidth(e),r=rn.internal.getHeight(e),s=Math.min(t,r);return{x1:{x:(t-s)/2,y:(r-s)/2+s},x2:{x:(t-s)/2+s,y:(r-s)/2},x3:{x:(t-s)/2,y:(r-s)/2},x4:{x:(t-s)/2+s,y:(r-s)/2+s}}}},rn.internal.getWidth=function(e){var t=0;return Qr(e)==="object"&&(t=R6(e.Rect[2])),t},rn.internal.getHeight=function(e){var t=0;return Qr(e)==="object"&&(t=R6(e.Rect[3])),t};var Gfe=Qs.addField=function(e){if(Kfe(this,e),!(e instanceof wd))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Qs.AcroFormChoiceField=sx,Qs.AcroFormListBox=ax,Qs.AcroFormComboBox=ix,Qs.AcroFormEditBox=Ib,Qs.AcroFormButton=gi,Qs.AcroFormPushButton=Rb,Qs.AcroFormRadioButton=ox,Qs.AcroFormCheckBox=Fb,Qs.AcroFormTextField=Lm,Qs.AcroFormPasswordField=$b,Qs.AcroFormAppearance=rn,Qs.AcroForm={ChoiceField:sx,ListBox:ax,ComboBox:ix,EditBox:Ib,Button:gi,PushButton:Rb,RadioButton:ox,CheckBox:Fb,TextField:Lm,PasswordField:$b,Appearance:rn},Sn.AcroForm={ChoiceField:sx,ListBox:ax,ComboBox:ix,EditBox:Ib,Button:gi,PushButton:Rb,RadioButton:ox,CheckBox:Fb,TextField:Lm,PasswordField:$b,Appearance:rn};Sn.AcroForm;function mU(e){return e.reduce((function(t,r,s){return t[r]=s,t}),{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=e.__addimage__.getImageFileTypeByImageData=function(D,R){var z,Z,se,J,Q,H=t;if((R=R||t)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(M(D))for(Q in r)for(se=r[Q],z=0;z<se.length;z+=1){for(J=!0,Z=0;Z<se[z].length;Z+=1)if(se[z][Z]!==void 0&&se[z][Z]!==D[Z]){J=!1;break}if(J===!0){H=Q;break}}else for(Q in r)for(se=r[Q],z=0;z<se.length;z+=1){for(J=!0,Z=0;Z<se[z].length;Z+=1)if(se[z][Z]!==void 0&&se[z][Z]!==D.charCodeAt(Z)){J=!1;break}if(J===!0){H=Q;break}}return H===t&&R!==t&&(H=R),H},a=function D(R){for(var z=this.internal.write,Z=this.internal.putStream,se=(0,this.internal.getFilters)();se.indexOf("FlateEncode")!==-1;)se.splice(se.indexOf("FlateEncode"),1);R.objectId=this.internal.newObject();var J=[];if(J.push({key:"Type",value:"/XObject"}),J.push({key:"Subtype",value:"/Image"}),J.push({key:"Width",value:R.width}),J.push({key:"Height",value:R.height}),R.colorSpace===v.INDEXED?J.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(R.palette.length/3-1)+" "+("sMask"in R&&R.sMask!==void 0?R.objectId+2:R.objectId+1)+" 0 R]"}):(J.push({key:"ColorSpace",value:"/"+R.colorSpace}),R.colorSpace===v.DEVICE_CMYK&&J.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),J.push({key:"BitsPerComponent",value:R.bitsPerComponent}),"decodeParameters"in R&&R.decodeParameters!==void 0&&J.push({key:"DecodeParms",value:"<<"+R.decodeParameters+">>"}),"transparency"in R&&Array.isArray(R.transparency)){for(var Q="",H=0,ne=R.transparency.length;H<ne;H++)Q+=R.transparency[H]+" "+R.transparency[H]+" ";J.push({key:"Mask",value:"["+Q+"]"})}R.sMask!==void 0&&J.push({key:"SMask",value:R.objectId+1+" 0 R"});var ue=R.filter!==void 0?["/"+R.filter]:void 0;if(Z({data:R.data,additionalKeyValues:J,alreadyAppliedFilters:ue,objectId:R.objectId}),z("endobj"),"sMask"in R&&R.sMask!==void 0){var ae="/Predictor "+R.predictor+" /Colors 1 /BitsPerComponent "+R.bitsPerComponent+" /Columns "+R.width,G={width:R.width,height:R.height,colorSpace:"DeviceGray",bitsPerComponent:R.bitsPerComponent,decodeParameters:ae,data:R.sMask};"filter"in R&&(G.filter=R.filter),D.call(this,G)}if(R.colorSpace===v.INDEXED){var te=this.internal.newObject();Z({data:F(new Uint8Array(R.palette)),objectId:te}),z("endobj")}},i=function(){var D=this.internal.collections.addImage_images;for(var R in D)a.call(this,D[R])},o=function(){var D,R=this.internal.collections.addImage_images,z=this.internal.write;for(var Z in R)z("/I"+(D=R[Z]).index,D.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var D=this.internal.collections.addImage_images;return l.call(this),D},d=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(D){return typeof e["process"+D.toUpperCase()]=="function"},h=function(D){return Qr(D)==="object"&&D.nodeType===1},g=function(D,R){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var z=""+D.getAttribute("src");if(z.indexOf("data:image/")===0)return E0(unescape(z).split("base64,").pop());var Z=e.loadFile(z,!0);if(Z!==void 0)return Z}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var se;switch(R){case"PNG":se="image/png";break;case"WEBP":se="image/webp";break;case"JPEG":case"JPG":default:se="image/jpeg"}return E0(D.toDataURL(se,1).split("base64,").pop())}},x=function(D){var R=this.internal.collections.addImage_images;if(R){for(var z in R)if(D===R[z].alias)return R[z]}},b=function(D,R,z){return D||R||(D=-96,R=-96),D<0&&(D=-1*z.width*72/D/this.internal.scaleFactor),R<0&&(R=-1*z.height*72/R/this.internal.scaleFactor),D===0&&(D=R*z.width/z.height),R===0&&(R=D*z.height/z.width),[D,R]},y=function(D,R,z,Z,se,J){var Q=b.call(this,z,Z,se),H=this.internal.getCoordinateString,ne=this.internal.getVerticalCoordinateString,ue=c.call(this);if(z=Q[0],Z=Q[1],ue[se.index]=se,J){J*=Math.PI/180;var ae=Math.cos(J),G=Math.sin(J),te=function(be){return be.toFixed(4)},fe=[te(ae),te(G),te(-1*G),te(ae),0,0,"cm"]}this.internal.write("q"),J?(this.internal.write([1,"0","0",1,H(D),ne(R+Z),"cm"].join(" ")),this.internal.write(fe.join(" ")),this.internal.write([H(z),"0","0",H(Z),"0","0","cm"].join(" "))):this.internal.write([H(z),"0","0",H(Z),H(D),ne(R+Z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+se.index+" Do"),this.internal.write("Q")},v=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var j=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(D){var R,z,Z=0;if(typeof D=="string")for(z=D.length,R=0;R<z;R++)Z=(Z<<5)-Z+D.charCodeAt(R),Z|=0;else if(M(D))for(z=D.byteLength/2,R=0;R<z;R++)Z=(Z<<5)-Z+D[R],Z|=0;return Z},N=e.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var R=!0;return D.length===0&&(R=!1),D.length%4!=0&&(R=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(R=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(R=!1),R},A=e.__addimage__.extractImageFromDataUrl=function(D){var R=(D=D||"").split("base64,"),z=null;if(R.length===2){var Z=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(R[0]);Array.isArray(Z)&&(z={mimeType:Z[1],charset:Z[2],data:R[1]})}return z},C=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(D){return C()&&D instanceof ArrayBuffer};var M=e.__addimage__.isArrayBufferView=function(D){return C()&&typeof Uint32Array<"u"&&(D instanceof Int8Array||D instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array)},I=e.__addimage__.binaryStringToUint8Array=function(D){for(var R=D.length,z=new Uint8Array(R),Z=0;Z<R;Z++)z[Z]=D.charCodeAt(Z);return z},F=e.__addimage__.arrayBufferToBinaryString=function(D){for(var R="",z=M(D)?D:new Uint8Array(D),Z=0;Z<z.length;Z+=8192)R+=String.fromCharCode.apply(null,z.subarray(Z,Z+8192));return R};e.addImage=function(){var D,R,z,Z,se,J,Q,H,ne;if(typeof arguments[1]=="number"?(R=t,z=arguments[1],Z=arguments[2],se=arguments[3],J=arguments[4],Q=arguments[5],H=arguments[6],ne=arguments[7]):(R=arguments[1],z=arguments[2],Z=arguments[3],se=arguments[4],J=arguments[5],Q=arguments[6],H=arguments[7],ne=arguments[8]),Qr(D=arguments[0])==="object"&&!h(D)&&"imageData"in D){var ue=D;D=ue.imageData,R=ue.format||R||t,z=ue.x||z||0,Z=ue.y||Z||0,se=ue.w||ue.width||se,J=ue.h||ue.height||J,Q=ue.alias||Q,H=ue.compression||H,ne=ue.rotation||ue.angle||ne}var ae=this.internal.getFilters();if(H===void 0&&ae.indexOf("FlateEncode")!==-1&&(H="SLOW"),isNaN(z)||isNaN(Z))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var G=U.call(this,D,R,Q,H);return y.call(this,z,Z,se,J,G,ne),this};var U=function(D,R,z,Z){var se,J,Q;if(typeof D=="string"&&s(D)===t){D=unescape(D);var H=W(D,!1);(H!==""||(H=e.loadFile(D,!0))!==void 0)&&(D=H)}if(h(D)&&(D=g(D,R)),R=s(D,R),!u(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(((Q=z)==null||Q.length===0)&&(z=(function(ne){return typeof ne=="string"||M(ne)?w(ne):M(ne.data)?w(ne.data):null})(D)),(se=x.call(this,z))||(C()&&(D instanceof Uint8Array||R==="RGBA"||(J=D,D=I(D))),se=this["process"+R.toUpperCase()](D,d.call(this),z,(function(ne){return ne&&typeof ne=="string"&&(ne=ne.toUpperCase()),ne in e.image_compression?ne:j.NONE})(Z),J)),!se)throw new Error("An unknown error occurred whilst processing the image.");return se},W=e.__addimage__.convertBase64ToBinaryString=function(D,R){var z;R=typeof R!="boolean"||R;var Z,se="";if(typeof D=="string"){Z=(z=A(D))!==null?z.data:D;try{se=E0(Z)}catch(J){if(R)throw N(Z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+J.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return se};e.getImageProperties=function(D){var R,z,Z="";if(h(D)&&(D=g(D)),typeof D=="string"&&s(D)===t&&((Z=W(D,!1))===""&&(Z=e.loadFile(D)||""),D=Z),z=s(D),!u(z))throw new Error("addImage does not support files of type '"+z+"', please ensure that a plugin for '"+z+"' support is added.");if(!C()||D instanceof Uint8Array||(D=I(D)),!(R=this["process"+z.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return R.fileType=z,R}})(Sn.API),(function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Sn.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var s,a,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,u=!1,h=0;h<d.length&&!u;h++)switch((s=d[h]).type){case"link":(t(s.options.url)||t(s.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var g=0;g<d.length;g++){s=d[g];var x=this.internal.pdfEscape,b=this.internal.getEncryptor(r.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),j=this.internal.getEncryptor(y.objId),w=s.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(s.bounds.x)+" "+l(s.bounds.y+s.bounds.h)+" "+o(s.bounds.x+s.bounds.w)+" "+l(s.bounds.y)+"] ")+"/Contents ("+x(j(s.contents))+")",i+=" /Popup "+v.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+x(j(w))+") >>",y.content=i;var N=y.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(s.bounds.x+30)+" "+l(s.bounds.y+s.bounds.h)+" "+o(s.bounds.x+s.bounds.w+30)+" "+l(s.bounds.y)+"] ")+" /Parent "+N,s.open&&(i+=" /Open true"),i+=" >>",v.content=i,this.internal.write(y.objId,"0 R",v.objId,"0 R");break;case"freetext":a="/Rect ["+o(s.bounds.x)+" "+l(s.bounds.y)+" "+o(s.bounds.x+s.bounds.w)+" "+l(s.bounds.y+s.bounds.h)+"] ";var A=s.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+x(b(s.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+A+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(s.options.name){var C=this.annotations._nameMap[s.options.name];s.options.pageNumber=C.page,s.options.top=C.y}else s.options.top||(s.options.top=0);if(a="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",i="",s.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+x(b(s.options.url))+") >>";else if(s.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,i+=" /FitV "+s.options.left+"]";break;case"XYZ":default:var M=l(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),i+=" /XYZ "+s.options.left+" "+M+" "+s.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var s=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":s.pageContext.annotations.push(r)}},e.link=function(r,s,a,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:d(s),w:c(r+a),h:d(s+i)},options:o,type:"link"})},e.textWithLink=function(r,s,a,i){var o,l,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var u=this.splitTextToSize(r,l).length;o=Math.ceil(d*u)}else l=c,o=d;return this.text(r,s,a,i),a+=.2*d,i.align==="center"&&(s-=c/2),i.align==="right"&&(s-=c),this.link(s,a-d,l,o,i),c},e.getTextWidth=function(r){var s=this.internal.getFontSize();return this.getStringUnitWidth(r)*s/this.internal.scaleFactor}})(Sn.API),(function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(y){return t[y.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},l=e.__arabicParser__.isArabicEndLetter=function(y){return o(y)&&i(y)&&t[y.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(y){return o(y)&&a.indexOf(y.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return o(y)&&i(y)&&t[y.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(y){return o(y)&&i(y)&&t[y.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(y){return o(y)&&i(y)&&t[y.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(y){return o(y)&&i(y)&&t[y.charCodeAt(0)].length==4},h=e.__arabicParser__.resolveLigatures=function(y){var v=0,j=r,w="",N=0;for(v=0;v<y.length;v+=1)j[y.charCodeAt(v)]!==void 0?(N++,typeof(j=j[y.charCodeAt(v)])=="number"&&(w+=String.fromCharCode(j),j=r,N=0),v===y.length-1&&(j=r,w+=y.charAt(v-(N-1)),v-=N-1,N=0)):(j=r,w+=y.charAt(v-N),v-=N,N=0);return w};e.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&s[y.charCodeAt(0)]!==void 0};var g=e.__arabicParser__.getCorrectForm=function(y,v,j){return o(y)?i(y)===!1?-1:!d(y)||!o(v)&&!o(j)||!o(j)&&l(v)||l(y)&&!o(v)||l(y)&&c(v)||l(y)&&l(v)?0:u(y)&&o(v)&&!l(v)&&o(j)&&d(j)?3:l(y)||!o(j)?1:2:-1},x=function(y){var v=0,j=0,w=0,N="",A="",C="",M=(y=y||"").split("\\s+"),I=[];for(v=0;v<M.length;v+=1){for(I.push(""),j=0;j<M[v].length;j+=1)N=M[v][j],A=M[v][j-1],C=M[v][j+1],o(N)?(w=g(N,A,C),I[v]+=w!==-1?String.fromCharCode(t[N.charCodeAt(0)][w]):N):I[v]+=N;I[v]=h(I[v])}return I.join(" ")},b=e.__arabicParser__.processArabic=e.processArabic=function(){var y,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,j=[];if(Array.isArray(v)){var w=0;for(j=[],w=0;w<v.length;w+=1)Array.isArray(v[w])?j.push([x(v[w][0]),v[w][1],v[w][2]]):j.push([x(v[w])]);y=j}else y=x(v);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};e.events.push(["preProcessText",b])})(Sn.API),Sn.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+t+" 0 R")}))}return this},(function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,s){var a;if((r=r||"2d")!=="2d")return null;for(a in s)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=s[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(Sn.API),(function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(y){c=y}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(y){h=y}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(y){g=y}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(y){x=y}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(y){b=y}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return s.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){s.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),h=d.font||this.getFont(),g=d.scaleFactor||this.internal.scaleFactor,x=0,b=0,y=0,v=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var j=d.maxWidth;j>0?typeof c=="string"?c=this.splitTextToSize(c,j):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce((function(N,A){return N.concat(v.splitTextToSize(A,j))}),[])):c=Array.isArray(c)?c:[c];for(var w=0;w<c.length;w++)x<(y=this.getStringUnitWidth(c[w],{font:h})*u)&&(x=y);return x!==0&&(b=c.length),{w:x/=g,h:Math.max((b*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/g,0)}},e.cellAddPage=function(){s.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||t,g=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,x&&g&&(this.printHeaderRow(c.lineNumber,!0),c.y+=g[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,u,h,g){if(s.call(this),!u)throw new Error("No data for PDF table.");var x,b,y,v,j=[],w=[],N=[],A={},C={},M=[],I=[],F=(g=g||{}).autoSize||!1,U=g.printHeaders!==!1,W=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,D=g.margins||Object.assign({width:this.getPageWidth()},t),R=typeof g.padding=="number"?g.padding:3,z=g.headerBackgroundColor||"#c8c8c8",Z=g.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=U,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=W,this.internal.__cell__.padding=R,this.internal.__cell__.headerBackgroundColor=z,this.internal.__cell__.headerTextColor=Z,this.setFontSize(W),h==null)w=j=Object.keys(u[0]),N=j.map((function(){return"left"}));else if(Array.isArray(h)&&Qr(h[0])==="object")for(j=h.map((function(ue){return ue.name})),w=h.map((function(ue){return ue.prompt||ue.name||""})),N=h.map((function(ue){return ue.align||"left"})),x=0;x<h.length;x+=1)C[h[x].name]=h[x].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(w=j=h,N=j.map((function(){return"left"})));if(F||Array.isArray(h)&&typeof h[0]=="string")for(x=0;x<j.length;x+=1){for(A[v=j[x]]=u.map((function(ue){return ue[v]})),this.setFont(void 0,"bold"),M.push(this.getTextDimensions(w[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=A[v],this.setFont(void 0,"normal"),y=0;y<b.length;y+=1)M.push(this.getTextDimensions(b[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);C[v]=Math.max.apply(null,M)+R+R,M=[]}if(U){var se={};for(x=0;x<j.length;x+=1)se[j[x]]={},se[j[x]].text=w[x],se[j[x]].align=N[x];var J=l.call(this,se,C);I=j.map((function(ue){return new i(c,d,C[ue],J,se[ue].text,void 0,se[ue].align)})),this.setTableHeaderRow(I),this.printHeaderRow(1,!1)}var Q=h.reduce((function(ue,ae){return ue[ae.name]=ae.align,ue}),{});for(x=0;x<u.length;x+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:x,data:u[x]},this);var H=l.call(this,u[x],C);for(y=0;y<j.length;y+=1){var ne=u[x][j[y]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:x,col:y,data:ne},this),o.call(this,new i(c,d,C[j[y]],H,ne,x+2,Q[j[y]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(c).map((function(x){var b=c[x];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,d[x]-u-u)}),this).map((function(x){return this.getLineHeightFactor()*x.length*h/g+u+u}),this).reduce((function(x,b){return Math.max(x,b)}),0)};e.setTableHeaderRow=function(c){s.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){u=this.internal.__cell__.tableHeaderRow[x].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,g.push(u)),u.lineNumber=c;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(b)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),r=!1}})(Sn.API);var pU={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},xU=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],w4=mU(xU),gU=[100,200,300,400,500,600,700,800,900],Zfe=mU(gU);function _4(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=(function(i){return pU[i=i||"normal"]?i:"normal"})(e.style),s=(function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}})(e.weight),a=(function(i){return typeof w4[i=i||"normal"]=="number"?i:"normal"})(e.stretch);return{family:t,style:r,weight:s,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,s].join(" ")}}}function F6(e,t,r,s){var a;for(a=r;a>=0&&a<t.length;a+=s)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=s)if(e[t[a]])return e[t[a]]}var Yfe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},$6={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function B6(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Xfe(e,t,r){for(var s=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},Yfe,r.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(a[(i=_4(t[l])).family]&&(i.family=a[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[s]))throw new Error("Could not find a font-family for the rule '"+B6(i)+"' and default family '"+s+"'.");if(o=(function(c,d){if(d[c])return d[c];var u=w4[c],h=u<=w4.normal?-1:1,g=F6(d,xU,u,h);if(!g)throw new Error("Could not find a matching font-stretch value for "+c);return g})(i.stretch,o),o=(function(c,d){if(d[c])return d[c];for(var u=pU[c],h=0;h<u.length;++h)if(d[u[h]])return d[u[h]];throw new Error("Could not find a matching font-style for "+c)})(i.style,o),!(o=(function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var u=Zfe[c],h=F6(d,gU,u,c<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+c);return h})(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+B6(i)+"'.");return o}function q6(e){return e.trimLeft()}function Qfe(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function Jfe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var hb,z6,V6,a_=["times"];(function(e){var t,r,s,a,i,o,l,c,d,u=function(G){return G=G||{},this.isStrokeTransparent=G.isStrokeTransparent||!1,this.strokeOpacity=G.strokeOpacity||1,this.strokeStyle=G.strokeStyle||"#000000",this.fillStyle=G.fillStyle||"#000000",this.isFillTransparent=G.isFillTransparent||!1,this.fillOpacity=G.fillOpacity||1,this.font=G.font||"10px sans-serif",this.textBaseline=G.textBaseline||"alphabetic",this.textAlign=G.textAlign||"left",this.lineWidth=G.lineWidth||1,this.lineJoin=G.lineJoin||"miter",this.lineCap=G.lineCap||"butt",this.path=G.path||[],this.transform=G.transform!==void 0?G.transform.clone():new c,this.globalCompositeOperation=G.globalCompositeOperation||"normal",this.globalAlpha=G.globalAlpha||1,this.clip_path=G.clip_path||[],this.currentPoint=G.currentPoint||new o,this.miterLimit=G.miterLimit||10,this.lastPoint=G.lastPoint||new o,this.lineDashOffset=G.lineDashOffset||0,this.lineDash=G.lineDash||[],this.margin=G.margin||[0,0,0,0],this.prevPageLastElemOffset=G.prevPageLastElemOffset||0,this.ignoreClearRect=typeof G.ignoreClearRect!="boolean"||G.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,r=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var h=function(G){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var te=G;Object.defineProperty(this,"pdf",{get:function(){return te}});var fe=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return fe},set:function(Xe){fe=!!Xe}});var be=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return be},set:function(Xe){be=!!Xe}});var xe=0;Object.defineProperty(this,"posX",{get:function(){return xe},set:function(Xe){isNaN(Xe)||(xe=Xe)}});var we=0;Object.defineProperty(this,"posY",{get:function(){return we},set:function(Xe){isNaN(Xe)||(we=Xe)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Xe){var ke;typeof Xe=="number"?ke=[Xe,Xe,Xe,Xe]:((ke=new Array(4))[0]=Xe[0],ke[1]=Xe.length>=2?Xe[1]:ke[0],ke[2]=Xe.length>=3?Xe[2]:ke[0],ke[3]=Xe.length>=4?Xe[3]:ke[1]),d.margin=ke}});var Pe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Pe},set:function(Xe){Pe=Xe}});var _e=0;Object.defineProperty(this,"lastBreak",{get:function(){return _e},set:function(Xe){_e=Xe}});var Ve=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ve},set:function(Xe){Ve=Xe}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Xe){Xe instanceof u&&(d=Xe)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Xe){d.path=Xe}});var Ue=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ue},set:function(Xe){Ue=Xe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Xe){var ke;ke=g(Xe),this.ctx.fillStyle=ke.style,this.ctx.isFillTransparent=ke.a===0,this.ctx.fillOpacity=ke.a,this.pdf.setFillColor(ke.r,ke.g,ke.b,{a:ke.a}),this.pdf.setTextColor(ke.r,ke.g,ke.b,{a:ke.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Xe){var ke=g(Xe);this.ctx.strokeStyle=ke.style,this.ctx.isStrokeTransparent=ke.a===0,this.ctx.strokeOpacity=ke.a,ke.a===0?this.pdf.setDrawColor(255,255,255):(ke.a,this.pdf.setDrawColor(ke.r,ke.g,ke.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Xe){["butt","round","square"].indexOf(Xe)!==-1&&(this.ctx.lineCap=Xe,this.pdf.setLineCap(Xe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Xe){isNaN(Xe)||(this.ctx.lineWidth=Xe,this.pdf.setLineWidth(Xe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Xe){["bevel","round","miter"].indexOf(Xe)!==-1&&(this.ctx.lineJoin=Xe,this.pdf.setLineJoin(Xe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Xe){isNaN(Xe)||(this.ctx.miterLimit=Xe,this.pdf.setMiterLimit(Xe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Xe){this.ctx.textBaseline=Xe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Xe){["right","end","center","left","start"].indexOf(Xe)!==-1&&(this.ctx.textAlign=Xe)}});var Le=null;function dt(Xe,ke){if(Le===null){var Bt=(function(Ft){var mt=[];return Object.keys(Ft).forEach((function(yt){Ft[yt].forEach((function(Tt){var St=null;switch(Tt){case"bold":St={family:yt,weight:"bold"};break;case"italic":St={family:yt,style:"italic"};break;case"bolditalic":St={family:yt,weight:"bold",style:"italic"};break;case"":case"normal":St={family:yt}}St!==null&&(St.ref={name:yt,style:Tt},mt.push(St))}))})),mt})(Xe.getFontList());Le=(function(Ft){for(var mt={},yt=0;yt<Ft.length;++yt){var Tt=_4(Ft[yt]),St=Tt.family,Kt=Tt.stretch,mn=Tt.style,jn=Tt.weight;mt[St]=mt[St]||{},mt[St][Kt]=mt[St][Kt]||{},mt[St][Kt][mn]=mt[St][Kt][mn]||{},mt[St][Kt][mn][jn]=Tt}return mt})(Bt.concat(ke))}return Le}var xt=null;Object.defineProperty(this,"fontFaces",{get:function(){return xt},set:function(Xe){Le=null,xt=Xe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Xe){var ke;if(this.ctx.font=Xe,(ke=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Xe))!==null){var Bt=ke[1],Ft=(ke[2],ke[3]),mt=ke[4],yt=(ke[5],ke[6]),Tt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(mt)[2];mt=Math.floor(Tt==="px"?parseFloat(mt)*this.pdf.internal.scaleFactor:Tt==="em"?parseFloat(mt)*this.pdf.getFontSize():parseFloat(mt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(mt);var St=(function(pn){var Tn,It,Vs=[],Qn=pn.trim();if(Qn==="")return a_;if(Qn in $6)return[$6[Qn]];for(;Qn!=="";){switch(It=null,Tn=(Qn=q6(Qn)).charAt(0)){case'"':case"'":It=Qfe(Qn.substring(1),Tn);break;default:It=Jfe(Qn)}if(It===null||(Vs.push(It[0]),(Qn=q6(It[1]))!==""&&Qn.charAt(0)!==","))return a_;Qn=Qn.replace(/^,/,"")}return Vs})(yt);if(this.fontFaces){var Kt=Xfe(dt(this.pdf,this.fontFaces),St.map((function(pn){return{family:pn,stretch:"normal",weight:Ft,style:Bt}})));this.pdf.setFont(Kt.ref.name,Kt.ref.style)}else{var mn="";(Ft==="bold"||parseInt(Ft,10)>=700||Bt==="bold")&&(mn="bold"),Bt==="italic"&&(mn+="italic"),mn.length===0&&(mn="normal");for(var jn="",Ln={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Wn=0;Wn<St.length;Wn++){if(this.pdf.internal.getFont(St[Wn],mn,{noFallback:!0,disableWarning:!0})!==void 0){jn=St[Wn];break}if(mn==="bolditalic"&&this.pdf.internal.getFont(St[Wn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)jn=St[Wn],mn="bold";else if(this.pdf.internal.getFont(St[Wn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){jn=St[Wn],mn="normal";break}}if(jn===""){for(var lr=0;lr<St.length;lr++)if(Ln[St[lr]]){jn=Ln[St[lr]];break}}jn=jn===""?"Times":jn,this.pdf.setFont(jn,mn)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Xe){this.ctx.globalCompositeOperation=Xe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Xe){this.ctx.globalAlpha=Xe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Xe){this.ctx.lineDashOffset=Xe,ae.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Xe){this.ctx.lineDash=Xe,ae.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Xe){this.ctx.ignoreClearRect=!!Xe}})};h.prototype.setLineDash=function(G){this.lineDash=G},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){A.call(this,"fill",!1)},h.prototype.stroke=function(){A.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(G,te){if(isNaN(G)||isNaN(te))throw ls.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var fe=this.ctx.transform.applyToPoint(new o(G,te));this.path.push({type:"mt",x:fe.x,y:fe.y}),this.ctx.lastPoint=new o(G,te)},h.prototype.closePath=function(){var G=new o(0,0),te=0;for(te=this.path.length-1;te!==-1;te--)if(this.path[te].type==="begin"&&Qr(this.path[te+1])==="object"&&typeof this.path[te+1].x=="number"){G=new o(this.path[te+1].x,this.path[te+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(G.x,G.y)},h.prototype.lineTo=function(G,te){if(isNaN(G)||isNaN(te))throw ls.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var fe=this.ctx.transform.applyToPoint(new o(G,te));this.path.push({type:"lt",x:fe.x,y:fe.y}),this.ctx.lastPoint=new o(fe.x,fe.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),A.call(this,null,!0)},h.prototype.quadraticCurveTo=function(G,te,fe,be){if(isNaN(fe)||isNaN(be)||isNaN(G)||isNaN(te))throw ls.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var xe=this.ctx.transform.applyToPoint(new o(fe,be)),we=this.ctx.transform.applyToPoint(new o(G,te));this.path.push({type:"qct",x1:we.x,y1:we.y,x:xe.x,y:xe.y}),this.ctx.lastPoint=new o(xe.x,xe.y)},h.prototype.bezierCurveTo=function(G,te,fe,be,xe,we){if(isNaN(xe)||isNaN(we)||isNaN(G)||isNaN(te)||isNaN(fe)||isNaN(be))throw ls.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Pe=this.ctx.transform.applyToPoint(new o(xe,we)),_e=this.ctx.transform.applyToPoint(new o(G,te)),Ve=this.ctx.transform.applyToPoint(new o(fe,be));this.path.push({type:"bct",x1:_e.x,y1:_e.y,x2:Ve.x,y2:Ve.y,x:Pe.x,y:Pe.y}),this.ctx.lastPoint=new o(Pe.x,Pe.y)},h.prototype.arc=function(G,te,fe,be,xe,we){if(isNaN(G)||isNaN(te)||isNaN(fe)||isNaN(be)||isNaN(xe))throw ls.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(we=!!we,!this.ctx.transform.isIdentity){var Pe=this.ctx.transform.applyToPoint(new o(G,te));G=Pe.x,te=Pe.y;var _e=this.ctx.transform.applyToPoint(new o(0,fe)),Ve=this.ctx.transform.applyToPoint(new o(0,0));fe=Math.sqrt(Math.pow(_e.x-Ve.x,2)+Math.pow(_e.y-Ve.y,2))}Math.abs(xe-be)>=2*Math.PI&&(be=0,xe=2*Math.PI),this.path.push({type:"arc",x:G,y:te,radius:fe,startAngle:be,endAngle:xe,counterclockwise:we})},h.prototype.arcTo=function(G,te,fe,be,xe){throw new Error("arcTo not implemented.")},h.prototype.rect=function(G,te,fe,be){if(isNaN(G)||isNaN(te)||isNaN(fe)||isNaN(be))throw ls.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(G,te),this.lineTo(G+fe,te),this.lineTo(G+fe,te+be),this.lineTo(G,te+be),this.lineTo(G,te),this.lineTo(G+fe,te),this.lineTo(G,te)},h.prototype.fillRect=function(G,te,fe,be){if(isNaN(G)||isNaN(te)||isNaN(fe)||isNaN(be))throw ls.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var xe={};this.lineCap!=="butt"&&(xe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(xe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(G,te,fe,be),this.fill(),xe.hasOwnProperty("lineCap")&&(this.lineCap=xe.lineCap),xe.hasOwnProperty("lineJoin")&&(this.lineJoin=xe.lineJoin)}},h.prototype.strokeRect=function(G,te,fe,be){if(isNaN(G)||isNaN(te)||isNaN(fe)||isNaN(be))throw ls.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(G,te,fe,be),this.stroke())},h.prototype.clearRect=function(G,te,fe,be){if(isNaN(G)||isNaN(te)||isNaN(fe)||isNaN(be))throw ls.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(G,te,fe,be))},h.prototype.save=function(G){G=typeof G!="boolean"||G;for(var te=this.pdf.internal.getCurrentPageInfo().pageNumber,fe=0;fe<this.pdf.internal.getNumberOfPages();fe++)this.pdf.setPage(fe+1),this.pdf.internal.out("q");if(this.pdf.setPage(te),G){this.ctx.fontSize=this.pdf.internal.getFontSize();var be=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=be}},h.prototype.restore=function(G){G=typeof G!="boolean"||G;for(var te=this.pdf.internal.getCurrentPageInfo().pageNumber,fe=0;fe<this.pdf.internal.getNumberOfPages();fe++)this.pdf.setPage(fe+1),this.pdf.internal.out("Q");this.pdf.setPage(te),G&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(G){var te,fe,be,xe;if(G.isCanvasGradient===!0&&(G=G.getColor()),!G)return{r:0,g:0,b:0,a:0,style:G};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(G))te=0,fe=0,be=0,xe=0;else{var we=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(G);if(we!==null)te=parseInt(we[1]),fe=parseInt(we[2]),be=parseInt(we[3]),xe=1;else if((we=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(G))!==null)te=parseInt(we[1]),fe=parseInt(we[2]),be=parseInt(we[3]),xe=parseFloat(we[4]);else{if(xe=1,typeof G=="string"&&G.charAt(0)!=="#"){var Pe=new lU(G);G=Pe.ok?Pe.toHex():"#000000"}G.length===4?(te=G.substring(1,2),te+=te,fe=G.substring(2,3),fe+=fe,be=G.substring(3,4),be+=be):(te=G.substring(1,3),fe=G.substring(3,5),be=G.substring(5,7)),te=parseInt(te,16),fe=parseInt(fe,16),be=parseInt(be,16)}}return{r:te,g:fe,b:be,a:xe,style:G}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(G,te,fe,be){if(isNaN(te)||isNaN(fe)||typeof G!="string")throw ls.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(be=isNaN(be)?void 0:be,!x.call(this)){var xe=H(this.ctx.transform.rotation),we=this.ctx.transform.scaleX;R.call(this,{text:G,x:te,y:fe,scale:we,angle:xe,align:this.textAlign,maxWidth:be})}},h.prototype.strokeText=function(G,te,fe,be){if(isNaN(te)||isNaN(fe)||typeof G!="string")throw ls.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){be=isNaN(be)?void 0:be;var xe=H(this.ctx.transform.rotation),we=this.ctx.transform.scaleX;R.call(this,{text:G,x:te,y:fe,scale:we,renderingMode:"stroke",angle:xe,align:this.textAlign,maxWidth:be})}},h.prototype.measureText=function(G){if(typeof G!="string")throw ls.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var te=this.pdf,fe=this.pdf.internal.scaleFactor,be=te.internal.getFontSize(),xe=te.getStringUnitWidth(G)*be/te.internal.scaleFactor,we=function(Pe){var _e=(Pe=Pe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return _e}}),this};return new we({width:xe*=Math.round(96*fe/72*1e4)/1e4})},h.prototype.scale=function(G,te){if(isNaN(G)||isNaN(te))throw ls.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var fe=new c(G,0,0,te,0,0);this.ctx.transform=this.ctx.transform.multiply(fe)},h.prototype.rotate=function(G){if(isNaN(G))throw ls.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var te=new c(Math.cos(G),Math.sin(G),-Math.sin(G),Math.cos(G),0,0);this.ctx.transform=this.ctx.transform.multiply(te)},h.prototype.translate=function(G,te){if(isNaN(G)||isNaN(te))throw ls.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var fe=new c(1,0,0,1,G,te);this.ctx.transform=this.ctx.transform.multiply(fe)},h.prototype.transform=function(G,te,fe,be,xe,we){if(isNaN(G)||isNaN(te)||isNaN(fe)||isNaN(be)||isNaN(xe)||isNaN(we))throw ls.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Pe=new c(G,te,fe,be,xe,we);this.ctx.transform=this.ctx.transform.multiply(Pe)},h.prototype.setTransform=function(G,te,fe,be,xe,we){G=isNaN(G)?1:G,te=isNaN(te)?0:te,fe=isNaN(fe)?0:fe,be=isNaN(be)?1:be,xe=isNaN(xe)?0:xe,we=isNaN(we)?0:we,this.ctx.transform=new c(G,te,fe,be,xe,we)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(G,te,fe,be,xe,we,Pe,_e,Ve){var Ue=this.pdf.getImageProperties(G),Le=1,dt=1,xt=1,Xe=1;be!==void 0&&_e!==void 0&&(xt=_e/be,Xe=Ve/xe,Le=Ue.width/be*_e/be,dt=Ue.height/xe*Ve/xe),we===void 0&&(we=te,Pe=fe,te=0,fe=0),be!==void 0&&_e===void 0&&(_e=be,Ve=xe),be===void 0&&_e===void 0&&(_e=Ue.width,Ve=Ue.height);for(var ke,Bt=this.ctx.transform.decompose(),Ft=H(Bt.rotate.shx),mt=new c,yt=(mt=(mt=(mt=mt.multiply(Bt.translate)).multiply(Bt.skew)).multiply(Bt.scale)).applyToRectangle(new l(we-te*xt,Pe-fe*Xe,be*Le,xe*dt)),Tt=v.call(this,yt),St=[],Kt=0;Kt<Tt.length;Kt+=1)St.indexOf(Tt[Kt])===-1&&St.push(Tt[Kt]);if(N(St),this.autoPaging)for(var mn=St[0],jn=St[St.length-1],Ln=mn;Ln<jn+1;Ln++){this.pdf.setPage(Ln);var Wn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],lr=Ln===1?this.posY+this.margin[0]:this.margin[0],pn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Tn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],It=Ln===1?0:pn+(Ln-2)*Tn;if(this.ctx.clip_path.length!==0){var Vs=this.path;ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(ke,this.posX+this.margin[3],-It+lr+this.ctx.prevPageLastElemOffset),C.call(this,"fill",!0),this.path=Vs}var Qn=JSON.parse(JSON.stringify(yt));Qn=w([Qn],this.posX+this.margin[3],-It+lr+this.ctx.prevPageLastElemOffset)[0];var Na=(Ln>mn||Ln<jn)&&y.call(this);Na&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Wn,Tn,null).clip().discardPath()),this.pdf.addImage(G,"JPEG",Qn.x,Qn.y,Qn.w,Qn.h,null,null,Ft),Na&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(G,"JPEG",yt.x,yt.y,yt.w,yt.h,null,null,Ft)};var v=function(G,te,fe){var be=[];te=te||this.pdf.internal.pageSize.width,fe=fe||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var xe=this.posY+this.ctx.prevPageLastElemOffset;switch(G.type){default:case"mt":case"lt":be.push(Math.floor((G.y+xe)/fe)+1);break;case"arc":be.push(Math.floor((G.y+xe-G.radius)/fe)+1),be.push(Math.floor((G.y+xe+G.radius)/fe)+1);break;case"qct":var we=ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,G.x1,G.y1,G.x,G.y);be.push(Math.floor((we.y+xe)/fe)+1),be.push(Math.floor((we.y+we.h+xe)/fe)+1);break;case"bct":var Pe=ue(this.ctx.lastPoint.x,this.ctx.lastPoint.y,G.x1,G.y1,G.x2,G.y2,G.x,G.y);be.push(Math.floor((Pe.y+xe)/fe)+1),be.push(Math.floor((Pe.y+Pe.h+xe)/fe)+1);break;case"rect":be.push(Math.floor((G.y+xe)/fe)+1),be.push(Math.floor((G.y+G.h+xe)/fe)+1)}for(var _e=0;_e<be.length;_e+=1)for(;this.pdf.internal.getNumberOfPages()<be[_e];)j.call(this);return be},j=function(){var G=this.fillStyle,te=this.strokeStyle,fe=this.font,be=this.lineCap,xe=this.lineWidth,we=this.lineJoin;this.pdf.addPage(),this.fillStyle=G,this.strokeStyle=te,this.font=fe,this.lineCap=be,this.lineWidth=xe,this.lineJoin=we},w=function(G,te,fe){for(var be=0;be<G.length;be++)switch(G[be].type){case"bct":G[be].x2+=te,G[be].y2+=fe;case"qct":G[be].x1+=te,G[be].y1+=fe;case"mt":case"lt":case"arc":default:G[be].x+=te,G[be].y+=fe}return G},N=function(G){return G.sort((function(te,fe){return te-fe}))},A=function(G,te){for(var fe,be,xe=this.fillStyle,we=this.strokeStyle,Pe=this.lineCap,_e=this.lineWidth,Ve=Math.abs(_e*this.ctx.transform.scaleX),Ue=this.lineJoin,Le=JSON.parse(JSON.stringify(this.path)),dt=JSON.parse(JSON.stringify(this.path)),xt=[],Xe=0;Xe<dt.length;Xe++)if(dt[Xe].x!==void 0)for(var ke=v.call(this,dt[Xe]),Bt=0;Bt<ke.length;Bt+=1)xt.indexOf(ke[Bt])===-1&&xt.push(ke[Bt]);for(var Ft=0;Ft<xt.length;Ft++)for(;this.pdf.internal.getNumberOfPages()<xt[Ft];)j.call(this);if(N(xt),this.autoPaging)for(var mt=xt[0],yt=xt[xt.length-1],Tt=mt;Tt<yt+1;Tt++){this.pdf.setPage(Tt),this.fillStyle=xe,this.strokeStyle=we,this.lineCap=Pe,this.lineWidth=Ve,this.lineJoin=Ue;var St=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Kt=Tt===1?this.posY+this.margin[0]:this.margin[0],mn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],jn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ln=Tt===1?0:mn+(Tt-2)*jn;if(this.ctx.clip_path.length!==0){var Wn=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(fe,this.posX+this.margin[3],-Ln+Kt+this.ctx.prevPageLastElemOffset),C.call(this,G,!0),this.path=Wn}if(be=JSON.parse(JSON.stringify(Le)),this.path=w(be,this.posX+this.margin[3],-Ln+Kt+this.ctx.prevPageLastElemOffset),te===!1||Tt===0){var lr=(Tt>mt||Tt<yt)&&y.call(this);lr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],St,jn,null).clip().discardPath()),C.call(this,G,te),lr&&this.pdf.restoreGraphicsState()}this.lineWidth=_e}else this.lineWidth=Ve,C.call(this,G,te),this.lineWidth=_e;this.path=Le},C=function(G,te){if((G!=="stroke"||te||!b.call(this))&&(G==="stroke"||te||!x.call(this))){for(var fe,be,xe=[],we=this.path,Pe=0;Pe<we.length;Pe++){var _e=we[Pe];switch(_e.type){case"begin":xe.push({begin:!0});break;case"close":xe.push({close:!0});break;case"mt":xe.push({start:_e,deltas:[],abs:[]});break;case"lt":var Ve=xe.length;if(we[Pe-1]&&!isNaN(we[Pe-1].x)&&(fe=[_e.x-we[Pe-1].x,_e.y-we[Pe-1].y],Ve>0)){for(;Ve>=0;Ve--)if(xe[Ve-1].close!==!0&&xe[Ve-1].begin!==!0){xe[Ve-1].deltas.push(fe),xe[Ve-1].abs.push(_e);break}}break;case"bct":fe=[_e.x1-we[Pe-1].x,_e.y1-we[Pe-1].y,_e.x2-we[Pe-1].x,_e.y2-we[Pe-1].y,_e.x-we[Pe-1].x,_e.y-we[Pe-1].y],xe[xe.length-1].deltas.push(fe);break;case"qct":var Ue=we[Pe-1].x+2/3*(_e.x1-we[Pe-1].x),Le=we[Pe-1].y+2/3*(_e.y1-we[Pe-1].y),dt=_e.x+2/3*(_e.x1-_e.x),xt=_e.y+2/3*(_e.y1-_e.y),Xe=_e.x,ke=_e.y;fe=[Ue-we[Pe-1].x,Le-we[Pe-1].y,dt-we[Pe-1].x,xt-we[Pe-1].y,Xe-we[Pe-1].x,ke-we[Pe-1].y],xe[xe.length-1].deltas.push(fe);break;case"arc":xe.push({deltas:[],abs:[],arc:!0}),Array.isArray(xe[xe.length-1].abs)&&xe[xe.length-1].abs.push(_e)}}be=te?null:G==="stroke"?"stroke":"fill";for(var Bt=!1,Ft=0;Ft<xe.length;Ft++)if(xe[Ft].arc)for(var mt=xe[Ft].abs,yt=0;yt<mt.length;yt++){var Tt=mt[yt];Tt.type==="arc"?F.call(this,Tt.x,Tt.y,Tt.radius,Tt.startAngle,Tt.endAngle,Tt.counterclockwise,void 0,te,!Bt):z.call(this,Tt.x,Tt.y),Bt=!0}else if(xe[Ft].close===!0)this.pdf.internal.out("h"),Bt=!1;else if(xe[Ft].begin!==!0){var St=xe[Ft].start.x,Kt=xe[Ft].start.y;Z.call(this,xe[Ft].deltas,St,Kt),Bt=!0}be&&U.call(this,be),te&&W.call(this)}},M=function(G){var te=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,fe=te*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return G-fe;case"top":return G+te-fe;case"hanging":return G+te-2*fe;case"middle":return G+te/2-fe;case"ideographic":return G;case"alphabetic":default:return G}},I=function(G){return G+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var G=function(){};return G.colorStops=[],G.addColorStop=function(te,fe){this.colorStops.push([te,fe])},G.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},G.isCanvasGradient=!0,G},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var F=function(G,te,fe,be,xe,we,Pe,_e,Ve){for(var Ue=J.call(this,fe,be,xe,we),Le=0;Le<Ue.length;Le++){var dt=Ue[Le];Le===0&&(Ve?D.call(this,dt.x1+G,dt.y1+te):z.call(this,dt.x1+G,dt.y1+te)),se.call(this,G,te,dt.x2,dt.y2,dt.x3,dt.y3,dt.x4,dt.y4)}_e?W.call(this):U.call(this,Pe)},U=function(G){switch(G){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},W=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(G,te){this.pdf.internal.out(r(G)+" "+s(te)+" m")},R=function(G){var te;switch(G.align){case"right":case"end":te="right";break;case"center":te="center";break;case"left":case"start":default:te="left"}var fe=this.pdf.getTextDimensions(G.text),be=M.call(this,G.y),xe=I.call(this,be)-fe.h,we=this.ctx.transform.applyToPoint(new o(G.x,be)),Pe=this.ctx.transform.decompose(),_e=new c;_e=(_e=(_e=_e.multiply(Pe.translate)).multiply(Pe.skew)).multiply(Pe.scale);for(var Ve,Ue,Le,dt=this.ctx.transform.applyToRectangle(new l(G.x,be,fe.w,fe.h)),xt=_e.applyToRectangle(new l(G.x,xe,fe.w,fe.h)),Xe=v.call(this,xt),ke=[],Bt=0;Bt<Xe.length;Bt+=1)ke.indexOf(Xe[Bt])===-1&&ke.push(Xe[Bt]);if(N(ke),this.autoPaging)for(var Ft=ke[0],mt=ke[ke.length-1],yt=Ft;yt<mt+1;yt++){this.pdf.setPage(yt);var Tt=yt===1?this.posY+this.margin[0]:this.margin[0],St=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Kt=this.pdf.internal.pageSize.height-this.margin[2],mn=Kt-this.margin[0],jn=this.pdf.internal.pageSize.width-this.margin[1],Ln=jn-this.margin[3],Wn=yt===1?0:St+(yt-2)*mn;if(this.ctx.clip_path.length!==0){var lr=this.path;Ve=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(Ve,this.posX+this.margin[3],-1*Wn+Tt),C.call(this,"fill",!0),this.path=lr}var pn=w([JSON.parse(JSON.stringify(xt))],this.posX+this.margin[3],-Wn+Tt+this.ctx.prevPageLastElemOffset)[0];G.scale>=.01&&(Ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ue*G.scale),Le=this.lineWidth,this.lineWidth=Le*G.scale);var Tn=this.autoPaging!=="text";if(Tn||pn.y+pn.h<=Kt){if(Tn||pn.y>=Tt&&pn.x<=jn){var It=Tn?G.text:this.pdf.splitTextToSize(G.text,G.maxWidth||jn-pn.x)[0],Vs=w([JSON.parse(JSON.stringify(dt))],this.posX+this.margin[3],-Wn+Tt+this.ctx.prevPageLastElemOffset)[0],Qn=Tn&&(yt>Ft||yt<mt)&&y.call(this);Qn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ln,mn,null).clip().discardPath()),this.pdf.text(It,Vs.x,Vs.y,{angle:G.angle,align:te,renderingMode:G.renderingMode}),Qn&&this.pdf.restoreGraphicsState()}}else pn.y<Kt&&(this.ctx.prevPageLastElemOffset+=Kt-pn.y);G.scale>=.01&&(this.pdf.setFontSize(Ue),this.lineWidth=Le)}else G.scale>=.01&&(Ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ue*G.scale),Le=this.lineWidth,this.lineWidth=Le*G.scale),this.pdf.text(G.text,we.x+this.posX,we.y+this.posY,{angle:G.angle,align:te,renderingMode:G.renderingMode,maxWidth:G.maxWidth}),G.scale>=.01&&(this.pdf.setFontSize(Ue),this.lineWidth=Le)},z=function(G,te,fe,be){fe=fe||0,be=be||0,this.pdf.internal.out(r(G+fe)+" "+s(te+be)+" l")},Z=function(G,te,fe){return this.pdf.lines(G,te,fe,null,null)},se=function(G,te,fe,be,xe,we,Pe,_e){this.pdf.internal.out([t(a(fe+G)),t(i(be+te)),t(a(xe+G)),t(i(we+te)),t(a(Pe+G)),t(i(_e+te)),"c"].join(" "))},J=function(G,te,fe,be){for(var xe=2*Math.PI,we=Math.PI/2;te>fe;)te-=xe;var Pe=Math.abs(fe-te);Pe<xe&&be&&(Pe=xe-Pe);for(var _e=[],Ve=be?-1:1,Ue=te;Pe>1e-5;){var Le=Ue+Ve*Math.min(Pe,we);_e.push(Q.call(this,G,Ue,Le)),Pe-=Math.abs(Le-Ue),Ue=Le}return _e},Q=function(G,te,fe){var be=(fe-te)/2,xe=G*Math.cos(be),we=G*Math.sin(be),Pe=xe,_e=-we,Ve=Pe*Pe+_e*_e,Ue=Ve+Pe*xe+_e*we,Le=4/3*(Math.sqrt(2*Ve*Ue)-Ue)/(Pe*we-_e*xe),dt=Pe-Le*_e,xt=_e+Le*Pe,Xe=dt,ke=-xt,Bt=be+te,Ft=Math.cos(Bt),mt=Math.sin(Bt);return{x1:G*Math.cos(te),y1:G*Math.sin(te),x2:dt*Ft-xt*mt,y2:dt*mt+xt*Ft,x3:Xe*Ft-ke*mt,y3:Xe*mt+ke*Ft,x4:G*Math.cos(fe),y4:G*Math.sin(fe)}},H=function(G){return 180*G/Math.PI},ne=function(G,te,fe,be,xe,we){var Pe=G+.5*(fe-G),_e=te+.5*(be-te),Ve=xe+.5*(fe-xe),Ue=we+.5*(be-we),Le=Math.min(G,xe,Pe,Ve),dt=Math.max(G,xe,Pe,Ve),xt=Math.min(te,we,_e,Ue),Xe=Math.max(te,we,_e,Ue);return new l(Le,xt,dt-Le,Xe-xt)},ue=function(G,te,fe,be,xe,we,Pe,_e){var Ve,Ue,Le,dt,xt,Xe,ke,Bt,Ft,mt,yt,Tt,St,Kt,mn=fe-G,jn=be-te,Ln=xe-fe,Wn=we-be,lr=Pe-xe,pn=_e-we;for(Ue=0;Ue<41;Ue++)Ft=(ke=(Le=G+(Ve=Ue/40)*mn)+Ve*((xt=fe+Ve*Ln)-Le))+Ve*(xt+Ve*(xe+Ve*lr-xt)-ke),mt=(Bt=(dt=te+Ve*jn)+Ve*((Xe=be+Ve*Wn)-dt))+Ve*(Xe+Ve*(we+Ve*pn-Xe)-Bt),Ue==0?(yt=Ft,Tt=mt,St=Ft,Kt=mt):(yt=Math.min(yt,Ft),Tt=Math.min(Tt,mt),St=Math.max(St,Ft),Kt=Math.max(Kt,mt));return new l(Math.round(yt),Math.round(Tt),Math.round(St-yt),Math.round(Kt-Tt))},ae=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var G,te,fe=(G=this.ctx.lineDash,te=this.ctx.lineDashOffset,JSON.stringify({lineDash:G,lineDashOffset:te}));this.prevLineDash!==fe&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=fe)}}})(Sn.API),(function(e){var t=function(i){var o,l,c,d,u,h,g,x,b,y;for(l=[],c=0,d=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;d>c;c+=4)(u=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(h=(u=((u=((u=((u=(u-(y=u%85))/85)-(b=u%85))/85)-(x=u%85))/85)-(g=u%85))/85)%85,l.push(h+33,g+33,x+33,b+33,y+33)):l.push(122);return(function(v,j){for(var w=j;w>0;w--)v.pop()})(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(i){var o,l,c,d,u,h=String,g="length",x=255,b="charCodeAt",y="slice",v="replace";for(i[y](-2),i=i[y](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),c=[],d=0,u=(i+=o="uuuuu"[y](i[g]%5||5))[g];u>d;d+=5)l=52200625*(i[b](d)-33)+614125*(i[b](d+1)-33)+7225*(i[b](d+2)-33)+85*(i[b](d+3)-33)+(i[b](d+4)-33),c.push(x&l>>24,x&l>>16,x&l>>8,x&l);return(function(j,w){for(var N=w;N>0;N--)j.pop()})(c,o[g]),h.fromCharCode.apply(h,c)},s=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},a=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=g4(o)).reduce((function(c,d){return c+String.fromCharCode(d)}),"")};e.processDataByFilters=function(i,o){var l=0,c=i||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=s(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map((function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)})).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}})(Sn.API),(function(e){e.loadFile=function(t,r,s){return(function(a,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=(function(c,d,u){var h=new XMLHttpRequest,g=0,x=function(b){var y=b.length,v=[],j=String.fromCharCode;for(g=0;g<y;g+=1)v.push(j(255&b.charCodeAt(g)));return v.join("")};if(h.open("GET",c,!d),h.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(h.onload=function(){h.status===200?u(x(this.responseText)):u(void 0)}),h.send(null),d&&h.status===200)return x(h.responseText)})(a,i,o)}catch{}return l})(t,r,s)},e.loadImageFile=e.loadFile})(Sn.API),(function(e){function t(){return(Cn.html2canvas?Promise.resolve(Cn.html2canvas):h4(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch((function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))})).then((function(o){return o.default?o.default:o}))}function r(){return(Cn.DOMPurify?Promise.resolve(Cn.DOMPurify):h4(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch((function(o){return Promise.reject(new Error("Could not load dompurify: "+o))})).then((function(o){return o.default?o.default:o}))}var s=function(o){var l=Qr(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},a=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then((function(){switch(l=l||(function(c){switch(s(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(o)){case"string":return this.then(r).then((function(c){return this.set({src:a("div",{innerHTML:o,dompurify:c})})}));case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}}))},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=(function c(d,u){for(var h=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),g=d.firstChild;g;g=g.nextSibling)u!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||h.appendChild(c(g,u));return d.nodeType===1&&(d.nodeName==="CANVAS"?(h.width=d.width,h.height=d.height,h.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(h.value=d.value),h.addEventListener("load",(function(){h.scrollTop=d.scrollTop,h.scrollLeft=d.scrollLeft}),!0)),h})(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then((function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)})).then((function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)}))},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then((function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var g=0;g<d.length;++g){var x=d[g],b=x.src.find((function(y){return y.format==="truetype"}));b&&c.addFont(b.url,x.ref.name,x.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,c.context2d.save(!0),l(this.prop.container,h)})).then((function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)}))},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o}))},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(o,l)}))},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}}))},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},i.prototype.set=function(o){if(s(o)!=="object")return this;var l=Object.keys(o||{}).map((function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}}),this);return this.then((function(){return this.thenList(l)}))},i.prototype.get=function(o,l){return this.then((function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c}))},i.prototype.setMargin=function(o){return this.then((function(){switch(s(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o})).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then((function(){(o=o||Sn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o}))},i.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,(function(d,u){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,(function(h){return c.updateProgress(null,d),h})).then(d,u).then((function(h){return c.updateProgress(1),h}))}))},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=c.call(d,o,l);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach((function(c){l=l.thenCore(c)})),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then((function(){throw new Error(o)}))},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Sn.getPageSize=function(o,l,c){if(Qr(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var u,h=(""+c).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+l}var x,b=0,y=0;if(g.hasOwnProperty(h))b=g[h][1]/u,y=g[h][0]/u;else try{b=c[1],y=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",y>b&&(x=y,y=b,b=x);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",b>y&&(x=y,y=b,b=x)}return{width:y,height:b,unit:l,k:u,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(_4):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}})(Sn.API),Sn.API.addJS=function(e){return V6=e,this.internal.events.subscribe("postPutResources",(function(){hb=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(hb+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),z6=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+V6+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){hb!==void 0&&z6!==void 0&&this.internal.out("/Names <</JavaScript "+hb+" 0 R>>")})),this},(function(e){var t;e.events.push(["postPutResources",function(){var r=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),i=0;i<a.length;i++){var o=a[i],l=s.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(i=0;i<d;i++){var h=r.internal.newObject();u.push(h);var g=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var x=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<u.length;i++)r.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+x+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(s,a,i){var o={title:a,options:i,children:[]};return s==null&&(s=this.root),s.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(s){s.id=r.internal.newObjectDeferred();for(var a=0;a<s.children.length;a++)this.genIds_r(s.children[a])},r.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},r.outline.renderItems=function(s){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<s.children.length;i++){var o=s.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(s)),i>0&&this.line("/Prev "+this.makeRef(s.children[i-1])),i<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var d=0;d<s.children.length;d++)this.renderItems(s.children[d])},r.outline.line=function(s){this.ctx.val+=s+`\r
`},r.outline.makeRef=function(s){return s.id+" 0 R"},r.outline.makeString=function(s){return"("+r.internal.pdfEscape(s)+")"},r.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(s,a){for(var i=0;i<a.children.length;i++)s.count++,this.count_r(s,a.children[i]);return s.count}}])})(Sn.API),(function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,s,a,i,o,l){var c,d=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=(function(h){for(var g,x=256*h.charCodeAt(4)+h.charCodeAt(5),b=h.length,y={width:0,height:0,numcomponents:1},v=4;v<b;v+=2){if(v+=x,t.indexOf(h.charCodeAt(v+1))!==-1){g=256*h.charCodeAt(v+5)+h.charCodeAt(v+6),y={width:256*h.charCodeAt(v+7)+h.charCodeAt(v+8),height:g,numcomponents:h.charCodeAt(v+9)};break}x=256*h.charCodeAt(v+2)+h.charCodeAt(v+3)}return y})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}u={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:s,alias:a}}return u}})(Sn.API);var Dp,fb,U6,H6,W6,eme=(function(){var e,t,r;function s(i){var o,l,c,d,u,h,g,x,b,y,v,j,w,N;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(o=this.readUInt32(),b=(function(){var A,C;for(C=[],A=0;A<4;++A)C.push(String.fromCharCode(this.data[this.pos++]));return C}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),d=this.readUInt16()||100,h.delay=1e3*u/d,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,o-=4),i=(h!=null?h.data:void 0)||this.imgData,j=0;0<=o?j<o:j>o;0<=o?++j:--j)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((y=c-this.transparency.indexed.length)>0)for(w=0;0<=y?w<y:w>y;0<=y?++w:--w)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":g=(v=this.read(o)).indexOf(0),x=String.fromCharCode.apply(String,v.slice(0,g)),this.text[x]=String.fromCharCode.apply(String,v.slice(g+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(N=this.colorType)===4||N===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}s.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},s.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(h,g,x,b){var y,v,j,w,N,A,C,M,I,F,U,W,D,R,z,Z,se,J,Q,H,ne,ue=Math.ceil((d.width-h)/x),ae=Math.ceil((d.height-g)/b),G=d.width==ue&&d.height==ae;for(R=o*ue,W=G?l:new Uint8Array(R*ae),A=i.length,D=0,v=0;D<ae&&c<A;){switch(i[c++]){case 0:for(w=se=0;se<R;w=se+=1)W[v++]=i[c++];break;case 1:for(w=J=0;J<R;w=J+=1)y=i[c++],N=w<o?0:W[v-o],W[v++]=(y+N)%256;break;case 2:for(w=Q=0;Q<R;w=Q+=1)y=i[c++],j=(w-w%o)/o,z=D&&W[(D-1)*R+j*o+w%o],W[v++]=(z+y)%256;break;case 3:for(w=H=0;H<R;w=H+=1)y=i[c++],j=(w-w%o)/o,N=w<o?0:W[v-o],z=D&&W[(D-1)*R+j*o+w%o],W[v++]=(y+Math.floor((N+z)/2))%256;break;case 4:for(w=ne=0;ne<R;w=ne+=1)y=i[c++],j=(w-w%o)/o,N=w<o?0:W[v-o],D===0?z=Z=0:(z=W[(D-1)*R+j*o+w%o],Z=j&&W[(D-1)*R+(j-1)*o+w%o]),C=N+z-Z,M=Math.abs(C-N),F=Math.abs(C-z),U=Math.abs(C-Z),I=M<=F&&M<=U?N:F<=U?z:Z,W[v++]=(y+I)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!G){var te=((g+D*b)*d.width+h)*o,fe=D*R;for(w=0;w<ue;w+=1){for(var be=0;be<o;be+=1)l[te++]=W[fe++];te+=(x-1)*o}}D++}}return i=Ofe(i),d.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),l},s.prototype.decodePalette=function(){var i,o,l,c,d,u,h,g,x;for(l=this.palette,u=this.transparency.indexed||[],d=new Uint8Array((u.length||0)+l.length),c=0,i=0,o=h=0,g=l.length;h<g;o=h+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(x=u[i++])!=null?x:255;return d},s.prototype.copyToImageData=function(i,o){var l,c,d,u,h,g,x,b,y,v,j;if(c=this.colors,y=null,l=this.hasAlphaChannel,this.palette.length&&(y=(j=this._decodedPalette)!=null?j:this._decodedPalette=this.decodePalette(),c=4,l=!0),b=(d=i.data||i).length,h=y||o,u=g=0,c===1)for(;u<b;)x=y?4*o[u/4]:g,v=h[x++],d[u++]=v,d[u++]=v,d[u++]=v,d[u++]=l?h[x++]:255,g=x;else for(;u<b;)x=y?4*o[u/4]:g,d[u++]=h[x++],d[u++]=h[x++],d[u++]=h[x++],d[u++]=l?h[x++]:255,g=x},s.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var a=function(){if(Object.prototype.toString.call(Cn)==="[object Window]"){try{t=Cn.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(i){var o;if(a()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},s.prototype.decodeFrames=function(i){var o,l,c,d,u,h,g,x;if(this.animation){for(x=[],l=u=0,h=(g=this.animation.frames).length;u<h;l=++u)o=g[l],c=i.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,x.push(o.image=e(c));return x}},s.prototype.renderFrame=function(i,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?i.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&i.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},s.prototype.animate=function(i){var o,l,c,d,u,h,g=this;return l=0,h=this.animation,d=h.numFrames,c=h.frames,u=h.numPlays,(o=function(){var x,b;if(x=l++%d,b=c[x],g.renderFrame(i,x),d>1&&l/d<u)return g.animation._timeout=setTimeout(o,b.delay)})()},s.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},s.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},s})();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function tme(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,s=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,o=1<<(7&a)+1;e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var d=!0,u=[],h=0,g=null,x=0,b=null;for(this.width=r,this.height=s;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,b=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var y=e[t++];h=e[t++]|e[t++]<<8,g=e[t++],(1&y)==0&&(g=null),x=y>>2&7,t++;break;case 254:for(;;){if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var v=e[t++]|e[t++]<<8,j=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,A=e[t++],C=A>>6&1,M=1<<(7&A)+1,I=l,F=c,U=!1;A>>7&&(U=!0,I=t,F=M,t+=3*M);var W=t;for(t++;;){var D;if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}u.push({x:v,y:j,width:w,height:N,has_local_palette:U,palette_offset:I,palette_size:F,data_offset:W,data_length:t-W,transparent_index:g,interlaced:!!C,delay:h,disposal:x});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return b},this.frameInfo=function(R){if(R<0||R>=u.length)throw new Error("Frame index out of range.");return u[R]},this.decodeAndBlitFrameBGRA=function(R,z){var Z=this.frameInfo(R),se=Z.width*Z.height,J=new Uint8Array(se);K6(e,Z.data_offset,J,se);var Q=Z.palette_offset,H=Z.transparent_index;H===null&&(H=256);var ne=Z.width,ue=r-ne,ae=ne,G=4*(Z.y*r+Z.x),te=4*((Z.y+Z.height)*r+Z.x),fe=G,be=4*ue;Z.interlaced===!0&&(be+=4*r*7);for(var xe=8,we=0,Pe=J.length;we<Pe;++we){var _e=J[we];if(ae===0&&(ae=ne,(fe+=be)>=te&&(be=4*ue+4*r*(xe-1),fe=G+(ne+ue)*(xe<<1),xe>>=1)),_e===H)fe+=4;else{var Ve=e[Q+3*_e],Ue=e[Q+3*_e+1],Le=e[Q+3*_e+2];z[fe++]=Le,z[fe++]=Ue,z[fe++]=Ve,z[fe++]=255}--ae}},this.decodeAndBlitFrameRGBA=function(R,z){var Z=this.frameInfo(R),se=Z.width*Z.height,J=new Uint8Array(se);K6(e,Z.data_offset,J,se);var Q=Z.palette_offset,H=Z.transparent_index;H===null&&(H=256);var ne=Z.width,ue=r-ne,ae=ne,G=4*(Z.y*r+Z.x),te=4*((Z.y+Z.height)*r+Z.x),fe=G,be=4*ue;Z.interlaced===!0&&(be+=4*r*7);for(var xe=8,we=0,Pe=J.length;we<Pe;++we){var _e=J[we];if(ae===0&&(ae=ne,(fe+=be)>=te&&(be=4*ue+4*r*(xe-1),fe=G+(ne+ue)*(xe<<1),xe>>=1)),_e===H)fe+=4;else{var Ve=e[Q+3*_e],Ue=e[Q+3*_e+1],Le=e[Q+3*_e+2];z[fe++]=Ve,z[fe++]=Ue,z[fe++]=Le,z[fe++]=255}--ae}}}function K6(e,t,r,s){for(var a=e[t++],i=1<<a,o=i+1,l=o+1,c=a+1,d=(1<<c)-1,u=0,h=0,g=0,x=e[t++],b=new Int32Array(4096),y=null;;){for(;u<16&&x!==0;)h|=e[t++]<<u,u+=8,x===1?x=e[t++]:--x;if(u<c)break;var v=h&d;if(h>>=c,u-=c,v!==i){if(v===o)break;for(var j=v<l?v:y,w=0,N=j;N>i;)N=b[N]>>8,++w;var A=N;if(g+w+(j!==v?1:0)>s)return void ls.log("Warning, gif stream longer than expected.");r[g++]=A;var C=g+=w;for(j!==v&&(r[g++]=A),N=j;w--;)N=b[N],r[--C]=255&N,N>>=8;y!==null&&l<4096&&(b[l++]=y<<8|A,l>=d+1&&c<12&&(++c,d=d<<1|1)),y=v}else l=o+1,d=(1<<(c=a+1))-1,y=null}return g!==s&&ls.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function i_(e){var t,r,s,a,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),h=new Array(65535),g=new Array(65535),x=new Array(64),b=new Array(64),y=[],v=0,j=7,w=new Array(64),N=new Array(64),A=new Array(64),C=new Array(256),M=new Array(2048),I=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],F=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],se=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function J(G,te){for(var fe=0,be=0,xe=new Array,we=1;we<=16;we++){for(var Pe=1;Pe<=G[we];Pe++)xe[te[be]]=[],xe[te[be]][0]=fe,xe[te[be]][1]=we,be++,fe++;fe*=2}return xe}function Q(G){for(var te=G[0],fe=G[1]-1;fe>=0;)te&1<<fe&&(v|=1<<j),fe--,--j<0&&(v==255?(H(255),H(0)):H(v),j=7,v=0)}function H(G){y.push(G)}function ne(G){H(G>>8&255),H(255&G)}function ue(G,te,fe,be,xe){for(var we,Pe=xe[0],_e=xe[240],Ve=(function(mt,yt){var Tt,St,Kt,mn,jn,Ln,Wn,lr,pn,Tn,It=0;for(pn=0;pn<8;++pn){Tt=mt[It],St=mt[It+1],Kt=mt[It+2],mn=mt[It+3],jn=mt[It+4],Ln=mt[It+5],Wn=mt[It+6];var Vs=Tt+(lr=mt[It+7]),Qn=Tt-lr,Na=St+Wn,gr=St-Wn,ur=Kt+Ln,Nr=Kt-Ln,nr=mn+jn,$a=mn-jn,kr=Vs+nr,rs=Vs-nr,Ts=Na+ur,Br=Na-ur;mt[It]=kr+Ts,mt[It+4]=kr-Ts;var Oe=.707106781*(Br+rs);mt[It+2]=rs+Oe,mt[It+6]=rs-Oe;var ot=.382683433*((kr=$a+Nr)-(Br=gr+Qn)),an=.5411961*kr+ot,on=1.306562965*Br+ot,Kn=.707106781*(Ts=Nr+gr),ss=Qn+Kn,Ut=Qn-Kn;mt[It+5]=Ut+an,mt[It+3]=Ut-an,mt[It+1]=ss+on,mt[It+7]=ss-on,It+=8}for(It=0,pn=0;pn<8;++pn){Tt=mt[It],St=mt[It+8],Kt=mt[It+16],mn=mt[It+24],jn=mt[It+32],Ln=mt[It+40],Wn=mt[It+48];var es=Tt+(lr=mt[It+56]),hs=Tt-lr,fr=St+Wn,wn=St-Wn,Et=Kt+Ln,fs=Kt-Ln,_s=mn+jn,na=mn-jn,Ba=es+_s,wi=es-_s,Us=fr+Et,ka=fr-Et;mt[It]=Ba+Us,mt[It+32]=Ba-Us;var ai=.707106781*(ka+wi);mt[It+16]=wi+ai,mt[It+48]=wi-ai;var Ro=.382683433*((Ba=na+fs)-(ka=wn+hs)),zl=.5411961*Ba+Ro,Tc=1.306562965*ka+Ro,Ec=.707106781*(Us=fs+wn),Vl=hs+Ec,Sd=hs-Ec;mt[It+40]=Sd+zl,mt[It+24]=Sd-zl,mt[It+8]=Vl+Tc,mt[It+56]=Vl-Tc,It++}for(pn=0;pn<64;++pn)Tn=mt[pn]*yt[pn],x[pn]=Tn>0?Tn+.5|0:Tn-.5|0;return x})(G,te),Ue=0;Ue<64;++Ue)b[I[Ue]]=Ve[Ue];var Le=b[0]-fe;fe=b[0],Le==0?Q(be[0]):(Q(be[g[we=32767+Le]]),Q(h[we]));for(var dt=63;dt>0&&b[dt]==0;)dt--;if(dt==0)return Q(Pe),fe;for(var xt,Xe=1;Xe<=dt;){for(var ke=Xe;b[Xe]==0&&Xe<=dt;)++Xe;var Bt=Xe-ke;if(Bt>=16){xt=Bt>>4;for(var Ft=1;Ft<=xt;++Ft)Q(_e);Bt&=15}we=32767+b[Xe],Q(xe[(Bt<<4)+g[we]]),Q(h[we]),Xe++}return dt!=63&&Q(Pe),fe}function ae(G){G=Math.min(Math.max(G,1),100),i!=G&&((function(te){for(var fe=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],be=0;be<64;be++){var xe=o((fe[be]*te+50)/100);xe=Math.min(Math.max(xe,1),255),l[I[be]]=xe}for(var we=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Pe=0;Pe<64;Pe++){var _e=o((we[Pe]*te+50)/100);_e=Math.min(Math.max(_e,1),255),c[I[Pe]]=_e}for(var Ve=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ue=0,Le=0;Le<8;Le++)for(var dt=0;dt<8;dt++)d[Ue]=1/(l[I[Ue]]*Ve[Le]*Ve[dt]*8),u[Ue]=1/(c[I[Ue]]*Ve[Le]*Ve[dt]*8),Ue++})(G<50?Math.floor(5e3/G):Math.floor(200-2*G)),i=G)}this.encode=function(G,te){te&&ae(te),y=new Array,v=0,j=7,ne(65496),ne(65504),ne(16),H(74),H(70),H(73),H(70),H(0),H(1),H(1),H(0),ne(1),ne(1),H(0),H(0),(function(){ne(65499),ne(132),H(0);for(var St=0;St<64;St++)H(l[St]);H(1);for(var Kt=0;Kt<64;Kt++)H(c[Kt])})(),(function(St,Kt){ne(65472),ne(17),H(8),ne(Kt),ne(St),H(3),H(1),H(17),H(0),H(2),H(17),H(1),H(3),H(17),H(1)})(G.width,G.height),(function(){ne(65476),ne(418),H(0);for(var St=0;St<16;St++)H(F[St+1]);for(var Kt=0;Kt<=11;Kt++)H(U[Kt]);H(16);for(var mn=0;mn<16;mn++)H(W[mn+1]);for(var jn=0;jn<=161;jn++)H(D[jn]);H(1);for(var Ln=0;Ln<16;Ln++)H(R[Ln+1]);for(var Wn=0;Wn<=11;Wn++)H(z[Wn]);H(17);for(var lr=0;lr<16;lr++)H(Z[lr+1]);for(var pn=0;pn<=161;pn++)H(se[pn])})(),ne(65498),ne(12),H(3),H(1),H(0),H(2),H(17),H(3),H(17),H(0),H(63),H(0);var fe=0,be=0,xe=0;v=0,j=7,this.encode.displayName="_encode_";for(var we,Pe,_e,Ve,Ue,Le,dt,xt,Xe,ke=G.data,Bt=G.width,Ft=G.height,mt=4*Bt,yt=0;yt<Ft;){for(we=0;we<mt;){for(Ue=mt*yt+we,dt=-1,xt=0,Xe=0;Xe<64;Xe++)Le=Ue+(xt=Xe>>3)*mt+(dt=4*(7&Xe)),yt+xt>=Ft&&(Le-=mt*(yt+1+xt-Ft)),we+dt>=mt&&(Le-=we+dt-mt+4),Pe=ke[Le++],_e=ke[Le++],Ve=ke[Le++],w[Xe]=(M[Pe]+M[_e+256>>0]+M[Ve+512>>0]>>16)-128,N[Xe]=(M[Pe+768>>0]+M[_e+1024>>0]+M[Ve+1280>>0]>>16)-128,A[Xe]=(M[Pe+1280>>0]+M[_e+1536>>0]+M[Ve+1792>>0]>>16)-128;fe=ue(w,d,fe,t,s),be=ue(N,u,be,r,a),xe=ue(A,u,xe,r,a),we+=32}yt+=8}if(j>=0){var Tt=[];Tt[1]=j+1,Tt[0]=(1<<j+1)-1,Q(Tt)}return ne(65497),new Uint8Array(y)},e=e||50,(function(){for(var G=String.fromCharCode,te=0;te<256;te++)C[te]=G(te)})(),t=J(F,U),r=J(R,z),s=J(W,D),a=J(Z,se),(function(){for(var G=1,te=2,fe=1;fe<=15;fe++){for(var be=G;be<te;be++)g[32767+be]=fe,h[32767+be]=[],h[32767+be][1]=fe,h[32767+be][0]=be;for(var xe=-(te-1);xe<=-G;xe++)g[32767+xe]=fe,h[32767+xe]=[],h[32767+xe][1]=fe,h[32767+xe][0]=te-1+xe;G<<=1,te<<=1}})(),(function(){for(var G=0;G<256;G++)M[G]=19595*G,M[G+256>>0]=38470*G,M[G+512>>0]=7471*G+32768,M[G+768>>0]=-11059*G,M[G+1024>>0]=-21709*G,M[G+1280>>0]=32768*G+8421375,M[G+1536>>0]=-27439*G,M[G+1792>>0]=-5329*G})(),ae(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ad(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function G6(e){function t(F){if(!F)throw Error("assert :P")}function r(F,U,W){for(var D=0;4>D;D++)if(F[U+D]!=W.charCodeAt(D))return!0;return!1}function s(F,U,W,D,R){for(var z=0;z<R;z++)F[U+z]=W[D+z]}function a(F,U,W,D){for(var R=0;R<D;R++)F[U+R]=W}function i(F){return new Int32Array(F)}function o(F,U){for(var W=[],D=0;D<F;D++)W.push(new U);return W}function l(F,U){var W=[];return(function D(R,z,Z){for(var se=Z[z],J=0;J<se&&(R.push(Z.length>z+1?[]:new U),!(Z.length<z+1));J++)D(R[J],z+1,Z)})(W,0,F),W}var c=function(){var F=this;function U(S,O){for(var V=1<<O-1>>>0;S&V;)V>>>=1;return V?(S&V-1)+V:S}function W(S,O,V,Y,ee){t(!(Y%V));do S[O+(Y-=V)]=ee;while(0<Y)}function D(S,O,V,Y,ee){if(t(2328>=ee),512>=ee)var ie=i(512);else if((ie=i(ee))==null)return 0;return(function(de,pe,ge,je,Re,Ke){var Ge,ze,ft=pe,rt=1<<ge,$e=i(16),Be=i(16);for(t(Re!=0),t(je!=null),t(de!=null),t(0<ge),ze=0;ze<Re;++ze){if(15<je[ze])return 0;++$e[je[ze]]}if($e[0]==Re)return 0;for(Be[1]=0,Ge=1;15>Ge;++Ge){if($e[Ge]>1<<Ge)return 0;Be[Ge+1]=Be[Ge]+$e[Ge]}for(ze=0;ze<Re;++ze)Ge=je[ze],0<je[ze]&&(Ke[Be[Ge]++]=ze);if(Be[15]==1)return(je=new R).g=0,je.value=Ke[0],W(de,ft,1,rt,je),rt;var at,st=-1,lt=rt-1,Ht=0,Rt=1,un=1,qt=1<<ge;for(ze=0,Ge=1,Re=2;Ge<=ge;++Ge,Re<<=1){if(Rt+=un<<=1,0>(un-=$e[Ge]))return 0;for(;0<$e[Ge];--$e[Ge])(je=new R).g=Ge,je.value=Ke[ze++],W(de,ft+Ht,Re,qt,je),Ht=U(Ht,Ge)}for(Ge=ge+1,Re=2;15>=Ge;++Ge,Re<<=1){if(Rt+=un<<=1,0>(un-=$e[Ge]))return 0;for(;0<$e[Ge];--$e[Ge]){if(je=new R,(Ht&lt)!=st){for(ft+=qt,at=1<<(st=Ge)-ge;15>st&&!(0>=(at-=$e[st]));)++st,at<<=1;rt+=qt=1<<(at=st-ge),de[pe+(st=Ht&lt)].g=at+ge,de[pe+st].value=ft-pe-st}je.g=Ge-ge,je.value=Ke[ze++],W(de,ft+(Ht>>ge),Re,qt,je),Ht=U(Ht,Ge)}}return Rt!=2*Be[15]-1?0:rt})(S,O,V,Y,ee,ie)}function R(){this.value=this.g=0}function z(){this.value=this.g=0}function Z(){this.G=o(5,R),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Yr,z)}function se(S,O,V,Y){t(S!=null),t(O!=null),t(2147483648>Y),S.Ca=254,S.I=0,S.b=-8,S.Ka=0,S.oa=O,S.pa=V,S.Jd=O,S.Yc=V+Y,S.Zc=4<=Y?V+Y-4+1:V,we(S)}function J(S,O){for(var V=0;0<O--;)V|=_e(S,128)<<O;return V}function Q(S,O){var V=J(S,O);return Pe(S)?-V:V}function H(S,O,V,Y){var ee,ie=0;for(t(S!=null),t(O!=null),t(4294967288>Y),S.Sb=Y,S.Ra=0,S.u=0,S.h=0,4<Y&&(Y=4),ee=0;ee<Y;++ee)ie+=O[V+ee]<<8*ee;S.Ra=ie,S.bb=Y,S.oa=O,S.pa=V}function ne(S){for(;8<=S.u&&S.bb<S.Sb;)S.Ra>>>=8,S.Ra+=S.oa[S.pa+S.bb]<<vl-8>>>0,++S.bb,S.u-=8;fe(S)&&(S.h=1,S.u=0)}function ue(S,O){if(t(0<=O),!S.h&&O<=Si){var V=te(S)&$d[O];return S.u+=O,ne(S),V}return S.h=1,S.u=0}function ae(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function G(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function te(S){return S.Ra>>>(S.u&vl-1)>>>0}function fe(S){return t(S.bb<=S.Sb),S.h||S.bb==S.Sb&&S.u>vl}function be(S,O){S.u=O,S.h=fe(S)}function xe(S){S.u>=Bd&&(t(S.u>=Bd),ne(S))}function we(S){t(S!=null&&S.oa!=null),S.pa<S.Zc?(S.I=(S.oa[S.pa++]|S.I<<8)>>>0,S.b+=8):(t(S!=null&&S.oa!=null),S.pa<S.Yc?(S.b+=8,S.I=S.oa[S.pa++]|S.I<<8):S.Ka?S.b=0:(S.I<<=8,S.b+=8,S.Ka=1))}function Pe(S){return J(S,1)}function _e(S,O){var V=S.Ca;0>S.b&&we(S);var Y=S.b,ee=V*O>>>8,ie=(S.I>>>Y>ee)+0;for(ie?(V-=ee,S.I-=ee+1<<Y>>>0):V=ee+1,Y=V,ee=0;256<=Y;)ee+=8,Y>>=8;return Y=7^ee+ia[Y],S.b-=Y,S.Ca=(V<<Y)-1,ie}function Ve(S,O,V){S[O+0]=V>>24&255,S[O+1]=V>>16&255,S[O+2]=V>>8&255,S[O+3]=V>>0&255}function Ue(S,O){return S[O+0]<<0|S[O+1]<<8}function Le(S,O){return Ue(S,O)|S[O+2]<<16}function dt(S,O){return Ue(S,O)|Ue(S,O+2)<<16}function xt(S,O){var V=1<<O;return t(S!=null),t(0<O),S.X=i(V),S.X==null?0:(S.Mb=32-O,S.Xa=O,1)}function Xe(S,O){t(S!=null),t(O!=null),t(S.Xa==O.Xa),s(O.X,0,S.X,0,1<<O.Xa)}function ke(){this.X=[],this.Xa=this.Mb=0}function Bt(S,O,V,Y){t(V!=null),t(Y!=null);var ee=V[0],ie=Y[0];return ee==0&&(ee=(S*ie+O/2)/O),ie==0&&(ie=(O*ee+S/2)/S),0>=ee||0>=ie?0:(V[0]=ee,Y[0]=ie,1)}function Ft(S,O){return S+(1<<O)-1>>>O}function mt(S,O){return((4278255360&S)+(4278255360&O)>>>0&4278255360)+((16711935&S)+(16711935&O)>>>0&16711935)>>>0}function yt(S,O){F[O]=function(V,Y,ee,ie,de,pe,ge){var je;for(je=0;je<de;++je){var Re=F[S](pe[ge+je-1],ee,ie+je);pe[ge+je]=mt(V[Y+je],Re)}}}function Tt(){this.ud=this.hd=this.jd=0}function St(S,O){return((4278124286&(S^O))>>>1)+(S&O)>>>0}function Kt(S){return 0<=S&&256>S?S:0>S?0:255<S?255:void 0}function mn(S,O){return Kt(S+(S-O+.5>>1))}function jn(S,O,V){return Math.abs(O-V)-Math.abs(S-V)}function Ln(S,O,V,Y,ee,ie,de){for(Y=ie[de-1],V=0;V<ee;++V)ie[de+V]=Y=mt(S[O+V],Y)}function Wn(S,O,V,Y,ee){var ie;for(ie=0;ie<V;++ie){var de=S[O+ie],pe=de>>8&255,ge=16711935&(ge=(ge=16711935&de)+((pe<<16)+pe));Y[ee+ie]=(4278255360&de)+ge>>>0}}function lr(S,O){O.jd=S>>0&255,O.hd=S>>8&255,O.ud=S>>16&255}function pn(S,O,V,Y,ee,ie){var de;for(de=0;de<Y;++de){var pe=O[V+de],ge=pe>>>8,je=pe,Re=255&(Re=(Re=pe>>>16)+((S.jd<<24>>24)*(ge<<24>>24)>>>5));je=255&(je=(je=je+((S.hd<<24>>24)*(ge<<24>>24)>>>5))+((S.ud<<24>>24)*(Re<<24>>24)>>>5)),ee[ie+de]=(4278255360&pe)+(Re<<16)+je}}function Tn(S,O,V,Y,ee){F[O]=function(ie,de,pe,ge,je,Re,Ke,Ge,ze){for(ge=Ke;ge<Ge;++ge)for(Ke=0;Ke<ze;++Ke)je[Re++]=ee(pe[Y(ie[de++])])},F[S]=function(ie,de,pe,ge,je,Re,Ke){var Ge=8>>ie.b,ze=ie.Ea,ft=ie.K[0],rt=ie.w;if(8>Ge)for(ie=(1<<ie.b)-1,rt=(1<<Ge)-1;de<pe;++de){var $e,Be=0;for($e=0;$e<ze;++$e)$e&ie||(Be=Y(ge[je++])),Re[Ke++]=ee(ft[Be&rt]),Be>>=Ge}else F["VP8LMapColor"+V](ge,je,ft,rt,Re,Ke,de,pe,ze)}}function It(S,O,V,Y,ee){for(V=O+V;O<V;){var ie=S[O++];Y[ee++]=ie>>16&255,Y[ee++]=ie>>8&255,Y[ee++]=ie>>0&255}}function Vs(S,O,V,Y,ee){for(V=O+V;O<V;){var ie=S[O++];Y[ee++]=ie>>16&255,Y[ee++]=ie>>8&255,Y[ee++]=ie>>0&255,Y[ee++]=ie>>24&255}}function Qn(S,O,V,Y,ee){for(V=O+V;O<V;){var ie=(de=S[O++])>>16&240|de>>12&15,de=de>>0&240|de>>28&15;Y[ee++]=ie,Y[ee++]=de}}function Na(S,O,V,Y,ee){for(V=O+V;O<V;){var ie=(de=S[O++])>>16&248|de>>13&7,de=de>>5&224|de>>3&31;Y[ee++]=ie,Y[ee++]=de}}function gr(S,O,V,Y,ee){for(V=O+V;O<V;){var ie=S[O++];Y[ee++]=ie>>0&255,Y[ee++]=ie>>8&255,Y[ee++]=ie>>16&255}}function ur(S,O,V,Y,ee,ie){if(ie==0)for(V=O+V;O<V;)Ve(Y,((ie=S[O++])[0]>>24|ie[1]>>8&65280|ie[2]<<8&16711680|ie[3]<<24)>>>0),ee+=32;else s(Y,ee,S,O,V)}function Nr(S,O){F[O][0]=F[S+"0"],F[O][1]=F[S+"1"],F[O][2]=F[S+"2"],F[O][3]=F[S+"3"],F[O][4]=F[S+"4"],F[O][5]=F[S+"5"],F[O][6]=F[S+"6"],F[O][7]=F[S+"7"],F[O][8]=F[S+"8"],F[O][9]=F[S+"9"],F[O][10]=F[S+"10"],F[O][11]=F[S+"11"],F[O][12]=F[S+"12"],F[O][13]=F[S+"13"],F[O][14]=F[S+"0"],F[O][15]=F[S+"0"]}function nr(S){return S==Hc||S==rc||S==Fu||S==m}function $a(){this.eb=[],this.size=this.A=this.fb=0}function kr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function rs(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new $a,this.f.kb=new kr,this.sd=null}function Ts(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Br(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Oe(S){return alert("todo:WebPSamplerProcessPlane"),S.T}function ot(S,O){var V=S.T,Y=O.ba.f.RGBA,ee=Y.eb,ie=Y.fb+S.ka*Y.A,de=da[O.ba.S],pe=S.y,ge=S.O,je=S.f,Re=S.N,Ke=S.ea,Ge=S.W,ze=O.cc,ft=O.dc,rt=O.Mc,$e=O.Nc,Be=S.ka,at=S.ka+S.T,st=S.U,lt=st+1>>1;for(Be==0?de(pe,ge,null,null,je,Re,Ke,Ge,je,Re,Ke,Ge,ee,ie,null,null,st):(de(O.ec,O.fc,pe,ge,ze,ft,rt,$e,je,Re,Ke,Ge,ee,ie-Y.A,ee,ie,st),++V);Be+2<at;Be+=2)ze=je,ft=Re,rt=Ke,$e=Ge,Re+=S.Rc,Ge+=S.Rc,ie+=2*Y.A,de(pe,(ge+=2*S.fa)-S.fa,pe,ge,ze,ft,rt,$e,je,Re,Ke,Ge,ee,ie-Y.A,ee,ie,st);return ge+=S.fa,S.j+at<S.o?(s(O.ec,O.fc,pe,ge,st),s(O.cc,O.dc,je,Re,lt),s(O.Mc,O.Nc,Ke,Ge,lt),V--):1&at||de(pe,ge,null,null,je,Re,Ke,Ge,je,Re,Ke,Ge,ee,ie+Y.A,null,null,st),V}function an(S,O,V){var Y=S.F,ee=[S.J];if(Y!=null){var ie=S.U,de=O.ba.S,pe=de==Ud||de==Fu;O=O.ba.f.RGBA;var ge=[0],je=S.ka;ge[0]=S.T,S.Kb&&(je==0?--ge[0]:(--je,ee[0]-=S.width),S.j+S.ka+S.T==S.o&&(ge[0]=S.o-S.j-je));var Re=O.eb;je=O.fb+je*O.A,S=vr(Y,ee[0],S.width,ie,ge,Re,je+(pe?0:3),O.A),t(V==ge),S&&nr(de)&&Fs(Re,je,pe,ie,ge,O.A)}return 0}function on(S){var O=S.ma,V=O.ba.S,Y=11>V,ee=V==jl||V==Vd||V==Ud||V==Ar||V==12||nr(V);if(O.memory=null,O.Ib=null,O.Jb=null,O.Nd=null,!Fd(O.Oa,S,ee?11:12))return 0;if(ee&&nr(V)&&vt(),S.da)alert("todo:use_scaling");else{if(Y){if(O.Ib=Oe,S.Kb){if(V=S.U+1>>1,O.memory=i(S.U+2*V),O.memory==null)return 0;O.ec=O.memory,O.fc=0,O.cc=O.ec,O.dc=O.fc+S.U,O.Mc=O.cc,O.Nc=O.dc+V,O.Ib=ot,vt()}}else alert("todo:EmitYUV");ee&&(O.Jb=an,Y&&We())}if(Y&&!Ua){for(S=0;256>S;++S)Gi[S]=89858*(S-128)+wl>>Kc,Zi[S]=-22014*(S-128)+wl,Dh[S]=-45773*(S-128),Bu[S]=113618*(S-128)+wl>>Kc;for(S=Ir;S<zr;++S)O=76283*(S-16)+wl>>Kc,hp[S-Ir]=is(O,255),gy[S-Ir]=is(O+8>>4,15);Ua=1}return 1}function Kn(S){var O=S.ma,V=S.U,Y=S.T;return t(!(1&S.ka)),0>=V||0>=Y?0:(V=O.Ib(S,O),O.Jb!=null&&O.Jb(S,O,V),O.Dc+=V,1)}function ss(S){S.ma.memory=null}function Ut(S,O,V,Y){return ue(S,8)!=47?0:(O[0]=ue(S,14)+1,V[0]=ue(S,14)+1,Y[0]=ue(S,1),ue(S,3)!=0?0:!S.h)}function es(S,O){if(4>S)return S+1;var V=S-2>>1;return(2+(1&S)<<V)+ue(O,V)+1}function hs(S,O){return 120<O?O-120:1<=(V=((V=Ee[O-1])>>4)*S+(8-(15&V)))?V:1;var V}function fr(S,O,V){var Y=te(V),ee=S[O+=255&Y].g-8;return 0<ee&&(be(V,V.u+8),Y=te(V),O+=S[O].value,O+=Y&(1<<ee)-1),be(V,V.u+S[O].g),S[O].value}function wn(S,O,V){return V.g+=S.g,V.value+=S.value<<O>>>0,t(8>=V.g),S.g}function Et(S,O,V){var Y=S.xc;return t((O=Y==0?0:S.vc[S.md*(V>>Y)+(O>>Y)])<S.Wb),S.Ya[O]}function fs(S,O,V,Y){var ee=S.ab,ie=S.c*O,de=S.C;O=de+O;var pe=V,ge=Y;for(Y=S.Ta,V=S.Ua;0<ee--;){var je=S.gc[ee],Re=de,Ke=O,Ge=pe,ze=ge,ft=(ge=Y,pe=V,je.Ea);switch(t(Re<Ke),t(Ke<=je.nc),je.hc){case 2:Oh(Ge,ze,(Ke-Re)*ft,ge,pe);break;case 0:var rt=Re,$e=Ke,Be=ge,at=pe,st=(qt=je).Ea;rt==0&&(qc(Ge,ze,null,null,1,Be,at),Ln(Ge,ze+1,0,0,st-1,Be,at+1),ze+=st,at+=st,++rt);for(var lt=1<<qt.b,Ht=lt-1,Rt=Ft(st,qt.b),un=qt.K,qt=qt.w+(rt>>qt.b)*Rt;rt<$e;){var yr=un,br=qt,hr=1;for(oa(Ge,ze,Be,at-st,1,Be,at);hr<st;){var Un=(hr&~Ht)+lt;Un>st&&(Un=st),(0,vo[yr[br++]>>8&15])(Ge,ze+ +hr,Be,at+hr-st,Un-hr,Be,at+hr),hr=Un}ze+=st,at+=st,++rt&Ht||(qt+=Rt)}Ke!=je.nc&&s(ge,pe-ft,ge,pe+(Ke-Re-1)*ft,ft);break;case 1:for(ft=Ge,$e=ze,st=(Ge=je.Ea)-(at=Ge&~(Be=(ze=1<<je.b)-1)),rt=Ft(Ge,je.b),lt=je.K,je=je.w+(Re>>je.b)*rt;Re<Ke;){for(Ht=lt,Rt=je,un=new Tt,qt=$e+at,yr=$e+Ge;$e<qt;)lr(Ht[Rt++],un),Ko(un,ft,$e,ze,ge,pe),$e+=ze,pe+=ze;$e<yr&&(lr(Ht[Rt++],un),Ko(un,ft,$e,st,ge,pe),$e+=st,pe+=st),++Re&Be||(je+=rt)}break;case 3:if(Ge==ge&&ze==pe&&0<je.b){for($e=ge,Ge=ft=pe+(Ke-Re)*ft-(at=(Ke-Re)*Ft(je.Ea,je.b)),ze=ge,Be=pe,rt=[],at=(st=at)-1;0<=at;--at)rt[at]=ze[Be+at];for(at=st-1;0<=at;--at)$e[Ge+at]=rt[at];Ms(je,Re,Ke,ge,ft,ge,pe)}else Ms(je,Re,Ke,Ge,ze,ge,pe)}pe=Y,ge=V}ge!=V&&s(Y,V,pe,ge,ie)}function _s(S,O){var V=S.V,Y=S.Ba+S.c*S.C,ee=O-S.C;if(t(O<=S.l.o),t(16>=ee),0<ee){var ie=S.l,de=S.Ta,pe=S.Ua,ge=ie.width;if(fs(S,ee,V,Y),ee=pe=[pe],t((V=S.C)<(Y=O)),t(ie.v<ie.va),Y>ie.o&&(Y=ie.o),V<ie.j){var je=ie.j-V;V=ie.j,ee[0]+=je*ge}if(V>=Y?V=0:(ee[0]+=4*ie.v,ie.ka=V-ie.j,ie.U=ie.va-ie.v,ie.T=Y-V,V=1),V){if(pe=pe[0],11>(V=S.ca).S){var Re=V.f.RGBA,Ke=(Y=V.S,ee=ie.U,ie=ie.T,je=Re.eb,Re.A),Ge=ie;for(Re=Re.fb+S.Ma*Re.A;0<Ge--;){var ze=de,ft=pe,rt=ee,$e=je,Be=Re;switch(Y){case Mh:Ws(ze,ft,rt,$e,Be);break;case jl:Ks(ze,ft,rt,$e,Be);break;case Hc:Ks(ze,ft,rt,$e,Be),Fs($e,Be,0,rt,1,0);break;case Kf:Vi(ze,ft,rt,$e,Be);break;case Vd:ur(ze,ft,rt,$e,Be,1);break;case rc:ur(ze,ft,rt,$e,Be,1),Fs($e,Be,0,rt,1,0);break;case Ud:ur(ze,ft,rt,$e,Be,0);break;case Fu:ur(ze,ft,rt,$e,Be,0),Fs($e,Be,1,rt,1,0);break;case Ar:yo(ze,ft,rt,$e,Be);break;case m:yo(ze,ft,rt,$e,Be),Sr($e,Be,rt,1,0);break;case Lh:li(ze,ft,rt,$e,Be);break;default:t(0)}pe+=ge,Re+=Ke}S.Ma+=ie}else alert("todo:EmitRescaledRowsYUVA");t(S.Ma<=V.height)}}S.C=O,t(S.C<=S.i)}function na(S){var O;if(0<S.ua)return 0;for(O=0;O<S.Wb;++O){var V=S.Ya[O].G,Y=S.Ya[O].H;if(0<V[1][Y[1]+0].g||0<V[2][Y[2]+0].g||0<V[3][Y[3]+0].g)return 0}return 1}function Ba(S,O,V,Y,ee,ie){if(S.Z!=0){var de=S.qd,pe=S.rd;for(t(ir[S.Z]!=null);O<V;++O)ir[S.Z](de,pe,Y,ee,Y,ee,ie),de=Y,pe=ee,ee+=ie;S.qd=de,S.rd=pe}}function wi(S,O){var V=S.l.ma,Y=V.Z==0||V.Z==1?S.l.j:S.C;if(Y=S.C<Y?Y:S.C,t(O<=S.l.o),O>Y){var ee=S.l.width,ie=V.ca,de=V.tb+ee*Y,pe=S.V,ge=S.Ba+S.c*Y,je=S.gc;t(S.ab==1),t(je[0].hc==3),Pi(je[0],Y,O,pe,ge,ie,de),Ba(V,Y,O,ie,de,ee)}S.C=S.Ma=O}function Us(S,O,V,Y,ee,ie,de){var pe=S.$/Y,ge=S.$%Y,je=S.m,Re=S.s,Ke=V+S.$,Ge=Ke;ee=V+Y*ee;var ze=V+Y*ie,ft=280+Re.ua,rt=S.Pb?pe:16777216,$e=0<Re.ua?Re.Wa:null,Be=Re.wc,at=Ke<ze?Et(Re,ge,pe):null;t(S.C<ie),t(ze<=ee);var st=!1;e:for(;;){for(;st||Ke<ze;){var lt=0;if(pe>=rt){var Ht=Ke-V;t((rt=S).Pb),rt.wd=rt.m,rt.xd=Ht,0<rt.s.ua&&Xe(rt.s.Wa,rt.s.vb),rt=pe+Je}if(ge&Be||(at=Et(Re,ge,pe)),t(at!=null),at.Qb&&(O[Ke]=at.qb,st=!0),!st)if(xe(je),at.jc){lt=je,Ht=O;var Rt=Ke,un=at.pd[te(lt)&Yr-1];t(at.jc),256>un.g?(be(lt,lt.u+un.g),Ht[Rt]=un.value,lt=0):(be(lt,lt.u+un.g-256),t(256<=un.value),lt=un.value),lt==0&&(st=!0)}else lt=fr(at.G[0],at.H[0],je);if(je.h)break;if(st||256>lt){if(!st)if(at.nd)O[Ke]=(at.qb|lt<<8)>>>0;else{if(xe(je),st=fr(at.G[1],at.H[1],je),xe(je),Ht=fr(at.G[2],at.H[2],je),Rt=fr(at.G[3],at.H[3],je),je.h)break;O[Ke]=(Rt<<24|st<<16|lt<<8|Ht)>>>0}if(st=!1,++Ke,++ge>=Y&&(ge=0,++pe,de!=null&&pe<=ie&&!(pe%16)&&de(S,pe),$e!=null))for(;Ge<Ke;)lt=O[Ge++],$e.X[(506832829*lt&4294967295)>>>$e.Mb]=lt}else if(280>lt){if(lt=es(lt-256,je),Ht=fr(at.G[4],at.H[4],je),xe(je),Ht=hs(Y,Ht=es(Ht,je)),je.h)break;if(Ke-V<Ht||ee-Ke<lt)break e;for(Rt=0;Rt<lt;++Rt)O[Ke+Rt]=O[Ke+Rt-Ht];for(Ke+=lt,ge+=lt;ge>=Y;)ge-=Y,++pe,de!=null&&pe<=ie&&!(pe%16)&&de(S,pe);if(t(Ke<=ee),ge&Be&&(at=Et(Re,ge,pe)),$e!=null)for(;Ge<Ke;)lt=O[Ge++],$e.X[(506832829*lt&4294967295)>>>$e.Mb]=lt}else{if(!(lt<ft))break e;for(st=lt-280,t($e!=null);Ge<Ke;)lt=O[Ge++],$e.X[(506832829*lt&4294967295)>>>$e.Mb]=lt;lt=Ke,t(!(st>>>(Ht=$e).Xa)),O[lt]=Ht.X[st],st=!0}st||t(je.h==fe(je))}if(S.Pb&&je.h&&Ke<ee)t(S.m.h),S.a=5,S.m=S.wd,S.$=S.xd,0<S.s.ua&&Xe(S.s.vb,S.s.Wa);else{if(je.h)break e;de!=null&&de(S,pe>ie?ie:pe),S.a=0,S.$=Ke-V}return 1}return S.a=3,0}function ka(S){t(S!=null),S.vc=null,S.yc=null,S.Ya=null;var O=S.Wa;O!=null&&(O.X=null),S.vb=null,t(S!=null)}function ai(){var S=new Du;return S==null?null:(S.a=0,S.xb=Wc,Nr("Predictor","VP8LPredictors"),Nr("Predictor","VP8LPredictors_C"),Nr("PredictorAdd","VP8LPredictorsAdd"),Nr("PredictorAdd","VP8LPredictorsAdd_C"),Oh=Wn,Ko=pn,Ws=It,Ks=Vs,yo=Qn,li=Na,Vi=gr,F.VP8LMapColor32b=qd,F.VP8LMapColor8b=yl,S)}function Ro(S,O,V,Y,ee){var ie=1,de=[S],pe=[O],ge=Y.m,je=Y.s,Re=null,Ke=0;e:for(;;){if(V)for(;ie&&ue(ge,1);){var Ge=de,ze=pe,ft=Y,rt=1,$e=ft.m,Be=ft.gc[ft.ab],at=ue($e,2);if(ft.Oc&1<<at)ie=0;else{switch(ft.Oc|=1<<at,Be.hc=at,Be.Ea=Ge[0],Be.nc=ze[0],Be.K=[null],++ft.ab,t(4>=ft.ab),at){case 0:case 1:Be.b=ue($e,3)+2,rt=Ro(Ft(Be.Ea,Be.b),Ft(Be.nc,Be.b),0,ft,Be.K),Be.K=Be.K[0];break;case 3:var st,lt=ue($e,8)+1,Ht=16<lt?0:4<lt?1:2<lt?2:3;if(Ge[0]=Ft(Be.Ea,Ht),Be.b=Ht,st=rt=Ro(lt,1,0,ft,Be.K)){var Rt,un=lt,qt=Be,yr=1<<(8>>qt.b),br=i(yr);if(br==null)st=0;else{var hr=qt.K[0],Un=qt.w;for(br[0]=qt.K[0][0],Rt=1;Rt<1*un;++Rt)br[Rt]=mt(hr[Un+Rt],br[Rt-1]);for(;Rt<4*yr;++Rt)br[Rt]=0;qt.K[0]=null,qt.K[0]=br,st=1}}rt=st;break;case 2:break;default:t(0)}ie=rt}}if(de=de[0],pe=pe[0],ie&&ue(ge,1)&&!(ie=1<=(Ke=ue(ge,4))&&11>=Ke)){Y.a=3;break e}var Rr;if(Rr=ie)t:{var Vr,Mn,Ns,Oi=Y,Bs=de,ua=pe,Cr=Ke,ui=V,hi=Oi.m,ks=Oi.s,ha=[null],Ha=1,Yi=0,el=Ze[Cr];n:for(;;){if(ui&&ue(hi,1)){var Ss=ue(hi,3)+2,Gs=Ft(Bs,Ss),wo=Ft(ua,Ss),Kd=Gs*wo;if(!Ro(Gs,wo,0,Oi,ha))break n;for(ha=ha[0],ks.xc=Ss,Vr=0;Vr<Kd;++Vr){var Zc=ha[Vr]>>8&65535;ha[Vr]=Zc,Zc>=Ha&&(Ha=Zc+1)}}if(hi.h)break n;for(Mn=0;5>Mn;++Mn){var Tr=B[Mn];!Mn&&0<Cr&&(Tr+=1<<Cr),Yi<Tr&&(Yi=Tr)}var oc=o(Ha*el,R),fp=Ha,zg=o(fp,Z);if(zg==null)var tl=null;else t(65536>=fp),tl=zg;var nl=i(Yi);if(tl==null||nl==null||oc==null){Oi.a=1;break n}var zu=oc;for(Vr=Ns=0;Vr<Ha;++Vr){var rl=tl[Vr],Yc=rl.G,Vu=rl.H,Ih=0,_o=1,Rh=0;for(Mn=0;5>Mn;++Mn){Tr=B[Mn],Yc[Mn]=zu,Vu[Mn]=Ns,!Mn&&0<Cr&&(Tr+=1<<Cr);s:{var Gd,Xc=Tr,Fh=Oi,lc=nl,yy=zu,Vg=Ns,os=0,_l=Fh.m,Ug=ue(_l,1);if(a(lc,0,0,Xc),Ug){var Hg=ue(_l,1)+1,mp=ue(_l,1),pp=ue(_l,mp==0?1:8);lc[pp]=1,Hg==2&&(lc[pp=ue(_l,8)]=1);var cc=1}else{var gs=i(19),Zs=ue(_l,4)+4;if(19<Zs){Fh.a=3;var qs=0;break s}for(Gd=0;Gd<Zs;++Gd)gs[me[Gd]]=ue(_l,3);var $h=void 0,Qc=void 0,Bh=Fh,Dw=gs,fa=Xc,xp=lc,Yf=0,dc=Bh.m,Nl=8,No=o(128,R);r:for(;D(No,0,7,Dw,19);){if(ue(dc,1)){var Xf=2+2*ue(dc,3);if(($h=2+ue(dc,Xf))>fa)break r}else $h=fa;for(Qc=0;Qc<fa&&$h--;){xe(dc);var gp=No[0+(127&te(dc))];be(dc,dc.u+gp.g);var Zd=gp.value;if(16>Zd)xp[Qc++]=Zd,Zd!=0&&(Nl=Zd);else{var by=Zd==16,Wg=Zd-16,jy=T[Wg],Kg=ue(dc,_[Wg])+jy;if(Qc+Kg>fa)break r;for(var wy=by?Nl:0;0<Kg--;)xp[Qc++]=wy}}Yf=1;break r}Yf||(Bh.a=3),cc=Yf}(cc=cc&&!_l.h)&&(os=D(yy,Vg,8,lc,Xc)),cc&&os!=0?qs=os:(Fh.a=3,qs=0)}if(qs==0)break n;if(_o&&X[Mn]==1&&(_o=zu[Ns].g==0),Ih+=zu[Ns].g,Ns+=qs,3>=Mn){var qh,vp=nl[0];for(qh=1;qh<Tr;++qh)nl[qh]>vp&&(vp=nl[qh]);Rh+=vp}}if(rl.nd=_o,rl.Qb=0,_o&&(rl.qb=(Yc[3][Vu[3]+0].value<<24|Yc[1][Vu[1]+0].value<<16|Yc[2][Vu[2]+0].value)>>>0,Ih==0&&256>Yc[0][Vu[0]+0].value&&(rl.Qb=1,rl.qb+=Yc[0][Vu[0]+0].value<<8)),rl.jc=!rl.Qb&&6>Rh,rl.jc){var Qf,ko=rl;for(Qf=0;Qf<Yr;++Qf){var Jc=Qf,kl=ko.pd[Jc],Uu=ko.G[0][ko.H[0]+Jc];256<=Uu.value?(kl.g=Uu.g+256,kl.value=Uu.value):(kl.g=0,kl.value=0,Jc>>=wn(Uu,8,kl),Jc>>=wn(ko.G[1][ko.H[1]+Jc],16,kl),Jc>>=wn(ko.G[2][ko.H[2]+Jc],0,kl),wn(ko.G[3][ko.H[3]+Jc],24,kl))}}}ks.vc=ha,ks.Wb=Ha,ks.Ya=tl,ks.yc=oc,Rr=1;break t}Rr=0}if(!(ie=Rr)){Y.a=3;break e}if(0<Ke){if(je.ua=1<<Ke,!xt(je.Wa,Ke)){Y.a=1,ie=0;break e}}else je.ua=0;var yp=Y,bp=de,_y=pe,jp=yp.s,wp=jp.xc;if(yp.c=bp,yp.i=_y,jp.md=Ft(bp,wp),jp.wc=wp==0?-1:(1<<wp)-1,V){Y.xb=Jo;break e}if((Re=i(de*pe))==null){Y.a=1,ie=0;break e}ie=(ie=Us(Y,Re,0,de,pe,pe,null))&&!ge.h;break e}return ie?(ee!=null?ee[0]=Re:(t(Re==null),t(V)),Y.$=0,V||ka(je)):ka(je),ie}function zl(S,O){var V=S.c*S.i,Y=V+O+16*O;return t(S.c<=O),S.V=i(Y),S.V==null?(S.Ta=null,S.Ua=0,S.a=1,0):(S.Ta=S.V,S.Ua=S.Ba+V+O,1)}function Tc(S,O){var V=S.C,Y=O-V,ee=S.V,ie=S.Ba+S.c*V;for(t(O<=S.l.o);0<Y;){var de=16<Y?16:Y,pe=S.l.ma,ge=S.l.width,je=ge*de,Re=pe.ca,Ke=pe.tb+ge*V,Ge=S.Ta,ze=S.Ua;fs(S,de,ee,ie),xs(Ge,ze,Re,Ke,je),Ba(pe,V,V+de,Re,Ke,ge),Y-=de,ee+=de*S.c,V+=de}t(V==O),S.C=S.Ma=O}function Ec(){this.ub=this.yd=this.td=this.Rb=0}function Vl(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Sd(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Oc(){this.Yb=(function(){var S=[];return(function O(V,Y,ee){for(var ie=ee[Y],de=0;de<ie&&(V.push(ee.length>Y+1?[]:0),!(ee.length<Y+1));de++)O(V[de],Y+1,ee)})(S,0,[3,11]),S})()}function as(){this.jb=i(3),this.Wc=l([4,8],Oc),this.Xc=l([4,17],Oc)}function Wf(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Ul(){this.ld=this.La=this.dd=this.tc=0}function Tu(){this.Na=this.la=0}function Pd(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Mc(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Hl(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ul),this.Y=0,this.ya=Array(new Mc),this.aa=0,this.l=new Fo}function Wl(){this.y=i(16),this.f=i(8),this.ea=i(8)}function _i(){this.cb=this.a=0,this.sc="",this.m=new ae,this.Od=new Ec,this.Kc=new Vl,this.ed=new Wf,this.Qa=new Sd,this.Ic=this.$c=this.Aa=0,this.D=new Hl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,ae),this.ia=0,this.pb=o(4,Pd),this.Pa=new as,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Wl),this.Hd=0,this.rb=Array(new Tu),this.sb=0,this.wa=Array(new Ul),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Mc),this.L=this.aa=0,this.gd=l([4,2],Ul),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Fo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function En(){var S=new _i;return S!=null&&(S.a=0,S.sc="OK",S.cb=0,S.Xb=0,dn||(dn=Fi)),S}function Dn(S,O,V){return S.a==0&&(S.a=O,S.sc=V,S.cb=0),0}function Lc(S,O,V){return 3<=V&&S[O+0]==157&&S[O+1]==1&&S[O+2]==42}function ml(S,O){if(S==null)return 0;if(S.a=0,S.sc="OK",O==null)return Dn(S,2,"null VP8Io passed to VP8GetHeaders()");var V=O.data,Y=O.w,ee=O.ha;if(4>ee)return Dn(S,7,"Truncated header.");var ie=V[Y+0]|V[Y+1]<<8|V[Y+2]<<16,de=S.Od;if(de.Rb=!(1&ie),de.td=ie>>1&7,de.yd=ie>>4&1,de.ub=ie>>5,3<de.td)return Dn(S,3,"Incorrect keyframe parameters.");if(!de.yd)return Dn(S,4,"Frame not displayable.");Y+=3,ee-=3;var pe=S.Kc;if(de.Rb){if(7>ee)return Dn(S,7,"cannot parse picture header");if(!Lc(V,Y,ee))return Dn(S,3,"Bad code word");pe.c=16383&(V[Y+4]<<8|V[Y+3]),pe.Td=V[Y+4]>>6,pe.i=16383&(V[Y+6]<<8|V[Y+5]),pe.Ud=V[Y+6]>>6,Y+=7,ee-=7,S.za=pe.c+15>>4,S.Ub=pe.i+15>>4,O.width=pe.c,O.height=pe.i,O.Da=0,O.j=0,O.v=0,O.va=O.width,O.o=O.height,O.da=0,O.ib=O.width,O.hb=O.height,O.U=O.width,O.T=O.height,a((ie=S.Pa).jb,0,255,ie.jb.length),t((ie=S.Qa)!=null),ie.Cb=0,ie.Bb=0,ie.Fb=1,a(ie.Zb,0,0,ie.Zb.length),a(ie.Lb,0,0,ie.Lb)}if(de.ub>ee)return Dn(S,7,"bad partition length");se(ie=S.m,V,Y,de.ub),Y+=de.ub,ee-=de.ub,de.Rb&&(pe.Ld=Pe(ie),pe.Kd=Pe(ie)),pe=S.Qa;var ge,je=S.Pa;if(t(ie!=null),t(pe!=null),pe.Cb=Pe(ie),pe.Cb){if(pe.Bb=Pe(ie),Pe(ie)){for(pe.Fb=Pe(ie),ge=0;4>ge;++ge)pe.Zb[ge]=Pe(ie)?Q(ie,7):0;for(ge=0;4>ge;++ge)pe.Lb[ge]=Pe(ie)?Q(ie,6):0}if(pe.Bb)for(ge=0;3>ge;++ge)je.jb[ge]=Pe(ie)?J(ie,8):255}else pe.Bb=0;if(ie.Ka)return Dn(S,3,"cannot parse segment header");if((pe=S.ed).zd=Pe(ie),pe.Tb=J(ie,6),pe.wb=J(ie,3),pe.Pc=Pe(ie),pe.Pc&&Pe(ie)){for(je=0;4>je;++je)Pe(ie)&&(pe.vd[je]=Q(ie,6));for(je=0;4>je;++je)Pe(ie)&&(pe.od[je]=Q(ie,6))}if(S.L=pe.Tb==0?0:pe.zd?1:2,ie.Ka)return Dn(S,3,"cannot parse filter header");var Re=ee;if(ee=ge=Y,Y=ge+Re,pe=Re,S.Xb=(1<<J(S.m,2))-1,Re<3*(je=S.Xb))V=7;else{for(ge+=3*je,pe-=3*je,Re=0;Re<je;++Re){var Ke=V[ee+0]|V[ee+1]<<8|V[ee+2]<<16;Ke>pe&&(Ke=pe),se(S.Jc[+Re],V,ge,Ke),ge+=Ke,pe-=Ke,ee+=3}se(S.Jc[+je],V,ge,pe),V=ge<Y?0:5}if(V!=0)return Dn(S,V,"cannot parse partitions");for(V=J(ge=S.m,7),ee=Pe(ge)?Q(ge,4):0,Y=Pe(ge)?Q(ge,4):0,pe=Pe(ge)?Q(ge,4):0,je=Pe(ge)?Q(ge,4):0,ge=Pe(ge)?Q(ge,4):0,Re=S.Qa,Ke=0;4>Ke;++Ke){if(Re.Cb){var Ge=Re.Zb[Ke];Re.Fb||(Ge+=V)}else{if(0<Ke){S.pb[Ke]=S.pb[0];continue}Ge=V}var ze=S.pb[Ke];ze.Sc[0]=pt[is(Ge+ee,127)],ze.Sc[1]=zt[is(Ge+0,127)],ze.Eb[0]=2*pt[is(Ge+Y,127)],ze.Eb[1]=101581*zt[is(Ge+pe,127)]>>16,8>ze.Eb[1]&&(ze.Eb[1]=8),ze.Qc[0]=pt[is(Ge+je,117)],ze.Qc[1]=zt[is(Ge+ge,127)],ze.lc=Ge+ge}if(!de.Rb)return Dn(S,4,"Not a key frame.");for(Pe(ie),de=S.Pa,V=0;4>V;++V){for(ee=0;8>ee;++ee)for(Y=0;3>Y;++Y)for(pe=0;11>pe;++pe)je=_e(ie,Hd[V][ee][Y][pe])?J(ie,8):Ei[V][ee][Y][pe],de.Wc[V][ee].Yb[Y][pe]=je;for(ee=0;17>ee;++ee)de.Xc[V][ee]=de.Wc[V][Gf[ee]]}return S.kc=Pe(ie),S.kc&&(S.Bd=J(ie,8)),S.cb=1}function Fi(S,O,V,Y,ee,ie,de){var pe=O[ee].Yb[V];for(V=0;16>ee;++ee){if(!_e(S,pe[V+0]))return ee;for(;!_e(S,pe[V+1]);)if(pe=O[++ee].Yb[0],V=0,ee==16)return 16;var ge=O[ee+1].Yb;if(_e(S,pe[V+2])){var je=S,Re=0;if(_e(je,(Ge=pe)[(Ke=V)+3]))if(_e(je,Ge[Ke+6])){for(pe=0,Ke=2*(Re=_e(je,Ge[Ke+8]))+(Ge=_e(je,Ge[Ke+9+Re])),Re=0,Ge=Bn[Ke];Ge[pe];++pe)Re+=Re+_e(je,Ge[pe]);Re+=3+(8<<Ke)}else _e(je,Ge[Ke+7])?(Re=7+2*_e(je,165),Re+=_e(je,145)):Re=5+_e(je,159);else Re=_e(je,Ge[Ke+4])?3+_e(je,Ge[Ke+5]):2;pe=ge[2]}else Re=1,pe=ge[1];ge=de+ca[ee],0>(je=S).b&&we(je);var Ke,Ge=je.b,ze=(Ke=je.Ca>>1)-(je.I>>Ge)>>31;--je.b,je.Ca+=ze,je.Ca|=1,je.I-=(Ke+1&ze)<<Ge,ie[ge]=((Re^ze)-ze)*Y[(0<ee)+0]}return 16}function $o(S){var O=S.rb[S.sb-1];O.la=0,O.Na=0,a(S.zc,0,0,S.zc.length),S.ja=0}function _n(S,O){if(S==null)return 0;if(O==null)return Dn(S,2,"NULL VP8Io parameter in VP8Decode().");if(!S.cb&&!ml(S,O))return 0;if(t(S.cb),O.ac==null||O.ac(O)){O.ob&&(S.L=0);var V=qu[S.L];if(S.L==2?(S.yb=0,S.zb=0):(S.yb=O.v-V>>4,S.zb=O.j-V>>4,0>S.yb&&(S.yb=0),0>S.zb&&(S.zb=0)),S.Va=O.o+15+V>>4,S.Hb=O.va+15+V>>4,S.Hb>S.za&&(S.Hb=S.za),S.Va>S.Ub&&(S.Va=S.Ub),0<S.L){var Y=S.ed;for(V=0;4>V;++V){var ee;if(S.Qa.Cb){var ie=S.Qa.Lb[V];S.Qa.Fb||(ie+=Y.Tb)}else ie=Y.Tb;for(ee=0;1>=ee;++ee){var de=S.gd[V][ee],pe=ie;if(Y.Pc&&(pe+=Y.vd[0],ee&&(pe+=Y.od[0])),0<(pe=0>pe?0:63<pe?63:pe)){var ge=pe;0<Y.wb&&(ge=4<Y.wb?ge>>2:ge>>1)>9-Y.wb&&(ge=9-Y.wb),1>ge&&(ge=1),de.dd=ge,de.tc=2*pe+ge,de.ld=40<=pe?2:15<=pe?1:0}else de.tc=0;de.La=ee}}}V=0}else Dn(S,6,"Frame setup failed"),V=S.a;if(V=V==0){if(V){S.$c=0,0<S.Aa||(S.Ic=Gc);e:{V=S.Ic,Y=4*(ge=S.za);var je=32*ge,Re=ge+1,Ke=0<S.L?ge*(0<S.Aa?2:1):0,Ge=(S.Aa==2?2:1)*ge;if((de=Y+832+(ee=3*(16*V+qu[S.L])/2*je)+(ie=S.Fa!=null&&0<S.Fa.length?S.Kc.c*S.Kc.i:0))!=de)V=0;else{if(de>S.Vb){if(S.Vb=0,S.Ec=i(de),S.Fc=0,S.Ec==null){V=Dn(S,1,"no memory during frame initialization.");break e}S.Vb=de}de=S.Ec,pe=S.Fc,S.Ac=de,S.Bc=pe,pe+=Y,S.Gd=o(je,Wl),S.Hd=0,S.rb=o(Re+1,Tu),S.sb=1,S.wa=Ke?o(Ke,Ul):null,S.Y=0,S.D.Nb=0,S.D.wa=S.wa,S.D.Y=S.Y,0<S.Aa&&(S.D.Y+=ge),t(!0),S.oc=de,S.pc=pe,pe+=832,S.ya=o(Ge,Mc),S.aa=0,S.D.ya=S.ya,S.D.aa=S.aa,S.Aa==2&&(S.D.aa+=ge),S.R=16*ge,S.B=8*ge,ge=(je=qu[S.L])*S.R,je=je/2*S.B,S.sa=de,S.ta=pe+ge,S.qa=S.sa,S.ra=S.ta+16*V*S.R+je,S.Ha=S.qa,S.Ia=S.ra+8*V*S.B+je,S.$c=0,pe+=ee,S.mb=ie?de:null,S.nb=ie?pe:null,t(pe+ie<=S.Fc+S.Vb),$o(S),a(S.Ac,S.Bc,0,Y),V=1}}if(V){if(O.ka=0,O.y=S.sa,O.O=S.ta,O.f=S.qa,O.N=S.ra,O.ea=S.Ha,O.Vd=S.Ia,O.fa=S.R,O.Rc=S.B,O.F=null,O.J=0,!Ru){for(V=-255;255>=V;++V)Pr[255+V]=0>V?-V:V;for(V=-1020;1020>=V;++V)bo[1020+V]=-128>V?-128:127<V?127:V;for(V=-112;112>=V;++V)Uc[112+V]=-16>V?-16:15<V?15:V;for(V=-255;510>=V;++V)jo[255+V]=0>V?0:255<V?255:V;Ru=1}nc=rr,Go=Gl,Ui=ii,Ta=ms,ci=$i,mr=Eu,zc=Md,zd=Es,Vc=gl,Ea=Mu,Zo=Xl,Ai=Ql,Hi=Aa,Yo=Ld,Xo=mo,bl=ps,Wi=Sa,la=Ou,Ki[0]=sr,Ki[1]=Ad,Ki[2]=gn,Ki[3]=Is,Ki[4]=Td,Ki[5]=Zl,Ki[6]=Vo,Ki[7]=Yl,Ki[8]=Ed,Ki[9]=qi,za[0]=xl,za[1]=Cd,za[2]=Bi,za[3]=qo,za[4]=qr,za[5]=fo,za[6]=Ni,Va[0]=oi,Va[1]=pl,Va[2]=Dc,Va[3]=Gr,Va[4]=Rc,Va[5]=Ic,Va[6]=Od,V=1}else V=0}V&&(V=(function(ze,ft){for(ze.M=0;ze.M<ze.Va;++ze.M){var rt,$e=ze.Jc[ze.M&ze.Xb],Be=ze.m,at=ze;for(rt=0;rt<at.za;++rt){var st=Be,lt=at,Ht=lt.Ac,Rt=lt.Bc+4*rt,un=lt.zc,qt=lt.ya[lt.aa+rt];if(lt.Qa.Bb?qt.$b=_e(st,lt.Pa.jb[0])?2+_e(st,lt.Pa.jb[2]):_e(st,lt.Pa.jb[1]):qt.$b=0,lt.kc&&(qt.Ad=_e(st,lt.Bd)),qt.Za=!_e(st,145)+0,qt.Za){var yr=qt.Ob,br=0;for(lt=0;4>lt;++lt){var hr,Un=un[0+lt];for(hr=0;4>hr;++hr){Un=di[Ht[Rt+hr]][Un];for(var Rr=$s[_e(st,Un[0])];0<Rr;)Rr=$s[2*Rr+_e(st,Un[Rr])];Un=-Rr,Ht[Rt+hr]=Un}s(yr,br,Ht,Rt,4),br+=4,un[0+lt]=Un}}else Un=_e(st,156)?_e(st,128)?1:3:_e(st,163)?2:0,qt.Ob[0]=Un,a(Ht,Rt,Un,4),a(un,0,Un,4);qt.Dd=_e(st,142)?_e(st,114)?_e(st,183)?1:3:2:0}if(at.m.Ka)return Dn(ze,7,"Premature end-of-partition0 encountered.");for(;ze.ja<ze.za;++ze.ja){if(at=$e,st=(Be=ze).rb[Be.sb-1],Ht=Be.rb[Be.sb+Be.ja],rt=Be.ya[Be.aa+Be.ja],Rt=Be.kc?rt.Ad:0)st.la=Ht.la=0,rt.Za||(st.Na=Ht.Na=0),rt.Hc=0,rt.Gc=0,rt.ia=0;else{var Vr,Mn;if(st=Ht,Ht=at,Rt=Be.Pa.Xc,un=Be.ya[Be.aa+Be.ja],qt=Be.pb[un.$b],lt=un.ad,yr=0,br=Be.rb[Be.sb-1],Un=hr=0,a(lt,yr,0,384),un.Za)var Ns=0,Oi=Rt[3];else{Rr=i(16);var Bs=st.Na+br.Na;if(Bs=dn(Ht,Rt[1],Bs,qt.Eb,0,Rr,0),st.Na=br.Na=(0<Bs)+0,1<Bs)nc(Rr,0,lt,yr);else{var ua=Rr[0]+3>>3;for(Rr=0;256>Rr;Rr+=16)lt[yr+Rr]=ua}Ns=1,Oi=Rt[0]}var Cr=15&st.la,ui=15&br.la;for(Rr=0;4>Rr;++Rr){var hi=1&ui;for(ua=Mn=0;4>ua;++ua)Cr=Cr>>1|(hi=(Bs=dn(Ht,Oi,Bs=hi+(1&Cr),qt.Sc,Ns,lt,yr))>Ns)<<7,Mn=Mn<<2|(3<Bs?3:1<Bs?2:lt[yr+0]!=0),yr+=16;Cr>>=4,ui=ui>>1|hi<<7,hr=(hr<<8|Mn)>>>0}for(Oi=Cr,Ns=ui>>4,Vr=0;4>Vr;Vr+=2){for(Mn=0,Cr=st.la>>4+Vr,ui=br.la>>4+Vr,Rr=0;2>Rr;++Rr){for(hi=1&ui,ua=0;2>ua;++ua)Bs=hi+(1&Cr),Cr=Cr>>1|(hi=0<(Bs=dn(Ht,Rt[2],Bs,qt.Qc,0,lt,yr)))<<3,Mn=Mn<<2|(3<Bs?3:1<Bs?2:lt[yr+0]!=0),yr+=16;Cr>>=2,ui=ui>>1|hi<<5}Un|=Mn<<4*Vr,Oi|=Cr<<4<<Vr,Ns|=(240&ui)<<Vr}st.la=Oi,br.la=Ns,un.Hc=hr,un.Gc=Un,un.ia=43690&Un?0:qt.ia,Rt=!(hr|Un)}if(0<Be.L&&(Be.wa[Be.Y+Be.ja]=Be.gd[rt.$b][rt.Za],Be.wa[Be.Y+Be.ja].La|=!Rt),at.Ka)return Dn(ze,7,"Premature end-of-file encountered.")}if($o(ze),Be=ft,at=1,rt=($e=ze).D,st=0<$e.L&&$e.M>=$e.zb&&$e.M<=$e.Va,$e.Aa==0)e:{if(rt.M=$e.M,rt.uc=st,Rd($e,rt),at=1,rt=(Mn=$e.D).Nb,st=(Un=qu[$e.L])*$e.R,Ht=Un/2*$e.B,Rr=16*rt*$e.R,ua=8*rt*$e.B,Rt=$e.sa,un=$e.ta-st+Rr,qt=$e.qa,lt=$e.ra-Ht+ua,yr=$e.Ha,br=$e.Ia-Ht+ua,ui=(Cr=Mn.M)==0,hr=Cr>=$e.Va-1,$e.Aa==2&&Rd($e,Mn),Mn.uc)for(hi=(Bs=$e).D.M,t(Bs.D.uc),Mn=Bs.yb;Mn<Bs.Hb;++Mn){Ns=Mn,Oi=hi;var ks=(ha=(Tr=Bs).D).Nb;Vr=Tr.R;var ha=ha.wa[ha.Y+Ns],Ha=Tr.sa,Yi=Tr.ta+16*ks*Vr+16*Ns,el=ha.dd,Ss=ha.tc;if(Ss!=0)if(t(3<=Ss),Tr.L==1)0<Ns&&bl(Ha,Yi,Vr,Ss+4),ha.La&&la(Ha,Yi,Vr,Ss),0<Oi&&Xo(Ha,Yi,Vr,Ss+4),ha.La&&Wi(Ha,Yi,Vr,Ss);else{var Gs=Tr.B,wo=Tr.qa,Kd=Tr.ra+8*ks*Gs+8*Ns,Zc=Tr.Ha,Tr=Tr.Ia+8*ks*Gs+8*Ns;ks=ha.ld,0<Ns&&(zd(Ha,Yi,Vr,Ss+4,el,ks),Ea(wo,Kd,Zc,Tr,Gs,Ss+4,el,ks)),ha.La&&(Ai(Ha,Yi,Vr,Ss,el,ks),Yo(wo,Kd,Zc,Tr,Gs,Ss,el,ks)),0<Oi&&(zc(Ha,Yi,Vr,Ss+4,el,ks),Vc(wo,Kd,Zc,Tr,Gs,Ss+4,el,ks)),ha.La&&(Zo(Ha,Yi,Vr,Ss,el,ks),Hi(wo,Kd,Zc,Tr,Gs,Ss,el,ks))}}if($e.ia&&alert("todo:DitherRow"),Be.put!=null){if(Mn=16*Cr,Cr=16*(Cr+1),ui?(Be.y=$e.sa,Be.O=$e.ta+Rr,Be.f=$e.qa,Be.N=$e.ra+ua,Be.ea=$e.Ha,Be.W=$e.Ia+ua):(Mn-=Un,Be.y=Rt,Be.O=un,Be.f=qt,Be.N=lt,Be.ea=yr,Be.W=br),hr||(Cr-=Un),Cr>Be.o&&(Cr=Be.o),Be.F=null,Be.J=null,$e.Fa!=null&&0<$e.Fa.length&&Mn<Cr&&(Be.J=Iu($e,Be,Mn,Cr-Mn),Be.F=$e.mb,Be.F==null&&Be.F.length==0)){at=Dn($e,3,"Could not decode alpha data.");break e}Mn<Be.j&&(Un=Be.j-Mn,Mn=Be.j,t(!(1&Un)),Be.O+=$e.R*Un,Be.N+=$e.B*(Un>>1),Be.W+=$e.B*(Un>>1),Be.F!=null&&(Be.J+=Be.width*Un)),Mn<Cr&&(Be.O+=Be.v,Be.N+=Be.v>>1,Be.W+=Be.v>>1,Be.F!=null&&(Be.J+=Be.v),Be.ka=Mn-Be.j,Be.U=Be.va-Be.v,Be.T=Cr-Mn,at=Be.put(Be))}rt+1!=$e.Ic||hr||(s($e.sa,$e.ta-st,Rt,un+16*$e.R,st),s($e.qa,$e.ra-Ht,qt,lt+8*$e.B,Ht),s($e.Ha,$e.Ia-Ht,yr,br+8*$e.B,Ht))}if(!at)return Dn(ze,6,"Output aborted.")}return 1})(S,O)),O.bc!=null&&O.bc(O),V&=1}return V?(S.cb=0,V):0}function cr(S,O,V,Y,ee){ee=S[O+V+32*Y]+(ee>>3),S[O+V+32*Y]=-256&ee?0>ee?0:255:ee}function Kl(S,O,V,Y,ee,ie){cr(S,O,0,V,Y+ee),cr(S,O,1,V,Y+ie),cr(S,O,2,V,Y-ie),cr(S,O,3,V,Y-ee)}function ra(S){return(20091*S>>16)+S}function Hs(S,O,V,Y){var ee,ie=0,de=i(16);for(ee=0;4>ee;++ee){var pe=S[O+0]+S[O+8],ge=S[O+0]-S[O+8],je=(35468*S[O+4]>>16)-ra(S[O+12]),Re=ra(S[O+4])+(35468*S[O+12]>>16);de[ie+0]=pe+Re,de[ie+1]=ge+je,de[ie+2]=ge-je,de[ie+3]=pe-Re,ie+=4,O++}for(ee=ie=0;4>ee;++ee)pe=(S=de[ie+0]+4)+de[ie+8],ge=S-de[ie+8],je=(35468*de[ie+4]>>16)-ra(de[ie+12]),cr(V,Y,0,0,pe+(Re=ra(de[ie+4])+(35468*de[ie+12]>>16))),cr(V,Y,1,0,ge+je),cr(V,Y,2,0,ge-je),cr(V,Y,3,0,pe-Re),ie++,Y+=32}function Eu(S,O,V,Y){var ee=S[O+0]+4,ie=35468*S[O+4]>>16,de=ra(S[O+4]),pe=35468*S[O+1]>>16;Kl(V,Y,0,ee+de,S=ra(S[O+1]),pe),Kl(V,Y,1,ee+ie,S,pe),Kl(V,Y,2,ee-ie,S,pe),Kl(V,Y,3,ee-de,S,pe)}function Gl(S,O,V,Y,ee){Hs(S,O,V,Y),ee&&Hs(S,O+16,V,Y+4)}function ii(S,O,V,Y){Go(S,O+0,V,Y,1),Go(S,O+32,V,Y+128,1)}function ms(S,O,V,Y){var ee;for(S=S[O+0]+4,ee=0;4>ee;++ee)for(O=0;4>O;++O)cr(V,Y,O,ee,S)}function $i(S,O,V,Y){S[O+0]&&Ta(S,O+0,V,Y),S[O+16]&&Ta(S,O+16,V,Y+4),S[O+32]&&Ta(S,O+32,V,Y+128),S[O+48]&&Ta(S,O+48,V,Y+128+4)}function rr(S,O,V,Y){var ee,ie=i(16);for(ee=0;4>ee;++ee){var de=S[O+0+ee]+S[O+12+ee],pe=S[O+4+ee]+S[O+8+ee],ge=S[O+4+ee]-S[O+8+ee],je=S[O+0+ee]-S[O+12+ee];ie[0+ee]=de+pe,ie[8+ee]=de-pe,ie[4+ee]=je+ge,ie[12+ee]=je-ge}for(ee=0;4>ee;++ee)de=(S=ie[0+4*ee]+3)+ie[3+4*ee],pe=ie[1+4*ee]+ie[2+4*ee],ge=ie[1+4*ee]-ie[2+4*ee],je=S-ie[3+4*ee],V[Y+0]=de+pe>>3,V[Y+16]=je+ge>>3,V[Y+32]=de-pe>>3,V[Y+48]=je-ge>>3,Y+=64}function Bo(S,O,V){var Y,ee=O-32,ie=Oa,de=255-S[ee-1];for(Y=0;Y<V;++Y){var pe,ge=ie,je=de+S[O-1];for(pe=0;pe<V;++pe)S[O+pe]=ge[je+S[ee+pe]];O+=32}}function Ad(S,O){Bo(S,O,4)}function pl(S,O){Bo(S,O,8)}function Cd(S,O){Bo(S,O,16)}function Bi(S,O){var V;for(V=0;16>V;++V)s(S,O+32*V,S,O-32,16)}function qo(S,O){var V;for(V=16;0<V;--V)a(S,O,S[O-1],16),O+=32}function zo(S,O,V){var Y;for(Y=0;16>Y;++Y)a(O,V+32*Y,S,16)}function xl(S,O){var V,Y=16;for(V=0;16>V;++V)Y+=S[O-1+32*V]+S[O+V-32];zo(Y>>5,S,O)}function qr(S,O){var V,Y=8;for(V=0;16>V;++V)Y+=S[O-1+32*V];zo(Y>>4,S,O)}function fo(S,O){var V,Y=8;for(V=0;16>V;++V)Y+=S[O+V-32];zo(Y>>4,S,O)}function Ni(S,O){zo(128,S,O)}function xn(S,O,V){return S+2*O+V+2>>2}function gn(S,O){var V,Y=O-32;for(Y=new Uint8Array([xn(S[Y-1],S[Y+0],S[Y+1]),xn(S[Y+0],S[Y+1],S[Y+2]),xn(S[Y+1],S[Y+2],S[Y+3]),xn(S[Y+2],S[Y+3],S[Y+4])]),V=0;4>V;++V)s(S,O+32*V,Y,0,Y.length)}function Is(S,O){var V=S[O-1],Y=S[O-1+32],ee=S[O-1+64],ie=S[O-1+96];Ve(S,O+0,16843009*xn(S[O-1-32],V,Y)),Ve(S,O+32,16843009*xn(V,Y,ee)),Ve(S,O+64,16843009*xn(Y,ee,ie)),Ve(S,O+96,16843009*xn(ee,ie,ie))}function sr(S,O){var V,Y=4;for(V=0;4>V;++V)Y+=S[O+V-32]+S[O-1+32*V];for(Y>>=3,V=0;4>V;++V)a(S,O+32*V,Y,4)}function Td(S,O){var V=S[O-1+0],Y=S[O-1+32],ee=S[O-1+64],ie=S[O-1-32],de=S[O+0-32],pe=S[O+1-32],ge=S[O+2-32],je=S[O+3-32];S[O+0+96]=xn(Y,ee,S[O-1+96]),S[O+1+96]=S[O+0+64]=xn(V,Y,ee),S[O+2+96]=S[O+1+64]=S[O+0+32]=xn(ie,V,Y),S[O+3+96]=S[O+2+64]=S[O+1+32]=S[O+0+0]=xn(de,ie,V),S[O+3+64]=S[O+2+32]=S[O+1+0]=xn(pe,de,ie),S[O+3+32]=S[O+2+0]=xn(ge,pe,de),S[O+3+0]=xn(je,ge,pe)}function Vo(S,O){var V=S[O+1-32],Y=S[O+2-32],ee=S[O+3-32],ie=S[O+4-32],de=S[O+5-32],pe=S[O+6-32],ge=S[O+7-32];S[O+0+0]=xn(S[O+0-32],V,Y),S[O+1+0]=S[O+0+32]=xn(V,Y,ee),S[O+2+0]=S[O+1+32]=S[O+0+64]=xn(Y,ee,ie),S[O+3+0]=S[O+2+32]=S[O+1+64]=S[O+0+96]=xn(ee,ie,de),S[O+3+32]=S[O+2+64]=S[O+1+96]=xn(ie,de,pe),S[O+3+64]=S[O+2+96]=xn(de,pe,ge),S[O+3+96]=xn(pe,ge,ge)}function Zl(S,O){var V=S[O-1+0],Y=S[O-1+32],ee=S[O-1+64],ie=S[O-1-32],de=S[O+0-32],pe=S[O+1-32],ge=S[O+2-32],je=S[O+3-32];S[O+0+0]=S[O+1+64]=ie+de+1>>1,S[O+1+0]=S[O+2+64]=de+pe+1>>1,S[O+2+0]=S[O+3+64]=pe+ge+1>>1,S[O+3+0]=ge+je+1>>1,S[O+0+96]=xn(ee,Y,V),S[O+0+64]=xn(Y,V,ie),S[O+0+32]=S[O+1+96]=xn(V,ie,de),S[O+1+32]=S[O+2+96]=xn(ie,de,pe),S[O+2+32]=S[O+3+96]=xn(de,pe,ge),S[O+3+32]=xn(pe,ge,je)}function Yl(S,O){var V=S[O+0-32],Y=S[O+1-32],ee=S[O+2-32],ie=S[O+3-32],de=S[O+4-32],pe=S[O+5-32],ge=S[O+6-32],je=S[O+7-32];S[O+0+0]=V+Y+1>>1,S[O+1+0]=S[O+0+64]=Y+ee+1>>1,S[O+2+0]=S[O+1+64]=ee+ie+1>>1,S[O+3+0]=S[O+2+64]=ie+de+1>>1,S[O+0+32]=xn(V,Y,ee),S[O+1+32]=S[O+0+96]=xn(Y,ee,ie),S[O+2+32]=S[O+1+96]=xn(ee,ie,de),S[O+3+32]=S[O+2+96]=xn(ie,de,pe),S[O+3+64]=xn(de,pe,ge),S[O+3+96]=xn(pe,ge,je)}function qi(S,O){var V=S[O-1+0],Y=S[O-1+32],ee=S[O-1+64],ie=S[O-1+96];S[O+0+0]=V+Y+1>>1,S[O+2+0]=S[O+0+32]=Y+ee+1>>1,S[O+2+32]=S[O+0+64]=ee+ie+1>>1,S[O+1+0]=xn(V,Y,ee),S[O+3+0]=S[O+1+32]=xn(Y,ee,ie),S[O+3+32]=S[O+1+64]=xn(ee,ie,ie),S[O+3+64]=S[O+2+64]=S[O+0+96]=S[O+1+96]=S[O+2+96]=S[O+3+96]=ie}function Ed(S,O){var V=S[O-1+0],Y=S[O-1+32],ee=S[O-1+64],ie=S[O-1+96],de=S[O-1-32],pe=S[O+0-32],ge=S[O+1-32],je=S[O+2-32];S[O+0+0]=S[O+2+32]=V+de+1>>1,S[O+0+32]=S[O+2+64]=Y+V+1>>1,S[O+0+64]=S[O+2+96]=ee+Y+1>>1,S[O+0+96]=ie+ee+1>>1,S[O+3+0]=xn(pe,ge,je),S[O+2+0]=xn(de,pe,ge),S[O+1+0]=S[O+3+32]=xn(V,de,pe),S[O+1+32]=S[O+3+64]=xn(Y,V,de),S[O+1+64]=S[O+3+96]=xn(ee,Y,V),S[O+1+96]=xn(ie,ee,Y)}function Dc(S,O){var V;for(V=0;8>V;++V)s(S,O+32*V,S,O-32,8)}function Gr(S,O){var V;for(V=0;8>V;++V)a(S,O,S[O-1],8),O+=32}function sa(S,O,V){var Y;for(Y=0;8>Y;++Y)a(O,V+32*Y,S,8)}function oi(S,O){var V,Y=8;for(V=0;8>V;++V)Y+=S[O+V-32]+S[O-1+32*V];sa(Y>>4,S,O)}function Ic(S,O){var V,Y=4;for(V=0;8>V;++V)Y+=S[O+V-32];sa(Y>>3,S,O)}function Rc(S,O){var V,Y=4;for(V=0;8>V;++V)Y+=S[O-1+32*V];sa(Y>>3,S,O)}function Od(S,O){sa(128,S,O)}function Uo(S,O,V){var Y=S[O-V],ee=S[O+0],ie=3*(ee-Y)+Ci[1020+S[O-2*V]-S[O+V]],de=Qo[112+(ie+4>>3)];S[O-V]=Oa[255+Y+Qo[112+(ie+3>>3)]],S[O+0]=Oa[255+ee-de]}function Fc(S,O,V,Y){var ee=S[O+0],ie=S[O+V];return Ti[255+S[O-2*V]-S[O-V]]>Y||Ti[255+ie-ee]>Y}function $c(S,O,V,Y){return 4*Ti[255+S[O-V]-S[O+0]]+Ti[255+S[O-2*V]-S[O+V]]<=Y}function Gn(S,O,V,Y,ee){var ie=S[O-3*V],de=S[O-2*V],pe=S[O-V],ge=S[O+0],je=S[O+V],Re=S[O+2*V],Ke=S[O+3*V];return 4*Ti[255+pe-ge]+Ti[255+de-je]>Y?0:Ti[255+S[O-4*V]-ie]<=ee&&Ti[255+ie-de]<=ee&&Ti[255+de-pe]<=ee&&Ti[255+Ke-Re]<=ee&&Ti[255+Re-je]<=ee&&Ti[255+je-ge]<=ee}function mo(S,O,V,Y){var ee=2*Y+1;for(Y=0;16>Y;++Y)$c(S,O+Y,V,ee)&&Uo(S,O+Y,V)}function ps(S,O,V,Y){var ee=2*Y+1;for(Y=0;16>Y;++Y)$c(S,O+Y*V,1,ee)&&Uo(S,O+Y*V,1)}function Sa(S,O,V,Y){var ee;for(ee=3;0<ee;--ee)mo(S,O+=4*V,V,Y)}function Ou(S,O,V,Y){var ee;for(ee=3;0<ee;--ee)ps(S,O+=4,V,Y)}function po(S,O,V,Y,ee,ie,de,pe){for(ie=2*ie+1;0<ee--;){if(Gn(S,O,V,ie,de))if(Fc(S,O,V,pe))Uo(S,O,V);else{var ge=S,je=O,Re=V,Ke=ge[je-2*Re],Ge=ge[je-Re],ze=ge[je+0],ft=ge[je+Re],rt=ge[je+2*Re],$e=27*(at=Ci[1020+3*(ze-Ge)+Ci[1020+Ke-ft]])+63>>7,Be=18*at+63>>7,at=9*at+63>>7;ge[je-3*Re]=Oa[255+ge[je-3*Re]+at],ge[je-2*Re]=Oa[255+Ke+Be],ge[je-Re]=Oa[255+Ge+$e],ge[je+0]=Oa[255+ze-$e],ge[je+Re]=Oa[255+ft-Be],ge[je+2*Re]=Oa[255+rt-at]}O+=Y}}function Pa(S,O,V,Y,ee,ie,de,pe){for(ie=2*ie+1;0<ee--;){if(Gn(S,O,V,ie,de))if(Fc(S,O,V,pe))Uo(S,O,V);else{var ge=S,je=O,Re=V,Ke=ge[je-Re],Ge=ge[je+0],ze=ge[je+Re],ft=Qo[112+((rt=3*(Ge-Ke))+4>>3)],rt=Qo[112+(rt+3>>3)],$e=ft+1>>1;ge[je-2*Re]=Oa[255+ge[je-2*Re]+$e],ge[je-Re]=Oa[255+Ke+rt],ge[je+0]=Oa[255+Ge-ft],ge[je+Re]=Oa[255+ze-$e]}O+=Y}}function Md(S,O,V,Y,ee,ie){po(S,O,V,1,16,Y,ee,ie)}function Es(S,O,V,Y,ee,ie){po(S,O,1,V,16,Y,ee,ie)}function Xl(S,O,V,Y,ee,ie){var de;for(de=3;0<de;--de)Pa(S,O+=4*V,V,1,16,Y,ee,ie)}function Ql(S,O,V,Y,ee,ie){var de;for(de=3;0<de;--de)Pa(S,O+=4,1,V,16,Y,ee,ie)}function gl(S,O,V,Y,ee,ie,de,pe){po(S,O,ee,1,8,ie,de,pe),po(V,Y,ee,1,8,ie,de,pe)}function Mu(S,O,V,Y,ee,ie,de,pe){po(S,O,1,ee,8,ie,de,pe),po(V,Y,1,ee,8,ie,de,pe)}function Aa(S,O,V,Y,ee,ie,de,pe){Pa(S,O+4*ee,ee,1,8,ie,de,pe),Pa(V,Y+4*ee,ee,1,8,ie,de,pe)}function Ld(S,O,V,Y,ee,ie,de,pe){Pa(S,O+4,1,ee,8,ie,de,pe),Pa(V,Y+4,1,ee,8,ie,de,pe)}function xo(){this.ba=new rs,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Br,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function qa(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Bc(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Lu(){this.ua=0,this.Wa=new ke,this.vb=new ke,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Z,this.yc=new R}function Du(){this.xb=this.a=0,this.l=new Fo,this.ca=new rs,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new G,this.Pb=0,this.wd=new G,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Lu,this.ab=0,this.gc=o(4,Bc),this.Oc=0}function Dd(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Fo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ho(S,O,V,Y,ee,ie,de){for(S=S==null?0:S[O+0],O=0;O<de;++O)ee[ie+O]=S+V[Y+O]&255,S=ee[ie+O]}function Id(S,O,V,Y,ee,ie,de){var pe;if(S==null)Ho(null,null,V,Y,ee,ie,de);else for(pe=0;pe<de;++pe)ee[ie+pe]=S[O+pe]+V[Y+pe]&255}function Jl(S,O,V,Y,ee,ie,de){if(S==null)Ho(null,null,V,Y,ee,ie,de);else{var pe,ge=S[O+0],je=ge,Re=ge;for(pe=0;pe<de;++pe)je=Re+(ge=S[O+pe])-je,Re=V[Y+pe]+(-256&je?0>je?0:255:je)&255,je=ge,ee[ie+pe]=Re}}function Iu(S,O,V,Y){var ee=O.width,ie=O.o;if(t(S!=null&&O!=null),0>V||0>=Y||V+Y>ie)return null;if(!S.Cc){if(S.ga==null){var de;if(S.ga=new Dd,(de=S.ga==null)||(de=O.width*O.o,t(S.Gb.length==0),S.Gb=i(de),S.Uc=0,S.Gb==null?de=0:(S.mb=S.Gb,S.nb=S.Uc,S.rc=null,de=1),de=!de),!de){de=S.ga;var pe=S.Fa,ge=S.P,je=S.qc,Re=S.mb,Ke=S.nb,Ge=ge+1,ze=je-1,ft=de.l;if(t(pe!=null&&Re!=null&&O!=null),ir[0]=null,ir[1]=Ho,ir[2]=Id,ir[3]=Jl,de.ca=Re,de.tb=Ke,de.c=O.width,de.i=O.height,t(0<de.c&&0<de.i),1>=je)O=0;else if(de.$a=pe[ge+0]>>0&3,de.Z=pe[ge+0]>>2&3,de.Lc=pe[ge+0]>>4&3,ge=pe[ge+0]>>6&3,0>de.$a||1<de.$a||4<=de.Z||1<de.Lc||ge)O=0;else if(ft.put=Kn,ft.ac=on,ft.bc=ss,ft.ma=de,ft.width=O.width,ft.height=O.height,ft.Da=O.Da,ft.v=O.v,ft.va=O.va,ft.j=O.j,ft.o=O.o,de.$a)e:{t(de.$a==1),O=ai();t:for(;;){if(O==null){O=0;break e}if(t(de!=null),de.mc=O,O.c=de.c,O.i=de.i,O.l=de.l,O.l.ma=de,O.l.width=de.c,O.l.height=de.i,O.a=0,H(O.m,pe,Ge,ze),!Ro(de.c,de.i,1,O,null)||(O.ab==1&&O.gc[0].hc==3&&na(O.s)?(de.ic=1,pe=O.c*O.i,O.Ta=null,O.Ua=0,O.V=i(pe),O.Ba=0,O.V==null?(O.a=1,O=0):O=1):(de.ic=0,O=zl(O,de.c)),!O))break t;O=1;break e}de.mc=null,O=0}else O=ze>=de.c*de.i;de=!O}if(de)return null;S.ga.Lc!=1?S.Ga=0:Y=ie-V}t(S.ga!=null),t(V+Y<=ie);e:{if(O=(pe=S.ga).c,ie=pe.l.o,pe.$a==0){if(Ge=S.rc,ze=S.Vc,ft=S.Fa,ge=S.P+1+V*O,je=S.mb,Re=S.nb+V*O,t(ge<=S.P+S.qc),pe.Z!=0)for(t(ir[pe.Z]!=null),de=0;de<Y;++de)ir[pe.Z](Ge,ze,ft,ge,je,Re,O),Ge=je,ze=Re,Re+=O,ge+=O;else for(de=0;de<Y;++de)s(je,Re,ft,ge,O),Ge=je,ze=Re,Re+=O,ge+=O;S.rc=Ge,S.Vc=ze}else{if(t(pe.mc!=null),O=V+Y,t((de=pe.mc)!=null),t(O<=de.i),de.C>=O)O=1;else if(pe.ic||We(),pe.ic){pe=de.V,Ge=de.Ba,ze=de.c;var rt=de.i,$e=(ft=1,ge=de.$/ze,je=de.$%ze,Re=de.m,Ke=de.s,de.$),Be=ze*rt,at=ze*O,st=Ke.wc,lt=$e<at?Et(Ke,je,ge):null;t($e<=Be),t(O<=rt),t(na(Ke));t:for(;;){for(;!Re.h&&$e<at;){if(je&st||(lt=Et(Ke,je,ge)),t(lt!=null),xe(Re),256>(rt=fr(lt.G[0],lt.H[0],Re)))pe[Ge+$e]=rt,++$e,++je>=ze&&(je=0,++ge<=O&&!(ge%16)&&wi(de,ge));else{if(!(280>rt)){ft=0;break t}rt=es(rt-256,Re);var Ht,Rt=fr(lt.G[4],lt.H[4],Re);if(xe(Re),!($e>=(Rt=hs(ze,Rt=es(Rt,Re)))&&Be-$e>=rt)){ft=0;break t}for(Ht=0;Ht<rt;++Ht)pe[Ge+$e+Ht]=pe[Ge+$e+Ht-Rt];for($e+=rt,je+=rt;je>=ze;)je-=ze,++ge<=O&&!(ge%16)&&wi(de,ge);$e<at&&je&st&&(lt=Et(Ke,je,ge))}t(Re.h==fe(Re))}wi(de,ge>O?O:ge);break t}!ft||Re.h&&$e<Be?(ft=0,de.a=Re.h?5:3):de.$=$e,O=ft}else O=Us(de,de.V,de.Ba,de.c,de.i,O,Tc);if(!O){Y=0;break e}}V+Y>=ie&&(S.Cc=1),Y=1}if(!Y)return null;if(S.Cc&&((Y=S.ga)!=null&&(Y.mc=null),S.ga=null,0<S.Ga))return alert("todo:WebPDequantizeLevels"),null}return S.nb+V*ee}function $(S,O,V,Y,ee,ie){for(;0<ee--;){var de,pe=S,ge=O+(V?1:0),je=S,Re=O+(V?0:3);for(de=0;de<Y;++de){var Ke=je[Re+4*de];Ke!=255&&(Ke*=32897,pe[ge+4*de+0]=pe[ge+4*de+0]*Ke>>23,pe[ge+4*de+1]=pe[ge+4*de+1]*Ke>>23,pe[ge+4*de+2]=pe[ge+4*de+2]*Ke>>23)}O+=ie}}function re(S,O,V,Y,ee){for(;0<Y--;){var ie;for(ie=0;ie<V;++ie){var de=S[O+2*ie+0],pe=15&(je=S[O+2*ie+1]),ge=4369*pe,je=(240&je|je>>4)*ge>>16;S[O+2*ie+0]=(240&de|de>>4)*ge>>16&240|(15&de|de<<4)*ge>>16>>4&15,S[O+2*ie+1]=240&je|pe}O+=ee}}function Se(S,O,V,Y,ee,ie,de,pe){var ge,je,Re=255;for(je=0;je<ee;++je){for(ge=0;ge<Y;++ge){var Ke=S[O+ge];ie[de+4*ge]=Ke,Re&=Ke}O+=V,de+=pe}return Re!=255}function Ie(S,O,V,Y,ee){var ie;for(ie=0;ie<ee;++ie)V[Y+ie]=S[O+ie]>>8}function We(){Fs=$,Sr=re,vr=Se,xs=Ie}function nt(S,O,V){F[S]=function(Y,ee,ie,de,pe,ge,je,Re,Ke,Ge,ze,ft,rt,$e,Be,at,st){var lt,Ht=st-1>>1,Rt=pe[ge+0]|je[Re+0]<<16,un=Ke[Ge+0]|ze[ft+0]<<16;t(Y!=null);var qt=3*Rt+un+131074>>2;for(O(Y[ee+0],255&qt,qt>>16,rt,$e),ie!=null&&(qt=3*un+Rt+131074>>2,O(ie[de+0],255&qt,qt>>16,Be,at)),lt=1;lt<=Ht;++lt){var yr=pe[ge+lt]|je[Re+lt]<<16,br=Ke[Ge+lt]|ze[ft+lt]<<16,hr=Rt+yr+un+br+524296,Un=hr+2*(yr+un)>>3;qt=Un+Rt>>1,Rt=(hr=hr+2*(Rt+br)>>3)+yr>>1,O(Y[ee+2*lt-1],255&qt,qt>>16,rt,$e+(2*lt-1)*V),O(Y[ee+2*lt-0],255&Rt,Rt>>16,rt,$e+(2*lt-0)*V),ie!=null&&(qt=hr+un>>1,Rt=Un+br>>1,O(ie[de+2*lt-1],255&qt,qt>>16,Be,at+(2*lt-1)*V),O(ie[de+2*lt+0],255&Rt,Rt>>16,Be,at+(2*lt+0)*V)),Rt=yr,un=br}1&st||(qt=3*Rt+un+131074>>2,O(Y[ee+st-1],255&qt,qt>>16,rt,$e+(st-1)*V),ie!=null&&(qt=3*un+Rt+131074>>2,O(ie[de+st-1],255&qt,qt>>16,Be,at+(st-1)*V)))}}function vt(){da[Mh]=Fg,da[jl]=sc,da[Kf]=$g,da[Vd]=ac,da[Ud]=ic,da[Ar]=$u,da[Lh]=Bg,da[Hc]=sc,da[rc]=ac,da[Fu]=ic,da[m]=$u}function $t(S){return S&-16384?0>S?0:255:S>>Wd}function Gt(S,O){return $t((19077*S>>8)+(26149*O>>8)-14234)}function On(S,O,V){return $t((19077*S>>8)-(6419*O>>8)-(13320*V>>8)+8708)}function An(S,O){return $t((19077*S>>8)+(33050*O>>8)-17685)}function ar(S,O,V,Y,ee){Y[ee+0]=Gt(S,V),Y[ee+1]=On(S,O,V),Y[ee+2]=An(S,O)}function Zr(S,O,V,Y,ee){Y[ee+0]=An(S,O),Y[ee+1]=On(S,O,V),Y[ee+2]=Gt(S,V)}function ts(S,O,V,Y,ee){var ie=On(S,O,V);O=ie<<3&224|An(S,O)>>3,Y[ee+0]=248&Gt(S,V)|ie>>5,Y[ee+1]=O}function Os(S,O,V,Y,ee){var ie=240&An(S,O)|15;Y[ee+0]=240&Gt(S,V)|On(S,O,V)>>4,Y[ee+1]=ie}function Ca(S,O,V,Y,ee){Y[ee+0]=255,ar(S,O,V,Y,ee+1)}function Rs(S,O,V,Y,ee){Zr(S,O,V,Y,ee),Y[ee+3]=255}function go(S,O,V,Y,ee){ar(S,O,V,Y,ee),Y[ee+3]=255}function is(S,O){return 0>S?0:S>O?O:S}function aa(S,O,V){F[S]=function(Y,ee,ie,de,pe,ge,je,Re,Ke){for(var Ge=Re+(-2&Ke)*V;Re!=Ge;)O(Y[ee+0],ie[de+0],pe[ge+0],je,Re),O(Y[ee+1],ie[de+0],pe[ge+0],je,Re+V),ee+=2,++de,++ge,Re+=2*V;1&Ke&&O(Y[ee+0],ie[de+0],pe[ge+0],je,Re)}}function ec(S,O,V){return V==0?S==0?O==0?6:5:O==0?4:0:V}function ki(S,O,V,Y,ee){switch(S>>>30){case 3:Go(O,V,Y,ee,0);break;case 2:mr(O,V,Y,ee);break;case 1:Ta(O,V,Y,ee)}}function Rd(S,O){var V,Y,ee=O.M,ie=O.Nb,de=S.oc,pe=S.pc+40,ge=S.oc,je=S.pc+584,Re=S.oc,Ke=S.pc+600;for(V=0;16>V;++V)de[pe+32*V-1]=129;for(V=0;8>V;++V)ge[je+32*V-1]=129,Re[Ke+32*V-1]=129;for(0<ee?de[pe-1-32]=ge[je-1-32]=Re[Ke-1-32]=129:(a(de,pe-32-1,127,21),a(ge,je-32-1,127,9),a(Re,Ke-32-1,127,9)),Y=0;Y<S.za;++Y){var Ge=O.ya[O.aa+Y];if(0<Y){for(V=-1;16>V;++V)s(de,pe+32*V-4,de,pe+32*V+12,4);for(V=-1;8>V;++V)s(ge,je+32*V-4,ge,je+32*V+4,4),s(Re,Ke+32*V-4,Re,Ke+32*V+4,4)}var ze=S.Gd,ft=S.Hd+Y,rt=Ge.ad,$e=Ge.Hc;if(0<ee&&(s(de,pe-32,ze[ft].y,0,16),s(ge,je-32,ze[ft].f,0,8),s(Re,Ke-32,ze[ft].ea,0,8)),Ge.Za){var Be=de,at=pe-32+16;for(0<ee&&(Y>=S.za-1?a(Be,at,ze[ft].y[15],4):s(Be,at,ze[ft+1].y,0,4)),V=0;4>V;V++)Be[at+128+V]=Be[at+256+V]=Be[at+384+V]=Be[at+0+V];for(V=0;16>V;++V,$e<<=2)Be=de,at=pe+qg[V],Ki[Ge.Ob[V]](Be,at),ki($e,rt,16*+V,Be,at)}else if(Be=ec(Y,ee,Ge.Ob[0]),za[Be](de,pe),$e!=0)for(V=0;16>V;++V,$e<<=2)ki($e,rt,16*+V,de,pe+qg[V]);for(V=Ge.Gc,Be=ec(Y,ee,Ge.Dd),Va[Be](ge,je),Va[Be](Re,Ke),$e=rt,Be=ge,at=je,255&(Ge=V>>0)&&(170&Ge?Ui($e,256,Be,at):ci($e,256,Be,at)),Ge=Re,$e=Ke,255&(V>>=8)&&(170&V?Ui(rt,320,Ge,$e):ci(rt,320,Ge,$e)),ee<S.Ub-1&&(s(ze[ft].y,0,de,pe+480,16),s(ze[ft].f,0,ge,je+224,8),s(ze[ft].ea,0,Re,Ke+224,8)),V=8*ie*S.B,ze=S.sa,ft=S.ta+16*Y+16*ie*S.R,rt=S.qa,Ge=S.ra+8*Y+V,$e=S.Ha,Be=S.Ia+8*Y+V,V=0;16>V;++V)s(ze,ft+V*S.R,de,pe+32*V,16);for(V=0;8>V;++V)s(rt,Ge+V*S.B,ge,je+32*V,8),s($e,Be+V*S.B,Re,Ke+32*V,8)}}function zi(S,O,V,Y,ee,ie,de,pe,ge){var je=[0],Re=[0],Ke=0,Ge=ge!=null?ge.kd:0,ze=ge??new qa;if(S==null||12>V)return 7;ze.data=S,ze.w=O,ze.ha=V,O=[O],V=[V],ze.gb=[ze.gb];e:{var ft=O,rt=V,$e=ze.gb;if(t(S!=null),t(rt!=null),t($e!=null),$e[0]=0,12<=rt[0]&&!r(S,ft[0],"RIFF")){if(r(S,ft[0]+8,"WEBP")){$e=3;break e}var Be=dt(S,ft[0]+4);if(12>Be||4294967286<Be){$e=3;break e}if(Ge&&Be>rt[0]-8){$e=7;break e}$e[0]=Be,ft[0]+=12,rt[0]-=12}$e=0}if($e!=0)return $e;for(Be=0<ze.gb[0],V=V[0];;){e:{var at=S;rt=O,$e=V;var st=je,lt=Re,Ht=ft=[0];if((qt=Ke=[Ke])[0]=0,8>$e[0])$e=7;else{if(!r(at,rt[0],"VP8X")){if(dt(at,rt[0]+4)!=10){$e=3;break e}if(18>$e[0]){$e=7;break e}var Rt=dt(at,rt[0]+8),un=1+Le(at,rt[0]+12);if(2147483648<=un*(at=1+Le(at,rt[0]+15))){$e=3;break e}Ht!=null&&(Ht[0]=Rt),st!=null&&(st[0]=un),lt!=null&&(lt[0]=at),rt[0]+=18,$e[0]-=18,qt[0]=1}$e=0}}if(Ke=Ke[0],ft=ft[0],$e!=0)return $e;if(rt=!!(2&ft),!Be&&Ke)return 3;if(ie!=null&&(ie[0]=!!(16&ft)),de!=null&&(de[0]=rt),pe!=null&&(pe[0]=0),de=je[0],ft=Re[0],Ke&&rt&&ge==null){$e=0;break}if(4>V){$e=7;break}if(Be&&Ke||!Be&&!Ke&&!r(S,O[0],"ALPH")){V=[V],ze.na=[ze.na],ze.P=[ze.P],ze.Sa=[ze.Sa];e:{Rt=S,$e=O,Be=V;var qt=ze.gb;st=ze.na,lt=ze.P,Ht=ze.Sa,un=22,t(Rt!=null),t(Be!=null),at=$e[0];var yr=Be[0];for(t(st!=null),t(Ht!=null),st[0]=null,lt[0]=null,Ht[0]=0;;){if($e[0]=at,Be[0]=yr,8>yr){$e=7;break e}var br=dt(Rt,at+4);if(4294967286<br){$e=3;break e}var hr=8+br+1&-2;if(un+=hr,0<qt&&un>qt){$e=3;break e}if(!r(Rt,at,"VP8 ")||!r(Rt,at,"VP8L")){$e=0;break e}if(yr[0]<hr){$e=7;break e}r(Rt,at,"ALPH")||(st[0]=Rt,lt[0]=at+8,Ht[0]=br),at+=hr,yr-=hr}}if(V=V[0],ze.na=ze.na[0],ze.P=ze.P[0],ze.Sa=ze.Sa[0],$e!=0)break}V=[V],ze.Ja=[ze.Ja],ze.xa=[ze.xa];e:if(qt=S,$e=O,Be=V,st=ze.gb[0],lt=ze.Ja,Ht=ze.xa,Rt=$e[0],at=!r(qt,Rt,"VP8 "),un=!r(qt,Rt,"VP8L"),t(qt!=null),t(Be!=null),t(lt!=null),t(Ht!=null),8>Be[0])$e=7;else{if(at||un){if(qt=dt(qt,Rt+4),12<=st&&qt>st-12){$e=3;break e}if(Ge&&qt>Be[0]-8){$e=7;break e}lt[0]=qt,$e[0]+=8,Be[0]-=8,Ht[0]=un}else Ht[0]=5<=Be[0]&&qt[Rt+0]==47&&!(qt[Rt+4]>>5),lt[0]=Be[0];$e=0}if(V=V[0],ze.Ja=ze.Ja[0],ze.xa=ze.xa[0],O=O[0],$e!=0)break;if(4294967286<ze.Ja)return 3;if(pe==null||rt||(pe[0]=ze.xa?2:1),de=[de],ft=[ft],ze.xa){if(5>V){$e=7;break}pe=de,Ge=ft,rt=ie,S==null||5>V?S=0:5<=V&&S[O+0]==47&&!(S[O+4]>>5)?(Be=[0],qt=[0],st=[0],H(lt=new G,S,O,V),Ut(lt,Be,qt,st)?(pe!=null&&(pe[0]=Be[0]),Ge!=null&&(Ge[0]=qt[0]),rt!=null&&(rt[0]=st[0]),S=1):S=0):S=0}else{if(10>V){$e=7;break}pe=ft,S==null||10>V||!Lc(S,O+3,V-3)?S=0:(Ge=S[O+0]|S[O+1]<<8|S[O+2]<<16,rt=16383&(S[O+7]<<8|S[O+6]),S=16383&(S[O+9]<<8|S[O+8]),1&Ge||3<(Ge>>1&7)||!(Ge>>4&1)||Ge>>5>=ze.Ja||!rt||!S?S=0:(de&&(de[0]=rt),pe&&(pe[0]=S),S=1))}if(!S||(de=de[0],ft=ft[0],Ke&&(je[0]!=de||Re[0]!=ft)))return 3;ge!=null&&(ge[0]=ze,ge.offset=O-ge.w,t(4294967286>O-ge.w),t(ge.offset==ge.ha-V));break}return $e==0||$e==7&&Ke&&ge==null?(ie!=null&&(ie[0]|=ze.na!=null&&0<ze.na.length),Y!=null&&(Y[0]=de),ee!=null&&(ee[0]=ft),0):$e}function Fd(S,O,V){var Y=O.width,ee=O.height,ie=0,de=0,pe=Y,ge=ee;if(O.Da=S!=null&&0<S.Da,O.Da&&(pe=S.cd,ge=S.bd,ie=S.v,de=S.j,11>V||(ie&=-2,de&=-2),0>ie||0>de||0>=pe||0>=ge||ie+pe>Y||de+ge>ee))return 0;if(O.v=ie,O.j=de,O.va=ie+pe,O.o=de+ge,O.U=pe,O.T=ge,O.da=S!=null&&0<S.da,O.da){if(!Bt(pe,ge,V=[S.ib],ie=[S.hb]))return 0;O.ib=V[0],O.hb=ie[0]}return O.ob=S!=null&&S.ob,O.Kb=S==null||!S.Sd,O.da&&(O.ob=O.ib<3*Y/4&&O.hb<3*ee/4,O.Kb=0),1}function Wo(S){if(S==null)return 2;if(11>S.S){var O=S.f.RGBA;O.fb+=(S.height-1)*O.A,O.A=-O.A}else O=S.f.kb,S=S.height,O.O+=(S-1)*O.fa,O.fa=-O.fa,O.N+=(S-1>>1)*O.Ab,O.Ab=-O.Ab,O.W+=(S-1>>1)*O.Db,O.Db=-O.Db,O.F!=null&&(O.J+=(S-1)*O.lb,O.lb=-O.lb);return 0}function tc(S,O,V,Y){if(Y==null||0>=S||0>=O)return 2;if(V!=null){if(V.Da){var ee=V.cd,ie=V.bd,de=-2&V.v,pe=-2&V.j;if(0>de||0>pe||0>=ee||0>=ie||de+ee>S||pe+ie>O)return 2;S=ee,O=ie}if(V.da){if(!Bt(S,O,ee=[V.ib],ie=[V.hb]))return 2;S=ee[0],O=ie[0]}}Y.width=S,Y.height=O;e:{var ge=Y.width,je=Y.height;if(S=Y.S,0>=ge||0>=je||!(S>=Mh&&13>S))S=2;else{if(0>=Y.Rd&&Y.sd==null){de=ie=ee=O=0;var Re=(pe=ge*Zf[S])*je;if(11>S||(ie=(je+1)/2*(O=(ge+1)/2),S==12&&(de=(ee=ge)*je)),(je=i(Re+2*ie+de))==null){S=1;break e}Y.sd=je,11>S?((ge=Y.f.RGBA).eb=je,ge.fb=0,ge.A=pe,ge.size=Re):((ge=Y.f.kb).y=je,ge.O=0,ge.fa=pe,ge.Fd=Re,ge.f=je,ge.N=0+Re,ge.Ab=O,ge.Cd=ie,ge.ea=je,ge.W=0+Re+ie,ge.Db=O,ge.Ed=ie,S==12&&(ge.F=je,ge.J=0+Re+2*ie),ge.Tc=de,ge.lb=ee)}if(O=1,ee=Y.S,ie=Y.width,de=Y.height,ee>=Mh&&13>ee)if(11>ee)S=Y.f.RGBA,O&=(pe=Math.abs(S.A))*(de-1)+ie<=S.size,O&=pe>=ie*Zf[ee],O&=S.eb!=null;else{S=Y.f.kb,pe=(ie+1)/2,Re=(de+1)/2,ge=Math.abs(S.fa),je=Math.abs(S.Ab);var Ke=Math.abs(S.Db),Ge=Math.abs(S.lb),ze=Ge*(de-1)+ie;O&=ge*(de-1)+ie<=S.Fd,O&=je*(Re-1)+pe<=S.Cd,O=(O&=Ke*(Re-1)+pe<=S.Ed)&ge>=ie&je>=pe&Ke>=pe,O&=S.y!=null,O&=S.f!=null,O&=S.ea!=null,ee==12&&(O&=Ge>=ie,O&=ze<=S.Tc,O&=S.F!=null)}else O=0;S=O?0:2}}return S!=0||V!=null&&V.fd&&(S=Wo(Y)),S}var Yr=64,$d=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Si=24,vl=32,Bd=8,ia=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];yt("Predictor0","PredictorAdd0"),F.Predictor0=function(){return 4278190080},F.Predictor1=function(S){return S},F.Predictor2=function(S,O,V){return O[V+0]},F.Predictor3=function(S,O,V){return O[V+1]},F.Predictor4=function(S,O,V){return O[V-1]},F.Predictor5=function(S,O,V){return St(St(S,O[V+1]),O[V+0])},F.Predictor6=function(S,O,V){return St(S,O[V-1])},F.Predictor7=function(S,O,V){return St(S,O[V+0])},F.Predictor8=function(S,O,V){return St(O[V-1],O[V+0])},F.Predictor9=function(S,O,V){return St(O[V+0],O[V+1])},F.Predictor10=function(S,O,V){return St(St(S,O[V-1]),St(O[V+0],O[V+1]))},F.Predictor11=function(S,O,V){var Y=O[V+0];return 0>=jn(Y>>24&255,S>>24&255,(O=O[V-1])>>24&255)+jn(Y>>16&255,S>>16&255,O>>16&255)+jn(Y>>8&255,S>>8&255,O>>8&255)+jn(255&Y,255&S,255&O)?Y:S},F.Predictor12=function(S,O,V){var Y=O[V+0];return(Kt((S>>24&255)+(Y>>24&255)-((O=O[V-1])>>24&255))<<24|Kt((S>>16&255)+(Y>>16&255)-(O>>16&255))<<16|Kt((S>>8&255)+(Y>>8&255)-(O>>8&255))<<8|Kt((255&S)+(255&Y)-(255&O)))>>>0},F.Predictor13=function(S,O,V){var Y=O[V-1];return(mn((S=St(S,O[V+0]))>>24&255,Y>>24&255)<<24|mn(S>>16&255,Y>>16&255)<<16|mn(S>>8&255,Y>>8&255)<<8|mn(S>>0&255,Y>>0&255))>>>0};var qc=F.PredictorAdd0;F.PredictorAdd1=Ln,yt("Predictor2","PredictorAdd2"),yt("Predictor3","PredictorAdd3"),yt("Predictor4","PredictorAdd4"),yt("Predictor5","PredictorAdd5"),yt("Predictor6","PredictorAdd6"),yt("Predictor7","PredictorAdd7"),yt("Predictor8","PredictorAdd8"),yt("Predictor9","PredictorAdd9"),yt("Predictor10","PredictorAdd10"),yt("Predictor11","PredictorAdd11"),yt("Predictor12","PredictorAdd12"),yt("Predictor13","PredictorAdd13");var oa=F.PredictorAdd2;Tn("ColorIndexInverseTransform","MapARGB","32b",(function(S){return S>>8&255}),(function(S){return S})),Tn("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(S){return S}),(function(S){return S>>8&255}));var Oh,Ms=F.ColorIndexInverseTransform,qd=F.MapARGB,Pi=F.VP8LColorIndexInverseTransformAlpha,yl=F.MapAlpha,vo=F.VP8LPredictorsAdd=[];vo.length=16,(F.VP8LPredictors=[]).length=16,(F.VP8LPredictorsAdd_C=[]).length=16,(F.VP8LPredictors_C=[]).length=16;var Ko,Ws,Ks,yo,li,Vi,nc,Go,mr,Ui,Ta,ci,zc,zd,Vc,Ea,Zo,Ai,Hi,Yo,Xo,bl,Wi,la,Fs,Sr,vr,xs,Pr=i(511),bo=i(2041),Uc=i(225),jo=i(767),Ru=0,Ci=bo,Qo=Uc,Oa=jo,Ti=Pr,Mh=0,jl=1,Kf=2,Vd=3,Ud=4,Ar=5,Lh=6,Hc=7,rc=8,Fu=9,m=10,_=[2,3,7],T=[3,3,11],B=[280,256,256,256,40],X=[0,1,1,1,0],me=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ee=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ze=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Je=8,pt=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],zt=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],dn=null,Bn=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ca=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],$s=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ei=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],di=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Hd=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Gf=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],za=[],Ki=[],Va=[],Jo=1,Wc=2,ir=[],da=[];nt("UpsampleRgbLinePair",ar,3),nt("UpsampleBgrLinePair",Zr,3),nt("UpsampleRgbaLinePair",go,4),nt("UpsampleBgraLinePair",Rs,4),nt("UpsampleArgbLinePair",Ca,4),nt("UpsampleRgba4444LinePair",Os,2),nt("UpsampleRgb565LinePair",ts,2);var Fg=F.UpsampleRgbLinePair,$g=F.UpsampleBgrLinePair,sc=F.UpsampleRgbaLinePair,ac=F.UpsampleBgraLinePair,ic=F.UpsampleArgbLinePair,$u=F.UpsampleRgba4444LinePair,Bg=F.UpsampleRgb565LinePair,Kc=16,wl=1<<Kc-1,Ir=-227,zr=482,Wd=6,Ua=0,Gi=i(256),Bu=i(256),Dh=i(256),Zi=i(256),hp=i(zr-Ir),gy=i(zr-Ir);aa("YuvToRgbRow",ar,3),aa("YuvToBgrRow",Zr,3),aa("YuvToRgbaRow",go,4),aa("YuvToBgraRow",Rs,4),aa("YuvToArgbRow",Ca,4),aa("YuvToRgba4444Row",Os,2),aa("YuvToRgb565Row",ts,2);var qg=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],qu=[0,2,8],vy=[8,7,6,4,4,2,2,2,1,1,1,1],Gc=1;this.WebPDecodeRGBA=function(S,O,V,Y,ee){var ie=jl,de=new xo,pe=new rs;de.ba=pe,pe.S=ie,pe.width=[pe.width],pe.height=[pe.height];var ge=pe.width,je=pe.height,Re=new Ts;if(Re==null||S==null)var Ke=2;else t(Re!=null),Ke=zi(S,O,V,Re.width,Re.height,Re.Pd,Re.Qd,Re.format,null);if(Ke!=0?ge=0:(ge!=null&&(ge[0]=Re.width[0]),je!=null&&(je[0]=Re.height[0]),ge=1),ge){pe.width=pe.width[0],pe.height=pe.height[0],Y!=null&&(Y[0]=pe.width),ee!=null&&(ee[0]=pe.height);e:{if(Y=new Fo,(ee=new qa).data=S,ee.w=O,ee.ha=V,ee.kd=1,O=[0],t(ee!=null),((S=zi(ee.data,ee.w,ee.ha,null,null,null,O,null,ee))==0||S==7)&&O[0]&&(S=4),(O=S)==0){if(t(de!=null),Y.data=ee.data,Y.w=ee.w+ee.offset,Y.ha=ee.ha-ee.offset,Y.put=Kn,Y.ac=on,Y.bc=ss,Y.ma=de,ee.xa){if((S=ai())==null){de=1;break e}if((function(Ge,ze){var ft=[0],rt=[0],$e=[0];t:for(;;){if(Ge==null)return 0;if(ze==null)return Ge.a=2,0;if(Ge.l=ze,Ge.a=0,H(Ge.m,ze.data,ze.w,ze.ha),!Ut(Ge.m,ft,rt,$e)){Ge.a=3;break t}if(Ge.xb=Wc,ze.width=ft[0],ze.height=rt[0],!Ro(ft[0],rt[0],1,Ge,null))break t;return 1}return t(Ge.a!=0),0})(S,Y)){if(Y=(O=tc(Y.width,Y.height,de.Oa,de.ba))==0){t:{Y=S;n:for(;;){if(Y==null){Y=0;break t}if(t(Y.s.yc!=null),t(Y.s.Ya!=null),t(0<Y.s.Wb),t((V=Y.l)!=null),t((ee=V.ma)!=null),Y.xb!=0){if(Y.ca=ee.ba,Y.tb=ee.tb,t(Y.ca!=null),!Fd(ee.Oa,V,Vd)){Y.a=2;break n}if(!zl(Y,V.width)||V.da)break n;if((V.da||nr(Y.ca.S))&&We(),11>Y.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Y.ca.f.kb.F!=null&&We()),Y.Pb&&0<Y.s.ua&&Y.s.vb.X==null&&!xt(Y.s.vb,Y.s.Wa.Xa)){Y.a=1;break n}Y.xb=0}if(!Us(Y,Y.V,Y.Ba,Y.c,Y.i,V.o,_s))break n;ee.Dc=Y.Ma,Y=1;break t}t(Y.a!=0),Y=0}Y=!Y}Y&&(O=S.a)}else O=S.a}else{if((S=new En)==null){de=1;break e}if(S.Fa=ee.na,S.P=ee.P,S.qc=ee.Sa,ml(S,Y)){if((O=tc(Y.width,Y.height,de.Oa,de.ba))==0){if(S.Aa=0,V=de.Oa,t((ee=S)!=null),V!=null){if(0<(ge=0>(ge=V.Md)?0:100<ge?255:255*ge/100)){for(je=Re=0;4>je;++je)12>(Ke=ee.pb[je]).lc&&(Ke.ia=ge*vy[0>Ke.lc?0:Ke.lc]>>3),Re|=Ke.ia;Re&&(alert("todo:VP8InitRandom"),ee.ia=1)}ee.Ga=V.Id,100<ee.Ga?ee.Ga=100:0>ee.Ga&&(ee.Ga=0)}_n(S,Y)||(O=S.a)}}else O=S.a}O==0&&de.Oa!=null&&de.Oa.fd&&(O=Wo(de.ba))}de=O}ie=de!=0?null:11>ie?pe.f.RGBA.eb:pe.f.kb.y}else ie=null;return ie};var Zf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(F,U){for(var W="",D=0;D<4;D++)W+=String.fromCharCode(F[U++]);return W}function u(F,U){return(F[U+0]<<0|F[U+1]<<8|F[U+2]<<16)>>>0}function h(F,U){return(F[U+0]<<0|F[U+1]<<8|F[U+2]<<16|F[U+3]<<24)>>>0}new c;var g=[0],x=[0],b=[],y=new c,v=e,j=(function(F,U){var W={},D=0,R=!1,z=0,Z=0;if(W.frames=[],!(function(te,fe,be,xe){for(var we=0;we<xe;we++)if(te[fe+we]!=be.charCodeAt(we))return!0;return!1})(F,U,"RIFF",4)){var se,J;for(h(F,U+=4),U+=8;U<F.length;){var Q=d(F,U),H=h(F,U+=4);U+=4;var ne=H+(1&H);switch(Q){case"VP8 ":case"VP8L":W.frames[D]===void 0&&(W.frames[D]={}),(G=W.frames[D]).src_off=R?Z:U-8,G.src_size=z+H+8,D++,R&&(R=!1,z=0,Z=0);break;case"VP8X":(G=W.header={}).feature_flags=F[U];var ue=U+4;G.canvas_width=1+u(F,ue),ue+=3,G.canvas_height=1+u(F,ue),ue+=3;break;case"ALPH":R=!0,z=ne+8,Z=U-8;break;case"ANIM":(G=W.header).bgcolor=h(F,U),ue=U+4,G.loop_count=(se=F)[(J=ue)+0]<<0|se[J+1]<<8,ue+=2;break;case"ANMF":var ae,G;(G=W.frames[D]={}).offset_x=2*u(F,U),U+=3,G.offset_y=2*u(F,U),U+=3,G.width=1+u(F,U),U+=3,G.height=1+u(F,U),U+=3,G.duration=u(F,U),U+=3,ae=F[U++],G.dispose=1&ae,G.blend=ae>>1&1}Q!="ANMF"&&(U+=ne)}return W}})(v,0);j.response=v,j.rgbaoutput=!0,j.dataurl=!1;var w=j.header?j.header:null,N=j.frames?j.frames:null;if(w){w.loop_counter=w.loop_count,g=[w.canvas_height],x=[w.canvas_width];for(var A=0;A<N.length&&N[A].blend!=0;A++);}var C=N[0],M=y.WebPDecodeRGBA(v,C.src_off,C.src_size,x,g);C.rgba=M,C.imgwidth=x[0],C.imgheight=g[0];for(var I=0;I<x[0]*g[0]*4;I++)b[I]=M[I];return this.width=x,this.height=g,this.data=b,this}(function(e){var t=function(){return typeof g4=="function"},r=function(g,x,b,y){var v=4,j=o;switch(y){case e.image_compression.FAST:v=1,j=i;break;case e.image_compression.MEDIUM:v=6,j=l;break;case e.image_compression.SLOW:v=9,j=c}g=s(g,x,b,j);var w=g4(g,{level:v});return e.__addimage__.arrayBufferToBinaryString(w)},s=function(g,x,b,y){for(var v,j,w,N=g.length/x,A=new Uint8Array(g.length+N),C=u(),M=0;M<N;M+=1){if(w=M*x,v=g.subarray(w,w+x),y)A.set(y(v,b,j),w+M);else{for(var I,F=C.length,U=[];I<F;I+=1)U[I]=C[I](v,b,j);var W=h(U.concat());A.set(U[W],w+M)}j=v}return A},a=function(g){var x=Array.apply([],g);return x.unshift(0),x},i=function(g,x){var b,y=[],v=g.length;y[0]=1;for(var j=0;j<v;j+=1)b=g[j-x]||0,y[j+1]=g[j]-b+256&255;return y},o=function(g,x,b){var y,v=[],j=g.length;v[0]=2;for(var w=0;w<j;w+=1)y=b&&b[w]||0,v[w+1]=g[w]-y+256&255;return v},l=function(g,x,b){var y,v,j=[],w=g.length;j[0]=3;for(var N=0;N<w;N+=1)y=g[N-x]||0,v=b&&b[N]||0,j[N+1]=g[N]+256-(y+v>>>1)&255;return j},c=function(g,x,b){var y,v,j,w,N=[],A=g.length;N[0]=4;for(var C=0;C<A;C+=1)y=g[C-x]||0,v=b&&b[C]||0,j=b&&b[C-x]||0,w=d(y,v,j),N[C+1]=g[C]-w+256&255;return N},d=function(g,x,b){if(g===x&&x===b)return g;var y=Math.abs(x-b),v=Math.abs(g-b),j=Math.abs(g+x-b-b);return y<=v&&y<=j?g:v<=j?x:b},u=function(){return[a,i,o,l,c]},h=function(g){var x=g.map((function(b){return b.reduce((function(y,v){return y+Math.abs(v)}),0)}));return x.indexOf(Math.min.apply(null,x))};e.processPNG=function(g,x,b,y){var v,j,w,N,A,C,M,I,F,U,W,D,R,z,Z,se=this.decode.FLATE_DECODE,J="";if(this.__addimage__.isArrayBuffer(g)&&(g=new Uint8Array(g)),this.__addimage__.isArrayBufferView(g)){if(g=(w=new eme(g)).imgData,j=w.bits,v=w.colorSpace,A=w.colors,[4,6].indexOf(w.colorType)!==-1){if(w.bits===8){F=(I=w.pixelBitlength==32?new Uint32Array(w.decodePixels().buffer):w.pixelBitlength==16?new Uint16Array(w.decodePixels().buffer):new Uint8Array(w.decodePixels().buffer)).length,W=new Uint8Array(F*w.colors),U=new Uint8Array(F);var Q,H=w.pixelBitlength-w.bits;for(z=0,Z=0;z<F;z++){for(R=I[z],Q=0;Q<H;)W[Z++]=R>>>Q&255,Q+=w.bits;U[z]=R>>>Q&255}}if(w.bits===16){F=(I=new Uint32Array(w.decodePixels().buffer)).length,W=new Uint8Array(F*(32/w.pixelBitlength)*w.colors),U=new Uint8Array(F*(32/w.pixelBitlength)),D=w.colors>1,z=0,Z=0;for(var ne=0;z<F;)R=I[z++],W[Z++]=R>>>0&255,D&&(W[Z++]=R>>>16&255,R=I[z++],W[Z++]=R>>>0&255),U[ne++]=R>>>16&255;j=8}y!==e.image_compression.NONE&&t()?(g=r(W,w.width*w.colors,w.colors,y),M=r(U,w.width,1,y)):(g=W,M=U,se=void 0)}if(w.colorType===3&&(v=this.color_spaces.INDEXED,C=w.palette,w.transparency.indexed)){var ue=w.transparency.indexed,ae=0;for(z=0,F=ue.length;z<F;++z)ae+=ue[z];if((ae/=255)===F-1&&ue.indexOf(0)!==-1)N=[ue.indexOf(0)];else if(ae!==F){for(I=w.decodePixels(),U=new Uint8Array(I.length),z=0,F=I.length;z<F;z++)U[z]=ue[I[z]];M=r(U,w.width,1)}}var G=(function(te){var fe;switch(te){case e.image_compression.FAST:fe=11;break;case e.image_compression.MEDIUM:fe=13;break;case e.image_compression.SLOW:fe=14;break;default:fe=12}return fe})(y);return se===this.decode.FLATE_DECODE&&(J="/Predictor "+G+" "),J+="/Colors "+A+" /BitsPerComponent "+j+" /Columns "+w.width,(this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),(M&&this.__addimage__.isArrayBuffer(M)||this.__addimage__.isArrayBufferView(M))&&(M=this.__addimage__.arrayBufferToBinaryString(M)),{alias:b,data:g,index:x,filter:se,decodeParameters:J,transparency:N,palette:C,sMask:M,predictor:G,width:w.width,height:w.height,bitsPerComponent:j,colorSpace:v}}}})(Sn.API),(function(e){e.processGIF89A=function(t,r,s,a){var i=new tme(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},u=new i_(100).encode(d,100);return e.processJPEG.call(this,u,r,s,a)},e.processGIF87A=e.processGIF89A})(Sn.API),ad.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:s,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ad.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){ls.log("bit decode error:"+r)}},ad.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var s=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},ad.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+2*a*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*a+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},ad.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*s;if(a<this.palette.length){var o=this.palette[a];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},ad.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,u=s*this.width*4+4*a;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=d}this.pos+=e}},ad.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,d=(o>>11)/t*255|0,u=a*this.width*4+4*i;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=l,this.data[u+3]=255}this.pos+=e}},ad.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=s,this.data[o+3]=255}this.pos+=this.width%4}},ad.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=a,this.data[l+2]=s,this.data[l+3]=o}},ad.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(t,r,s,a){var i=new ad(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new i_(100).encode(c,100);return e.processJPEG.call(this,d,r,s,a)}})(Sn.API),G6.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(t,r,s,a){var i=new G6(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new i_(100).encode(c,100);return e.processJPEG.call(this,d,r,s,a)}})(Sn.API),Sn.API.processRGBA=function(e,t,r){for(var s=e.data,a=s.length,i=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,d=0;d<a;d+=4){var u=s[d],h=s[d+1],g=s[d+2],x=s[d+3];i[l++]=u,i[l++]=h,i[l++]=g,o[c++]=x}var b=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:b,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Sn.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},Dp=Sn.API,fb=Dp.getCharWidthsArray=function(e,t){var r,s,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:a.metadata.Unicode.kerning,u=d.fof?d.fof:1,h=t.doKerning!==!1,g=0,x=e.length,b=0,y=l[0]||c,v=[];for(r=0;r<x;r++)s=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?v.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(s))+o*(1e3/i)||0)/1e3):(g=h&&Qr(d[s])==="object"&&!isNaN(parseInt(d[s][b],10))?d[s][b]/u:0,v.push((l[s]||y)/c+g)),b=s;return v},U6=Dp.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),s=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return Dp.processArabic&&(e=Dp.processArabic(e)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(e,r,a)/r:fb.apply(this,arguments).reduce((function(i,o){return i+o}),0)},H6=function(e,t,r,s){for(var a=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;a.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>s&&(a.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&a.push(e.slice(c,i)),a},W6=function(e,t,r){r||(r={});var s,a,i,o,l,c,d,u=[],h=[u],g=r.textIndent||0,x=0,b=0,y=e.split(" "),v=fb.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?y[0].length+2:r.lineIndent||0){var j=Array(c).join(" "),w=[];y.map((function(A){(A=A.split(/\s*\n/)).length>1?w=w.concat(A.map((function(C,M){return(M&&C.length?`
`:"")+C}))):w.push(A[0])})),y=w,c=U6.apply(this,[j,r])}for(i=0,o=y.length;i<o;i++){var N=0;if(s=y[i],c&&s[0]==`
`&&(s=s.substr(1),N=1),g+x+(b=(a=fb.apply(this,[s,r])).reduce((function(A,C){return A+C}),0))>t||N){if(b>t){for(l=H6.apply(this,[s,a,t-(g+x),t]),u.push(l.shift()),u=[l.pop()];l.length;)h.push([l.shift()]);b=a.slice(s.length-(u[0]?u[0].length:0)).reduce((function(A,C){return A+C}),0)}else u=[s];h.push(u),g=b+c,x=v}else u.push(s),g+=x+b,x=v}return d=c?function(A,C){return(C?j:"")+A.join(" ")}:function(A){return A.join(" ")},h.map(d)},Dp.splitTextToSize=function(e,t,r){var s,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);s=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var l,c,d=[];for(l=0,c=s.length;l<c;l++)d=d.concat(W6.apply(this,[s[l],o,i]));return d},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},s={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],s["0123456789abcdef"[a]]=t[a];var i=function(h){return"0x"+parseInt(h,10).toString(16)},o=e.__fontmetrics__.compress=function(h){var g,x,b,y,v=["{"];for(var j in h){if(g=h[j],isNaN(parseInt(j,10))?x="'"+j+"'":(j=parseInt(j,10),x=(x=i(j).slice(2)).slice(0,-1)+s[x.slice(-1)]),typeof g=="number")g<0?(b=i(g).slice(3),y="-"):(b=i(g).slice(2),y=""),b=y+b.slice(0,-1)+s[b.slice(-1)];else{if(Qr(g)!=="object")throw new Error("Don't know what to do with value type "+Qr(g)+".");b=o(g)}v.push(x+b)}return v.push("}"),v.join("")},l=e.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,x,b,y,v={},j=1,w=v,N=[],A="",C="",M=h.length-1,I=1;I<M;I+=1)(y=h[I])=="'"?g?(b=g.join(""),g=void 0):g=[]:g?g.push(y):y=="{"?(N.push([w,b]),w={},b=void 0):y=="}"?((x=N.pop())[0][x[1]]=w,b=void 0,w=x[0]):y=="-"?j=-1:b===void 0?r.hasOwnProperty(y)?(A+=r[y],b=parseInt(A,16)*j,j=1,A=""):A+=y:r.hasOwnProperty(y)?(C+=r[y],w[b]=parseInt(C,16)*j,j=1,b=void 0,C=""):C+=y;return v},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(h){var g=h.font,x=u.Unicode[g.postScriptName];x&&(g.metadata.Unicode={},g.metadata.Unicode.widths=x.widths,g.metadata.Unicode.kerning=x.kerning);var b=d.Unicode[g.postScriptName];b&&(g.metadata.Unicode.encoding=b,g.encoding=b.codePages[0])}])})(Sn.API),(function(e){var t=function(r){for(var s=r.length,a=new Uint8Array(s),i=0;i<s;i++)a[i]=r.charCodeAt(i);return a};e.API.events.push(["addFont",function(r){var s=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(s=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(E0(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,s)}}])})(Sn),(function(e){function t(){return(Cn.canvg?Promise.resolve(Cn.canvg):h4(()=>import("./index.es-DKMYrQDn.js"),[])).catch((function(r){return Promise.reject(new Error("Could not load canvg: "+r))})).then((function(r){return r.default?r.default:r}))}Sn.API.addSvgAsImage=function(r,s,a,i,o,l,c,d){if(isNaN(s)||isNaN(a))throw ls.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw ls.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=o;var h=u.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,u.width,u.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},x=this;return t().then((function(b){return b.fromString(h,r,g)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(b){return b.render(g)})).then((function(){x.addImage(u.toDataURL("image/jpeg",1),s,a,i,o,c,d)}))}})(),Sn.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var a=0;a<this.internal.pages[s].length;a++)this.internal.pages[s][a]=this.internal.pages[s][a].replace(t,r);return this},Sn.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var s,a,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,h=0;function g(b,y){var v,j=!1;for(v=0;v<b.length;v+=1)b[v]===y&&(j=!0);return j}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var x=l.length;for(h=0;h<x;h+=1)r[l[h]].value=r[l[h]].defaultValue,r[l[h]].explicitSet=!1}if(Qr(e)==="object"){for(a in e)if(i=e[a],g(l,a)&&i!==void 0){if(r[a].type==="boolean"&&typeof i=="boolean")r[a].value=i;else if(r[a].type==="name"&&g(r[a].valueSet,i))r[a].value=i;else if(r[a].type==="integer"&&Number.isInteger(i))r[a].value=i;else if(r[a].type==="array"){for(d=0;d<i.length;d+=1)if(s=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)typeof i[d][u]!="number"&&(s=!1);s===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){var b,y=[];for(b in r)r[b].explicitSet===!0&&(r[b].type==="name"?y.push("/"+b+" /"+r[b].value):y.push("/"+b+" "+r[b].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(e){var t=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(s)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(a+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(s,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}})(Sn.API),(function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],h=0,g=i.length;h<g;++h){if(l=o.metadata.characterToGlyph(i.charCodeAt(h)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(h),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return u.join("");l=l.toString(16),u.push(d[4-l.length],l)}return u.join("")},s=function(i){var o,l,c,d,u,h,g;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,g=(l=Object.keys(i).sort((function(x,b){return x-b}))).length;h<g;h++)o=l[h],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,g=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),x="",b=0;b<g.length;b++)x+=String.fromCharCode(g[b]);var y=d();u({data:x,addLength1:!0,objectId:y}),c("endobj");var v=d();u({data:s(l.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var j=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+zp(l.fontName)),c("/FontFile2 "+y+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var w=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+zp(l.fontName)),c("/FontDescriptor "+j+" 0 R"),c("/W "+e.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+v+" 0 R"),c("/BaseFont /"+zp(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+w+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,g="",x=0;x<h.length;x++)g+=String.fromCharCode(h[x]);var b=d();u({data:g,addLength1:!0,objectId:b}),c("endobj");var y=d();u({data:s(l.metadata.toUnicode),addLength1:!0,objectId:y}),c("endobj");var v=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+b+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+zp(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var j=0;j<l.metadata.hmtx.widths.length;j++)l.metadata.hmtx.widths[j]=parseInt(l.metadata.hmtx.widths[j]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+zp(l.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var a=function(i){var o,l=i.text||"",c=i.x,d=i.y,u=i.options||{},h=i.mutex||{},g=h.pdfEscape,x=h.activeFontKey,b=h.fonts,y=x,v="",j=0,w="",N=b[y].encoding;if(b[y].encoding!=="Identity-H")return{text:l,x:c,y:d,options:u,mutex:h};for(w=l,y=x,Array.isArray(l)&&(w=l[0]),j=0;j<w.length;j+=1)b[y].metadata.hasOwnProperty("cmap")&&(o=b[y].metadata.cmap.unicode.codeMap[w[j].charCodeAt(0)]),o||w[j].charCodeAt(0)<256&&b[y].metadata.hasOwnProperty("Unicode")?v+=w[j]:v+="";var A="";return parseInt(y.slice(1))<14||N==="WinAnsiEncoding"?A=g(v,y).split("").map((function(C){return C.charCodeAt(0).toString(16)})).join(""):N==="Identity-H"&&(A=r(v,b[y])),h.isHex=!0,{text:A,x:c,y:d,options:u,mutex:h}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([a(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(a(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=a(Object.assign({},c,{text:o})).text}])})(Sn),(function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,s){return t.call(this),this.internal.vFS[r]=s,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(Sn.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(s){var a,i,o,l,c,d,u,h=t,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],j=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,N=0;this.__bidiEngine__={};var A=function(D){var R=D.charCodeAt(),z=R>>8,Z=y[z];return Z!==void 0?h[256*Z+(255&R)]:z===252||z===253?"AL":j.test(z)?"L":z===8?"R":"N"},C=function(D){for(var R,z=0;z<D.length;z++){if((R=A(D.charAt(z)))==="L")return!1;if(R==="R")return!0}return!1},M=function(D,R,z,Z){var se,J,Q,H,ne=R[Z];switch(ne){case"L":case"R":w=!1;break;case"N":case"AN":break;case"EN":w&&(ne="AN");break;case"AL":w=!0,ne="R";break;case"WS":ne="N";break;case"CS":Z<1||Z+1>=R.length||(se=z[Z-1])!=="EN"&&se!=="AN"||(J=R[Z+1])!=="EN"&&J!=="AN"?ne="N":w&&(J="AN"),ne=J===se?J:"N";break;case"ES":ne=(se=Z>0?z[Z-1]:"B")==="EN"&&Z+1<R.length&&R[Z+1]==="EN"?"EN":"N";break;case"ET":if(Z>0&&z[Z-1]==="EN"){ne="EN";break}if(w){ne="N";break}for(Q=Z+1,H=R.length;Q<H&&R[Q]==="ET";)Q++;ne=Q<H&&R[Q]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(H=R.length,Q=Z+1;Q<H&&R[Q]==="NSM";)Q++;if(Q<H){var ue=D[Z],ae=ue>=1425&&ue<=2303||ue===64286;if(se=R[Q],ae&&(se==="R"||se==="AL")){ne="R";break}}}ne=Z<1||(se=R[Z-1])==="B"?"N":z[Z-1];break;case"B":w=!1,a=!0,ne=N;break;case"S":i=!0,ne="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"BN":ne="N"}return ne},I=function(D,R,z){var Z=D.split("");return z&&F(Z,z,{hiLevel:N}),Z.reverse(),R&&R.reverse(),Z.join("")},F=function(D,R,z){var Z,se,J,Q,H,ne=-1,ue=D.length,ae=0,G=[],te=N?x:g,fe=[];for(w=!1,a=!1,i=!1,se=0;se<ue;se++)fe[se]=A(D[se]);for(J=0;J<ue;J++){if(H=ae,G[J]=M(D,fe,G,J),Z=240&(ae=te[H][b[G[J]]]),ae&=15,R[J]=Q=te[ae][5],Z>0)if(Z===16){for(se=ne;se<J;se++)R[se]=1;ne=-1}else ne=-1;if(te[ae][6])ne===-1&&(ne=J);else if(ne>-1){for(se=ne;se<J;se++)R[se]=Q;ne=-1}fe[J]==="B"&&(R[J]=0),z.hiLevel|=Q}i&&(function(be,xe,we){for(var Pe=0;Pe<we;Pe++)if(be[Pe]==="S"){xe[Pe]=N;for(var _e=Pe-1;_e>=0&&be[_e]==="WS";_e--)xe[_e]=N}})(fe,R,ue)},U=function(D,R,z,Z,se){if(!(se.hiLevel<D)){if(D===1&&N===1&&!a)return R.reverse(),void(z&&z.reverse());for(var J,Q,H,ne,ue=R.length,ae=0;ae<ue;){if(Z[ae]>=D){for(H=ae+1;H<ue&&Z[H]>=D;)H++;for(ne=ae,Q=H-1;ne<Q;ne++,Q--)J=R[ne],R[ne]=R[Q],R[Q]=J,z&&(J=z[ne],z[ne]=z[Q],z[Q]=J);ae=H}ae++}}},W=function(D,R,z){var Z=D.split(""),se={hiLevel:N};return z||(z=[]),F(Z,z,se),(function(J,Q,H){if(H.hiLevel!==0&&u)for(var ne,ue=0;ue<J.length;ue++)Q[ue]===1&&(ne=v.indexOf(J[ue]))>=0&&(J[ue]=v[ne+1])})(Z,z,se),U(2,Z,R,z,se),U(1,Z,R,z,se),Z.join("")};return this.__bidiEngine__.doBidiReorder=function(D,R,z){if((function(se,J){if(J)for(var Q=0;Q<se.length;Q++)J[Q]=Q;l===void 0&&(l=C(se)),d===void 0&&(d=C(se))})(D,R),o||!c||d)if(o&&c&&l^d)N=l?1:0,D=I(D,R,z);else if(!o&&c&&d)N=l?1:0,D=W(D,R,z),D=I(D,R);else if(!o||l||c||d){if(o&&!c&&l^d)D=I(D,R),l?(N=0,D=W(D,R,z)):(N=1,D=W(D,R,z),D=I(D,R));else if(o&&l&&!c&&d)N=1,D=W(D,R,z),D=I(D,R);else if(!o&&!c&&l^d){var Z=u;l?(N=1,D=W(D,R,z),N=0,u=!1,D=W(D,R,z),u=Z):(N=0,D=W(D,R,z),D=I(D,R),N=1,u=!1,D=W(D,R,z),u=Z,D=I(D,R))}}else N=0,D=W(D,R,z);else N=l?1:0,D=W(D,R,z);return D},this.__bidiEngine__.setOptions=function(D){D&&(o=D.isInputVisual,c=D.isOutputVisual,l=D.isInputRtl,d=D.isOutputRtl,u=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(s){var a=s.text,i=(s.x,s.y,s.options||{}),o=(s.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);s.text=o}else s.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])})(Sn),Sn.API.TTFFont=(function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Ef(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new xme(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new nme(this.contents),this.head=new sme(this),this.name=new cme(this),this.cmap=new vU(this),this.toUnicode={},this.hhea=new ame(this),this.maxp=new dme(this),this.hmtx=new ume(this),this.post=new ome(this),this.os2=new ime(this),this.loca=new pme(this),this.glyf=new hme(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,s,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(s=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,s){var a,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)a=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(a))+s*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var s;return r==null&&(r=!1),s=r?this.lineGap:0,(this.ascender+s-this.decender)/1e3*t},e})();var _d,Ef=(function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,s;for(s=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)s[r]=String.fromCharCode(this.readByte());return s.join("")},e.prototype.writeString=function(t){var r,s,a;for(a=[],r=0,s=t.length;0<=s?r<s:r>s;r=0<=s?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,s,a,i,o,l,c;return t=this.readByte(),r=this.readByte(),s=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^s)+4294967296*(255^a)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*s+4294967296*a+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,s;return r=Math.floor(t/4294967296),s=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,s;for(r=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)r.push(this.readByte());return r},e.prototype.write=function(t){var r,s,a,i;for(i=[],s=0,a=t.length;s<a;s++)r=t[s],i.push(this.writeByte(r));return i},e})(),nme=(function(){var e;function t(r){var s,a,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)s={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[s.tag]=s}return t.prototype.encode=function(r){var s,a,i,o,l,c,d,u,h,g,x,b,y;for(y in x=Object.keys(r).length,c=Math.log(2),h=16*Math.floor(Math.log(x)/c),o=Math.floor(h/c),u=16*x-h,(a=new Ef).writeInt(this.scalarType),a.writeShort(x),a.writeShort(h),a.writeShort(o),a.writeShort(u),i=16*x,d=a.pos+i,l=null,b=[],r)for(g=r[y],a.writeString(y),a.writeInt(e(g)),a.writeInt(d),a.writeInt(g.length),b=b.concat(g),y==="head"&&(l=d),d+=g.length;d%4;)b.push(0),d++;return a.write(b),s=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(s),a.data},e=function(r){var s,a,i,o;for(r=yU.call(r);r.length%4;)r.push(0);for(i=new Ef(r),a=0,s=0,o=r.length;s<o;s=s+=4)a+=i.readUInt32();return 4294967295&a},t})(),rme={}.hasOwnProperty,Pu=function(e,t){for(var r in t)rme.call(t,r)&&(e[r]=t[r]);function s(){this.constructor=e}return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e};_d=(function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var sme=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pu(t,_d),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var s;return(s=new Ef).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(r),s.writeShort(this.glyphDataFormat),s.data},t})(),Z6=(function(){function e(t,r){var s,a,i,o,l,c,d,u,h,g,x,b,y,v,j,w,N;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),h=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(x=t.readUInt16(),g=x/2,t.pos+=6,i=(function(){var A,C;for(C=[],c=A=0;0<=g?A<g:A>g;c=0<=g?++A:--A)C.push(t.readUInt16());return C})(),t.pos+=2,y=(function(){var A,C;for(C=[],c=A=0;0<=g?A<g:A>g;c=0<=g?++A:--A)C.push(t.readUInt16());return C})(),d=(function(){var A,C;for(C=[],c=A=0;0<=g?A<g:A>g;c=0<=g?++A:--A)C.push(t.readUInt16());return C})(),u=(function(){var A,C;for(C=[],c=A=0;0<=g?A<g:A>g;c=0<=g?++A:--A)C.push(t.readUInt16());return C})(),a=(this.length-t.pos+this.offset)/2,l=(function(){var A,C;for(C=[],c=A=0;0<=a?A<a:A>a;c=0<=a?++A:--A)C.push(t.readUInt16());return C})(),c=j=0,N=i.length;j<N;c=++j)for(v=i[c],s=w=b=y[c];b<=v?w<=v:w>=v;s=b<=v?++w:--w)u[c]===0?o=s+d[c]:(o=l[u[c]/2+(s-b)-(g-c)]||0)!==0&&(o+=d[c]),this.codeMap[s]=65535&o}t.pos=h}return e.encode=function(t,r){var s,a,i,o,l,c,d,u,h,g,x,b,y,v,j,w,N,A,C,M,I,F,U,W,D,R,z,Z,se,J,Q,H,ne,ue,ae,G,te,fe,be,xe,we,Pe,_e,Ve,Ue,Le;switch(Z=new Ef,o=Object.keys(t).sort((function(dt,xt){return dt-xt})),r){case"macroman":for(y=0,v=(function(){var dt=[];for(b=0;b<256;++b)dt.push(0);return dt})(),w={0:0},i={},se=0,ne=o.length;se<ne;se++)w[_e=t[a=o[se]]]==null&&(w[_e]=++y),i[a]={old:t[a],new:w[t[a]]},v[a]=w[t[a]];return Z.writeUInt16(1),Z.writeUInt16(0),Z.writeUInt32(12),Z.writeUInt16(0),Z.writeUInt16(262),Z.writeUInt16(0),Z.write(v),{charMap:i,subtable:Z.data,maxGlyphID:y+1};case"unicode":for(R=[],h=[],N=0,w={},s={},j=d=null,J=0,ue=o.length;J<ue;J++)w[C=t[a=o[J]]]==null&&(w[C]=++N),s[a]={old:C,new:w[C]},l=w[C]-a,j!=null&&l===d||(j&&h.push(j),R.push(a),d=l),j=a;for(j&&h.push(j),h.push(65535),R.push(65535),W=2*(U=R.length),F=2*Math.pow(Math.log(U)/Math.LN2,2),g=Math.log(F/2)/Math.LN2,I=2*U-F,c=[],M=[],x=[],b=Q=0,ae=R.length;Q<ae;b=++Q){if(D=R[b],u=h[b],D===65535){c.push(0),M.push(0);break}if(D-(z=s[D].new)>=32768)for(c.push(0),M.push(2*(x.length+U-b)),a=H=D;D<=u?H<=u:H>=u;a=D<=u?++H:--H)x.push(s[a].new);else c.push(z-D),M.push(0)}for(Z.writeUInt16(3),Z.writeUInt16(1),Z.writeUInt32(12),Z.writeUInt16(4),Z.writeUInt16(16+8*U+2*x.length),Z.writeUInt16(0),Z.writeUInt16(W),Z.writeUInt16(F),Z.writeUInt16(g),Z.writeUInt16(I),we=0,G=h.length;we<G;we++)a=h[we],Z.writeUInt16(a);for(Z.writeUInt16(0),Pe=0,te=R.length;Pe<te;Pe++)a=R[Pe],Z.writeUInt16(a);for(Ve=0,fe=c.length;Ve<fe;Ve++)l=c[Ve],Z.writeUInt16(l);for(Ue=0,be=M.length;Ue<be;Ue++)A=M[Ue],Z.writeUInt16(A);for(Le=0,xe=x.length;Le<xe;Le++)y=x[Le],Z.writeUInt16(y);return{charMap:s,subtable:Z.data,maxGlyphID:N+1}}},e})(),vU=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pu(t,_d),t.prototype.tag="cmap",t.prototype.parse=function(r){var s,a,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)s=new Z6(r,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},t.encode=function(r,s){var a,i;return s==null&&(s="macroman"),a=Z6.encode(r,s),(i=new Ef).writeUInt16(0),i.writeUInt16(1),a.table=i.data.concat(a.subtable),a},t})(),ame=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pu(t,_d),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t})(),ime=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pu(t,_d),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=(function(){var s,a;for(a=[],s=0;s<10;++s)a.push(r.readByte());return a})(),this.charRange=(function(){var s,a;for(a=[],s=0;s<4;++s)a.push(r.readInt());return a})(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=(function(){var s,a;for(a=[],s=0;s<2;s=++s)a.push(r.readInt());return a})(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t})(),ome=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pu(t,_d),t.prototype.tag="post",t.prototype.parse=function(r){var s,a,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(a=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)s=r.readByte(),i.push(this.names.push(r.readString(s)));return i;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(r.readUInt32());return d}).call(this)}},t})(),lme=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},cme=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pu(t,_d),t.prototype.tag="name",t.prototype.parse=function(r){var s,a,i,o,l,c,d,u,h,g,x;for(r.pos=this.offset,r.readShort(),s=r.readShort(),c=r.readShort(),a=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(d={},o=h=0,g=a.length;h<g;o=++h)i=a[o],r.pos=i.offset,u=r.readString(i.length),l=new lme(u,i),d[x=i.nameID]==null&&(d[x]=[]),d[i.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t})(),dme=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pu(t,_d),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t})(),ume=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pu(t,_d),t.prototype.tag="hmtx",t.prototype.parse=function(r){var s,a,i,o,l,c,d;for(r.pos=this.offset,this.metrics=[],s=0,c=this.file.hhea.numberOfMetrics;0<=c?s<c:s>c;s=0<=c?++s:--s)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var u,h;for(h=[],s=u=0;0<=i?u<i:u>i;s=0<=i?++u:--u)h.push(r.readInt16());return h})(),this.widths=(function(){var u,h,g,x;for(x=[],u=0,h=(g=this.metrics).length;u<h;u++)o=g[u],x.push(o.advance);return x}).call(this),a=this.widths[this.widths.length-1],d=[],s=l=0;0<=i?l<i:l>i;s=0<=i?++l:--l)d.push(this.widths.push(a));return d},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t})(),yU=[].slice,hme=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pu(t,_d),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var s,a,i,o,l,c,d,u,h,g;return r in this.cache?this.cache[r]:(o=this.file.loca,s=this.file.contents,a=o.indexOf(r),(i=o.lengthOf(r))===0?this.cache[r]=null:(s.pos=this.offset+a,l=(c=new Ef(s.read(i))).readShort(),u=c.readShort(),g=c.readShort(),d=c.readShort(),h=c.readShort(),this.cache[r]=l===-1?new mme(c,u,g,d,h):new fme(c,l,u,g,d,h),this.cache[r]))},t.prototype.encode=function(r,s,a){var i,o,l,c,d;for(l=[],o=[],c=0,d=s.length;c<d;c++)i=r[s[c]],o.push(l.length),i&&(l=l.concat(i.encode(a)));return o.push(l.length),{table:l,offsets:o}},t})(),fme=(function(){function e(t,r,s,a,i,o){this.raw=t,this.numberOfContours=r,this.xMin=s,this.yMin=a,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),mme=(function(){function e(t,r,s,a,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=s,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,s;for(r=new Ef(yU.call(this.raw.data)),t=0,s=this.glyphIDs.length;t<s;++t)r.pos=this.glyphOffsets[t];return r.data},e})(),pme=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pu(t,_d),t.prototype.tag="loca",t.prototype.parse=function(r){var s,a;return r.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?(function(){var i,o;for(o=[],a=0,i=this.length;a<i;a+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],a=0,i=this.length;a<i;a+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,s){for(var a=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<a.length;++l)if(a[l]=i,o<s.length&&s[o]==l){++o,a[l]=i;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(i+=d)}for(var u=new Array(4*a.length),h=0;h<a.length;++h)u[4*h+3]=255&a[h],u[4*h+2]=(65280&a[h])>>8,u[4*h+1]=(16711680&a[h])>>16,u[4*h]=(4278190080&a[h])>>24;return u},t})(),xme=(function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,s,a,i;for(r in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)s=i[r],t[r]=a[s];return t},e.prototype.glyphsFor=function(t){var r,s,a,i,o,l,c;for(a={},o=0,l=t.length;o<l;o++)a[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],a)(s=a[i])!=null&&s.compound&&r.push.apply(r,s.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))s=c[i],a[i]=s;return a},e.prototype.encode=function(t,r){var s,a,i,o,l,c,d,u,h,g,x,b,y,v,j;for(a in s=vU.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),x={0:0},j=s.charMap)x[(c=j[a]).old]=c.new;for(b in g=s.maxGlyphID,o)b in x||(x[b]=g++);return u=(function(w){var N,A;for(N in A={},w)A[w[N]]=N;return A})(x),h=Object.keys(u).sort((function(w,N){return w-N})),y=(function(){var w,N,A;for(A=[],w=0,N=h.length;w<N;w++)l=h[w],A.push(u[l]);return A})(),i=this.font.glyf.encode(o,y,x),d=this.font.loca.encode(i.offsets,y),v={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},e})();Sn.API.PDFObject=(function(){var e;function t(){}return e=function(r,s){return(Array(s+1).join("0")+r).slice(-s)},t.convert=function(r){var s,a,i,o;if(Array.isArray(r))return"["+(function(){var l,c,d;for(d=[],l=0,c=r.length;l<c;l++)s=r[l],d.push(t.convert(s));return d})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in i=["<<"],r)o=r[a],i.push("/"+a+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t})();var o_,Y6;function fl(){if(Y6)return o_;Y6=1;var e=Array.isArray;return o_=e,o_}var l_,X6;function bU(){if(X6)return l_;X6=1;var e=typeof Ky=="object"&&Ky&&Ky.Object===Object&&Ky;return l_=e,l_}var c_,Q6;function Au(){if(Q6)return c_;Q6=1;var e=bU(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return c_=r,c_}var d_,J6;function iy(){if(J6)return d_;J6=1;var e=Au(),t=e.Symbol;return d_=t,d_}var u_,eM;function gme(){if(eM)return u_;eM=1;var e=iy(),t=Object.prototype,r=t.hasOwnProperty,s=t.toString,a=e?e.toStringTag:void 0;function i(o){var l=r.call(o,a),c=o[a];try{o[a]=void 0;var d=!0}catch{}var u=s.call(o);return d&&(l?o[a]=c:delete o[a]),u}return u_=i,u_}var h_,tM;function vme(){if(tM)return h_;tM=1;var e=Object.prototype,t=e.toString;function r(s){return t.call(s)}return h_=r,h_}var f_,nM;function Ch(){if(nM)return f_;nM=1;var e=iy(),t=gme(),r=vme(),s="[object Null]",a="[object Undefined]",i=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?a:s:i&&i in Object(l)?t(l):r(l)}return f_=o,f_}var m_,rM;function Th(){if(rM)return m_;rM=1;function e(t){return t!=null&&typeof t=="object"}return m_=e,m_}var p_,sM;function Cg(){if(sM)return p_;sM=1;var e=Ch(),t=Th(),r="[object Symbol]";function s(a){return typeof a=="symbol"||t(a)&&e(a)==r}return p_=s,p_}var x_,aM;function PA(){if(aM)return x_;aM=1;var e=fl(),t=Cg(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function a(i,o){if(e(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||t(i)?!0:s.test(i)||!r.test(i)||o!=null&&i in Object(o)}return x_=a,x_}var g_,iM;function $f(){if(iM)return g_;iM=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return g_=e,g_}var v_,oM;function AA(){if(oM)return v_;oM=1;var e=Ch(),t=$f(),r="[object AsyncFunction]",s="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!t(l))return!1;var c=e(l);return c==s||c==a||c==r||c==i}return v_=o,v_}var y_,lM;function yme(){if(lM)return y_;lM=1;var e=Au(),t=e["__core-js_shared__"];return y_=t,y_}var b_,cM;function bme(){if(cM)return b_;cM=1;var e=yme(),t=(function(){var s=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""})();function r(s){return!!t&&t in s}return b_=r,b_}var j_,dM;function jU(){if(dM)return j_;dM=1;var e=Function.prototype,t=e.toString;function r(s){if(s!=null){try{return t.call(s)}catch{}try{return s+""}catch{}}return""}return j_=r,j_}var w_,uM;function jme(){if(uM)return w_;uM=1;var e=AA(),t=bme(),r=$f(),s=jU(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,d=l.hasOwnProperty,u=RegExp("^"+c.call(d).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(g){if(!r(g)||t(g))return!1;var x=e(g)?u:i;return x.test(s(g))}return w_=h,w_}var __,hM;function wme(){if(hM)return __;hM=1;function e(t,r){return t==null?void 0:t[r]}return __=e,__}var N_,fM;function op(){if(fM)return N_;fM=1;var e=jme(),t=wme();function r(s,a){var i=t(s,a);return e(i)?i:void 0}return N_=r,N_}var k_,mM;function Wj(){if(mM)return k_;mM=1;var e=op(),t=e(Object,"create");return k_=t,k_}var S_,pM;function _me(){if(pM)return S_;pM=1;var e=Wj();function t(){this.__data__=e?e(null):{},this.size=0}return S_=t,S_}var P_,xM;function Nme(){if(xM)return P_;xM=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return P_=e,P_}var A_,gM;function kme(){if(gM)return A_;gM=1;var e=Wj(),t="__lodash_hash_undefined__",r=Object.prototype,s=r.hasOwnProperty;function a(i){var o=this.__data__;if(e){var l=o[i];return l===t?void 0:l}return s.call(o,i)?o[i]:void 0}return A_=a,A_}var C_,vM;function Sme(){if(vM)return C_;vM=1;var e=Wj(),t=Object.prototype,r=t.hasOwnProperty;function s(a){var i=this.__data__;return e?i[a]!==void 0:r.call(i,a)}return C_=s,C_}var T_,yM;function Pme(){if(yM)return T_;yM=1;var e=Wj(),t="__lodash_hash_undefined__";function r(s,a){var i=this.__data__;return this.size+=this.has(s)?0:1,i[s]=e&&a===void 0?t:a,this}return T_=r,T_}var E_,bM;function Ame(){if(bM)return E_;bM=1;var e=_me(),t=Nme(),r=kme(),s=Sme(),a=Pme();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=s,i.prototype.set=a,E_=i,E_}var O_,jM;function Cme(){if(jM)return O_;jM=1;function e(){this.__data__=[],this.size=0}return O_=e,O_}var M_,wM;function CA(){if(wM)return M_;wM=1;function e(t,r){return t===r||t!==t&&r!==r}return M_=e,M_}var L_,_M;function Kj(){if(_M)return L_;_M=1;var e=CA();function t(r,s){for(var a=r.length;a--;)if(e(r[a][0],s))return a;return-1}return L_=t,L_}var D_,NM;function Tme(){if(NM)return D_;NM=1;var e=Kj(),t=Array.prototype,r=t.splice;function s(a){var i=this.__data__,o=e(i,a);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():r.call(i,o,1),--this.size,!0}return D_=s,D_}var I_,kM;function Eme(){if(kM)return I_;kM=1;var e=Kj();function t(r){var s=this.__data__,a=e(s,r);return a<0?void 0:s[a][1]}return I_=t,I_}var R_,SM;function Ome(){if(SM)return R_;SM=1;var e=Kj();function t(r){return e(this.__data__,r)>-1}return R_=t,R_}var F_,PM;function Mme(){if(PM)return F_;PM=1;var e=Kj();function t(r,s){var a=this.__data__,i=e(a,r);return i<0?(++this.size,a.push([r,s])):a[i][1]=s,this}return F_=t,F_}var $_,AM;function Gj(){if(AM)return $_;AM=1;var e=Cme(),t=Tme(),r=Eme(),s=Ome(),a=Mme();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=s,i.prototype.set=a,$_=i,$_}var B_,CM;function TA(){if(CM)return B_;CM=1;var e=op(),t=Au(),r=e(t,"Map");return B_=r,B_}var q_,TM;function Lme(){if(TM)return q_;TM=1;var e=Ame(),t=Gj(),r=TA();function s(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return q_=s,q_}var z_,EM;function Dme(){if(EM)return z_;EM=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return z_=e,z_}var V_,OM;function Zj(){if(OM)return V_;OM=1;var e=Dme();function t(r,s){var a=r.__data__;return e(s)?a[typeof s=="string"?"string":"hash"]:a.map}return V_=t,V_}var U_,MM;function Ime(){if(MM)return U_;MM=1;var e=Zj();function t(r){var s=e(this,r).delete(r);return this.size-=s?1:0,s}return U_=t,U_}var H_,LM;function Rme(){if(LM)return H_;LM=1;var e=Zj();function t(r){return e(this,r).get(r)}return H_=t,H_}var W_,DM;function Fme(){if(DM)return W_;DM=1;var e=Zj();function t(r){return e(this,r).has(r)}return W_=t,W_}var K_,IM;function $me(){if(IM)return K_;IM=1;var e=Zj();function t(r,s){var a=e(this,r),i=a.size;return a.set(r,s),this.size+=a.size==i?0:1,this}return K_=t,K_}var G_,RM;function EA(){if(RM)return G_;RM=1;var e=Lme(),t=Ime(),r=Rme(),s=Fme(),a=$me();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=s,i.prototype.set=a,G_=i,G_}var Z_,FM;function wU(){if(FM)return Z_;FM=1;var e=EA(),t="Expected a function";function r(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new TypeError(t);var i=function(){var o=arguments,l=a?a.apply(this,o):o[0],c=i.cache;if(c.has(l))return c.get(l);var d=s.apply(this,o);return i.cache=c.set(l,d)||c,d};return i.cache=new(r.Cache||e),i}return r.Cache=e,Z_=r,Z_}var Y_,$M;function Bme(){if($M)return Y_;$M=1;var e=wU(),t=500;function r(s){var a=e(s,function(o){return i.size===t&&i.clear(),o}),i=a.cache;return a}return Y_=r,Y_}var X_,BM;function qme(){if(BM)return X_;BM=1;var e=Bme(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,s=e(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(t,function(o,l,c,d){i.push(c?d.replace(r,"$1"):l||o)}),i});return X_=s,X_}var Q_,qM;function OA(){if(qM)return Q_;qM=1;function e(t,r){for(var s=-1,a=t==null?0:t.length,i=Array(a);++s<a;)i[s]=r(t[s],s,t);return i}return Q_=e,Q_}var J_,zM;function zme(){if(zM)return J_;zM=1;var e=iy(),t=OA(),r=fl(),s=Cg(),a=e?e.prototype:void 0,i=a?a.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return t(l,o)+"";if(s(l))return i?i.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return J_=o,J_}var eN,VM;function _U(){if(VM)return eN;VM=1;var e=zme();function t(r){return r==null?"":e(r)}return eN=t,eN}var tN,UM;function NU(){if(UM)return tN;UM=1;var e=fl(),t=PA(),r=qme(),s=_U();function a(i,o){return e(i)?i:t(i,o)?[i]:r(s(i))}return tN=a,tN}var nN,HM;function Yj(){if(HM)return nN;HM=1;var e=Cg();function t(r){if(typeof r=="string"||e(r))return r;var s=r+"";return s=="0"&&1/r==-1/0?"-0":s}return nN=t,nN}var rN,WM;function MA(){if(WM)return rN;WM=1;var e=NU(),t=Yj();function r(s,a){a=e(a,s);for(var i=0,o=a.length;s!=null&&i<o;)s=s[t(a[i++])];return i&&i==o?s:void 0}return rN=r,rN}var sN,KM;function kU(){if(KM)return sN;KM=1;var e=MA();function t(r,s,a){var i=r==null?void 0:e(r,s);return i===void 0?a:i}return sN=t,sN}var Vme=kU();const Rl=Dr(Vme);var aN,GM;function Ume(){if(GM)return aN;GM=1;function e(t){return t==null}return aN=e,aN}var Hme=Ume();const zn=Dr(Hme);var iN,ZM;function Wme(){if(ZM)return iN;ZM=1;var e=Ch(),t=fl(),r=Th(),s="[object String]";function a(i){return typeof i=="string"||!t(i)&&r(i)&&e(i)==s}return iN=a,iN}var Kme=Wme();const Km=Dr(Kme);var Gme=AA();const Rn=Dr(Gme);var Zme=$f();const Tg=Dr(Zme);var oN={exports:{}},Ur={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YM;function Yme(){if(YM)return Ur;YM=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),b;b=Symbol.for("react.module.reference");function y(v){if(typeof v=="object"&&v!==null){var j=v.$$typeof;switch(j){case e:switch(v=v.type,v){case r:case a:case s:case d:case u:return v;default:switch(v=v&&v.$$typeof,v){case l:case o:case c:case g:case h:case i:return v;default:return j}}case t:return j}}}return Ur.ContextConsumer=o,Ur.ContextProvider=i,Ur.Element=e,Ur.ForwardRef=c,Ur.Fragment=r,Ur.Lazy=g,Ur.Memo=h,Ur.Portal=t,Ur.Profiler=a,Ur.StrictMode=s,Ur.Suspense=d,Ur.SuspenseList=u,Ur.isAsyncMode=function(){return!1},Ur.isConcurrentMode=function(){return!1},Ur.isContextConsumer=function(v){return y(v)===o},Ur.isContextProvider=function(v){return y(v)===i},Ur.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===e},Ur.isForwardRef=function(v){return y(v)===c},Ur.isFragment=function(v){return y(v)===r},Ur.isLazy=function(v){return y(v)===g},Ur.isMemo=function(v){return y(v)===h},Ur.isPortal=function(v){return y(v)===t},Ur.isProfiler=function(v){return y(v)===a},Ur.isStrictMode=function(v){return y(v)===s},Ur.isSuspense=function(v){return y(v)===d},Ur.isSuspenseList=function(v){return y(v)===u},Ur.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===r||v===a||v===s||v===d||v===u||v===x||typeof v=="object"&&v!==null&&(v.$$typeof===g||v.$$typeof===h||v.$$typeof===i||v.$$typeof===o||v.$$typeof===c||v.$$typeof===b||v.getModuleId!==void 0)},Ur.typeOf=y,Ur}var XM;function Xme(){return XM||(XM=1,oN.exports=Yme()),oN.exports}var Qme=Xme(),lN,QM;function SU(){if(QM)return lN;QM=1;var e=Ch(),t=Th(),r="[object Number]";function s(a){return typeof a=="number"||t(a)&&e(a)==r}return lN=s,lN}var cN,JM;function Jme(){if(JM)return cN;JM=1;var e=SU();function t(r){return e(r)&&r!=+r}return cN=t,cN}var epe=Jme();const oy=Dr(epe);var tpe=SU();const npe=Dr(tpe);var Oo=function(t){return t===0?0:t>0?1:-1},bm=function(t){return Km(t)&&t.indexOf("%")===t.length-1},Lt=function(t){return npe(t)&&!oy(t)},rpe=function(t){return zn(t)},ei=function(t){return Lt(t)||Km(t)},spe=0,Eg=function(t){var r=++spe;return"".concat(t||"").concat(r)},Mo=function(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Lt(t)&&!Km(t))return s;var i;if(bm(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return oy(i)&&(i=s),a&&i>r&&(i=r),i},af=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},ape=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,s={},a=0;a<r;a++)if(!s[t[a]])s[t[a]]=!0;else return!0;return!1},El=function(t,r){return Lt(t)&&Lt(r)?function(s){return t+s*(r-t)}:function(){return r}};function h1(e,t,r){return!e||!e.length?null:e.find(function(s){return s&&(typeof t=="function"?t(s):Rl(s,t))===r})}var ipe=function(t,r){return Lt(t)&&Lt(r)?t-r:Km(t)&&Km(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function lx(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var s in t)if({}.hasOwnProperty.call(t,s)&&!{}.hasOwnProperty.call(e,s))return!1;return!0}function N4(e){"@babel/helpers - typeof";return N4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N4(e)}var ope=["viewBox","children"],lpe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],eL=["points","pathLength"],dN={svg:ope,polygon:eL,polyline:eL},LA=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],f1=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(P.isValidElement(t)&&(s=t.props),!Tg(s))return null;var a={};return Object.keys(s).forEach(function(i){LA.includes(i)&&(a[i]=r||function(o){return s[i](s,o)})}),a},cpe=function(t,r,s){return function(a){return t(r,s,a),null}},Gm=function(t,r,s){if(!Tg(t)||N4(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];LA.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=cpe(o,r,s))}),a},dpe=["children"],upe=["children"];function tL(e,t){if(e==null)return{};var r=hpe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function hpe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function k4(e){"@babel/helpers - typeof";return k4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k4(e)}var nL={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},uh=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},rL=null,uN=null,DA=function e(t){if(t===rL&&Array.isArray(uN))return uN;var r=[];return P.Children.forEach(t,function(s){zn(s)||(Qme.isFragment(s)?r=r.concat(e(s.props.children)):r.push(s))}),uN=r,rL=t,r};function Fl(e,t){var r=[],s=[];return Array.isArray(t)?s=t.map(function(a){return uh(a)}):s=[uh(t)],DA(e).forEach(function(a){var i=Rl(a,"type.displayName")||Rl(a,"type.name");s.indexOf(i)!==-1&&r.push(a)}),r}function Cl(e,t){var r=Fl(e,t);return r&&r[0]}var sL=function(t){if(!t||!t.props)return!1;var r=t.props,s=r.width,a=r.height;return!(!Lt(s)||s<=0||!Lt(a)||a<=0)},fpe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],mpe=function(t){return t&&t.type&&Km(t.type)&&fpe.indexOf(t.type)>=0},ppe=function(t){return t&&k4(t)==="object"&&"clipDot"in t},xpe=function(t,r,s,a){var i,o=(i=dN==null?void 0:dN[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Rn(t)&&(a&&o.includes(r)||lpe.includes(r))||s&&LA.includes(r)},bn=function(t,r,s){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(P.isValidElement(t)&&(a=t.props),!Tg(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;xpe((l=a)===null||l===void 0?void 0:l[o],o,r,s)&&(i[o]=a[o])}),i},S4=function e(t,r){if(t===r)return!0;var s=P.Children.count(t);if(s!==P.Children.count(r))return!1;if(s===0)return!0;if(s===1)return aL(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<s;a++){var i=t[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!aL(i,o))return!1}return!0},aL=function(t,r){if(zn(t)&&zn(r))return!0;if(!zn(t)&&!zn(r)){var s=t.props||{},a=s.children,i=tL(s,dpe),o=r.props||{},l=o.children,c=tL(o,upe);return a&&l?lx(i,c)&&S4(a,l):!a&&!l?lx(i,c):!1}return!1},iL=function(t,r){var s=[],a={};return DA(t).forEach(function(i,o){if(mpe(i))s.push(i);else if(i){var l=uh(i.type),c=r[l]||{},d=c.handler,u=c.once;if(d&&(!u||!a[l])){var h=d(i,l,o);s.push(h),a[l]=!0}}}),s},gpe=function(t){var r=t&&t.type;return r&&nL[r]?nL[r]:null},vpe=function(t,r){return DA(r).indexOf(t)},ype=["children","width","height","viewBox","className","style","title","desc"];function P4(){return P4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},P4.apply(this,arguments)}function bpe(e,t){if(e==null)return{};var r=jpe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function jpe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function A4(e){var t=e.children,r=e.width,s=e.height,a=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,d=bpe(e,ype),u=a||{width:r,height:s,x:0,y:0},h=Hn("recharts-surface",i);return Te.createElement("svg",P4({},bn(d,!0,"svg"),{className:h,width:r,height:s,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),Te.createElement("title",null,l),Te.createElement("desc",null,c),t)}var wpe=["children","className"];function C4(){return C4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},C4.apply(this,arguments)}function _pe(e,t){if(e==null)return{};var r=Npe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Npe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var Or=Te.forwardRef(function(e,t){var r=e.children,s=e.className,a=_pe(e,wpe),i=Hn("recharts-layer",s);return Te.createElement("g",C4({className:i},bn(a,!0),{ref:t}),r)}),xd=function(t,r){for(var s=arguments.length,a=new Array(s>2?s-2:0),i=2;i<s;i++)a[i-2]=arguments[i]},hN,oL;function kpe(){if(oL)return hN;oL=1;function e(t,r,s){var a=-1,i=t.length;r<0&&(r=-r>i?0:i+r),s=s>i?i:s,s<0&&(s+=i),i=r>s?0:s-r>>>0,r>>>=0;for(var o=Array(i);++a<i;)o[a]=t[a+r];return o}return hN=e,hN}var fN,lL;function Spe(){if(lL)return fN;lL=1;var e=kpe();function t(r,s,a){var i=r.length;return a=a===void 0?i:a,!s&&a>=i?r:e(r,s,a)}return fN=t,fN}var mN,cL;function PU(){if(cL)return mN;cL=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",a=t+r+s,i="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+a+i+"]");function c(d){return l.test(d)}return mN=c,mN}var pN,dL;function Ppe(){if(dL)return pN;dL=1;function e(t){return t.split("")}return pN=e,pN}var xN,uL;function Ape(){if(uL)return xN;uL=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",a=t+r+s,i="\\ufe0e\\ufe0f",o="["+e+"]",l="["+a+"]",c="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+c+")",u="[^"+e+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",b=d+"?",y="["+i+"]?",v="(?:"+x+"(?:"+[u,h,g].join("|")+")"+y+b+")*",j=y+b+v,w="(?:"+[u+l+"?",l,h,g,o].join("|")+")",N=RegExp(c+"(?="+c+")|"+w+j,"g");function A(C){return C.match(N)||[]}return xN=A,xN}var gN,hL;function Cpe(){if(hL)return gN;hL=1;var e=Ppe(),t=PU(),r=Ape();function s(a){return t(a)?r(a):e(a)}return gN=s,gN}var vN,fL;function Tpe(){if(fL)return vN;fL=1;var e=Spe(),t=PU(),r=Cpe(),s=_U();function a(i){return function(o){o=s(o);var l=t(o)?r(o):void 0,c=l?l[0]:o.charAt(0),d=l?e(l,1).join(""):o.slice(1);return c[i]()+d}}return vN=a,vN}var yN,mL;function Epe(){if(mL)return yN;mL=1;var e=Tpe(),t=e("toUpperCase");return yN=t,yN}var Ope=Epe();const Xj=Dr(Ope);function ys(e){return function(){return e}}const AU=Math.cos,m1=Math.sin,Nd=Math.sqrt,p1=Math.PI,Qj=2*p1,T4=Math.PI,E4=2*T4,fm=1e-6,Mpe=E4-fm;function CU(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Lpe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return CU;const r=10**t;return function(s){this._+=s[0];for(let a=1,i=s.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+s[a]}}class Dpe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?CU:Lpe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,s,a){this._append`Q${+t},${+r},${this._x1=+s},${this._y1=+a}`}bezierCurveTo(t,r,s,a,i,o){this._append`C${+t},${+r},${+s},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,s,a,i){if(t=+t,r=+r,s=+s,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=s-t,d=a-r,u=o-t,h=l-r,g=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(g>fm)if(!(Math.abs(h*c-d*u)>fm)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let x=s-o,b=a-l,y=c*c+d*d,v=x*x+b*b,j=Math.sqrt(y),w=Math.sqrt(g),N=i*Math.tan((T4-Math.acos((y+g-v)/(2*j*w)))/2),A=N/w,C=N/j;Math.abs(A-1)>fm&&this._append`L${t+A*u},${r+A*h}`,this._append`A${i},${i},0,0,${+(h*x>u*b)},${this._x1=t+C*c},${this._y1=r+C*d}`}}arc(t,r,s,a,i,o){if(t=+t,r=+r,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let l=s*Math.cos(a),c=s*Math.sin(a),d=t+l,u=r+c,h=1^o,g=o?a-i:i-a;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>fm||Math.abs(this._y1-u)>fm)&&this._append`L${d},${u}`,s&&(g<0&&(g=g%E4+E4),g>Mpe?this._append`A${s},${s},0,1,${h},${t-l},${r-c}A${s},${s},0,1,${h},${this._x1=d},${this._y1=u}`:g>fm&&this._append`A${s},${s},0,${+(g>=T4)},${h},${this._x1=t+s*Math.cos(i)},${this._y1=r+s*Math.sin(i)}`)}rect(t,r,s,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${s=+s}v${+a}h${-s}Z`}toString(){return this._}}function IA(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const s=Math.floor(r);if(!(s>=0))throw new RangeError(`invalid digits: ${r}`);t=s}return e},()=>new Dpe(t)}function RA(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function TU(e){this._context=e}TU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Jj(e){return new TU(e)}function EU(e){return e[0]}function OU(e){return e[1]}function MU(e,t){var r=ys(!0),s=null,a=Jj,i=null,o=IA(l);e=typeof e=="function"?e:e===void 0?EU:ys(e),t=typeof t=="function"?t:t===void 0?OU:ys(t);function l(c){var d,u=(c=RA(c)).length,h,g=!1,x;for(s==null&&(i=a(x=o())),d=0;d<=u;++d)!(d<u&&r(h=c[d],d,c))===g&&((g=!g)?i.lineStart():i.lineEnd()),g&&i.point(+e(h,d,c),+t(h,d,c));if(x)return i=null,x+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:ys(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:ys(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:ys(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,s!=null&&(i=a(s)),l):a},l.context=function(c){return arguments.length?(c==null?s=i=null:i=a(s=c),l):s},l}function mb(e,t,r){var s=null,a=ys(!0),i=null,o=Jj,l=null,c=IA(d);e=typeof e=="function"?e:e===void 0?EU:ys(+e),t=typeof t=="function"?t:ys(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?OU:ys(+r);function d(h){var g,x,b,y=(h=RA(h)).length,v,j=!1,w,N=new Array(y),A=new Array(y);for(i==null&&(l=o(w=c())),g=0;g<=y;++g){if(!(g<y&&a(v=h[g],g,h))===j)if(j=!j)x=g,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=g-1;b>=x;--b)l.point(N[b],A[b]);l.lineEnd(),l.areaEnd()}j&&(N[g]=+e(v,g,h),A[g]=+t(v,g,h),l.point(s?+s(v,g,h):N[g],r?+r(v,g,h):A[g]))}if(w)return l=null,w+""||null}function u(){return MU().defined(a).curve(o).context(i)}return d.x=function(h){return arguments.length?(e=typeof h=="function"?h:ys(+h),s=null,d):e},d.x0=function(h){return arguments.length?(e=typeof h=="function"?h:ys(+h),d):e},d.x1=function(h){return arguments.length?(s=h==null?null:typeof h=="function"?h:ys(+h),d):s},d.y=function(h){return arguments.length?(t=typeof h=="function"?h:ys(+h),r=null,d):t},d.y0=function(h){return arguments.length?(t=typeof h=="function"?h:ys(+h),d):t},d.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:ys(+h),d):r},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(r)},d.lineX1=function(){return u().x(s).y(t)},d.defined=function(h){return arguments.length?(a=typeof h=="function"?h:ys(!!h),d):a},d.curve=function(h){return arguments.length?(o=h,i!=null&&(l=o(i)),d):o},d.context=function(h){return arguments.length?(h==null?i=l=null:l=o(i=h),d):i},d}class LU{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Ipe(e){return new LU(e,!0)}function Rpe(e){return new LU(e,!1)}const FA={draw(e,t){const r=Nd(t/p1);e.moveTo(r,0),e.arc(0,0,r,0,Qj)}},Fpe={draw(e,t){const r=Nd(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},DU=Nd(1/3),$pe=DU*2,Bpe={draw(e,t){const r=Nd(t/$pe),s=r*DU;e.moveTo(0,-r),e.lineTo(s,0),e.lineTo(0,r),e.lineTo(-s,0),e.closePath()}},qpe={draw(e,t){const r=Nd(t),s=-r/2;e.rect(s,s,r,r)}},zpe=.8908130915292852,IU=m1(p1/10)/m1(7*p1/10),Vpe=m1(Qj/10)*IU,Upe=-AU(Qj/10)*IU,Hpe={draw(e,t){const r=Nd(t*zpe),s=Vpe*r,a=Upe*r;e.moveTo(0,-r),e.lineTo(s,a);for(let i=1;i<5;++i){const o=Qj*i/5,l=AU(o),c=m1(o);e.lineTo(c*r,-l*r),e.lineTo(l*s-c*a,c*s+l*a)}e.closePath()}},bN=Nd(3),Wpe={draw(e,t){const r=-Nd(t/(bN*3));e.moveTo(0,r*2),e.lineTo(-bN*r,-r),e.lineTo(bN*r,-r),e.closePath()}},mc=-.5,pc=Nd(3)/2,O4=1/Nd(12),Kpe=(O4/2+1)*3,Gpe={draw(e,t){const r=Nd(t/Kpe),s=r/2,a=r*O4,i=s,o=r*O4+r,l=-i,c=o;e.moveTo(s,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(mc*s-pc*a,pc*s+mc*a),e.lineTo(mc*i-pc*o,pc*i+mc*o),e.lineTo(mc*l-pc*c,pc*l+mc*c),e.lineTo(mc*s+pc*a,mc*a-pc*s),e.lineTo(mc*i+pc*o,mc*o-pc*i),e.lineTo(mc*l+pc*c,mc*c-pc*l),e.closePath()}};function Zpe(e,t){let r=null,s=IA(a);e=typeof e=="function"?e:ys(e||FA),t=typeof t=="function"?t:ys(t===void 0?64:+t);function a(){let i;if(r||(r=i=s()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:ys(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:ys(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function x1(){}function g1(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function RU(e){this._context=e}RU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:g1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:g1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ype(e){return new RU(e)}function FU(e){this._context=e}FU.prototype={areaStart:x1,areaEnd:x1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:g1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Xpe(e){return new FU(e)}function $U(e){this._context=e}$U.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,s):this._context.moveTo(r,s);break;case 3:this._point=4;default:g1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Qpe(e){return new $U(e)}function BU(e){this._context=e}BU.prototype={areaStart:x1,areaEnd:x1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Jpe(e){return new BU(e)}function pL(e){return e<0?-1:1}function xL(e,t,r){var s=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(s||a<0&&-0),o=(r-e._y1)/(a||s<0&&-0),l=(i*a+o*s)/(s+a);return(pL(i)+pL(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function gL(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function jN(e,t,r){var s=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-s)/3;e._context.bezierCurveTo(s+l,a+l*t,i-l,o-l*r,i,o)}function v1(e){this._context=e}v1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:jN(this,this._t0,gL(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,jN(this,gL(this,r=xL(this,e,t)),r);break;default:jN(this,this._t0,r=xL(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function qU(e){this._context=new zU(e)}(qU.prototype=Object.create(v1.prototype)).point=function(e,t){v1.prototype.point.call(this,t,e)};function zU(e){this._context=e}zU.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,s,a,i){this._context.bezierCurveTo(t,e,s,r,i,a)}};function exe(e){return new v1(e)}function txe(e){return new qU(e)}function VU(e){this._context=e}VU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var s=vL(e),a=vL(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(s[0][i],a[0][i],s[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function vL(e){var t,r=e.length-1,s,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)s=a[t]/i[t-1],i[t]-=s,o[t]-=s*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function nxe(e){return new VU(e)}function ew(e,t){this._context=e,this._t=t}ew.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function rxe(e){return new ew(e,.5)}function sxe(e){return new ew(e,0)}function axe(e){return new ew(e,1)}function Ox(e,t){if((o=e.length)>1)for(var r=1,s,a,i=e[t[0]],o,l=i.length;r<o;++r)for(a=i,i=e[t[r]],s=0;s<l;++s)i[s][1]+=i[s][0]=isNaN(a[s][1])?a[s][0]:a[s][1]}function M4(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function ixe(e,t){return e[t]}function oxe(e){const t=[];return t.key=e,t}function lxe(){var e=ys([]),t=M4,r=Ox,s=ixe;function a(i){var o=Array.from(e.apply(this,arguments),oxe),l,c=o.length,d=-1,u;for(const h of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+s(h,o[l].key,d,i)]).data=h;for(l=0,u=RA(t(o));l<c;++l)o[u[l]].index=l;return r(o,u),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:ys(Array.from(i)),a):e},a.value=function(i){return arguments.length?(s=typeof i=="function"?i:ys(+i),a):s},a.order=function(i){return arguments.length?(t=i==null?M4:typeof i=="function"?i:ys(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??Ox,a):r},a}function cxe(e,t){if((s=e.length)>0){for(var r,s,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<s;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<s;++r)e[r][a][1]/=o}Ox(e,t)}}function dxe(e,t){if((a=e.length)>0){for(var r=0,s=e[t[0]],a,i=s.length;r<i;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;s[r][1]+=s[r][0]=-l/2}Ox(e,t)}}function uxe(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,s=1,a,i,o;s<i;++s){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],h=u[s][1]||0,g=u[s-1][1]||0,x=(h-g)/2,b=0;b<l;++b){var y=e[t[b]],v=y[s][1]||0,j=y[s-1][1]||0;x+=v-j}c+=h,d+=x*h}a[s-1][1]+=a[s-1][0]=r,c&&(r-=d/c)}a[s-1][1]+=a[s-1][0]=r,Ox(e,t)}}function nv(e){"@babel/helpers - typeof";return nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nv(e)}var hxe=["type","size","sizeType"];function L4(){return L4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},L4.apply(this,arguments)}function yL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function bL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yL(Object(r),!0).forEach(function(s){fxe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yL(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function fxe(e,t,r){return t=mxe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mxe(e){var t=pxe(e,"string");return nv(t)=="symbol"?t:t+""}function pxe(e,t){if(nv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(nv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xxe(e,t){if(e==null)return{};var r=gxe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function gxe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var UU={symbolCircle:FA,symbolCross:Fpe,symbolDiamond:Bpe,symbolSquare:qpe,symbolStar:Hpe,symbolTriangle:Wpe,symbolWye:Gpe},vxe=Math.PI/180,yxe=function(t){var r="symbol".concat(Xj(t));return UU[r]||FA},bxe=function(t,r,s){if(r==="area")return t;switch(s){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*vxe;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},jxe=function(t,r){UU["symbol".concat(Xj(t))]=r},$A=function(t){var r=t.type,s=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=xxe(t,hxe),d=bL(bL({},c),{},{type:s,size:i,sizeType:l}),u=function(){var v=yxe(s),j=Zpe().type(v).size(bxe(i,l,s));return j()},h=d.className,g=d.cx,x=d.cy,b=bn(d,!0);return g===+g&&x===+x&&i===+i?Te.createElement("path",L4({},b,{className:Hn("recharts-symbols",h),transform:"translate(".concat(g,", ").concat(x,")"),d:u()})):null};$A.registerSymbol=jxe;function Mx(e){"@babel/helpers - typeof";return Mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mx(e)}function D4(){return D4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},D4.apply(this,arguments)}function jL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function wxe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jL(Object(r),!0).forEach(function(s){rv(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jL(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function _xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nxe(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,WU(s.key),s)}}function kxe(e,t,r){return t&&Nxe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Sxe(e,t,r){return t=y1(t),Pxe(e,HU()?Reflect.construct(t,r||[],y1(e).constructor):t.apply(e,r))}function Pxe(e,t){if(t&&(Mx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Axe(e)}function Axe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HU=function(){return!!e})()}function y1(e){return y1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},y1(e)}function Cxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I4(e,t)}function I4(e,t){return I4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},I4(e,t)}function rv(e,t,r){return t=WU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WU(e){var t=Txe(e,"string");return Mx(t)=="symbol"?t:t+""}function Txe(e,t){if(Mx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Mx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var xc=32,BA=(function(e){function t(){return _xe(this,t),Sxe(this,t,arguments)}return Cxe(t,e),kxe(t,[{key:"renderIcon",value:function(s){var a=this.props.inactiveColor,i=xc/2,o=xc/6,l=xc/3,c=s.inactive?a:s.color;if(s.type==="plainline")return Te.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:s.payload.strokeDasharray,x1:0,y1:i,x2:xc,y2:i,className:"recharts-legend-icon"});if(s.type==="line")return Te.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(xc,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(s.type==="rect")return Te.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(xc/8,"h").concat(xc,"v").concat(xc*3/4,"h").concat(-xc,"z"),className:"recharts-legend-icon"});if(Te.isValidElement(s.legendIcon)){var d=wxe({},s);return delete d.legendIcon,Te.cloneElement(s.legendIcon,d)}return Te.createElement($A,{fill:c,cx:i,cy:i,size:xc,sizeType:"diameter",type:s.type})}},{key:"renderItems",value:function(){var s=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,d=a.inactiveColor,u={x:0,y:0,width:xc,height:xc},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},g={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(x,b){var y=x.formatter||c,v=Hn(rv(rv({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",x.inactive));if(x.type==="none")return null;var j=Rn(x.value)?null:x.value;xd(!Rn(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=x.inactive?d:x.color;return Te.createElement("li",D4({className:v,style:h,key:"legend-item-".concat(b)},Gm(s.props,x,b)),Te.createElement(A4,{width:o,height:o,viewBox:u,style:g},s.renderIcon(x)),Te.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},y?y(j,x,b):j))})}},{key:"render",value:function(){var s=this.props,a=s.payload,i=s.layout,o=s.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return Te.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(P.PureComponent);rv(BA,"displayName","Legend");rv(BA,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var wN,wL;function Exe(){if(wL)return wN;wL=1;var e=Gj();function t(){this.__data__=new e,this.size=0}return wN=t,wN}var _N,_L;function Oxe(){if(_L)return _N;_L=1;function e(t){var r=this.__data__,s=r.delete(t);return this.size=r.size,s}return _N=e,_N}var NN,NL;function Mxe(){if(NL)return NN;NL=1;function e(t){return this.__data__.get(t)}return NN=e,NN}var kN,kL;function Lxe(){if(kL)return kN;kL=1;function e(t){return this.__data__.has(t)}return kN=e,kN}var SN,SL;function Dxe(){if(SL)return SN;SL=1;var e=Gj(),t=TA(),r=EA(),s=200;function a(i,o){var l=this.__data__;if(l instanceof e){var c=l.__data__;if(!t||c.length<s-1)return c.push([i,o]),this.size=++l.size,this;l=this.__data__=new r(c)}return l.set(i,o),this.size=l.size,this}return SN=a,SN}var PN,PL;function KU(){if(PL)return PN;PL=1;var e=Gj(),t=Exe(),r=Oxe(),s=Mxe(),a=Lxe(),i=Dxe();function o(l){var c=this.__data__=new e(l);this.size=c.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=s,o.prototype.has=a,o.prototype.set=i,PN=o,PN}var AN,AL;function Ixe(){if(AL)return AN;AL=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return AN=t,AN}var CN,CL;function Rxe(){if(CL)return CN;CL=1;function e(t){return this.__data__.has(t)}return CN=e,CN}var TN,TL;function GU(){if(TL)return TN;TL=1;var e=EA(),t=Ixe(),r=Rxe();function s(a){var i=-1,o=a==null?0:a.length;for(this.__data__=new e;++i<o;)this.add(a[i])}return s.prototype.add=s.prototype.push=t,s.prototype.has=r,TN=s,TN}var EN,EL;function ZU(){if(EL)return EN;EL=1;function e(t,r){for(var s=-1,a=t==null?0:t.length;++s<a;)if(r(t[s],s,t))return!0;return!1}return EN=e,EN}var ON,OL;function YU(){if(OL)return ON;OL=1;function e(t,r){return t.has(r)}return ON=e,ON}var MN,ML;function XU(){if(ML)return MN;ML=1;var e=GU(),t=ZU(),r=YU(),s=1,a=2;function i(o,l,c,d,u,h){var g=c&s,x=o.length,b=l.length;if(x!=b&&!(g&&b>x))return!1;var y=h.get(o),v=h.get(l);if(y&&v)return y==l&&v==o;var j=-1,w=!0,N=c&a?new e:void 0;for(h.set(o,l),h.set(l,o);++j<x;){var A=o[j],C=l[j];if(d)var M=g?d(C,A,j,l,o,h):d(A,C,j,o,l,h);if(M!==void 0){if(M)continue;w=!1;break}if(N){if(!t(l,function(I,F){if(!r(N,F)&&(A===I||u(A,I,c,d,h)))return N.push(F)})){w=!1;break}}else if(!(A===C||u(A,C,c,d,h))){w=!1;break}}return h.delete(o),h.delete(l),w}return MN=i,MN}var LN,LL;function Fxe(){if(LL)return LN;LL=1;var e=Au(),t=e.Uint8Array;return LN=t,LN}var DN,DL;function $xe(){if(DL)return DN;DL=1;function e(t){var r=-1,s=Array(t.size);return t.forEach(function(a,i){s[++r]=[i,a]}),s}return DN=e,DN}var IN,IL;function qA(){if(IL)return IN;IL=1;function e(t){var r=-1,s=Array(t.size);return t.forEach(function(a){s[++r]=a}),s}return IN=e,IN}var RN,RL;function Bxe(){if(RL)return RN;RL=1;var e=iy(),t=Fxe(),r=CA(),s=XU(),a=$xe(),i=qA(),o=1,l=2,c="[object Boolean]",d="[object Date]",u="[object Error]",h="[object Map]",g="[object Number]",x="[object RegExp]",b="[object Set]",y="[object String]",v="[object Symbol]",j="[object ArrayBuffer]",w="[object DataView]",N=e?e.prototype:void 0,A=N?N.valueOf:void 0;function C(M,I,F,U,W,D,R){switch(F){case w:if(M.byteLength!=I.byteLength||M.byteOffset!=I.byteOffset)return!1;M=M.buffer,I=I.buffer;case j:return!(M.byteLength!=I.byteLength||!D(new t(M),new t(I)));case c:case d:case g:return r(+M,+I);case u:return M.name==I.name&&M.message==I.message;case x:case y:return M==I+"";case h:var z=a;case b:var Z=U&o;if(z||(z=i),M.size!=I.size&&!Z)return!1;var se=R.get(M);if(se)return se==I;U|=l,R.set(M,I);var J=s(z(M),z(I),U,W,D,R);return R.delete(M),J;case v:if(A)return A.call(M)==A.call(I)}return!1}return RN=C,RN}var FN,FL;function QU(){if(FL)return FN;FL=1;function e(t,r){for(var s=-1,a=r.length,i=t.length;++s<a;)t[i+s]=r[s];return t}return FN=e,FN}var $N,$L;function qxe(){if($L)return $N;$L=1;var e=QU(),t=fl();function r(s,a,i){var o=a(s);return t(s)?o:e(o,i(s))}return $N=r,$N}var BN,BL;function zxe(){if(BL)return BN;BL=1;function e(t,r){for(var s=-1,a=t==null?0:t.length,i=0,o=[];++s<a;){var l=t[s];r(l,s,t)&&(o[i++]=l)}return o}return BN=e,BN}var qN,qL;function Vxe(){if(qL)return qN;qL=1;function e(){return[]}return qN=e,qN}var zN,zL;function Uxe(){if(zL)return zN;zL=1;var e=zxe(),t=Vxe(),r=Object.prototype,s=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(o){return o==null?[]:(o=Object(o),e(a(o),function(l){return s.call(o,l)}))}:t;return zN=i,zN}var VN,VL;function Hxe(){if(VL)return VN;VL=1;function e(t,r){for(var s=-1,a=Array(t);++s<t;)a[s]=r(s);return a}return VN=e,VN}var UN,UL;function Wxe(){if(UL)return UN;UL=1;var e=Ch(),t=Th(),r="[object Arguments]";function s(a){return t(a)&&e(a)==r}return UN=s,UN}var HN,HL;function zA(){if(HL)return HN;HL=1;var e=Wxe(),t=Th(),r=Object.prototype,s=r.hasOwnProperty,a=r.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(o){return t(o)&&s.call(o,"callee")&&!a.call(o,"callee")};return HN=i,HN}var w0={exports:{}},WN,WL;function Kxe(){if(WL)return WN;WL=1;function e(){return!1}return WN=e,WN}w0.exports;var KL;function JU(){return KL||(KL=1,(function(e,t){var r=Au(),s=Kxe(),a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||s;e.exports=d})(w0,w0.exports)),w0.exports}var KN,GL;function VA(){if(GL)return KN;GL=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(s,a){var i=typeof s;return a=a??e,!!a&&(i=="number"||i!="symbol"&&t.test(s))&&s>-1&&s%1==0&&s<a}return KN=r,KN}var GN,ZL;function UA(){if(ZL)return GN;ZL=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return GN=t,GN}var ZN,YL;function Gxe(){if(YL)return ZN;YL=1;var e=Ch(),t=UA(),r=Th(),s="[object Arguments]",a="[object Array]",i="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",d="[object Map]",u="[object Number]",h="[object Object]",g="[object RegExp]",x="[object Set]",b="[object String]",y="[object WeakMap]",v="[object ArrayBuffer]",j="[object DataView]",w="[object Float32Array]",N="[object Float64Array]",A="[object Int8Array]",C="[object Int16Array]",M="[object Int32Array]",I="[object Uint8Array]",F="[object Uint8ClampedArray]",U="[object Uint16Array]",W="[object Uint32Array]",D={};D[w]=D[N]=D[A]=D[C]=D[M]=D[I]=D[F]=D[U]=D[W]=!0,D[s]=D[a]=D[v]=D[i]=D[j]=D[o]=D[l]=D[c]=D[d]=D[u]=D[h]=D[g]=D[x]=D[b]=D[y]=!1;function R(z){return r(z)&&t(z.length)&&!!D[e(z)]}return ZN=R,ZN}var YN,XL;function eH(){if(XL)return YN;XL=1;function e(t){return function(r){return t(r)}}return YN=e,YN}var _0={exports:{}};_0.exports;var QL;function Zxe(){return QL||(QL=1,(function(e,t){var r=bU(),s=t&&!t.nodeType&&t,a=s&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===s,o=i&&r.process,l=(function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(_0,_0.exports)),_0.exports}var XN,JL;function tH(){if(JL)return XN;JL=1;var e=Gxe(),t=eH(),r=Zxe(),s=r&&r.isTypedArray,a=s?t(s):e;return XN=a,XN}var QN,eD;function Yxe(){if(eD)return QN;eD=1;var e=Hxe(),t=zA(),r=fl(),s=JU(),a=VA(),i=tH(),o=Object.prototype,l=o.hasOwnProperty;function c(d,u){var h=r(d),g=!h&&t(d),x=!h&&!g&&s(d),b=!h&&!g&&!x&&i(d),y=h||g||x||b,v=y?e(d.length,String):[],j=v.length;for(var w in d)(u||l.call(d,w))&&!(y&&(w=="length"||x&&(w=="offset"||w=="parent")||b&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||a(w,j)))&&v.push(w);return v}return QN=c,QN}var JN,tD;function Xxe(){if(tD)return JN;tD=1;var e=Object.prototype;function t(r){var s=r&&r.constructor,a=typeof s=="function"&&s.prototype||e;return r===a}return JN=t,JN}var e5,nD;function nH(){if(nD)return e5;nD=1;function e(t,r){return function(s){return t(r(s))}}return e5=e,e5}var t5,rD;function Qxe(){if(rD)return t5;rD=1;var e=nH(),t=e(Object.keys,Object);return t5=t,t5}var n5,sD;function Jxe(){if(sD)return n5;sD=1;var e=Xxe(),t=Qxe(),r=Object.prototype,s=r.hasOwnProperty;function a(i){if(!e(i))return t(i);var o=[];for(var l in Object(i))s.call(i,l)&&l!="constructor"&&o.push(l);return o}return n5=a,n5}var r5,aD;function ly(){if(aD)return r5;aD=1;var e=AA(),t=UA();function r(s){return s!=null&&t(s.length)&&!e(s)}return r5=r,r5}var s5,iD;function tw(){if(iD)return s5;iD=1;var e=Yxe(),t=Jxe(),r=ly();function s(a){return r(a)?e(a):t(a)}return s5=s,s5}var a5,oD;function ege(){if(oD)return a5;oD=1;var e=qxe(),t=Uxe(),r=tw();function s(a){return e(a,r,t)}return a5=s,a5}var i5,lD;function tge(){if(lD)return i5;lD=1;var e=ege(),t=1,r=Object.prototype,s=r.hasOwnProperty;function a(i,o,l,c,d,u){var h=l&t,g=e(i),x=g.length,b=e(o),y=b.length;if(x!=y&&!h)return!1;for(var v=x;v--;){var j=g[v];if(!(h?j in o:s.call(o,j)))return!1}var w=u.get(i),N=u.get(o);if(w&&N)return w==o&&N==i;var A=!0;u.set(i,o),u.set(o,i);for(var C=h;++v<x;){j=g[v];var M=i[j],I=o[j];if(c)var F=h?c(I,M,j,o,i,u):c(M,I,j,i,o,u);if(!(F===void 0?M===I||d(M,I,l,c,u):F)){A=!1;break}C||(C=j=="constructor")}if(A&&!C){var U=i.constructor,W=o.constructor;U!=W&&"constructor"in i&&"constructor"in o&&!(typeof U=="function"&&U instanceof U&&typeof W=="function"&&W instanceof W)&&(A=!1)}return u.delete(i),u.delete(o),A}return i5=a,i5}var o5,cD;function nge(){if(cD)return o5;cD=1;var e=op(),t=Au(),r=e(t,"DataView");return o5=r,o5}var l5,dD;function rge(){if(dD)return l5;dD=1;var e=op(),t=Au(),r=e(t,"Promise");return l5=r,l5}var c5,uD;function rH(){if(uD)return c5;uD=1;var e=op(),t=Au(),r=e(t,"Set");return c5=r,c5}var d5,hD;function sge(){if(hD)return d5;hD=1;var e=op(),t=Au(),r=e(t,"WeakMap");return d5=r,d5}var u5,fD;function age(){if(fD)return u5;fD=1;var e=nge(),t=TA(),r=rge(),s=rH(),a=sge(),i=Ch(),o=jU(),l="[object Map]",c="[object Object]",d="[object Promise]",u="[object Set]",h="[object WeakMap]",g="[object DataView]",x=o(e),b=o(t),y=o(r),v=o(s),j=o(a),w=i;return(e&&w(new e(new ArrayBuffer(1)))!=g||t&&w(new t)!=l||r&&w(r.resolve())!=d||s&&w(new s)!=u||a&&w(new a)!=h)&&(w=function(N){var A=i(N),C=A==c?N.constructor:void 0,M=C?o(C):"";if(M)switch(M){case x:return g;case b:return l;case y:return d;case v:return u;case j:return h}return A}),u5=w,u5}var h5,mD;function ige(){if(mD)return h5;mD=1;var e=KU(),t=XU(),r=Bxe(),s=tge(),a=age(),i=fl(),o=JU(),l=tH(),c=1,d="[object Arguments]",u="[object Array]",h="[object Object]",g=Object.prototype,x=g.hasOwnProperty;function b(y,v,j,w,N,A){var C=i(y),M=i(v),I=C?u:a(y),F=M?u:a(v);I=I==d?h:I,F=F==d?h:F;var U=I==h,W=F==h,D=I==F;if(D&&o(y)){if(!o(v))return!1;C=!0,U=!1}if(D&&!U)return A||(A=new e),C||l(y)?t(y,v,j,w,N,A):r(y,v,I,j,w,N,A);if(!(j&c)){var R=U&&x.call(y,"__wrapped__"),z=W&&x.call(v,"__wrapped__");if(R||z){var Z=R?y.value():y,se=z?v.value():v;return A||(A=new e),N(Z,se,j,w,A)}}return D?(A||(A=new e),s(y,v,j,w,N,A)):!1}return h5=b,h5}var f5,pD;function HA(){if(pD)return f5;pD=1;var e=ige(),t=Th();function r(s,a,i,o,l){return s===a?!0:s==null||a==null||!t(s)&&!t(a)?s!==s&&a!==a:e(s,a,i,o,r,l)}return f5=r,f5}var m5,xD;function oge(){if(xD)return m5;xD=1;var e=KU(),t=HA(),r=1,s=2;function a(i,o,l,c){var d=l.length,u=d,h=!c;if(i==null)return!u;for(i=Object(i);d--;){var g=l[d];if(h&&g[2]?g[1]!==i[g[0]]:!(g[0]in i))return!1}for(;++d<u;){g=l[d];var x=g[0],b=i[x],y=g[1];if(h&&g[2]){if(b===void 0&&!(x in i))return!1}else{var v=new e;if(c)var j=c(b,y,x,i,o,v);if(!(j===void 0?t(y,b,r|s,c,v):j))return!1}}return!0}return m5=a,m5}var p5,gD;function sH(){if(gD)return p5;gD=1;var e=$f();function t(r){return r===r&&!e(r)}return p5=t,p5}var x5,vD;function lge(){if(vD)return x5;vD=1;var e=sH(),t=tw();function r(s){for(var a=t(s),i=a.length;i--;){var o=a[i],l=s[o];a[i]=[o,l,e(l)]}return a}return x5=r,x5}var g5,yD;function aH(){if(yD)return g5;yD=1;function e(t,r){return function(s){return s==null?!1:s[t]===r&&(r!==void 0||t in Object(s))}}return g5=e,g5}var v5,bD;function cge(){if(bD)return v5;bD=1;var e=oge(),t=lge(),r=aH();function s(a){var i=t(a);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===a||e(o,a,i)}}return v5=s,v5}var y5,jD;function dge(){if(jD)return y5;jD=1;function e(t,r){return t!=null&&r in Object(t)}return y5=e,y5}var b5,wD;function uge(){if(wD)return b5;wD=1;var e=NU(),t=zA(),r=fl(),s=VA(),a=UA(),i=Yj();function o(l,c,d){c=e(c,l);for(var u=-1,h=c.length,g=!1;++u<h;){var x=i(c[u]);if(!(g=l!=null&&d(l,x)))break;l=l[x]}return g||++u!=h?g:(h=l==null?0:l.length,!!h&&a(h)&&s(x,h)&&(r(l)||t(l)))}return b5=o,b5}var j5,_D;function hge(){if(_D)return j5;_D=1;var e=dge(),t=uge();function r(s,a){return s!=null&&t(s,a,e)}return j5=r,j5}var w5,ND;function fge(){if(ND)return w5;ND=1;var e=HA(),t=kU(),r=hge(),s=PA(),a=sH(),i=aH(),o=Yj(),l=1,c=2;function d(u,h){return s(u)&&a(h)?i(o(u),h):function(g){var x=t(g,u);return x===void 0&&x===h?r(g,u):e(h,x,l|c)}}return w5=d,w5}var _5,kD;function Og(){if(kD)return _5;kD=1;function e(t){return t}return _5=e,_5}var N5,SD;function mge(){if(SD)return N5;SD=1;function e(t){return function(r){return r==null?void 0:r[t]}}return N5=e,N5}var k5,PD;function pge(){if(PD)return k5;PD=1;var e=MA();function t(r){return function(s){return e(s,r)}}return k5=t,k5}var S5,AD;function xge(){if(AD)return S5;AD=1;var e=mge(),t=pge(),r=PA(),s=Yj();function a(i){return r(i)?e(s(i)):t(i)}return S5=a,S5}var P5,CD;function Cu(){if(CD)return P5;CD=1;var e=cge(),t=fge(),r=Og(),s=fl(),a=xge();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?s(o)?t(o[0],o[1]):e(o):a(o)}return P5=i,P5}var A5,TD;function iH(){if(TD)return A5;TD=1;function e(t,r,s,a){for(var i=t.length,o=s+(a?1:-1);a?o--:++o<i;)if(r(t[o],o,t))return o;return-1}return A5=e,A5}var C5,ED;function gge(){if(ED)return C5;ED=1;function e(t){return t!==t}return C5=e,C5}var T5,OD;function vge(){if(OD)return T5;OD=1;function e(t,r,s){for(var a=s-1,i=t.length;++a<i;)if(t[a]===r)return a;return-1}return T5=e,T5}var E5,MD;function yge(){if(MD)return E5;MD=1;var e=iH(),t=gge(),r=vge();function s(a,i,o){return i===i?r(a,i,o):e(a,t,o)}return E5=s,E5}var O5,LD;function bge(){if(LD)return O5;LD=1;var e=yge();function t(r,s){var a=r==null?0:r.length;return!!a&&e(r,s,0)>-1}return O5=t,O5}var M5,DD;function jge(){if(DD)return M5;DD=1;function e(t,r,s){for(var a=-1,i=t==null?0:t.length;++a<i;)if(s(r,t[a]))return!0;return!1}return M5=e,M5}var L5,ID;function wge(){if(ID)return L5;ID=1;function e(){}return L5=e,L5}var D5,RD;function _ge(){if(RD)return D5;RD=1;var e=rH(),t=wge(),r=qA(),s=1/0,a=e&&1/r(new e([,-0]))[1]==s?function(i){return new e(i)}:t;return D5=a,D5}var I5,FD;function Nge(){if(FD)return I5;FD=1;var e=GU(),t=bge(),r=jge(),s=YU(),a=_ge(),i=qA(),o=200;function l(c,d,u){var h=-1,g=t,x=c.length,b=!0,y=[],v=y;if(u)b=!1,g=r;else if(x>=o){var j=d?null:a(c);if(j)return i(j);b=!1,g=s,v=new e}else v=d?[]:y;e:for(;++h<x;){var w=c[h],N=d?d(w):w;if(w=u||w!==0?w:0,b&&N===N){for(var A=v.length;A--;)if(v[A]===N)continue e;d&&v.push(N),y.push(w)}else g(v,N,u)||(v!==y&&v.push(N),y.push(w))}return y}return I5=l,I5}var R5,$D;function kge(){if($D)return R5;$D=1;var e=Cu(),t=Nge();function r(s,a){return s&&s.length?t(s,e(a,2)):[]}return R5=r,R5}var Sge=kge();const BD=Dr(Sge);function oH(e,t,r){return t===!0?BD(e,r):Rn(t)?BD(e,t):e}function Lx(e){"@babel/helpers - typeof";return Lx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lx(e)}var Pge=["ref"];function qD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Zu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qD(Object(r),!0).forEach(function(s){nw(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qD(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Age(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zD(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,cH(s.key),s)}}function Cge(e,t,r){return t&&zD(e.prototype,t),r&&zD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tge(e,t,r){return t=b1(t),Ege(e,lH()?Reflect.construct(t,r||[],b1(e).constructor):t.apply(e,r))}function Ege(e,t){if(t&&(Lx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Oge(e)}function Oge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lH=function(){return!!e})()}function b1(e){return b1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},b1(e)}function Mge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R4(e,t)}function R4(e,t){return R4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},R4(e,t)}function nw(e,t,r){return t=cH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cH(e){var t=Lge(e,"string");return Lx(t)=="symbol"?t:t+""}function Lge(e,t){if(Lx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Lx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Dge(e,t){if(e==null)return{};var r=Ige(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Ige(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function Rge(e){return e.value}function Fge(e,t){if(Te.isValidElement(e))return Te.cloneElement(e,t);if(typeof e=="function")return Te.createElement(e,t);t.ref;var r=Dge(t,Pge);return Te.createElement(BA,r)}var VD=1,hh=(function(e){function t(){var r;Age(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=Tge(this,t,[].concat(a)),nw(r,"lastBoundingBox",{width:-1,height:-1}),r}return Mge(t,e),Cge(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();return s.height=this.wrapperNode.offsetHeight,s.width=this.wrapperNode.offsetWidth,s}return null}},{key:"updateBBox",value:function(){var s=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>VD||Math.abs(a.height-this.lastBoundingBox.height)>VD)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,s&&s(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,s&&s(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Zu({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(s){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,d=a.chartWidth,u=a.chartHeight,h,g;if(!s||(s.left===void 0||s.left===null)&&(s.right===void 0||s.right===null))if(o==="center"&&i==="vertical"){var x=this.getBBoxSnapshot();h={left:((d||0)-x.width)/2}}else h=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!s||(s.top===void 0||s.top===null)&&(s.bottom===void 0||s.bottom===null))if(l==="middle"){var b=this.getBBoxSnapshot();g={top:((u||0)-b.height)/2}}else g=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Zu(Zu({},h),g)}},{key:"render",value:function(){var s=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,d=a.payloadUniqBy,u=a.payload,h=Zu(Zu({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return Te.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(x){s.wrapperNode=x}},Fge(i,Zu(Zu({},this.props),{},{payload:oH(u,d,Rge)})))}}],[{key:"getWithHeight",value:function(s,a){var i=Zu(Zu({},this.defaultProps),s.props),o=i.layout;return o==="vertical"&&Lt(s.props.height)?{height:s.props.height}:o==="horizontal"?{width:s.props.width||a}:null}}])})(P.PureComponent);nw(hh,"displayName","Legend");nw(hh,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var F5,UD;function $ge(){if(UD)return F5;UD=1;var e=iy(),t=zA(),r=fl(),s=e?e.isConcatSpreadable:void 0;function a(i){return r(i)||t(i)||!!(s&&i&&i[s])}return F5=a,F5}var $5,HD;function dH(){if(HD)return $5;HD=1;var e=QU(),t=$ge();function r(s,a,i,o,l){var c=-1,d=s.length;for(i||(i=t),l||(l=[]);++c<d;){var u=s[c];a>0&&i(u)?a>1?r(u,a-1,i,o,l):e(l,u):o||(l[l.length]=u)}return l}return $5=r,$5}var B5,WD;function Bge(){if(WD)return B5;WD=1;function e(t){return function(r,s,a){for(var i=-1,o=Object(r),l=a(r),c=l.length;c--;){var d=l[t?c:++i];if(s(o[d],d,o)===!1)break}return r}}return B5=e,B5}var q5,KD;function qge(){if(KD)return q5;KD=1;var e=Bge(),t=e();return q5=t,q5}var z5,GD;function uH(){if(GD)return z5;GD=1;var e=qge(),t=tw();function r(s,a){return s&&e(s,a,t)}return z5=r,z5}var V5,ZD;function zge(){if(ZD)return V5;ZD=1;var e=ly();function t(r,s){return function(a,i){if(a==null)return a;if(!e(a))return r(a,i);for(var o=a.length,l=s?o:-1,c=Object(a);(s?l--:++l<o)&&i(c[l],l,c)!==!1;);return a}}return V5=t,V5}var U5,YD;function WA(){if(YD)return U5;YD=1;var e=uH(),t=zge(),r=t(e);return U5=r,U5}var H5,XD;function hH(){if(XD)return H5;XD=1;var e=WA(),t=ly();function r(s,a){var i=-1,o=t(s)?Array(s.length):[];return e(s,function(l,c,d){o[++i]=a(l,c,d)}),o}return H5=r,H5}var W5,QD;function Vge(){if(QD)return W5;QD=1;function e(t,r){var s=t.length;for(t.sort(r);s--;)t[s]=t[s].value;return t}return W5=e,W5}var K5,JD;function Uge(){if(JD)return K5;JD=1;var e=Cg();function t(r,s){if(r!==s){var a=r!==void 0,i=r===null,o=r===r,l=e(r),c=s!==void 0,d=s===null,u=s===s,h=e(s);if(!d&&!h&&!l&&r>s||l&&c&&u&&!d&&!h||i&&c&&u||!a&&u||!o)return 1;if(!i&&!l&&!h&&r<s||h&&a&&o&&!i&&!l||d&&a&&o||!c&&o||!u)return-1}return 0}return K5=t,K5}var G5,eI;function Hge(){if(eI)return G5;eI=1;var e=Uge();function t(r,s,a){for(var i=-1,o=r.criteria,l=s.criteria,c=o.length,d=a.length;++i<c;){var u=e(o[i],l[i]);if(u){if(i>=d)return u;var h=a[i];return u*(h=="desc"?-1:1)}}return r.index-s.index}return G5=t,G5}var Z5,tI;function Wge(){if(tI)return Z5;tI=1;var e=OA(),t=MA(),r=Cu(),s=hH(),a=Vge(),i=eH(),o=Hge(),l=Og(),c=fl();function d(u,h,g){h.length?h=e(h,function(y){return c(y)?function(v){return t(v,y.length===1?y[0]:y)}:y}):h=[l];var x=-1;h=e(h,i(r));var b=s(u,function(y,v,j){var w=e(h,function(N){return N(y)});return{criteria:w,index:++x,value:y}});return a(b,function(y,v){return o(y,v,g)})}return Z5=d,Z5}var Y5,nI;function Kge(){if(nI)return Y5;nI=1;function e(t,r,s){switch(s.length){case 0:return t.call(r);case 1:return t.call(r,s[0]);case 2:return t.call(r,s[0],s[1]);case 3:return t.call(r,s[0],s[1],s[2])}return t.apply(r,s)}return Y5=e,Y5}var X5,rI;function Gge(){if(rI)return X5;rI=1;var e=Kge(),t=Math.max;function r(s,a,i){return a=t(a===void 0?s.length-1:a,0),function(){for(var o=arguments,l=-1,c=t(o.length-a,0),d=Array(c);++l<c;)d[l]=o[a+l];l=-1;for(var u=Array(a+1);++l<a;)u[l]=o[l];return u[a]=i(d),e(s,this,u)}}return X5=r,X5}var Q5,sI;function Zge(){if(sI)return Q5;sI=1;function e(t){return function(){return t}}return Q5=e,Q5}var J5,aI;function fH(){if(aI)return J5;aI=1;var e=op(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return J5=t,J5}var ek,iI;function Yge(){if(iI)return ek;iI=1;var e=Zge(),t=fH(),r=Og(),s=t?function(a,i){return t(a,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:r;return ek=s,ek}var tk,oI;function Xge(){if(oI)return tk;oI=1;var e=800,t=16,r=Date.now;function s(a){var i=0,o=0;return function(){var l=r(),c=t-(l-o);if(o=l,c>0){if(++i>=e)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return tk=s,tk}var nk,lI;function Qge(){if(lI)return nk;lI=1;var e=Yge(),t=Xge(),r=t(e);return nk=r,nk}var rk,cI;function Jge(){if(cI)return rk;cI=1;var e=Og(),t=Gge(),r=Qge();function s(a,i){return r(t(a,i,e),a+"")}return rk=s,rk}var sk,dI;function rw(){if(dI)return sk;dI=1;var e=CA(),t=ly(),r=VA(),s=$f();function a(i,o,l){if(!s(l))return!1;var c=typeof o;return(c=="number"?t(l)&&r(o,l.length):c=="string"&&o in l)?e(l[o],i):!1}return sk=a,sk}var ak,uI;function e0e(){if(uI)return ak;uI=1;var e=dH(),t=Wge(),r=Jge(),s=rw(),a=r(function(i,o){if(i==null)return[];var l=o.length;return l>1&&s(i,o[0],o[1])?o=[]:l>2&&s(o[0],o[1],o[2])&&(o=[o[0]]),t(i,e(o,1),[])});return ak=a,ak}var t0e=e0e();const KA=Dr(t0e);function sv(e){"@babel/helpers - typeof";return sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sv(e)}function F4(){return F4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},F4.apply(this,arguments)}function n0e(e,t){return i0e(e)||a0e(e,t)||s0e(e,t)||r0e()}function r0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s0e(e,t){if(e){if(typeof e=="string")return hI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hI(e,t)}}function hI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function a0e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function i0e(e){if(Array.isArray(e))return e}function fI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function ik(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fI(Object(r),!0).forEach(function(s){o0e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fI(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function o0e(e,t,r){return t=l0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l0e(e){var t=c0e(e,"string");return sv(t)=="symbol"?t:t+""}function c0e(e,t){if(sv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(sv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function d0e(e){return Array.isArray(e)&&ei(e[0])&&ei(e[1])?e.join(" ~ "):e}var u0e=function(t){var r=t.separator,s=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,d=c===void 0?{}:c,u=t.payload,h=t.formatter,g=t.itemSorter,x=t.wrapperClassName,b=t.labelClassName,y=t.label,v=t.labelFormatter,j=t.accessibilityLayer,w=j===void 0?!1:j,N=function(){if(u&&u.length){var R={padding:0,margin:0},z=(g?KA(u,g):u).map(function(Z,se){if(Z.type==="none")return null;var J=ik({display:"block",paddingTop:4,paddingBottom:4,color:Z.color||"#000"},l),Q=Z.formatter||h||d0e,H=Z.value,ne=Z.name,ue=H,ae=ne;if(Q&&ue!=null&&ae!=null){var G=Q(H,ne,Z,se,u);if(Array.isArray(G)){var te=n0e(G,2);ue=te[0],ae=te[1]}else ue=G}return Te.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(se),style:J},ei(ae)?Te.createElement("span",{className:"recharts-tooltip-item-name"},ae):null,ei(ae)?Te.createElement("span",{className:"recharts-tooltip-item-separator"},s):null,Te.createElement("span",{className:"recharts-tooltip-item-value"},ue),Te.createElement("span",{className:"recharts-tooltip-item-unit"},Z.unit||""))});return Te.createElement("ul",{className:"recharts-tooltip-item-list",style:R},z)}return null},A=ik({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),C=ik({margin:0},d),M=!zn(y),I=M?y:"",F=Hn("recharts-default-tooltip",x),U=Hn("recharts-tooltip-label",b);M&&v&&u!==void 0&&u!==null&&(I=v(y,u));var W=w?{role:"status","aria-live":"assertive"}:{};return Te.createElement("div",F4({className:F,style:A},W),Te.createElement("p",{className:U,style:C},Te.isValidElement(I)?I:"".concat(I)),N())};function av(e){"@babel/helpers - typeof";return av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},av(e)}function pb(e,t,r){return t=h0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h0e(e){var t=f0e(e,"string");return av(t)=="symbol"?t:t+""}function f0e(e,t){if(av(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(av(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var i0="recharts-tooltip-wrapper",m0e={visibility:"hidden"};function p0e(e){var t=e.coordinate,r=e.translateX,s=e.translateY;return Hn(i0,pb(pb(pb(pb({},"".concat(i0,"-right"),Lt(r)&&t&&Lt(t.x)&&r>=t.x),"".concat(i0,"-left"),Lt(r)&&t&&Lt(t.x)&&r<t.x),"".concat(i0,"-bottom"),Lt(s)&&t&&Lt(t.y)&&s>=t.y),"".concat(i0,"-top"),Lt(s)&&t&&Lt(t.y)&&s<t.y))}function mI(e){var t=e.allowEscapeViewBox,r=e.coordinate,s=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(i&&Lt(i[s]))return i[s];var u=r[s]-l-a,h=r[s]+a;if(t[s])return o[s]?u:h;if(o[s]){var g=u,x=c[s];return g<x?Math.max(h,c[s]):Math.max(u,c[s])}var b=h+l,y=c[s]+d;return b>y?Math.max(u,c[s]):Math.max(h,c[s])}function x0e(e){var t=e.translateX,r=e.translateY,s=e.useTranslate3d;return{transform:s?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function g0e(e){var t=e.allowEscapeViewBox,r=e.coordinate,s=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,d,u,h;return o.height>0&&o.width>0&&r?(u=mI({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=mI({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=x0e({translateX:u,translateY:h,useTranslate3d:l})):d=m0e,{cssProperties:d,cssClasses:p0e({translateX:u,translateY:h,coordinate:r})}}function Dx(e){"@babel/helpers - typeof";return Dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dx(e)}function pI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function xI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pI(Object(r),!0).forEach(function(s){B4(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pI(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function v0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y0e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,pH(s.key),s)}}function b0e(e,t,r){return t&&y0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function j0e(e,t,r){return t=j1(t),w0e(e,mH()?Reflect.construct(t,r||[],j1(e).constructor):t.apply(e,r))}function w0e(e,t){if(t&&(Dx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _0e(e)}function _0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mH=function(){return!!e})()}function j1(e){return j1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},j1(e)}function N0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$4(e,t)}function $4(e,t){return $4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},$4(e,t)}function B4(e,t,r){return t=pH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pH(e){var t=k0e(e,"string");return Dx(t)=="symbol"?t:t+""}function k0e(e,t){if(Dx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Dx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var gI=1,S0e=(function(e){function t(){var r;v0e(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=j0e(this,t,[].concat(a)),B4(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),B4(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,u;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(u=r.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),r}return N0e(t,e),b0e(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();(Math.abs(s.width-this.state.lastBoundingBox.width)>gI||Math.abs(s.height-this.state.lastBoundingBox.height)>gI)&&this.setState({lastBoundingBox:{width:s.width,height:s.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var s,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var s=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,d=a.children,u=a.coordinate,h=a.hasPayload,g=a.isAnimationActive,x=a.offset,b=a.position,y=a.reverseDirection,v=a.useTranslate3d,j=a.viewBox,w=a.wrapperStyle,N=g0e({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:x,position:b,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:j}),A=N.cssClasses,C=N.cssProperties,M=xI(xI({transition:g&&i?"transform ".concat(l,"ms ").concat(c):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&h?"visible":"hidden",position:"absolute",top:0,left:0},w);return Te.createElement("div",{tabIndex:-1,className:A,style:M,ref:function(F){s.wrapperNode=F}},d)}}])})(P.PureComponent),P0e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},lp={isSsr:P0e()};function Ix(e){"@babel/helpers - typeof";return Ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ix(e)}function vI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function yI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vI(Object(r),!0).forEach(function(s){GA(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vI(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function A0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C0e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,gH(s.key),s)}}function T0e(e,t,r){return t&&C0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function E0e(e,t,r){return t=w1(t),O0e(e,xH()?Reflect.construct(t,r||[],w1(e).constructor):t.apply(e,r))}function O0e(e,t){if(t&&(Ix(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M0e(e)}function M0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xH=function(){return!!e})()}function w1(e){return w1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},w1(e)}function L0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q4(e,t)}function q4(e,t){return q4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},q4(e,t)}function GA(e,t,r){return t=gH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gH(e){var t=D0e(e,"string");return Ix(t)=="symbol"?t:t+""}function D0e(e,t){if(Ix(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Ix(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function I0e(e){return e.dataKey}function R0e(e,t){return Te.isValidElement(e)?Te.cloneElement(e,t):typeof e=="function"?Te.createElement(e,t):Te.createElement(u0e,t)}var Ya=(function(e){function t(){return A0e(this,t),E0e(this,t,arguments)}return L0e(t,e),T0e(t,[{key:"render",value:function(){var s=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,d=a.content,u=a.coordinate,h=a.filterNull,g=a.isAnimationActive,x=a.offset,b=a.payload,y=a.payloadUniqBy,v=a.position,j=a.reverseDirection,w=a.useTranslate3d,N=a.viewBox,A=a.wrapperStyle,C=b??[];h&&C.length&&(C=oH(b.filter(function(I){return I.value!=null&&(I.hide!==!0||s.props.includeHidden)}),y,I0e));var M=C.length>0;return Te.createElement(S0e,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:g,active:i,coordinate:u,hasPayload:M,offset:x,position:v,reverseDirection:j,useTranslate3d:w,viewBox:N,wrapperStyle:A},R0e(d,yI(yI({},this.props),{},{payload:C})))}}])})(P.PureComponent);GA(Ya,"displayName","Tooltip");GA(Ya,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!lp.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var ok,bI;function F0e(){if(bI)return ok;bI=1;var e=Au(),t=function(){return e.Date.now()};return ok=t,ok}var lk,jI;function $0e(){if(jI)return lk;jI=1;var e=/\s/;function t(r){for(var s=r.length;s--&&e.test(r.charAt(s)););return s}return lk=t,lk}var ck,wI;function B0e(){if(wI)return ck;wI=1;var e=$0e(),t=/^\s+/;function r(s){return s&&s.slice(0,e(s)+1).replace(t,"")}return ck=r,ck}var dk,_I;function vH(){if(_I)return dk;_I=1;var e=B0e(),t=$f(),r=Cg(),s=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(d){if(typeof d=="number")return d;if(r(d))return s;if(t(d)){var u=typeof d.valueOf=="function"?d.valueOf():d;d=t(u)?u+"":u}if(typeof d!="string")return d===0?d:+d;d=e(d);var h=i.test(d);return h||o.test(d)?l(d.slice(2),h?2:8):a.test(d)?s:+d}return dk=c,dk}var uk,NI;function q0e(){if(NI)return uk;NI=1;var e=$f(),t=F0e(),r=vH(),s="Expected a function",a=Math.max,i=Math.min;function o(l,c,d){var u,h,g,x,b,y,v=0,j=!1,w=!1,N=!0;if(typeof l!="function")throw new TypeError(s);c=r(c)||0,e(d)&&(j=!!d.leading,w="maxWait"in d,g=w?a(r(d.maxWait)||0,c):g,N="trailing"in d?!!d.trailing:N);function A(z){var Z=u,se=h;return u=h=void 0,v=z,x=l.apply(se,Z),x}function C(z){return v=z,b=setTimeout(F,c),j?A(z):x}function M(z){var Z=z-y,se=z-v,J=c-Z;return w?i(J,g-se):J}function I(z){var Z=z-y,se=z-v;return y===void 0||Z>=c||Z<0||w&&se>=g}function F(){var z=t();if(I(z))return U(z);b=setTimeout(F,M(z))}function U(z){return b=void 0,N&&u?A(z):(u=h=void 0,x)}function W(){b!==void 0&&clearTimeout(b),v=0,u=y=h=b=void 0}function D(){return b===void 0?x:U(t())}function R(){var z=t(),Z=I(z);if(u=arguments,h=this,y=z,Z){if(b===void 0)return C(y);if(w)return clearTimeout(b),b=setTimeout(F,c),A(y)}return b===void 0&&(b=setTimeout(F,c)),x}return R.cancel=W,R.flush=D,R}return uk=o,uk}var hk,kI;function z0e(){if(kI)return hk;kI=1;var e=q0e(),t=$f(),r="Expected a function";function s(a,i,o){var l=!0,c=!0;if(typeof a!="function")throw new TypeError(r);return t(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),e(a,i,{leading:l,maxWait:i,trailing:c})}return hk=s,hk}var V0e=z0e();const yH=Dr(V0e);function iv(e){"@babel/helpers - typeof";return iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iv(e)}function SI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function xb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SI(Object(r),!0).forEach(function(s){U0e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SI(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function U0e(e,t,r){return t=H0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H0e(e){var t=W0e(e,"string");return iv(t)=="symbol"?t:t+""}function W0e(e,t){if(iv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(iv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K0e(e,t){return X0e(e)||Y0e(e,t)||Z0e(e,t)||G0e()}function G0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z0e(e,t){if(e){if(typeof e=="string")return PI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PI(e,t)}}function PI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function Y0e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function X0e(e){if(Array.isArray(e))return e}var fu=P.forwardRef(function(e,t){var r=e.aspect,s=e.initialDimension,a=s===void 0?{width:-1,height:-1}:s,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,d=e.minWidth,u=d===void 0?0:d,h=e.minHeight,g=e.maxHeight,x=e.children,b=e.debounce,y=b===void 0?0:b,v=e.id,j=e.className,w=e.onResize,N=e.style,A=N===void 0?{}:N,C=P.useRef(null),M=P.useRef();M.current=w,P.useImperativeHandle(t,function(){return Object.defineProperty(C.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),C.current},configurable:!0})});var I=P.useState({containerWidth:a.width,containerHeight:a.height}),F=K0e(I,2),U=F[0],W=F[1],D=P.useCallback(function(z,Z){W(function(se){var J=Math.round(z),Q=Math.round(Z);return se.containerWidth===J&&se.containerHeight===Q?se:{containerWidth:J,containerHeight:Q}})},[]);P.useEffect(function(){var z=function(ne){var ue,ae=ne[0].contentRect,G=ae.width,te=ae.height;D(G,te),(ue=M.current)===null||ue===void 0||ue.call(M,G,te)};y>0&&(z=yH(z,y,{trailing:!0,leading:!1}));var Z=new ResizeObserver(z),se=C.current.getBoundingClientRect(),J=se.width,Q=se.height;return D(J,Q),Z.observe(C.current),function(){Z.disconnect()}},[D,y]);var R=P.useMemo(function(){var z=U.containerWidth,Z=U.containerHeight;if(z<0||Z<0)return null;xd(bm(o)||bm(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),xd(!r||r>0,"The aspect(%s) must be greater than zero.",r);var se=bm(o)?z:o,J=bm(c)?Z:c;r&&r>0&&(se?J=se/r:J&&(se=J*r),g&&J>g&&(J=g)),xd(se>0||J>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,se,J,o,c,u,h,r);var Q=!Array.isArray(x)&&uh(x.type).endsWith("Chart");return Te.Children.map(x,function(H){return Te.isValidElement(H)?P.cloneElement(H,xb({width:se,height:J},Q?{style:xb({height:"100%",width:"100%",maxHeight:J,maxWidth:se},H.props.style)}:{})):H})},[r,x,c,g,h,u,U,o]);return Te.createElement("div",{id:v?"".concat(v):void 0,className:Hn("recharts-responsive-container",j),style:xb(xb({},A),{},{width:o,height:c,minWidth:u,minHeight:h,maxHeight:g}),ref:C},R)}),Zm=function(t){return null};Zm.displayName="Cell";function ov(e){"@babel/helpers - typeof";return ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ov(e)}function AI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function z4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AI(Object(r),!0).forEach(function(s){Q0e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AI(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Q0e(e,t,r){return t=J0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J0e(e){var t=eve(e,"string");return ov(t)=="symbol"?t:t+""}function eve(e,t){if(ov(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(ov(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ip={widthCache:{},cacheCount:0},tve=2e3,nve={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},CI="recharts_measurement_span";function rve(e){var t=z4({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var O0=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||lp.isSsr)return{width:0,height:0};var s=rve(r),a=JSON.stringify({text:t,copyStyle:s});if(Ip.widthCache[a])return Ip.widthCache[a];try{var i=document.getElementById(CI);i||(i=document.createElement("span"),i.setAttribute("id",CI),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=z4(z4({},nve),s);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Ip.widthCache[a]=c,++Ip.cacheCount>tve&&(Ip.cacheCount=0,Ip.widthCache={}),c}catch{return{width:0,height:0}}},sve=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function lv(e){"@babel/helpers - typeof";return lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lv(e)}function _1(e,t){return lve(e)||ove(e,t)||ive(e,t)||ave()}function ave(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ive(e,t){if(e){if(typeof e=="string")return TI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TI(e,t)}}function TI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function ove(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function lve(e){if(Array.isArray(e))return e}function cve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EI(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,uve(s.key),s)}}function dve(e,t,r){return t&&EI(e.prototype,t),r&&EI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function uve(e){var t=hve(e,"string");return lv(t)=="symbol"?t:t+""}function hve(e,t){if(lv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(lv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var OI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,MI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,fve=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,mve=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,bH={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},pve=Object.keys(bH),Zp="NaN";function xve(e,t){return e*bH[t]}var gb=(function(){function e(t,r){cve(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!fve.test(r)&&(this.num=NaN,this.unit=""),pve.includes(r)&&(this.num=xve(t,r),this.unit="px")}return dve(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var s,a=(s=mve.exec(r))!==null&&s!==void 0?s:[],i=_1(a,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])})();function jH(e){if(e.includes(Zp))return Zp;for(var t=e;t.includes("*")||t.includes("/");){var r,s=(r=OI.exec(t))!==null&&r!==void 0?r:[],a=_1(s,4),i=a[1],o=a[2],l=a[3],c=gb.parse(i??""),d=gb.parse(l??""),u=o==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return Zp;t=t.replace(OI,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,g=(h=MI.exec(t))!==null&&h!==void 0?h:[],x=_1(g,4),b=x[1],y=x[2],v=x[3],j=gb.parse(b??""),w=gb.parse(v??""),N=y==="+"?j.add(w):j.subtract(w);if(N.isNaN())return Zp;t=t.replace(MI,N.toString())}return t}var LI=/\(([^()]*)\)/;function gve(e){for(var t=e;t.includes("(");){var r=LI.exec(t),s=_1(r,2),a=s[1];t=t.replace(LI,jH(a))}return t}function vve(e){var t=e.replace(/\s+/g,"");return t=gve(t),t=jH(t),t}function yve(e){try{return vve(e)}catch{return Zp}}function fk(e){var t=yve(e.slice(5,-1));return t===Zp?"":t}var bve=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],jve=["dx","dy","angle","className","breakAll"];function V4(){return V4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},V4.apply(this,arguments)}function DI(e,t){if(e==null)return{};var r=wve(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function wve(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function II(e,t){return Sve(e)||kve(e,t)||Nve(e,t)||_ve()}function _ve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nve(e,t){if(e){if(typeof e=="string")return RI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RI(e,t)}}function RI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function kve(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Sve(e){if(Array.isArray(e))return e}var wH=/[ \f\n\r\t\v\u2028\u2029]+/,_H=function(t){var r=t.children,s=t.breakAll,a=t.style;try{var i=[];zn(r)||(s?i=r.toString().split(""):i=r.toString().split(wH));var o=i.map(function(c){return{word:c,width:O0(c,a).width}}),l=s?0:O0("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},Pve=function(t,r,s,a,i){var o=t.maxLines,l=t.children,c=t.style,d=t.breakAll,u=Lt(o),h=l,g=function(){var se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return se.reduce(function(J,Q){var H=Q.word,ne=Q.width,ue=J[J.length-1];if(ue&&(a==null||i||ue.width+ne+s<Number(a)))ue.words.push(H),ue.width+=ne+s;else{var ae={words:[H],width:ne};J.push(ae)}return J},[])},x=g(r),b=function(se){return se.reduce(function(J,Q){return J.width>Q.width?J:Q})};if(!u)return x;for(var y="",v=function(se){var J=h.slice(0,se),Q=_H({breakAll:d,style:c,children:J+y}).wordsWithComputedWidth,H=g(Q),ne=H.length>o||b(H).width>Number(a);return[ne,H]},j=0,w=h.length-1,N=0,A;j<=w&&N<=h.length-1;){var C=Math.floor((j+w)/2),M=C-1,I=v(M),F=II(I,2),U=F[0],W=F[1],D=v(C),R=II(D,1),z=R[0];if(!U&&!z&&(j=C+1),U&&z&&(w=C-1),!U&&z){A=W;break}N++}return A||x},FI=function(t){var r=zn(t)?[]:t.toString().split(wH);return[{words:r}]},Ave=function(t){var r=t.width,s=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||s)&&!lp.isSsr){var c,d,u=_H({breakAll:o,children:a,style:i});if(u){var h=u.wordsWithComputedWidth,g=u.spaceWidth;c=h,d=g}else return FI(a);return Pve({breakAll:o,children:a,maxLines:l,style:i},c,d,r,s)}return FI(a)},$I="#808080",Ym=function(t){var r=t.x,s=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,d=c===void 0?"0.71em":c,u=t.scaleToFit,h=u===void 0?!1:u,g=t.textAnchor,x=g===void 0?"start":g,b=t.verticalAnchor,y=b===void 0?"end":b,v=t.fill,j=v===void 0?$I:v,w=DI(t,bve),N=P.useMemo(function(){return Ave({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:h,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,h,w.style,w.width]),A=w.dx,C=w.dy,M=w.angle,I=w.className,F=w.breakAll,U=DI(w,jve);if(!ei(s)||!ei(i))return null;var W=s+(Lt(A)?A:0),D=i+(Lt(C)?C:0),R;switch(y){case"start":R=fk("calc(".concat(d,")"));break;case"middle":R=fk("calc(".concat((N.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:R=fk("calc(".concat(N.length-1," * -").concat(l,")"));break}var z=[];if(h){var Z=N[0].width,se=w.width;z.push("scale(".concat((Lt(se)?se/Z:1)/Z,")"))}return M&&z.push("rotate(".concat(M,", ").concat(W,", ").concat(D,")")),z.length&&(U.transform=z.join(" ")),Te.createElement("text",V4({},bn(U,!0),{x:W,y:D,className:Hn("recharts-text",I),textAnchor:x,fill:j.includes("url")?$I:j}),N.map(function(J,Q){var H=J.words.join(F?"":" ");return Te.createElement("tspan",{x:W,dy:Q===0?R:l,key:"".concat(H,"-").concat(Q)},H)}))};function kf(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Cve(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ZA(e){let t,r,s;e.length!==2?(t=kf,r=(l,c)=>kf(e(l),c),s=(l,c)=>e(l)-c):(t=e===kf||e===Cve?e:Tve,r=e,s=e);function a(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;r(l[h],c)<0?d=h+1:u=h}while(d<u)}return d}function i(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;r(l[h],c)<=0?d=h+1:u=h}while(d<u)}return d}function o(l,c,d=0,u=l.length){const h=a(l,c,d,u-1);return h>d&&s(l[h-1],c)>-s(l[h],c)?h-1:h}return{left:a,center:o,right:i}}function Tve(){return 0}function NH(e){return e===null?NaN:+e}function*Eve(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Ove=ZA(kf),cy=Ove.right;ZA(NH).center;class BI extends Map{constructor(t,r=Dve){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[s,a]of t)this.set(s,a)}get(t){return super.get(qI(this,t))}has(t){return super.has(qI(this,t))}set(t,r){return super.set(Mve(this,t),r)}delete(t){return super.delete(Lve(this,t))}}function qI({_intern:e,_key:t},r){const s=t(r);return e.has(s)?e.get(s):r}function Mve({_intern:e,_key:t},r){const s=t(r);return e.has(s)?e.get(s):(e.set(s,r),r)}function Lve({_intern:e,_key:t},r){const s=t(r);return e.has(s)&&(r=e.get(s),e.delete(s)),r}function Dve(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Ive(e=kf){if(e===kf)return kH;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const s=e(t,r);return s||s===0?s:(e(r,r)===0)-(e(t,t)===0)}}function kH(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Rve=Math.sqrt(50),Fve=Math.sqrt(10),$ve=Math.sqrt(2);function N1(e,t,r){const s=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(s)),i=s/Math.pow(10,a),o=i>=Rve?10:i>=Fve?5:i>=$ve?2:1;let l,c,d;return a<0?(d=Math.pow(10,-a)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,a)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=r&&r<2?N1(e,t,r*2):[l,c,d]}function U4(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const s=t<e,[a,i,o]=s?N1(t,e,r):N1(e,t,r);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(s)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(a+d)/-o;else for(let d=0;d<l;++d)c[d]=(a+d)*o;return c}function H4(e,t,r){return t=+t,e=+e,r=+r,N1(e,t,r)[2]}function W4(e,t,r){t=+t,e=+e,r=+r;const s=t<e,a=s?H4(t,e,r):H4(e,t,r);return(s?-1:1)*(a<0?1/-a:a)}function zI(e,t){let r;for(const s of e)s!=null&&(r<s||r===void 0&&s>=s)&&(r=s);return r}function VI(e,t){let r;for(const s of e)s!=null&&(r>s||r===void 0&&s>=s)&&(r=s);return r}function SH(e,t,r=0,s=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),s=Math.floor(Math.min(e.length-1,s)),!(r<=t&&t<=s))return e;for(a=a===void 0?kH:Ive(a);s>r;){if(s-r>600){const c=s-r+1,d=t-r+1,u=Math.log(c),h=.5*Math.exp(2*u/3),g=.5*Math.sqrt(u*h*(c-h)/c)*(d-c/2<0?-1:1),x=Math.max(r,Math.floor(t-d*h/c+g)),b=Math.min(s,Math.floor(t+(c-d)*h/c+g));SH(e,t,x,b,a)}const i=e[t];let o=r,l=s;for(o0(e,r,t),a(e[s],i)>0&&o0(e,r,s);o<l;){for(o0(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[r],i)===0?o0(e,r,l):(++l,o0(e,l,s)),l<=t&&(r=l+1),t<=l&&(s=l-1)}return e}function o0(e,t,r){const s=e[t];e[t]=e[r],e[r]=s}function Bve(e,t,r){if(e=Float64Array.from(Eve(e)),!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return VI(e);if(t>=1)return zI(e);var s,a=(s-1)*t,i=Math.floor(a),o=zI(SH(e,i).subarray(0,i+1)),l=VI(e.subarray(i+1));return o+(l-o)*(a-i)}}function qve(e,t,r=NH){if(!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return+r(e[0],0,e);if(t>=1)return+r(e[s-1],s-1,e);var s,a=(s-1)*t,i=Math.floor(a),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function zve(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var s=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++s<a;)i[s]=e+s*r;return i}function Cc(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Eh(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const K4=Symbol("implicit");function YA(){var e=new BI,t=[],r=[],s=K4;function a(i){let o=e.get(i);if(o===void 0){if(s!==K4)return s;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new BI;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return YA(t,r).unknown(s)},Cc.apply(a,arguments),a}function cv(){var e=YA().unknown(void 0),t=e.domain,r=e.range,s=0,a=1,i,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function h(){var g=t().length,x=a<s,b=x?a:s,y=x?s:a;i=(y-b)/Math.max(1,g-c+d*2),l&&(i=Math.floor(i)),b+=(y-b-i*(g-c))*u,o=i*(1-c),l&&(b=Math.round(b),o=Math.round(o));var v=zve(g).map(function(j){return b+i*j});return r(x?v.reverse():v)}return e.domain=function(g){return arguments.length?(t(g),h()):t()},e.range=function(g){return arguments.length?([s,a]=g,s=+s,a=+a,h()):[s,a]},e.rangeRound=function(g){return[s,a]=g,s=+s,a=+a,l=!0,h()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(g){return arguments.length?(l=!!g,h()):l},e.padding=function(g){return arguments.length?(c=Math.min(1,d=+g),h()):c},e.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),h()):c},e.paddingOuter=function(g){return arguments.length?(d=+g,h()):d},e.align=function(g){return arguments.length?(u=Math.max(0,Math.min(1,g)),h()):u},e.copy=function(){return cv(t(),[s,a]).round(l).paddingInner(c).paddingOuter(d).align(u)},Cc.apply(h(),arguments)}function PH(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return PH(t())},e}function M0(){return PH(cv.apply(null,arguments).paddingInner(1))}function XA(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function AH(e,t){var r=Object.create(e.prototype);for(var s in t)r[s]=t[s];return r}function dy(){}var dv=.7,k1=1/dv,cx="\\s*([+-]?\\d+)\\s*",uv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",mu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vve=/^#([0-9a-f]{3,8})$/,Uve=new RegExp(`^rgb\\(${cx},${cx},${cx}\\)$`),Hve=new RegExp(`^rgb\\(${mu},${mu},${mu}\\)$`),Wve=new RegExp(`^rgba\\(${cx},${cx},${cx},${uv}\\)$`),Kve=new RegExp(`^rgba\\(${mu},${mu},${mu},${uv}\\)$`),Gve=new RegExp(`^hsl\\(${uv},${mu},${mu}\\)$`),Zve=new RegExp(`^hsla\\(${uv},${mu},${mu},${uv}\\)$`),UI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};XA(dy,hv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:HI,formatHex:HI,formatHex8:Yve,formatHsl:Xve,formatRgb:WI,toString:WI});function HI(){return this.rgb().formatHex()}function Yve(){return this.rgb().formatHex8()}function Xve(){return CH(this).formatHsl()}function WI(){return this.rgb().formatRgb()}function hv(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Vve.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?KI(t):r===3?new ul(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?vb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?vb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Uve.exec(e))?new ul(t[1],t[2],t[3],1):(t=Hve.exec(e))?new ul(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Wve.exec(e))?vb(t[1],t[2],t[3],t[4]):(t=Kve.exec(e))?vb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Gve.exec(e))?YI(t[1],t[2]/100,t[3]/100,1):(t=Zve.exec(e))?YI(t[1],t[2]/100,t[3]/100,t[4]):UI.hasOwnProperty(e)?KI(UI[e]):e==="transparent"?new ul(NaN,NaN,NaN,0):null}function KI(e){return new ul(e>>16&255,e>>8&255,e&255,1)}function vb(e,t,r,s){return s<=0&&(e=t=r=NaN),new ul(e,t,r,s)}function Qve(e){return e instanceof dy||(e=hv(e)),e?(e=e.rgb(),new ul(e.r,e.g,e.b,e.opacity)):new ul}function G4(e,t,r,s){return arguments.length===1?Qve(e):new ul(e,t,r,s??1)}function ul(e,t,r,s){this.r=+e,this.g=+t,this.b=+r,this.opacity=+s}XA(ul,G4,AH(dy,{brighter(e){return e=e==null?k1:Math.pow(k1,e),new ul(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?dv:Math.pow(dv,e),new ul(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ul(Dm(this.r),Dm(this.g),Dm(this.b),S1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:GI,formatHex:GI,formatHex8:Jve,formatRgb:ZI,toString:ZI}));function GI(){return`#${jm(this.r)}${jm(this.g)}${jm(this.b)}`}function Jve(){return`#${jm(this.r)}${jm(this.g)}${jm(this.b)}${jm((isNaN(this.opacity)?1:this.opacity)*255)}`}function ZI(){const e=S1(this.opacity);return`${e===1?"rgb(":"rgba("}${Dm(this.r)}, ${Dm(this.g)}, ${Dm(this.b)}${e===1?")":`, ${e})`}`}function S1(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Dm(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function jm(e){return e=Dm(e),(e<16?"0":"")+e.toString(16)}function YI(e,t,r,s){return s<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new pd(e,t,r,s)}function CH(e){if(e instanceof pd)return new pd(e.h,e.s,e.l,e.opacity);if(e instanceof dy||(e=hv(e)),!e)return new pd;if(e instanceof pd)return e;e=e.rgb();var t=e.r/255,r=e.g/255,s=e.b/255,a=Math.min(t,r,s),i=Math.max(t,r,s),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(r-s)/l+(r<s)*6:r===i?o=(s-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new pd(o,l,c,e.opacity)}function eye(e,t,r,s){return arguments.length===1?CH(e):new pd(e,t,r,s??1)}function pd(e,t,r,s){this.h=+e,this.s=+t,this.l=+r,this.opacity=+s}XA(pd,eye,AH(dy,{brighter(e){return e=e==null?k1:Math.pow(k1,e),new pd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?dv:Math.pow(dv,e),new pd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,s=r+(r<.5?r:1-r)*t,a=2*r-s;return new ul(mk(e>=240?e-240:e+120,a,s),mk(e,a,s),mk(e<120?e+240:e-120,a,s),this.opacity)},clamp(){return new pd(XI(this.h),yb(this.s),yb(this.l),S1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=S1(this.opacity);return`${e===1?"hsl(":"hsla("}${XI(this.h)}, ${yb(this.s)*100}%, ${yb(this.l)*100}%${e===1?")":`, ${e})`}`}}));function XI(e){return e=(e||0)%360,e<0?e+360:e}function yb(e){return Math.max(0,Math.min(1,e||0))}function mk(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const QA=e=>()=>e;function tye(e,t){return function(r){return e+r*t}}function nye(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(s){return Math.pow(e+s*t,r)}}function rye(e){return(e=+e)==1?TH:function(t,r){return r-t?nye(t,r,e):QA(isNaN(t)?r:t)}}function TH(e,t){var r=t-e;return r?tye(e,r):QA(isNaN(e)?t:e)}const QI=(function e(t){var r=rye(t);function s(a,i){var o=r((a=G4(a)).r,(i=G4(i)).r),l=r(a.g,i.g),c=r(a.b,i.b),d=TH(a.opacity,i.opacity);return function(u){return a.r=o(u),a.g=l(u),a.b=c(u),a.opacity=d(u),a+""}}return s.gamma=e,s})(1);function sye(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,s=t.slice(),a;return function(i){for(a=0;a<r;++a)s[a]=e[a]*(1-i)+t[a]*i;return s}}function aye(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function iye(e,t){var r=t?t.length:0,s=e?Math.min(r,e.length):0,a=new Array(s),i=new Array(r),o;for(o=0;o<s;++o)a[o]=Mg(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<s;++o)i[o]=a[o](l);return i}}function oye(e,t){var r=new Date;return e=+e,t=+t,function(s){return r.setTime(e*(1-s)+t*s),r}}function P1(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function lye(e,t){var r={},s={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Mg(e[a],t[a]):s[a]=t[a];return function(i){for(a in r)s[a]=r[a](i);return s}}var Z4=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pk=new RegExp(Z4.source,"g");function cye(e){return function(){return e}}function dye(e){return function(t){return e(t)+""}}function uye(e,t){var r=Z4.lastIndex=pk.lastIndex=0,s,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(s=Z4.exec(e))&&(a=pk.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(s=s[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:P1(s,a)})),r=pk.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?dye(c[0].x):cye(t):(t=c.length,function(d){for(var u=0,h;u<t;++u)l[(h=c[u]).i]=h.x(d);return l.join("")})}function Mg(e,t){var r=typeof t,s;return t==null||r==="boolean"?QA(t):(r==="number"?P1:r==="string"?(s=hv(t))?(t=s,QI):uye:t instanceof hv?QI:t instanceof Date?oye:aye(t)?sye:Array.isArray(t)?iye:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?lye:P1)(e,t)}function JA(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function hye(e,t){t===void 0&&(t=e,e=Mg);for(var r=0,s=t.length-1,a=t[0],i=new Array(s<0?0:s);r<s;)i[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return i[l](o-l)}}function fye(e){return function(){return e}}function A1(e){return+e}var JI=[0,1];function Lo(e){return e}function Y4(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:fye(isNaN(t)?NaN:.5)}function mye(e,t){var r;return e>t&&(r=e,e=t,t=r),function(s){return Math.max(e,Math.min(t,s))}}function pye(e,t,r){var s=e[0],a=e[1],i=t[0],o=t[1];return a<s?(s=Y4(a,s),i=r(o,i)):(s=Y4(s,a),i=r(i,o)),function(l){return i(s(l))}}function xye(e,t,r){var s=Math.min(e.length,t.length)-1,a=new Array(s),i=new Array(s),o=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<s;)a[o]=Y4(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=cy(e,l,1,s)-1;return i[c](a[c](l))}}function uy(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function sw(){var e=JI,t=JI,r=Mg,s,a,i,o=Lo,l,c,d;function u(){var g=Math.min(e.length,t.length);return o!==Lo&&(o=mye(e[0],e[g-1])),l=g>2?xye:pye,c=d=null,h}function h(g){return g==null||isNaN(g=+g)?i:(c||(c=l(e.map(s),t,r)))(s(o(g)))}return h.invert=function(g){return o(a((d||(d=l(t,e.map(s),P1)))(g)))},h.domain=function(g){return arguments.length?(e=Array.from(g,A1),u()):e.slice()},h.range=function(g){return arguments.length?(t=Array.from(g),u()):t.slice()},h.rangeRound=function(g){return t=Array.from(g),r=JA,u()},h.clamp=function(g){return arguments.length?(o=g?!0:Lo,u()):o!==Lo},h.interpolate=function(g){return arguments.length?(r=g,u()):r},h.unknown=function(g){return arguments.length?(i=g,h):i},function(g,x){return s=g,a=x,u()}}function eC(){return sw()(Lo,Lo)}function gye(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function C1(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,s=e.slice(0,r);return[s.length>1?s[0]+s.slice(2):s,+e.slice(r+1)]}function Rx(e){return e=C1(Math.abs(e)),e?e[1]:NaN}function vye(e,t){return function(r,s){for(var a=r.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>s&&(l=Math.max(1,s-c)),i.push(r.substring(a-=l,a+l)),!((c+=l+1)>s));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function yye(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var bye=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function fv(e){if(!(t=bye.exec(e)))throw new Error("invalid format: "+e);var t;return new tC({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}fv.prototype=tC.prototype;function tC(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}tC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function jye(e){e:for(var t=e.length,r=1,s=-1,a;r<t;++r)switch(e[r]){case".":s=a=r;break;case"0":s===0&&(s=r),a=r;break;default:if(!+e[r])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(a+1):e}var EH;function wye(e,t){var r=C1(e,t);if(!r)return e+"";var s=r[0],a=r[1],i=a-(EH=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+C1(e,Math.max(0,t+i-1))[0]}function eR(e,t){var r=C1(e,t);if(!r)return e+"";var s=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+s:s.length>a+1?s.slice(0,a+1)+"."+s.slice(a+1):s+new Array(a-s.length+2).join("0")}const tR={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:gye,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>eR(e*100,t),r:eR,s:wye,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function nR(e){return e}var rR=Array.prototype.map,sR=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function _ye(e){var t=e.grouping===void 0||e.thousands===void 0?nR:vye(rR.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?nR:yye(rR.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(h){h=fv(h);var g=h.fill,x=h.align,b=h.sign,y=h.symbol,v=h.zero,j=h.width,w=h.comma,N=h.precision,A=h.trim,C=h.type;C==="n"?(w=!0,C="g"):tR[C]||(N===void 0&&(N=12),A=!0,C="g"),(v||g==="0"&&x==="=")&&(v=!0,g="0",x="=");var M=y==="$"?r:y==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",I=y==="$"?s:/[%p]/.test(C)?o:"",F=tR[C],U=/[defgprs%]/.test(C);N=N===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function W(D){var R=M,z=I,Z,se,J;if(C==="c")z=F(D)+z,D="";else{D=+D;var Q=D<0||1/D<0;if(D=isNaN(D)?c:F(Math.abs(D),N),A&&(D=jye(D)),Q&&+D==0&&b!=="+"&&(Q=!1),R=(Q?b==="("?b:l:b==="-"||b==="("?"":b)+R,z=(C==="s"?sR[8+EH/3]:"")+z+(Q&&b==="("?")":""),U){for(Z=-1,se=D.length;++Z<se;)if(J=D.charCodeAt(Z),48>J||J>57){z=(J===46?a+D.slice(Z+1):D.slice(Z))+z,D=D.slice(0,Z);break}}}w&&!v&&(D=t(D,1/0));var H=R.length+D.length+z.length,ne=H<j?new Array(j-H+1).join(g):"";switch(w&&v&&(D=t(ne+D,ne.length?j-z.length:1/0),ne=""),x){case"<":D=R+D+z+ne;break;case"=":D=R+ne+D+z;break;case"^":D=ne.slice(0,H=ne.length>>1)+R+D+z+ne.slice(H);break;default:D=ne+R+D+z;break}return i(D)}return W.toString=function(){return h+""},W}function u(h,g){var x=d((h=fv(h),h.type="f",h)),b=Math.max(-8,Math.min(8,Math.floor(Rx(g)/3)))*3,y=Math.pow(10,-b),v=sR[8+b/3];return function(j){return x(y*j)+v}}return{format:d,formatPrefix:u}}var bb,nC,OH;Nye({thousands:",",grouping:[3],currency:["$",""]});function Nye(e){return bb=_ye(e),nC=bb.format,OH=bb.formatPrefix,bb}function kye(e){return Math.max(0,-Rx(Math.abs(e)))}function Sye(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Rx(t)/3)))*3-Rx(Math.abs(e)))}function Pye(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Rx(t)-Rx(e))+1}function MH(e,t,r,s){var a=W4(e,t,r),i;switch(s=fv(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(i=Sye(a,o))&&(s.precision=i),OH(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=Pye(a,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=kye(a))&&(s.precision=i-(s.type==="%")*2);break}}return nC(s)}function Bf(e){var t=e.domain;return e.ticks=function(r){var s=t();return U4(s[0],s[s.length-1],r??10)},e.tickFormat=function(r,s){var a=t();return MH(a[0],a[a.length-1],r??10,s)},e.nice=function(r){r==null&&(r=10);var s=t(),a=0,i=s.length-1,o=s[a],l=s[i],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=a,a=i,i=d);u-- >0;){if(d=H4(o,l,r),d===c)return s[a]=o,s[i]=l,t(s);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function T1(){var e=eC();return e.copy=function(){return uy(e,T1())},Cc.apply(e,arguments),Bf(e)}function LH(e){var t;function r(s){return s==null||isNaN(s=+s)?t:s}return r.invert=r,r.domain=r.range=function(s){return arguments.length?(e=Array.from(s,A1),r):e.slice()},r.unknown=function(s){return arguments.length?(t=s,r):t},r.copy=function(){return LH(e).unknown(t)},e=arguments.length?Array.from(e,A1):[0,1],Bf(r)}function DH(e,t){e=e.slice();var r=0,s=e.length-1,a=e[r],i=e[s],o;return i<a&&(o=r,r=s,s=o,o=a,a=i,i=o),e[r]=t.floor(a),e[s]=t.ceil(i),e}function aR(e){return Math.log(e)}function iR(e){return Math.exp(e)}function Aye(e){return-Math.log(-e)}function Cye(e){return-Math.exp(-e)}function Tye(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Eye(e){return e===10?Tye:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Oye(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function oR(e){return(t,r)=>-e(-t,r)}function rC(e){const t=e(aR,iR),r=t.domain;let s=10,a,i;function o(){return a=Oye(s),i=Eye(s),r()[0]<0?(a=oR(a),i=oR(i),e(Aye,Cye)):e(aR,iR),t}return t.base=function(l){return arguments.length?(s=+l,o()):s},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let d=c[0],u=c[c.length-1];const h=u<d;h&&([d,u]=[u,d]);let g=a(d),x=a(u),b,y;const v=l==null?10:+l;let j=[];if(!(s%1)&&x-g<v){if(g=Math.floor(g),x=Math.ceil(x),d>0){for(;g<=x;++g)for(b=1;b<s;++b)if(y=g<0?b/i(-g):b*i(g),!(y<d)){if(y>u)break;j.push(y)}}else for(;g<=x;++g)for(b=s-1;b>=1;--b)if(y=g>0?b/i(-g):b*i(g),!(y<d)){if(y>u)break;j.push(y)}j.length*2<v&&(j=U4(d,u,v))}else j=U4(g,x,Math.min(x-g,v)).map(i);return h?j.reverse():j},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=fv(c)).precision==null&&(c.trim=!0),c=nC(c)),l===1/0)return c;const d=Math.max(1,s*l/t.ticks().length);return u=>{let h=u/i(Math.round(a(u)));return h*s<s-.5&&(h*=s),h<=d?c(u):""}},t.nice=()=>r(DH(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function IH(){const e=rC(sw()).domain([1,10]);return e.copy=()=>uy(e,IH()).base(e.base()),Cc.apply(e,arguments),e}function lR(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function cR(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function sC(e){var t=1,r=e(lR(t),cR(t));return r.constant=function(s){return arguments.length?e(lR(t=+s),cR(t)):t},Bf(r)}function RH(){var e=sC(sw());return e.copy=function(){return uy(e,RH()).constant(e.constant())},Cc.apply(e,arguments)}function dR(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Mye(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Lye(e){return e<0?-e*e:e*e}function aC(e){var t=e(Lo,Lo),r=1;function s(){return r===1?e(Lo,Lo):r===.5?e(Mye,Lye):e(dR(r),dR(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,s()):r},Bf(t)}function iC(){var e=aC(sw());return e.copy=function(){return uy(e,iC()).exponent(e.exponent())},Cc.apply(e,arguments),e}function Dye(){return iC.apply(null,arguments).exponent(.5)}function uR(e){return Math.sign(e)*e*e}function Iye(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function FH(){var e=eC(),t=[0,1],r=!1,s;function a(i){var o=Iye(e(i));return isNaN(o)?s:r?Math.round(o):o}return a.invert=function(i){return e.invert(uR(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,A1)).map(uR)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return FH(e.domain(),t).round(r).clamp(e.clamp()).unknown(s)},Cc.apply(a,arguments),Bf(a)}function $H(){var e=[],t=[],r=[],s;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=qve(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?s:t[cy(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(kf),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(s=o,i):s},i.quantiles=function(){return r.slice()},i.copy=function(){return $H().domain(e).range(t).unknown(s)},Cc.apply(i,arguments)}function BH(){var e=0,t=1,r=1,s=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[cy(s,c,0,r)]:i}function l(){var c=-1;for(s=new Array(r);++c<r;)s[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var d=a.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,s[0]]:d>=r?[s[r-1],t]:[s[d-1],s[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return s.slice()},o.copy=function(){return BH().domain([e,t]).range(a).unknown(i)},Cc.apply(Bf(o),arguments)}function qH(){var e=[.5],t=[0,1],r,s=1;function a(i){return i!=null&&i<=i?t[cy(e,i,0,s)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),s=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),s=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return qH().domain(e).range(t).unknown(r)},Cc.apply(a,arguments)}const xk=new Date,gk=new Date;function si(e,t,r,s){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},a.filter=i=>si(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(xk.setTime(+i),gk.setTime(+o),e(xk),e(gk),Math.floor(r(xk,gk))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(s?o=>s(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const E1=si(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);E1.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?si(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):E1);E1.range;const ah=1e3,wc=ah*60,ih=wc*60,_h=ih*24,oC=_h*7,hR=_h*30,vk=_h*365,wm=si(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ah)},(e,t)=>(t-e)/ah,e=>e.getUTCSeconds());wm.range;const lC=si(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ah)},(e,t)=>{e.setTime(+e+t*wc)},(e,t)=>(t-e)/wc,e=>e.getMinutes());lC.range;const cC=si(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*wc)},(e,t)=>(t-e)/wc,e=>e.getUTCMinutes());cC.range;const dC=si(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ah-e.getMinutes()*wc)},(e,t)=>{e.setTime(+e+t*ih)},(e,t)=>(t-e)/ih,e=>e.getHours());dC.range;const uC=si(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ih)},(e,t)=>(t-e)/ih,e=>e.getUTCHours());uC.range;const hy=si(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*wc)/_h,e=>e.getDate()-1);hy.range;const aw=si(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_h,e=>e.getUTCDate()-1);aw.range;const zH=si(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_h,e=>Math.floor(e/_h));zH.range;function cp(e){return si(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*wc)/oC)}const iw=cp(0),O1=cp(1),Rye=cp(2),Fye=cp(3),Fx=cp(4),$ye=cp(5),Bye=cp(6);iw.range;O1.range;Rye.range;Fye.range;Fx.range;$ye.range;Bye.range;function dp(e){return si(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/oC)}const ow=dp(0),M1=dp(1),qye=dp(2),zye=dp(3),$x=dp(4),Vye=dp(5),Uye=dp(6);ow.range;M1.range;qye.range;zye.range;$x.range;Vye.range;Uye.range;const hC=si(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());hC.range;const fC=si(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());fC.range;const Nh=si(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Nh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:si(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Nh.range;const kh=si(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());kh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:si(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});kh.range;function VH(e,t,r,s,a,i){const o=[[wm,1,ah],[wm,5,5*ah],[wm,15,15*ah],[wm,30,30*ah],[i,1,wc],[i,5,5*wc],[i,15,15*wc],[i,30,30*wc],[a,1,ih],[a,3,3*ih],[a,6,6*ih],[a,12,12*ih],[s,1,_h],[s,2,2*_h],[r,1,oC],[t,1,hR],[t,3,3*hR],[e,1,vk]];function l(d,u,h){const g=u<d;g&&([d,u]=[u,d]);const x=h&&typeof h.range=="function"?h:c(d,u,h),b=x?x.range(d,+u+1):[];return g?b.reverse():b}function c(d,u,h){const g=Math.abs(u-d)/h,x=ZA(([,,v])=>v).right(o,g);if(x===o.length)return e.every(W4(d/vk,u/vk,h));if(x===0)return E1.every(Math.max(W4(d,u,h),1));const[b,y]=o[g/o[x-1][2]<o[x][2]/g?x-1:x];return b.every(y)}return[l,c]}const[Hye,Wye]=VH(kh,fC,ow,zH,uC,cC),[Kye,Gye]=VH(Nh,hC,iw,hy,dC,lC);function yk(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function bk(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function l0(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function Zye(e){var t=e.dateTime,r=e.date,s=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=c0(a),u=d0(a),h=c0(i),g=d0(i),x=c0(o),b=d0(o),y=c0(l),v=d0(l),j=c0(c),w=d0(c),N={a:Q,A:H,b:ne,B:ue,c:null,d:vR,e:vR,f:vbe,g:Abe,G:Tbe,H:pbe,I:xbe,j:gbe,L:UH,m:ybe,M:bbe,p:ae,q:G,Q:jR,s:wR,S:jbe,u:wbe,U:_be,V:Nbe,w:kbe,W:Sbe,x:null,X:null,y:Pbe,Y:Cbe,Z:Ebe,"%":bR},A={a:te,A:fe,b:be,B:xe,c:null,d:yR,e:yR,f:Dbe,g:Hbe,G:Kbe,H:Obe,I:Mbe,j:Lbe,L:WH,m:Ibe,M:Rbe,p:we,q:Pe,Q:jR,s:wR,S:Fbe,u:$be,U:Bbe,V:qbe,w:zbe,W:Vbe,x:null,X:null,y:Ube,Y:Wbe,Z:Gbe,"%":bR},C={a:W,A:D,b:R,B:z,c:Z,d:xR,e:xR,f:ube,g:pR,G:mR,H:gR,I:gR,j:obe,L:dbe,m:ibe,M:lbe,p:U,q:abe,Q:fbe,s:mbe,S:cbe,u:ebe,U:tbe,V:nbe,w:Jye,W:rbe,x:se,X:J,y:pR,Y:mR,Z:sbe,"%":hbe};N.x=M(r,N),N.X=M(s,N),N.c=M(t,N),A.x=M(r,A),A.X=M(s,A),A.c=M(t,A);function M(_e,Ve){return function(Ue){var Le=[],dt=-1,xt=0,Xe=_e.length,ke,Bt,Ft;for(Ue instanceof Date||(Ue=new Date(+Ue));++dt<Xe;)_e.charCodeAt(dt)===37&&(Le.push(_e.slice(xt,dt)),(Bt=fR[ke=_e.charAt(++dt)])!=null?ke=_e.charAt(++dt):Bt=ke==="e"?" ":"0",(Ft=Ve[ke])&&(ke=Ft(Ue,Bt)),Le.push(ke),xt=dt+1);return Le.push(_e.slice(xt,dt)),Le.join("")}}function I(_e,Ve){return function(Ue){var Le=l0(1900,void 0,1),dt=F(Le,_e,Ue+="",0),xt,Xe;if(dt!=Ue.length)return null;if("Q"in Le)return new Date(Le.Q);if("s"in Le)return new Date(Le.s*1e3+("L"in Le?Le.L:0));if(Ve&&!("Z"in Le)&&(Le.Z=0),"p"in Le&&(Le.H=Le.H%12+Le.p*12),Le.m===void 0&&(Le.m="q"in Le?Le.q:0),"V"in Le){if(Le.V<1||Le.V>53)return null;"w"in Le||(Le.w=1),"Z"in Le?(xt=bk(l0(Le.y,0,1)),Xe=xt.getUTCDay(),xt=Xe>4||Xe===0?M1.ceil(xt):M1(xt),xt=aw.offset(xt,(Le.V-1)*7),Le.y=xt.getUTCFullYear(),Le.m=xt.getUTCMonth(),Le.d=xt.getUTCDate()+(Le.w+6)%7):(xt=yk(l0(Le.y,0,1)),Xe=xt.getDay(),xt=Xe>4||Xe===0?O1.ceil(xt):O1(xt),xt=hy.offset(xt,(Le.V-1)*7),Le.y=xt.getFullYear(),Le.m=xt.getMonth(),Le.d=xt.getDate()+(Le.w+6)%7)}else("W"in Le||"U"in Le)&&("w"in Le||(Le.w="u"in Le?Le.u%7:"W"in Le?1:0),Xe="Z"in Le?bk(l0(Le.y,0,1)).getUTCDay():yk(l0(Le.y,0,1)).getDay(),Le.m=0,Le.d="W"in Le?(Le.w+6)%7+Le.W*7-(Xe+5)%7:Le.w+Le.U*7-(Xe+6)%7);return"Z"in Le?(Le.H+=Le.Z/100|0,Le.M+=Le.Z%100,bk(Le)):yk(Le)}}function F(_e,Ve,Ue,Le){for(var dt=0,xt=Ve.length,Xe=Ue.length,ke,Bt;dt<xt;){if(Le>=Xe)return-1;if(ke=Ve.charCodeAt(dt++),ke===37){if(ke=Ve.charAt(dt++),Bt=C[ke in fR?Ve.charAt(dt++):ke],!Bt||(Le=Bt(_e,Ue,Le))<0)return-1}else if(ke!=Ue.charCodeAt(Le++))return-1}return Le}function U(_e,Ve,Ue){var Le=d.exec(Ve.slice(Ue));return Le?(_e.p=u.get(Le[0].toLowerCase()),Ue+Le[0].length):-1}function W(_e,Ve,Ue){var Le=x.exec(Ve.slice(Ue));return Le?(_e.w=b.get(Le[0].toLowerCase()),Ue+Le[0].length):-1}function D(_e,Ve,Ue){var Le=h.exec(Ve.slice(Ue));return Le?(_e.w=g.get(Le[0].toLowerCase()),Ue+Le[0].length):-1}function R(_e,Ve,Ue){var Le=j.exec(Ve.slice(Ue));return Le?(_e.m=w.get(Le[0].toLowerCase()),Ue+Le[0].length):-1}function z(_e,Ve,Ue){var Le=y.exec(Ve.slice(Ue));return Le?(_e.m=v.get(Le[0].toLowerCase()),Ue+Le[0].length):-1}function Z(_e,Ve,Ue){return F(_e,t,Ve,Ue)}function se(_e,Ve,Ue){return F(_e,r,Ve,Ue)}function J(_e,Ve,Ue){return F(_e,s,Ve,Ue)}function Q(_e){return o[_e.getDay()]}function H(_e){return i[_e.getDay()]}function ne(_e){return c[_e.getMonth()]}function ue(_e){return l[_e.getMonth()]}function ae(_e){return a[+(_e.getHours()>=12)]}function G(_e){return 1+~~(_e.getMonth()/3)}function te(_e){return o[_e.getUTCDay()]}function fe(_e){return i[_e.getUTCDay()]}function be(_e){return c[_e.getUTCMonth()]}function xe(_e){return l[_e.getUTCMonth()]}function we(_e){return a[+(_e.getUTCHours()>=12)]}function Pe(_e){return 1+~~(_e.getUTCMonth()/3)}return{format:function(_e){var Ve=M(_e+="",N);return Ve.toString=function(){return _e},Ve},parse:function(_e){var Ve=I(_e+="",!1);return Ve.toString=function(){return _e},Ve},utcFormat:function(_e){var Ve=M(_e+="",A);return Ve.toString=function(){return _e},Ve},utcParse:function(_e){var Ve=I(_e+="",!0);return Ve.toString=function(){return _e},Ve}}}var fR={"-":"",_:" ",0:"0"},ji=/^\s*\d+/,Yye=/^%/,Xye=/[\\^$*+?|[\]().{}]/g;function Lr(e,t,r){var s=e<0?"-":"",a=(s?-e:e)+"",i=a.length;return s+(i<r?new Array(r-i+1).join(t)+a:a)}function Qye(e){return e.replace(Xye,"\\$&")}function c0(e){return new RegExp("^(?:"+e.map(Qye).join("|")+")","i")}function d0(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function Jye(e,t,r){var s=ji.exec(t.slice(r,r+1));return s?(e.w=+s[0],r+s[0].length):-1}function ebe(e,t,r){var s=ji.exec(t.slice(r,r+1));return s?(e.u=+s[0],r+s[0].length):-1}function tbe(e,t,r){var s=ji.exec(t.slice(r,r+2));return s?(e.U=+s[0],r+s[0].length):-1}function nbe(e,t,r){var s=ji.exec(t.slice(r,r+2));return s?(e.V=+s[0],r+s[0].length):-1}function rbe(e,t,r){var s=ji.exec(t.slice(r,r+2));return s?(e.W=+s[0],r+s[0].length):-1}function mR(e,t,r){var s=ji.exec(t.slice(r,r+4));return s?(e.y=+s[0],r+s[0].length):-1}function pR(e,t,r){var s=ji.exec(t.slice(r,r+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),r+s[0].length):-1}function sbe(e,t,r){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),r+s[0].length):-1}function abe(e,t,r){var s=ji.exec(t.slice(r,r+1));return s?(e.q=s[0]*3-3,r+s[0].length):-1}function ibe(e,t,r){var s=ji.exec(t.slice(r,r+2));return s?(e.m=s[0]-1,r+s[0].length):-1}function xR(e,t,r){var s=ji.exec(t.slice(r,r+2));return s?(e.d=+s[0],r+s[0].length):-1}function obe(e,t,r){var s=ji.exec(t.slice(r,r+3));return s?(e.m=0,e.d=+s[0],r+s[0].length):-1}function gR(e,t,r){var s=ji.exec(t.slice(r,r+2));return s?(e.H=+s[0],r+s[0].length):-1}function lbe(e,t,r){var s=ji.exec(t.slice(r,r+2));return s?(e.M=+s[0],r+s[0].length):-1}function cbe(e,t,r){var s=ji.exec(t.slice(r,r+2));return s?(e.S=+s[0],r+s[0].length):-1}function dbe(e,t,r){var s=ji.exec(t.slice(r,r+3));return s?(e.L=+s[0],r+s[0].length):-1}function ube(e,t,r){var s=ji.exec(t.slice(r,r+6));return s?(e.L=Math.floor(s[0]/1e3),r+s[0].length):-1}function hbe(e,t,r){var s=Yye.exec(t.slice(r,r+1));return s?r+s[0].length:-1}function fbe(e,t,r){var s=ji.exec(t.slice(r));return s?(e.Q=+s[0],r+s[0].length):-1}function mbe(e,t,r){var s=ji.exec(t.slice(r));return s?(e.s=+s[0],r+s[0].length):-1}function vR(e,t){return Lr(e.getDate(),t,2)}function pbe(e,t){return Lr(e.getHours(),t,2)}function xbe(e,t){return Lr(e.getHours()%12||12,t,2)}function gbe(e,t){return Lr(1+hy.count(Nh(e),e),t,3)}function UH(e,t){return Lr(e.getMilliseconds(),t,3)}function vbe(e,t){return UH(e,t)+"000"}function ybe(e,t){return Lr(e.getMonth()+1,t,2)}function bbe(e,t){return Lr(e.getMinutes(),t,2)}function jbe(e,t){return Lr(e.getSeconds(),t,2)}function wbe(e){var t=e.getDay();return t===0?7:t}function _be(e,t){return Lr(iw.count(Nh(e)-1,e),t,2)}function HH(e){var t=e.getDay();return t>=4||t===0?Fx(e):Fx.ceil(e)}function Nbe(e,t){return e=HH(e),Lr(Fx.count(Nh(e),e)+(Nh(e).getDay()===4),t,2)}function kbe(e){return e.getDay()}function Sbe(e,t){return Lr(O1.count(Nh(e)-1,e),t,2)}function Pbe(e,t){return Lr(e.getFullYear()%100,t,2)}function Abe(e,t){return e=HH(e),Lr(e.getFullYear()%100,t,2)}function Cbe(e,t){return Lr(e.getFullYear()%1e4,t,4)}function Tbe(e,t){var r=e.getDay();return e=r>=4||r===0?Fx(e):Fx.ceil(e),Lr(e.getFullYear()%1e4,t,4)}function Ebe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Lr(t/60|0,"0",2)+Lr(t%60,"0",2)}function yR(e,t){return Lr(e.getUTCDate(),t,2)}function Obe(e,t){return Lr(e.getUTCHours(),t,2)}function Mbe(e,t){return Lr(e.getUTCHours()%12||12,t,2)}function Lbe(e,t){return Lr(1+aw.count(kh(e),e),t,3)}function WH(e,t){return Lr(e.getUTCMilliseconds(),t,3)}function Dbe(e,t){return WH(e,t)+"000"}function Ibe(e,t){return Lr(e.getUTCMonth()+1,t,2)}function Rbe(e,t){return Lr(e.getUTCMinutes(),t,2)}function Fbe(e,t){return Lr(e.getUTCSeconds(),t,2)}function $be(e){var t=e.getUTCDay();return t===0?7:t}function Bbe(e,t){return Lr(ow.count(kh(e)-1,e),t,2)}function KH(e){var t=e.getUTCDay();return t>=4||t===0?$x(e):$x.ceil(e)}function qbe(e,t){return e=KH(e),Lr($x.count(kh(e),e)+(kh(e).getUTCDay()===4),t,2)}function zbe(e){return e.getUTCDay()}function Vbe(e,t){return Lr(M1.count(kh(e)-1,e),t,2)}function Ube(e,t){return Lr(e.getUTCFullYear()%100,t,2)}function Hbe(e,t){return e=KH(e),Lr(e.getUTCFullYear()%100,t,2)}function Wbe(e,t){return Lr(e.getUTCFullYear()%1e4,t,4)}function Kbe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?$x(e):$x.ceil(e),Lr(e.getUTCFullYear()%1e4,t,4)}function Gbe(){return"+0000"}function bR(){return"%"}function jR(e){return+e}function wR(e){return Math.floor(+e/1e3)}var Rp,GH,ZH;Zbe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Zbe(e){return Rp=Zye(e),GH=Rp.format,Rp.parse,ZH=Rp.utcFormat,Rp.utcParse,Rp}function Ybe(e){return new Date(e)}function Xbe(e){return e instanceof Date?+e:+new Date(+e)}function mC(e,t,r,s,a,i,o,l,c,d){var u=eC(),h=u.invert,g=u.domain,x=d(".%L"),b=d(":%S"),y=d("%I:%M"),v=d("%I %p"),j=d("%a %d"),w=d("%b %d"),N=d("%B"),A=d("%Y");function C(M){return(c(M)<M?x:l(M)<M?b:o(M)<M?y:i(M)<M?v:s(M)<M?a(M)<M?j:w:r(M)<M?N:A)(M)}return u.invert=function(M){return new Date(h(M))},u.domain=function(M){return arguments.length?g(Array.from(M,Xbe)):g().map(Ybe)},u.ticks=function(M){var I=g();return e(I[0],I[I.length-1],M??10)},u.tickFormat=function(M,I){return I==null?C:d(I)},u.nice=function(M){var I=g();return(!M||typeof M.range!="function")&&(M=t(I[0],I[I.length-1],M??10)),M?g(DH(I,M)):u},u.copy=function(){return uy(u,mC(e,t,r,s,a,i,o,l,c,d))},u}function Qbe(){return Cc.apply(mC(Kye,Gye,Nh,hC,iw,hy,dC,lC,wm,GH).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Jbe(){return Cc.apply(mC(Hye,Wye,kh,fC,ow,aw,uC,cC,wm,ZH).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function lw(){var e=0,t=1,r,s,a,i,o=Lo,l=!1,c;function d(h){return h==null||isNaN(h=+h)?c:o(a===0?.5:(h=(i(h)-r)*a,l?Math.max(0,Math.min(1,h)):h))}d.domain=function(h){return arguments.length?([e,t]=h,r=i(e=+e),s=i(t=+t),a=r===s?0:1/(s-r),d):[e,t]},d.clamp=function(h){return arguments.length?(l=!!h,d):l},d.interpolator=function(h){return arguments.length?(o=h,d):o};function u(h){return function(g){var x,b;return arguments.length?([x,b]=g,o=h(x,b),d):[o(0),o(1)]}}return d.range=u(Mg),d.rangeRound=u(JA),d.unknown=function(h){return arguments.length?(c=h,d):c},function(h){return i=h,r=h(e),s=h(t),a=r===s?0:1/(s-r),d}}function qf(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function YH(){var e=Bf(lw()(Lo));return e.copy=function(){return qf(e,YH())},Eh.apply(e,arguments)}function XH(){var e=rC(lw()).domain([1,10]);return e.copy=function(){return qf(e,XH()).base(e.base())},Eh.apply(e,arguments)}function QH(){var e=sC(lw());return e.copy=function(){return qf(e,QH()).constant(e.constant())},Eh.apply(e,arguments)}function pC(){var e=aC(lw());return e.copy=function(){return qf(e,pC()).exponent(e.exponent())},Eh.apply(e,arguments)}function e1e(){return pC.apply(null,arguments).exponent(.5)}function JH(){var e=[],t=Lo;function r(s){if(s!=null&&!isNaN(s=+s))return t((cy(e,s,1)-1)/(e.length-1))}return r.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(kf),r},r.interpolator=function(s){return arguments.length?(t=s,r):t},r.range=function(){return e.map((s,a)=>t(a/(e.length-1)))},r.quantiles=function(s){return Array.from({length:s+1},(a,i)=>Bve(e,i/s))},r.copy=function(){return JH(t).domain(e)},Eh.apply(r,arguments)}function cw(){var e=0,t=.5,r=1,s=1,a,i,o,l,c,d=Lo,u,h=!1,g;function x(y){return isNaN(y=+y)?g:(y=.5+((y=+u(y))-i)*(s*y<s*i?l:c),d(h?Math.max(0,Math.min(1,y)):y))}x.domain=function(y){return arguments.length?([e,t,r]=y,a=u(e=+e),i=u(t=+t),o=u(r=+r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),s=i<a?-1:1,x):[e,t,r]},x.clamp=function(y){return arguments.length?(h=!!y,x):h},x.interpolator=function(y){return arguments.length?(d=y,x):d};function b(y){return function(v){var j,w,N;return arguments.length?([j,w,N]=v,d=hye(y,[j,w,N]),x):[d(0),d(.5),d(1)]}}return x.range=b(Mg),x.rangeRound=b(JA),x.unknown=function(y){return arguments.length?(g=y,x):g},function(y){return u=y,a=y(e),i=y(t),o=y(r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),s=i<a?-1:1,x}}function eW(){var e=Bf(cw()(Lo));return e.copy=function(){return qf(e,eW())},Eh.apply(e,arguments)}function tW(){var e=rC(cw()).domain([.1,1,10]);return e.copy=function(){return qf(e,tW()).base(e.base())},Eh.apply(e,arguments)}function nW(){var e=sC(cw());return e.copy=function(){return qf(e,nW()).constant(e.constant())},Eh.apply(e,arguments)}function xC(){var e=aC(cw());return e.copy=function(){return qf(e,xC()).exponent(e.exponent())},Eh.apply(e,arguments)}function t1e(){return xC.apply(null,arguments).exponent(.5)}const _R=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:cv,scaleDiverging:eW,scaleDivergingLog:tW,scaleDivergingPow:xC,scaleDivergingSqrt:t1e,scaleDivergingSymlog:nW,scaleIdentity:LH,scaleImplicit:K4,scaleLinear:T1,scaleLog:IH,scaleOrdinal:YA,scalePoint:M0,scalePow:iC,scaleQuantile:$H,scaleQuantize:BH,scaleRadial:FH,scaleSequential:YH,scaleSequentialLog:XH,scaleSequentialPow:pC,scaleSequentialQuantile:JH,scaleSequentialSqrt:e1e,scaleSequentialSymlog:QH,scaleSqrt:Dye,scaleSymlog:RH,scaleThreshold:qH,scaleTime:Qbe,scaleUtc:Jbe,tickFormat:MH},Symbol.toStringTag,{value:"Module"}));var jk,NR;function dw(){if(NR)return jk;NR=1;var e=Cg();function t(r,s,a){for(var i=-1,o=r.length;++i<o;){var l=r[i],c=s(l);if(c!=null&&(d===void 0?c===c&&!e(c):a(c,d)))var d=c,u=l}return u}return jk=t,jk}var wk,kR;function rW(){if(kR)return wk;kR=1;function e(t,r){return t>r}return wk=e,wk}var _k,SR;function n1e(){if(SR)return _k;SR=1;var e=dw(),t=rW(),r=Og();function s(a){return a&&a.length?e(a,r,t):void 0}return _k=s,_k}var r1e=n1e();const uw=Dr(r1e);var Nk,PR;function sW(){if(PR)return Nk;PR=1;function e(t,r){return t<r}return Nk=e,Nk}var kk,AR;function s1e(){if(AR)return kk;AR=1;var e=dw(),t=sW(),r=Og();function s(a){return a&&a.length?e(a,r,t):void 0}return kk=s,kk}var a1e=s1e();const hw=Dr(a1e);var Sk,CR;function i1e(){if(CR)return Sk;CR=1;var e=OA(),t=Cu(),r=hH(),s=fl();function a(i,o){var l=s(i)?e:r;return l(i,t(o,3))}return Sk=a,Sk}var Pk,TR;function o1e(){if(TR)return Pk;TR=1;var e=dH(),t=i1e();function r(s,a){return e(t(s,a),1)}return Pk=r,Pk}var l1e=o1e();const c1e=Dr(l1e);var Ak,ER;function d1e(){if(ER)return Ak;ER=1;var e=HA();function t(r,s){return e(r,s)}return Ak=t,Ak}var u1e=d1e();const fy=Dr(u1e);var Lg=1e9,h1e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},vC,Ds=!0,Nc="[DecimalError] ",Im=Nc+"Invalid argument: ",gC=Nc+"Exponent out of range: ",Dg=Math.floor,mm=Math.pow,f1e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ol,xi=1e7,Ps=7,aW=9007199254740991,L1=Dg(aW/Ps),Jt={};Jt.absoluteValue=Jt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Jt.comparedTo=Jt.cmp=function(e){var t,r,s,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(s=i.d.length,a=e.d.length,t=0,r=s<a?s:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return s===a?0:s>a^i.s<0?1:-1};Jt.decimalPlaces=Jt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ps;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Jt.dividedBy=Jt.div=function(e){return fh(this,new this.constructor(e))};Jt.dividedToIntegerBy=Jt.idiv=function(e){var t=this,r=t.constructor;return ds(fh(t,new r(e),0,1),r.precision)};Jt.equals=Jt.eq=function(e){return!this.cmp(e)};Jt.exponent=function(){return Ia(this)};Jt.greaterThan=Jt.gt=function(e){return this.cmp(e)>0};Jt.greaterThanOrEqualTo=Jt.gte=function(e){return this.cmp(e)>=0};Jt.isInteger=Jt.isint=function(){return this.e>this.d.length-2};Jt.isNegative=Jt.isneg=function(){return this.s<0};Jt.isPositive=Jt.ispos=function(){return this.s>0};Jt.isZero=function(){return this.s===0};Jt.lessThan=Jt.lt=function(e){return this.cmp(e)<0};Jt.lessThanOrEqualTo=Jt.lte=function(e){return this.cmp(e)<1};Jt.logarithm=Jt.log=function(e){var t,r=this,s=r.constructor,a=s.precision,i=a+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(Ol))throw Error(Nc+"NaN");if(r.s<1)throw Error(Nc+(r.s?"NaN":"-Infinity"));return r.eq(Ol)?new s(0):(Ds=!1,t=fh(mv(r,i),mv(e,i),i),Ds=!0,ds(t,a))};Jt.minus=Jt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?lW(t,e):iW(t,(e.s=-e.s,e))};Jt.modulo=Jt.mod=function(e){var t,r=this,s=r.constructor,a=s.precision;if(e=new s(e),!e.s)throw Error(Nc+"NaN");return r.s?(Ds=!1,t=fh(r,e,0,1).times(e),Ds=!0,r.minus(t)):ds(new s(r),a)};Jt.naturalExponential=Jt.exp=function(){return oW(this)};Jt.naturalLogarithm=Jt.ln=function(){return mv(this)};Jt.negated=Jt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Jt.plus=Jt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?iW(t,e):lW(t,(e.s=-e.s,e))};Jt.precision=Jt.sd=function(e){var t,r,s,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Im+e);if(t=Ia(a)+1,s=a.d.length-1,r=s*Ps+1,s=a.d[s],s){for(;s%10==0;s/=10)r--;for(s=a.d[0];s>=10;s/=10)r++}return e&&t>r?t:r};Jt.squareRoot=Jt.sqrt=function(){var e,t,r,s,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Nc+"NaN")}for(e=Ia(l),Ds=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=ou(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Dg((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(a.toString()),r=c.precision,a=o=r+3;;)if(i=s,s=i.plus(fh(l,i,o+2)).times(.5),ou(i.d).slice(0,o)===(t=ou(s.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(ds(i,r+1,0),i.times(i).eq(l)){s=i;break}}else if(t!="9999")break;o+=4}return Ds=!0,ds(s,r)};Jt.times=Jt.mul=function(e){var t,r,s,a,i,o,l,c,d,u=this,h=u.constructor,g=u.d,x=(e=new h(e)).d;if(!u.s||!e.s)return new h(0);for(e.s*=u.s,r=u.e+e.e,c=g.length,d=x.length,c<d&&(i=g,g=x,x=i,o=c,c=d,d=o),i=[],o=c+d,s=o;s--;)i.push(0);for(s=d;--s>=0;){for(t=0,a=c+s;a>s;)l=i[a]+x[s]*g[a-s-1]+t,i[a--]=l%xi|0,t=l/xi|0;i[a]=(i[a]+t)%xi|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Ds?ds(e,h.precision):e};Jt.toDecimalPlaces=Jt.todp=function(e,t){var r=this,s=r.constructor;return r=new s(r),e===void 0?r:(_u(e,0,Lg),t===void 0?t=s.rounding:_u(t,0,8),ds(r,e+Ia(r)+1,t))};Jt.toExponential=function(e,t){var r,s=this,a=s.constructor;return e===void 0?r=Xm(s,!0):(_u(e,0,Lg),t===void 0?t=a.rounding:_u(t,0,8),s=ds(new a(s),e+1,t),r=Xm(s,!0,e+1)),r};Jt.toFixed=function(e,t){var r,s,a=this,i=a.constructor;return e===void 0?Xm(a):(_u(e,0,Lg),t===void 0?t=i.rounding:_u(t,0,8),s=ds(new i(a),e+Ia(a)+1,t),r=Xm(s.abs(),!1,e+Ia(s)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Jt.toInteger=Jt.toint=function(){var e=this,t=e.constructor;return ds(new t(e),Ia(e)+1,t.rounding)};Jt.toNumber=function(){return+this};Jt.toPower=Jt.pow=function(e){var t,r,s,a,i,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(Ol);if(l=new c(l),!l.s){if(e.s<1)throw Error(Nc+"Infinity");return l}if(l.eq(Ol))return l;if(s=c.precision,e.eq(Ol))return ds(l,s);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=u<0?-u:u)<=aW){for(a=new c(Ol),t=Math.ceil(s/Ps+4),Ds=!1;r%2&&(a=a.times(l),MR(a.d,t)),r=Dg(r/2),r!==0;)l=l.times(l),MR(l.d,t);return Ds=!0,e.s<0?new c(Ol).div(a):ds(a,s)}}else if(i<0)throw Error(Nc+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Ds=!1,a=e.times(mv(l,s+d)),Ds=!0,a=oW(a),a.s=i,a};Jt.toPrecision=function(e,t){var r,s,a=this,i=a.constructor;return e===void 0?(r=Ia(a),s=Xm(a,r<=i.toExpNeg||r>=i.toExpPos)):(_u(e,1,Lg),t===void 0?t=i.rounding:_u(t,0,8),a=ds(new i(a),e,t),r=Ia(a),s=Xm(a,e<=r||r<=i.toExpNeg,e)),s};Jt.toSignificantDigits=Jt.tosd=function(e,t){var r=this,s=r.constructor;return e===void 0?(e=s.precision,t=s.rounding):(_u(e,1,Lg),t===void 0?t=s.rounding:_u(t,0,8)),ds(new s(r),e,t)};Jt.toString=Jt.valueOf=Jt.val=Jt.toJSON=Jt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ia(e),r=e.constructor;return Xm(e,t<=r.toExpNeg||t>=r.toExpPos)};function iW(e,t){var r,s,a,i,o,l,c,d,u=e.constructor,h=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),Ds?ds(t,h):t;if(c=e.d,d=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(s=c,i=-i,l=d.length):(s=d,a=o,l=c.length),o=Math.ceil(h/Ps),l=o>l?o+1:l+1,i>l&&(i=l,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,s=d,d=c,c=s),r=0;i;)r=(c[--i]=c[i]+d[i]+r)/xi|0,c[i]%=xi;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,Ds?ds(t,h):t}function _u(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Im+e)}function ou(e){var t,r,s,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)s=e[t]+"",r=Ps-s.length,r&&(i+=rf(r)),i+=s;o=e[t],s=o+"",r=Ps-s.length,r&&(i+=rf(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var fh=(function(){function e(s,a){var i,o=0,l=s.length;for(s=s.slice();l--;)i=s[l]*a+o,s[l]=i%xi|0,o=i/xi|0;return o&&s.unshift(o),s}function t(s,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(s[l]!=a[l]){c=s[l]>a[l]?1:-1;break}return c}function r(s,a,i){for(var o=0;i--;)s[i]-=o,o=s[i]<a[i]?1:0,s[i]=o*xi+s[i]-a[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,a,i,o){var l,c,d,u,h,g,x,b,y,v,j,w,N,A,C,M,I,F,U=s.constructor,W=s.s==a.s?1:-1,D=s.d,R=a.d;if(!s.s)return new U(s);if(!a.s)throw Error(Nc+"Division by zero");for(c=s.e-a.e,I=R.length,C=D.length,x=new U(W),b=x.d=[],d=0;R[d]==(D[d]||0);)++d;if(R[d]>(D[d]||0)&&--c,i==null?w=i=U.precision:o?w=i+(Ia(s)-Ia(a))+1:w=i,w<0)return new U(0);if(w=w/Ps+2|0,d=0,I==1)for(u=0,R=R[0],w++;(d<C||u)&&w--;d++)N=u*xi+(D[d]||0),b[d]=N/R|0,u=N%R|0;else{for(u=xi/(R[0]+1)|0,u>1&&(R=e(R,u),D=e(D,u),I=R.length,C=D.length),A=I,y=D.slice(0,I),v=y.length;v<I;)y[v++]=0;F=R.slice(),F.unshift(0),M=R[0],R[1]>=xi/2&&++M;do u=0,l=t(R,y,I,v),l<0?(j=y[0],I!=v&&(j=j*xi+(y[1]||0)),u=j/M|0,u>1?(u>=xi&&(u=xi-1),h=e(R,u),g=h.length,v=y.length,l=t(h,y,g,v),l==1&&(u--,r(h,I<g?F:R,g))):(u==0&&(l=u=1),h=R.slice()),g=h.length,g<v&&h.unshift(0),r(y,h,v),l==-1&&(v=y.length,l=t(R,y,I,v),l<1&&(u++,r(y,I<v?F:R,v))),v=y.length):l===0&&(u++,y=[0]),b[d++]=u,l&&y[0]?y[v++]=D[A]||0:(y=[D[A]],v=1);while((A++<C||y[0]!==void 0)&&w--)}return b[0]||b.shift(),x.e=c,ds(x,o?i+Ia(x)+1:i)}})();function oW(e,t){var r,s,a,i,o,l,c=0,d=0,u=e.constructor,h=u.precision;if(Ia(e)>16)throw Error(gC+Ia(e));if(!e.s)return new u(Ol);for(Ds=!1,l=h,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(s=Math.log(mm(2,d))/Math.LN10*2+5|0,l+=s,r=a=i=new u(Ol),u.precision=l;;){if(a=ds(a.times(e),l),r=r.times(++c),o=i.plus(fh(a,r,l)),ou(o.d).slice(0,l)===ou(i.d).slice(0,l)){for(;d--;)i=ds(i.times(i),l);return u.precision=h,t==null?(Ds=!0,ds(i,h)):i}i=o}}function Ia(e){for(var t=e.e*Ps,r=e.d[0];r>=10;r/=10)t++;return t}function Ck(e,t,r){if(t>e.LN10.sd())throw Ds=!0,r&&(e.precision=r),Error(Nc+"LN10 precision limit exceeded");return ds(new e(e.LN10),t)}function rf(e){for(var t="";e--;)t+="0";return t}function mv(e,t){var r,s,a,i,o,l,c,d,u,h=1,g=10,x=e,b=x.d,y=x.constructor,v=y.precision;if(x.s<1)throw Error(Nc+(x.s?"NaN":"-Infinity"));if(x.eq(Ol))return new y(0);if(t==null?(Ds=!1,d=v):d=t,x.eq(10))return t==null&&(Ds=!0),Ck(y,d);if(d+=g,y.precision=d,r=ou(b),s=r.charAt(0),i=Ia(x),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&r.charAt(1)>3;)x=x.times(e),r=ou(x.d),s=r.charAt(0),h++;i=Ia(x),s>1?(x=new y("0."+r),i++):x=new y(s+"."+r.slice(1))}else return c=Ck(y,d+2,v).times(i+""),x=mv(new y(s+"."+r.slice(1)),d-g).plus(c),y.precision=v,t==null?(Ds=!0,ds(x,v)):x;for(l=o=x=fh(x.minus(Ol),x.plus(Ol),d),u=ds(x.times(x),d),a=3;;){if(o=ds(o.times(u),d),c=l.plus(fh(o,new y(a),d)),ou(c.d).slice(0,d)===ou(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(Ck(y,d+2,v).times(i+""))),l=fh(l,new y(h),d),y.precision=v,t==null?(Ds=!0,ds(l,v)):l;l=c,a+=2}}function OR(e,t){var r,s,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(r<0&&(r=s),r+=+t.slice(s+1),t=t.substring(0,s)):r<0&&(r=t.length),s=0;t.charCodeAt(s)===48;)++s;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(s,a),t){if(a-=s,r=r-s-1,e.e=Dg(r/Ps),e.d=[],s=(r+1)%Ps,r<0&&(s+=Ps),s<a){for(s&&e.d.push(+t.slice(0,s)),a-=Ps;s<a;)e.d.push(+t.slice(s,s+=Ps));t=t.slice(s),s=Ps-t.length}else s-=a;for(;s--;)t+="0";if(e.d.push(+t),Ds&&(e.e>L1||e.e<-L1))throw Error(gC+r)}else e.s=0,e.e=0,e.d=[0];return e}function ds(e,t,r){var s,a,i,o,l,c,d,u,h=e.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(s=t-o,s<0)s+=Ps,a=t,d=h[u=0];else{if(u=Math.ceil((s+1)/Ps),i=h.length,u>=i)return e;for(d=i=h[u],o=1;i>=10;i/=10)o++;s%=Ps,a=s-Ps+o}if(r!==void 0&&(i=mm(10,o-a-1),l=d/i%10|0,c=t<0||h[u+1]!==void 0||d%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(s>0?a>0?d/mm(10,o-a):0:h[u-1])%10&1||r==(e.s<0?8:7))),t<1||!h[0])return c?(i=Ia(e),h.length=1,t=t-i-1,h[0]=mm(10,(Ps-t%Ps)%Ps),e.e=Dg(-t/Ps)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(s==0?(h.length=u,i=1,u--):(h.length=u+1,i=mm(10,Ps-s),h[u]=a>0?(d/mm(10,o-a)%mm(10,a)|0)*i:0),c)for(;;)if(u==0){(h[0]+=i)==xi&&(h[0]=1,++e.e);break}else{if(h[u]+=i,h[u]!=xi)break;h[u--]=0,i=1}for(s=h.length;h[--s]===0;)h.pop();if(Ds&&(e.e>L1||e.e<-L1))throw Error(gC+Ia(e));return e}function lW(e,t){var r,s,a,i,o,l,c,d,u,h,g=e.constructor,x=g.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new g(e),Ds?ds(t,x):t;if(c=e.d,h=t.d,s=t.e,d=e.e,c=c.slice(),o=d-s,o){for(u=o<0,u?(r=c,o=-o,l=h.length):(r=h,s=d,l=c.length),a=Math.max(Math.ceil(x/Ps),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=h.length,u=a<l,u&&(l=a),a=0;a<l;a++)if(c[a]!=h[a]){u=c[a]<h[a];break}o=0}for(u&&(r=c,c=h,h=r,t.s=-t.s),l=c.length,a=h.length-l;a>0;--a)c[l++]=0;for(a=h.length;a>o;){if(c[--a]<h[a]){for(i=a;i&&c[--i]===0;)c[i]=xi-1;--c[i],c[a]+=xi}c[a]-=h[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,Ds?ds(t,x):t):new g(0)}function Xm(e,t,r){var s,a=Ia(e),i=ou(e.d),o=i.length;return t?(r&&(s=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+rf(s):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+rf(-a-1)+i,r&&(s=r-o)>0&&(i+=rf(s))):a>=o?(i+=rf(a+1-o),r&&(s=r-a-1)>0&&(i=i+"."+rf(s))):((s=a+1)<o&&(i=i.slice(0,s)+"."+i.slice(s)),r&&(s=r-o)>0&&(a+1===o&&(i+="."),i+=rf(s))),e.s<0?"-"+i:i}function MR(e,t){if(e.length>t)return e.length=t,!0}function cW(e){var t,r,s;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Im+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return OR(o,i.toString())}else if(typeof i!="string")throw Error(Im+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,f1e.test(i))OR(o,i);else throw Error(Im+i)}if(a.prototype=Jt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=cW,a.config=a.set=m1e,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(r=s[t++])||(e[r]=this[r]);return a.config(e),a}function m1e(e){if(!e||typeof e!="object")throw Error(Nc+"Object expected");var t,r,s,a=["precision",1,Lg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((s=e[r=a[t]])!==void 0)if(Dg(s)===s&&s>=a[t+1]&&s<=a[t+2])this[r]=s;else throw Error(Im+r+": "+s);if((s=e[r="LN10"])!==void 0)if(s==Math.LN10)this[r]=new this(s);else throw Error(Im+r+": "+s);return this}var vC=cW(h1e);Ol=new vC(1);const ns=vC;function p1e(e){return y1e(e)||v1e(e)||g1e(e)||x1e()}function x1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g1e(e,t){if(e){if(typeof e=="string")return X4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X4(e,t)}}function v1e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function y1e(e){if(Array.isArray(e))return X4(e)}function X4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var b1e=function(t){return t},dW={},uW=function(t){return t===dW},LR=function(t){return function r(){return arguments.length===0||arguments.length===1&&uW(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},j1e=function e(t,r){return t===1?r:LR(function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==dW}).length;return o>=t?r.apply(void 0,a):e(t-o,LR(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var u=a.map(function(h){return uW(h)?c.shift():h});return r.apply(void 0,p1e(u).concat(c))}))})},fw=function(t){return j1e(t.length,t)},Q4=function(t,r){for(var s=[],a=t;a<r;++a)s[a-t]=a;return s},w1e=fw(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),_1e=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];if(!r.length)return b1e;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},J4=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},hW=function(t){var r=null,s=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,s=t.apply(void 0,i)),s}};function N1e(e){var t;return e===0?t=1:t=Math.floor(new ns(e).abs().log(10).toNumber())+1,t}function k1e(e,t,r){for(var s=new ns(e),a=0,i=[];s.lt(t)&&a<1e5;)i.push(s.toNumber()),s=s.add(r),a++;return i}var S1e=fw(function(e,t,r){var s=+e,a=+t;return s+r*(a-s)}),P1e=fw(function(e,t,r){var s=t-+e;return s=s||1/0,(r-e)/s}),A1e=fw(function(e,t,r){var s=t-+e;return s=s||1/0,Math.max(0,Math.min(1,(r-e)/s))});const mw={rangeStep:k1e,getDigitCount:N1e,interpolateNumber:S1e,uninterpolateNumber:P1e,uninterpolateTruncation:A1e};function eP(e){return E1e(e)||T1e(e)||fW(e)||C1e()}function C1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T1e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function E1e(e){if(Array.isArray(e))return tP(e)}function pv(e,t){return L1e(e)||M1e(e,t)||fW(e,t)||O1e()}function O1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fW(e,t){if(e){if(typeof e=="string")return tP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tP(e,t)}}function tP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function M1e(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],s=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(s=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));s=!0);}catch(c){a=!0,i=c}finally{try{!s&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function L1e(e){if(Array.isArray(e))return e}function mW(e){var t=pv(e,2),r=t[0],s=t[1],a=r,i=s;return r>s&&(a=s,i=r),[a,i]}function pW(e,t,r){if(e.lte(0))return new ns(0);var s=mw.getDigitCount(e.toNumber()),a=new ns(10).pow(s),i=e.div(a),o=s!==1?.05:.1,l=new ns(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?c:new ns(Math.ceil(c))}function D1e(e,t,r){var s=1,a=new ns(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(s=new ns(10).pow(mw.getDigitCount(e)-1),a=new ns(Math.floor(a.div(s).toNumber())).mul(s)):i>1&&(a=new ns(Math.floor(e)))}else e===0?a=new ns(Math.floor((t-1)/2)):r||(a=new ns(Math.floor(e)));var o=Math.floor((t-1)/2),l=_1e(w1e(function(c){return a.add(new ns(c-o).mul(s)).toNumber()}),Q4);return l(0,t)}function xW(e,t,r,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new ns(0),tickMin:new ns(0),tickMax:new ns(0)};var i=pW(new ns(t).sub(e).div(r-1),s,a),o;e<=0&&t>=0?o=new ns(0):(o=new ns(e).add(t).div(2),o=o.sub(new ns(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new ns(t).sub(o).div(i).toNumber()),d=l+c+1;return d>r?xW(e,t,r,s,a+1):(d<r&&(c=t>0?c+(r-d):c,l=t>0?l:l+(r-d)),{step:i,tickMin:o.sub(new ns(l).mul(i)),tickMax:o.add(new ns(c).mul(i))})}function I1e(e){var t=pv(e,2),r=t[0],s=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=mW([r,s]),c=pv(l,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var h=u===1/0?[d].concat(eP(Q4(0,a-1).map(function(){return 1/0}))):[].concat(eP(Q4(0,a-1).map(function(){return-1/0})),[u]);return r>s?J4(h):h}if(d===u)return D1e(d,a,i);var g=xW(d,u,o,i),x=g.step,b=g.tickMin,y=g.tickMax,v=mw.rangeStep(b,y.add(new ns(.1).mul(x)),x);return r>s?J4(v):v}function R1e(e,t){var r=pv(e,2),s=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=mW([s,a]),l=pv(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[s,a];if(c===d)return[c];var u=Math.max(t,2),h=pW(new ns(d).sub(c).div(u-1),i,0),g=[].concat(eP(mw.rangeStep(new ns(c),new ns(d).sub(new ns(.99).mul(h)),h)),[d]);return s>a?J4(g):g}var F1e=hW(I1e),$1e=hW(R1e),B1e="Invariant failed";function Qm(e,t){throw new Error(B1e)}var q1e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Bx(e){"@babel/helpers - typeof";return Bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bx(e)}function D1(){return D1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},D1.apply(this,arguments)}function z1e(e,t){return W1e(e)||H1e(e,t)||U1e(e,t)||V1e()}function V1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U1e(e,t){if(e){if(typeof e=="string")return DR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DR(e,t)}}function DR(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function H1e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function W1e(e){if(Array.isArray(e))return e}function K1e(e,t){if(e==null)return{};var r=G1e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function G1e(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function Z1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y1e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,yW(s.key),s)}}function X1e(e,t,r){return t&&Y1e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Q1e(e,t,r){return t=I1(t),J1e(e,gW()?Reflect.construct(t,r||[],I1(e).constructor):t.apply(e,r))}function J1e(e,t){if(t&&(Bx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eje(e)}function eje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gW=function(){return!!e})()}function I1(e){return I1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},I1(e)}function tje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nP(e,t)}function nP(e,t){return nP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},nP(e,t)}function vW(e,t,r){return t=yW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yW(e){var t=nje(e,"string");return Bx(t)=="symbol"?t:t+""}function nje(e,t){if(Bx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Bx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var my=(function(e){function t(){return Z1e(this,t),Q1e(this,t,arguments)}return tje(t,e),X1e(t,[{key:"render",value:function(){var s=this.props,a=s.offset,i=s.layout,o=s.width,l=s.dataKey,c=s.data,d=s.dataPointFormatter,u=s.xAxis,h=s.yAxis,g=K1e(s,q1e),x=bn(g,!1);this.props.direction==="x"&&u.type!=="number"&&Qm();var b=c.map(function(y){var v=d(y,l),j=v.x,w=v.y,N=v.value,A=v.errorVal;if(!A)return null;var C=[],M,I;if(Array.isArray(A)){var F=z1e(A,2);M=F[0],I=F[1]}else M=I=A;if(i==="vertical"){var U=u.scale,W=w+a,D=W+o,R=W-o,z=U(N-M),Z=U(N+I);C.push({x1:Z,y1:D,x2:Z,y2:R}),C.push({x1:z,y1:W,x2:Z,y2:W}),C.push({x1:z,y1:D,x2:z,y2:R})}else if(i==="horizontal"){var se=h.scale,J=j+a,Q=J-o,H=J+o,ne=se(N-M),ue=se(N+I);C.push({x1:Q,y1:ue,x2:H,y2:ue}),C.push({x1:J,y1:ne,x2:J,y2:ue}),C.push({x1:Q,y1:ne,x2:H,y2:ne})}return Te.createElement(Or,D1({className:"recharts-errorBar",key:"bar-".concat(C.map(function(ae){return"".concat(ae.x1,"-").concat(ae.x2,"-").concat(ae.y1,"-").concat(ae.y2)}))},x),C.map(function(ae){return Te.createElement("line",D1({},ae,{key:"line-".concat(ae.x1,"-").concat(ae.x2,"-").concat(ae.y1,"-").concat(ae.y2)}))}))});return Te.createElement(Or,{className:"recharts-errorBars"},b)}}])})(Te.Component);vW(my,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});vW(my,"displayName","ErrorBar");function xv(e){"@babel/helpers - typeof";return xv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xv(e)}function IR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function im(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IR(Object(r),!0).forEach(function(s){rje(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function rje(e,t,r){return t=sje(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sje(e){var t=aje(e,"string");return xv(t)=="symbol"?t:t+""}function aje(e,t){if(xv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(xv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bW=function(t){var r=t.children,s=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=Cl(r,hh);if(!o)return null;var l=hh.defaultProps,c=l!==void 0?im(im({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:i==="children"?d=(s||[]).reduce(function(u,h){var g=h.item,x=h.props,b=x.sectors||x.data||[];return u.concat(b.map(function(y){return{type:o.props.iconType||g.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):d=(s||[]).map(function(u){var h=u.item,g=h.type.defaultProps,x=g!==void 0?im(im({},g),h.props):{},b=x.dataKey,y=x.name,v=x.legendType,j=x.hide;return{inactive:j,dataKey:b,type:c.iconType||v||"square",color:yC(h),value:y||b,payload:x}}),im(im(im({},c),hh.getWithHeight(o,a)),{},{payload:d,item:o})};function gv(e){"@babel/helpers - typeof";return gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gv(e)}function RR(e){return cje(e)||lje(e)||oje(e)||ije()}function ije(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oje(e,t){if(e){if(typeof e=="string")return rP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rP(e,t)}}function lje(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cje(e){if(Array.isArray(e))return rP(e)}function rP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function FR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function ea(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FR(Object(r),!0).forEach(function(s){dx(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function dx(e,t,r){return t=dje(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dje(e){var t=uje(e,"string");return gv(t)=="symbol"?t:t+""}function uje(e,t){if(gv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(gv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qa(e,t,r){return zn(e)||zn(t)?r:ei(t)?Rl(e,t,r):Rn(t)?t(e):r}function L0(e,t,r,s){var a=c1e(e,function(l){return Qa(l,t)});if(r==="number"){var i=a.filter(function(l){return Lt(l)||parseFloat(l)});return i.length?[hw(i),uw(i)]:[1/0,-1/0]}var o=s?a.filter(function(l){return!zn(l)}):a;return o.map(function(l){return ei(l)||l instanceof Date?l:""})}var hje=function(t){var r,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=s==null?void 0:s.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<l;d++){var u=d>0?a[d-1].coordinate:a[l-1].coordinate,h=a[d].coordinate,g=d>=l-1?a[0].coordinate:a[d+1].coordinate,x=void 0;if(Oo(h-u)!==Oo(g-h)){var b=[];if(Oo(g-h)===Oo(c[1]-c[0])){x=g;var y=h+c[1]-c[0];b[0]=Math.min(y,(y+u)/2),b[1]=Math.max(y,(y+u)/2)}else{x=u;var v=g+c[1]-c[0];b[0]=Math.min(h,(v+h)/2),b[1]=Math.max(h,(v+h)/2)}var j=[Math.min(h,(x+h)/2),Math.max(h,(x+h)/2)];if(t>j[0]&&t<=j[1]||t>=b[0]&&t<=b[1]){o=a[d].index;break}}else{var w=Math.min(u,g),N=Math.max(u,g);if(t>(w+h)/2&&t<=(N+h)/2){o=a[d].index;break}}}else for(var A=0;A<l;A++)if(A===0&&t<=(s[A].coordinate+s[A+1].coordinate)/2||A>0&&A<l-1&&t>(s[A].coordinate+s[A-1].coordinate)/2&&t<=(s[A].coordinate+s[A+1].coordinate)/2||A===l-1&&t>(s[A].coordinate+s[A-1].coordinate)/2){o=s[A].index;break}return o},yC=function(t){var r,s=t,a=s.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?ea(ea({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},fje=function(t){var r=t.barSize,s=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,d=l.length;c<d;c++)for(var u=i[l[c]].stackGroups,h=Object.keys(u),g=0,x=h.length;g<x;g++){var b=u[h[g]],y=b.items,v=b.cateAxisId,j=y.filter(function(I){return uh(I.type).indexOf("Bar")>=0});if(j&&j.length){var w=j[0].type.defaultProps,N=w!==void 0?ea(ea({},w),j[0].props):j[0].props,A=N.barSize,C=N[v];o[C]||(o[C]=[]);var M=zn(A)?r:A;o[C].push({item:j[0],stackList:j.slice(1),barSize:zn(M)?void 0:Mo(M,s,0)})}}return o},mje=function(t){var r=t.barGap,s=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var d=Mo(r,a,0,!0),u,h=[];if(o[0].barSize===+o[0].barSize){var g=!1,x=a/c,b=o.reduce(function(A,C){return A+C.barSize||0},0);b+=(c-1)*d,b>=a&&(b-=(c-1)*d,d=0),b>=a&&x>0&&(g=!0,x*=.9,b=c*x);var y=(a-b)/2>>0,v={offset:y-d,size:0};u=o.reduce(function(A,C){var M={item:C.item,position:{offset:v.offset+v.size+d,size:g?x:C.barSize}},I=[].concat(RR(A),[M]);return v=I[I.length-1].position,C.stackList&&C.stackList.length&&C.stackList.forEach(function(F){I.push({item:F,position:v})}),I},h)}else{var j=Mo(s,a,0,!0);a-2*j-(c-1)*d<=0&&(d=0);var w=(a-2*j-(c-1)*d)/c;w>1&&(w>>=0);var N=l===+l?Math.min(w,l):w;u=o.reduce(function(A,C,M){var I=[].concat(RR(A),[{item:C.item,position:{offset:j+(w+d)*M+(w-N)/2,size:N}}]);return C.stackList&&C.stackList.length&&C.stackList.forEach(function(F){I.push({item:F,position:I[I.length-1].position})}),I},h)}return u},pje=function(t,r,s,a){var i=s.children,o=s.width,l=s.margin,c=o-(l.left||0)-(l.right||0),d=bW({children:i,legendWidth:c});if(d){var u=a||{},h=u.width,g=u.height,x=d.align,b=d.verticalAlign,y=d.layout;if((y==="vertical"||y==="horizontal"&&b==="middle")&&x!=="center"&&Lt(t[x]))return ea(ea({},t),{},dx({},x,t[x]+(h||0)));if((y==="horizontal"||y==="vertical"&&x==="center")&&b!=="middle"&&Lt(t[b]))return ea(ea({},t),{},dx({},b,t[b]+(g||0)))}return t},xje=function(t,r,s){return zn(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||s==="x"?r==="xAxis":s==="y"?r==="yAxis":!0},jW=function(t,r,s,a,i){var o=r.props.children,l=Fl(o,my).filter(function(d){return xje(a,i,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return t.reduce(function(d,u){var h=Qa(u,s);if(zn(h))return d;var g=Array.isArray(h)?[hw(h),uw(h)]:[h,h],x=c.reduce(function(b,y){var v=Qa(u,y,0),j=g[0]-Math.abs(Array.isArray(v)?v[0]:v),w=g[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(j,b[0]),Math.max(w,b[1])]},[1/0,-1/0]);return[Math.min(x[0],d[0]),Math.max(x[1],d[1])]},[1/0,-1/0])}return null},gje=function(t,r,s,a,i){var o=r.map(function(l){return jW(t,l,s,i,a)}).filter(function(l){return!zn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},wW=function(t,r,s,a,i){var o=r.map(function(c){var d=c.props.dataKey;return s==="number"&&d&&jW(t,c,d,a)||L0(t,d,s,i)});if(s==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var u=0,h=d.length;u<h;u++)l[d[u]]||(l[d[u]]=!0,c.push(d[u]));return c},[])},_W=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},NW=function(t,r,s,a){if(a)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===s&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(s),l},oh=function(t,r,s){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,d=(r||s)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Oo(l[0]-l[1])*2*d:d,r&&(t.ticks||t.niceTicks)){var u=(t.ticks||t.niceTicks).map(function(h){var g=i?i.indexOf(h):h;return{coordinate:a(g)+d,value:h,offset:d}});return u.filter(function(h){return!oy(h.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(h,g){return{coordinate:a(h)+d,value:h,index:g,offset:d}}):a.ticks&&!s?a.ticks(t.tickCount).map(function(h){return{coordinate:a(h)+d,value:h,offset:d}}):a.domain().map(function(h,g){return{coordinate:a(h)+d,value:i?i[h]:h,index:g,offset:d}})},Tk=new WeakMap,jb=function(t,r){if(typeof r!="function")return t;Tk.has(t)||Tk.set(t,new WeakMap);var s=Tk.get(t);if(s.has(r))return s.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return s.set(r,a),a},kW=function(t,r,s){var a=t.scale,i=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:cv(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:T1(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!s)?{scale:M0(),realScaleType:"point"}:i==="category"?{scale:cv(),realScaleType:"band"}:{scale:T1(),realScaleType:"linear"};if(Km(a)){var c="scale".concat(Xj(a));return{scale:(_R[c]||M0)(),realScaleType:_R[c]?c:"point"}}return Rn(a)?{scale:a}:{scale:M0(),realScaleType:"point"}},$R=1e-4,SW=function(t){var r=t.domain();if(!(!r||r.length<=2)){var s=r.length,a=t.range(),i=Math.min(a[0],a[1])-$R,o=Math.max(a[0],a[1])+$R,l=t(r[0]),c=t(r[s-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[s-1]])}},vje=function(t,r){if(!t)return null;for(var s=0,a=t.length;s<a;s++)if(t[s].item===r)return t[s].position;return null},yje=function(t,r){if(!r||r.length!==2||!Lt(r[0])||!Lt(r[1]))return t;var s=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!Lt(t[0])||t[0]<s)&&(i[0]=s),(!Lt(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<s&&(i[1]=s),i},bje=function(t){var r=t.length;if(!(r<=0))for(var s=0,a=t[0].length;s<a;++s)for(var i=0,o=0,l=0;l<r;++l){var c=oy(t[l][s][1])?t[l][s][0]:t[l][s][1];c>=0?(t[l][s][0]=i,t[l][s][1]=i+c,i=t[l][s][1]):(t[l][s][0]=o,t[l][s][1]=o+c,o=t[l][s][1])}},jje=function(t){var r=t.length;if(!(r<=0))for(var s=0,a=t[0].length;s<a;++s)for(var i=0,o=0;o<r;++o){var l=oy(t[o][s][1])?t[o][s][0]:t[o][s][1];l>=0?(t[o][s][0]=i,t[o][s][1]=i+l,i=t[o][s][1]):(t[o][s][0]=0,t[o][s][1]=0)}},wje={sign:bje,expand:cxe,none:Ox,silhouette:dxe,wiggle:uxe,positive:jje},_je=function(t,r,s){var a=r.map(function(l){return l.props.dataKey}),i=wje[s],o=lxe().keys(a).value(function(l,c){return+Qa(l,c,0)}).order(M4).offset(i);return o(t)},Nje=function(t,r,s,a,i,o){if(!t)return null;var l=o?r.reverse():r,c={},d=l.reduce(function(h,g){var x,b=(x=g.type)!==null&&x!==void 0&&x.defaultProps?ea(ea({},g.type.defaultProps),g.props):g.props,y=b.stackId,v=b.hide;if(v)return h;var j=b[s],w=h[j]||{hasStack:!1,stackGroups:{}};if(ei(y)){var N=w.stackGroups[y]||{numericAxisId:s,cateAxisId:a,items:[]};N.items.push(g),w.hasStack=!0,w.stackGroups[y]=N}else w.stackGroups[Eg("_stackId_")]={numericAxisId:s,cateAxisId:a,items:[g]};return ea(ea({},h),{},dx({},j,w))},c),u={};return Object.keys(d).reduce(function(h,g){var x=d[g];if(x.hasStack){var b={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(y,v){var j=x.stackGroups[v];return ea(ea({},y),{},dx({},v,{numericAxisId:s,cateAxisId:a,items:j.items,stackedData:_je(t,j.items,i)}))},b)}return ea(ea({},h),{},dx({},g,x))},u)},PW=function(t,r){var s=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=s||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=t.domain();if(!d.length)return null;var u=F1e(d,i,l);return t.domain([hw(u),uw(u)]),{niceTicks:u}}if(i&&a==="number"){var h=t.domain(),g=$1e(h,i,l);return{niceTicks:g}}return null};function BR(e){var t=e.axis,r=e.ticks,s=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!zn(a[t.dataKey])){var l=h1(r,"value",a[t.dataKey]);if(l)return l.coordinate+s/2}return r[i]?r[i].coordinate+s/2:null}var c=Qa(a,zn(o)?t.dataKey:o);return zn(c)?null:t.scale(c)}var qR=function(t){var r=t.axis,s=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return s[l]?s[l].coordinate+a:null;var c=Qa(o,r.dataKey,r.domain[l]);return zn(c)?null:r.scale(c)-i/2+a},kje=function(t){var r=t.numericAxis,s=r.scale.domain();if(r.type==="number"){var a=Math.min(s[0],s[1]),i=Math.max(s[0],s[1]);return a<=0&&i>=0?0:i<0?i:a}return s[0]},Sje=function(t,r){var s,a=(s=t.type)!==null&&s!==void 0&&s.defaultProps?ea(ea({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(ei(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},Pje=function(t){return t.reduce(function(r,s){return[hw(s.concat([r[0]]).filter(Lt)),uw(s.concat([r[1]]).filter(Lt))]},[1/0,-1/0])},AW=function(t,r,s){return Object.keys(t).reduce(function(a,i){var o=t[i],l=o.stackedData,c=l.reduce(function(d,u){var h=Pje(u.slice(r,s+1));return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},zR=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,VR=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,sP=function(t,r,s){if(Rn(t))return t(r,s);if(!Array.isArray(t))return r;var a=[];if(Lt(t[0]))a[0]=s?t[0]:Math.min(t[0],r[0]);else if(zR.test(t[0])){var i=+zR.exec(t[0])[1];a[0]=r[0]-i}else Rn(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(Lt(t[1]))a[1]=s?t[1]:Math.max(t[1],r[1]);else if(VR.test(t[1])){var o=+VR.exec(t[1])[1];a[1]=r[1]+o}else Rn(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},R1=function(t,r,s){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!s||a>0)return a}if(t&&r&&r.length>=2){for(var i=KA(r,function(h){return h.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var d=i[l],u=i[l-1];o=Math.min((d.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return s?void 0:0},UR=function(t,r,s){return!t||!t.length||fy(t,Rl(s,"type.defaultProps.domain"))?r:t},CW=function(t,r){var s=t.type.defaultProps?ea(ea({},t.type.defaultProps),t.props):t.props,a=s.dataKey,i=s.name,o=s.unit,l=s.formatter,c=s.tooltipType,d=s.chartType,u=s.hide;return ea(ea({},bn(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:yC(t),value:Qa(r,a),type:c,payload:r,chartType:d,hide:u})};function vv(e){"@babel/helpers - typeof";return vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vv(e)}function HR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Qu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HR(Object(r),!0).forEach(function(s){TW(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function TW(e,t,r){return t=Aje(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Aje(e){var t=Cje(e,"string");return vv(t)=="symbol"?t:t+""}function Cje(e,t){if(vv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(vv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tje(e,t){return Lje(e)||Mje(e,t)||Oje(e,t)||Eje()}function Eje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oje(e,t){if(e){if(typeof e=="string")return WR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WR(e,t)}}function WR(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function Mje(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Lje(e){if(Array.isArray(e))return e}var F1=Math.PI/180,Dje=function(t){return t*180/Math.PI},js=function(t,r,s,a){return{x:t+Math.cos(-F1*a)*s,y:r+Math.sin(-F1*a)*s}},EW=function(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(s.left||0)-(s.right||0)),Math.abs(r-(s.top||0)-(s.bottom||0)))/2},Ije=function(t,r,s,a,i){var o=t.width,l=t.height,c=t.startAngle,d=t.endAngle,u=Mo(t.cx,o,o/2),h=Mo(t.cy,l,l/2),g=EW(o,l,s),x=Mo(t.innerRadius,g,0),b=Mo(t.outerRadius,g,g*.8),y=Object.keys(r);return y.reduce(function(v,j){var w=r[j],N=w.domain,A=w.reversed,C;if(zn(w.range))a==="angleAxis"?C=[c,d]:a==="radiusAxis"&&(C=[x,b]),A&&(C=[C[1],C[0]]);else{C=w.range;var M=C,I=Tje(M,2);c=I[0],d=I[1]}var F=kW(w,i),U=F.realScaleType,W=F.scale;W.domain(N).range(C),SW(W);var D=PW(W,Qu(Qu({},w),{},{realScaleType:U})),R=Qu(Qu(Qu({},w),D),{},{range:C,radius:b,realScaleType:U,scale:W,cx:u,cy:h,innerRadius:x,outerRadius:b,startAngle:c,endAngle:d});return Qu(Qu({},v),{},TW({},j,R))},{})},Rje=function(t,r){var s=t.x,a=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(s-i,2)+Math.pow(a-o,2))},Fje=function(t,r){var s=t.x,a=t.y,i=r.cx,o=r.cy,l=Rje({x:s,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(s-i)/l,d=Math.acos(c);return a>o&&(d=2*Math.PI-d),{radius:l,angle:Dje(d),angleInRadian:d}},$je=function(t){var r=t.startAngle,s=t.endAngle,a=Math.floor(r/360),i=Math.floor(s/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:s-o*360}},Bje=function(t,r){var s=r.startAngle,a=r.endAngle,i=Math.floor(s/360),o=Math.floor(a/360),l=Math.min(i,o);return t+l*360},KR=function(t,r){var s=t.x,a=t.y,i=Fje({x:s,y:a},r),o=i.radius,l=i.angle,c=r.innerRadius,d=r.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var u=$je(r),h=u.startAngle,g=u.endAngle,x=l,b;if(h<=g){for(;x>g;)x-=360;for(;x<h;)x+=360;b=x>=h&&x<=g}else{for(;x>h;)x-=360;for(;x<g;)x+=360;b=x>=g&&x<=h}return b?Qu(Qu({},r),{},{radius:o,angle:Bje(x,r)}):null},OW=function(t){return!P.isValidElement(t)&&!Rn(t)&&typeof t!="boolean"?t.className:""};function yv(e){"@babel/helpers - typeof";return yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yv(e)}var qje=["offset"];function zje(e){return Wje(e)||Hje(e)||Uje(e)||Vje()}function Vje(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uje(e,t){if(e){if(typeof e=="string")return aP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aP(e,t)}}function Hje(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Wje(e){if(Array.isArray(e))return aP(e)}function aP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function Kje(e,t){if(e==null)return{};var r=Gje(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Gje(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function GR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Za(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GR(Object(r),!0).forEach(function(s){Zje(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Zje(e,t,r){return t=Yje(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yje(e){var t=Xje(e,"string");return yv(t)=="symbol"?t:t+""}function Xje(e,t){if(yv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(yv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bv(){return bv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},bv.apply(this,arguments)}var Qje=function(t){var r=t.value,s=t.formatter,a=zn(t.children)?r:t.children;return Rn(s)?s(a):a},Jje=function(t,r){var s=Oo(r-t),a=Math.min(Math.abs(r-t),360);return s*a},ewe=function(t,r,s){var a=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,d=c.cx,u=c.cy,h=c.innerRadius,g=c.outerRadius,x=c.startAngle,b=c.endAngle,y=c.clockWise,v=(h+g)/2,j=Jje(x,b),w=j>=0?1:-1,N,A;a==="insideStart"?(N=x+w*o,A=y):a==="insideEnd"?(N=b-w*o,A=!y):a==="end"&&(N=b+w*o,A=y),A=j<=0?A:!A;var C=js(d,u,v,N),M=js(d,u,v,N+(A?1:-1)*359),I="M".concat(C.x,",").concat(C.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(A?0:1,`,
    `).concat(M.x,",").concat(M.y),F=zn(t.id)?Eg("recharts-radial-line-"):t.id;return Te.createElement("text",bv({},s,{dominantBaseline:"central",className:Hn("recharts-radial-bar-label",l)}),Te.createElement("defs",null,Te.createElement("path",{id:F,d:I})),Te.createElement("textPath",{xlinkHref:"#".concat(F)},r))},twe=function(t){var r=t.viewBox,s=t.offset,a=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,d=i.outerRadius,u=i.startAngle,h=i.endAngle,g=(u+h)/2;if(a==="outside"){var x=js(o,l,d+s,g),b=x.x,y=x.y;return{x:b,y,textAnchor:b>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var v=(c+d)/2,j=js(o,l,v,g),w=j.x,N=j.y;return{x:w,y:N,textAnchor:"middle",verticalAnchor:"middle"}},nwe=function(t){var r=t.viewBox,s=t.parentViewBox,a=t.offset,i=t.position,o=r,l=o.x,c=o.y,d=o.width,u=o.height,h=u>=0?1:-1,g=h*a,x=h>0?"end":"start",b=h>0?"start":"end",y=d>=0?1:-1,v=y*a,j=y>0?"end":"start",w=y>0?"start":"end";if(i==="top"){var N={x:l+d/2,y:c-h*a,textAnchor:"middle",verticalAnchor:x};return Za(Za({},N),s?{height:Math.max(c-s.y,0),width:d}:{})}if(i==="bottom"){var A={x:l+d/2,y:c+u+g,textAnchor:"middle",verticalAnchor:b};return Za(Za({},A),s?{height:Math.max(s.y+s.height-(c+u),0),width:d}:{})}if(i==="left"){var C={x:l-v,y:c+u/2,textAnchor:j,verticalAnchor:"middle"};return Za(Za({},C),s?{width:Math.max(C.x-s.x,0),height:u}:{})}if(i==="right"){var M={x:l+d+v,y:c+u/2,textAnchor:w,verticalAnchor:"middle"};return Za(Za({},M),s?{width:Math.max(s.x+s.width-M.x,0),height:u}:{})}var I=s?{width:d,height:u}:{};return i==="insideLeft"?Za({x:l+v,y:c+u/2,textAnchor:w,verticalAnchor:"middle"},I):i==="insideRight"?Za({x:l+d-v,y:c+u/2,textAnchor:j,verticalAnchor:"middle"},I):i==="insideTop"?Za({x:l+d/2,y:c+g,textAnchor:"middle",verticalAnchor:b},I):i==="insideBottom"?Za({x:l+d/2,y:c+u-g,textAnchor:"middle",verticalAnchor:x},I):i==="insideTopLeft"?Za({x:l+v,y:c+g,textAnchor:w,verticalAnchor:b},I):i==="insideTopRight"?Za({x:l+d-v,y:c+g,textAnchor:j,verticalAnchor:b},I):i==="insideBottomLeft"?Za({x:l+v,y:c+u-g,textAnchor:w,verticalAnchor:x},I):i==="insideBottomRight"?Za({x:l+d-v,y:c+u-g,textAnchor:j,verticalAnchor:x},I):Tg(i)&&(Lt(i.x)||bm(i.x))&&(Lt(i.y)||bm(i.y))?Za({x:l+Mo(i.x,d),y:c+Mo(i.y,u),textAnchor:"end",verticalAnchor:"end"},I):Za({x:l+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},I)},rwe=function(t){return"cx"in t&&Lt(t.cx)};function vi(e){var t=e.offset,r=t===void 0?5:t,s=Kje(e,qje),a=Za({offset:r},s),i=a.viewBox,o=a.position,l=a.value,c=a.children,d=a.content,u=a.className,h=u===void 0?"":u,g=a.textBreakAll;if(!i||zn(l)&&zn(c)&&!P.isValidElement(d)&&!Rn(d))return null;if(P.isValidElement(d))return P.cloneElement(d,a);var x;if(Rn(d)){if(x=P.createElement(d,a),P.isValidElement(x))return x}else x=Qje(a);var b=rwe(i),y=bn(a,!0);if(b&&(o==="insideStart"||o==="insideEnd"||o==="end"))return ewe(a,x,y);var v=b?twe(a):nwe(a);return Te.createElement(Ym,bv({className:Hn("recharts-label",h)},y,v,{breakAll:g}),x)}vi.displayName="Label";var MW=function(t){var r=t.cx,s=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,d=t.innerRadius,u=t.outerRadius,h=t.x,g=t.y,x=t.top,b=t.left,y=t.width,v=t.height,j=t.clockWise,w=t.labelViewBox;if(w)return w;if(Lt(y)&&Lt(v)){if(Lt(h)&&Lt(g))return{x:h,y:g,width:y,height:v};if(Lt(x)&&Lt(b))return{x,y:b,width:y,height:v}}return Lt(h)&&Lt(g)?{x:h,y:g,width:0,height:0}:Lt(r)&&Lt(s)?{cx:r,cy:s,startAngle:i||a||0,endAngle:o||a||0,innerRadius:d||0,outerRadius:u||c||l||0,clockWise:j}:t.viewBox?t.viewBox:{}},swe=function(t,r){return t?t===!0?Te.createElement(vi,{key:"label-implicit",viewBox:r}):ei(t)?Te.createElement(vi,{key:"label-implicit",viewBox:r,value:t}):P.isValidElement(t)?t.type===vi?P.cloneElement(t,{key:"label-implicit",viewBox:r}):Te.createElement(vi,{key:"label-implicit",content:t,viewBox:r}):Rn(t)?Te.createElement(vi,{key:"label-implicit",content:t,viewBox:r}):Tg(t)?Te.createElement(vi,bv({viewBox:r},t,{key:"label-implicit"})):null:null},awe=function(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&s&&!t.label)return null;var a=t.children,i=MW(t),o=Fl(a,vi).map(function(c,d){return P.cloneElement(c,{viewBox:r||i,key:"label-".concat(d)})});if(!s)return o;var l=swe(t.label,r||i);return[l].concat(zje(o))};vi.parseViewBox=MW;vi.renderCallByParent=awe;var Ek,ZR;function iwe(){if(ZR)return Ek;ZR=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return Ek=e,Ek}var owe=iwe();const lwe=Dr(owe);function jv(e){"@babel/helpers - typeof";return jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jv(e)}var cwe=["valueAccessor"],dwe=["data","dataKey","clockWise","id","textBreakAll"];function uwe(e){return pwe(e)||mwe(e)||fwe(e)||hwe()}function hwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fwe(e,t){if(e){if(typeof e=="string")return iP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iP(e,t)}}function mwe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pwe(e){if(Array.isArray(e))return iP(e)}function iP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function $1(){return $1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},$1.apply(this,arguments)}function YR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function XR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YR(Object(r),!0).forEach(function(s){xwe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function xwe(e,t,r){return t=gwe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gwe(e){var t=vwe(e,"string");return jv(t)=="symbol"?t:t+""}function vwe(e,t){if(jv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(jv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QR(e,t){if(e==null)return{};var r=ywe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function ywe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var bwe=function(t){return Array.isArray(t.value)?lwe(t.value):t.value};function mh(e){var t=e.valueAccessor,r=t===void 0?bwe:t,s=QR(e,cwe),a=s.data,i=s.dataKey,o=s.clockWise,l=s.id,c=s.textBreakAll,d=QR(s,dwe);return!a||!a.length?null:Te.createElement(Or,{className:"recharts-label-list"},a.map(function(u,h){var g=zn(i)?r(u,h):Qa(u&&u.payload,i),x=zn(l)?{}:{id:"".concat(l,"-").concat(h)};return Te.createElement(vi,$1({},bn(u,!0),d,x,{parentViewBox:u.parentViewBox,value:g,textBreakAll:c,viewBox:vi.parseViewBox(zn(o)?u:XR(XR({},u),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}mh.displayName="LabelList";function jwe(e,t){return e?e===!0?Te.createElement(mh,{key:"labelList-implicit",data:t}):Te.isValidElement(e)||Rn(e)?Te.createElement(mh,{key:"labelList-implicit",data:t,content:e}):Tg(e)?Te.createElement(mh,$1({data:t},e,{key:"labelList-implicit"})):null:null}function wwe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var s=e.children,a=Fl(s,mh).map(function(o,l){return P.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return a;var i=jwe(e.label,t);return[i].concat(uwe(a))}mh.renderCallByParent=wwe;function wv(e){"@babel/helpers - typeof";return wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wv(e)}function oP(){return oP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},oP.apply(this,arguments)}function JR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function e8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JR(Object(r),!0).forEach(function(s){_we(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function _we(e,t,r){return t=Nwe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nwe(e){var t=kwe(e,"string");return wv(t)=="symbol"?t:t+""}function kwe(e,t){if(wv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(wv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Swe=function(t,r){var s=Oo(r-t),a=Math.min(Math.abs(r-t),359.999);return s*a},wb=function(t){var r=t.cx,s=t.cy,a=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,u=c*(l?1:-1)+a,h=Math.asin(c/u)/F1,g=d?i:i+o*h,x=js(r,s,u,g),b=js(r,s,a,g),y=d?i-o*h:i,v=js(r,s,u*Math.cos(h*F1),y);return{center:x,circleTangency:b,lineTangency:v,theta:h}},LW=function(t){var r=t.cx,s=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=Swe(o,l),d=o+c,u=js(r,s,i,o),h=js(r,s,i,d),g="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(a>0){var x=js(r,s,a,o),b=js(r,s,a,d);g+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(x.x,",").concat(x.y," Z")}else g+="L ".concat(r,",").concat(s," Z");return g},Pwe=function(t){var r=t.cx,s=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,u=t.endAngle,h=Oo(u-d),g=wb({cx:r,cy:s,radius:i,angle:d,sign:h,cornerRadius:o,cornerIsExternal:c}),x=g.circleTangency,b=g.lineTangency,y=g.theta,v=wb({cx:r,cy:s,radius:i,angle:u,sign:-h,cornerRadius:o,cornerIsExternal:c}),j=v.circleTangency,w=v.lineTangency,N=v.theta,A=c?Math.abs(d-u):Math.abs(d-u)-y-N;if(A<0)return l?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):LW({cx:r,cy:s,innerRadius:a,outerRadius:i,startAngle:d,endAngle:u});var C="M ".concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(A>180),",").concat(+(h<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(w.x,",").concat(w.y,`
  `);if(a>0){var M=wb({cx:r,cy:s,radius:a,angle:d,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),I=M.circleTangency,F=M.lineTangency,U=M.theta,W=wb({cx:r,cy:s,radius:a,angle:u,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),D=W.circleTangency,R=W.lineTangency,z=W.theta,Z=c?Math.abs(d-u):Math.abs(d-u)-U-z;if(Z<0&&o===0)return"".concat(C,"L").concat(r,",").concat(s,"Z");C+="L".concat(R.x,",").concat(R.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(Z>180),",").concat(+(h>0),",").concat(I.x,",").concat(I.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(F.x,",").concat(F.y,"Z")}else C+="L".concat(r,",").concat(s,"Z");return C},Awe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},DW=function(t){var r=e8(e8({},Awe),t),s=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,d=r.cornerIsExternal,u=r.startAngle,h=r.endAngle,g=r.className;if(o<i||u===h)return null;var x=Hn("recharts-sector",g),b=o-i,y=Mo(l,b,0,!0),v;return y>0&&Math.abs(u-h)<360?v=Pwe({cx:s,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(y,b/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:h}):v=LW({cx:s,cy:a,innerRadius:i,outerRadius:o,startAngle:u,endAngle:h}),Te.createElement("path",oP({},bn(r,!0),{className:x,d:v,role:"img"}))};function _v(e){"@babel/helpers - typeof";return _v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_v(e)}function lP(){return lP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},lP.apply(this,arguments)}function t8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function n8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t8(Object(r),!0).forEach(function(s){Cwe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t8(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Cwe(e,t,r){return t=Twe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Twe(e){var t=Ewe(e,"string");return _v(t)=="symbol"?t:t+""}function Ewe(e,t){if(_v(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(_v(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var r8={curveBasisClosed:Xpe,curveBasisOpen:Qpe,curveBasis:Ype,curveBumpX:Ipe,curveBumpY:Rpe,curveLinearClosed:Jpe,curveLinear:Jj,curveMonotoneX:exe,curveMonotoneY:txe,curveNatural:nxe,curveStep:rxe,curveStepAfter:axe,curveStepBefore:sxe},_b=function(t){return t.x===+t.x&&t.y===+t.y},u0=function(t){return t.x},h0=function(t){return t.y},Owe=function(t,r){if(Rn(t))return t;var s="curve".concat(Xj(t));return(s==="curveMonotone"||s==="curveBump")&&r?r8["".concat(s).concat(r==="vertical"?"Y":"X")]:r8[s]||Jj},Mwe=function(t){var r=t.type,s=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,d=c===void 0?!1:c,u=Owe(s,l),h=d?i.filter(function(y){return _b(y)}):i,g;if(Array.isArray(o)){var x=d?o.filter(function(y){return _b(y)}):o,b=h.map(function(y,v){return n8(n8({},y),{},{base:x[v]})});return l==="vertical"?g=mb().y(h0).x1(u0).x0(function(y){return y.base.x}):g=mb().x(u0).y1(h0).y0(function(y){return y.base.y}),g.defined(_b).curve(u),g(b)}return l==="vertical"&&Lt(o)?g=mb().y(h0).x1(u0).x0(o):Lt(o)?g=mb().x(u0).y1(h0).y0(o):g=MU().x(u0).y(h0),g.defined(_b).curve(u),g(h)},B1=function(t){var r=t.className,s=t.points,a=t.path,i=t.pathRef;if((!s||!s.length)&&!a)return null;var o=s&&s.length?Mwe(t):a;return P.createElement("path",lP({},bn(t,!1),f1(t),{className:Hn("recharts-curve",r),d:o,ref:i}))},Ok={exports:{}},Mk,s8;function Lwe(){if(s8)return Mk;s8=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Mk=e,Mk}var Lk,a8;function Dwe(){if(a8)return Lk;a8=1;var e=Lwe();function t(){}function r(){}return r.resetWarningCache=t,Lk=function(){function s(o,l,c,d,u,h){if(h!==e){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}s.isRequired=s;function a(){return s}var i={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:a,element:s,elementType:s,instanceOf:a,node:s,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},Lk}var i8;function Iwe(){return i8||(i8=1,Ok.exports=Dwe()()),Ok.exports}var Rwe=Iwe();const Hr=Dr(Rwe);var Fwe=Object.getOwnPropertyNames,$we=Object.getOwnPropertySymbols,Bwe=Object.prototype.hasOwnProperty;function o8(e,t){return function(s,a,i){return e(s,a,i)&&t(s,a,i)}}function Nb(e){return function(r,s,a){if(!r||!s||typeof r!="object"||typeof s!="object")return e(r,s,a);var i=a.cache,o=i.get(r),l=i.get(s);if(o&&l)return o===s&&l===r;i.set(r,s),i.set(s,r);var c=e(r,s,a);return i.delete(r),i.delete(s),c}}function l8(e){return Fwe(e).concat($we(e))}var qwe=Object.hasOwn||(function(e,t){return Bwe.call(e,t)});function up(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var zwe="__v",Vwe="__o",Uwe="_owner",c8=Object.getOwnPropertyDescriptor,d8=Object.keys;function Hwe(e,t,r){var s=e.length;if(t.length!==s)return!1;for(;s-- >0;)if(!r.equals(e[s],t[s],s,s,e,t,r))return!1;return!0}function Wwe(e,t){return up(e.getTime(),t.getTime())}function Kwe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Gwe(e,t){return e===t}function u8(e,t,r){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var a=new Array(s),i=e.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var d=t.entries(),u=!1,h=0;(l=d.next())&&!l.done;){if(a[h]){h++;continue}var g=o.value,x=l.value;if(r.equals(g[0],x[0],c,h,e,t,r)&&r.equals(g[1],x[1],g[0],x[0],e,t,r)){u=a[h]=!0;break}h++}if(!u)return!1;c++}return!0}var Zwe=up;function Ywe(e,t,r){var s=d8(e),a=s.length;if(d8(t).length!==a)return!1;for(;a-- >0;)if(!IW(e,t,r,s[a]))return!1;return!0}function f0(e,t,r){var s=l8(e),a=s.length;if(l8(t).length!==a)return!1;for(var i,o,l;a-- >0;)if(i=s[a],!IW(e,t,r,i)||(o=c8(e,i),l=c8(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function Xwe(e,t){return up(e.valueOf(),t.valueOf())}function Qwe(e,t){return e.source===t.source&&e.flags===t.flags}function h8(e,t,r){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var a=new Array(s),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var c=t.values(),d=!1,u=0;(l=c.next())&&!l.done;){if(!a[u]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){d=a[u]=!0;break}u++}if(!d)return!1}return!0}function Jwe(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function e2e(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function IW(e,t,r,s){return(s===Uwe||s===Vwe||s===zwe)&&(e.$$typeof||t.$$typeof)?!0:qwe(t,s)&&r.equals(e[s],t[s],s,s,e,t,r)}var t2e="[object Arguments]",n2e="[object Boolean]",r2e="[object Date]",s2e="[object Error]",a2e="[object Map]",i2e="[object Number]",o2e="[object Object]",l2e="[object RegExp]",c2e="[object Set]",d2e="[object String]",u2e="[object URL]",h2e=Array.isArray,f8=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,m8=Object.assign,f2e=Object.prototype.toString.call.bind(Object.prototype.toString);function m2e(e){var t=e.areArraysEqual,r=e.areDatesEqual,s=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,d=e.areRegExpsEqual,u=e.areSetsEqual,h=e.areTypedArraysEqual,g=e.areUrlsEqual;return function(b,y,v){if(b===y)return!0;if(b==null||y==null)return!1;var j=typeof b;if(j!==typeof y)return!1;if(j!=="object")return j==="number"?o(b,y,v):j==="function"?a(b,y,v):!1;var w=b.constructor;if(w!==y.constructor)return!1;if(w===Object)return l(b,y,v);if(h2e(b))return t(b,y,v);if(f8!=null&&f8(b))return h(b,y,v);if(w===Date)return r(b,y,v);if(w===RegExp)return d(b,y,v);if(w===Map)return i(b,y,v);if(w===Set)return u(b,y,v);var N=f2e(b);return N===r2e?r(b,y,v):N===l2e?d(b,y,v):N===a2e?i(b,y,v):N===c2e?u(b,y,v):N===o2e?typeof b.then!="function"&&typeof y.then!="function"&&l(b,y,v):N===u2e?g(b,y,v):N===s2e?s(b,y,v):N===t2e?l(b,y,v):N===n2e||N===i2e||N===d2e?c(b,y,v):!1}}function p2e(e){var t=e.circular,r=e.createCustomConfig,s=e.strict,a={areArraysEqual:s?f0:Hwe,areDatesEqual:Wwe,areErrorsEqual:Kwe,areFunctionsEqual:Gwe,areMapsEqual:s?o8(u8,f0):u8,areNumbersEqual:Zwe,areObjectsEqual:s?f0:Ywe,arePrimitiveWrappersEqual:Xwe,areRegExpsEqual:Qwe,areSetsEqual:s?o8(h8,f0):h8,areTypedArraysEqual:s?f0:Jwe,areUrlsEqual:e2e};if(r&&(a=m8({},a,r(a))),t){var i=Nb(a.areArraysEqual),o=Nb(a.areMapsEqual),l=Nb(a.areObjectsEqual),c=Nb(a.areSetsEqual);a=m8({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function x2e(e){return function(t,r,s,a,i,o,l){return e(t,r,l)}}function g2e(e){var t=e.circular,r=e.comparator,s=e.createState,a=e.equals,i=e.strict;if(s)return function(c,d){var u=s(),h=u.cache,g=h===void 0?t?new WeakMap:void 0:h,x=u.meta;return r(c,d,{cache:g,equals:a,meta:x,strict:i})};if(t)return function(c,d){return r(c,d,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,d){return r(c,d,o)}}var v2e=zf();zf({strict:!0});zf({circular:!0});zf({circular:!0,strict:!0});zf({createInternalComparator:function(){return up}});zf({strict:!0,createInternalComparator:function(){return up}});zf({circular:!0,createInternalComparator:function(){return up}});zf({circular:!0,createInternalComparator:function(){return up},strict:!0});function zf(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,s=e.createInternalComparator,a=e.createState,i=e.strict,o=i===void 0?!1:i,l=p2e(e),c=m2e(l),d=s?s(c):x2e(c);return g2e({circular:r,comparator:c,createState:a,equals:d,strict:o})}function y2e(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function p8(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,s=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):y2e(a)};requestAnimationFrame(s)}function cP(e){"@babel/helpers - typeof";return cP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cP(e)}function b2e(e){return N2e(e)||_2e(e)||w2e(e)||j2e()}function j2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w2e(e,t){if(e){if(typeof e=="string")return x8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x8(e,t)}}function x8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function _2e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function N2e(e){if(Array.isArray(e))return e}function k2e(){var e={},t=function(){return null},r=!1,s=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=b2e(o),c=l[0],d=l.slice(1);if(typeof c=="number"){p8(a.bind(null,d),c);return}a(c),p8(a.bind(null,d));return}cP(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,s(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Nv(e){"@babel/helpers - typeof";return Nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nv(e)}function g8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function v8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g8(Object(r),!0).forEach(function(s){RW(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g8(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function RW(e,t,r){return t=S2e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S2e(e){var t=P2e(e,"string");return Nv(t)==="symbol"?t:String(t)}function P2e(e,t){if(Nv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Nv(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var A2e=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(s,a){return s.filter(function(i){return a.includes(i)})})},C2e=function(t){return t},T2e=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},D0=function(t,r){return Object.keys(r).reduce(function(s,a){return v8(v8({},s),{},RW({},a,t(a,r[a])))},{})},y8=function(t,r,s){return t.map(function(a){return"".concat(T2e(a)," ").concat(r,"ms ").concat(s)}).join(",")};function E2e(e,t){return L2e(e)||M2e(e,t)||FW(e,t)||O2e()}function O2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M2e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function L2e(e){if(Array.isArray(e))return e}function D2e(e){return F2e(e)||R2e(e)||FW(e)||I2e()}function I2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FW(e,t){if(e){if(typeof e=="string")return dP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dP(e,t)}}function R2e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function F2e(e){if(Array.isArray(e))return dP(e)}function dP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var q1=1e-4,$W=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},BW=function(t,r){return t.map(function(s,a){return s*Math.pow(r,a)}).reduce(function(s,a){return s+a})},b8=function(t,r){return function(s){var a=$W(t,r);return BW(a,s)}},$2e=function(t,r){return function(s){var a=$W(t,r),i=[].concat(D2e(a.map(function(o,l){return o*l}).slice(1)),[0]);return BW(i,s)}},j8=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),u=E2e(d,4);a=u[0],i=u[1],o=u[2],l=u[3]}}}var h=b8(a,o),g=b8(i,l),x=$2e(a,o),b=function(j){return j>1?1:j<0?0:j},y=function(j){for(var w=j>1?1:j,N=w,A=0;A<8;++A){var C=h(N)-w,M=x(N);if(Math.abs(C-w)<q1||M<q1)return g(N);N=b(N-C/M)}return g(N)};return y.isStepper=!1,y},B2e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,s=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(u,h,g){var x=-(u-h)*s,b=g*i,y=g+(x-b)*l/1e3,v=g*l/1e3+u;return Math.abs(v-h)<q1&&Math.abs(y)<q1?[h,0]:[v,y]};return c.isStepper=!0,c.dt=l,c},q2e=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return j8(a);case"spring":return B2e();default:if(a.split("(")[0]==="cubic-bezier")return j8(a)}return typeof a=="function"?a:null};function kv(e){"@babel/helpers - typeof";return kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kv(e)}function w8(e){return U2e(e)||V2e(e)||qW(e)||z2e()}function z2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V2e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function U2e(e){if(Array.isArray(e))return hP(e)}function _8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Di(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_8(Object(r),!0).forEach(function(s){uP(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_8(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function uP(e,t,r){return t=H2e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H2e(e){var t=W2e(e,"string");return kv(t)==="symbol"?t:String(t)}function W2e(e,t){if(kv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(kv(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K2e(e,t){return Y2e(e)||Z2e(e,t)||qW(e,t)||G2e()}function G2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qW(e,t){if(e){if(typeof e=="string")return hP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hP(e,t)}}function hP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function Z2e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Y2e(e){if(Array.isArray(e))return e}var z1=function(t,r,s){return t+(r-t)*s},fP=function(t){var r=t.from,s=t.to;return r!==s},X2e=function e(t,r,s){var a=D0(function(i,o){if(fP(o)){var l=t(o.from,o.to,o.velocity),c=K2e(l,2),d=c[0],u=c[1];return Di(Di({},o),{},{from:d,velocity:u})}return o},r);return s<1?D0(function(i,o){return fP(o)?Di(Di({},o),{},{velocity:z1(o.velocity,a[i].velocity,s),from:z1(o.from,a[i].from,s)}):o},r):e(t,a,s-1)};const Q2e=(function(e,t,r,s,a){var i=A2e(e,t),o=i.reduce(function(v,j){return Di(Di({},v),{},uP({},j,[e[j],t[j]]))},{}),l=i.reduce(function(v,j){return Di(Di({},v),{},uP({},j,{from:e[j],velocity:0,to:t[j]}))},{}),c=-1,d,u,h=function(){return null},g=function(){return D0(function(j,w){return w.from},l)},x=function(){return!Object.values(l).filter(fP).length},b=function(j){d||(d=j);var w=j-d,N=w/r.dt;l=X2e(r,l,N),a(Di(Di(Di({},e),t),g())),d=j,x()||(c=requestAnimationFrame(h))},y=function(j){u||(u=j);var w=(j-u)/s,N=D0(function(C,M){return z1.apply(void 0,w8(M).concat([r(w)]))},o);if(a(Di(Di(Di({},e),t),N)),w<1)c=requestAnimationFrame(h);else{var A=D0(function(C,M){return z1.apply(void 0,w8(M).concat([r(1)]))},o);a(Di(Di(Di({},e),t),A))}};return h=r.isStepper?b:y,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}});function qx(e){"@babel/helpers - typeof";return qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qx(e)}var J2e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function e_e(e,t){if(e==null)return{};var r=t_e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function t_e(e,t){if(e==null)return{};var r={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Dk(e){return a_e(e)||s_e(e)||r_e(e)||n_e()}function n_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r_e(e,t){if(e){if(typeof e=="string")return mP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mP(e,t)}}function s_e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function a_e(e){if(Array.isArray(e))return mP(e)}function mP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function N8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function id(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N8(Object(r),!0).forEach(function(s){N0(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N8(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function N0(e,t,r){return t=zW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o_e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,zW(s.key),s)}}function l_e(e,t,r){return t&&o_e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function zW(e){var t=c_e(e,"string");return qx(t)==="symbol"?t:String(t)}function c_e(e,t){if(qx(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(qx(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function d_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pP(e,t)}function pP(e,t){return pP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},pP(e,t)}function u_e(e){var t=h_e();return function(){var s=V1(e),a;if(t){var i=V1(this).constructor;a=Reflect.construct(s,arguments,i)}else a=s.apply(this,arguments);return xP(this,a)}}function xP(e,t){if(t&&(qx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gP(e)}function gP(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h_e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function V1(e){return V1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},V1(e)}var Nu=(function(e){d_e(r,e);var t=u_e(r);function r(s,a){var i;i_e(this,r),i=t.call(this,s,a);var o=i.props,l=o.isActive,c=o.attributeName,d=o.from,u=o.to,h=o.steps,g=o.children,x=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(gP(i)),i.changeStyle=i.changeStyle.bind(gP(i)),!l||x<=0)return i.state={style:{}},typeof g=="function"&&(i.state={style:u}),xP(i);if(h&&h.length)i.state={style:h[0].style};else if(d){if(typeof g=="function")return i.state={style:d},xP(i);i.state={style:c?N0({},c,d):d}}else i.state={style:{}};return i}return l_e(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,u=i.to,h=i.from,g=this.state.style;if(l){if(!o){var x={style:c?N0({},c,u):u};this.state&&g&&(c&&g[c]!==u||!c&&g!==u)&&this.setState(x);return}if(!(v2e(a.to,u)&&a.canBegin&&a.isActive)){var b=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=b||d?h:a.to;if(this.state&&g){var v={style:c?N0({},c,y):y};(c&&g[c]!==y||!c&&g!==y)&&this.setState(v)}this.runAnimation(id(id({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,d=a.easing,u=a.begin,h=a.onAnimationEnd,g=a.onAnimationStart,x=Q2e(o,l,q2e(d),c,this.changeStyle),b=function(){i.stopJSAnimation=x()};this.manager.start([g,u,b,c,h])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,d=o[0],u=d.style,h=d.duration,g=h===void 0?0:h,x=function(y,v,j){if(j===0)return y;var w=v.duration,N=v.easing,A=N===void 0?"ease":N,C=v.style,M=v.properties,I=v.onAnimationEnd,F=j>0?o[j-1]:v,U=M||Object.keys(C);if(typeof A=="function"||A==="spring")return[].concat(Dk(y),[i.runJSAnimation.bind(i,{from:F.style,to:C,duration:w,easing:A}),w]);var W=y8(U,w,A),D=id(id(id({},F.style),C),{},{transition:W});return[].concat(Dk(y),[D,w,I]).filter(C2e)};return this.manager.start([c].concat(Dk(o.reduce(x,[u,Math.max(g,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=k2e());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,d=a.easing,u=a.onAnimationStart,h=a.onAnimationEnd,g=a.steps,x=a.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof d=="function"||typeof x=="function"||d==="spring"){this.runJSAnimation(a);return}if(g.length>1){this.runStepAnimation(a);return}var y=l?N0({},l,c):c,v=y8(Object.keys(y),o,d);b.start([u,i,id(id({},y),{},{transition:v}),o,h])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=e_e(a,J2e),d=P.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!l||d===0||o<=0)return i;var h=function(x){var b=x.props,y=b.style,v=y===void 0?{}:y,j=b.className,w=P.cloneElement(x,id(id({},c),{},{style:id(id({},v),u),className:j}));return w};return d===1?h(P.Children.only(i)):Te.createElement("div",null,P.Children.map(i,function(g){return h(g)}))}}]),r})(P.PureComponent);Nu.displayName="Animate";Nu.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Nu.propTypes={from:Hr.oneOfType([Hr.object,Hr.string]),to:Hr.oneOfType([Hr.object,Hr.string]),attributeName:Hr.string,duration:Hr.number,begin:Hr.number,easing:Hr.oneOfType([Hr.string,Hr.func]),steps:Hr.arrayOf(Hr.shape({duration:Hr.number.isRequired,style:Hr.object.isRequired,easing:Hr.oneOfType([Hr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Hr.func]),properties:Hr.arrayOf("string"),onAnimationEnd:Hr.func})),children:Hr.oneOfType([Hr.node,Hr.func]),isActive:Hr.bool,canBegin:Hr.bool,onAnimationEnd:Hr.func,shouldReAnimate:Hr.bool,onAnimationStart:Hr.func,onAnimationReStart:Hr.func};function Sv(e){"@babel/helpers - typeof";return Sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sv(e)}function U1(){return U1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},U1.apply(this,arguments)}function f_e(e,t){return g_e(e)||x_e(e,t)||p_e(e,t)||m_e()}function m_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p_e(e,t){if(e){if(typeof e=="string")return k8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k8(e,t)}}function k8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function x_e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function g_e(e){if(Array.isArray(e))return e}function S8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function P8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S8(Object(r),!0).forEach(function(s){v_e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S8(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function v_e(e,t,r){return t=y_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y_e(e){var t=b_e(e,"string");return Sv(t)=="symbol"?t:t+""}function b_e(e,t){if(Sv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Sv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var A8=function(t,r,s,a,i){var o=Math.min(Math.abs(s)/2,Math.abs(a)/2),l=a>=0?1:-1,c=s>=0?1:-1,d=a>=0&&s>=0||a<0&&s<0?1:0,u;if(o>0&&i instanceof Array){for(var h=[0,0,0,0],g=0,x=4;g<x;g++)h[g]=i[g]>o?o:i[g];u="M".concat(t,",").concat(r+l*h[0]),h[0]>0&&(u+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(d,",").concat(t+c*h[0],",").concat(r)),u+="L ".concat(t+s-c*h[1],",").concat(r),h[1]>0&&(u+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(d,`,
        `).concat(t+s,",").concat(r+l*h[1])),u+="L ".concat(t+s,",").concat(r+a-l*h[2]),h[2]>0&&(u+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(d,`,
        `).concat(t+s-c*h[2],",").concat(r+a)),u+="L ".concat(t+c*h[3],",").concat(r+a),h[3]>0&&(u+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(r+a-l*h[3])),u+="Z"}else if(o>0&&i===+i&&i>0){var b=Math.min(o,i);u="M ".concat(t,",").concat(r+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(t+c*b,",").concat(r,`
            L `).concat(t+s-c*b,",").concat(r,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(t+s,",").concat(r+l*b,`
            L `).concat(t+s,",").concat(r+a-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(t+s-c*b,",").concat(r+a,`
            L `).concat(t+c*b,",").concat(r+a,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(t,",").concat(r+a-l*b," Z")}else u="M ".concat(t,",").concat(r," h ").concat(s," v ").concat(a," h ").concat(-s," Z");return u},j_e=function(t,r){if(!t||!r)return!1;var s=t.x,a=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(i,i+l),u=Math.max(i,i+l),h=Math.min(o,o+c),g=Math.max(o,o+c);return s>=d&&s<=u&&a>=h&&a<=g}return!1},w_e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},bC=function(t){var r=P8(P8({},w_e),t),s=P.useRef(),a=P.useState(-1),i=f_e(a,2),o=i[0],l=i[1];P.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var A=s.current.getTotalLength();A&&l(A)}catch{}},[]);var c=r.x,d=r.y,u=r.width,h=r.height,g=r.radius,x=r.className,b=r.animationEasing,y=r.animationDuration,v=r.animationBegin,j=r.isAnimationActive,w=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||h!==+h||u===0||h===0)return null;var N=Hn("recharts-rectangle",x);return w?Te.createElement(Nu,{canBegin:o>0,from:{width:u,height:h,x:c,y:d},to:{width:u,height:h,x:c,y:d},duration:y,animationEasing:b,isActive:w},function(A){var C=A.width,M=A.height,I=A.x,F=A.y;return Te.createElement(Nu,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:y,isActive:j,easing:b},Te.createElement("path",U1({},bn(r,!0),{className:N,d:A8(I,F,C,M,g),ref:s})))}):Te.createElement("path",U1({},bn(r,!0),{className:N,d:A8(c,d,u,h,g)}))},__e=["points","className","baseLinePoints","connectNulls"];function Yp(){return Yp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Yp.apply(this,arguments)}function N_e(e,t){if(e==null)return{};var r=k_e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function k_e(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function C8(e){return C_e(e)||A_e(e)||P_e(e)||S_e()}function S_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P_e(e,t){if(e){if(typeof e=="string")return vP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vP(e,t)}}function A_e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function C_e(e){if(Array.isArray(e))return vP(e)}function vP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var T8=function(t){return t&&t.x===+t.x&&t.y===+t.y},T_e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(s){T8(s)?r[r.length-1].push(s):r[r.length-1].length>0&&r.push([])}),T8(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},I0=function(t,r){var s=T_e(t);r&&(s=[s.reduce(function(i,o){return[].concat(C8(i),C8(o))},[])]);var a=s.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return s.length===1?"".concat(a,"Z"):a},E_e=function(t,r,s){var a=I0(t,s);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(I0(r.reverse(),s).slice(1))},O_e=function(t){var r=t.points,s=t.className,a=t.baseLinePoints,i=t.connectNulls,o=N_e(t,__e);if(!r||!r.length)return null;var l=Hn("recharts-polygon",s);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",d=E_e(r,a,i);return Te.createElement("g",{className:l},Te.createElement("path",Yp({},bn(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",stroke:"none",d})),c?Te.createElement("path",Yp({},bn(o,!0),{fill:"none",d:I0(r,i)})):null,c?Te.createElement("path",Yp({},bn(o,!0),{fill:"none",d:I0(a,i)})):null)}var u=I0(r,i);return Te.createElement("path",Yp({},bn(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",className:l,d:u}))};function yP(){return yP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},yP.apply(this,arguments)}var pw=function(t){var r=t.cx,s=t.cy,a=t.r,i=t.className,o=Hn("recharts-dot",i);return r===+r&&s===+s&&a===+a?P.createElement("circle",yP({},bn(t,!1),f1(t),{className:o,cx:r,cy:s,r:a})):null};function Pv(e){"@babel/helpers - typeof";return Pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pv(e)}var M_e=["x","y","top","left","width","height","className"];function bP(){return bP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},bP.apply(this,arguments)}function E8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function L_e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E8(Object(r),!0).forEach(function(s){D_e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E8(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function D_e(e,t,r){return t=I_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I_e(e){var t=R_e(e,"string");return Pv(t)=="symbol"?t:t+""}function R_e(e,t){if(Pv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Pv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function F_e(e,t){if(e==null)return{};var r=$_e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function $_e(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var B_e=function(t,r,s,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(s)},q_e=function(t){var r=t.x,s=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,d=c===void 0?0:c,u=t.width,h=u===void 0?0:u,g=t.height,x=g===void 0?0:g,b=t.className,y=F_e(t,M_e),v=L_e({x:s,y:i,top:l,left:d,width:h,height:x},y);return!Lt(s)||!Lt(i)||!Lt(h)||!Lt(x)||!Lt(l)||!Lt(d)?null:Te.createElement("path",bP({},bn(v,!0),{className:Hn("recharts-cross",b),d:B_e(s,i,h,x,l,d)}))},Ik,O8;function z_e(){if(O8)return Ik;O8=1;var e=dw(),t=rW(),r=Cu();function s(a,i){return a&&a.length?e(a,r(i,2),t):void 0}return Ik=s,Ik}var V_e=z_e();const U_e=Dr(V_e);var Rk,M8;function H_e(){if(M8)return Rk;M8=1;var e=dw(),t=Cu(),r=sW();function s(a,i){return a&&a.length?e(a,t(i,2),r):void 0}return Rk=s,Rk}var W_e=H_e();const K_e=Dr(W_e);var G_e=["cx","cy","angle","ticks","axisLine"],Z_e=["ticks","tick","angle","tickFormatter","stroke"];function zx(e){"@babel/helpers - typeof";return zx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zx(e)}function R0(){return R0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},R0.apply(this,arguments)}function L8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function om(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L8(Object(r),!0).forEach(function(s){xw(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L8(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function D8(e,t){if(e==null)return{};var r=Y_e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Y_e(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function X_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I8(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,UW(s.key),s)}}function Q_e(e,t,r){return t&&I8(e.prototype,t),r&&I8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function J_e(e,t,r){return t=H1(t),eNe(e,VW()?Reflect.construct(t,r||[],H1(e).constructor):t.apply(e,r))}function eNe(e,t){if(t&&(zx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tNe(e)}function tNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VW=function(){return!!e})()}function H1(e){return H1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},H1(e)}function nNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jP(e,t)}function jP(e,t){return jP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},jP(e,t)}function xw(e,t,r){return t=UW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UW(e){var t=rNe(e,"string");return zx(t)=="symbol"?t:t+""}function rNe(e,t){if(zx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(zx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gw=(function(e){function t(){return X_e(this,t),J_e(this,t,arguments)}return nNe(t,e),Q_e(t,[{key:"getTickValueCoord",value:function(s){var a=s.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return js(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var s=this.props.orientation,a;switch(s){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var s=this.props,a=s.cx,i=s.cy,o=s.angle,l=s.ticks,c=U_e(l,function(u){return u.coordinate||0}),d=K_e(l,function(u){return u.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.cx,i=s.cy,o=s.angle,l=s.ticks,c=s.axisLine,d=D8(s,G_e),u=l.reduce(function(b,y){return[Math.min(b[0],y.coordinate),Math.max(b[1],y.coordinate)]},[1/0,-1/0]),h=js(a,i,u[0],o),g=js(a,i,u[1],o),x=om(om(om({},bn(d,!1)),{},{fill:"none"},bn(c,!1)),{},{x1:h.x,y1:h.y,x2:g.x,y2:g.y});return Te.createElement("line",R0({className:"recharts-polar-radius-axis-line"},x))}},{key:"renderTicks",value:function(){var s=this,a=this.props,i=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,d=a.stroke,u=D8(a,Z_e),h=this.getTickTextAnchor(),g=bn(u,!1),x=bn(o,!1),b=i.map(function(y,v){var j=s.getTickValueCoord(y),w=om(om(om(om({textAnchor:h,transform:"rotate(".concat(90-l,", ").concat(j.x,", ").concat(j.y,")")},g),{},{stroke:"none",fill:d},x),{},{index:v},j),{},{payload:y});return Te.createElement(Or,R0({className:Hn("recharts-polar-radius-axis-tick",OW(o)),key:"tick-".concat(y.coordinate)},Gm(s.props,y,v)),t.renderTickItem(o,w,c?c(y.value,v):y.value))});return Te.createElement(Or,{className:"recharts-polar-radius-axis-ticks"},b)}},{key:"render",value:function(){var s=this.props,a=s.ticks,i=s.axisLine,o=s.tick;return!a||!a.length?null:Te.createElement(Or,{className:Hn("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),vi.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(s,a,i){var o;return Te.isValidElement(s)?o=Te.cloneElement(s,a):Rn(s)?o=s(a):o=Te.createElement(Ym,R0({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])})(P.PureComponent);xw(gw,"displayName","PolarRadiusAxis");xw(gw,"axisType","radiusAxis");xw(gw,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Vx(e){"@babel/helpers - typeof";return Vx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vx(e)}function xm(){return xm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},xm.apply(this,arguments)}function R8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function lm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R8(Object(r),!0).forEach(function(s){vw(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R8(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function sNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F8(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,WW(s.key),s)}}function aNe(e,t,r){return t&&F8(e.prototype,t),r&&F8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function iNe(e,t,r){return t=W1(t),oNe(e,HW()?Reflect.construct(t,r||[],W1(e).constructor):t.apply(e,r))}function oNe(e,t){if(t&&(Vx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lNe(e)}function lNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HW=function(){return!!e})()}function W1(e){return W1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},W1(e)}function cNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wP(e,t)}function wP(e,t){return wP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},wP(e,t)}function vw(e,t,r){return t=WW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WW(e){var t=dNe(e,"string");return Vx(t)=="symbol"?t:t+""}function dNe(e,t){if(Vx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Vx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uNe=Math.PI/180,$8=1e-5,yw=(function(e){function t(){return sNe(this,t),iNe(this,t,arguments)}return cNe(t,e),aNe(t,[{key:"getTickLineCoord",value:function(s){var a=this.props,i=a.cx,o=a.cy,l=a.radius,c=a.orientation,d=a.tickSize,u=d||8,h=js(i,o,l,s.coordinate),g=js(i,o,l+(c==="inner"?-1:1)*u,s.coordinate);return{x1:h.x,y1:h.y,x2:g.x,y2:g.y}}},{key:"getTickTextAnchor",value:function(s){var a=this.props.orientation,i=Math.cos(-s.coordinate*uNe),o;return i>$8?o=a==="outer"?"start":"end":i<-$8?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.cx,i=s.cy,o=s.radius,l=s.axisLine,c=s.axisLineType,d=lm(lm({},bn(this.props,!1)),{},{fill:"none"},bn(l,!1));if(c==="circle")return Te.createElement(pw,xm({className:"recharts-polar-angle-axis-line"},d,{cx:a,cy:i,r:o}));var u=this.props.ticks,h=u.map(function(g){return js(a,i,o,g.coordinate)});return Te.createElement(O_e,xm({className:"recharts-polar-angle-axis-line"},d,{points:h}))}},{key:"renderTicks",value:function(){var s=this,a=this.props,i=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,d=a.stroke,u=bn(this.props,!1),h=bn(o,!1),g=lm(lm({},u),{},{fill:"none"},bn(l,!1)),x=i.map(function(b,y){var v=s.getTickLineCoord(b),j=s.getTickTextAnchor(b),w=lm(lm(lm({textAnchor:j},u),{},{stroke:"none",fill:d},h),{},{index:y,payload:b,x:v.x2,y:v.y2});return Te.createElement(Or,xm({className:Hn("recharts-polar-angle-axis-tick",OW(o)),key:"tick-".concat(b.coordinate)},Gm(s.props,b,y)),l&&Te.createElement("line",xm({className:"recharts-polar-angle-axis-tick-line"},g,v)),o&&t.renderTickItem(o,w,c?c(b.value,y):b.value))});return Te.createElement(Or,{className:"recharts-polar-angle-axis-ticks"},x)}},{key:"render",value:function(){var s=this.props,a=s.ticks,i=s.radius,o=s.axisLine;return i<=0||!a||!a.length?null:Te.createElement(Or,{className:Hn("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(s,a,i){var o;return Te.isValidElement(s)?o=Te.cloneElement(s,a):Rn(s)?o=s(a):o=Te.createElement(Ym,xm({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])})(P.PureComponent);vw(yw,"displayName","PolarAngleAxis");vw(yw,"axisType","angleAxis");vw(yw,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Fk,B8;function hNe(){if(B8)return Fk;B8=1;var e=nH(),t=e(Object.getPrototypeOf,Object);return Fk=t,Fk}var $k,q8;function fNe(){if(q8)return $k;q8=1;var e=Ch(),t=hNe(),r=Th(),s="[object Object]",a=Function.prototype,i=Object.prototype,o=a.toString,l=i.hasOwnProperty,c=o.call(Object);function d(u){if(!r(u)||e(u)!=s)return!1;var h=t(u);if(h===null)return!0;var g=l.call(h,"constructor")&&h.constructor;return typeof g=="function"&&g instanceof g&&o.call(g)==c}return $k=d,$k}var mNe=fNe();const pNe=Dr(mNe);var Bk,z8;function xNe(){if(z8)return Bk;z8=1;var e=Ch(),t=Th(),r="[object Boolean]";function s(a){return a===!0||a===!1||t(a)&&e(a)==r}return Bk=s,Bk}var gNe=xNe();const vNe=Dr(gNe);function Av(e){"@babel/helpers - typeof";return Av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Av(e)}function K1(){return K1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},K1.apply(this,arguments)}function yNe(e,t){return _Ne(e)||wNe(e,t)||jNe(e,t)||bNe()}function bNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jNe(e,t){if(e){if(typeof e=="string")return V8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V8(e,t)}}function V8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function wNe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function _Ne(e){if(Array.isArray(e))return e}function U8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function H8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U8(Object(r),!0).forEach(function(s){NNe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U8(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function NNe(e,t,r){return t=kNe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kNe(e){var t=SNe(e,"string");return Av(t)=="symbol"?t:t+""}function SNe(e,t){if(Av(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Av(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var W8=function(t,r,s,a,i){var o=s-a,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+s,",").concat(r),l+="L ".concat(t+s-o/2,",").concat(r+i),l+="L ".concat(t+s-o/2-a,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},PNe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ANe=function(t){var r=H8(H8({},PNe),t),s=P.useRef(),a=P.useState(-1),i=yNe(a,2),o=i[0],l=i[1];P.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var N=s.current.getTotalLength();N&&l(N)}catch{}},[]);var c=r.x,d=r.y,u=r.upperWidth,h=r.lowerWidth,g=r.height,x=r.className,b=r.animationEasing,y=r.animationDuration,v=r.animationBegin,j=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||h!==+h||g!==+g||u===0&&h===0||g===0)return null;var w=Hn("recharts-trapezoid",x);return j?Te.createElement(Nu,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:g,x:c,y:d},to:{upperWidth:u,lowerWidth:h,height:g,x:c,y:d},duration:y,animationEasing:b,isActive:j},function(N){var A=N.upperWidth,C=N.lowerWidth,M=N.height,I=N.x,F=N.y;return Te.createElement(Nu,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:y,easing:b},Te.createElement("path",K1({},bn(r,!0),{className:w,d:W8(I,F,A,C,M),ref:s})))}):Te.createElement("g",null,Te.createElement("path",K1({},bn(r,!0),{className:w,d:W8(c,d,u,h,g)})))},CNe=["option","shapeType","propTransformer","activeClassName","isActive"];function Cv(e){"@babel/helpers - typeof";return Cv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cv(e)}function TNe(e,t){if(e==null)return{};var r=ENe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function ENe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function K8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function G1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K8(Object(r),!0).forEach(function(s){ONe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K8(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function ONe(e,t,r){return t=MNe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MNe(e){var t=LNe(e,"string");return Cv(t)=="symbol"?t:t+""}function LNe(e,t){if(Cv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Cv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DNe(e,t){return G1(G1({},t),e)}function INe(e,t){return e==="symbols"}function G8(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return Te.createElement(bC,r);case"trapezoid":return Te.createElement(ANe,r);case"sector":return Te.createElement(DW,r);case"symbols":if(INe(t))return Te.createElement($A,r);break;default:return null}}function RNe(e){return P.isValidElement(e)?e.props:e}function KW(e){var t=e.option,r=e.shapeType,s=e.propTransformer,a=s===void 0?DNe:s,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=TNe(e,CNe),d;if(P.isValidElement(t))d=P.cloneElement(t,G1(G1({},c),RNe(t)));else if(Rn(t))d=t(c);else if(pNe(t)&&!vNe(t)){var u=a(t,c);d=Te.createElement(G8,{shapeType:r,elementProps:u})}else{var h=c;d=Te.createElement(G8,{shapeType:r,elementProps:h})}return l?Te.createElement(Or,{className:o},d):d}function bw(e,t){return t!=null&&"trapezoids"in e.props}function jw(e,t){return t!=null&&"sectors"in e.props}function Tv(e,t){return t!=null&&"points"in e.props}function FNe(e,t){var r,s,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(s=t.labelViewBox)===null||s===void 0?void 0:s.y)||e.y===t.y;return a&&i}function $Ne(e,t){var r=e.endAngle===t.endAngle,s=e.startAngle===t.startAngle;return r&&s}function BNe(e,t){var r=e.x===t.x,s=e.y===t.y,a=e.z===t.z;return r&&s&&a}function qNe(e,t){var r;return bw(e,t)?r=FNe:jw(e,t)?r=$Ne:Tv(e,t)&&(r=BNe),r}function zNe(e,t){var r;return bw(e,t)?r="trapezoids":jw(e,t)?r="sectors":Tv(e,t)&&(r="points"),r}function VNe(e,t){if(bw(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(jw(e,t)){var s;return(s=t.tooltipPayload)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.payload)===null||s===void 0?void 0:s.payload}return Tv(e,t)?t.payload:{}}function UNe(e){var t=e.activeTooltipItem,r=e.graphicalItem,s=e.itemData,a=zNe(r,t),i=VNe(r,t),o=s.filter(function(c,d){var u=fy(i,c),h=r.props[a].filter(function(b){var y=qNe(r,t);return y(b,t)}),g=r.props[a].indexOf(h[h.length-1]),x=d===g;return u&&x}),l=s.indexOf(o[o.length-1]);return l}var Bb;function Ux(e){"@babel/helpers - typeof";return Ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ux(e)}function Xp(){return Xp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Xp.apply(this,arguments)}function Z8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function vs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z8(Object(r),!0).forEach(function(s){jc(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z8(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function HNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y8(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,ZW(s.key),s)}}function WNe(e,t,r){return t&&Y8(e.prototype,t),r&&Y8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function KNe(e,t,r){return t=Z1(t),GNe(e,GW()?Reflect.construct(t,r||[],Z1(e).constructor):t.apply(e,r))}function GNe(e,t){if(t&&(Ux(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZNe(e)}function ZNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GW=function(){return!!e})()}function Z1(e){return Z1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Z1(e)}function YNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_P(e,t)}function _P(e,t){return _P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},_P(e,t)}function jc(e,t,r){return t=ZW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZW(e){var t=XNe(e,"string");return Ux(t)=="symbol"?t:t+""}function XNe(e,t){if(Ux(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Ux(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var kd=(function(e){function t(r){var s;return HNe(this,t),s=KNe(this,t,[r]),jc(s,"pieRef",null),jc(s,"sectorRefs",[]),jc(s,"id",Eg("recharts-pie-")),jc(s,"handleAnimationEnd",function(){var a=s.props.onAnimationEnd;s.setState({isAnimationFinished:!0}),Rn(a)&&a()}),jc(s,"handleAnimationStart",function(){var a=s.props.onAnimationStart;s.setState({isAnimationFinished:!1}),Rn(a)&&a()}),s.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},s}return YNe(t,e),WNe(t,[{key:"isActiveIndex",value:function(s){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(s)!==-1:s===a}},{key:"hasActiveIndex",value:function(){var s=this.props.activeIndex;return Array.isArray(s)?s.length!==0:s||s===0}},{key:"renderLabels",value:function(s){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,d=i.valueKey,u=bn(this.props,!1),h=bn(o,!1),g=bn(l,!1),x=o&&o.offsetRadius||20,b=s.map(function(y,v){var j=(y.startAngle+y.endAngle)/2,w=js(y.cx,y.cy,y.outerRadius+x,j),N=vs(vs(vs(vs({},u),y),{},{stroke:"none"},h),{},{index:v,textAnchor:t.getTextAnchor(w.x,y.cx)},w),A=vs(vs(vs(vs({},u),y),{},{fill:"none",stroke:y.fill},g),{},{index:v,points:[js(y.cx,y.cy,y.outerRadius,j),w]}),C=c;return zn(c)&&zn(d)?C="value":zn(c)&&(C=d),Te.createElement(Or,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(v)},l&&t.renderLabelLineItem(l,A,"line"),t.renderLabelItem(o,N,Qa(y,C)))});return Te.createElement(Or,{className:"recharts-pie-labels"},b)}},{key:"renderSectorsStatically",value:function(s){var a=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return s.map(function(d,u){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&s.length!==1)return null;var h=a.isActiveIndex(u),g=c&&a.hasActiveIndex()?c:null,x=h?o:g,b=vs(vs({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return Te.createElement(Or,Xp({ref:function(v){v&&!a.sectorRefs.includes(v)&&a.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},Gm(a.props,d,u),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(u)}),Te.createElement(KW,Xp({option:x,isActive:h,shapeType:"sector"},b)))})}},{key:"renderSectorsWithAnimation",value:function(){var s=this,a=this.props,i=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,d=a.animationEasing,u=a.animationId,h=this.state,g=h.prevSectors,x=h.prevIsAnimationActive;return Te.createElement(Nu,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(x),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(b){var y=b.t,v=[],j=i&&i[0],w=j.startAngle;return i.forEach(function(N,A){var C=g&&g[A],M=A>0?Rl(N,"paddingAngle",0):0;if(C){var I=El(C.endAngle-C.startAngle,N.endAngle-N.startAngle),F=vs(vs({},N),{},{startAngle:w+M,endAngle:w+I(y)+M});v.push(F),w=F.endAngle}else{var U=N.endAngle,W=N.startAngle,D=El(0,U-W),R=D(y),z=vs(vs({},N),{},{startAngle:w+M,endAngle:w+R+M});v.push(z),w=z.endAngle}}),Te.createElement(Or,null,s.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(s){var a=this;s.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var s=this.props,a=s.sectors,i=s.isAnimationActive,o=this.state.prevSectors;return i&&a&&a.length&&(!o||!fy(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var s=this,a=this.props,i=a.hide,o=a.sectors,l=a.className,c=a.label,d=a.cx,u=a.cy,h=a.innerRadius,g=a.outerRadius,x=a.isAnimationActive,b=this.state.isAnimationFinished;if(i||!o||!o.length||!Lt(d)||!Lt(u)||!Lt(h)||!Lt(g))return null;var y=Hn("recharts-pie",l);return Te.createElement(Or,{tabIndex:this.props.rootTabIndex,className:y,ref:function(j){s.pieRef=j}},this.renderSectors(),c&&this.renderLabels(o),vi.renderCallByParent(this.props,null,!1),(!x||b)&&mh.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return a.prevIsAnimationActive!==s.isAnimationActive?{prevIsAnimationActive:s.isAnimationActive,prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:[],isAnimationFinished:!0}:s.isAnimationActive&&s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:s.sectors!==a.curSectors?{curSectors:s.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(s,a){return s>a?"start":s<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(s,a,i){if(Te.isValidElement(s))return Te.cloneElement(s,a);if(Rn(s))return s(a);var o=Hn("recharts-pie-label-line",typeof s!="boolean"?s.className:"");return Te.createElement(B1,Xp({},a,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(s,a,i){if(Te.isValidElement(s))return Te.cloneElement(s,a);var o=i;if(Rn(s)&&(o=s(a),Te.isValidElement(o)))return o;var l=Hn("recharts-pie-label-text",typeof s!="boolean"&&!Rn(s)?s.className:"");return Te.createElement(Ym,Xp({},a,{alignmentBaseline:"middle",className:l}),o)}}])})(P.PureComponent);Bb=kd;jc(kd,"displayName","Pie");jc(kd,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!lp.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});jc(kd,"parseDeltaAngle",function(e,t){var r=Oo(t-e),s=Math.min(Math.abs(t-e),360);return r*s});jc(kd,"getRealPieData",function(e){var t=e.data,r=e.children,s=bn(e,!1),a=Fl(r,Zm);return t&&t.length?t.map(function(i,o){return vs(vs(vs({payload:i},s),i),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(i){return vs(vs({},s),i.props)}):[]});jc(kd,"parseCoordinateOfPie",function(e,t){var r=t.top,s=t.left,a=t.width,i=t.height,o=EW(a,i),l=s+Mo(e.cx,a,a/2),c=r+Mo(e.cy,i,i/2),d=Mo(e.innerRadius,o,0),u=Mo(e.outerRadius,o,o*.8),h=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:d,outerRadius:u,maxRadius:h}});jc(kd,"getComposedData",function(e){var t=e.item,r=e.offset,s=t.type.defaultProps!==void 0?vs(vs({},t.type.defaultProps),t.props):t.props,a=Bb.getRealPieData(s);if(!a||!a.length)return null;var i=s.cornerRadius,o=s.startAngle,l=s.endAngle,c=s.paddingAngle,d=s.dataKey,u=s.nameKey,h=s.valueKey,g=s.tooltipType,x=Math.abs(s.minAngle),b=Bb.parseCoordinateOfPie(s,r),y=Bb.parseDeltaAngle(o,l),v=Math.abs(y),j=d;zn(d)&&zn(h)?(xd(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j="value"):zn(d)&&(xd(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j=h);var w=a.filter(function(F){return Qa(F,j,0)!==0}).length,N=(v>=360?w:w-1)*c,A=v-w*x-N,C=a.reduce(function(F,U){var W=Qa(U,j,0);return F+(Lt(W)?W:0)},0),M;if(C>0){var I;M=a.map(function(F,U){var W=Qa(F,j,0),D=Qa(F,u,U),R=(Lt(W)?W:0)/C,z;U?z=I.endAngle+Oo(y)*c*(W!==0?1:0):z=o;var Z=z+Oo(y)*((W!==0?x:0)+R*A),se=(z+Z)/2,J=(b.innerRadius+b.outerRadius)/2,Q=[{name:D,value:W,payload:F,dataKey:j,type:g}],H=js(b.cx,b.cy,J,se);return I=vs(vs(vs({percent:R,cornerRadius:i,name:D,tooltipPayload:Q,midAngle:se,middleRadius:J,tooltipPosition:H},F),b),{},{value:Qa(F,j),startAngle:z,endAngle:Z,payload:F,paddingAngle:Oo(y)*c}),I})}return vs(vs({},b),{},{sectors:M,data:a})});var qk,X8;function QNe(){if(X8)return qk;X8=1;var e=Math.ceil,t=Math.max;function r(s,a,i,o){for(var l=-1,c=t(e((a-s)/(i||1)),0),d=Array(c);c--;)d[o?c:++l]=s,s+=i;return d}return qk=r,qk}var zk,Q8;function YW(){if(Q8)return zk;Q8=1;var e=vH(),t=1/0,r=17976931348623157e292;function s(a){if(!a)return a===0?a:0;if(a=e(a),a===t||a===-t){var i=a<0?-1:1;return i*r}return a===a?a:0}return zk=s,zk}var Vk,J8;function JNe(){if(J8)return Vk;J8=1;var e=QNe(),t=rw(),r=YW();function s(a){return function(i,o,l){return l&&typeof l!="number"&&t(i,o,l)&&(o=l=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),l=l===void 0?i<o?1:-1:r(l),e(i,o,l,a)}}return Vk=s,Vk}var Uk,eF;function e5e(){if(eF)return Uk;eF=1;var e=JNe(),t=e();return Uk=t,Uk}var t5e=e5e();const Y1=Dr(t5e);function Ev(e){"@babel/helpers - typeof";return Ev=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ev(e)}function tF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function nF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tF(Object(r),!0).forEach(function(s){XW(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function XW(e,t,r){return t=n5e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n5e(e){var t=r5e(e,"string");return Ev(t)=="symbol"?t:t+""}function r5e(e,t){if(Ev(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Ev(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var s5e=["Webkit","Moz","O","ms"],a5e=function(t,r){var s=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=s5e.reduce(function(i,o){return nF(nF({},i),{},XW({},o+s,r))},{});return a[t]=r,a};function Hx(e){"@babel/helpers - typeof";return Hx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hx(e)}function X1(){return X1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},X1.apply(this,arguments)}function rF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Hk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rF(Object(r),!0).forEach(function(s){Al(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function i5e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sF(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,JW(s.key),s)}}function o5e(e,t,r){return t&&sF(e.prototype,t),r&&sF(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function l5e(e,t,r){return t=Q1(t),c5e(e,QW()?Reflect.construct(t,r||[],Q1(e).constructor):t.apply(e,r))}function c5e(e,t){if(t&&(Hx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d5e(e)}function d5e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QW=function(){return!!e})()}function Q1(e){return Q1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Q1(e)}function u5e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NP(e,t)}function NP(e,t){return NP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},NP(e,t)}function Al(e,t,r){return t=JW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JW(e){var t=h5e(e,"string");return Hx(t)=="symbol"?t:t+""}function h5e(e,t){if(Hx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Hx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var f5e=function(t){var r=t.data,s=t.startIndex,a=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,d=M0().domain(Y1(0,c)).range([i,i+o-l]),u=d.domain().map(function(h){return d(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(s),endX:d(a),scale:d,scaleValues:u}},aF=function(t){return t.changedTouches&&!!t.changedTouches.length},Wx=(function(e){function t(r){var s;return i5e(this,t),s=l5e(this,t,[r]),Al(s,"handleDrag",function(a){s.leaveTimer&&(clearTimeout(s.leaveTimer),s.leaveTimer=null),s.state.isTravellerMoving?s.handleTravellerMove(a):s.state.isSlideMoving&&s.handleSlideDrag(a)}),Al(s,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&s.handleDrag(a.changedTouches[0])}),Al(s,"handleDragEnd",function(){s.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=s.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:i,startIndex:l})}),s.detachDragEndListener()}),Al(s,"handleLeaveWrapper",function(){(s.state.isTravellerMoving||s.state.isSlideMoving)&&(s.leaveTimer=window.setTimeout(s.handleDragEnd,s.props.leaveTimeOut))}),Al(s,"handleEnterSlideOrTraveller",function(){s.setState({isTextActive:!0})}),Al(s,"handleLeaveSlideOrTraveller",function(){s.setState({isTextActive:!1})}),Al(s,"handleSlideDragStart",function(a){var i=aF(a)?a.changedTouches[0]:a;s.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),s.attachDragEndListener()}),s.travellerDragStartHandlers={startX:s.handleTravellerDragStart.bind(s,"startX"),endX:s.handleTravellerDragStart.bind(s,"endX")},s.state={},s}return u5e(t,e),o5e(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(s){var a=s.startX,i=s.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,u=d.length-1,h=Math.min(a,i),g=Math.max(a,i),x=t.getIndexInRange(o,h),b=t.getIndexInRange(o,g);return{startIndex:x-x%c,endIndex:b===u?u:b-b%c}}},{key:"getTextOfTick",value:function(s){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=Qa(i[s],l,s);return Rn(o)?o(c,s):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(s){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,d=c.x,u=c.width,h=c.travellerWidth,g=c.startIndex,x=c.endIndex,b=c.onChange,y=s.pageX-i;y>0?y=Math.min(y,d+u-h-l,d+u-h-o):y<0&&(y=Math.max(y,d-o,d-l));var v=this.getIndex({startX:o+y,endX:l+y});(v.startIndex!==g||v.endIndex!==x)&&b&&b(v),this.setState({startX:o+y,endX:l+y,slideMoveStartX:s.pageX})}},{key:"handleTravellerDragStart",value:function(s,a){var i=aF(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:s,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(s){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,d=this.state[o],u=this.props,h=u.x,g=u.width,x=u.travellerWidth,b=u.onChange,y=u.gap,v=u.data,j={startX:this.state.startX,endX:this.state.endX},w=s.pageX-i;w>0?w=Math.min(w,h+g-x-d):w<0&&(w=Math.max(w,h-d)),j[o]=d+w;var N=this.getIndex(j),A=N.startIndex,C=N.endIndex,M=function(){var F=v.length-1;return o==="startX"&&(l>c?A%y===0:C%y===0)||l<c&&C===F||o==="endX"&&(l>c?C%y===0:A%y===0)||l>c&&C===F};this.setState(Al(Al({},o,d+w),"brushMoveStartX",s.pageX),function(){b&&M()&&b(N)})}},{key:"handleTravellerMoveKeyboard",value:function(s,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,u=this.state[a],h=l.indexOf(u);if(h!==-1){var g=h+s;if(!(g===-1||g>=l.length)){var x=l[g];a==="startX"&&x>=d||a==="endX"&&x<=c||this.setState(Al({},a,x),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var s=this.props,a=s.x,i=s.y,o=s.width,l=s.height,c=s.fill,d=s.stroke;return Te.createElement("rect",{stroke:d,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var s=this.props,a=s.x,i=s.y,o=s.width,l=s.height,c=s.data,d=s.children,u=s.padding,h=P.Children.only(d);return h?Te.cloneElement(h,{x:a,y:i,width:o,height:l,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(s,a){var i,o,l=this,c=this.props,d=c.y,u=c.travellerWidth,h=c.height,g=c.traveller,x=c.ariaLabel,b=c.data,y=c.startIndex,v=c.endIndex,j=Math.max(s,this.props.x),w=Hk(Hk({},bn(this.props,!1)),{},{x:j,y:d,width:u,height:h}),N=x||"Min value: ".concat((i=b[y])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=b[v])===null||o===void 0?void 0:o.name);return Te.createElement(Or,{tabIndex:0,role:"slider","aria-label":N,"aria-valuenow":s,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(C){["ArrowLeft","ArrowRight"].includes(C.key)&&(C.preventDefault(),C.stopPropagation(),l.handleTravellerMoveKeyboard(C.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(g,w))}},{key:"renderSlide",value:function(s,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,d=i.travellerWidth,u=Math.min(s,a)+d,h=Math.max(Math.abs(a-s)-d,0);return Te.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:o,width:h,height:l})}},{key:"renderText",value:function(){var s=this.props,a=s.startIndex,i=s.endIndex,o=s.y,l=s.height,c=s.travellerWidth,d=s.stroke,u=this.state,h=u.startX,g=u.endX,x=5,b={pointerEvents:"none",fill:d};return Te.createElement(Or,{className:"recharts-brush-texts"},Te.createElement(Ym,X1({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,g)-x,y:o+l/2},b),this.getTextOfTick(a)),Te.createElement(Ym,X1({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,g)+c+x,y:o+l/2},b),this.getTextOfTick(i)))}},{key:"render",value:function(){var s=this.props,a=s.data,i=s.className,o=s.children,l=s.x,c=s.y,d=s.width,u=s.height,h=s.alwaysShowText,g=this.state,x=g.startX,b=g.endX,y=g.isTextActive,v=g.isSlideMoving,j=g.isTravellerMoving,w=g.isTravellerFocused;if(!a||!a.length||!Lt(l)||!Lt(c)||!Lt(d)||!Lt(u)||d<=0||u<=0)return null;var N=Hn("recharts-brush",i),A=Te.Children.count(o)===1,C=a5e("userSelect","none");return Te.createElement(Or,{className:N,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:C},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(x,b),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(b,"endX"),(y||v||j||w||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(s){var a=s.x,i=s.y,o=s.width,l=s.height,c=s.stroke,d=Math.floor(i+l/2)-1;return Te.createElement(Te.Fragment,null,Te.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),Te.createElement("line",{x1:a+1,y1:d,x2:a+o-1,y2:d,fill:"none",stroke:"#fff"}),Te.createElement("line",{x1:a+1,y1:d+2,x2:a+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(s,a){var i;return Te.isValidElement(s)?i=Te.cloneElement(s,a):Rn(s)?i=s(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(s,a){var i=s.data,o=s.width,l=s.x,c=s.travellerWidth,d=s.updateId,u=s.startIndex,h=s.endIndex;if(i!==a.prevData||d!==a.prevUpdateId)return Hk({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},i&&i.length?f5e({data:i,width:o,x:l,travellerWidth:c,startIndex:u,endIndex:h}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var g=a.scale.domain().map(function(x){return a.scale(x)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:a.scale(s.startIndex),endX:a.scale(s.endIndex),scaleValues:g}}return null}},{key:"getIndexInRange",value:function(s,a){for(var i=s.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);s[c]>a?l=c:o=c}return a>=s[l]?l:o}}])})(P.PureComponent);Al(Wx,"displayName","Brush");Al(Wx,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Wk,iF;function m5e(){if(iF)return Wk;iF=1;var e=WA();function t(r,s){var a;return e(r,function(i,o,l){return a=s(i,o,l),!a}),!!a}return Wk=t,Wk}var Kk,oF;function p5e(){if(oF)return Kk;oF=1;var e=ZU(),t=Cu(),r=m5e(),s=fl(),a=rw();function i(o,l,c){var d=s(o)?e:r;return c&&a(o,l,c)&&(l=void 0),d(o,t(l,3))}return Kk=i,Kk}var x5e=p5e();const g5e=Dr(x5e);var pu=function(t,r){var s=t.alwaysShow,a=t.ifOverflow;return s&&(a="extendDomain"),a===r},Gk,lF;function v5e(){if(lF)return Gk;lF=1;var e=fH();function t(r,s,a){s=="__proto__"&&e?e(r,s,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[s]=a}return Gk=t,Gk}var Zk,cF;function y5e(){if(cF)return Zk;cF=1;var e=v5e(),t=uH(),r=Cu();function s(a,i){var o={};return i=r(i,3),t(a,function(l,c,d){e(o,c,i(l,c,d))}),o}return Zk=s,Zk}var b5e=y5e();const j5e=Dr(b5e);var Yk,dF;function w5e(){if(dF)return Yk;dF=1;function e(t,r){for(var s=-1,a=t==null?0:t.length;++s<a;)if(!r(t[s],s,t))return!1;return!0}return Yk=e,Yk}var Xk,uF;function _5e(){if(uF)return Xk;uF=1;var e=WA();function t(r,s){var a=!0;return e(r,function(i,o,l){return a=!!s(i,o,l),a}),a}return Xk=t,Xk}var Qk,hF;function N5e(){if(hF)return Qk;hF=1;var e=w5e(),t=_5e(),r=Cu(),s=fl(),a=rw();function i(o,l,c){var d=s(o)?e:t;return c&&a(o,l,c)&&(l=void 0),d(o,r(l,3))}return Qk=i,Qk}var k5e=N5e();const eK=Dr(k5e);var S5e=["x","y"];function Ov(e){"@babel/helpers - typeof";return Ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ov(e)}function kP(){return kP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},kP.apply(this,arguments)}function fF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function m0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fF(Object(r),!0).forEach(function(s){P5e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function P5e(e,t,r){return t=A5e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A5e(e){var t=C5e(e,"string");return Ov(t)=="symbol"?t:t+""}function C5e(e,t){if(Ov(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Ov(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function T5e(e,t){if(e==null)return{};var r=E5e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function E5e(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function O5e(e,t){var r=e.x,s=e.y,a=T5e(e,S5e),i="".concat(r),o=parseInt(i,10),l="".concat(s),c=parseInt(l,10),d="".concat(t.height||a.height),u=parseInt(d,10),h="".concat(t.width||a.width),g=parseInt(h,10);return m0(m0(m0(m0(m0({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:u,width:g,name:t.name,radius:t.radius})}function mF(e){return Te.createElement(KW,kP({shapeType:"rectangle",propTransformer:O5e,activeClassName:"recharts-active-bar"},e))}var M5e=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(s,a){if(typeof t=="number")return t;var i=Lt(s)||rpe(s);return i?t(s,a):(i||Qm(),r)}},L5e=["value","background"],tK;function Kx(e){"@babel/helpers - typeof";return Kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kx(e)}function D5e(e,t){if(e==null)return{};var r=I5e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function I5e(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function J1(){return J1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},J1.apply(this,arguments)}function pF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function La(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pF(Object(r),!0).forEach(function(s){bf(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function R5e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xF(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,rK(s.key),s)}}function F5e(e,t,r){return t&&xF(e.prototype,t),r&&xF(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $5e(e,t,r){return t=ej(t),B5e(e,nK()?Reflect.construct(t,r||[],ej(e).constructor):t.apply(e,r))}function B5e(e,t){if(t&&(Kx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q5e(e)}function q5e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nK=function(){return!!e})()}function ej(e){return ej=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ej(e)}function z5e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SP(e,t)}function SP(e,t){return SP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},SP(e,t)}function bf(e,t,r){return t=rK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rK(e){var t=V5e(e,"string");return Kx(t)=="symbol"?t:t+""}function V5e(e,t){if(Kx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Kx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Bl=(function(e){function t(){var r;R5e(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=$5e(this,t,[].concat(a)),bf(r,"state",{isAnimationFinished:!1}),bf(r,"id",Eg("recharts-bar-")),bf(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),bf(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return z5e(t,e),F5e(t,[{key:"renderRectanglesStatically",value:function(s){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,d=i.activeBar,u=bn(this.props,!1);return s&&s.map(function(h,g){var x=g===c,b=x?d:o,y=La(La(La({},u),h),{},{isActive:x,option:b,index:g,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return Te.createElement(Or,J1({className:"recharts-bar-rectangle"},Gm(a.props,h,g),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(g)}),Te.createElement(mF,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var s=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,u=a.animationEasing,h=a.animationId,g=this.state.prevData;return Te.createElement(Nu,{begin:c,duration:d,isActive:l,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var b=x.t,y=i.map(function(v,j){var w=g&&g[j];if(w){var N=El(w.x,v.x),A=El(w.y,v.y),C=El(w.width,v.width),M=El(w.height,v.height);return La(La({},v),{},{x:N(b),y:A(b),width:C(b),height:M(b)})}if(o==="horizontal"){var I=El(0,v.height),F=I(b);return La(La({},v),{},{y:v.y+v.height-F,height:F})}var U=El(0,v.width),W=U(b);return La(La({},v),{},{width:W})});return Te.createElement(Or,null,s.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var s=this.props,a=s.data,i=s.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!fy(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var s=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=bn(this.props.background,!1);return i.map(function(d,u){d.value;var h=d.background,g=D5e(d,L5e);if(!h)return null;var x=La(La(La(La(La({},g),{},{fill:"#eee"},h),c),Gm(s.props,d,u)),{},{onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return Te.createElement(mF,J1({key:"background-bar-".concat(u),option:s.props.background,isActive:u===l},x))})}},{key:"renderErrorBar",value:function(s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,h=Fl(u,my);if(!h)return null;var g=d==="vertical"?o[0].height/2:o[0].width/2,x=function(v,j){var w=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:w,errorVal:Qa(v,j)}},b={clipPath:s?"url(#clipPath-".concat(a,")"):null};return Te.createElement(Or,b,h.map(function(y){return Te.cloneElement(y,{key:"error-bar-".concat(a,"-").concat(y.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:g,dataPointFormatter:x})}))}},{key:"render",value:function(){var s=this.props,a=s.hide,i=s.data,o=s.className,l=s.xAxis,c=s.yAxis,d=s.left,u=s.top,h=s.width,g=s.height,x=s.isAnimationActive,b=s.background,y=s.id;if(a||!i||!i.length)return null;var v=this.state.isAnimationFinished,j=Hn("recharts-bar",o),w=l&&l.allowDataOverflow,N=c&&c.allowDataOverflow,A=w||N,C=zn(y)?this.id:y;return Te.createElement(Or,{className:j},w||N?Te.createElement("defs",null,Te.createElement("clipPath",{id:"clipPath-".concat(C)},Te.createElement("rect",{x:w?d:d-h/2,y:N?u:u-g/2,width:w?h:h*2,height:N?g:g*2}))):null,Te.createElement(Or,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(C,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,C),(!x||v)&&mh.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curData:s.data,prevData:a.curData}:s.data!==a.curData?{curData:s.data}:null}}])})(P.PureComponent);tK=Bl;bf(Bl,"displayName","Bar");bf(Bl,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!lp.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});bf(Bl,"getComposedData",function(e){var t=e.props,r=e.item,s=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,u=e.dataStartIndex,h=e.displayedData,g=e.offset,x=vje(s,r);if(!x)return null;var b=t.layout,y=r.type.defaultProps,v=y!==void 0?La(La({},y),r.props):r.props,j=v.dataKey,w=v.children,N=v.minPointSize,A=b==="horizontal"?o:i,C=d?A.scale.domain():null,M=kje({numericAxis:A}),I=Fl(w,Zm),F=h.map(function(U,W){var D,R,z,Z,se,J;d?D=yje(d[u+W],C):(D=Qa(U,j),Array.isArray(D)||(D=[M,D]));var Q=M5e(N,tK.defaultProps.minPointSize)(D[1],W);if(b==="horizontal"){var H,ne=[o.scale(D[0]),o.scale(D[1])],ue=ne[0],ae=ne[1];R=qR({axis:i,ticks:l,bandSize:a,offset:x.offset,entry:U,index:W}),z=(H=ae??ue)!==null&&H!==void 0?H:void 0,Z=x.size;var G=ue-ae;if(se=Number.isNaN(G)?0:G,J={x:R,y:o.y,width:Z,height:o.height},Math.abs(Q)>0&&Math.abs(se)<Math.abs(Q)){var te=Oo(se||Q)*(Math.abs(Q)-Math.abs(se));z-=te,se+=te}}else{var fe=[i.scale(D[0]),i.scale(D[1])],be=fe[0],xe=fe[1];if(R=be,z=qR({axis:o,ticks:c,bandSize:a,offset:x.offset,entry:U,index:W}),Z=xe-be,se=x.size,J={x:i.x,y:z,width:i.width,height:se},Math.abs(Q)>0&&Math.abs(Z)<Math.abs(Q)){var we=Oo(Z||Q)*(Math.abs(Q)-Math.abs(Z));Z+=we}}return La(La(La({},U),{},{x:R,y:z,width:Z,height:se,value:d?D:D[1],payload:U,background:J},I&&I[W]&&I[W].props),{},{tooltipPayload:[CW(r,U)],tooltipPosition:{x:R+Z/2,y:z+se/2}})});return La({data:F,layout:b},g)});function Mv(e){"@babel/helpers - typeof";return Mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mv(e)}function U5e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gF(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,sK(s.key),s)}}function H5e(e,t,r){return t&&gF(e.prototype,t),r&&gF(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function vF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function fd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vF(Object(r),!0).forEach(function(s){ww(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function ww(e,t,r){return t=sK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sK(e){var t=W5e(e,"string");return Mv(t)=="symbol"?t:t+""}function W5e(e,t){if(Mv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Mv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aK=function(t,r,s,a,i){var o=t.width,l=t.height,c=t.layout,d=t.children,u=Object.keys(r),h={left:s.left,leftMirror:s.left,right:o-s.right,rightMirror:o-s.right,top:s.top,topMirror:s.top,bottom:l-s.bottom,bottomMirror:l-s.bottom},g=!!Cl(d,Bl);return u.reduce(function(x,b){var y=r[b],v=y.orientation,j=y.domain,w=y.padding,N=w===void 0?{}:w,A=y.mirror,C=y.reversed,M="".concat(v).concat(A?"Mirror":""),I,F,U,W,D;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var R=j[1]-j[0],z=1/0,Z=y.categoricalDomain.sort(ipe);if(Z.forEach(function(fe,be){be>0&&(z=Math.min((fe||0)-(Z[be-1]||0),z))}),Number.isFinite(z)){var se=z/R,J=y.layout==="vertical"?s.height:s.width;if(y.padding==="gap"&&(I=se*J/2),y.padding==="no-gap"){var Q=Mo(t.barCategoryGap,se*J),H=se*J/2;I=H-Q-(H-Q)/J*Q}}}a==="xAxis"?F=[s.left+(N.left||0)+(I||0),s.left+s.width-(N.right||0)-(I||0)]:a==="yAxis"?F=c==="horizontal"?[s.top+s.height-(N.bottom||0),s.top+(N.top||0)]:[s.top+(N.top||0)+(I||0),s.top+s.height-(N.bottom||0)-(I||0)]:F=y.range,C&&(F=[F[1],F[0]]);var ne=kW(y,i,g),ue=ne.scale,ae=ne.realScaleType;ue.domain(j).range(F),SW(ue);var G=PW(ue,fd(fd({},y),{},{realScaleType:ae}));a==="xAxis"?(D=v==="top"&&!A||v==="bottom"&&A,U=s.left,W=h[M]-D*y.height):a==="yAxis"&&(D=v==="left"&&!A||v==="right"&&A,U=h[M]-D*y.width,W=s.top);var te=fd(fd(fd({},y),G),{},{realScaleType:ae,x:U,y:W,scale:ue,width:a==="xAxis"?s.width:y.width,height:a==="yAxis"?s.height:y.height});return te.bandSize=R1(te,G),!y.hide&&a==="xAxis"?h[M]+=(D?-1:1)*te.height:y.hide||(h[M]+=(D?-1:1)*te.width),fd(fd({},x),{},ww({},b,te))},{})},iK=function(t,r){var s=t.x,a=t.y,i=r.x,o=r.y;return{x:Math.min(s,i),y:Math.min(a,o),width:Math.abs(i-s),height:Math.abs(o-a)}},K5e=function(t){var r=t.x1,s=t.y1,a=t.x2,i=t.y2;return iK({x:r,y:s},{x:a,y:i})},oK=(function(){function e(t){U5e(this,e),this.scale=t}return H5e(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,i=s.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var s=this.range(),a=s[0],i=s[s.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])})();ww(oK,"EPS",1e-4);var jC=function(t){var r=Object.keys(t).reduce(function(s,a){return fd(fd({},s),{},ww({},a,oK.create(t[a])))},{});return fd(fd({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return j5e(a,function(c,d){return r[d].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return eK(a,function(i,o){return r[o].isInRange(i)})}})};function G5e(e){return(e%180+180)%180}var Z5e=function(t){var r=t.width,s=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=G5e(a),o=i*Math.PI/180,l=Math.atan(s/r),c=o>l&&o<Math.PI-l?s/Math.sin(o):r/Math.cos(o);return Math.abs(c)},Jk,yF;function Y5e(){if(yF)return Jk;yF=1;var e=Cu(),t=ly(),r=tw();function s(a){return function(i,o,l){var c=Object(i);if(!t(i)){var d=e(o,3);i=r(i),o=function(h){return d(c[h],h,c)}}var u=a(i,o,l);return u>-1?c[d?i[u]:u]:void 0}}return Jk=s,Jk}var eS,bF;function X5e(){if(bF)return eS;bF=1;var e=YW();function t(r){var s=e(r),a=s%1;return s===s?a?s-a:s:0}return eS=t,eS}var tS,jF;function Q5e(){if(jF)return tS;jF=1;var e=iH(),t=Cu(),r=X5e(),s=Math.max;function a(i,o,l){var c=i==null?0:i.length;if(!c)return-1;var d=l==null?0:r(l);return d<0&&(d=s(c+d,0)),e(i,t(o,3),d)}return tS=a,tS}var nS,wF;function J5e(){if(wF)return nS;wF=1;var e=Y5e(),t=Q5e(),r=e(t);return nS=r,nS}var eke=J5e();const tke=Dr(eke);var nke=wU();const rke=Dr(nke);var ske=rke(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),wC=P.createContext(void 0),_C=P.createContext(void 0),lK=P.createContext(void 0),cK=P.createContext({}),dK=P.createContext(void 0),uK=P.createContext(0),hK=P.createContext(0),_F=function(t){var r=t.state,s=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,d=t.height,u=ske(i);return Te.createElement(wC.Provider,{value:s},Te.createElement(_C.Provider,{value:a},Te.createElement(cK.Provider,{value:i},Te.createElement(lK.Provider,{value:u},Te.createElement(dK.Provider,{value:o},Te.createElement(uK.Provider,{value:d},Te.createElement(hK.Provider,{value:c},l)))))))},ake=function(){return P.useContext(dK)},fK=function(t){var r=P.useContext(wC);r==null&&Qm();var s=r[t];return s==null&&Qm(),s},ike=function(){var t=P.useContext(wC);return af(t)},oke=function(){var t=P.useContext(_C),r=tke(t,function(s){return eK(s.domain,Number.isFinite)});return r||af(t)},mK=function(t){var r=P.useContext(_C);r==null&&Qm();var s=r[t];return s==null&&Qm(),s},lke=function(){var t=P.useContext(lK);return t},cke=function(){return P.useContext(cK)},NC=function(){return P.useContext(hK)},kC=function(){return P.useContext(uK)};function Gx(e){"@babel/helpers - typeof";return Gx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gx(e)}function dke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uke(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,xK(s.key),s)}}function hke(e,t,r){return t&&uke(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fke(e,t,r){return t=tj(t),mke(e,pK()?Reflect.construct(t,r||[],tj(e).constructor):t.apply(e,r))}function mke(e,t){if(t&&(Gx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pke(e)}function pke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pK=function(){return!!e})()}function tj(e){return tj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tj(e)}function xke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PP(e,t)}function PP(e,t){return PP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},PP(e,t)}function NF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function kF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NF(Object(r),!0).forEach(function(s){SC(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function SC(e,t,r){return t=xK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xK(e){var t=gke(e,"string");return Gx(t)=="symbol"?t:t+""}function gke(e,t){if(Gx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Gx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function vke(e,t){return wke(e)||jke(e,t)||bke(e,t)||yke()}function yke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bke(e,t){if(e){if(typeof e=="string")return SF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SF(e,t)}}function SF(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function jke(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function wke(e){if(Array.isArray(e))return e}function AP(){return AP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},AP.apply(this,arguments)}var _ke=function(t,r){var s;return Te.isValidElement(t)?s=Te.cloneElement(t,r):Rn(t)?s=t(r):s=Te.createElement("line",AP({},r,{className:"recharts-reference-line-line"})),s},Nke=function(t,r,s,a,i,o,l,c,d){var u=i.x,h=i.y,g=i.width,x=i.height;if(s){var b=d.y,y=t.y.apply(b,{position:o});if(pu(d,"discard")&&!t.y.isInRange(y))return null;var v=[{x:u+g,y},{x:u,y}];return c==="left"?v.reverse():v}if(r){var j=d.x,w=t.x.apply(j,{position:o});if(pu(d,"discard")&&!t.x.isInRange(w))return null;var N=[{x:w,y:h+x},{x:w,y:h}];return l==="top"?N.reverse():N}if(a){var A=d.segment,C=A.map(function(M){return t.apply(M,{position:o})});return pu(d,"discard")&&g5e(C,function(M){return!t.isInRange(M)})?null:C}return null};function kke(e){var t=e.x,r=e.y,s=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,d=ake(),u=fK(a),h=mK(i),g=lke();if(!d||!g)return null;xd(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=jC({x:u.scale,y:h.scale}),b=ei(t),y=ei(r),v=s&&s.length===2,j=Nke(x,b,y,v,g,e.position,u.orientation,h.orientation,e);if(!j)return null;var w=vke(j,2),N=w[0],A=N.x,C=N.y,M=w[1],I=M.x,F=M.y,U=pu(e,"hidden")?"url(#".concat(d,")"):void 0,W=kF(kF({clipPath:U},bn(e,!0)),{},{x1:A,y1:C,x2:I,y2:F});return Te.createElement(Or,{className:Hn("recharts-reference-line",l)},_ke(o,W),vi.renderCallByParent(e,K5e({x1:A,y1:C,x2:I,y2:F})))}var PC=(function(e){function t(){return dke(this,t),fke(this,t,arguments)}return xke(t,e),hke(t,[{key:"render",value:function(){return Te.createElement(kke,this.props)}}])})(Te.Component);SC(PC,"displayName","ReferenceLine");SC(PC,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function CP(){return CP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},CP.apply(this,arguments)}function Zx(e){"@babel/helpers - typeof";return Zx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zx(e)}function PF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function AF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PF(Object(r),!0).forEach(function(s){_w(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Ske(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pke(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,vK(s.key),s)}}function Ake(e,t,r){return t&&Pke(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cke(e,t,r){return t=nj(t),Tke(e,gK()?Reflect.construct(t,r||[],nj(e).constructor):t.apply(e,r))}function Tke(e,t){if(t&&(Zx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Eke(e)}function Eke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gK=function(){return!!e})()}function nj(e){return nj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nj(e)}function Oke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TP(e,t)}function TP(e,t){return TP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},TP(e,t)}function _w(e,t,r){return t=vK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vK(e){var t=Mke(e,"string");return Zx(t)=="symbol"?t:t+""}function Mke(e,t){if(Zx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Zx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Lke=function(t){var r=t.x,s=t.y,a=t.xAxis,i=t.yAxis,o=jC({x:a.scale,y:i.scale}),l=o.apply({x:r,y:s},{bandAware:!0});return pu(t,"discard")&&!o.isInRange(l)?null:l},Nw=(function(e){function t(){return Ske(this,t),Cke(this,t,arguments)}return Oke(t,e),Ake(t,[{key:"render",value:function(){var s=this.props,a=s.x,i=s.y,o=s.r,l=s.alwaysShow,c=s.clipPathId,d=ei(a),u=ei(i);if(xd(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var h=Lke(this.props);if(!h)return null;var g=h.x,x=h.y,b=this.props,y=b.shape,v=b.className,j=pu(this.props,"hidden")?"url(#".concat(c,")"):void 0,w=AF(AF({clipPath:j},bn(this.props,!0)),{},{cx:g,cy:x});return Te.createElement(Or,{className:Hn("recharts-reference-dot",v)},t.renderDot(y,w),vi.renderCallByParent(this.props,{x:g-o,y:x-o,width:2*o,height:2*o}))}}])})(Te.Component);_w(Nw,"displayName","ReferenceDot");_w(Nw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});_w(Nw,"renderDot",function(e,t){var r;return Te.isValidElement(e)?r=Te.cloneElement(e,t):Rn(e)?r=e(t):r=Te.createElement(pw,CP({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function EP(){return EP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},EP.apply(this,arguments)}function Yx(e){"@babel/helpers - typeof";return Yx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yx(e)}function CF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function TF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CF(Object(r),!0).forEach(function(s){kw(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Dke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ike(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,bK(s.key),s)}}function Rke(e,t,r){return t&&Ike(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fke(e,t,r){return t=rj(t),$ke(e,yK()?Reflect.construct(t,r||[],rj(e).constructor):t.apply(e,r))}function $ke(e,t){if(t&&(Yx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bke(e)}function Bke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yK=function(){return!!e})()}function rj(e){return rj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rj(e)}function qke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OP(e,t)}function OP(e,t){return OP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},OP(e,t)}function kw(e,t,r){return t=bK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bK(e){var t=zke(e,"string");return Yx(t)=="symbol"?t:t+""}function zke(e,t){if(Yx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Yx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Vke=function(t,r,s,a,i){var o=i.x1,l=i.x2,c=i.y1,d=i.y2,u=i.xAxis,h=i.yAxis;if(!u||!h)return null;var g=jC({x:u.scale,y:h.scale}),x={x:t?g.x.apply(o,{position:"start"}):g.x.rangeMin,y:s?g.y.apply(c,{position:"start"}):g.y.rangeMin},b={x:r?g.x.apply(l,{position:"end"}):g.x.rangeMax,y:a?g.y.apply(d,{position:"end"}):g.y.rangeMax};return pu(i,"discard")&&(!g.isInRange(x)||!g.isInRange(b))?null:iK(x,b)},Sw=(function(e){function t(){return Dke(this,t),Fke(this,t,arguments)}return qke(t,e),Rke(t,[{key:"render",value:function(){var s=this.props,a=s.x1,i=s.x2,o=s.y1,l=s.y2,c=s.className,d=s.alwaysShow,u=s.clipPathId;xd(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=ei(a),g=ei(i),x=ei(o),b=ei(l),y=this.props.shape;if(!h&&!g&&!x&&!b&&!y)return null;var v=Vke(h,g,x,b,this.props);if(!v&&!y)return null;var j=pu(this.props,"hidden")?"url(#".concat(u,")"):void 0;return Te.createElement(Or,{className:Hn("recharts-reference-area",c)},t.renderRect(y,TF(TF({clipPath:j},bn(this.props,!0)),v)),vi.renderCallByParent(this.props,v))}}])})(Te.Component);kw(Sw,"displayName","ReferenceArea");kw(Sw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});kw(Sw,"renderRect",function(e,t){var r;return Te.isValidElement(e)?r=Te.cloneElement(e,t):Rn(e)?r=e(t):r=Te.createElement(bC,EP({},t,{className:"recharts-reference-area-rect"})),r});function jK(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var s=[],a=0;a<e.length;a+=t)s.push(e[a]);return s}function Uke(e,t,r){var s={width:e.width+t.width,height:e.height+t.height};return Z5e(s,r)}function Hke(e,t,r){var s=r==="width",a=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:s?a:i,end:s?a+o:i+l}:{start:s?a+o:i+l,end:s?a:i}}function sj(e,t,r,s,a){if(e*t<e*s||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-s)>=0&&e*(t+e*i/2-a)<=0}function Wke(e,t){return jK(e,t+1)}function Kke(e,t,r,s,a){for(var i=(s||[]).slice(),o=t.start,l=t.end,c=0,d=1,u=o,h=function(){var b=s==null?void 0:s[c];if(b===void 0)return{v:jK(s,d)};var y=c,v,j=function(){return v===void 0&&(v=r(b,y)),v},w=b.coordinate,N=c===0||sj(e,w,j,u,l);N||(c=0,u=o,d+=1),N&&(u=w+e*(j()/2+a),c+=d)},g;d<=i.length;)if(g=h(),g)return g.v;return[]}function Lv(e){"@babel/helpers - typeof";return Lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lv(e)}function EF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function so(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EF(Object(r),!0).forEach(function(s){Gke(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Gke(e,t,r){return t=Zke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zke(e){var t=Yke(e,"string");return Lv(t)=="symbol"?t:t+""}function Yke(e,t){if(Lv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Lv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xke(e,t,r,s,a){for(var i=(s||[]).slice(),o=i.length,l=t.start,c=t.end,d=function(g){var x=i[g],b,y=function(){return b===void 0&&(b=r(x,g)),b};if(g===o-1){var v=e*(x.coordinate+e*y()/2-c);i[g]=x=so(so({},x),{},{tickCoord:v>0?x.coordinate-v*e:x.coordinate})}else i[g]=x=so(so({},x),{},{tickCoord:x.coordinate});var j=sj(e,x.tickCoord,y,l,c);j&&(c=x.tickCoord-e*(y()/2+a),i[g]=so(so({},x),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return i}function Qke(e,t,r,s,a,i){var o=(s||[]).slice(),l=o.length,c=t.start,d=t.end;if(i){var u=s[l-1],h=r(u,l-1),g=e*(u.coordinate+e*h/2-d);o[l-1]=u=so(so({},u),{},{tickCoord:g>0?u.coordinate-g*e:u.coordinate});var x=sj(e,u.tickCoord,function(){return h},c,d);x&&(d=u.tickCoord-e*(h/2+a),o[l-1]=so(so({},u),{},{isShow:!0}))}for(var b=i?l-1:l,y=function(w){var N=o[w],A,C=function(){return A===void 0&&(A=r(N,w)),A};if(w===0){var M=e*(N.coordinate-e*C()/2-c);o[w]=N=so(so({},N),{},{tickCoord:M<0?N.coordinate-M*e:N.coordinate})}else o[w]=N=so(so({},N),{},{tickCoord:N.coordinate});var I=sj(e,N.tickCoord,C,c,d);I&&(c=N.tickCoord+e*(C()/2+a),o[w]=so(so({},N),{},{isShow:!0}))},v=0;v<b;v++)y(v);return o}function AC(e,t,r){var s=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,d=e.tickFormatter,u=e.unit,h=e.angle;if(!a||!a.length||!s)return[];if(Lt(c)||lp.isSsr)return Wke(a,typeof c=="number"&&Lt(c)?c:0);var g=[],x=l==="top"||l==="bottom"?"width":"height",b=u&&x==="width"?O0(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},y=function(N,A){var C=Rn(d)?d(N.value,A):N.value;return x==="width"?Uke(O0(C,{fontSize:t,letterSpacing:r}),b,h):O0(C,{fontSize:t,letterSpacing:r})[x]},v=a.length>=2?Oo(a[1].coordinate-a[0].coordinate):1,j=Hke(i,v,x);return c==="equidistantPreserveStart"?Kke(v,j,y,a,o):(c==="preserveStart"||c==="preserveStartEnd"?g=Qke(v,j,y,a,o,c==="preserveStartEnd"):g=Xke(v,j,y,a,o),g.filter(function(w){return w.isShow}))}var Jke=["viewBox"],eSe=["viewBox"],tSe=["ticks"];function Xx(e){"@babel/helpers - typeof";return Xx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xx(e)}function Qp(){return Qp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Qp.apply(this,arguments)}function OF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Ga(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OF(Object(r),!0).forEach(function(s){CC(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function rS(e,t){if(e==null)return{};var r=nSe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function nSe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function rSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MF(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,_K(s.key),s)}}function sSe(e,t,r){return t&&MF(e.prototype,t),r&&MF(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function aSe(e,t,r){return t=aj(t),iSe(e,wK()?Reflect.construct(t,r||[],aj(e).constructor):t.apply(e,r))}function iSe(e,t){if(t&&(Xx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oSe(e)}function oSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wK=function(){return!!e})()}function aj(e){return aj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},aj(e)}function lSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MP(e,t)}function MP(e,t){return MP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},MP(e,t)}function CC(e,t,r){return t=_K(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _K(e){var t=cSe(e,"string");return Xx(t)=="symbol"?t:t+""}function cSe(e,t){if(Xx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Xx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ig=(function(e){function t(r){var s;return rSe(this,t),s=aSe(this,t,[r]),s.state={fontSize:"",letterSpacing:""},s}return lSe(t,e),sSe(t,[{key:"shouldComponentUpdate",value:function(s,a){var i=s.viewBox,o=rS(s,Jke),l=this.props,c=l.viewBox,d=rS(l,eSe);return!lx(i,c)||!lx(o,d)||!lx(a,this.state)}},{key:"componentDidMount",value:function(){var s=this.layerReference;if(s){var a=s.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(s){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,d=a.orientation,u=a.tickSize,h=a.mirror,g=a.tickMargin,x,b,y,v,j,w,N=h?-1:1,A=s.tickSize||u,C=Lt(s.tickCoord)?s.tickCoord:s.coordinate;switch(d){case"top":x=b=s.coordinate,v=o+ +!h*c,y=v-N*A,w=y-N*g,j=C;break;case"left":y=v=s.coordinate,b=i+ +!h*l,x=b-N*A,j=x-N*g,w=C;break;case"right":y=v=s.coordinate,b=i+ +h*l,x=b+N*A,j=x+N*g,w=C;break;default:x=b=s.coordinate,v=o+ +h*c,y=v+N*A,w=y+N*g,j=C;break}return{line:{x1:x,y1:y,x2:b,y2:v},tick:{x:j,y:w}}}},{key:"getTickTextAnchor",value:function(){var s=this.props,a=s.orientation,i=s.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var s=this.props,a=s.orientation,i=s.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.x,i=s.y,o=s.width,l=s.height,c=s.orientation,d=s.mirror,u=s.axisLine,h=Ga(Ga(Ga({},bn(this.props,!1)),bn(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var g=+(c==="top"&&!d||c==="bottom"&&d);h=Ga(Ga({},h),{},{x1:a,y1:i+g*l,x2:a+o,y2:i+g*l})}else{var x=+(c==="left"&&!d||c==="right"&&d);h=Ga(Ga({},h),{},{x1:a+x*o,y1:i,x2:a+x*o,y2:i+l})}return Te.createElement("line",Qp({},h,{className:Hn("recharts-cartesian-axis-line",Rl(u,"className"))}))}},{key:"renderTicks",value:function(s,a,i){var o=this,l=this.props,c=l.tickLine,d=l.stroke,u=l.tick,h=l.tickFormatter,g=l.unit,x=AC(Ga(Ga({},this.props),{},{ticks:s}),a,i),b=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),v=bn(this.props,!1),j=bn(u,!1),w=Ga(Ga({},v),{},{fill:"none"},bn(c,!1)),N=x.map(function(A,C){var M=o.getTickLineCoord(A),I=M.line,F=M.tick,U=Ga(Ga(Ga(Ga({textAnchor:b,verticalAnchor:y},v),{},{stroke:"none",fill:d},j),F),{},{index:C,payload:A,visibleTicksCount:x.length,tickFormatter:h});return Te.createElement(Or,Qp({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},Gm(o.props,A,C)),c&&Te.createElement("line",Qp({},w,I,{className:Hn("recharts-cartesian-axis-tick-line",Rl(c,"className"))})),u&&t.renderTickItem(u,U,"".concat(Rn(h)?h(A.value,C):A.value).concat(g||"")))});return Te.createElement("g",{className:"recharts-cartesian-axis-ticks"},N)}},{key:"render",value:function(){var s=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,d=a.className,u=a.hide;if(u)return null;var h=this.props,g=h.ticks,x=rS(h,tSe),b=g;return Rn(c)&&(b=g&&g.length>0?c(this.props):c(x)),o<=0||l<=0||!b||!b.length?null:Te.createElement(Or,{className:Hn("recharts-cartesian-axis",d),ref:function(v){s.layerReference=v}},i&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),vi.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(s,a,i){var o,l=Hn(a.className,"recharts-cartesian-axis-tick-value");return Te.isValidElement(s)?o=Te.cloneElement(s,Ga(Ga({},a),{},{className:l})):Rn(s)?o=s(Ga(Ga({},a),{},{className:l})):o=Te.createElement(Ym,Qp({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(P.Component);CC(Ig,"displayName","CartesianAxis");CC(Ig,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var dSe=["x1","y1","x2","y2","key"],uSe=["offset"];function Jm(e){"@babel/helpers - typeof";return Jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jm(e)}function LF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function ao(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LF(Object(r),!0).forEach(function(s){hSe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function hSe(e,t,r){return t=fSe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fSe(e){var t=mSe(e,"string");return Jm(t)=="symbol"?t:t+""}function mSe(e,t){if(Jm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Jm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _m(){return _m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},_m.apply(this,arguments)}function DF(e,t){if(e==null)return{};var r=pSe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function pSe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var xSe=function(t){var r=t.fill;if(!r||r==="none")return null;var s=t.fillOpacity,a=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return Te.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:s,className:"recharts-cartesian-grid-bg"})};function NK(e,t){var r;if(Te.isValidElement(e))r=Te.cloneElement(e,t);else if(Rn(e))r=e(t);else{var s=t.x1,a=t.y1,i=t.x2,o=t.y2,l=t.key,c=DF(t,dSe),d=bn(c,!1);d.offset;var u=DF(d,uSe);r=Te.createElement("line",_m({},u,{x1:s,y1:a,x2:i,y2:o,fill:"none",key:l}))}return r}function gSe(e){var t=e.x,r=e.width,s=e.horizontal,a=s===void 0?!0:s,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var d=ao(ao({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return NK(a,d)});return Te.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function vSe(e){var t=e.y,r=e.height,s=e.vertical,a=s===void 0?!0:s,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var d=ao(ao({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return NK(a,d)});return Te.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function ySe(e){var t=e.horizontalFill,r=e.fillOpacity,s=e.x,a=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,d=c===void 0?!0:c;if(!d||!t||!t.length)return null;var u=l.map(function(g){return Math.round(g+a-a)}).sort(function(g,x){return g-x});a!==u[0]&&u.unshift(0);var h=u.map(function(g,x){var b=!u[x+1],y=b?a+o-g:u[x+1]-g;if(y<=0)return null;var v=x%t.length;return Te.createElement("rect",{key:"react-".concat(x),y:g,x:s,height:y,width:i,stroke:"none",fill:t[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return Te.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function bSe(e){var t=e.vertical,r=t===void 0?!0:t,s=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,d=e.verticalPoints;if(!r||!s||!s.length)return null;var u=d.map(function(g){return Math.round(g+i-i)}).sort(function(g,x){return g-x});i!==u[0]&&u.unshift(0);var h=u.map(function(g,x){var b=!u[x+1],y=b?i+l-g:u[x+1]-g;if(y<=0)return null;var v=x%s.length;return Te.createElement("rect",{key:"react-".concat(x),x:g,y:o,width:y,height:c,stroke:"none",fill:s[v],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return Te.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var jSe=function(t,r){var s=t.xAxis,a=t.width,i=t.height,o=t.offset;return NW(AC(ao(ao(ao({},Ig.defaultProps),s),{},{ticks:oh(s,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},wSe=function(t,r){var s=t.yAxis,a=t.width,i=t.height,o=t.offset;return NW(AC(ao(ao(ao({},Ig.defaultProps),s),{},{ticks:oh(s,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},Fp={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Of(e){var t,r,s,a,i,o,l=NC(),c=kC(),d=cke(),u=ao(ao({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Fp.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Fp.fill,horizontal:(s=e.horizontal)!==null&&s!==void 0?s:Fp.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Fp.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Fp.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Fp.verticalFill,x:Lt(e.x)?e.x:d.left,y:Lt(e.y)?e.y:d.top,width:Lt(e.width)?e.width:d.width,height:Lt(e.height)?e.height:d.height}),h=u.x,g=u.y,x=u.width,b=u.height,y=u.syncWithTicks,v=u.horizontalValues,j=u.verticalValues,w=ike(),N=oke();if(!Lt(x)||x<=0||!Lt(b)||b<=0||!Lt(h)||h!==+h||!Lt(g)||g!==+g)return null;var A=u.verticalCoordinatesGenerator||jSe,C=u.horizontalCoordinatesGenerator||wSe,M=u.horizontalPoints,I=u.verticalPoints;if((!M||!M.length)&&Rn(C)){var F=v&&v.length,U=C({yAxis:N?ao(ao({},N),{},{ticks:F?v:N.ticks}):void 0,width:l,height:c,offset:d},F?!0:y);xd(Array.isArray(U),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Jm(U),"]")),Array.isArray(U)&&(M=U)}if((!I||!I.length)&&Rn(A)){var W=j&&j.length,D=A({xAxis:w?ao(ao({},w),{},{ticks:W?j:w.ticks}):void 0,width:l,height:c,offset:d},W?!0:y);xd(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Jm(D),"]")),Array.isArray(D)&&(I=D)}return Te.createElement("g",{className:"recharts-cartesian-grid"},Te.createElement(xSe,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),Te.createElement(gSe,_m({},u,{offset:d,horizontalPoints:M,xAxis:w,yAxis:N})),Te.createElement(vSe,_m({},u,{offset:d,verticalPoints:I,xAxis:w,yAxis:N})),Te.createElement(ySe,_m({},u,{horizontalPoints:M})),Te.createElement(bSe,_m({},u,{verticalPoints:I})))}Of.displayName="CartesianGrid";var _Se=["type","layout","connectNulls","ref"],NSe=["key"];function Qx(e){"@babel/helpers - typeof";return Qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qx(e)}function IF(e,t){if(e==null)return{};var r=kSe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function kSe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function F0(){return F0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},F0.apply(this,arguments)}function RF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Pl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RF(Object(r),!0).forEach(function(s){md(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function $p(e){return CSe(e)||ASe(e)||PSe(e)||SSe()}function SSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PSe(e,t){if(e){if(typeof e=="string")return LP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LP(e,t)}}function ASe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function CSe(e){if(Array.isArray(e))return LP(e)}function LP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function TSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FF(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,SK(s.key),s)}}function ESe(e,t,r){return t&&FF(e.prototype,t),r&&FF(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function OSe(e,t,r){return t=ij(t),MSe(e,kK()?Reflect.construct(t,r||[],ij(e).constructor):t.apply(e,r))}function MSe(e,t){if(t&&(Qx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LSe(e)}function LSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kK=function(){return!!e})()}function ij(e){return ij=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ij(e)}function DSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DP(e,t)}function DP(e,t){return DP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},DP(e,t)}function md(e,t,r){return t=SK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SK(e){var t=ISe(e,"string");return Qx(t)=="symbol"?t:t+""}function ISe(e,t){if(Qx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Qx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Jx=(function(e){function t(){var r;TSe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=OSe(this,t,[].concat(a)),md(r,"state",{isAnimationFinished:!0,totalLength:0}),md(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),md(r,"getStrokeDasharray",function(o,l,c){var d=c.reduce(function(j,w){return j+w});if(!d)return r.generateSimpleStrokeDasharray(l,o);for(var u=Math.floor(o/d),h=o%d,g=l-o,x=[],b=0,y=0;b<c.length;y+=c[b],++b)if(y+c[b]>h){x=[].concat($p(c.slice(0,b)),[h-y]);break}var v=x.length%2===0?[0,g]:[g];return[].concat($p(t.repeat(c,u)),$p(x),v).map(function(j){return"".concat(j,"px")}).join(", ")}),md(r,"id",Eg("recharts-line-")),md(r,"pathRef",function(o){r.mainCurve=o}),md(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),md(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return DSe(t,e),ESe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();this.setState({totalLength:s})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();s!==this.state.totalLength&&this.setState({totalLength:s})}}},{key:"getTotalLength",value:function(){var s=this.mainCurve;try{return s&&s.getTotalLength&&s.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,h=Fl(u,my);if(!h)return null;var g=function(y,v){return{x:y.x,y:y.y,value:y.value,errorVal:Qa(y.payload,v)}},x={clipPath:s?"url(#clipPath-".concat(a,")"):null};return Te.createElement(Or,x,h.map(function(b){return Te.cloneElement(b,{key:"bar-".concat(b.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,dataPointFormatter:g})}))}},{key:"renderDots",value:function(s,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,u=l.dataKey,h=bn(this.props,!1),g=bn(c,!0),x=d.map(function(y,v){var j=Pl(Pl(Pl({key:"dot-".concat(v),r:3},h),g),{},{index:v,cx:y.x,cy:y.y,value:y.value,dataKey:u,payload:y.payload,points:d});return t.renderDotItem(c,j)}),b={clipPath:s?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return Te.createElement(Or,F0({className:"recharts-line-dots",key:"dots"},b),x)}},{key:"renderCurveStatically",value:function(s,a,i,o){var l=this.props,c=l.type,d=l.layout,u=l.connectNulls;l.ref;var h=IF(l,_Se),g=Pl(Pl(Pl({},bn(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:s},o),{},{type:c,layout:d,connectNulls:u});return Te.createElement(B1,F0({},g,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(s,a){var i=this,o=this.props,l=o.points,c=o.strokeDasharray,d=o.isAnimationActive,u=o.animationBegin,h=o.animationDuration,g=o.animationEasing,x=o.animationId,b=o.animateNewValues,y=o.width,v=o.height,j=this.state,w=j.prevPoints,N=j.totalLength;return Te.createElement(Nu,{begin:u,duration:h,isActive:d,easing:g,from:{t:0},to:{t:1},key:"line-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(A){var C=A.t;if(w){var M=w.length/l.length,I=l.map(function(R,z){var Z=Math.floor(z*M);if(w[Z]){var se=w[Z],J=El(se.x,R.x),Q=El(se.y,R.y);return Pl(Pl({},R),{},{x:J(C),y:Q(C)})}if(b){var H=El(y*2,R.x),ne=El(v/2,R.y);return Pl(Pl({},R),{},{x:H(C),y:ne(C)})}return Pl(Pl({},R),{},{x:R.x,y:R.y})});return i.renderCurveStatically(I,s,a)}var F=El(0,N),U=F(C),W;if(c){var D="".concat(c).split(/[,\s]+/gim).map(function(R){return parseFloat(R)});W=i.getStrokeDasharray(U,N,D)}else W=i.generateSimpleStrokeDasharray(N,U);return i.renderCurveStatically(l,s,a,{strokeDasharray:W})})}},{key:"renderCurve",value:function(s,a){var i=this.props,o=i.points,l=i.isAnimationActive,c=this.state,d=c.prevPoints,u=c.totalLength;return l&&o&&o.length&&(!d&&u>0||!fy(d,o))?this.renderCurveWithAnimation(s,a):this.renderCurveStatically(o,s,a)}},{key:"render",value:function(){var s,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,d=a.xAxis,u=a.yAxis,h=a.top,g=a.left,x=a.width,b=a.height,y=a.isAnimationActive,v=a.id;if(i||!l||!l.length)return null;var j=this.state.isAnimationFinished,w=l.length===1,N=Hn("recharts-line",c),A=d&&d.allowDataOverflow,C=u&&u.allowDataOverflow,M=A||C,I=zn(v)?this.id:v,F=(s=bn(o,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},U=F.r,W=U===void 0?3:U,D=F.strokeWidth,R=D===void 0?2:D,z=ppe(o)?o:{},Z=z.clipDot,se=Z===void 0?!0:Z,J=W*2+R;return Te.createElement(Or,{className:N},A||C?Te.createElement("defs",null,Te.createElement("clipPath",{id:"clipPath-".concat(I)},Te.createElement("rect",{x:A?g:g-x/2,y:C?h:h-b/2,width:A?x:x*2,height:C?b:b*2})),!se&&Te.createElement("clipPath",{id:"clipPath-dots-".concat(I)},Te.createElement("rect",{x:g-J/2,y:h-J/2,width:x+J,height:b+J}))):null,!w&&this.renderCurve(M,I),this.renderErrorBar(M,I),(w||o)&&this.renderDots(M,se,I),(!y||j)&&mh.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,prevPoints:a.curPoints}:s.points!==a.curPoints?{curPoints:s.points}:null}},{key:"repeat",value:function(s,a){for(var i=s.length%2!==0?[].concat($p(s),[0]):s,o=[],l=0;l<a;++l)o=[].concat($p(o),$p(i));return o}},{key:"renderDotItem",value:function(s,a){var i;if(Te.isValidElement(s))i=Te.cloneElement(s,a);else if(Rn(s))i=s(a);else{var o=a.key,l=IF(a,NSe),c=Hn("recharts-line-dot",typeof s!="boolean"?s.className:"");i=Te.createElement(pw,F0({key:o},l,{className:c}))}return i}}])})(P.PureComponent);md(Jx,"displayName","Line");md(Jx,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!lp.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});md(Jx,"getComposedData",function(e){var t=e.props,r=e.xAxis,s=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,d=e.offset,u=t.layout,h=c.map(function(g,x){var b=Qa(g,o);return u==="horizontal"?{x:BR({axis:r,ticks:a,bandSize:l,entry:g,index:x}),y:zn(b)?null:s.scale(b),value:b,payload:g}:{x:zn(b)?null:r.scale(b),y:BR({axis:s,ticks:i,bandSize:l,entry:g,index:x}),value:b,payload:g}});return Pl({points:h,layout:u},d)});function eg(e){"@babel/helpers - typeof";return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eg(e)}function RSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FSe(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,CK(s.key),s)}}function $Se(e,t,r){return t&&FSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function BSe(e,t,r){return t=oj(t),qSe(e,PK()?Reflect.construct(t,r||[],oj(e).constructor):t.apply(e,r))}function qSe(e,t){if(t&&(eg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zSe(e)}function zSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PK=function(){return!!e})()}function oj(e){return oj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},oj(e)}function VSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IP(e,t)}function IP(e,t){return IP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},IP(e,t)}function AK(e,t,r){return t=CK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CK(e){var t=USe(e,"string");return eg(t)=="symbol"?t:t+""}function USe(e,t){if(eg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(eg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function RP(){return RP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},RP.apply(this,arguments)}function HSe(e){var t=e.xAxisId,r=NC(),s=kC(),a=fK(t);return a==null?null:P.createElement(Ig,RP({},a,{className:Hn("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:s},ticksGenerator:function(o){return oh(o,!0)}}))}var yd=(function(e){function t(){return RSe(this,t),BSe(this,t,arguments)}return VSe(t,e),$Se(t,[{key:"render",value:function(){return P.createElement(HSe,this.props)}}])})(P.Component);AK(yd,"displayName","XAxis");AK(yd,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function tg(e){"@babel/helpers - typeof";return tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tg(e)}function WSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KSe(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,OK(s.key),s)}}function GSe(e,t,r){return t&&KSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZSe(e,t,r){return t=lj(t),YSe(e,TK()?Reflect.construct(t,r||[],lj(e).constructor):t.apply(e,r))}function YSe(e,t){if(t&&(tg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XSe(e)}function XSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TK=function(){return!!e})()}function lj(e){return lj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lj(e)}function QSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FP(e,t)}function FP(e,t){return FP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},FP(e,t)}function EK(e,t,r){return t=OK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OK(e){var t=JSe(e,"string");return tg(t)=="symbol"?t:t+""}function JSe(e,t){if(tg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(tg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function $P(){return $P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},$P.apply(this,arguments)}var e4e=function(t){var r=t.yAxisId,s=NC(),a=kC(),i=mK(r);return i==null?null:P.createElement(Ig,$P({},i,{className:Hn("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:s,height:a},ticksGenerator:function(l){return oh(l,!0)}}))},kc=(function(e){function t(){return WSe(this,t),ZSe(this,t,arguments)}return QSe(t,e),GSe(t,[{key:"render",value:function(){return P.createElement(e4e,this.props)}}])})(P.Component);EK(kc,"displayName","YAxis");EK(kc,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function $F(e){return s4e(e)||r4e(e)||n4e(e)||t4e()}function t4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n4e(e,t){if(e){if(typeof e=="string")return BP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BP(e,t)}}function r4e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function s4e(e){if(Array.isArray(e))return BP(e)}function BP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var qP=function(t,r,s,a,i){var o=Fl(t,PC),l=Fl(t,Nw),c=[].concat($F(o),$F(l)),d=Fl(t,Sw),u="".concat(a,"Id"),h=a[0],g=r;if(c.length&&(g=c.reduce(function(y,v){if(v.props[u]===s&&pu(v.props,"extendDomain")&&Lt(v.props[h])){var j=v.props[h];return[Math.min(y[0],j),Math.max(y[1],j)]}return y},g)),d.length){var x="".concat(h,"1"),b="".concat(h,"2");g=d.reduce(function(y,v){if(v.props[u]===s&&pu(v.props,"extendDomain")&&Lt(v.props[x])&&Lt(v.props[b])){var j=v.props[x],w=v.props[b];return[Math.min(y[0],j,w),Math.max(y[1],j,w)]}return y},g)}return i&&i.length&&(g=i.reduce(function(y,v){return Lt(v)?[Math.min(y[0],v),Math.max(y[1],v)]:y},g)),g},sS={exports:{}},BF;function a4e(){return BF||(BF=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(r=!1));function a(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,h,g){if(typeof u!="function")throw new TypeError("The listener must be a function");var x=new a(u,h||c,g),b=r?r+d:d;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],x]:c._events[b].push(x):(c._events[b]=x,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)t.call(u,h)&&d.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=r?r+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var g=0,x=h.length,b=new Array(x);g<x;g++)b[g]=h[g].fn;return b},l.prototype.listenerCount=function(d){var u=r?r+d:d,h=this._events[u];return h?h.fn?1:h.length:0},l.prototype.emit=function(d,u,h,g,x,b){var y=r?r+d:d;if(!this._events[y])return!1;var v=this._events[y],j=arguments.length,w,N;if(v.fn){switch(v.once&&this.removeListener(d,v.fn,void 0,!0),j){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,h),!0;case 4:return v.fn.call(v.context,u,h,g),!0;case 5:return v.fn.call(v.context,u,h,g,x),!0;case 6:return v.fn.call(v.context,u,h,g,x,b),!0}for(N=1,w=new Array(j-1);N<j;N++)w[N-1]=arguments[N];v.fn.apply(v.context,w)}else{var A=v.length,C;for(N=0;N<A;N++)switch(v[N].once&&this.removeListener(d,v[N].fn,void 0,!0),j){case 1:v[N].fn.call(v[N].context);break;case 2:v[N].fn.call(v[N].context,u);break;case 3:v[N].fn.call(v[N].context,u,h);break;case 4:v[N].fn.call(v[N].context,u,h,g);break;default:if(!w)for(C=1,w=new Array(j-1);C<j;C++)w[C-1]=arguments[C];v[N].fn.apply(v[N].context,w)}}return!0},l.prototype.on=function(d,u,h){return i(this,d,u,h,!1)},l.prototype.once=function(d,u,h){return i(this,d,u,h,!0)},l.prototype.removeListener=function(d,u,h,g){var x=r?r+d:d;if(!this._events[x])return this;if(!u)return o(this,x),this;var b=this._events[x];if(b.fn)b.fn===u&&(!g||b.once)&&(!h||b.context===h)&&o(this,x);else{for(var y=0,v=[],j=b.length;y<j;y++)(b[y].fn!==u||g&&!b[y].once||h&&b[y].context!==h)&&v.push(b[y]);v.length?this._events[x]=v.length===1?v[0]:v:o(this,x)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&o(this,u)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(sS)),sS.exports}var i4e=a4e();const o4e=Dr(i4e);var aS=new o4e,iS="recharts.syncMouseEvents";function Dv(e){"@babel/helpers - typeof";return Dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dv(e)}function l4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c4e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,MK(s.key),s)}}function d4e(e,t,r){return t&&c4e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function oS(e,t,r){return t=MK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MK(e){var t=u4e(e,"string");return Dv(t)=="symbol"?t:t+""}function u4e(e,t){if(Dv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Dv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var h4e=(function(){function e(){l4e(this,e),oS(this,"activeIndex",0),oS(this,"coordinateList",[]),oS(this,"layout","horizontal")}return d4e(e,[{key:"setDetails",value:function(r){var s,a=r.coordinateList,i=a===void 0?null:a,o=r.container,l=o===void 0?null:o,c=r.layout,d=c===void 0?null:c,u=r.offset,h=u===void 0?null:u,g=r.mouseHandlerCallback,x=g===void 0?null:g;this.coordinateList=(s=i??this.coordinateList)!==null&&s!==void 0?s:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,s;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,d=((r=window)===null||r===void 0?void 0:r.scrollX)||0,u=((s=window)===null||s===void 0?void 0:s.scrollY)||0,h=i+c+d,g=o+this.offset.top+l/2+u;this.mouseHandlerCallback({pageX:h,pageY:g})}}}])})();function f4e(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var s=e==null?void 0:e[0],a=e==null?void 0:e[1];if(s&&a&&Lt(s)&&Lt(a))return!0}return!1}function m4e(e,t,r,s){var a=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?s:r.width-1,height:e==="horizontal"?r.height-1:s}}function LK(e){var t=e.cx,r=e.cy,s=e.radius,a=e.startAngle,i=e.endAngle,o=js(t,r,s,a),l=js(t,r,s,i);return{points:[o,l],cx:t,cy:r,radius:s,startAngle:a,endAngle:i}}function p4e(e,t,r){var s,a,i,o;if(e==="horizontal")s=t.x,i=s,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,s=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,d=t.innerRadius,u=t.outerRadius,h=t.angle,g=js(l,c,d,h),x=js(l,c,u,h);s=g.x,a=g.y,i=x.x,o=x.y}else return LK(t);return[{x:s,y:a},{x:i,y:o}]}function Iv(e){"@babel/helpers - typeof";return Iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iv(e)}function qF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function kb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qF(Object(r),!0).forEach(function(s){x4e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function x4e(e,t,r){return t=g4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g4e(e){var t=v4e(e,"string");return Iv(t)=="symbol"?t:t+""}function v4e(e,t){if(Iv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Iv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function y4e(e){var t,r,s=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,u=e.tooltipAxisBandSize,h=e.layout,g=e.chartName,x=(t=s.props.cursor)!==null&&t!==void 0?t:(r=s.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!s||!x||!i||!o||g!=="ScatterChart"&&a!=="axis")return null;var b,y=B1;if(g==="ScatterChart")b=o,y=q_e;else if(g==="BarChart")b=m4e(h,o,c,u),y=bC;else if(h==="radial"){var v=LK(o),j=v.cx,w=v.cy,N=v.radius,A=v.startAngle,C=v.endAngle;b={cx:j,cy:w,startAngle:A,endAngle:C,innerRadius:N,outerRadius:N},y=DW}else b={points:p4e(h,o,c)},y=B1;var M=kb(kb(kb(kb({stroke:"#ccc",pointerEvents:"none"},c),b),bn(x,!1)),{},{payload:l,payloadIndex:d,className:Hn("recharts-tooltip-cursor",x.className)});return P.isValidElement(x)?P.cloneElement(x,M):P.createElement(y,M)}var b4e=["item"],j4e=["children","className","width","height","style","compact","title","desc"];function ng(e){"@babel/helpers - typeof";return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ng(e)}function Jp(){return Jp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Jp.apply(this,arguments)}function zF(e,t){return N4e(e)||_4e(e,t)||IK(e,t)||w4e()}function w4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _4e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function N4e(e){if(Array.isArray(e))return e}function VF(e,t){if(e==null)return{};var r=k4e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function k4e(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function S4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P4e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,RK(s.key),s)}}function A4e(e,t,r){return t&&P4e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function C4e(e,t,r){return t=cj(t),T4e(e,DK()?Reflect.construct(t,r||[],cj(e).constructor):t.apply(e,r))}function T4e(e,t){if(t&&(ng(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E4e(e)}function E4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DK=function(){return!!e})()}function cj(e){return cj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cj(e)}function O4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zP(e,t)}function zP(e,t){return zP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},zP(e,t)}function rg(e){return D4e(e)||L4e(e)||IK(e)||M4e()}function M4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IK(e,t){if(e){if(typeof e=="string")return VP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VP(e,t)}}function L4e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function D4e(e){if(Array.isArray(e))return VP(e)}function VP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function UF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function ct(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UF(Object(r),!0).forEach(function(s){Nn(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Nn(e,t,r){return t=RK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RK(e){var t=I4e(e,"string");return ng(t)=="symbol"?t:t+""}function I4e(e,t){if(ng(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(ng(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var R4e={xAxis:["bottom","top"],yAxis:["left","right"]},F4e={width:"100%",height:"100%"},FK={x:0,y:0};function Sb(e){return e}var $4e=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},B4e=function(t,r,s,a){var i=r.find(function(u){return u&&u.index===s});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=a.radius;return ct(ct(ct({},a),js(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,d=a.angle;return ct(ct(ct({},a),js(a.cx,a.cy,c,d)),{},{angle:d,radius:c})}return FK},Pw=function(t,r){var s=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(s??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(rg(l),rg(d)):l},[]);return o.length>0?o:t&&t.length&&Lt(a)&&Lt(i)?t.slice(a,i+1):[]};function $K(e){return e==="number"?[0,"auto"]:void 0}var UP=function(t,r,s,a){var i=t.graphicalItems,o=t.tooltipAxis,l=Pw(r,t);return s<0||!i||!i.length||s>=l.length?null:i.reduce(function(c,d){var u,h=(u=d.props.data)!==null&&u!==void 0?u:r;h&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=s&&(h=h.slice(t.dataStartIndex,t.dataEndIndex+1));var g;if(o.dataKey&&!o.allowDuplicatedCategory){var x=h===void 0?l:h;g=h1(x,o.dataKey,a)}else g=h&&h[s]||l[s];return g?[].concat(rg(c),[CW(d,g)]):c},[])},HF=function(t,r,s,a){var i=a||{x:t.chartX,y:t.chartY},o=$4e(i,s),l=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,u=hje(o,l,d,c);if(u>=0&&d){var h=d[u]&&d[u].value,g=UP(t,r,u,h),x=B4e(s,l,u,i);return{activeTooltipIndex:u,activeLabel:h,activePayload:g,activeCoordinate:x}}return null},q4e=function(t,r){var s=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.layout,h=t.children,g=t.stackOffset,x=_W(u,i);return s.reduce(function(b,y){var v,j=y.type.defaultProps!==void 0?ct(ct({},y.type.defaultProps),y.props):y.props,w=j.type,N=j.dataKey,A=j.allowDataOverflow,C=j.allowDuplicatedCategory,M=j.scale,I=j.ticks,F=j.includeHidden,U=j[o];if(b[U])return b;var W=Pw(t.data,{graphicalItems:a.filter(function(G){var te,fe=o in G.props?G.props[o]:(te=G.type.defaultProps)===null||te===void 0?void 0:te[o];return fe===U}),dataStartIndex:c,dataEndIndex:d}),D=W.length,R,z,Z;f4e(j.domain,A,w)&&(R=sP(j.domain,null,A),x&&(w==="number"||M!=="auto")&&(Z=L0(W,N,"category")));var se=$K(w);if(!R||R.length===0){var J,Q=(J=j.domain)!==null&&J!==void 0?J:se;if(N){if(R=L0(W,N,w),w==="category"&&x){var H=ape(R);C&&H?(z=R,R=Y1(0,D)):C||(R=UR(Q,R,y).reduce(function(G,te){return G.indexOf(te)>=0?G:[].concat(rg(G),[te])},[]))}else if(w==="category")C?R=R.filter(function(G){return G!==""&&!zn(G)}):R=UR(Q,R,y).reduce(function(G,te){return G.indexOf(te)>=0||te===""||zn(te)?G:[].concat(rg(G),[te])},[]);else if(w==="number"){var ne=gje(W,a.filter(function(G){var te,fe,be=o in G.props?G.props[o]:(te=G.type.defaultProps)===null||te===void 0?void 0:te[o],xe="hide"in G.props?G.props.hide:(fe=G.type.defaultProps)===null||fe===void 0?void 0:fe.hide;return be===U&&(F||!xe)}),N,i,u);ne&&(R=ne)}x&&(w==="number"||M!=="auto")&&(Z=L0(W,N,"category"))}else x?R=Y1(0,D):l&&l[U]&&l[U].hasStack&&w==="number"?R=g==="expand"?[0,1]:AW(l[U].stackGroups,c,d):R=wW(W,a.filter(function(G){var te=o in G.props?G.props[o]:G.type.defaultProps[o],fe="hide"in G.props?G.props.hide:G.type.defaultProps.hide;return te===U&&(F||!fe)}),w,u,!0);if(w==="number")R=qP(h,R,U,i,I),Q&&(R=sP(Q,R,A));else if(w==="category"&&Q){var ue=Q,ae=R.every(function(G){return ue.indexOf(G)>=0});ae&&(R=ue)}}return ct(ct({},b),{},Nn({},U,ct(ct({},j),{},{axisType:i,domain:R,categoricalDomain:Z,duplicateDomain:z,originalDomain:(v=j.domain)!==null&&v!==void 0?v:se,isCategorical:x,layout:u})))},{})},z4e=function(t,r){var s=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.layout,h=t.children,g=Pw(t.data,{graphicalItems:s,dataStartIndex:c,dataEndIndex:d}),x=g.length,b=_W(u,i),y=-1;return s.reduce(function(v,j){var w=j.type.defaultProps!==void 0?ct(ct({},j.type.defaultProps),j.props):j.props,N=w[o],A=$K("number");if(!v[N]){y++;var C;return b?C=Y1(0,x):l&&l[N]&&l[N].hasStack?(C=AW(l[N].stackGroups,c,d),C=qP(h,C,N,i)):(C=sP(A,wW(g,s.filter(function(M){var I,F,U=o in M.props?M.props[o]:(I=M.type.defaultProps)===null||I===void 0?void 0:I[o],W="hide"in M.props?M.props.hide:(F=M.type.defaultProps)===null||F===void 0?void 0:F.hide;return U===N&&!W}),"number",u),a.defaultProps.allowDataOverflow),C=qP(h,C,N,i)),ct(ct({},v),{},Nn({},N,ct(ct({axisType:i},a.defaultProps),{},{hide:!0,orientation:Rl(R4e,"".concat(i,".").concat(y%2),null),domain:C,originalDomain:A,isCategorical:b,layout:u})))}return v},{})},V4e=function(t,r){var s=r.axisType,a=s===void 0?"xAxis":s,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.children,h="".concat(a,"Id"),g=Fl(u,i),x={};return g&&g.length?x=q4e(t,{axes:g,graphicalItems:o,axisType:a,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(x=z4e(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),x},U4e=function(t){var r=af(t),s=oh(r,!1,!0);return{tooltipTicks:s,orderedTooltipTicks:KA(s,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:R1(r,s)}},WF=function(t){var r=t.children,s=t.defaultShowTooltip,a=Cl(r,Wx),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!s}},H4e=function(t){return!t||!t.length?!1:t.some(function(r){var s=uh(r&&r.type);return s&&s.indexOf("Bar")>=0})},KF=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},W4e=function(t,r){var s=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,d=s.width,u=s.height,h=s.children,g=s.margin||{},x=Cl(h,Wx),b=Cl(h,hh),y=Object.keys(c).reduce(function(C,M){var I=c[M],F=I.orientation;return!I.mirror&&!I.hide?ct(ct({},C),{},Nn({},F,C[F]+I.width)):C},{left:g.left||0,right:g.right||0}),v=Object.keys(o).reduce(function(C,M){var I=o[M],F=I.orientation;return!I.mirror&&!I.hide?ct(ct({},C),{},Nn({},F,Rl(C,"".concat(F))+I.height)):C},{top:g.top||0,bottom:g.bottom||0}),j=ct(ct({},v),y),w=j.bottom;x&&(j.bottom+=x.props.height||Wx.defaultProps.height),b&&r&&(j=pje(j,a,s,r));var N=d-j.left-j.right,A=u-j.top-j.bottom;return ct(ct({brushBottom:w},j),{},{width:Math.max(N,0),height:Math.max(A,0)})},K4e=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},TC=function(t){var r=t.chartName,s=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,d=t.legendContent,u=t.formatAxisMap,h=t.defaultProps,g=function(j,w){var N=w.graphicalItems,A=w.stackGroups,C=w.offset,M=w.updateId,I=w.dataStartIndex,F=w.dataEndIndex,U=j.barSize,W=j.layout,D=j.barGap,R=j.barCategoryGap,z=j.maxBarSize,Z=KF(W),se=Z.numericAxisName,J=Z.cateAxisName,Q=H4e(N),H=[];return N.forEach(function(ne,ue){var ae=Pw(j.data,{graphicalItems:[ne],dataStartIndex:I,dataEndIndex:F}),G=ne.type.defaultProps!==void 0?ct(ct({},ne.type.defaultProps),ne.props):ne.props,te=G.dataKey,fe=G.maxBarSize,be=G["".concat(se,"Id")],xe=G["".concat(J,"Id")],we={},Pe=c.reduce(function(Tt,St){var Kt=w["".concat(St.axisType,"Map")],mn=G["".concat(St.axisType,"Id")];Kt&&Kt[mn]||St.axisType==="zAxis"||Qm();var jn=Kt[mn];return ct(ct({},Tt),{},Nn(Nn({},St.axisType,jn),"".concat(St.axisType,"Ticks"),oh(jn)))},we),_e=Pe[J],Ve=Pe["".concat(J,"Ticks")],Ue=A&&A[be]&&A[be].hasStack&&Sje(ne,A[be].stackGroups),Le=uh(ne.type).indexOf("Bar")>=0,dt=R1(_e,Ve),xt=[],Xe=Q&&fje({barSize:U,stackGroups:A,totalSize:K4e(Pe,J)});if(Le){var ke,Bt,Ft=zn(fe)?z:fe,mt=(ke=(Bt=R1(_e,Ve,!0))!==null&&Bt!==void 0?Bt:Ft)!==null&&ke!==void 0?ke:0;xt=mje({barGap:D,barCategoryGap:R,bandSize:mt!==dt?mt:dt,sizeList:Xe[xe],maxBarSize:Ft}),mt!==dt&&(xt=xt.map(function(Tt){return ct(ct({},Tt),{},{position:ct(ct({},Tt.position),{},{offset:Tt.position.offset-mt/2})})}))}var yt=ne&&ne.type&&ne.type.getComposedData;yt&&H.push({props:ct(ct({},yt(ct(ct({},Pe),{},{displayedData:ae,props:j,dataKey:te,item:ne,bandSize:dt,barPosition:xt,offset:C,stackedData:Ue,layout:W,dataStartIndex:I,dataEndIndex:F}))),{},Nn(Nn(Nn({key:ne.key||"item-".concat(ue)},se,Pe[se]),J,Pe[J]),"animationId",M)),childIndex:vpe(ne,j.children),item:ne})}),H},x=function(j,w){var N=j.props,A=j.dataStartIndex,C=j.dataEndIndex,M=j.updateId;if(!sL({props:N}))return null;var I=N.children,F=N.layout,U=N.stackOffset,W=N.data,D=N.reverseStackOrder,R=KF(F),z=R.numericAxisName,Z=R.cateAxisName,se=Fl(I,s),J=Nje(W,se,"".concat(z,"Id"),"".concat(Z,"Id"),U,D),Q=c.reduce(function(G,te){var fe="".concat(te.axisType,"Map");return ct(ct({},G),{},Nn({},fe,V4e(N,ct(ct({},te),{},{graphicalItems:se,stackGroups:te.axisType===z&&J,dataStartIndex:A,dataEndIndex:C}))))},{}),H=W4e(ct(ct({},Q),{},{props:N,graphicalItems:se}),w==null?void 0:w.legendBBox);Object.keys(Q).forEach(function(G){Q[G]=u(N,Q[G],H,G.replace("Map",""),r)});var ne=Q["".concat(Z,"Map")],ue=U4e(ne),ae=g(N,ct(ct({},Q),{},{dataStartIndex:A,dataEndIndex:C,updateId:M,graphicalItems:se,stackGroups:J,offset:H}));return ct(ct({formattedGraphicalItems:ae,graphicalItems:se,offset:H,stackGroups:J},ue),Q)},b=(function(v){function j(w){var N,A,C;return S4e(this,j),C=C4e(this,j,[w]),Nn(C,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Nn(C,"accessibilityManager",new h4e),Nn(C,"handleLegendBBoxUpdate",function(M){if(M){var I=C.state,F=I.dataStartIndex,U=I.dataEndIndex,W=I.updateId;C.setState(ct({legendBBox:M},x({props:C.props,dataStartIndex:F,dataEndIndex:U,updateId:W},ct(ct({},C.state),{},{legendBBox:M}))))}}),Nn(C,"handleReceiveSyncEvent",function(M,I,F){if(C.props.syncId===M){if(F===C.eventEmitterSymbol&&typeof C.props.syncMethod!="function")return;C.applySyncEvent(I)}}),Nn(C,"handleBrushChange",function(M){var I=M.startIndex,F=M.endIndex;if(I!==C.state.dataStartIndex||F!==C.state.dataEndIndex){var U=C.state.updateId;C.setState(function(){return ct({dataStartIndex:I,dataEndIndex:F},x({props:C.props,dataStartIndex:I,dataEndIndex:F,updateId:U},C.state))}),C.triggerSyncEvent({dataStartIndex:I,dataEndIndex:F})}}),Nn(C,"handleMouseEnter",function(M){var I=C.getMouseInfo(M);if(I){var F=ct(ct({},I),{},{isTooltipActive:!0});C.setState(F),C.triggerSyncEvent(F);var U=C.props.onMouseEnter;Rn(U)&&U(F,M)}}),Nn(C,"triggeredAfterMouseMove",function(M){var I=C.getMouseInfo(M),F=I?ct(ct({},I),{},{isTooltipActive:!0}):{isTooltipActive:!1};C.setState(F),C.triggerSyncEvent(F);var U=C.props.onMouseMove;Rn(U)&&U(F,M)}),Nn(C,"handleItemMouseEnter",function(M){C.setState(function(){return{isTooltipActive:!0,activeItem:M,activePayload:M.tooltipPayload,activeCoordinate:M.tooltipPosition||{x:M.cx,y:M.cy}}})}),Nn(C,"handleItemMouseLeave",function(){C.setState(function(){return{isTooltipActive:!1}})}),Nn(C,"handleMouseMove",function(M){M.persist(),C.throttleTriggeredAfterMouseMove(M)}),Nn(C,"handleMouseLeave",function(M){C.throttleTriggeredAfterMouseMove.cancel();var I={isTooltipActive:!1};C.setState(I),C.triggerSyncEvent(I);var F=C.props.onMouseLeave;Rn(F)&&F(I,M)}),Nn(C,"handleOuterEvent",function(M){var I=gpe(M),F=Rl(C.props,"".concat(I));if(I&&Rn(F)){var U,W;/.*touch.*/i.test(I)?W=C.getMouseInfo(M.changedTouches[0]):W=C.getMouseInfo(M),F((U=W)!==null&&U!==void 0?U:{},M)}}),Nn(C,"handleClick",function(M){var I=C.getMouseInfo(M);if(I){var F=ct(ct({},I),{},{isTooltipActive:!0});C.setState(F),C.triggerSyncEvent(F);var U=C.props.onClick;Rn(U)&&U(F,M)}}),Nn(C,"handleMouseDown",function(M){var I=C.props.onMouseDown;if(Rn(I)){var F=C.getMouseInfo(M);I(F,M)}}),Nn(C,"handleMouseUp",function(M){var I=C.props.onMouseUp;if(Rn(I)){var F=C.getMouseInfo(M);I(F,M)}}),Nn(C,"handleTouchMove",function(M){M.changedTouches!=null&&M.changedTouches.length>0&&C.throttleTriggeredAfterMouseMove(M.changedTouches[0])}),Nn(C,"handleTouchStart",function(M){M.changedTouches!=null&&M.changedTouches.length>0&&C.handleMouseDown(M.changedTouches[0])}),Nn(C,"handleTouchEnd",function(M){M.changedTouches!=null&&M.changedTouches.length>0&&C.handleMouseUp(M.changedTouches[0])}),Nn(C,"handleDoubleClick",function(M){var I=C.props.onDoubleClick;if(Rn(I)){var F=C.getMouseInfo(M);I(F,M)}}),Nn(C,"handleContextMenu",function(M){var I=C.props.onContextMenu;if(Rn(I)){var F=C.getMouseInfo(M);I(F,M)}}),Nn(C,"triggerSyncEvent",function(M){C.props.syncId!==void 0&&aS.emit(iS,C.props.syncId,M,C.eventEmitterSymbol)}),Nn(C,"applySyncEvent",function(M){var I=C.props,F=I.layout,U=I.syncMethod,W=C.state.updateId,D=M.dataStartIndex,R=M.dataEndIndex;if(M.dataStartIndex!==void 0||M.dataEndIndex!==void 0)C.setState(ct({dataStartIndex:D,dataEndIndex:R},x({props:C.props,dataStartIndex:D,dataEndIndex:R,updateId:W},C.state)));else if(M.activeTooltipIndex!==void 0){var z=M.chartX,Z=M.chartY,se=M.activeTooltipIndex,J=C.state,Q=J.offset,H=J.tooltipTicks;if(!Q)return;if(typeof U=="function")se=U(H,M);else if(U==="value"){se=-1;for(var ne=0;ne<H.length;ne++)if(H[ne].value===M.activeLabel){se=ne;break}}var ue=ct(ct({},Q),{},{x:Q.left,y:Q.top}),ae=Math.min(z,ue.x+ue.width),G=Math.min(Z,ue.y+ue.height),te=H[se]&&H[se].value,fe=UP(C.state,C.props.data,se),be=H[se]?{x:F==="horizontal"?H[se].coordinate:ae,y:F==="horizontal"?G:H[se].coordinate}:FK;C.setState(ct(ct({},M),{},{activeLabel:te,activeCoordinate:be,activePayload:fe,activeTooltipIndex:se}))}else C.setState(M)}),Nn(C,"renderCursor",function(M){var I,F=C.state,U=F.isTooltipActive,W=F.activeCoordinate,D=F.activePayload,R=F.offset,z=F.activeTooltipIndex,Z=F.tooltipAxisBandSize,se=C.getTooltipEventType(),J=(I=M.props.active)!==null&&I!==void 0?I:U,Q=C.props.layout,H=M.key||"_recharts-cursor";return Te.createElement(y4e,{key:H,activeCoordinate:W,activePayload:D,activeTooltipIndex:z,chartName:r,element:M,isActive:J,layout:Q,offset:R,tooltipAxisBandSize:Z,tooltipEventType:se})}),Nn(C,"renderPolarAxis",function(M,I,F){var U=Rl(M,"type.axisType"),W=Rl(C.state,"".concat(U,"Map")),D=M.type.defaultProps,R=D!==void 0?ct(ct({},D),M.props):M.props,z=W&&W[R["".concat(U,"Id")]];return P.cloneElement(M,ct(ct({},z),{},{className:Hn(U,z.className),key:M.key||"".concat(I,"-").concat(F),ticks:oh(z,!0)}))}),Nn(C,"renderPolarGrid",function(M){var I=M.props,F=I.radialLines,U=I.polarAngles,W=I.polarRadius,D=C.state,R=D.radiusAxisMap,z=D.angleAxisMap,Z=af(R),se=af(z),J=se.cx,Q=se.cy,H=se.innerRadius,ne=se.outerRadius;return P.cloneElement(M,{polarAngles:Array.isArray(U)?U:oh(se,!0).map(function(ue){return ue.coordinate}),polarRadius:Array.isArray(W)?W:oh(Z,!0).map(function(ue){return ue.coordinate}),cx:J,cy:Q,innerRadius:H,outerRadius:ne,key:M.key||"polar-grid",radialLines:F})}),Nn(C,"renderLegend",function(){var M=C.state.formattedGraphicalItems,I=C.props,F=I.children,U=I.width,W=I.height,D=C.props.margin||{},R=U-(D.left||0)-(D.right||0),z=bW({children:F,formattedGraphicalItems:M,legendWidth:R,legendContent:d});if(!z)return null;var Z=z.item,se=VF(z,b4e);return P.cloneElement(Z,ct(ct({},se),{},{chartWidth:U,chartHeight:W,margin:D,onBBoxUpdate:C.handleLegendBBoxUpdate}))}),Nn(C,"renderTooltip",function(){var M,I=C.props,F=I.children,U=I.accessibilityLayer,W=Cl(F,Ya);if(!W)return null;var D=C.state,R=D.isTooltipActive,z=D.activeCoordinate,Z=D.activePayload,se=D.activeLabel,J=D.offset,Q=(M=W.props.active)!==null&&M!==void 0?M:R;return P.cloneElement(W,{viewBox:ct(ct({},J),{},{x:J.left,y:J.top}),active:Q,label:se,payload:Q?Z:[],coordinate:z,accessibilityLayer:U})}),Nn(C,"renderBrush",function(M){var I=C.props,F=I.margin,U=I.data,W=C.state,D=W.offset,R=W.dataStartIndex,z=W.dataEndIndex,Z=W.updateId;return P.cloneElement(M,{key:M.key||"_recharts-brush",onChange:jb(C.handleBrushChange,M.props.onChange),data:U,x:Lt(M.props.x)?M.props.x:D.left,y:Lt(M.props.y)?M.props.y:D.top+D.height+D.brushBottom-(F.bottom||0),width:Lt(M.props.width)?M.props.width:D.width,startIndex:R,endIndex:z,updateId:"brush-".concat(Z)})}),Nn(C,"renderReferenceElement",function(M,I,F){if(!M)return null;var U=C,W=U.clipPathId,D=C.state,R=D.xAxisMap,z=D.yAxisMap,Z=D.offset,se=M.type.defaultProps||{},J=M.props,Q=J.xAxisId,H=Q===void 0?se.xAxisId:Q,ne=J.yAxisId,ue=ne===void 0?se.yAxisId:ne;return P.cloneElement(M,{key:M.key||"".concat(I,"-").concat(F),xAxis:R[H],yAxis:z[ue],viewBox:{x:Z.left,y:Z.top,width:Z.width,height:Z.height},clipPathId:W})}),Nn(C,"renderActivePoints",function(M){var I=M.item,F=M.activePoint,U=M.basePoint,W=M.childIndex,D=M.isRange,R=[],z=I.props.key,Z=I.item.type.defaultProps!==void 0?ct(ct({},I.item.type.defaultProps),I.item.props):I.item.props,se=Z.activeDot,J=Z.dataKey,Q=ct(ct({index:W,dataKey:J,cx:F.x,cy:F.y,r:4,fill:yC(I.item),strokeWidth:2,stroke:"#fff",payload:F.payload,value:F.value},bn(se,!1)),f1(se));return R.push(j.renderActiveDot(se,Q,"".concat(z,"-activePoint-").concat(W))),U?R.push(j.renderActiveDot(se,ct(ct({},Q),{},{cx:U.x,cy:U.y}),"".concat(z,"-basePoint-").concat(W))):D&&R.push(null),R}),Nn(C,"renderGraphicChild",function(M,I,F){var U=C.filterFormatItem(M,I,F);if(!U)return null;var W=C.getTooltipEventType(),D=C.state,R=D.isTooltipActive,z=D.tooltipAxis,Z=D.activeTooltipIndex,se=D.activeLabel,J=C.props.children,Q=Cl(J,Ya),H=U.props,ne=H.points,ue=H.isRange,ae=H.baseLine,G=U.item.type.defaultProps!==void 0?ct(ct({},U.item.type.defaultProps),U.item.props):U.item.props,te=G.activeDot,fe=G.hide,be=G.activeBar,xe=G.activeShape,we=!!(!fe&&R&&Q&&(te||be||xe)),Pe={};W!=="axis"&&Q&&Q.props.trigger==="click"?Pe={onClick:jb(C.handleItemMouseEnter,M.props.onClick)}:W!=="axis"&&(Pe={onMouseLeave:jb(C.handleItemMouseLeave,M.props.onMouseLeave),onMouseEnter:jb(C.handleItemMouseEnter,M.props.onMouseEnter)});var _e=P.cloneElement(M,ct(ct({},U.props),Pe));function Ve(St){return typeof z.dataKey=="function"?z.dataKey(St.payload):null}if(we)if(Z>=0){var Ue,Le;if(z.dataKey&&!z.allowDuplicatedCategory){var dt=typeof z.dataKey=="function"?Ve:"payload.".concat(z.dataKey.toString());Ue=h1(ne,dt,se),Le=ue&&ae&&h1(ae,dt,se)}else Ue=ne==null?void 0:ne[Z],Le=ue&&ae&&ae[Z];if(xe||be){var xt=M.props.activeIndex!==void 0?M.props.activeIndex:Z;return[P.cloneElement(M,ct(ct(ct({},U.props),Pe),{},{activeIndex:xt})),null,null]}if(!zn(Ue))return[_e].concat(rg(C.renderActivePoints({item:U,activePoint:Ue,basePoint:Le,childIndex:Z,isRange:ue})))}else{var Xe,ke=(Xe=C.getItemByXY(C.state.activeCoordinate))!==null&&Xe!==void 0?Xe:{graphicalItem:_e},Bt=ke.graphicalItem,Ft=Bt.item,mt=Ft===void 0?M:Ft,yt=Bt.childIndex,Tt=ct(ct(ct({},U.props),Pe),{},{activeIndex:yt});return[P.cloneElement(mt,Tt),null,null]}return ue?[_e,null,null]:[_e,null]}),Nn(C,"renderCustomized",function(M,I,F){return P.cloneElement(M,ct(ct({key:"recharts-customized-".concat(F)},C.props),C.state))}),Nn(C,"renderMap",{CartesianGrid:{handler:Sb,once:!0},ReferenceArea:{handler:C.renderReferenceElement},ReferenceLine:{handler:Sb},ReferenceDot:{handler:C.renderReferenceElement},XAxis:{handler:Sb},YAxis:{handler:Sb},Brush:{handler:C.renderBrush,once:!0},Bar:{handler:C.renderGraphicChild},Line:{handler:C.renderGraphicChild},Area:{handler:C.renderGraphicChild},Radar:{handler:C.renderGraphicChild},RadialBar:{handler:C.renderGraphicChild},Scatter:{handler:C.renderGraphicChild},Pie:{handler:C.renderGraphicChild},Funnel:{handler:C.renderGraphicChild},Tooltip:{handler:C.renderCursor,once:!0},PolarGrid:{handler:C.renderPolarGrid,once:!0},PolarAngleAxis:{handler:C.renderPolarAxis},PolarRadiusAxis:{handler:C.renderPolarAxis},Customized:{handler:C.renderCustomized}}),C.clipPathId="".concat((N=w.id)!==null&&N!==void 0?N:Eg("recharts"),"-clip"),C.throttleTriggeredAfterMouseMove=yH(C.triggeredAfterMouseMove,(A=w.throttleDelay)!==null&&A!==void 0?A:1e3/60),C.state={},C}return O4e(j,v),A4e(j,[{key:"componentDidMount",value:function(){var N,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var N=this.props,A=N.children,C=N.data,M=N.height,I=N.layout,F=Cl(A,Ya);if(F){var U=F.props.defaultIndex;if(!(typeof U!="number"||U<0||U>this.state.tooltipTicks.length-1)){var W=this.state.tooltipTicks[U]&&this.state.tooltipTicks[U].value,D=UP(this.state,C,U,W),R=this.state.tooltipTicks[U].coordinate,z=(this.state.offset.top+M)/2,Z=I==="horizontal",se=Z?{x:R,y:z}:{y:R,x:z},J=this.state.formattedGraphicalItems.find(function(H){var ne=H.item;return ne.type.name==="Scatter"});J&&(se=ct(ct({},se),J.props.points[U].tooltipPosition),D=J.props.points[U].tooltipPayload);var Q={activeTooltipIndex:U,isTooltipActive:!0,activeLabel:W,activePayload:D,activeCoordinate:se};this.setState(Q),this.renderCursor(F),this.accessibilityManager.setIndex(U)}}}},{key:"getSnapshotBeforeUpdate",value:function(N,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==N.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==N.margin){var C,M;this.accessibilityManager.setDetails({offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(M=this.props.margin.top)!==null&&M!==void 0?M:0}})}return null}},{key:"componentDidUpdate",value:function(N){S4([Cl(N.children,Ya)],[Cl(this.props.children,Ya)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var N=Cl(this.props.children,Ya);if(N&&typeof N.props.shared=="boolean"){var A=N.props.shared?"axis":"item";return l.indexOf(A)>=0?A:i}return i}},{key:"getMouseInfo",value:function(N){if(!this.container)return null;var A=this.container,C=A.getBoundingClientRect(),M=sve(C),I={chartX:Math.round(N.pageX-M.left),chartY:Math.round(N.pageY-M.top)},F=C.width/A.offsetWidth||1,U=this.inRange(I.chartX,I.chartY,F);if(!U)return null;var W=this.state,D=W.xAxisMap,R=W.yAxisMap,z=this.getTooltipEventType(),Z=HF(this.state,this.props.data,this.props.layout,U);if(z!=="axis"&&D&&R){var se=af(D).scale,J=af(R).scale,Q=se&&se.invert?se.invert(I.chartX):null,H=J&&J.invert?J.invert(I.chartY):null;return ct(ct({},I),{},{xValue:Q,yValue:H},Z)}return Z?ct(ct({},I),Z):null}},{key:"inRange",value:function(N,A){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,M=this.props.layout,I=N/C,F=A/C;if(M==="horizontal"||M==="vertical"){var U=this.state.offset,W=I>=U.left&&I<=U.left+U.width&&F>=U.top&&F<=U.top+U.height;return W?{x:I,y:F}:null}var D=this.state,R=D.angleAxisMap,z=D.radiusAxisMap;if(R&&z){var Z=af(R);return KR({x:I,y:F},Z)}return null}},{key:"parseEventsOfWrapper",value:function(){var N=this.props.children,A=this.getTooltipEventType(),C=Cl(N,Ya),M={};C&&A==="axis"&&(C.props.trigger==="click"?M={onClick:this.handleClick}:M={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var I=f1(this.props,this.handleOuterEvent);return ct(ct({},I),M)}},{key:"addListener",value:function(){aS.on(iS,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){aS.removeListener(iS,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(N,A,C){for(var M=this.state.formattedGraphicalItems,I=0,F=M.length;I<F;I++){var U=M[I];if(U.item===N||U.props.key===N.key||A===uh(U.item.type)&&C===U.childIndex)return U}return null}},{key:"renderClipPath",value:function(){var N=this.clipPathId,A=this.state.offset,C=A.left,M=A.top,I=A.height,F=A.width;return Te.createElement("defs",null,Te.createElement("clipPath",{id:N},Te.createElement("rect",{x:C,y:M,height:I,width:F})))}},{key:"getXScales",value:function(){var N=this.state.xAxisMap;return N?Object.entries(N).reduce(function(A,C){var M=zF(C,2),I=M[0],F=M[1];return ct(ct({},A),{},Nn({},I,F.scale))},{}):null}},{key:"getYScales",value:function(){var N=this.state.yAxisMap;return N?Object.entries(N).reduce(function(A,C){var M=zF(C,2),I=M[0],F=M[1];return ct(ct({},A),{},Nn({},I,F.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(N){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[N])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(N){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[N])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(N){var A=this.state,C=A.formattedGraphicalItems,M=A.activeItem;if(C&&C.length)for(var I=0,F=C.length;I<F;I++){var U=C[I],W=U.props,D=U.item,R=D.type.defaultProps!==void 0?ct(ct({},D.type.defaultProps),D.props):D.props,z=uh(D.type);if(z==="Bar"){var Z=(W.data||[]).find(function(H){return j_e(N,H)});if(Z)return{graphicalItem:U,payload:Z}}else if(z==="RadialBar"){var se=(W.data||[]).find(function(H){return KR(N,H)});if(se)return{graphicalItem:U,payload:se}}else if(bw(U,M)||jw(U,M)||Tv(U,M)){var J=UNe({graphicalItem:U,activeTooltipItem:M,itemData:R.data}),Q=R.activeIndex===void 0?J:R.activeIndex;return{graphicalItem:ct(ct({},U),{},{childIndex:Q}),payload:Tv(U,M)?R.data[J]:U.props.data[J]}}}return null}},{key:"render",value:function(){var N=this;if(!sL(this))return null;var A=this.props,C=A.children,M=A.className,I=A.width,F=A.height,U=A.style,W=A.compact,D=A.title,R=A.desc,z=VF(A,j4e),Z=bn(z,!1);if(W)return Te.createElement(_F,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Te.createElement(A4,Jp({},Z,{width:I,height:F,title:D,desc:R}),this.renderClipPath(),iL(C,this.renderMap)));if(this.props.accessibilityLayer){var se,J;Z.tabIndex=(se=this.props.tabIndex)!==null&&se!==void 0?se:0,Z.role=(J=this.props.role)!==null&&J!==void 0?J:"application",Z.onKeyDown=function(H){N.accessibilityManager.keyboardEvent(H)},Z.onFocus=function(){N.accessibilityManager.focus()}}var Q=this.parseEventsOfWrapper();return Te.createElement(_F,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Te.createElement("div",Jp({className:Hn("recharts-wrapper",M),style:ct({position:"relative",cursor:"default",width:I,height:F},U)},Q,{ref:function(ne){N.container=ne}}),Te.createElement(A4,Jp({},Z,{width:I,height:F,title:D,desc:R,style:F4e}),this.renderClipPath(),iL(C,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(P.Component);Nn(b,"displayName",r),Nn(b,"defaultProps",ct({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),Nn(b,"getDerivedStateFromProps",function(v,j){var w=v.dataKey,N=v.data,A=v.children,C=v.width,M=v.height,I=v.layout,F=v.stackOffset,U=v.margin,W=j.dataStartIndex,D=j.dataEndIndex;if(j.updateId===void 0){var R=WF(v);return ct(ct(ct({},R),{},{updateId:0},x(ct(ct({props:v},R),{},{updateId:0}),j)),{},{prevDataKey:w,prevData:N,prevWidth:C,prevHeight:M,prevLayout:I,prevStackOffset:F,prevMargin:U,prevChildren:A})}if(w!==j.prevDataKey||N!==j.prevData||C!==j.prevWidth||M!==j.prevHeight||I!==j.prevLayout||F!==j.prevStackOffset||!lx(U,j.prevMargin)){var z=WF(v),Z={chartX:j.chartX,chartY:j.chartY,isTooltipActive:j.isTooltipActive},se=ct(ct({},HF(j,N,I)),{},{updateId:j.updateId+1}),J=ct(ct(ct({},z),Z),se);return ct(ct(ct({},J),x(ct({props:v},J),j)),{},{prevDataKey:w,prevData:N,prevWidth:C,prevHeight:M,prevLayout:I,prevStackOffset:F,prevMargin:U,prevChildren:A})}if(!S4(A,j.prevChildren)){var Q,H,ne,ue,ae=Cl(A,Wx),G=ae&&(Q=(H=ae.props)===null||H===void 0?void 0:H.startIndex)!==null&&Q!==void 0?Q:W,te=ae&&(ne=(ue=ae.props)===null||ue===void 0?void 0:ue.endIndex)!==null&&ne!==void 0?ne:D,fe=G!==W||te!==D,be=!zn(N),xe=be&&!fe?j.updateId:j.updateId+1;return ct(ct({updateId:xe},x(ct(ct({props:v},j),{},{updateId:xe,dataStartIndex:G,dataEndIndex:te}),j)),{},{prevChildren:A,dataStartIndex:G,dataEndIndex:te})}return null}),Nn(b,"renderActiveDot",function(v,j,w){var N;return P.isValidElement(v)?N=P.cloneElement(v,j):Rn(v)?N=v(j):N=Te.createElement(pw,j),Te.createElement(Or,{className:"recharts-active-dot",key:w},N)});var y=P.forwardRef(function(j,w){return Te.createElement(b,Jp({},j,{ref:w}))});return y.displayName=b.displayName,y},G4e=TC({chartName:"LineChart",GraphicalChild:Jx,axisComponents:[{axisType:"xAxis",AxisComp:yd},{axisType:"yAxis",AxisComp:kc}],formatAxisMap:aK}),sg=TC({chartName:"BarChart",GraphicalChild:Bl,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:yd},{axisType:"yAxis",AxisComp:kc}],formatAxisMap:aK}),EC=TC({chartName:"PieChart",GraphicalChild:kd,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:yw},{axisType:"radiusAxis",AxisComp:gw}],formatAxisMap:Ije,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function Z4e(){var U;const[e,t]=P.useState({project_id:"",employee_email:"",start_date:"",end_date:""}),[r,s]=P.useState(!1),{data:a=[]}=He({queryKey:["projects"],queryFn:()=>oe.entities.Project.list()}),{data:i=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list()}),{data:o=[]}=He({queryKey:["users"],queryFn:()=>oe.entities.User.list()}),{data:l=[]}=He({queryKey:["time-entries"],queryFn:()=>oe.entities.TimeEntry.list()}),{data:c=[]}=He({queryKey:["journal-entries"],queryFn:()=>oe.entities.DrivingJournalEntry.list()}),d=l.filter(W=>{var se;const D=!e.project_id||((se=W.project_allocations)==null?void 0:se.some(J=>J.project_id===e.project_id)),R=!e.employee_email||W.employee_email===e.employee_email,z=!e.start_date||new Date(W.date)>=new Date(e.start_date),Z=!e.end_date||new Date(W.date)<=new Date(e.end_date);return D&&R&&z&&Z}),u=c.filter(W=>{const D=!e.project_id||W.project_id===e.project_id,R=!e.employee_email||W.driver_email===e.employee_email,z=!e.start_date||new Date(W.start_time)>=new Date(e.start_date),Z=!e.end_date||new Date(W.start_time)<=new Date(e.end_date);return D&&R&&z&&Z}),h=d.reduce((W,D)=>{if(e.project_id&&D.project_allocations){const R=D.project_allocations.find(z=>z.project_id===e.project_id);return W+((R==null?void 0:R.hours)||0)}return W+(D.total_hours||0)},0),g=u.reduce((W,D)=>W+(D.distance_km||0),0),x=u.reduce((W,D)=>W+(D.duration_minutes||0),0),b=a.find(W=>W.id===e.project_id),y=b!=null&&b.hourly_rate?h*b.hourly_rate:0,v=d.reduce((W,D)=>{const R=o.find(Z=>Z.email===D.employee_email),z=(R==null?void 0:R.full_name)||D.employee_email;if(e.project_id&&D.project_allocations){const Z=D.project_allocations.find(se=>se.project_id===e.project_id);Z&&(W[z]=(W[z]||0)+Z.hours)}else W[z]=(W[z]||0)+(D.total_hours||0);return W},{}),j=Object.entries(v).map(([W,D])=>({name:W,hours:Number(D.toFixed(1))})).sort((W,D)=>D.hours-W.hours).slice(0,10),w=d.reduce((W,D)=>{if(e.project_id&&D.project_allocations){const R=D.project_allocations.find(z=>z.project_id===e.project_id);R&&(W[R.category]=(W[R.category]||0)+R.hours)}else W[D.category]=(W[D.category]||0)+(D.total_hours||0);return W},{}),N=Object.entries(w).map(([W,D])=>({name:W,value:Number(D.toFixed(1))})),A=["#3b82f6","#10b981","#f59e0b","#8b5cf6","#ef4444","#06b6d4"],C=u.reduce((W,D)=>{const R=D.driver_name;return W[R]=(W[R]||0)+(D.distance_km||0),W},{}),M=Object.entries(C).map(([W,D])=>({name:W,km:Number(D.toFixed(1))})).sort((W,D)=>D.km-W.km).slice(0,10),I=()=>{s(!0);try{const W=new Sn;W.setFontSize(20),W.text("Projektrapport",20,20),W.setFontSize(10);let D=35;if(b&&(W.text(`Projekt: ${b.name} (${b.project_code})`,20,D),D+=7),e.employee_email){const R=o.find(z=>z.email===e.employee_email);W.text(`Anstlld: ${(R==null?void 0:R.full_name)||e.employee_email}`,20,D),D+=7}(e.start_date||e.end_date)&&(W.text(`Period: ${e.start_date||"Start"} - ${e.end_date||"Slut"}`,20,D),D+=7),W.text(`Genererad: ${Ce(new Date,"PPP",{locale:ut})}`,20,D),D+=15,W.setFontSize(14),W.text("Sammanfattning",20,D),D+=10,W.setFontSize(10),W.text(`Total arbetstid: ${h.toFixed(2)} timmar`,20,D),D+=7,W.text(`Total krstrcka: ${g.toFixed(1)} km`,20,D),D+=7,W.text(`Total krtid: ${Math.round(x/60)} timmar`,20,D),D+=7,y>0&&(W.text(`Berknad kostnad: ${y.toFixed(2)} kr`,20,D),D+=7),D+=10,d.length>0&&(W.setFontSize(12),W.text("Tidrapporter",20,D),D+=10,W.setFontSize(9),d.slice(0,15).forEach(R=>{D>270&&(W.addPage(),D=20);const z=o.find(Z=>Z.email===R.employee_email);if(W.text(`${R.date} - ${(z==null?void 0:z.full_name)||R.employee_email}`,25,D),D+=5,R.project_allocations&&e.project_id){const Z=R.project_allocations.find(se=>se.project_id===e.project_id);Z&&(W.text(`  ${Z.hours}h - ${Z.category} - ${Z.notes||"-"}`,25,D),D+=5)}else W.text(`  ${R.total_hours}h - ${R.category}`,25,D),D+=5;D+=2}),d.length>15&&(W.text(`... och ${d.length-15} till`,25,D),D+=7)),u.length>0&&(D+=5,W.setFontSize(12),W.text("Krjournal",20,D),D+=10,W.setFontSize(9),u.slice(0,15).forEach(R=>{D>270&&(W.addPage(),D=20),W.text(`${Ce(new Date(R.start_time),"PPP",{locale:ut})}`,25,D),D+=5,W.text(`  ${R.driver_name} - ${R.distance_km}km - ${Math.round(R.duration_minutes)}min`,25,D),D+=5,R.purpose&&(W.text(`  ${R.purpose}`,25,D),D+=5),D+=2}),u.length>15&&W.text(`... och ${u.length-15} till`,25,D)),W.save(`projektrapport_${Ce(new Date,"yyyy-MM-dd")}.pdf`)}catch(W){console.error("PDF export error:",W),alert("Kunde inte exportera PDF")}s(!1)},F=()=>{s(!0);try{let W="data:text/csv;charset=utf-8,";W+=`Typ,Datum,Anstlld,Projekt,Timmar,Km,Kategori,Syfte,Kommentar
`,d.forEach(z=>{const Z=o.find(J=>J.email===z.employee_email),se=a.find(J=>J.id===e.project_id);if(z.project_allocations&&e.project_id){const J=z.project_allocations.find(Q=>Q.project_id===e.project_id);J&&(W+=`Tid,${z.date},${(Z==null?void 0:Z.full_name)||z.employee_email},${(se==null?void 0:se.name)||""},${J.hours},0,${J.category},,"${J.notes||""}"
`)}else W+=`Tid,${z.date},${(Z==null?void 0:Z.full_name)||z.employee_email},,${z.total_hours},0,${z.category},,"${z.notes||""}"
`}),u.forEach(z=>{const Z=a.find(se=>se.id===z.project_id);W+=`Krjournal,${Ce(new Date(z.start_time),"yyyy-MM-dd")},${z.driver_name},${(Z==null?void 0:Z.name)||""},${(z.duration_minutes/60).toFixed(2)},${z.distance_km},${z.trip_type},"${z.purpose||""}","${z.notes||""}"
`});const D=encodeURI(W),R=document.createElement("a");R.setAttribute("href",D),R.setAttribute("download",`projektrapport_${Ce(new Date,"yyyy-MM-dd")}.csv`),document.body.appendChild(R),R.click(),document.body.removeChild(R)}catch(W){console.error("CSV export error:",W),alert("Kunde inte exportera CSV")}s(!1)};return n.jsxs("div",{className:"space-y-6",children:[(b||e.employee_email||e.start_date||e.end_date)&&n.jsx(ce,{className:"border-0 shadow-lg bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:n.jsx(he,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(ta,{className:"h-5 w-5"}),n.jsx("h3",{className:"text-lg font-bold",children:"Aktiv rapport"})]}),n.jsxs("div",{className:"space-y-1",children:[b&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(it,{className:"bg-white/20 text-white border-white/30",children:"Projekt"}),n.jsx("span",{className:"font-semibold",children:b.name}),n.jsxs("span",{className:"text-blue-100",children:["(",b.project_code,")"]})]}),e.employee_email&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(it,{className:"bg-white/20 text-white border-white/30",children:"Anstlld"}),n.jsx("span",{className:"font-semibold",children:(U=o.find(W=>W.email===e.employee_email))==null?void 0:U.full_name})]}),(e.start_date||e.end_date)&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(it,{className:"bg-white/20 text-white border-white/30",children:"Period"}),n.jsxs("span",{className:"font-semibold",children:[e.start_date||"Start","  ",e.end_date||"Nu"]})]})]})]}),n.jsx(ye,{onClick:()=>t({project_id:"",employee_email:"",start_date:"",end_date:""}),variant:"ghost",className:"text-white hover:bg-white/20",children:"Rensa alla filter"})]})})}),n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"text-lg flex items-center gap-2",children:[n.jsx(Jr,{className:"h-5 w-5 text-slate-600"}),"Filtrera projektdata"]})}),n.jsxs(he,{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(ve,{className:"text-sm font-semibold text-slate-700",children:"Projekt"}),n.jsxs(Nt,{value:e.project_id,onValueChange:W=>t({...e,project_id:W}),children:[n.jsx(jt,{className:"mt-1.5",children:n.jsx(kt,{placeholder:"Vlj projekt..."})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:null,children:"Alla projekt"}),a.map(W=>n.jsxs(Ne,{value:W.id,children:[W.name," (",W.project_code,")"]},W.id))]})]})]}),n.jsxs("div",{children:[n.jsx(ve,{className:"text-sm font-semibold text-slate-700",children:"Anstlld"}),n.jsxs(Nt,{value:e.employee_email,onValueChange:W=>t({...e,employee_email:W}),children:[n.jsx(jt,{className:"mt-1.5",children:n.jsx(kt,{placeholder:"Vlj anstlld..."})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:null,children:"Alla anstllda"}),o.map(W=>n.jsx(Ne,{value:W.email,children:W.full_name},W.email))]})]})]}),n.jsxs("div",{children:[n.jsx(ve,{className:"text-sm font-semibold text-slate-700",children:"Startdatum"}),n.jsx(De,{type:"date",value:e.start_date,onChange:W=>t({...e,start_date:W.target.value}),className:"mt-1.5"})]}),n.jsxs("div",{children:[n.jsx(ve,{className:"text-sm font-semibold text-slate-700",children:"Slutdatum"}),n.jsx(De,{type:"date",value:e.end_date,onChange:W=>t({...e,end_date:W.target.value}),className:"mt-1.5"})]})]}),n.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Eo,{className:"h-4 w-4 text-slate-600"}),n.jsx("h4",{className:"text-sm font-semibold text-slate-900",children:"Exportera rapport"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs(ye,{onClick:F,disabled:r,variant:"outline",className:"h-auto py-4 flex-col items-center gap-2 hover:bg-emerald-50 hover:border-emerald-300 hover:text-emerald-700 transition-all",children:[n.jsx("div",{className:"h-12 w-12 rounded-full bg-emerald-100 flex items-center justify-center",children:r?n.jsx(Ot,{className:"h-6 w-6 text-emerald-600 animate-spin"}):n.jsx(Jr,{className:"h-6 w-6 text-emerald-600"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"font-semibold",children:"CSV-fil"}),n.jsx("div",{className:"text-xs text-slate-500",children:"Excel-kompatibel"})]})]}),n.jsxs(ye,{onClick:I,disabled:r,className:"h-auto py-4 flex-col items-center gap-2 bg-gradient-to-br from-slate-900 to-slate-700 hover:from-slate-800 hover:to-slate-600 transition-all",children:[n.jsx("div",{className:"h-12 w-12 rounded-full bg-white/20 flex items-center justify-center",children:r?n.jsx(Ot,{className:"h-6 w-6 text-white animate-spin"}):n.jsx(Jr,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"font-semibold",children:"PDF-dokument"}),n.jsx("div",{className:"text-xs text-slate-200",children:"Frdig rapport"})]})]})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-blue-50 to-indigo-50",children:n.jsxs(he,{className:"p-5",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-100 flex items-center justify-center",children:n.jsx(Vt,{className:"h-5 w-5 text-blue-600"})})}),n.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:h.toFixed(1)}),n.jsx("p",{className:"text-sm text-slate-600",children:"Timmar arbetad tid"})]})}),n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-emerald-50 to-teal-50",children:n.jsxs(he,{className:"p-5",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsx("div",{className:"h-10 w-10 rounded-lg bg-emerald-100 flex items-center justify-center",children:n.jsx(Ja,{className:"h-5 w-5 text-emerald-600"})})}),n.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:g.toFixed(1)}),n.jsx("p",{className:"text-sm text-slate-600",children:"Kilometer krda"})]})}),n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-purple-50 to-pink-50",children:n.jsxs(he,{className:"p-5",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsx("div",{className:"h-10 w-10 rounded-lg bg-purple-100 flex items-center justify-center",children:n.jsx(Ja,{className:"h-5 w-5 text-purple-600"})})}),n.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:Math.round(x/60)}),n.jsx("p",{className:"text-sm text-slate-600",children:"Timmar i fordon"})]})}),y>0&&n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-amber-50 to-orange-50",children:n.jsxs(he,{className:"p-5",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsx("div",{className:"h-10 w-10 rounded-lg bg-amber-100 flex items-center justify-center",children:n.jsx(Sf,{className:"h-5 w-5 text-amber-600"})})}),n.jsxs("h3",{className:"text-2xl font-bold text-slate-900",children:[y.toFixed(0)," kr"]}),n.jsx("p",{className:"text-sm text-slate-600",children:"Berknad kostnad"})]})})]}),(j.length>0||N.length>0)&&n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[j.length>0&&n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"text-base flex items-center gap-2",children:[n.jsx(kY,{className:"h-4 w-4 text-slate-600"}),"Timmar per anstlld"]})}),n.jsx(he,{children:n.jsx(fu,{width:"100%",height:300,children:n.jsxs(sg,{data:j,children:[n.jsx(Of,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),n.jsx(yd,{dataKey:"name",angle:-45,textAnchor:"end",height:100,tick:{fontSize:12}}),n.jsx(kc,{tick:{fontSize:12}}),n.jsx(Ya,{}),n.jsx(Bl,{dataKey:"hours",fill:"#3b82f6",name:"Timmar"})]})})})]}),N.length>0&&n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"text-base flex items-center gap-2",children:[n.jsx(PY,{className:"h-4 w-4 text-slate-600"}),"Frdelning per kategori"]})}),n.jsx(he,{children:n.jsx(fu,{width:"100%",height:300,children:n.jsxs(EC,{children:[n.jsx(kd,{data:N,cx:"50%",cy:"50%",labelLine:!1,label:({name:W,percent:D})=>`${W} ${(D*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:N.map((W,D)=>n.jsx(Zm,{fill:A[D%A.length]},`cell-${D}`))}),n.jsx(Ya,{})]})})})]}),M.length>0&&n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"text-base flex items-center gap-2",children:[n.jsx(Ja,{className:"h-4 w-4 text-slate-600"}),"Krstrcka per anstlld"]})}),n.jsx(he,{children:n.jsx(fu,{width:"100%",height:300,children:n.jsxs(sg,{data:M,children:[n.jsx(Of,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),n.jsx(yd,{dataKey:"name",angle:-45,textAnchor:"end",height:100,tick:{fontSize:12}}),n.jsx(kc,{tick:{fontSize:12}}),n.jsx(Ya,{}),n.jsx(Bl,{dataKey:"km",fill:"#10b981",name:"Kilometer"})]})})})]}),(b==null?void 0:b.budget_hours)&&n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"text-base flex items-center gap-2",children:[n.jsx(ta,{className:"h-4 w-4 text-slate-600"}),"Projektframsteg"]})}),n.jsx(he,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Budgeterad tid"}),n.jsxs("span",{className:"text-sm font-bold text-slate-900",children:[b.budget_hours,"h"]})]}),n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Anvnd tid"}),n.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[h.toFixed(1),"h"]})]}),n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 overflow-hidden",children:n.jsx("div",{className:`h-full rounded-full transition-all ${h>b.budget_hours?"bg-red-500":h>b.budget_hours*.8?"bg-amber-500":"bg-blue-500"}`,style:{width:`${Math.min(h/b.budget_hours*100,100)}%`}})}),n.jsxs("div",{className:"flex items-center justify-between mt-2",children:[n.jsxs("span",{className:"text-xs text-slate-500",children:[(h/b.budget_hours*100).toFixed(0),"% anvnt"]}),n.jsxs("span",{className:"text-xs text-slate-500",children:[Math.max(0,b.budget_hours-h).toFixed(1),"h kvar"]})]})]}),b.hourly_rate&&n.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Budget"}),n.jsxs("span",{className:"text-sm font-bold text-slate-900",children:[(b.budget_hours*b.hourly_rate).toFixed(0)," kr"]})]}),n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Frbrukat"}),n.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[y.toFixed(0)," kr"]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"terstende"}),n.jsxs("span",{className:`text-sm font-bold ${y>b.budget_hours*b.hourly_rate?"text-red-600":"text-emerald-600"}`,children:[Math.max(0,b.budget_hours*b.hourly_rate-y).toFixed(0)," kr"]})]})]})]})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"text-base flex items-center gap-2",children:[n.jsx(Vt,{className:"h-4 w-4 text-slate-600"}),"Tidrapporter (",d.length,")"]})}),n.jsx(he,{children:n.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[d.slice(0,50).map(W=>{const D=o.find(z=>z.email===W.employee_email),R=e.project_id&&W.project_allocations?W.project_allocations.find(z=>z.project_id===e.project_id):null;return n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border border-slate-100",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("span",{className:"text-sm font-medium text-slate-900",children:(D==null?void 0:D.full_name)||W.employee_email}),n.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[(R==null?void 0:R.hours)||W.total_hours,"h"]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[n.jsx(_r,{className:"h-3 w-3"}),W.date,n.jsx(it,{variant:"outline",className:"text-xs",children:(R==null?void 0:R.category)||W.category})]}),((R==null?void 0:R.notes)||W.notes)&&n.jsx("p",{className:"text-xs text-slate-500 mt-1 line-clamp-1",children:(R==null?void 0:R.notes)||W.notes})]},W.id)}),d.length===0&&n.jsx("p",{className:"text-sm text-slate-500 text-center py-6",children:"Inga tidrapporter matchar filtret"}),d.length>50&&n.jsxs("p",{className:"text-xs text-slate-500 text-center pt-2",children:["+",d.length-50," till (exportera fr att se alla)"]})]})})]}),n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"text-base flex items-center gap-2",children:[n.jsx(Ja,{className:"h-4 w-4 text-slate-600"}),"Krjournal (",u.length,")"]})}),n.jsx(he,{children:n.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[u.slice(0,50).map(W=>{var D;return n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border border-slate-100",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("span",{className:"text-sm font-medium text-slate-900",children:W.driver_name}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-sm font-bold text-emerald-600",children:[W.distance_km,"km"]}),n.jsxs("span",{className:"text-xs text-slate-500",children:[Math.round(W.duration_minutes),"min"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 mb-1",children:[n.jsx(_r,{className:"h-3 w-3"}),Ce(new Date(W.start_time),"PPP",{locale:ut})]}),W.purpose&&n.jsx("p",{className:"text-xs text-slate-600 line-clamp-1",children:W.purpose}),((D=W.start_location)==null?void 0:D.address)&&n.jsxs("p",{className:"text-xs text-slate-500 line-clamp-1 mt-1",children:[" ",W.start_location.address]})]},W.id)}),u.length===0&&n.jsx("p",{className:"text-sm text-slate-500 text-center py-6",children:"Ingen krjournal matchar filtret"}),u.length>50&&n.jsxs("p",{className:"text-xs text-slate-500 text-center pt-2",children:["+",u.length-50," till (exportera fr att se alla)"]})]})})]})]})]})}const Y4e={skada:Kr,tekniskt_fel:vu,trafikincident:us,inbrott_stld:hj,annat:zv},GF={ny:{label:"Ny",color:"bg-blue-100 text-blue-800",icon:Vt},pgr:{label:"Pgr",color:"bg-amber-100 text-amber-800",icon:Vt},vntar_verkstad:{label:"Vntar verkstad",color:"bg-purple-100 text-purple-800",icon:Vt},vntar_delar:{label:"Vntar delar",color:"bg-orange-100 text-orange-800",icon:Vt},vntar_attest:{label:"Vntar attest",color:"bg-yellow-100 text-yellow-800",icon:Vt},klar:{label:"Klar",color:"bg-emerald-100 text-emerald-800",icon:ti},avbruten:{label:"Avbruten",color:"bg-slate-100 text-slate-800",icon:xh}},ZF={kan_kras:{label:"Kan kras",color:"bg-emerald-100 text-emerald-700"},br_ej_kras:{label:"Br ej kras",color:"bg-amber-100 text-amber-700"},mste_stanna:{label:"Mste stanna",color:"bg-rose-100 text-rose-700"}};function X4e(){const{data:e=[],isLoading:t}=He({queryKey:["all-issues"],queryFn:()=>oe.entities.MaintenanceIssue.list("-created_date",200)}),{data:r=[]}=He({queryKey:["vehicles"],queryFn:()=>oe.entities.Vehicle.list()}),s=a=>{const i=r.find(o=>o.id===a);return i&&(i.registration_number||i.gps_device_id)||"Oknt fordon"};return t?n.jsx("div",{className:"space-y-3",children:[1,2,3].map(a=>n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"animate-pulse space-y-2",children:[n.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4"}),n.jsx("div",{className:"h-3 bg-slate-100 rounded w-1/2"})]})})},a))}):e.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-8 text-center",children:[n.jsx(Kr,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Inga rapporterade fel eller skador"})]})}):n.jsx("div",{className:"space-y-3",children:e.map(a=>{var d,u;const i=Y4e[a.issue_type]||zv,o=GF[a.status]||GF.ny,l=o.icon,c=ZF[a.severity]||ZF.kan_kras;return n.jsx(ce,{className:"border-0 shadow-sm hover:shadow-md transition-shadow",children:n.jsxs(he,{className:"p-4",children:[n.jsx("div",{className:"flex items-start justify-between mb-3",children:n.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[n.jsx("div",{className:"p-2 bg-slate-100 rounded-lg",children:n.jsx(i,{className:"h-5 w-5 text-slate-700"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-semibold text-slate-900 mb-1",children:a.title}),n.jsx("p",{className:"text-sm text-slate-600 mb-2",children:s(a.vehicle_id)}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs(it,{className:o.color,children:[n.jsx(l,{className:"h-3 w-3 mr-1"}),o.label]}),n.jsx(it,{className:c.color,children:c.label})]})]})]})}),a.description&&n.jsx("p",{className:"text-sm text-slate-600 mb-3 pl-12",children:a.description}),n.jsxs("div",{className:"flex items-center justify-between pl-12 text-xs text-slate-500",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{children:a.created_date&&Ce(new Date(a.created_date),"d MMM yyyy",{locale:ut})}),n.jsx("span",{className:"text-slate-400",children:""}),n.jsxs("span",{children:["Rapporterad av: ",((d=a.created_by)==null?void 0:d.split("@")[0])||"Oknd"]})]}),a.priority&&n.jsx(it,{variant:"outline",className:"text-xs",children:a.priority==="akut"?" Akut":a.priority==="hg"?" Hg":a.priority==="normal"?" Normal":" Lg"})]}),((u=a.images)==null?void 0:u.length)>0&&n.jsxs("div",{className:"flex gap-2 mt-3 pl-12",children:[a.images.slice(0,3).map((h,g)=>n.jsx("img",{src:h,alt:`Bild ${g+1}`,className:"w-16 h-16 object-cover rounded-lg"},g)),a.images.length>3&&n.jsxs("div",{className:"w-16 h-16 bg-slate-100 rounded-lg flex items-center justify-center text-xs text-slate-500",children:["+",a.images.length-3]})]})]})},a.id)})})}function Q4e(){const{data:e=[],isLoading:t}=He({queryKey:["all-fuel-logs"],queryFn:()=>oe.entities.FuelLog.list("-date",200)}),{data:r=[]}=He({queryKey:["vehicles"],queryFn:()=>oe.entities.Vehicle.list()}),s=a=>{const i=r.find(o=>o.id===a);return i&&(i.registration_number||i.gps_device_id)||"Oknt fordon"};return t?n.jsx("div",{className:"space-y-3",children:[1,2,3].map(a=>n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"animate-pulse space-y-2",children:[n.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4"}),n.jsx("div",{className:"h-3 bg-slate-100 rounded w-1/2"})]})})},a))}):e.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-8 text-center",children:[n.jsx(gu,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Inga tankningar registrerade"})]})}):n.jsx("div",{className:"space-y-3",children:e.map(a=>{var i;return n.jsx(ce,{className:"border-0 shadow-sm hover:shadow-md transition-shadow",children:n.jsxs(he,{className:"p-4",children:[n.jsx("div",{className:"flex items-start justify-between mb-3",children:n.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[n.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:n.jsx(gu,{className:"h-5 w-5 text-emerald-700"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-semibold text-slate-900 mb-1",children:s(a.vehicle_id)}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 mb-2",children:[n.jsx(_r,{className:"h-3.5 w-3.5"}),n.jsx("span",{children:a.date&&Ce(new Date(a.date),"d MMM yyyy HH:mm",{locale:ut})})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs(it,{variant:"outline",className:"bg-white",children:[n.jsx(Sf,{className:"h-3 w-3 mr-1"}),((i=a.amount)==null?void 0:i.toFixed(2))||"0"," kr"]}),a.liters&&n.jsxs(it,{variant:"outline",className:"bg-white",children:[a.liters.toFixed(1)," L"]}),a.mileage&&n.jsxs(it,{variant:"outline",className:"bg-white",children:[n.jsx(gf,{className:"h-3 w-3 mr-1"}),a.mileage," km"]})]})]})]})}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 pl-12 text-xs",children:[a.station&&n.jsxs("div",{className:"flex items-center gap-1 text-slate-600",children:[n.jsx(Fn,{className:"h-3 w-3"}),n.jsx("span",{children:a.station})]}),a.price_per_liter&&n.jsxs("div",{className:"text-slate-600",children:["Pris/L: ",a.price_per_liter.toFixed(2)," kr"]}),a.consumption&&n.jsxs("div",{className:"text-slate-600",children:["Frbrukning: ",a.consumption.toFixed(1)," l/100km"]}),a.driver_email&&n.jsxs("div",{className:"text-slate-600",children:["Frare: ",a.driver_email.split("@")[0]]})]}),a.notes&&n.jsx("p",{className:"text-sm text-slate-600 mt-3 pl-12 italic",children:a.notes}),a.receipt_url&&n.jsx("div",{className:"mt-3 pl-12",children:n.jsx("img",{src:a.receipt_url,alt:"Kvitto",className:"w-32 h-32 object-cover rounded-lg cursor-pointer",onClick:()=>window.open(a.receipt_url,"_blank")})})]})},a.id)})})}function J4e(){const[e,t]=P.useState(null),[r,s]=P.useState("overview");P.useEffect(()=>{oe.auth.me().then(t).catch(()=>t(null))},[]);const{data:a=[]}=He({queryKey:["vehicles"],queryFn:()=>oe.entities.Vehicle.list()}),{data:i=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list()}),{data:o=[]}=He({queryKey:["time-entries"],queryFn:()=>oe.entities.TimeEntry.list()}),{data:l=[]}=He({queryKey:["journal-entries"],queryFn:()=>oe.entities.DrivingJournalEntry.list()}),{data:c=[]}=He({queryKey:["manuals"],queryFn:()=>oe.entities.Manual.list()}),{data:d=[]}=He({queryKey:["approval-requests"],queryFn:()=>oe.entities.ApprovalRequest.list()});if((e==null?void 0:e.role)!=="admin")return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white flex items-center justify-center p-6",children:n.jsx(ce,{className:"max-w-md border-0 shadow-sm",children:n.jsxs(he,{className:"p-8 text-center",children:[n.jsx(cQ,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"tkomst nekad"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"Du behver admin-behrighet fr att komma t denna sida."}),n.jsx(wr,{to:Pn("Home"),children:n.jsx(ye,{children:"Tillbaka till hem"})})]})})});const u=d.filter(x=>x.status==="pending").length,h=l.filter(x=>x.status==="pending_review").length,g=a.filter(x=>x.status==="aktiv").length;return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pb-24",children:n.jsx("div",{className:"max-w-6xl mx-auto px-4 py-6",children:n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-1",children:"Systemadministration"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Hantera och vervaka systemet"})]}),n.jsxs(Ls,{value:r,onValueChange:s,children:[n.jsxs(As,{className:"w-full h-auto p-1 bg-white shadow-sm rounded-xl grid grid-cols-2 md:grid-cols-10 gap-2 mb-8",children:[n.jsxs(gt,{value:"dashboard",className:"rounded-lg data-[state=active]:bg-slate-900 data-[state=active]:text-white py-3 text-sm font-medium",children:[n.jsx($0,{className:"h-4 w-4 mr-2"}),"Dashboard"]}),n.jsxs(gt,{value:"overview",className:"rounded-lg data-[state=active]:bg-slate-900 data-[state=active]:text-white py-3 text-sm font-medium",children:[n.jsx(Vb,{className:"h-4 w-4 mr-2"}),"System"]}),n.jsxs(gt,{value:"reports",className:"rounded-lg data-[state=active]:bg-slate-900 data-[state=active]:text-white py-3 text-sm font-medium",children:[n.jsx(ta,{className:"h-4 w-4 mr-2"}),"Rapporter"]}),n.jsxs(gt,{value:"employees",className:"rounded-lg data-[state=active]:bg-slate-900 data-[state=active]:text-white py-3 text-sm font-medium",children:[n.jsx(Fr,{className:"h-4 w-4 mr-2"}),"Anstllda"]}),n.jsxs(gt,{value:"time",className:"rounded-lg data-[state=active]:bg-slate-900 data-[state=active]:text-white py-3 text-sm font-medium",children:[n.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Tidsystem"]}),n.jsxs(gt,{value:"vehicles",className:"rounded-lg data-[state=active]:bg-slate-900 data-[state=active]:text-white py-3 text-sm font-medium",children:[n.jsx(us,{className:"h-4 w-4 mr-2"}),"Fordon"]}),n.jsxs(gt,{value:"bluetooth",className:"rounded-lg data-[state=active]:bg-slate-900 data-[state=active]:text-white py-3 text-sm font-medium",children:[n.jsx(r3,{className:"h-4 w-4 mr-2"}),"Bluetooth"]}),n.jsxs(gt,{value:"journal",className:"rounded-lg data-[state=active]:bg-slate-900 data-[state=active]:text-white py-3 text-sm font-medium",children:[n.jsx(Jr,{className:"h-4 w-4 mr-2"}),"Krjournal"]}),n.jsxs(gt,{value:"automation",className:"rounded-lg data-[state=active]:bg-slate-900 data-[state=active]:text-white py-3 text-sm font-medium",children:[n.jsx(vu,{className:"h-4 w-4 mr-2"}),"Automation"]}),n.jsxs(gt,{value:"settings",className:"rounded-lg data-[state=active]:bg-slate-900 data-[state=active]:text-white py-3 text-sm font-medium",children:[n.jsx(z0,{className:"h-4 w-4 mr-2"}),"Instllningar"]})]}),n.jsxs(Dt,{value:"dashboard",className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Realtidsdashboard"}),n.jsx(gfe,{})]}),n.jsxs(Dt,{value:"reports",className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Projektrapporter"}),n.jsx(Z4e,{})]}),n.jsxs(Dt,{value:"employees",className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Anstlldversikt"}),n.jsx(hhe,{})]}),n.jsxs(Dt,{value:"vehicles",className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Fordonshantering"}),n.jsxs(Ls,{defaultValue:"management",children:[n.jsxs(As,{className:"w-full bg-white shadow-sm rounded-lg p-1 mb-4",children:[n.jsx(gt,{value:"management",className:"rounded-md",children:"Fordonshantering"}),n.jsx(gt,{value:"reports",className:"rounded-md",children:"Alla rapporter"}),n.jsx(gt,{value:"fuel",className:"rounded-md",children:"Alla tankningar"}),n.jsx(gt,{value:"location",className:"rounded-md",children:"Platskarta"})]}),n.jsx(Dt,{value:"management",children:n.jsx(qhe,{})}),n.jsx(Dt,{value:"reports",children:n.jsx(X4e,{})}),n.jsx(Dt,{value:"fuel",children:n.jsx(Q4e,{})}),n.jsx(Dt,{value:"location",children:n.jsx(afe,{})})]})]}),n.jsx(Dt,{value:"bluetooth",className:"space-y-4",children:n.jsx(ffe,{})}),n.jsxs(Dt,{value:"overview",className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[n.jsx(Vb,{className:"h-5 w-5 text-slate-600"}),"Systemversikt"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(wr,{to:Pn("Employees"),children:n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-blue-50 to-indigo-50 hover:shadow-md transition-shadow cursor-pointer",children:n.jsxs(he,{className:"p-5",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-100 flex items-center justify-center",children:n.jsx(Fr,{className:"h-5 w-5 text-blue-600"})}),n.jsx(it,{variant:"outline",className:"bg-white/80 text-sm font-semibold",children:i.length})]}),n.jsx("h3",{className:"text-base font-semibold text-slate-900 mb-0.5",children:"Personal"}),n.jsx("p",{className:"text-xs text-slate-600",children:"Aktiva medarbetare"})]})})}),n.jsx(wr,{to:Pn("Vehicles"),children:n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-emerald-50 to-teal-50 hover:shadow-md transition-shadow cursor-pointer",children:n.jsxs(he,{className:"p-5",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-emerald-100 flex items-center justify-center",children:n.jsx(us,{className:"h-5 w-5 text-emerald-600"})}),n.jsxs(it,{variant:"outline",className:"bg-white/80 text-sm font-semibold",children:[g,"/",a.length]})]}),n.jsx("h3",{className:"text-base font-semibold text-slate-900 mb-0.5",children:"Fordon"}),n.jsx("p",{className:"text-xs text-slate-600",children:"Aktiva fordon"})]})})}),n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-amber-50 to-orange-50",children:n.jsxs(he,{className:"p-5",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-amber-100 flex items-center justify-center",children:n.jsx(ja,{className:"h-5 w-5 text-amber-600"})}),n.jsx(it,{variant:"outline",className:"bg-white/80 text-sm font-semibold",children:u+h})]}),n.jsx("h3",{className:"text-base font-semibold text-slate-900 mb-0.5",children:"Vntande"}),n.jsx("p",{className:"text-xs text-slate-600",children:"Krver godknnande"})]})})]})]}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[n.jsx(vu,{className:"h-5 w-5 text-slate-600"}),"Snabbtgrder"]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[n.jsx(wr,{to:Pn("AdminTimeSystem"),children:n.jsx(ce,{className:"border-0 shadow-sm hover:shadow-md transition-all hover:scale-105 cursor-pointer bg-white",children:n.jsxs(he,{className:"p-4 flex flex-col items-center gap-2 text-center",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-slate-100 flex items-center justify-center",children:n.jsx(Vt,{className:"h-5 w-5 text-slate-700"})}),n.jsx("span",{className:"text-sm font-medium text-slate-900",children:"Tidsystem"})]})})}),n.jsx(wr,{to:Pn("Employees"),children:n.jsx(ce,{className:"border-0 shadow-sm hover:shadow-md transition-all hover:scale-105 cursor-pointer bg-white",children:n.jsxs(he,{className:"p-4 flex flex-col items-center gap-2 text-center",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-slate-100 flex items-center justify-center",children:n.jsx(Fr,{className:"h-5 w-5 text-slate-700"})}),n.jsx("span",{className:"text-sm font-medium text-slate-900",children:"Personal"})]})})}),n.jsx(wr,{to:Pn("OnboardingTemplates"),children:n.jsx(ce,{className:"border-0 shadow-sm hover:shadow-md transition-all hover:scale-105 cursor-pointer bg-white",children:n.jsxs(he,{className:"p-4 flex flex-col items-center gap-2 text-center",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-slate-100 flex items-center justify-center",children:n.jsx(gm,{className:"h-5 w-5 text-slate-700"})}),n.jsx("span",{className:"text-sm font-medium text-slate-900",children:"Onboarding"})]})})}),n.jsx(wr,{to:Pn("Vehicles"),children:n.jsx(ce,{className:"border-0 shadow-sm hover:shadow-md transition-all hover:scale-105 cursor-pointer bg-white",children:n.jsxs(he,{className:"p-4 flex flex-col items-center gap-2 text-center",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-slate-100 flex items-center justify-center",children:n.jsx(us,{className:"h-5 w-5 text-slate-700"})}),n.jsx("span",{className:"text-sm font-medium text-slate-900",children:"Fordon"})]})})}),n.jsx(wr,{to:Pn("DrivingJournal"),children:n.jsx(ce,{className:"border-0 shadow-sm hover:shadow-md transition-all hover:scale-105 cursor-pointer bg-white",children:n.jsxs(he,{className:"p-4 flex flex-col items-center gap-2 text-center",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-slate-100 flex items-center justify-center",children:n.jsx(Jr,{className:"h-5 w-5 text-slate-700"})}),n.jsx("span",{className:"text-sm font-medium text-slate-900",children:"Krjournal"})]})})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{className:"pb-3",children:n.jsxs(Ct,{className:"text-base font-semibold flex items-center gap-2",children:[n.jsx(ta,{className:"h-4 w-4 text-slate-600"}),"Aktivitet"]})}),n.jsxs(he,{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between py-2.5 px-3 bg-slate-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-8 w-8 rounded-lg bg-white flex items-center justify-center",children:n.jsx(Vt,{className:"h-4 w-4 text-slate-600"})}),n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Tidrapporter"})]}),n.jsx("span",{className:"text-sm font-bold text-slate-900",children:o.length})]}),n.jsxs("div",{className:"flex items-center justify-between py-2.5 px-3 bg-slate-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-8 w-8 rounded-lg bg-white flex items-center justify-center",children:n.jsx(Jr,{className:"h-4 w-4 text-slate-600"})}),n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Krrapporter"})]}),n.jsx("span",{className:"text-sm font-bold text-slate-900",children:l.length})]}),n.jsxs("div",{className:"flex items-center justify-between py-2.5 px-3 bg-slate-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-8 w-8 rounded-lg bg-white flex items-center justify-center",children:n.jsx(gm,{className:"h-4 w-4 text-slate-600"})}),n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Manualer"})]}),n.jsx("span",{className:"text-sm font-bold text-slate-900",children:c.length})]})]})]}),n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{className:"pb-3",children:n.jsxs(Ct,{className:"text-base font-semibold flex items-center gap-2",children:[n.jsx($r,{className:"h-4 w-4 text-slate-600"}),"System Status"]})}),n.jsxs(he,{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between py-2.5 px-3 bg-emerald-50 rounded-lg",children:[n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"GPS-integration"}),n.jsxs(it,{className:"bg-emerald-100 text-emerald-700 border-0",children:[n.jsx($r,{className:"h-3 w-3 mr-1"}),"Aktiv"]})]}),n.jsxs("div",{className:"flex items-center justify-between py-2.5 px-3 bg-blue-50 rounded-lg",children:[n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Database"}),n.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"v.Latest"})]}),n.jsxs("div",{className:"flex items-center justify-between py-2.5 px-3 bg-purple-50 rounded-lg",children:[n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Backup"}),n.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Automatisk"})]})]})]})]})]}),n.jsxs(Dt,{value:"time",className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Tidsystemhantering"}),n.jsxs(Ls,{defaultValue:"policies",children:[n.jsxs(As,{className:"w-full bg-white shadow-sm rounded-lg p-1",children:[n.jsx(gt,{value:"policies",className:"rounded-md",children:"Arbetspolicies"}),n.jsx(gt,{value:"reports",className:"rounded-md",children:"Rapporter"}),n.jsx(gt,{value:"employees",className:"rounded-md",children:"Personal"}),n.jsx(gt,{value:"payroll",className:"rounded-md",children:"Lnexport"})]}),n.jsx(Dt,{value:"policies",children:n.jsx(xz,{})}),n.jsx(Dt,{value:"reports",children:n.jsx(Ez,{})}),n.jsx(Dt,{value:"employees",children:n.jsx(iV,{})}),n.jsx(Dt,{value:"payroll",children:n.jsx(oV,{})})]})]}),n.jsxs(Dt,{value:"journal",className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Krjournalhantering"}),n.jsxs(Ls,{defaultValue:"ai",children:[n.jsxs(As,{className:"w-full bg-white shadow-sm rounded-lg p-1",children:[n.jsx(gt,{value:"ai",className:"rounded-md",children:"AI-rapporter"}),n.jsx(gt,{value:"project",className:"rounded-md",children:"Projekttid"}),n.jsx(gt,{value:"geofencing",className:"rounded-md",children:"Geofencing"})]}),n.jsx(Dt,{value:"ai",children:n.jsx(Oz,{})}),n.jsx(Dt,{value:"project",children:n.jsx(Mz,{})}),n.jsx(Dt,{value:"geofencing",children:n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Geofencing"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Definiera platser fr automatisk klassificering av resor"})]}),n.jsx(wr,{to:Pn("GeofenceSettings"),children:n.jsxs(ye,{children:[n.jsx(Fn,{className:"h-4 w-4 mr-2"}),"Hantera geofences"]})})]}),n.jsx("p",{className:"text-sm text-slate-600",children:"Skapa geografiska zoner (geofences) fr kontor, kundplatser och andra platser. Resor till och frn dessa platser kan automatiskt klassificeras som tjnste- eller privatresor."})]})})})]})]}),n.jsx(Dt,{value:"automation",className:"space-y-4",children:n.jsx(xfe,{})}),n.jsxs(Dt,{value:"settings",className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Systeminstllningar"}),n.jsxs(Ls,{defaultValue:"notifications",children:[n.jsxs(As,{className:"w-full bg-white shadow-sm rounded-lg p-1",children:[n.jsx(gt,{value:"notifications",className:"rounded-md",children:"Notisinstllningar"}),n.jsx(gt,{value:"bulk",className:"rounded-md",children:"Massnotiser"}),n.jsx(gt,{value:"push",className:"rounded-md",children:"Push-test"})]}),n.jsx(Dt,{value:"notifications",children:n.jsx(lV,{})}),n.jsx(Dt,{value:"bulk",children:n.jsx(pfe,{})}),n.jsx(Dt,{value:"push",children:n.jsx(fhe,{})})]})]})]})]})})})}function ePe(){const[e,t]=P.useState(null),[r,s]=P.useState("policies");return P.useEffect(()=>{oe.auth.me().then(t).catch(()=>t(null))},[]),(e==null?void 0:e.role)!=="admin"?n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white flex items-center justify-center",children:n.jsx(ce,{className:"max-w-md",children:n.jsxs(he,{className:"p-6 text-center",children:[n.jsx(Kr,{className:"h-12 w-12 text-amber-500 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-bold mb-2",children:"Ingen tkomst"}),n.jsx("p",{className:"text-slate-600",children:"Endast administratrer har tkomst till denna sida."})]})})}):n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white",children:n.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6 pb-24",children:[n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Systemadministration"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Hantera policys, rapporter och instllningar"})]}),n.jsxs(Ls,{value:r,onValueChange:s,children:[n.jsxs(As,{className:"w-full grid grid-cols-7 mb-6",children:[n.jsx(gt,{value:"policies",children:"Policys"}),n.jsx(gt,{value:"reports",children:"Rapporter"}),n.jsx(gt,{value:"ai-journal",children:"AI Krjournal"}),n.jsx(gt,{value:"project-time",children:"Tidrapport"}),n.jsx(gt,{value:"employees",children:"Personal"}),n.jsx(gt,{value:"payroll",children:"Ln"}),n.jsx(gt,{value:"notifications",children:"Pminnelser"})]}),n.jsx(Dt,{value:"policies",children:n.jsx(xz,{})}),n.jsx(Dt,{value:"reports",children:n.jsx(Ez,{})}),n.jsx(Dt,{value:"ai-journal",children:n.jsx(Oz,{})}),n.jsx(Dt,{value:"project-time",children:n.jsx(Mz,{})}),n.jsx(Dt,{value:"employees",children:n.jsx(iV,{})}),n.jsx(Dt,{value:"payroll",children:n.jsx(oV,{})}),n.jsx(Dt,{value:"notifications",children:n.jsx(lV,{})})]})]})})}function tPe(){var M;const[e,t]=P.useState(""),[r,s]=P.useState("all"),[a,i]=P.useState("all"),{data:o=[],isLoading:l}=He({queryKey:["vehicles"],queryFn:()=>oe.entities.Vehicle.list()}),{data:c=[]}=He({queryKey:["journalEntries"],queryFn:()=>oe.entities.DrivingJournalEntry.list()}),u=o.filter(I=>I.gps_device_id).map(I=>I.gps_device_id),{data:h}=He({queryKey:["gps-devices"],queryFn:async()=>(await oe.functions.invoke("gpsTracking",{action:"getDeviceList",params:{}})).data}),g=((M=h==null?void 0:h.groups)==null?void 0:M.flatMap(I=>I.devices||[]))||[],{data:x,isLoading:b}=He({queryKey:["gps-all-positions",u],queryFn:async()=>u.length===0?null:(await oe.functions.invoke("gpsTracking",{action:"getLastPosition",params:{deviceIds:u}})).data,enabled:u.length>0,refetchInterval:6e4}),y=(x==null?void 0:x.records)||[],v=I=>{const F=g.find(U=>U.deviceid===I);return(F==null?void 0:F.devicename)||I},j=I=>y.find(F=>F.deviceid===I.gps_device_id),w=I=>{if(!I.gps_device_id)return"Ingen GPS";const F=j(I);if(!F)return"Oknd";const U=new Date(F.updatetime),D=(new Date-U)/(1e3*60);return D<5?"Aktiv":D<30?"Nyligen aktiv":"Inaktiv"},N=I=>c.filter(F=>F.vehicle_id===I.id).length,A=o.filter(I=>{var R,z,Z;const F=((R=I.registration_number)==null?void 0:R.toLowerCase().includes(e.toLowerCase()))||((z=I.make)==null?void 0:z.toLowerCase().includes(e.toLowerCase()))||((Z=I.model)==null?void 0:Z.toLowerCase().includes(e.toLowerCase())),U=a==="all"||I.vehicle_type===a,W=w(I);return F&&U&&(r==="all"||r==="active"&&W==="Aktiv"||r==="recent"&&W==="Nyligen aktiv"||r==="inactive"&&W==="Inaktiv"||r==="no-gps"&&W==="Ingen GPS")}),C=I=>{switch(I){case"Aktiv":return"text-emerald-600 bg-emerald-50";case"Nyligen aktiv":return"text-amber-600 bg-amber-50";case"Inaktiv":return"text-slate-500 bg-slate-100";default:return"text-slate-400 bg-slate-50"}};return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pb-24",children:n.jsx("div",{className:"max-w-6xl mx-auto px-4 py-6",children:n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Alla Fordon"}),n.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[A.length," av ",o.length," fordon"]})]}),n.jsx(ce,{className:"border-0 shadow-sm mb-6",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx(uo,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),n.jsx(De,{placeholder:"Sk reg.nr, mrke, modell...",value:e,onChange:I=>t(I.target.value),className:"pl-10"})]}),n.jsxs(Nt,{value:r,onValueChange:s,children:[n.jsx(jt,{children:n.jsx(kt,{placeholder:"Status"})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"all",children:"Alla statusar"}),n.jsx(Ne,{value:"active",children:"Aktiv"}),n.jsx(Ne,{value:"recent",children:"Nyligen aktiv"}),n.jsx(Ne,{value:"inactive",children:"Inaktiv"}),n.jsx(Ne,{value:"no-gps",children:"Ingen GPS"})]})]}),n.jsxs(Nt,{value:a,onValueChange:i,children:[n.jsx(jt,{children:n.jsx(kt,{placeholder:"Fordonstyp"})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"all",children:"Alla typer"}),n.jsx(Ne,{value:"personbil",children:"Personbil"}),n.jsx(Ne,{value:"ltt lastbil",children:"Ltt lastbil"}),n.jsx(Ne,{value:"lastbil",children:"Lastbil"}),n.jsx(Ne,{value:"skpbil",children:"Skpbil"}),n.jsx(Ne,{value:"annat",children:"Annat"})]})]})]})})}),l||b?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(Ot,{className:"h-12 w-12 animate-spin text-slate-400 mx-auto"}),n.jsx("p",{className:"text-sm text-slate-500 mt-4",children:"Hmtar fordonsdata..."})]})}):A.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(uo,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Inga fordon hittades"})]})}):n.jsx(ce,{className:"border-0 shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left p-4 text-xs font-semibold text-slate-600",children:"Reg.nr"}),n.jsx("th",{className:"text-left p-4 text-xs font-semibold text-slate-600",children:"Fordonstyp"}),n.jsx("th",{className:"text-left p-4 text-xs font-semibold text-slate-600",children:"Resor"}),n.jsx("th",{className:"text-left p-4 text-xs font-semibold text-slate-600",children:"Senast sedd"}),n.jsx("th",{className:"text-left p-4 text-xs font-semibold text-slate-600",children:"Status"}),n.jsx("th",{className:"text-right p-4 text-xs font-semibold text-slate-600",children:"tgrd"})]})}),n.jsx("tbody",{children:A.map(I=>{var D,R;const F=j(I),U=w(I),W=N(I);return n.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50 transition-colors",children:[n.jsx("td",{className:"p-4",children:n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-slate-900",children:I.registration_number||v(I.gps_device_id)}),n.jsx("p",{className:"text-xs text-slate-500",children:I.registration_number?`${I.make} ${I.model}`:"Oknd GPS-enhet"})]})}),n.jsx("td",{className:"p-4",children:n.jsx("p",{className:"text-sm text-slate-700 capitalize",children:I.vehicle_type||"Ej angiven"})}),n.jsx("td",{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(q0,{className:"h-3.5 w-3.5 text-slate-400"}),n.jsx("span",{className:"text-sm font-medium text-slate-700",children:W}),n.jsx("span",{className:"text-xs text-slate-500",children:"resor"})]})}),n.jsx("td",{className:"p-4",children:F?n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-700 mb-1",children:[n.jsx(Fn,{className:"h-3 w-3"}),n.jsxs("span",{children:[(D=F.callat)==null?void 0:D.toFixed(4),", ",(R=F.callon)==null?void 0:R.toFixed(4)]})]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-500",children:[n.jsx(Vt,{className:"h-3 w-3"}),n.jsx("span",{children:Ce(new Date(F.updatetime),"dd MMM, HH:mm",{locale:ut})})]})]}):n.jsx("span",{className:"text-sm text-slate-400",children:"Ingen data"})}),n.jsx("td",{className:"p-4",children:n.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${C(U)}`,children:[n.jsx(zb,{className:"h-2 w-2 fill-current"}),U]})}),n.jsx("td",{className:"p-4 text-right",children:I.gps_device_id?n.jsx(wr,{to:Pn("VehicleTracking")+`?id=${I.id}`,children:n.jsxs(ye,{size:"sm",variant:"outline",className:"gap-2",children:[n.jsx(Nx,{className:"h-3 w-3"}),"Se detaljer"]})}):n.jsx(wr,{to:Pn("VehicleDetails")+`?id=${I.id}`,children:n.jsxs(ye,{size:"sm",variant:"outline",className:"gap-2",children:[n.jsx(Nx,{className:"h-3 w-3"}),"Se fordon"]})})})]},I.id)})})]})})})]})})})}var lS={exports:{}},cS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YF;function nPe(){if(YF)return cS;YF=1;var e=uj();function t(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var r=typeof Object.is=="function"?Object.is:t,s=e.useState,a=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function l(h,g){var x=g(),b=s({inst:{value:x,getSnapshot:g}}),y=b[0].inst,v=b[1];return i(function(){y.value=x,y.getSnapshot=g,c(y)&&v({inst:y})},[h,x,g]),a(function(){return c(y)&&v({inst:y}),h(function(){c(y)&&v({inst:y})})},[h]),o(x),x}function c(h){var g=h.getSnapshot;h=h.value;try{var x=g();return!r(h,x)}catch{return!0}}function d(h,g){return g()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return cS.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,cS}var XF;function rPe(){return XF||(XF=1,lS.exports=nPe()),lS.exports}var sPe=rPe();function aPe(){return sPe.useSyncExternalStore(iPe,()=>!0,()=>!1)}function iPe(){return()=>{}}var OC="Avatar",[oPe]=ho(OC),[lPe,BK]=oPe(OC),qK=P.forwardRef((e,t)=>{const{__scopeAvatar:r,...s}=e,[a,i]=P.useState("idle");return n.jsx(lPe,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:n.jsx(cn.span,{...s,ref:t})})});qK.displayName=OC;var zK="AvatarImage",VK=P.forwardRef((e,t)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:a=()=>{},...i}=e,o=BK(zK,r),l=cPe(s,i),c=io(d=>{a(d),o.onImageLoadingStatusChange(d)});return wa(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?n.jsx(cn.img,{...i,ref:t,src:s}):null});VK.displayName=zK;var UK="AvatarFallback",HK=P.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:s,...a}=e,i=BK(UK,r),[o,l]=P.useState(s===void 0);return P.useEffect(()=>{if(s!==void 0){const c=window.setTimeout(()=>l(!0),s);return()=>window.clearTimeout(c)}},[s]),o&&i.imageLoadingStatus!=="loaded"?n.jsx(cn.span,{...a,ref:t}):null});HK.displayName=UK;function QF(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function cPe(e,{referrerPolicy:t,crossOrigin:r}){const s=aPe(),a=P.useRef(null),i=s?(a.current||(a.current=new window.Image),a.current):null,[o,l]=P.useState(()=>QF(i,e));return wa(()=>{l(QF(i,e))},[i,e]),wa(()=>{const c=h=>()=>{l(h)};if(!i)return;const d=c("loaded"),u=c("error");return i.addEventListener("load",d),i.addEventListener("error",u),t&&(i.referrerPolicy=t),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",d),i.removeEventListener("error",u)}},[i,r,t]),o}var WK=qK,KK=VK,GK=HK;const Vf=P.forwardRef(({className:e,...t},r)=>n.jsx(WK,{ref:r,className:Yt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Vf.displayName=WK.displayName;const py=P.forwardRef(({className:e,...t},r)=>n.jsx(KK,{ref:r,className:Yt("aspect-square h-full w-full",e),...t}));py.displayName=KK.displayName;const Uf=P.forwardRef(({className:e,...t},r)=>n.jsx(GK,{ref:r,className:Yt("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Uf.displayName=GK.displayName;function JF({conversations:e,selectedId:t,onSelect:r,loading:s}){const a=i=>i?i.split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2):"?";return s?n.jsx("div",{className:"space-y-2",children:[1,2,3].map(i=>n.jsx("div",{className:"h-16 bg-slate-200 rounded-lg animate-pulse"},i))}):e.length===0?n.jsx("div",{className:"text-center py-8 text-slate-500",children:n.jsx("p",{className:"text-sm",children:"Inga konversationer n"})}):n.jsx("div",{className:"space-y-2",children:e.map(i=>n.jsx(tt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:n.jsx(ce,{onClick:()=>r(i.id),className:`p-3 cursor-pointer transition-all ${t===i.id?"bg-slate-100 border-slate-300":"hover:bg-slate-50"}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Vf,{className:"h-10 w-10 flex-shrink-0",children:n.jsx(Uf,{className:"bg-slate-200 text-slate-600",children:a(i.title)})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-medium text-slate-900 truncate",children:i.title}),n.jsx("p",{className:"text-xs text-slate-500 truncate",children:i.last_message||"Ingen meddelanden"}),n.jsx("p",{className:"text-xs text-slate-400 mt-0.5",children:i.last_message_at?Ce(new Date(i.last_message_at),"d MMM HH:mm",{locale:ut}):""})]})]})})},i.id))})}function e7({messages:e,currentUserEmail:t}){const r=s=>s?s.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2):"?";return e.length===0?n.jsx("div",{className:"text-center py-8 text-slate-500",children:n.jsx("p",{className:"text-sm",children:"Ingen meddelanden n"})}):n.jsx("div",{className:"space-y-4 py-2",children:n.jsx(_a,{mode:"popLayout",children:e.map((s,a)=>{var l;const i=s.sender_email===t,o=(l=s.id)==null?void 0:l.startsWith("temp-");return n.jsxs(tt.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},transition:{type:"spring",stiffness:500,damping:30},className:`flex gap-3 ${i?"justify-end":"justify-start"}`,children:[!i&&n.jsx(Vf,{className:"h-8 w-8 flex-shrink-0 mt-1",children:n.jsx(Uf,{className:"bg-gradient-to-br from-slate-200 to-slate-300 text-slate-700 text-xs font-semibold",children:r(s.sender_name)})}),n.jsxs("div",{className:`flex-1 max-w-[75%] ${i?"items-end":"items-start"} flex flex-col`,children:[!i&&n.jsx("p",{className:"text-xs font-semibold text-slate-700 mb-1 px-1",children:s.sender_name}),n.jsx("div",{className:`rounded-2xl px-4 py-2.5 shadow-sm ${i?"bg-gradient-to-br from-slate-800 to-slate-900 text-white":"bg-white text-slate-900 border border-slate-200"} ${o?"opacity-60":""}`,children:n.jsx("p",{className:"text-sm break-words leading-relaxed",children:s.content})}),n.jsxs("div",{className:`flex items-center gap-1.5 mt-1 px-1 ${i?"justify-end":"justify-start"}`,children:[n.jsxs("p",{className:"text-xs text-slate-400",children:[Ce(new Date(s.created_date),"HH:mm",{locale:ut}),o&&"  Skickar..."]}),i&&!o&&n.jsx(n.Fragment,{children:s.read_by&&s.read_by.length>1?n.jsx(sE,{className:"h-3.5 w-3.5 text-blue-400"}):s.delivered_at?n.jsx(sE,{className:"h-3.5 w-3.5 text-slate-400"}):n.jsx(Rm,{className:"h-3.5 w-3.5 text-slate-400"})})]})]})]},s.id||a)})})})}function dPe({users:e,currentUserEmail:t,onSelectUser:r}){const[s,a]=P.useState(""),i=e.filter(o=>o.email!==t).filter(o=>{var c,d;const l=s.toLowerCase();return((c=o.full_name)==null?void 0:c.toLowerCase().includes(l))||((d=o.email)==null?void 0:d.toLowerCase().includes(l))});return n.jsxs("div",{className:"flex flex-col h-full",children:[n.jsx("div",{className:"p-4 border-b",children:n.jsxs("div",{className:"relative",children:[n.jsx(uo,{className:"absolute left-3 top-3 h-4 w-4 text-slate-400"}),n.jsx(De,{placeholder:"Sk efter namn eller email...",value:s,onChange:o=>a(o.target.value),className:"pl-10 rounded-xl h-11"})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:i.length===0?n.jsx("div",{className:"text-center py-12",children:n.jsx("p",{className:"text-slate-500 text-sm",children:s?"Inga anvndare hittades":"Inga anvndare tillgngliga"})}):i.map((o,l)=>{var c,d;return n.jsxs(tt.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:l*.03},onClick:()=>r(o),className:"w-full flex items-center gap-3 p-3 rounded-xl bg-white hover:bg-slate-50 transition-all border border-slate-100 hover:border-slate-200 hover:shadow-sm",children:[n.jsx("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-semibold text-lg flex-shrink-0",children:((c=o.full_name)==null?void 0:c.charAt(0))||((d=o.email)==null?void 0:d.charAt(0))}),n.jsxs("div",{className:"flex-1 text-left min-w-0",children:[n.jsx("p",{className:"font-medium text-slate-900 truncate",children:o.full_name||"Ingen namn"}),n.jsx("p",{className:"text-sm text-slate-500 truncate",children:o.email})]}),n.jsx(Vv,{className:"h-5 w-5 text-slate-400 flex-shrink-0"})]},o.email)})})]})}function t7({typingUsers:e}){return!e||e.length===0?null:n.jsxs(tt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"flex items-center gap-2 px-4 py-2",children:[n.jsx("div",{className:"flex gap-1",children:[0,1,2].map(t=>n.jsx(tt.div,{className:"w-2 h-2 bg-slate-400 rounded-full",animate:{y:[0,-8,0]},transition:{duration:.6,repeat:1/0,delay:t*.15}},t))}),n.jsx("span",{className:"text-sm text-slate-500",children:e.length===1?`${e[0]} skriver...`:`${e.length} personer skriver...`})]})}function uPe(){var fe,be;const[e,t]=P.useState(null),[r,s]=P.useState(null),[a,i]=P.useState(""),[o,l]=P.useState(!1),[c,d]=P.useState([]),[u,h]=P.useState(""),[g,x]=P.useState("direct"),[b,y]=P.useState(""),[v,j]=P.useState(""),[w,N]=P.useState(!1),A=P.useRef(null);$n();const C=P.useRef(null);P.useEffect(()=>{oe.auth.me().then(t).catch(()=>t(null))},[]);const{data:M=[]}=He({queryKey:["users"],queryFn:()=>oe.entities.User.list()}),{data:I=[],isLoading:F,refetch:U}=He({queryKey:["conversations",e==null?void 0:e.email],queryFn:async()=>e!=null&&e.email?(await oe.entities.Conversation.list("-updated_date",50)).filter(we=>we.participants.includes(e.email)&&!we.is_archived):[],enabled:!!(e!=null&&e.email),refetchInterval:2e3}),[W,D]=P.useState([]),[R,z]=P.useState(!1);P.useEffect(()=>{if(!r){D([]);return}z(!0);const xe=async()=>{try{const Pe=await oe.entities.Message.filter({conversation_id:r},"created_date",100);D(Pe),z(!1)}catch(Pe){console.error("Error loading messages:",Pe),z(!1)}};xe();const we=setInterval(xe,1500);return()=>{clearInterval(we),z(!1)}},[r]),P.useEffect(()=>{if(!r||!W.length||!(e!=null&&e.email))return;const xe=W.filter(we=>we.sender_email!==e.email&&(!we.read_by||!we.read_by.some(Pe=>Pe.email===e.email)));xe.length>0&&oe.functions.invoke("markMessagesAsRead",{message_ids:xe.map(we=>we.id)}).catch(we=>console.error("Error marking as read:",we))},[W,r,e==null?void 0:e.email]);const Z=xe=>{i(xe),!(!r||!(e!=null&&e.email))&&(C.current&&clearTimeout(C.current),xe.trim()&&!w&&(N(!0),oe.functions.invoke("updateTypingStatus",{conversation_id:r,is_typing:!0}).catch(we=>console.error("Typing error:",we))),C.current=setTimeout(()=>{w&&(N(!1),oe.functions.invoke("updateTypingStatus",{conversation_id:r,is_typing:!1}).catch(we=>console.error("Typing error:",we)))},2e3))},se=Xt({mutationFn:async xe=>{const we=[...new Set([e.email,...xe])];return await oe.entities.Conversation.create({title:u||we.map(_e=>{var Ve;return((Ve=M.find(Ue=>Ue.email===_e))==null?void 0:Ve.full_name)||_e}).join(", "),type:xe.length===1?"direct":"group",participants:we,is_archived:!1})},onSuccess:xe=>{U(),s(xe.id),l(!1),h(""),d([])}}),J=xe=>{const we=I.find(Pe=>Pe.type==="direct"&&Pe.participants.includes(xe.email)&&Pe.participants.length===2);we?(s(we.id),l(!1)):se.mutate([xe.email])},Q=Xt({mutationFn:async xe=>(await oe.functions.invoke("sendChatMessage",{conversation_id:r,content:xe})).data.message,onSuccess:()=>{U(),i(""),r&&oe.entities.Message.filter({conversation_id:r},"created_date",100).then(xe=>D(xe))}}),H=async xe=>{xe.preventDefault(),a.trim()&&(w&&(N(!1),oe.functions.invoke("updateTypingStatus",{conversation_id:r,is_typing:!1}).catch(we=>console.error("Typing error:",we))),await Q.mutate(a))};P.useEffect(()=>{var xe;(xe=A.current)==null||xe.scrollIntoView({behavior:"smooth"})},[W]);const ne=I.find(xe=>xe.id===r),ue=M.filter(xe=>xe.email!==(e==null?void 0:e.email)),ae=((be=(fe=ne==null?void 0:ne.typing_users)==null?void 0:fe.filter(xe=>xe.email!==(e==null?void 0:e.email)&&new Date-new Date(xe.timestamp)<5e3))==null?void 0:be.map(xe=>xe.name))||[],G=I.filter(xe=>xe.title.toLowerCase().includes(b.toLowerCase())),te=W.filter(xe=>v.trim()?xe.content.toLowerCase().includes(v.toLowerCase()):!0);return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pb-24",children:[n.jsxs("div",{className:"hidden md:flex max-w-6xl mx-auto h-screen flex-col",children:[n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"sticky top-0 bg-white/95 backdrop-blur border-b p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Meddelanden"}),n.jsx(ye,{onClick:()=>{l(!0),x("direct")},size:"icon",className:"rounded-full bg-slate-900 hover:bg-slate-800 text-white h-11 w-11 shadow-lg",children:n.jsx(xr,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"relative",children:[n.jsx(uo,{className:"absolute left-3 top-3 h-4 w-4 text-slate-400"}),n.jsx(De,{placeholder:"Sk konversationer...",value:b,onChange:xe=>y(xe.target.value),className:"pl-10 rounded-lg h-10"})]})]}),n.jsxs("div",{className:"flex flex-1 gap-4 p-4 min-h-0",children:[n.jsx("div",{className:"w-80 overflow-y-auto",children:n.jsx(JF,{conversations:G,selectedId:r,onSelect:s,loading:F})}),n.jsx("div",{className:"flex-1 flex flex-col bg-white rounded-2xl shadow-sm overflow-hidden",children:ne?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"border-b p-4",children:n.jsx("h2",{className:"font-semibold text-slate-900",children:ne.title})}),n.jsx("div",{className:"border-b p-3 flex items-center gap-2",children:W.length>0&&n.jsxs("div",{className:"relative flex-1",children:[n.jsx(uo,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-400"}),n.jsx(De,{placeholder:"Sk i chathistorik...",value:v,onChange:xe=>j(xe.target.value),className:"pl-10 h-9 text-sm"})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:R?n.jsx("div",{className:"space-y-2",children:[1,2,3].map(xe=>n.jsx("div",{className:"h-8 bg-slate-100 rounded-lg animate-pulse"},xe))}):n.jsxs(n.Fragment,{children:[n.jsx(e7,{messages:te,currentUserEmail:e==null?void 0:e.email}),n.jsx(_a,{children:ae.length>0&&n.jsx(t7,{typingUsers:ae})}),n.jsx("div",{ref:A})]})}),n.jsxs("form",{onSubmit:H,className:"border-t p-4 flex gap-2",children:[n.jsx(De,{value:a,onChange:xe=>Z(xe.target.value),placeholder:"Skriv ett meddelande...",className:"flex-1 rounded-full h-11"}),n.jsx(ye,{type:"submit",size:"icon",className:"rounded-full h-11 w-11",disabled:!a.trim()||Q.isPending,children:n.jsx(Fm,{className:"h-4 w-4"})})]})]}):n.jsx("div",{className:"flex items-center justify-center h-full text-slate-500",children:n.jsx("p",{children:"Vlj en konversation fr att brja chatta"})})})]})]}),n.jsx("div",{className:"md:hidden max-w-2xl mx-auto h-screen flex flex-col",children:r?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"sticky top-0 bg-white/95 backdrop-blur border-b p-4 flex items-center gap-3",children:[n.jsx(ye,{variant:"ghost",size:"icon",onClick:()=>s(null),className:"rounded-full",children:n.jsx(tp,{className:"h-5 w-5"})}),n.jsx("h2",{className:"font-semibold text-slate-900 flex-1",children:ne==null?void 0:ne.title})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:R?n.jsx("div",{className:"space-y-2",children:[1,2,3].map(xe=>n.jsx("div",{className:"h-8 bg-slate-100 rounded-lg animate-pulse"},xe))}):n.jsxs(n.Fragment,{children:[n.jsx(e7,{messages:W,currentUserEmail:e==null?void 0:e.email}),n.jsx(_a,{children:ae.length>0&&n.jsx(t7,{typingUsers:ae})}),n.jsx("div",{ref:A})]})}),n.jsxs("form",{onSubmit:H,className:"border-t p-4 flex gap-2",children:[n.jsx(De,{value:a,onChange:xe=>Z(xe.target.value),placeholder:"Skriv ett meddelande...",className:"flex-1 rounded-full h-11"}),n.jsx(ye,{type:"submit",size:"icon",className:"rounded-full h-11 w-11",disabled:!a.trim()||Q.isPending,children:n.jsx(Fm,{className:"h-4 w-4"})})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"sticky top-0 bg-white/95 backdrop-blur border-b p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between pr-14",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Meddelanden"}),n.jsx(ye,{onClick:()=>{l(!0),x("direct")},size:"icon",className:"rounded-full bg-slate-900 hover:bg-slate-800 text-white h-11 w-11 shadow-lg",children:n.jsx(xr,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"relative",children:[n.jsx(uo,{className:"absolute left-3 top-3 h-4 w-4 text-slate-400"}),n.jsx(De,{placeholder:"Sk konversationer...",value:b,onChange:xe=>y(xe.target.value),className:"pl-10 rounded-lg h-10 text-sm"})]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:n.jsx(JF,{conversations:G,selectedId:r,onSelect:s,loading:F})})]})}),n.jsx(Xn,{open:o,onOpenChange:l,children:n.jsxs(Yn,{className:"sm:max-w-md max-h-[80vh] flex flex-col p-0",children:[n.jsx(er,{className:"p-6 pb-4",children:n.jsx(tr,{children:"Ny konversation"})}),n.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[n.jsx("div",{className:"px-6 pb-4",children:n.jsxs("div",{className:"grid grid-cols-2 gap-2 p-1 bg-slate-100 rounded-lg",children:[n.jsx("button",{onClick:()=>{x("direct"),h(""),d([])},className:`py-2.5 px-4 rounded-md font-medium text-sm transition-all ${g==="direct"?"bg-white text-slate-900 shadow-sm":"text-slate-600"}`,children:"Privat chat"}),n.jsx("button",{onClick:()=>{x("group"),d([])},className:`py-2.5 px-4 rounded-md font-medium text-sm transition-all ${g==="group"?"bg-white text-slate-900 shadow-sm":"text-slate-600"}`,children:"Gruppchatt"})]})}),g==="direct"?n.jsx("div",{className:"flex-1 overflow-hidden",children:n.jsx(dPe,{users:M,currentUserEmail:e==null?void 0:e.email,onSelectUser:J})}):n.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col px-6",children:[n.jsx(De,{placeholder:"Gruppnamn (valfritt)",value:u,onChange:xe=>h(xe.target.value),className:"rounded-xl h-11 mb-4"}),n.jsxs("div",{className:"flex-1 overflow-y-auto space-y-1",children:[n.jsxs("p",{className:"text-xs font-medium text-slate-500 mb-3",children:["Valda: ",c.length]}),ue.map(xe=>{var Pe,_e;const we=c.includes(xe.email);return n.jsxs("button",{onClick:()=>{d(we?c.filter(Ve=>Ve!==xe.email):[...c,xe.email])},className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all ${we?"bg-blue-50 ring-2 ring-blue-500 ring-inset":"bg-white hover:bg-slate-50 border border-slate-100"}`,children:[n.jsx("div",{className:`h-10 w-10 rounded-full flex items-center justify-center font-semibold text-sm ${we?"bg-blue-500 text-white":"bg-slate-100 text-slate-600"}`,children:((Pe=xe.full_name)==null?void 0:Pe.charAt(0))||((_e=xe.email)==null?void 0:_e.charAt(0))}),n.jsxs("div",{className:"flex-1 text-left",children:[n.jsx("p",{className:"font-medium text-slate-900 text-sm",children:xe.full_name}),n.jsx("p",{className:"text-xs text-slate-500",children:xe.email})]}),we&&n.jsx("div",{className:"h-5 w-5 rounded-full bg-blue-500 flex items-center justify-center",children:n.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{d:"M5 13l4 4L19 7"})})})]},xe.email)})]}),n.jsx("div",{className:"pt-4 pb-6",children:n.jsx(ye,{onClick:()=>se.mutate(c),disabled:c.length<2||se.isPending,className:"w-full h-12 rounded-xl font-medium text-base",size:"lg",children:se.isPending?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Skapar..."]}):"Skapa gruppchatt"})})]})]})]})})]})}function hPe(){const[e,t]=P.useState(""),r=(h,g)=>{navigator.clipboard.writeText(h),t(g),oo.success(`${g} kopierad!`),setTimeout(()=>t(""),2e3)},s=`# ============================================
# FRONTEND .env.example (Endast lokal development)
# ============================================
# Dessa anvnds nr du kr "npm run dev" lokalt
# I produktion hanteras dessa automatiskt av Base44

# Base44 Platform Connection
VITE_BASE44_APP_ID=your-app-id-from-dashboard
VITE_BASE44_API_URL=https://api.base44.com

# ============================================
# OBS: Backend functions krs ALLTID p Base44
# Du kan inte kra functions lokalt utan Base44
# ============================================`,a=`# ============================================
# BACKEND .env (Deno Deploy Functions)
# ============================================
# Stt dessa i Base44 Dashboard  Settings  Environment Variables
# Dessa r SECRETS och ska aldrig commitas

# ===== OBLIGATORISKA SECRETS =====

# GalaGPS API Integration (GPS-sprning)
GALAGPS_USERNAME=your-galagps-username
GALAGPS_PASSWORD=your-galagps-password
GALAGPS_URL=https://api.galagps.com

# ===== AUTO-HANTERADE AV BASE44 =====
# Dessa stts automatiskt, du behver INTE stta dem manuellt

# BASE44_APP_ID=auto-generated-app-id
# BASE44_API_URL=https://api.base44.com

# Web Push Notifications (VAPID)
# VAPID_PUBLIC_KEY=auto-generated-by-base44
# VAPID_PRIVATE_KEY=auto-generated-by-base44

# ===== OPTIONAL (via Base44 Integrations) =====
# OpenAI anvnds via base44.integrations.Core.InvokeLLM
# ingen separat API key behvs - hanteras av Base44
# OPENAI_API_KEY=handled-by-base44-integrations`,i=`# ============================================
# EXTERNA API ENDPOINTS & BEROENDEN
# ============================================

# === Base44 Platform ===
Base URL: https://api.base44.com
Auth: JWT Bearer token (auto-hanterad av SDK)
SDK: @base44/sdk@0.8.3

Endpoints som anvnds:
  - /auth/login
  - /auth/me
  - /entities/{EntityName}
  - /functions/{functionName}
  - /integrations/{integration}/{endpoint}
  - WebSocket: wss://api.base44.com/ws

# === GalaGPS API ===
Base URL: {GALAGPS_URL{'}'} (stts via secret)
Auth: Token-based (via username/password)
Rate Limit: Oknd, respekterar 1s delay i kod

Endpoints som anvnds:
  - POST /auth/login
  - GET /devices/list
  - GET /devices/position
  - GET /track/history
  - GET /reports/trips
  - GET /reports/mileage
  - GET /reports/fuel

# === OpenAI API ===
Anvnds VIA Base44 Integrations
Integration: base44.integrations.Core.InvokeLLM
Model: gpt-4o-mini (default i Base44)
Auth: Hanterad av Base44 (ingen egen key behvs)

Anvndningsomrden:
  - AI-klassificering av krjournalsposter
  - Tidrapport-draft generation
  - Projektfrslag baserat p historik
  - AI-analys av resemnster

# === OpenStreetMap Nominatim ===
Base URL: https://nominatim.openstreetmap.org
Auth: Ingen (public API)
Rate Limit: 1 request/sekund (implementerad i kod)

Anvnds fr:
  - Reverse geocoding (GPS  adress)
  - Anvnds i gpsTracking.js

# === Web Push Protocol ===
VAPID Keys: Auto-genererade av Base44
Public Key: Anvnds i frontend fr push subscription
Private Key: Anvnds i backend fr att skicka notifikationer

Endpoints:
  - /functions/getVapidPublicKey (hmta public key)
  - /functions/sendWebPushNotification (skicka push)
  
Browser APIs:
  - ServiceWorkerRegistration.pushManager
  - Notification API

# === Leaflet / OpenStreetMap Tiles ===
Tile Server: https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png
Auth: Ingen (public)
Attribution:  OpenStreetMap contributors

# === Browser APIs (inga externa anrop) ===
  - Geolocation API (navigator.geolocation)
  - Web Bluetooth API (navigator.bluetooth)
  - IndexedDB (lokal cache)
  - LocalStorage (token, preferences)`,o=`# ============================================
# GUIDE: HANTERA SECRETS
# ============================================

## Nuvarande Secrets (redan satta):
 GALAGPS_USERNAME
 GALAGPS_PASSWORD
 GALAGPS_URL

## S hr stter du nya secrets:

1. G till Base44 Dashboard
2. Vlj ditt projekt
3. Settings  Environment Variables
4. Klicka "Add Secret"
5. Ange namn och vrde
6. Spara

## Security Best Practices:

 ALDRIG committa secrets till Git
 ALDRIG logga secrets i console
 ALDRIG skicka secrets till frontend
 Anvnd secrets ENDAST i backend functions
 Validera att secret finns innan anvndning:
   const apiKey = Deno.env.get("SECRET_NAME");
   if (!apiKey) throw new Error("Missing SECRET_NAME");

## Testing lokalt:

Du kan INTE kra Deno functions lokalt utan Base44.
Backend functions mste alltid kras p Base44-plattformen.
Frontend kan kras lokalt med VITE_* variabler.`,l=`{
  "name": "gps-time-tracking",
  "version": "1.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "@base44/sdk": "^0.8.3",
    "@tanstack/react-query": "^5.84.1",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-router-dom": "^6.26.0",
    "framer-motion": "^11.16.4",
    "react-leaflet": "^4.2.1",
    "lucide-react": "^0.475.0",
    "date-fns": "^3.6.0",
    "moment": "^2.30.1",
    "recharts": "^2.15.4",
    "react-markdown": "^9.0.1",
    "sonner": "^2.0.1",
    "tailwind-merge": "^3.0.2",
    "tailwindcss-animate": "^1.0.7"
  }
}`,c=[{name:"User",desc:"Anvndare med auth (hanterad av Base44)"},{name:"Employee",desc:"Medarbetarinformation och instllningar"},{name:"Vehicle",desc:"Fordon med GPS-integration"},{name:"BluetoothDevice",desc:"Bluetooth-enheter fr auto clock-in"},{name:"TimeEntry",desc:"Tidrapportering med GPS-verifiering"},{name:"WeeklyReport",desc:"Veckorapporter fr attest"},{name:"LeaveRequest",desc:"Semester och ledighetsanskningar"},{name:"DrivingJournalEntry",desc:"Krjournalsposter frn GPS"},{name:"JournalPolicy",desc:"Policys fr krjournal"},{name:"Geofence",desc:"Geografiska omrden fr auto-klassificering"},{name:"FuelLog",desc:"Tankningsloggar"},{name:"MaintenanceIssue",desc:"Fel och service p fordon"},{name:"VehicleHandover",desc:"Fordonverlmningar"},{name:"Project",desc:"Projekt fr tidrapportering"},{name:"ProjectTask",desc:"Projektuppgifter"},{name:"WorkPolicy",desc:"Arbetspolicys och vertidsregler"},{name:"ApprovalRequest",desc:"Anskningar och godknnanden"},{name:"Notification",desc:"Notifikationer till anvndare"},{name:"Manual",desc:"Manualer och dokumentation"},{name:"Document",desc:"Dokument"},{name:"NewsPost",desc:"Nyheter och inlgg"},{name:"ScheduleEvent",desc:"Schemalagda hndelser"},{name:"OnboardingTemplate",desc:"Onboarding-mallar"},{name:"OnboardingTask",desc:"Onboarding-uppgifter"},{name:"Message",desc:"Chattmeddelanden"},{name:"Conversation",desc:"Chattkonversationer"},{name:"NotificationSettings",desc:"Notifikationsinstllningar"},{name:"PushSubscription",desc:"Push-prenumerationer"},{name:"DashboardWidget",desc:"Dashboard-widgets"},{name:"MileagePolicy",desc:"Milersttningspolicys"}],d=[{name:"gpsTracking",desc:"Proxy till GalaGPS API"},{name:"syncGPSTrips",desc:"Synkronisera GPS-resor med krjournal"},{name:"bluetoothGPS",desc:"Bluetooth-integration fr auto clock-in"},{name:"analyzeTrips",desc:"AI-analys av krjournalsposter"},{name:"generateDraftTimeReport",desc:"AI-genererad tidrapport"},{name:"autoProcessJournal",desc:"Automatisk klassificering av resor"},{name:"suggestProjects",desc:"Fresl projekt baserat p historik"},{name:"sendPushNotification",desc:"Skicka push-notifikationer"},{name:"autoClockOut",desc:"Automatisk utcheckning"},{name:"sendTimeReportReminders",desc:"Pminnelser om tidrapporter"},{name:"exportJournalPDF",desc:"Exportera krjournal till PDF"},{name:"exportJournalCSV",desc:"Exportera till CSV"},{name:"generateWeeklyProjectReport",desc:"Veckrapporter per projekt"}],u=`import { base44 } from '@/api/base44Client';
import fs from 'fs';

const entities = [${c.map(h=>`'${h.name}'`).join(", ")}];

async function exportAll() {
  for (const entityName of entities) {
    const data = await base44.entities[entityName].list();
    fs.writeFileSync(
      \`backup/\${entityName}.json\`,
      JSON.stringify(data, null, 2)
    );
    console.log(\` Exported \${entityName}: \${data.length} records\`);
  }
}

exportAll();`;return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-4 md:p-8",children:n.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-2",children:"Exportdokumentation"}),n.jsx("p",{className:"text-slate-600",children:"All information fr att kopiera eller migrera appen"})]}),n.jsxs(Ls,{defaultValue:"overview",className:"w-full",children:[n.jsxs(As,{className:"grid w-full grid-cols-5",children:[n.jsx(gt,{value:"overview",children:"versikt"}),n.jsx(gt,{value:"env",children:"Miljvariabler"}),n.jsx(gt,{value:"database",children:"Databas"}),n.jsx(gt,{value:"dependencies",children:"Dependencies"}),n.jsx(gt,{value:"export",children:"Export"})]}),n.jsx(Dt,{value:"overview",className:"space-y-4",children:n.jsxs(ce,{children:[n.jsxs(At,{children:[n.jsxs(Ct,{className:"flex items-center gap-2",children:[n.jsx(Jr,{className:"h-5 w-5"}),"Projektversikt"]}),n.jsx(cd,{children:"Komplett GPS & Tidrapporteringssystem"})]}),n.jsxs(he,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:" Funktioner"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-slate-600",children:[n.jsx("li",{children:"Tidrapportering med GPS-verifiering"}),n.jsx("li",{children:"Real-time GPS-sprning av fordon"}),n.jsx("li",{children:"Automatisk krjournal med AI-klassificering"}),n.jsx("li",{children:"Fordonshantering och underhll"}),n.jsx("li",{children:"Projekthantering med budget-tracking"}),n.jsx("li",{children:"Medarbetarhantering med onboarding"}),n.jsx("li",{children:"Push-notifikationer"}),n.jsx("li",{children:"Intern chat"}),n.jsx("li",{children:"Geofencing"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:" Tech Stack (Fullstndig)"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[n.jsx("p",{className:"font-semibold text-sm mb-2",children:"Frontend"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-700 mb-1",children:"Core:"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-0.5",children:[n.jsx("li",{children:"React 18.2.0"}),n.jsx("li",{children:"React DOM 18.2.0"}),n.jsx("li",{children:"Vite (build tool)"}),n.jsx("li",{children:"TypeScript (JSX)"})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-700 mb-1",children:"Routing & State:"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-0.5",children:[n.jsx("li",{children:"React Router DOM 6.26.0"}),n.jsx("li",{children:"TanStack React Query 5.84.1"}),n.jsx("li",{children:"React Hook Form 7.54.2"}),n.jsx("li",{children:"Zod (validation)"})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-700 mb-1",children:"UI & Styling:"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-0.5",children:[n.jsx("li",{children:"TailwindCSS + tailwind-merge"}),n.jsx("li",{children:"shadcn/ui (40+ komponenter)"}),n.jsx("li",{children:"Radix UI primitives"}),n.jsx("li",{children:"Lucide React (icons)"}),n.jsx("li",{children:"Framer Motion 11.16.4"})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-700 mb-1",children:"Specialized:"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-0.5",children:[n.jsx("li",{children:"React Leaflet 4.2.1 (maps)"}),n.jsx("li",{children:"Recharts 2.15.4 (charts)"}),n.jsx("li",{children:"React Markdown 9.0.1"}),n.jsx("li",{children:"React Quill 2.0.0 (editor)"}),n.jsx("li",{children:"Three.js 0.171.0 (3D)"})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-700 mb-1",children:"Utilities:"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-0.5",children:[n.jsx("li",{children:"date-fns 3.6.0"}),n.jsx("li",{children:"moment 2.30.1"}),n.jsx("li",{children:"lodash 4.17.21"}),n.jsx("li",{children:"jspdf 2.5.2"}),n.jsx("li",{children:"canvas-confetti 1.9.4"})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-700 mb-1",children:"Notifications:"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-0.5",children:[n.jsx("li",{children:"Sonner 2.0.1 (toast)"}),n.jsx("li",{children:"React Hot Toast 2.6.0"}),n.jsx("li",{children:"Web Push API"})]})]})]})]}),n.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[n.jsx("p",{className:"font-semibold text-sm mb-2",children:"Backend"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-700 mb-1",children:"Platform:"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-0.5",children:[n.jsx("li",{children:"Base44 Platform (BaaS)"}),n.jsx("li",{children:"@base44/sdk 0.8.3"}),n.jsx("li",{children:"Deno Deploy (serverless)"}),n.jsx("li",{children:"PostgreSQL (managed)"})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-700 mb-1",children:"Features:"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-0.5",children:[n.jsx("li",{children:"JWT Authentication"}),n.jsx("li",{children:"WebSocket (real-time)"}),n.jsx("li",{children:"File Storage"}),n.jsx("li",{children:"CRUD API (auto-generated)"})]})]})]})]}),n.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[n.jsx("p",{className:"font-semibold text-sm mb-2",children:"Integrationer"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-700 mb-1",children:"GPS & Tracking:"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-0.5",children:[n.jsx("li",{children:"GalaGPS API"}),n.jsx("li",{children:"OpenStreetMap Nominatim"}),n.jsx("li",{children:"Geolocation API"})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-700 mb-1",children:"AI & Notifications:"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-0.5",children:[n.jsx("li",{children:"OpenAI GPT-4"}),n.jsx("li",{children:"Web Push Protocol"}),n.jsx("li",{children:"Service Workers"})]})]})]})]}),n.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:n.jsxs("p",{className:"text-xs text-blue-900",children:[n.jsx("strong",{children:" Total bundle size:"})," ~2.5MB optimerad fr produktion med code-splitting"]})})]})]}),n.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:n.jsxs("p",{className:"text-sm text-blue-900",children:[n.jsx("strong",{children:" Projektstruktur:"})," All kllkod finns i Base44 projektet: entities/ (30 st), pages/ (40+ st), components/ (100+ st), functions/ (40+ st)"]})})]})]})}),n.jsxs(Dt,{value:"env",className:"space-y-4",children:[n.jsxs(ce,{children:[n.jsxs(At,{children:[n.jsxs(Ct,{className:"flex items-center gap-2",children:[n.jsx(z0,{className:"h-5 w-5"}),"Frontend Miljvariabler"]}),n.jsx(cd,{children:"Endast fr lokal development (npm run dev)"})]}),n.jsxs(he,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"font-semibold",children:".env.example (Frontend)"}),n.jsxs(ye,{size:"sm",variant:"outline",onClick:()=>r(s,"Frontend ENV"),children:[n.jsx(nf,{className:"h-4 w-4 mr-2"}),e==="Frontend ENV"?"Kopierad!":"Kopiera"]})]}),n.jsx("pre",{className:"bg-slate-900 text-slate-100 p-4 rounded-lg overflow-x-auto text-xs",children:s})]}),n.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:n.jsxs("p",{className:"text-sm text-blue-900",children:[n.jsx("strong",{children:" Info:"})," I produktion stts dessa automatiskt av Base44-plattformen. Du behver endast dessa fr lokal development av frontend."]})})]})]}),n.jsxs(ce,{children:[n.jsxs(At,{children:[n.jsxs(Ct,{className:"flex items-center gap-2",children:[n.jsx(z0,{className:"h-5 w-5"}),"Backend Secrets (Deno Functions)"]}),n.jsx(cd,{children:"Stt i Base44 Dashboard  Settings  Environment Variables"})]}),n.jsxs(he,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"font-semibold",children:".env (Backend/Functions)"}),n.jsxs(ye,{size:"sm",variant:"outline",onClick:()=>r(a,"Backend ENV"),children:[n.jsx(nf,{className:"h-4 w-4 mr-2"}),e==="Backend ENV"?"Kopierad!":"Kopiera"]})]}),n.jsx("pre",{className:"bg-slate-900 text-slate-100 p-4 rounded-lg overflow-x-auto text-xs",children:a})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[n.jsx("p",{className:"text-sm font-semibold text-green-900 mb-2",children:" Redan satta:"}),n.jsxs("ul",{className:"text-xs space-y-1 text-green-800",children:[n.jsx("li",{children:" GALAGPS_USERNAME"}),n.jsx("li",{children:" GALAGPS_PASSWORD"}),n.jsx("li",{children:" GALAGPS_URL"})]})]}),n.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-900 mb-2",children:" Auto-hanterade:"}),n.jsxs("ul",{className:"text-xs space-y-1 text-slate-600",children:[n.jsx("li",{children:" BASE44_APP_ID"}),n.jsx("li",{children:" VAPID_PUBLIC_KEY"}),n.jsx("li",{children:" VAPID_PRIVATE_KEY"})]})]})]}),n.jsx("div",{className:"bg-amber-50 p-4 rounded-lg",children:n.jsxs("p",{className:"text-sm text-amber-900",children:[n.jsx("strong",{children:" Viktigt:"})," Backend functions kan INTE kras lokalt. De krs alltid p Base44 Deno Deploy. Secrets ns via Deno.env.get()."]})})]})]}),n.jsxs(ce,{children:[n.jsxs(At,{children:[n.jsxs(Ct,{className:"flex items-center gap-2",children:[n.jsx(_2,{className:"h-5 w-5"}),"Externa API Endpoints"]}),n.jsx(cd,{children:"Alla externa beroenden och endpoints"})]}),n.jsx(he,{children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"font-semibold",children:"API Endpoints & Integration"}),n.jsxs(ye,{size:"sm",variant:"outline",onClick:()=>r(i,"Endpoints"),children:[n.jsx(nf,{className:"h-4 w-4 mr-2"}),e==="Endpoints"?"Kopierad!":"Kopiera"]})]}),n.jsx("pre",{className:"bg-slate-900 text-slate-100 p-4 rounded-lg overflow-x-auto text-xs max-h-96",children:i})]})})]}),n.jsxs(ce,{children:[n.jsx(At,{children:n.jsx(Ct,{children:" Secrets Management Guide"})}),n.jsx(he,{children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"font-semibold text-sm",children:"Hantera Secrets skert"}),n.jsxs(ye,{size:"sm",variant:"outline",onClick:()=>r(o,"Secrets Guide"),children:[n.jsx(nf,{className:"h-4 w-4 mr-2"}),e==="Secrets Guide"?"Kopierad!":"Kopiera"]})]}),n.jsx("pre",{className:"bg-slate-900 text-slate-100 p-4 rounded-lg overflow-x-auto text-xs",children:o})]})})]})]}),n.jsx(Dt,{value:"database",className:"space-y-4",children:n.jsxs(ce,{children:[n.jsxs(At,{children:[n.jsxs(Ct,{className:"flex items-center gap-2",children:[n.jsx(Vb,{className:"h-5 w-5"}),"Databasschema"]}),n.jsxs(cd,{children:[c.length," entiteter definierade i entities/ mappen"]})]}),n.jsxs(he,{children:[n.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:c.map(h=>n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[n.jsx(Vb,{className:"h-4 w-4 text-slate-500 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"font-medium text-sm",children:[h.name,".json"]}),n.jsx("p",{className:"text-xs text-slate-600",children:h.desc})]})]},h.name))}),n.jsx("div",{className:"mt-4 bg-blue-50 p-4 rounded-lg",children:n.jsxs("p",{className:"text-sm text-blue-900",children:[n.jsx("strong",{children:" Schema:"})," Alla entiteter finns i entities/*.json som JSON Schema. Varje entitet fr automatiskt id, created_date, updated_date, created_by."]})})]})]})}),n.jsxs(Dt,{value:"dependencies",className:"space-y-4",children:[n.jsxs(ce,{children:[n.jsxs(At,{children:[n.jsxs(Ct,{className:"flex items-center gap-2",children:[n.jsx(zX,{className:"h-5 w-5"}),"Dependencies"]}),n.jsx(cd,{children:"NPM packages som anvnds"})]}),n.jsxs(he,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"font-semibold",children:"package.json"}),n.jsxs(ye,{size:"sm",variant:"outline",onClick:()=>r(l,"package.json"),children:[n.jsx(nf,{className:"h-4 w-4 mr-2"}),e==="package.json"?"Kopierad!":"Kopiera"]})]}),n.jsx("pre",{className:"bg-slate-900 text-slate-100 p-4 rounded-lg overflow-x-auto text-xs",children:l})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[n.jsx("p",{className:"font-semibold text-sm mb-2",children:"Huvudbibliotek"}),n.jsxs("ul",{className:"text-xs space-y-1 text-slate-600",children:[n.jsx("li",{children:" @base44/sdk"}),n.jsx("li",{children:" react + react-dom"}),n.jsx("li",{children:" @tanstack/react-query"}),n.jsx("li",{children:" react-router-dom"})]})]}),n.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[n.jsx("p",{className:"font-semibold text-sm mb-2",children:"UI & Maps"}),n.jsxs("ul",{className:"text-xs space-y-1 text-slate-600",children:[n.jsx("li",{children:" shadcn/ui (40+ komponenter)"}),n.jsx("li",{children:" lucide-react (icons)"}),n.jsx("li",{children:" react-leaflet (maps)"}),n.jsx("li",{children:" framer-motion"})]})]})]})]})]}),n.jsxs(ce,{children:[n.jsxs(At,{children:[n.jsxs(Ct,{className:"flex items-center gap-2",children:[n.jsx(_2,{className:"h-5 w-5"}),"Backend Functions"]}),n.jsxs(cd,{children:[d.length," Deno Deploy functions"]})]}),n.jsx(he,{children:n.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:d.map(h=>n.jsxs("div",{className:"flex items-start gap-3 p-2 bg-slate-50 rounded-lg",children:[n.jsx(_2,{className:"h-4 w-4 text-slate-500 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"font-medium text-sm",children:[h.name,".js"]}),n.jsx("p",{className:"text-xs text-slate-600",children:h.desc})]})]},h.name))})})]})]}),n.jsxs(Dt,{value:"export",className:"space-y-4",children:[n.jsxs(ce,{children:[n.jsxs(At,{children:[n.jsxs(Ct,{className:"flex items-center gap-2",children:[n.jsx(Eo,{className:"h-5 w-5"}),"Data Export"]}),n.jsx(cd,{children:"Exportera all data frn databasen"})]}),n.jsxs(he,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Export Script (Node.js)"}),n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("p",{className:"text-sm text-slate-600",children:"Kr fr att exportera all data till JSON"}),n.jsxs(ye,{size:"sm",variant:"outline",onClick:()=>r(u,"Export Script"),children:[n.jsx(nf,{className:"h-4 w-4 mr-2"}),e==="Export Script"?"Kopierad!":"Kopiera"]})]}),n.jsx("pre",{className:"bg-slate-900 text-slate-100 p-4 rounded-lg overflow-x-auto text-xs",children:u})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:" Steg fr steg:"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-blue-800",children:[n.jsx("li",{children:"Skapa export-script lokalt (export.js)"}),n.jsxs("li",{children:["Kr: ",n.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"node export.js"})]}),n.jsx("li",{children:"Data sparas i backup/*.json"}),n.jsx("li",{children:"Versionshantera med Git"})]})]}),n.jsxs("div",{className:"bg-amber-50 p-4 rounded-lg",children:[n.jsx("p",{className:"text-sm font-semibold text-amber-900 mb-2",children:" Manual export via browser:"}),n.jsx("p",{className:"text-sm text-amber-800 mb-2",children:"ppna browser console och kr:"}),n.jsx("pre",{className:"bg-amber-100 text-amber-900 p-2 rounded text-xs overflow-x-auto",children:`const data = await base44.entities.Employee.list();
console.log(JSON.stringify(data, null, 2));`})]})]}),n.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:n.jsxs("p",{className:"text-sm text-green-900",children:[n.jsx("strong",{children:" Vad exporteras:"})," All data frn alla ",c.length," entiteter inklusive metadata (id, created_date, updated_date, created_by)."]})})]})]}),n.jsxs(ce,{children:[n.jsx(At,{children:n.jsx(Ct,{children:" Checklista fr export"})}),n.jsx(he,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",className:"rounded"}),"Alla entities/*.json kopierade"]}),n.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",className:"rounded"}),"Alla pages/*.js kopierade"]}),n.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",className:"rounded"}),"Alla components/*.jsx kopierade"]}),n.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",className:"rounded"}),"Alla functions/*.js kopierade"]}),n.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",className:"rounded"}),"Layout.js kopierad"]}),n.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",className:"rounded"}),"Miljvariabler dokumenterade"]}),n.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",className:"rounded"}),"Data exporterad frn databasen"]}),n.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",className:"rounded"}),"Dependencies listade (package.json)"]}),n.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",className:"rounded"}),"README/instruktioner skapade"]})]})})]})]})]}),n.jsx(ce,{className:"bg-gradient-to-br from-slate-800 to-slate-900 text-white",children:n.jsx(he,{className:"pt-6",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"bg-white/10 p-3 rounded-lg",children:n.jsx(Jr,{className:"h-6 w-6"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold mb-2",children:" Fullstndig dokumentation"}),n.jsx("p",{className:"text-sm text-slate-300 mb-3",children:"All kllkod, schema och konfiguration finns i Base44-projektet. Fr migration till egen infrastruktur, se dokumentation om att portera till Node.js/Python med egen databas."}),n.jsx("p",{className:"text-xs text-slate-400",children:"Estimerad migrationstid: 6-8 veckor fullstack-arbete"})]})]})})})]})})}const fPe={personalhandbok:"bg-violet-100 text-violet-700",policy:"bg-blue-100 text-blue-700",rutin:"bg-emerald-100 text-emerald-700",mall:"bg-amber-100 text-amber-700",vrigt:"bg-slate-100 text-slate-700"},mPe={personalhandbok:"Personalhandbok",policy:"Policy",rutin:"Rutin",mall:"Mall",vrigt:"vrigt"};function n7({document:e,onAcknowledge:t,currentUserEmail:r,index:s=0}){var o,l;const a=(o=e.acknowledged_by)==null?void 0:o.some(c=>c.email===r),i=((l=e.acknowledged_by)==null?void 0:l.length)||0;return n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:s*.05},children:n.jsx(ce,{className:"group hover:shadow-md transition-all duration-300 border-0 shadow-sm overflow-hidden",children:n.jsx(he,{className:"p-5",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-slate-100 to-slate-50 flex items-center justify-center flex-shrink-0",children:n.jsx(Jr,{className:"h-6 w-6 text-slate-500"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-semibold text-slate-900 truncate",children:e.title}),e.description&&n.jsx("p",{className:"text-sm text-slate-500 mt-1 line-clamp-2",children:e.description})]}),e.file_url&&n.jsx(ye,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>window.open(e.file_url,"_blank"),children:n.jsx(G7,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-3 flex-wrap",children:[n.jsx(it,{className:`${fPe[e.category]} border-0 text-xs font-medium`,children:mPe[e.category]}),n.jsxs("span",{className:"text-xs text-slate-400",children:["v",e.version]}),n.jsx("span",{className:"text-xs text-slate-400",children:""}),n.jsx("span",{className:"text-xs text-slate-400",children:Ce(new Date(e.updated_date||e.created_date),"d MMM yyyy",{locale:ut})})]}),e.requires_acknowledgment&&n.jsx("div",{className:"mt-4 pt-4 border-t border-slate-100",children:a?n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2 text-emerald-600",children:[n.jsx($r,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm font-medium",children:"Du har bekrftat"})]}),n.jsxs("span",{className:"text-xs text-slate-400",children:[i," har bekrftat"]})]}):n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2 text-amber-600",children:[n.jsx(Vt,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:"Krver bekrftelse"})]}),n.jsx(ye,{size:"sm",onClick:()=>t(e.id),className:"h-8 rounded-full text-xs",children:"Bekrfta lst"})]})})]})]})})})})}function pPe(){const[e,t]=P.useState(null),[r,s]=P.useState(""),[a,i]=P.useState("alla"),o=$n();P.useEffect(()=>{oe.auth.me().then(t)},[]);const{data:l=[],isLoading:c}=He({queryKey:["documents"],queryFn:()=>oe.entities.Document.list("-updated_date",100)}),d=Xt({mutationFn:({id:b,data:y})=>oe.entities.Document.update(b,y),onSuccess:()=>o.invalidateQueries({queryKey:["documents"]})}),u=b=>{const y=l.find(j=>j.id===b);if(!y||!e)return;const v=y.acknowledged_by||[];v.some(j=>j.email===e.email)||d.mutate({id:b,data:{acknowledged_by:[...v,{email:e.email,name:e.full_name,acknowledged_at:new Date().toISOString()}]}})},h=l.filter(b=>{var j;const y=b.title.toLowerCase().includes(r.toLowerCase())||((j=b.description)==null?void 0:j.toLowerCase().includes(r.toLowerCase())),v=a==="alla"||b.category===a;return y&&v}),g=h.filter(b=>{var y;return b.requires_acknowledgment&&!((y=b.acknowledged_by)!=null&&y.some(v=>v.email===(e==null?void 0:e.email)))}),x=h.filter(b=>{var y;return!b.requires_acknowledgment||((y=b.acknowledged_by)==null?void 0:y.some(v=>v.email===(e==null?void 0:e.email)))});return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white",children:n.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-6 pb-24",children:[n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Dokument"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Policyer, rutiner och mallar"}),n.jsxs("div",{className:"relative mt-6 mb-4",children:[n.jsx(uo,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),n.jsx(De,{placeholder:"Sk dokument...",value:r,onChange:b=>s(b.target.value),className:"pl-11 h-12 rounded-2xl border-0 bg-white shadow-sm focus-visible:ring-2 focus-visible:ring-slate-200"})]}),n.jsx(Ls,{value:a,onValueChange:i,children:n.jsxs(As,{className:"w-full h-auto p-1 bg-white shadow-sm rounded-2xl grid grid-cols-6",children:[n.jsx(gt,{value:"alla",className:"rounded-xl text-xs data-[state=active]:shadow-sm",children:"Alla"}),n.jsx(gt,{value:"personalhandbok",className:"rounded-xl text-xs data-[state=active]:shadow-sm",children:"Handbok"}),n.jsx(gt,{value:"policy",className:"rounded-xl text-xs data-[state=active]:shadow-sm",children:"Policy"}),n.jsx(gt,{value:"rutin",className:"rounded-xl text-xs data-[state=active]:shadow-sm",children:"Rutin"}),n.jsx(gt,{value:"mall",className:"rounded-xl text-xs data-[state=active]:shadow-sm",children:"Mall"}),n.jsx(gt,{value:"vrigt",className:"rounded-xl text-xs data-[state=active]:shadow-sm",children:"vrigt"})]})})]}),g.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx("div",{className:"h-2 w-2 rounded-full bg-amber-500 animate-pulse"}),n.jsx("span",{className:"text-sm font-medium text-amber-700",children:"Krver bekrftelse"})]}),n.jsx("div",{className:"space-y-3",children:g.map((b,y)=>n.jsx(n7,{document:b,onAcknowledge:u,currentUserEmail:e==null?void 0:e.email,index:y},b.id))})]}),n.jsx("div",{className:"space-y-3",children:n.jsx(_a,{mode:"popLayout",children:c?n.jsx("div",{className:"space-y-3",children:[1,2,3,4].map(b=>n.jsx("div",{className:"bg-white rounded-2xl h-24 animate-pulse"},b))}):x.length===0&&g.length===0?n.jsxs(tt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-16",children:[n.jsx(Z7,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Inga dokument hittades"})]}):x.map((b,y)=>n.jsx(n7,{document:b,onAcknowledge:u,currentUserEmail:e==null?void 0:e.email,index:y},b.id))})})]})})}const Aw=P.forwardRef(({className:e,...t},r)=>n.jsx("div",{className:"relative w-full overflow-auto",children:n.jsx("table",{ref:r,className:Yt("w-full caption-bottom text-sm",e),...t})}));Aw.displayName="Table";const Cw=P.forwardRef(({className:e,...t},r)=>n.jsx("thead",{ref:r,className:Yt("[&_tr]:border-b",e),...t}));Cw.displayName="TableHeader";const Tw=P.forwardRef(({className:e,...t},r)=>n.jsx("tbody",{ref:r,className:Yt("[&_tr:last-child]:border-0",e),...t}));Tw.displayName="TableBody";const xPe=P.forwardRef(({className:e,...t},r)=>n.jsx("tfoot",{ref:r,className:Yt("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));xPe.displayName="TableFooter";const ep=P.forwardRef(({className:e,...t},r)=>n.jsx("tr",{ref:r,className:Yt("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));ep.displayName="TableRow";const xa=P.forwardRef(({className:e,...t},r)=>n.jsx("th",{ref:r,className:Yt("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));xa.displayName="TableHead";const ga=P.forwardRef(({className:e,...t},r)=>n.jsx("td",{ref:r,className:Yt("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));ga.displayName="TableCell";const gPe=P.forwardRef(({className:e,...t},r)=>n.jsx("caption",{ref:r,className:Yt("mt-4 text-sm text-muted-foreground",e),...t}));gPe.displayName="TableCaption";function qb({status:e}){const t={kr:{icon:tu,label:"Kr",color:"bg-emerald-100 text-emerald-700 border-emerald-200"},lngsamt:{icon:tu,label:"Lngsamt",color:"bg-amber-100 text-amber-700 border-amber-200"},parkerad:{icon:$Y,label:"Parkerad",color:"bg-blue-100 text-blue-700 border-blue-200"},oknd:{icon:ja,label:"Oknd",color:"bg-slate-100 text-slate-700 border-slate-200"}},r=t[e]||t.oknd,s=r.icon;return n.jsxs(it,{variant:"outline",className:`text-xs gap-1 ${r.color}`,children:[n.jsx(s,{className:"h-3 w-3"}),r.label]})}const vPe=ig("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ZK=P.forwardRef(({className:e,variant:t,...r},s)=>n.jsx("div",{ref:s,role:"alert",className:Yt(vPe({variant:t}),e),...r}));ZK.displayName="Alert";const yPe=P.forwardRef(({className:e,...t},r)=>n.jsx("h5",{ref:r,className:Yt("mb-1 font-medium leading-none tracking-tight",e),...t}));yPe.displayName="AlertTitle";const YK=P.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Yt("text-sm [&_p]:leading-relaxed",e),...t}));YK.displayName="AlertDescription";const bPe=(e,t,r,s)=>{const i=(r-e)*Math.PI/180,o=(s-t)*Math.PI/180,l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(e*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return 6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))};function jPe({positions:e,vehicles:t}){const[r,s]=P.useState([]),{data:a=[]}=He({queryKey:["geofences"],queryFn:()=>oe.entities.Geofence.filter({is_active:!0})});return P.useEffect(()=>{if(!e||!a||e.length===0)return;const i=[];e.forEach(o=>{const l=t.find(c=>c.gps_device_id===o.deviceid);l&&a.forEach(c=>{const d=bPe(o.callat,o.callon,c.latitude,c.longitude),u=d*1e3<=c.radius_meters,h=`${o.deviceid}-${c.id}`,g=localStorage.getItem(`geofence-${h}`),x=u?"inside":"outside";x!==g&&(localStorage.setItem(`geofence-${h}`,x),i.push({id:h,vehicleName:l.registration_number,geofenceName:c.name,type:u?"entered":"exited",isInside:u,timestamp:new Date,distance:Math.round(d*1e3)}))})}),i.length>0&&(s(o=>[...i,...o].slice(0,5)),setTimeout(()=>{s(o=>o.filter(l=>Date.now()-l.timestamp.getTime()<1e4))},100))},[e,a,t]),r.length===0?null:n.jsx("div",{className:"space-y-2 mb-6",children:n.jsx(_a,{children:r.map(i=>n.jsx(tt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:n.jsx(ZK,{className:`${i.type==="entered"?"bg-amber-50 border-amber-200":"bg-emerald-50 border-emerald-200"}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[i.type==="entered"?n.jsx(Kr,{className:"h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5"}):n.jsx($r,{className:"h-5 w-5 text-emerald-600 flex-shrink-0 mt-0.5"}),n.jsx("div",{className:"flex-1",children:n.jsxs(YK,{className:`${i.type==="entered"?"text-amber-900":"text-emerald-900"}`,children:[n.jsxs("p",{className:"font-medium",children:[i.vehicleName," ",i.type==="entered"?"kr in i":"lmnade"," ",i.geofenceName]}),i.type==="entered"&&n.jsxs("p",{className:"text-xs opacity-75 mt-1",children:["Avstnd: ",Math.max(0,i.distance-200)," m frn grns"]})]})})]})})},i.id))})})}function XK({open:e,onClose:t,trips:r=[],vehicleId:s,vehicleReg:a,onSuccess:i}){const[o,l]=P.useState([]),[c,d]=P.useState(!1),{data:u=[]}=He({queryKey:["projects"],queryFn:()=>oe.entities.Project.list(),initialData:[]}),{data:h=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list(),initialData:[]});P.useEffect(()=>{if(e&&r.length>0){const b=r.map(y=>({trip:y,project_id:"",purpose:"",driver_email:"",project_km:y.mileage||0}));l(b)}},[e,r]);const g=(b,y,v)=>{l(j=>j.map((w,N)=>N===b?{...w,[y]:v}:w))},x=async()=>{var b,y,v,j,w,N,A;d(!0);try{const C=await oe.auth.me();for(const M of o){const I=u.find(z=>z.id===M.project_id),F=h.find(z=>z.user_email===M.driver_email),U=M.trip,W=M.driver_email||C.email,D=F?F.user_email:C.full_name,R={vehicle_id:s,registration_number:a,gps_trip_id:(b=U.tripid)==null?void 0:b.toString(),driver_email:W,driver_name:D,start_time:new Date(U.begintime*1e3).toISOString(),end_time:new Date(U.endtime*1e3).toISOString(),start_location:{latitude:(y=U.beginlocation)==null?void 0:y.latitude,longitude:(v=U.beginlocation)==null?void 0:v.longitude,address:((j=U.beginlocation)==null?void 0:j.address)||""},end_location:{latitude:(w=U.endlocation)==null?void 0:w.latitude,longitude:(N=U.endlocation)==null?void 0:N.longitude,address:((A=U.endlocation)==null?void 0:A.address)||""},distance_km:U.mileage||0,duration_minutes:(U.endtime-U.begintime)/60,trip_type:"tjnst",purpose:M.purpose||"Resa",project_id:M.project_id||null,project_code:(I==null?void 0:I.project_code)||null,customer:(I==null?void 0:I.customer)||null,status:"submitted",project_allocations:M.project_id?[{project_id:M.project_id,project_name:I==null?void 0:I.name,distance_km:M.project_km||0}]:[]};await oe.entities.DrivingJournalEntry.create(R)}i&&i(),t()}catch(C){console.error("Error registering trips:",C),alert("Kunde inte registrera resorna: "+C.message)}d(!1)};return n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(er,{children:n.jsxs(tr,{children:["Frdela resor till projekt - ",a]})}),n.jsxs("div",{className:"space-y-3",children:[o.map((b,y)=>n.jsxs("div",{className:`border rounded-lg p-3 ${b.trip.isRegistered?"bg-green-50 border-green-200":"bg-white border-slate-200"}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"font-semibold text-slate-900 text-sm",children:[Ce(new Date(b.trip.begintime*1e3),"EEE d MMM, HH:mm",{locale:ut})," - ",Ce(new Date(b.trip.endtime*1e3),"HH:mm",{locale:ut})]}),n.jsxs("p",{className:"text-xs text-slate-600",children:[(b.trip.mileage||0).toFixed(1)," km  ",Math.round((b.trip.endtime-b.trip.begintime)/60)," min"]})]}),b.trip.isRegistered&&n.jsx(it,{className:"bg-green-600 text-white",children:"Registrerad"})]}),!b.trip.isRegistered&&n.jsxs("div",{className:"space-y-2 mt-3 pt-3 border-t",children:[n.jsxs("div",{children:[n.jsx(ve,{className:"text-xs",children:"Frare"}),n.jsxs(Nt,{value:b.driver_email,onValueChange:v=>g(y,"driver_email",v),children:[n.jsx(jt,{className:"h-9",children:n.jsx(kt,{placeholder:"Vlj frare"})}),n.jsx(wt,{children:h.map(v=>n.jsx(Ne,{value:v.user_email,children:v.user_email},v.id))})]})]}),n.jsxs("div",{children:[n.jsx(ve,{className:"text-xs",children:"Projekt"}),n.jsxs(Nt,{value:b.project_id,onValueChange:v=>g(y,"project_id",v),children:[n.jsx(jt,{className:"h-9",children:n.jsx(kt,{placeholder:"Vlj projekt"})}),n.jsx(wt,{children:u.filter(v=>v.status==="pgende").map(v=>n.jsx(Ne,{value:v.id,children:v.name},v.id))})]})]}),n.jsxs("div",{children:[n.jsx(ve,{className:"text-xs",children:"Antal km till projekt"}),n.jsx(De,{className:"h-9",type:"number",step:"0.1",value:b.project_km,onChange:v=>g(y,"project_km",parseFloat(v.target.value)||0),placeholder:"0.0"})]}),n.jsxs("div",{children:[n.jsx(ve,{className:"text-xs",children:"Syfte"}),n.jsx(De,{className:"h-9",value:b.purpose,onChange:v=>g(y,"purpose",v.target.value),placeholder:"T.ex. Kundbesk, leverans..."})]})]})]},y)),n.jsxs("div",{className:"flex gap-3 pt-3 border-t",children:[n.jsx(ye,{variant:"outline",onClick:t,className:"flex-1",disabled:c,children:"Avbryt"}),n.jsx(ye,{onClick:x,disabled:c,className:"flex-1 bg-slate-900 hover:bg-slate-800",children:c?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-4 w-4 mr-2 animate-spin"}),"Registrerar..."]}):n.jsxs(n.Fragment,{children:[n.jsx($r,{className:"h-4 w-4 mr-2"}),"Registrera resor"]})})]})]})]})})}function QK({vehicles:e}){const[t,r]=P.useState("week"),[s,a]=P.useState(null),[i,o]=P.useState([]),[l,c]=P.useState(!1),[d,u]=P.useState(!1),h=$n(),g=e.filter(A=>A.gps_device_id),{data:x,isLoading:b,error:y,refetch:v}=He({queryKey:["unregistered-trips-from-db",t],queryFn:async()=>{if(g.length===0)return[];const A=new Date;let C;t==="day"?C=wu(A):t==="week"?C=sh(A,7):C=sh(A,30);const M=await oe.entities.DrivingJournalEntry.list();console.log("Alla krjournalposter:",M.length);const I=[];for(const F of g){const U=M.filter(W=>{if(W.vehicle_id!==F.id||W.trip_type!=="vntar"&&W.purpose||W.is_deleted)return!1;const D=new Date(W.start_time);return D>=C&&D<=A});console.log(`${F.registration_number}: ${U.length} oregistrerade resor`),U.length>0&&I.push({vehicle:F,trips:U.map(W=>{var D,R;return{id:W.id,tripid:W.gps_trip_id,begintime:Math.floor(new Date(W.start_time).getTime()/1e3),endtime:Math.floor(new Date(W.end_time).getTime()/1e3),mileage:W.distance_km,beginaddress:(D=W.start_location)==null?void 0:D.address,endaddress:(R=W.end_location)==null?void 0:R.address}}).sort((W,D)=>D.begintime-W.begintime)})}return console.log("Resultat:",I),I},enabled:g.length>0,staleTime:1e4}),j=async()=>{var A;u(!0);try{const C=new Date;let M;t==="day"?M=wu(C):t==="week"?M=sh(C,7):M=sh(C,30),console.log("Synkar frn",M,"till",C),console.log("Antal fordon med GPS:",g.length);let I=0;for(const F of g){console.log(`Synkar ${F.registration_number} (${F.gps_device_id})...`);const U=await oe.functions.invoke("syncGPSTrips",{vehicleId:F.id,startDate:M.toISOString(),endDate:C.toISOString()});console.log("Synkresultat:",U.data),I+=((A=U.data)==null?void 0:A.synced)||0}console.log(`Totalt synkade: ${I} resor`),await h.invalidateQueries(["unregistered-trips-from-db"]),await v()}catch(C){console.error("Synkroniseringsfel:",C),alert("Fel vid synkning: "+C.message)}finally{u(!1)}},w=(A,C)=>{a(A),o(C),c(!0)},N=()=>{h.invalidateQueries({queryKey:["unregistered-gps-trips"]}),h.invalidateQueries({queryKey:["journal-entries"]})};return n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900 mb-2",children:Ce(new Date,"EEEE d MMMM yyyy",{locale:ut})}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[n.jsx("button",{onClick:()=>r("day"),className:`px-3 py-2 rounded text-sm font-medium ${t==="day"?"bg-slate-900 text-white":"bg-slate-100 text-slate-700"}`,children:"1 dag"}),n.jsx("button",{onClick:()=>r("week"),className:`px-3 py-2 rounded text-sm font-medium ${t==="week"?"bg-slate-900 text-white":"bg-slate-100 text-slate-700"}`,children:"7 dagar"}),n.jsx("button",{onClick:()=>r("month"),className:`px-3 py-2 rounded text-sm font-medium ${t==="month"?"bg-slate-900 text-white":"bg-slate-100 text-slate-700"}`,children:"Mnad"})]}),n.jsx(ye,{onClick:j,disabled:d,className:"w-full bg-blue-600 hover:bg-blue-700",size:"sm",children:d?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-4 w-4 mr-2 animate-spin"}),"Synkar nya resor..."]}):n.jsxs(n.Fragment,{children:[n.jsx(t9,{className:"h-4 w-4 mr-2"}),"Synka nya resor frn GPS"]})})]}),b&&n.jsxs("div",{className:"p-8 text-center bg-white rounded-lg border",children:[n.jsx(Ot,{className:"h-8 w-8 animate-spin text-slate-400 mx-auto"}),n.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Hmtar resor..."})]}),y&&n.jsxs("div",{className:"p-6 text-center bg-red-50 rounded-lg border border-red-200",children:[n.jsx(ja,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-red-700",children:"Kunde inte hmta resor frn GPS"})]}),!b&&!d&&(x==null?void 0:x.length)===0&&n.jsxs("div",{className:"p-6 text-center bg-slate-50 rounded-lg border",children:[n.jsx(us,{className:"h-8 w-8 text-slate-300 mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Inga oregistrerade resor hittades"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:'Klicka p "Synka nya resor frn GPS" fr att hmta resor'})]}),!b&&(x==null?void 0:x.map(A=>{if(A.trips.length===0)return null;const{vehicle:C,trips:M}=A;return n.jsxs("div",{className:"bg-white rounded-lg border p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3 pb-3 border-b",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(us,{className:"h-5 w-5 text-slate-600"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:C.registration_number}),n.jsxs("p",{className:"text-xs text-slate-500",children:[C.make," ",C.model]})]})]}),n.jsxs(it,{children:[M.length," resor"]})]}),n.jsx("div",{className:"space-y-2",children:M.map((I,F)=>n.jsx("div",{className:"p-3 rounded bg-slate-50",children:n.jsx("div",{className:"flex justify-between",children:n.jsxs("div",{children:[n.jsxs("div",{className:"font-medium text-sm",children:[Ce(new Date(I.begintime*1e3),"EEE d MMM, HH:mm",{locale:ut})," - ",Ce(new Date(I.endtime*1e3),"HH:mm",{locale:ut})]}),n.jsxs("div",{className:"text-sm text-slate-600",children:[(I.mileage||0).toFixed(1)," km  ",Math.round((I.endtime-I.begintime)/60)," min"]})]})})},F))}),n.jsxs(ye,{onClick:()=>w(C,M),className:"w-full bg-slate-900 mt-3",children:["Registrera ",M.length," resor"]})]},C.id)})),s&&n.jsx(XK,{open:l,onClose:()=>{c(!1),a(null),o([])},trips:i,vehicleId:s.id,vehicleReg:s.registration_number,onSuccess:N})]})}function wPe(){const[e,t]=P.useState(!1),[r,s]=P.useState(null),[a,i]=P.useState(null),[o,l]=P.useState({name:"",type:"kontor",latitude:59.3293,longitude:18.0686,radius_meters:200,auto_classify_as:null,default_project_code:"",default_customer:"",address:"",notes:"",is_active:!0}),c=$n(),{data:d=[]}=He({queryKey:["geofences"],queryFn:()=>oe.entities.Geofence.list()}),u=Xt({mutationFn:N=>oe.entities.Geofence.create(N),onSuccess:()=>{c.invalidateQueries({queryKey:["geofences"]}),y()}}),h=Xt({mutationFn:({id:N,data:A})=>oe.entities.Geofence.update(N,A),onSuccess:()=>{c.invalidateQueries({queryKey:["geofences"]}),y()}}),g=Xt({mutationFn:N=>oe.entities.Geofence.delete(N),onSuccess:()=>{c.invalidateQueries({queryKey:["geofences"]})}}),x=()=>{l({name:"",type:"kontor",latitude:59.3293,longitude:18.0686,radius_meters:200,auto_classify_as:null,default_project_code:"",default_customer:"",address:"",notes:"",is_active:!0}),s(null),t(!0)},b=N=>{l(N),s(N),t(!0)},y=()=>{t(!1),s(null),i(null)},v=()=>{r?h.mutate({id:r.id,data:o}):u.mutate(o)},j=N=>{confirm("r du sker p att du vill ta bort denna geofence?")&&g.mutate(N)},w={kontor:"bg-blue-100 text-blue-800",kundplats:"bg-green-100 text-green-800",lager:"bg-purple-100 text-purple-800",verkstad:"bg-orange-100 text-orange-800",vrigt:"bg-slate-100 text-slate-800"};return n.jsxs(n.Fragment,{children:[n.jsxs(ce,{className:"border-0 shadow-sm mb-4",children:[n.jsx(At,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ct,{className:"text-lg",children:"Geofences"}),n.jsxs(ye,{onClick:x,size:"sm",children:[n.jsx(xr,{className:"h-4 w-4 mr-1"}),"Skapa zon"]})]})}),n.jsx(he,{children:d.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Fn,{className:"h-12 w-12 text-slate-300 mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Inga geofences skapade"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Skapa zoner fr att spra nr fordon kommer eller gr"})]}):n.jsx("div",{className:"space-y-2",children:d.map(N=>n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-slate-200 hover:bg-slate-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-slate-100 flex items-center justify-center",children:n.jsx(Fn,{className:"h-5 w-5 text-slate-600"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"font-semibold text-slate-900",children:N.name}),n.jsx(it,{className:w[N.type],children:N.type}),!N.is_active&&n.jsx(it,{variant:"outline",className:"text-slate-500",children:"Inaktiv"})]}),n.jsxs("p",{className:"text-xs text-slate-500",children:[N.radius_meters,"m radie",N.auto_classify_as&&`  Auto: ${N.auto_classify_as}`]})]})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(ye,{size:"sm",variant:"ghost",onClick:()=>b(N),children:n.jsx(WX,{className:"h-4 w-4"})}),n.jsx(ye,{size:"sm",variant:"ghost",onClick:()=>j(N.id),children:n.jsx(bi,{className:"h-4 w-4 text-red-500"})})]})]},N.id))})})]}),n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"max-w-md",children:[n.jsx(er,{children:n.jsx(tr,{children:r?"Redigera geofence":"Skapa ny geofence"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ve,{children:"Namn"}),n.jsx(De,{value:o.name,onChange:N=>l({...o,name:N.target.value}),placeholder:"t.ex. Huvudkontor"})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Typ"}),n.jsxs(Nt,{value:o.type,onValueChange:N=>l({...o,type:N}),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"kontor",children:"Kontor"}),n.jsx(Ne,{value:"kundplats",children:"Kundplats"}),n.jsx(Ne,{value:"lager",children:"Lager"}),n.jsx(Ne,{value:"verkstad",children:"Verkstad"}),n.jsx(Ne,{value:"vrigt",children:"vrigt"})]})]})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Adress"}),n.jsx(De,{value:o.address,onChange:N=>l({...o,address:N.target.value}),placeholder:"Adress"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ve,{children:"Latitud"}),n.jsx(De,{type:"number",step:"0.000001",value:o.latitude,onChange:N=>l({...o,latitude:parseFloat(N.target.value)})})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Longitud"}),n.jsx(De,{type:"number",step:"0.000001",value:o.longitude,onChange:N=>l({...o,longitude:parseFloat(N.target.value)})})]})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Radie (meter)"}),n.jsx(De,{type:"number",value:o.radius_meters,onChange:N=>l({...o,radius_meters:parseInt(N.target.value)})})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Automatisk klassificering"}),n.jsxs(Nt,{value:o.auto_classify_as||"none",onValueChange:N=>l({...o,auto_classify_as:N==="none"?null:N}),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"none",children:"Ingen"}),n.jsx(Ne,{value:"tjnst",children:"Tjnst"}),n.jsx(Ne,{value:"privat",children:"Privat"})]})]})]}),o.auto_classify_as==="tjnst"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(ve,{children:"Standard projektkod"}),n.jsx(De,{value:o.default_project_code,onChange:N=>l({...o,default_project_code:N.target.value}),placeholder:"Projektkod"})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Standard kund"}),n.jsx(De,{value:o.default_customer,onChange:N=>l({...o,default_customer:N.target.value}),placeholder:"Kund"})]})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Anteckningar"}),n.jsx(De,{value:o.notes,onChange:N=>l({...o,notes:N.target.value}),placeholder:"Valfri beskrivning"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",id:"is_active",checked:o.is_active,onChange:N=>l({...o,is_active:N.target.checked}),className:"rounded"}),n.jsx(ve,{htmlFor:"is_active",className:"cursor-pointer",children:"Aktiv"})]})]}),n.jsxs(pA,{children:[n.jsx(ye,{variant:"outline",onClick:y,children:"Avbryt"}),n.jsx(ye,{onClick:v,disabled:!o.name||u.isPending||h.isPending,children:r?"Uppdatera":"Skapa"})]})]})})]})}function _Pe({geofences:e}){return!e||e.length===0?null:n.jsx(n.Fragment,{children:e.filter(t=>t.is_active).map(t=>n.jsx(XV,{center:[t.latitude,t.longitude],radius:t.radius_meters,pathOptions:{color:t.type==="kontor"?"#3b82f6":t.type==="kundplats"?"#10b981":t.type==="lager"?"#8b5cf6":t.type==="verkstad"?"#f97316":"#64748b",fillColor:t.type==="kontor"?"#3b82f6":t.type==="kundplats"?"#10b981":t.type==="lager"?"#8b5cf6":t.type==="verkstad"?"#f97316":"#64748b",fillOpacity:.15,weight:2},children:n.jsx(Wm,{children:n.jsxs("div",{className:"min-w-[150px]",children:[n.jsx("p",{className:"font-semibold text-sm",children:t.name}),n.jsx("p",{className:"text-xs text-slate-500 capitalize",children:t.type}),t.address&&n.jsx("p",{className:"text-xs text-slate-600 mt-1",children:t.address}),t.auto_classify_as&&n.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:["Auto: ",t.auto_classify_as]}),n.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Radie: ",t.radius_meters,"m"]})]})})},t.id))})}const NPe=(e,t,r,s)=>{const i=e*Math.PI/180,o=r*Math.PI/180,l=(r-e)*Math.PI/180,c=(s-t)*Math.PI/180,d=Math.sin(l/2)*Math.sin(l/2)+Math.cos(i)*Math.cos(o)*Math.sin(c/2)*Math.sin(c/2);return 6371e3*(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)))};function kPe({positions:e,vehicles:t,geofences:r}){const[s,a]=P.useState([]),[i,o]=P.useState({});P.useEffect(()=>{if(!e||!r||e.length===0||r.length===0)return;const d=r.filter(g=>g.is_active),u=[],h={...i};e.forEach(g=>{const x=t.find(b=>b.gps_device_id===g.deviceid);x&&d.forEach(b=>{const v=NPe(g.callat,g.callon,b.latitude,b.longitude)<=b.radius_meters,j=`${g.deviceid}-${b.id}`,w=i[j];v&&w===!1&&u.push({id:`${j}-${Date.now()}-enter`,type:"enter",vehicle:x,geofence:b,timestamp:new Date,position:g}),!v&&w===!0&&u.push({id:`${j}-${Date.now()}-exit`,type:"exit",vehicle:x,geofence:b,timestamp:new Date,position:g}),h[j]=v})}),u.length>0&&a(g=>[...u,...g].slice(0,10)),o(h)},[e,r,t]);const l=d=>{a(u=>u.filter(h=>h.id!==d))},c=()=>{a([])};return s.length===0?null:n.jsxs("div",{className:"fixed top-20 right-4 z-50 space-y-2 max-w-sm",children:[s.length>1&&n.jsx("button",{onClick:c,className:"ml-auto block text-xs text-slate-500 hover:text-slate-700 mb-1",children:"Rensa alla"}),n.jsx(_a,{children:s.map(d=>n.jsx(tt.div,{initial:{opacity:0,x:100,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.9},className:`bg-white rounded-lg shadow-lg border-l-4 p-4 ${d.type==="enter"?"border-l-green-500":"border-l-amber-500"}`,children:n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`h-10 w-10 rounded-full flex items-center justify-center ${d.type==="enter"?"bg-green-100":"bg-amber-100"}`,children:d.type==="enter"?n.jsx(ti,{className:"h-5 w-5 text-green-600"}):n.jsx(rY,{className:"h-5 w-5 text-amber-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("p",{className:"font-semibold text-slate-900 text-sm",children:d.vehicle.registration_number}),n.jsx("span",{className:`text-xs font-medium ${d.type==="enter"?"text-green-600":"text-amber-600"}`,children:d.type==="enter"?"Ankom":"Lmnade"})]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-600 mb-1",children:[n.jsx(Fn,{className:"h-3 w-3"}),n.jsx("span",{children:d.geofence.name})]}),n.jsx("p",{className:"text-xs text-slate-500",children:d.timestamp&&!isNaN(new Date(d.timestamp).getTime())?Ce(d.timestamp,"HH:mm:ss",{locale:ut}):"Nu"}),d.geofence.auto_classify_as&&n.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:["Auto-klassificering: ",d.geofence.auto_classify_as]})]})]}),n.jsx("button",{onClick:()=>l(d.id),className:"text-slate-400 hover:text-slate-600",children:n.jsx(Ra,{className:"h-4 w-4"})})]})},d.id))})]})}const r7={pending_review:{label:"Vntar p ifyllning",color:"bg-amber-100 text-amber-800",icon:Vt},submitted:{label:"Inskickad",color:"bg-blue-100 text-blue-800",icon:ti},approved:{label:"Godknd",color:"bg-emerald-100 text-emerald-800",icon:ti},requires_info:{label:"Krver mer info",color:"bg-rose-100 text-rose-800",icon:Kr}},s7={tjnst:{label:"Tjnsteresa",color:"bg-blue-100 text-blue-800"},privat:{label:"Privatresa",color:"bg-slate-100 text-slate-800"},vntar:{label:"Ej angiven",color:"bg-amber-100 text-amber-800"}};function SPe({entry:e,vehicle:t,onEdit:r,onApprove:s,onRequestInfo:a,onDelete:i,isAdmin:o,canEdit:l=!0}){var h;const c=r7[e.status]||r7.pending_review,d=s7[e.trip_type]||s7.vntar,u=c.icon;return n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:n.jsx(ce,{className:`border-0 shadow-sm hover:shadow-md transition-shadow ${e.is_anomaly?"border-l-4 border-l-rose-500":""}`,children:n.jsxs(he,{className:"p-5",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:(t==null?void 0:t.registration_number)||e.registration_number}),n.jsx(it,{className:d.color,children:d.label})]}),n.jsx("p",{className:"text-xs text-slate-500",children:t?`${t.make} ${t.model}`:"Oknt fordon"}),e.driver_name&&n.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Frare: ",e.driver_name]})]}),n.jsxs(it,{className:c.color,children:[n.jsx(u,{className:"h-3 w-3 mr-1"}),c.label]})]}),n.jsxs("div",{className:"space-y-3 mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Vt,{className:"h-4 w-4 text-slate-400"}),n.jsx("span",{className:"text-slate-600",children:Ce(new Date(e.start_time),"PPp",{locale:ut})})]}),n.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 space-y-2",children:[e.start_location&&n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsxs("div",{className:"flex items-center gap-1.5 min-w-[60px]",children:[n.jsx(Fn,{className:"h-4 w-4 text-emerald-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Start:"})]}),n.jsx("span",{className:"text-sm text-slate-700",children:e.start_location.address})]}),e.end_location&&n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsxs("div",{className:"flex items-center gap-1.5 min-w-[60px]",children:[n.jsx(Fn,{className:"h-4 w-4 text-rose-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Slut:"})]}),n.jsx("span",{className:"text-sm text-slate-700",children:e.end_location.address})]})]}),n.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ja,{className:"h-4 w-4 text-slate-400"}),n.jsxs("span",{className:"text-slate-600",children:[(h=e.distance_km)==null?void 0:h.toFixed(1)," km"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vt,{className:"h-4 w-4 text-slate-400"}),n.jsxs("span",{className:"text-slate-600",children:[Math.round(e.duration_minutes||0)," min"]})]})]})]}),e.purpose&&n.jsxs("div",{className:"mb-3 p-3 bg-slate-50 rounded-lg",children:[n.jsx("p",{className:"text-xs font-medium text-slate-700 mb-1",children:"Syfte:"}),n.jsx("p",{className:"text-sm text-slate-600",children:e.purpose})]}),e.project_code&&n.jsx("div",{className:"mb-3",children:n.jsxs(it,{variant:"outline",className:"text-xs",children:["Projekt: ",e.project_code,e.customer&&` - ${e.customer}`]})}),e.is_anomaly&&n.jsx("div",{className:"mb-3 p-3 bg-rose-50 rounded-lg border border-rose-200",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Kr,{className:"h-4 w-4 text-rose-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-rose-700",children:"Avvikelse"}),n.jsx("p",{className:"text-xs text-rose-600 mt-0.5",children:e.anomaly_reason})]})]})}),e.review_comment&&n.jsxs("div",{className:"mb-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[n.jsx("p",{className:"text-xs font-medium text-blue-700 mb-1",children:"Kommentar frn administratr:"}),n.jsx("p",{className:"text-sm text-blue-600",children:e.review_comment})]}),n.jsxs("div",{className:"flex gap-2 mt-3",children:[e.status!=="approved"&&r&&n.jsxs(ye,{onClick:()=>r(e),size:"sm",variant:"outline",className:"flex-1",children:[n.jsx(ql,{className:"h-3 w-3 mr-2"}),e.trip_type==="vntar"?"Fyll i":"Redigera"]}),o&&e.status==="submitted"&&n.jsxs(n.Fragment,{children:[n.jsxs(ye,{onClick:()=>s(e),size:"sm",className:"flex-1 bg-emerald-600 hover:bg-emerald-700",children:[n.jsx(ti,{className:"h-3 w-3 mr-2"}),"Godknn"]}),n.jsxs(ye,{onClick:()=>a(e),size:"sm",variant:"outline",className:"flex-1",children:[n.jsx(wX,{className:"h-3 w-3 mr-2"}),"Krv info"]})]}),o&&i&&n.jsx(ye,{onClick:()=>i(e),size:"sm",variant:"ghost",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:n.jsx(bi,{className:"h-3 w-3"})})]})]})})})}var Ew="Collapsible",[PPe]=ho(Ew),[APe,MC]=PPe(Ew),JK=P.forwardRef((e,t)=>{const{__scopeCollapsible:r,open:s,defaultOpen:a,disabled:i,onOpenChange:o,...l}=e,[c,d]=bu({prop:s,defaultProp:a??!1,onChange:o,caller:Ew});return n.jsx(APe,{scope:r,disabled:i,contentId:lh(),open:c,onOpenToggle:P.useCallback(()=>d(u=>!u),[d]),children:n.jsx(cn.div,{"data-state":DC(c),"data-disabled":i?"":void 0,...l,ref:t})})});JK.displayName=Ew;var eG="CollapsibleTrigger",tG=P.forwardRef((e,t)=>{const{__scopeCollapsible:r,...s}=e,a=MC(eG,r);return n.jsx(cn.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":DC(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...s,ref:t,onClick:fn(e.onClick,a.onOpenToggle)})});tG.displayName=eG;var LC="CollapsibleContent",nG=P.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=MC(LC,e.__scopeCollapsible);return n.jsx(Sc,{present:r||a.open,children:({present:i})=>n.jsx(CPe,{...s,ref:t,present:i})})});nG.displayName=LC;var CPe=P.forwardRef((e,t)=>{const{__scopeCollapsible:r,present:s,children:a,...i}=e,o=MC(LC,r),[l,c]=P.useState(s),d=P.useRef(null),u=Vn(t,d),h=P.useRef(0),g=h.current,x=P.useRef(0),b=x.current,y=o.open||l,v=P.useRef(y),j=P.useRef(void 0);return P.useEffect(()=>{const w=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(w)},[]),wa(()=>{const w=d.current;if(w){j.current=j.current||{transitionDuration:w.style.transitionDuration,animationName:w.style.animationName},w.style.transitionDuration="0s",w.style.animationName="none";const N=w.getBoundingClientRect();h.current=N.height,x.current=N.width,v.current||(w.style.transitionDuration=j.current.transitionDuration,w.style.animationName=j.current.animationName),c(s)}},[o.open,s]),n.jsx(cn.div,{"data-state":DC(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!y,...i,ref:u,style:{"--radix-collapsible-content-height":g?`${g}px`:void 0,"--radix-collapsible-content-width":b?`${b}px`:void 0,...e.style},children:y&&a})});function DC(e){return e?"open":"closed"}var TPe=JK;const EPe=TPe,OPe=tG,MPe=nG;function LPe({allocations:e=[],onChange:t,projects:r=[],totalDistance:s}){const[a,i]=P.useState("percentage"),o=()=>{const g={project_id:"",project_name:"",percentage:a==="percentage"?0:null,distance_km:a==="distance"?0:null};t([...e,g])},l=g=>{t(e.filter((x,b)=>b!==g))},c=(g,x,b)=>{const y=[...e];if(y[g]={...y[g],[x]:b},x==="project_id"){const v=r.find(j=>j.id===b);y[g].project_name=(v==null?void 0:v.name)||""}t(y)},d=e.reduce((g,x)=>g+(parseFloat(x.percentage)||0),0),u=e.reduce((g,x)=>g+(parseFloat(x.distance_km)||0),0),h=a==="percentage"?Math.abs(d-100)<.01:Math.abs(u-s)<.01;return n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(ve,{children:"Projektfrdelning"}),n.jsxs(Nt,{value:a,onValueChange:i,children:[n.jsx(jt,{className:"w-32 h-8",children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"percentage",children:"Procent"}),n.jsx(Ne,{value:"distance",children:"Kilometer"})]})]})]}),n.jsx("div",{className:"space-y-2",children:e.map((g,x)=>n.jsxs("div",{className:"flex gap-2 items-start p-3 bg-slate-50 rounded-lg",children:[n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsxs(Nt,{value:g.project_id,onValueChange:b=>c(x,"project_id",b),children:[n.jsx(jt,{className:"h-9",children:n.jsx(kt,{placeholder:"Vlj projekt"})}),n.jsx(wt,{children:r.filter(b=>b.status==="pgende").map(b=>n.jsxs(Ne,{value:b.id,children:[b.name," (",b.project_code,")"]},b.id))})]}),n.jsx(De,{type:"number",step:"0.1",value:a==="percentage"?g.percentage:g.distance_km,onChange:b=>c(x,a==="percentage"?"percentage":"distance_km",parseFloat(b.target.value)||0),placeholder:a==="percentage"?"Procent (%)":"Kilometer",className:"h-9"})]}),n.jsx(ye,{type:"button",variant:"ghost",size:"icon",onClick:()=>l(x),className:"mt-0.5",children:n.jsx(bi,{className:"h-4 w-4 text-red-500"})})]},x))}),n.jsxs(ye,{type:"button",variant:"outline",size:"sm",onClick:o,className:"w-full",children:[n.jsx(xr,{className:"h-4 w-4 mr-2"}),"Lgg till projekt"]}),e.length>0&&n.jsxs("div",{className:`flex items-center gap-2 p-2 rounded ${h?"bg-green-50":"bg-amber-50"}`,children:[!h&&n.jsx(ja,{className:"h-4 w-4 text-amber-600"}),n.jsx("span",{className:"text-sm",children:a==="percentage"?n.jsxs(n.Fragment,{children:["Totalt: ",n.jsxs("strong",{children:[d.toFixed(1),"%"]})," ",!h&&"(mste vara 100%)"]}):n.jsxs(n.Fragment,{children:["Totalt: ",n.jsxs("strong",{children:[u.toFixed(1)," km"]})," ",!h&&`(mste vara ${s} km)`]})})]})]})}function DPe({open:e,onClose:t,entry:r,onSave:s}){const[a,i]=P.useState(!1),[o,l]=P.useState({trip_type:"vntar",purpose:"",project_id:"",project_code:"",customer:"",activity:"",notes:"",status:"pending_review",start_time:"",end_time:"",distance_km:0,project_allocations:[]}),[c,d]=P.useState(!1),{data:u=[]}=He({queryKey:["projects"],queryFn:()=>oe.entities.Project.list(),initialData:[]});P.useEffect(()=>{r&&l({trip_type:r.trip_type||"vntar",purpose:r.purpose||"",project_id:r.project_id||"",project_code:r.project_code||"",customer:r.customer||"",activity:r.activity||"",notes:r.notes||"",status:r.status,start_time:r.start_time?new Date(r.start_time).toISOString().slice(0,16):"",end_time:r.end_time?new Date(r.end_time).toISOString().slice(0,16):"",distance_km:r.distance_km||0,project_allocations:r.project_allocations||[]})},[r]);const h=x=>{const b=u.find(y=>y.id===x);l(y=>({...y,project_id:x,project_code:(b==null?void 0:b.project_code)||"",customer:(b==null?void 0:b.customer)||y.customer}))},g=async x=>{var b;if(x.preventDefault(),!o.trip_type||o.trip_type==="vntar"){alert("Vlj typ av resa");return}if(o.trip_type==="tjnst"&&!((b=o.purpose)!=null&&b.trim())){alert("Ange syfte med resan - obligatoriskt fr tjnsteresor");return}i(!0);try{const y=await oe.auth.me(),v={...o,status:"submitted"};if(o.start_time&&o.end_time){v.start_time=new Date(o.start_time).toISOString(),v.end_time=new Date(o.end_time).toISOString();const w=(new Date(o.end_time)-new Date(o.start_time))/(1e3*60);v.duration_minutes=w}const j={timestamp:new Date().toISOString(),changed_by:(y==null?void 0:y.email)||"oknd",change_type:"updated",comment:"Redigerad via modal"};v.change_history=[...(r==null?void 0:r.change_history)||[],j],await s(v)}catch(y){console.error("Error saving:",y),alert("Kunde inte spara: "+y.message)}i(!1)};return n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"sm:max-w-lg",children:[n.jsx(er,{children:n.jsx(tr,{children:"Redigera krjournalspost"})}),n.jsxs("form",{onSubmit:g,className:"space-y-4 mt-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"start_time",children:"Starttid"}),n.jsx(De,{id:"start_time",type:"datetime-local",value:o.start_time,onChange:x=>l(b=>({...b,start_time:x.target.value}))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"end_time",children:"Sluttid"}),n.jsx(De,{id:"end_time",type:"datetime-local",value:o.end_time,onChange:x=>l(b=>({...b,end_time:x.target.value}))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"distance_km",children:"Krstrcka (km)"}),n.jsx(De,{id:"distance_km",type:"number",step:"0.1",value:o.distance_km,onChange:x=>l(b=>({...b,distance_km:parseFloat(x.target.value)||0}))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"trip_type",children:"Typ av resa *"}),n.jsxs(Nt,{value:o.trip_type,onValueChange:x=>l(b=>({...b,trip_type:x})),children:[n.jsx(jt,{children:n.jsx(kt,{placeholder:"Vlj typ"})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"vntar",children:"Vlj typ..."}),n.jsx(Ne,{value:"tjnst",children:"Tjnsteresa"}),n.jsx(Ne,{value:"privat",children:"Privatresa"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"purpose",children:"Syfte med resan *"}),n.jsx(Zn,{id:"purpose",value:o.purpose,onChange:x=>l(b=>({...b,purpose:x.target.value})),placeholder:"T.ex. Kundbesk, mte, leverans...",className:"min-h-[80px]",required:!0})]}),o.trip_type==="tjnst"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"project",children:"Projekt (valfritt)"}),n.jsxs(Nt,{value:o.project_id,onValueChange:h,children:[n.jsx(jt,{children:n.jsx(kt,{placeholder:"Vlj projekt"})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:null,children:"Inget projekt"}),u.filter(x=>x.status==="pgende").map(x=>n.jsxs(Ne,{value:x.id,children:[x.name," (",x.project_code,")"]},x.id))]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"customer",children:"Kund/Uppdragsgivare (valfritt)"}),n.jsx(De,{id:"customer",value:o.customer,onChange:x=>l(b=>({...b,customer:x.target.value})),placeholder:"T.ex. Fretag AB"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"activity",children:"Aktivitet/Arbetsorder (valfritt)"}),n.jsx(De,{id:"activity",value:o.activity,onChange:x=>l(b=>({...b,activity:x.target.value})),placeholder:"T.ex. Installation, Service, Konsultation"})]}),n.jsx(LPe,{allocations:o.project_allocations,onChange:x=>l(b=>({...b,project_allocations:x})),projects:u,totalDistance:o.distance_km})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"notes",children:"vriga anteckningar (valfritt)"}),n.jsx(Zn,{id:"notes",value:o.notes,onChange:x=>l(b=>({...b,notes:x.target.value})),placeholder:"Eventuella kommentarer...",className:"min-h-[60px]"})]}),(r==null?void 0:r.change_history)&&r.change_history.length>0&&n.jsxs(EPe,{open:c,onOpenChange:d,children:[n.jsx(OPe,{asChild:!0,children:n.jsxs(ye,{type:"button",variant:"outline",size:"sm",className:"w-full",children:[n.jsx(Y7,{className:"h-4 w-4 mr-2"}),"Visa ndringshistorik (",r.change_history.length,")"]})}),n.jsx(MPe,{className:"mt-3 space-y-2",children:r.change_history.slice().reverse().map((x,b)=>n.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg text-xs",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx(it,{variant:"outline",className:"text-xs",children:x.change_type}),n.jsxs("span",{className:"text-slate-500 flex items-center gap-1",children:[n.jsx(Vt,{className:"h-3 w-3"}),Ce(new Date(x.timestamp),"dd MMM yyyy HH:mm",{locale:ut})]})]}),n.jsxs("div",{className:"text-slate-700",children:[n.jsx("strong",{children:x.changed_by}),x.field&&`: ndrade ${x.field}`]}),x.comment&&n.jsx("div",{className:"text-slate-600 mt-1",children:x.comment})]},b))})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:t,children:"Avbryt"}),n.jsx(ye,{type:"submit",disabled:a,children:a?n.jsx(Ot,{className:"w-4 h-4 animate-spin"}):"Skicka in"})]})]})]})})}function IPe({open:e,onClose:t,onSuccess:r}){const[s,a]=P.useState(!1),[i,o]=P.useState({vehicle_id:"",date:new Date().toISOString().split("T")[0],start_time:"08:00",end_time:"09:00",distance_km:"",trip_type:"tjnst",purpose:"",project_id:"",customer:"",notes:""}),{data:l=[]}=He({queryKey:["vehicles"],queryFn:()=>oe.entities.Vehicle.list(),initialData:[]}),{data:c=[]}=He({queryKey:["projects"],queryFn:()=>oe.entities.Project.list(),initialData:[]}),d=async()=>{if(!i.vehicle_id||!i.distance_km){alert("Fyll i fordon och krstrcka");return}if(i.trip_type==="tjnst"&&!i.purpose){alert("Fyll i syfte fr tjnsteresan");return}a(!0);try{const u=await oe.auth.me(),h=l.find(j=>j.id===i.vehicle_id),g=c.find(j=>j.id===i.project_id),x=new Date(`${i.date}T${i.start_time}:00`),b=new Date(`${i.date}T${i.end_time}:00`),y=(b-x)/(1e3*60),v={vehicle_id:i.vehicle_id,registration_number:(h==null?void 0:h.registration_number)||"Oknt",driver_email:u.email,driver_name:u.full_name,start_time:x.toISOString(),end_time:b.toISOString(),distance_km:parseFloat(i.distance_km),duration_minutes:y,trip_type:i.trip_type,purpose:i.purpose,project_id:i.project_id||null,project_code:(g==null?void 0:g.project_code)||null,customer:i.customer||(g==null?void 0:g.customer)||null,notes:i.notes,status:"submitted",start_location:{address:"Manuellt tillagd"},end_location:{address:"Manuellt tillagd"},is_manual:!0,manual_reason:"Manuellt registrerad av anvndare",change_history:[{timestamp:new Date().toISOString(),changed_by:u.email,change_type:"created",comment:"Manuellt skapad resa"}]};await oe.entities.DrivingJournalEntry.create(v),r&&r(),t(),o({vehicle_id:"",date:new Date().toISOString().split("T")[0],start_time:"08:00",end_time:"09:00",distance_km:"",trip_type:"tjnst",purpose:"",project_id:"",customer:"",notes:""})}catch(u){console.error("Error creating manual trip:",u),alert("Kunde inte skapa resan: "+u.message)}a(!1)};return n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(er,{children:n.jsx(tr,{children:"Lgg till resa manuellt"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ve,{children:"Fordon *"}),n.jsxs(Nt,{value:i.vehicle_id,onValueChange:u=>o({...i,vehicle_id:u}),children:[n.jsx(jt,{children:n.jsx(kt,{placeholder:"Vlj fordon"})}),n.jsx(wt,{children:l.map(u=>n.jsxs(Ne,{value:u.id,children:[u.registration_number," - ",u.make," ",u.model]},u.id))})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n.jsxs("div",{children:[n.jsx(ve,{children:"Datum *"}),n.jsx(De,{type:"date",value:i.date,onChange:u=>o({...i,date:u.target.value})})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Starttid *"}),n.jsx(De,{type:"time",value:i.start_time,onChange:u=>o({...i,start_time:u.target.value})})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Sluttid *"}),n.jsx(De,{type:"time",value:i.end_time,onChange:u=>o({...i,end_time:u.target.value})})]})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Krstrcka (km) *"}),n.jsx(De,{type:"number",step:"0.1",value:i.distance_km,onChange:u=>o({...i,distance_km:u.target.value}),placeholder:"T.ex. 45.5"})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Typ av resa *"}),n.jsxs(Nt,{value:i.trip_type,onValueChange:u=>o({...i,trip_type:u}),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"tjnst",children:"Tjnsteresa"}),n.jsx(Ne,{value:"privat",children:"Privatresa"})]})]})]}),i.trip_type==="tjnst"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(ve,{children:"Syfte *"}),n.jsx(De,{value:i.purpose,onChange:u=>o({...i,purpose:u.target.value}),placeholder:"T.ex. Kundbesk, leverans, service..."})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ve,{children:"Projekt"}),n.jsxs(Nt,{value:i.project_id,onValueChange:u=>o({...i,project_id:u}),children:[n.jsx(jt,{children:n.jsx(kt,{placeholder:"Vlj projekt (valfritt)"})}),n.jsx(wt,{children:c.filter(u=>u.status==="pgende").map(u=>n.jsxs(Ne,{value:u.id,children:[u.name," (",u.project_code,")"]},u.id))})]})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Kund"}),n.jsx(De,{value:i.customer,onChange:u=>o({...i,customer:u.target.value}),placeholder:"Kundnamn"})]})]})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Anteckningar"}),n.jsx(Zn,{value:i.notes,onChange:u=>o({...i,notes:u.target.value}),placeholder:"vrig information...",rows:3})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:t,className:"flex-1",disabled:s,children:"Avbryt"}),n.jsx(ye,{onClick:d,disabled:s,className:"flex-1 bg-slate-900 hover:bg-slate-800",children:s?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-4 w-4 mr-2 animate-spin"}),"Skapar..."]}):n.jsxs(n.Fragment,{children:[n.jsx(qY,{className:"h-4 w-4 mr-2"}),"Lgg till resa"]})})]})]})]})})}function RPe({suggestions:e,onAccept:t,onReject:r,onEdit:s,isLoading:a}){const[i,o]=P.useState(null),[l,c]=P.useState({}),d=g=>{o(g.entryId),c({trip_type:g.suggestion.tripType,purpose:g.suggestion.purpose||"",project_code:g.suggestion.projectCode||"",customer:g.suggestion.customer||"",notes:""})},u=g=>{s(g,l),o(null),c({})},h=g=>g>=80?"text-emerald-600 bg-emerald-50":g>=60?"text-amber-600 bg-amber-50":"text-rose-600 bg-rose-50";return a?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(Ot,{className:"h-12 w-12 animate-spin text-slate-400 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Analyserar resor med AI..."})]})}):!e||e.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(yi,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Inga frslag"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Vlj resor att analysera fr att f AI-frslag"})]})}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(yi,{className:"h-5 w-5 text-indigo-600"}),n.jsx("h3",{className:"font-semibold text-slate-900",children:"AI-frslag"}),n.jsxs(it,{variant:"outline",className:"ml-auto",children:[e.length," ",e.length===1?"resa":"resor"]})]}),n.jsx(_a,{children:e.map(g=>{var v;const x=g.originalEntry,b=g.suggestion,y=i===g.entryId;return g.error?n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:n.jsx(ce,{className:"border-0 shadow-sm border-l-4 border-l-rose-500",children:n.jsx(he,{className:"p-5",children:n.jsxs("div",{className:"flex items-center gap-2 text-rose-600",children:[n.jsx(ja,{className:"h-5 w-5"}),n.jsx("p",{className:"text-sm font-medium",children:g.error})]})})})},g.entryId):n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:n.jsx(ce,{className:"border-0 shadow-sm hover:shadow-md transition-shadow",children:n.jsxs(he,{className:"p-5",children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-semibold text-slate-900",children:x.registration_number||"Oknt fordon"}),n.jsxs(it,{className:h(b.confidence),children:[n.jsx(yi,{className:"h-3 w-3 mr-1"}),b.confidence,"% sker"]})]}),n.jsxs("div",{className:"space-y-1 text-sm text-slate-600",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vt,{className:"h-4 w-4 text-slate-400"}),Ce(new Date(x.start_time),"PPp",{locale:ut})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ja,{className:"h-4 w-4 text-slate-400"}),(v=x.distance_km)==null?void 0:v.toFixed(1)," km  ",Math.round(x.duration_minutes)," min"]}),x.start_location&&n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Fn,{className:"h-4 w-4 text-emerald-500 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"line-clamp-1",children:x.start_location.address})]}),x.end_location&&n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Fn,{className:"h-4 w-4 text-rose-500 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"line-clamp-1",children:x.end_location.address})]})]})]}),y?n.jsxs("div",{className:"space-y-3 p-4 bg-indigo-50 rounded-lg mb-4",children:[n.jsxs("div",{children:[n.jsx(ve,{className:"text-xs",children:"Typ av resa"}),n.jsxs(Nt,{value:l.trip_type,onValueChange:j=>c({...l,trip_type:j}),children:[n.jsx(jt,{className:"mt-1",children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"tjnst",children:"Tjnsteresa"}),n.jsx(Ne,{value:"privat",children:"Privatresa"})]})]})]}),l.trip_type==="tjnst"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(ve,{className:"text-xs",children:"Syfte"}),n.jsx(Zn,{value:l.purpose,onChange:j=>c({...l,purpose:j.target.value}),className:"mt-1",rows:2})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ve,{className:"text-xs",children:"Projektkod"}),n.jsx(De,{value:l.project_code,onChange:j=>c({...l,project_code:j.target.value}),className:"mt-1"})]}),n.jsxs("div",{children:[n.jsx(ve,{className:"text-xs",children:"Kund"}),n.jsx(De,{value:l.customer,onChange:j=>c({...l,customer:j.target.value}),className:"mt-1"})]})]}),n.jsxs("div",{children:[n.jsx(ve,{className:"text-xs",children:"Anteckningar"}),n.jsx(Zn,{value:l.notes,onChange:j=>c({...l,notes:j.target.value}),className:"mt-1",rows:2})]})]}),n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsx(ye,{size:"sm",variant:"outline",onClick:()=>o(null),className:"flex-1",children:"Avbryt"}),n.jsx(ye,{size:"sm",onClick:()=>u(g.entryId),className:"flex-1 bg-indigo-600 hover:bg-indigo-700",children:"Spara ndringar"})]})]}):n.jsxs("div",{className:"p-4 bg-indigo-50 rounded-lg mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(yi,{className:"h-4 w-4 text-indigo-600"}),n.jsx("span",{className:"text-sm font-semibold text-indigo-900",children:"AI-frslag:"}),n.jsx(it,{className:"bg-indigo-100 text-indigo-800",children:b.tripType==="tjnst"?"Tjnsteresa":"Privatresa"})]}),b.tripType==="tjnst"&&n.jsxs("div",{className:"space-y-2 text-sm",children:[b.purpose&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-indigo-800",children:"Syfte:"}),n.jsx("p",{className:"text-indigo-700 mt-0.5",children:b.purpose})]}),(b.projectCode||b.customer)&&n.jsxs("div",{className:"flex gap-3 text-xs",children:[b.projectCode&&n.jsxs(it,{variant:"outline",className:"border-indigo-300 text-indigo-700",children:["Projekt: ",b.projectCode]}),b.customer&&n.jsxs(it,{variant:"outline",className:"border-indigo-300 text-indigo-700",children:["Kund: ",b.customer]})]})]}),b.reasoning&&n.jsx("div",{className:"mt-3 pt-3 border-t border-indigo-200",children:n.jsx("p",{className:"text-xs text-indigo-600 italic",children:b.reasoning})})]}),!y&&n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ye,{size:"sm",variant:"outline",onClick:()=>r(g.entryId),className:"flex-1",children:[n.jsx(Ra,{className:"h-3 w-3 mr-2"}),"Avvisa"]}),n.jsxs(ye,{size:"sm",variant:"outline",onClick:()=>d(g),className:"flex-1",children:[n.jsx(ql,{className:"h-3 w-3 mr-2"}),"Redigera"]}),n.jsxs(ye,{size:"sm",onClick:()=>t(g.entryId,b),className:"flex-1 bg-emerald-600 hover:bg-emerald-700",children:[n.jsx(Rm,{className:"h-3 w-3 mr-2"}),"Godknn"]})]})]})})},g.entryId)})})]})}const a7={tjnst:{label:"Tjnsteresa",color:"bg-blue-100 text-blue-800"},privat:{label:"Privatresa",color:"bg-slate-100 text-slate-800"}};function FPe({entry:e,vehicle:t,onApprove:r,onEdit:s,onReject:a}){var h;const[i,o]=P.useState(!1),l=e.suggested_classification||{},c=a7[e.trip_type]||a7.tjnst,d=async()=>{o(!0);try{await r(e)}finally{o(!1)}},u=l.confidence>=.8?"text-emerald-600":l.confidence>=.6?"text-amber-600":"text-slate-600";return n.jsx(tt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:n.jsx(ce,{className:"border-2 border-indigo-200 shadow-lg bg-gradient-to-br from-white to-indigo-50",children:n.jsxs(he,{className:"p-5",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(yi,{className:"h-4 w-4 text-indigo-600"}),n.jsx("h3",{className:"font-semibold text-slate-900",children:(t==null?void 0:t.registration_number)||e.registration_number}),n.jsx(it,{className:c.color,children:c.label})]}),n.jsx("p",{className:"text-xs text-slate-500",children:t?`${t.make} ${t.model}`:"Oknt fordon"})]}),l.confidence&&n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:`text-xl font-bold ${u}`,children:[Math.round(l.confidence*100),"%"]}),n.jsx("p",{className:"text-xs text-slate-500",children:"skerhet"})]})]}),n.jsxs("div",{className:"space-y-2 mb-4 p-3 bg-white rounded-lg border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Vt,{className:"h-4 w-4 text-slate-400"}),n.jsx("span",{className:"text-slate-600",children:Ce(new Date(e.start_time),"PPp",{locale:ut})})]}),e.start_location&&n.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[n.jsx(Fn,{className:"h-4 w-4 text-emerald-500 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"text-slate-600 line-clamp-2",children:e.start_location.address})]}),e.end_location&&n.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[n.jsx(Fn,{className:"h-4 w-4 text-rose-500 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"text-slate-600 line-clamp-2",children:e.end_location.address})]}),n.jsxs("div",{className:"flex items-center gap-4 text-sm pt-2 border-t border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ja,{className:"h-4 w-4 text-slate-400"}),n.jsxs("span",{className:"font-medium text-slate-900",children:[(h=e.distance_km)==null?void 0:h.toFixed(1)," km"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vt,{className:"h-4 w-4 text-slate-400"}),n.jsxs("span",{className:"font-medium text-slate-900",children:[Math.round(e.duration_minutes||0)," min"]})]})]})]}),e.trip_type==="tjnst"&&(e.purpose||e.project_code||e.customer)&&n.jsxs("div",{className:"mb-4 p-3 bg-indigo-50 rounded-lg border border-indigo-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(ta,{className:"h-4 w-4 text-indigo-600"}),n.jsx("p",{className:"text-xs font-semibold text-indigo-900",children:"AI-frslag:"})]}),e.purpose&&n.jsxs("div",{className:"mb-2",children:[n.jsx("p",{className:"text-xs text-indigo-700 font-medium",children:"Syfte:"}),n.jsx("p",{className:"text-sm text-indigo-900",children:e.purpose})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.project_code&&n.jsxs(it,{variant:"outline",className:"text-xs border-indigo-300 text-indigo-700",children:["Projekt: ",e.project_code]}),e.customer&&n.jsxs(it,{variant:"outline",className:"text-xs border-indigo-300 text-indigo-700",children:["Kund: ",e.customer]})]})]}),l.reasoning&&n.jsxs("div",{className:"mb-4 text-xs text-slate-600 flex items-center gap-2",children:[n.jsx("div",{className:"h-1 w-1 rounded-full bg-indigo-400"}),"Baserat p ",l.reasoning]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ye,{onClick:d,disabled:i,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 h-11",children:[n.jsx(ti,{className:"h-4 w-4 mr-2"}),"Godknn & Skicka"]}),n.jsxs(ye,{onClick:()=>s(e),disabled:i,variant:"outline",className:"flex-1 h-11",children:[n.jsx(ql,{className:"h-4 w-4 mr-2"}),"Redigera"]}),n.jsx(ye,{onClick:()=>a(e),disabled:i,variant:"ghost",size:"icon",className:"h-11 w-11",children:n.jsx(Ra,{className:"h-4 w-4"})})]})]})})})}delete Ff.Icon.Default.prototype._getIconUrl;Ff.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function $Pe(){var Br;const[e,t]=P.useState(null),[r,s]=P.useState("register"),[a,i]=P.useState("month"),[o,l]=P.useState("all"),[c,d]=P.useState(null),[u,h]=P.useState(!1),[g,x]=P.useState(!1),[b,y]=P.useState("all"),[v,j]=P.useState(Ce(new Date,"yyyy-MM-dd")),[w,N]=P.useState(Ce(new Date,"yyyy-MM-dd")),[A,C]=P.useState(!1),[M,I]=P.useState([]),[F,U]=P.useState(!1),[W,D]=P.useState(new Set),[R,z]=P.useState(!1),[Z,se]=P.useState(""),[J,Q]=P.useState("table"),[H,ne]=P.useState("start_time"),[ue,ae]=P.useState("desc"),[G,te]=P.useState(!1),[fe,be]=P.useState(null),[xe,we]=P.useState("week"),Pe=$n();P.useEffect(()=>{oe.auth.me().then(t).catch(()=>t(null))},[]);const{data:_e=[]}=He({queryKey:["vehicles"],queryFn:()=>oe.entities.Vehicle.list()}),{data:Ve=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list()}),{data:Ue=[]}=He({queryKey:["geofences"],queryFn:()=>oe.entities.Geofence.list()}),{data:Le,isLoading:dt}=He({queryKey:["gps-devices"],queryFn:async()=>(await oe.functions.invoke("gpsTracking",{action:"getDeviceList",params:{}})).data,enabled:r==="live"||r==="register",refetchInterval:r==="live"?3e4:!1,retry:2}),xt=((Br=Le==null?void 0:Le.groups)==null?void 0:Br.flatMap(Oe=>Oe.devices||[]))||[],Xe=_e.filter(Oe=>Oe.gps_device_id),{data:ke}=He({queryKey:["gps-all-positions",xt],queryFn:async()=>{if(xt.length===0)return null;const Oe=xt.map(an=>an.deviceid);return(await oe.functions.invoke("gpsTracking",{action:"getLastPosition",params:{deviceIds:Oe}})).data},enabled:xt.length>0&&(r==="live"||r==="register"),refetchInterval:r==="live"?3e4:!1}),Bt=(ke==null?void 0:ke.records)||[],Ft=Bt[0]?[Bt[0].callat,Bt[0].callon]:[59.3293,18.0686],mt=Oe=>{const ot=Oe*3.6;return ot>5?"kr":ot>0?"lngsamt":"parkerad"},{data:yt=[],isLoading:Tt}=He({queryKey:["journalEntries"],queryFn:()=>oe.entities.DrivingJournalEntry.list("-created_date",200)});P.useEffect(()=>{const Oe=async()=>{if((e==null?void 0:e.role)!=="admin"||_e.length===0)return;const an=_e.filter(Ut=>Ut.gps_device_id);if(an.length===0)return;const on=new Date,Kn=Ce(wu(on),"yyyy-MM-dd'T'HH:mm:ss"),ss=Ce(i1(on),"yyyy-MM-dd'T'HH:mm:ss");for(const Ut of an)try{await oe.functions.invoke("syncGPSTrips",{vehicleId:Ut.id,startDate:Kn,endDate:ss})}catch(es){console.error(`Failed to auto-sync ${Ut.registration_number}:`,es)}Pe.invalidateQueries({queryKey:["journalEntries"]})};Oe();const ot=setInterval(Oe,300*1e3);return()=>clearInterval(ot)},[e,_e,Pe]);const St=Xt({mutationFn:({id:Oe,data:ot})=>oe.entities.DrivingJournalEntry.update(Oe,ot),onSuccess:()=>{Pe.invalidateQueries({queryKey:["journalEntries"]}),h(!1),d(null)}});Xt({mutationFn:async({vehicleId:Oe})=>{const ot=new Date,an=Ce(wu(ot),"yyyy-MM-dd'T'HH:mm:ss"),on=Ce(i1(ot),"yyyy-MM-dd'T'HH:mm:ss");return(await oe.functions.invoke("syncGPSTrips",{vehicleId:Oe,startDate:an,endDate:on})).data},onSuccess:Oe=>{Pe.invalidateQueries({queryKey:["journalEntries"]}),alert(`${Oe.synced} resor synkroniserade, ${Oe.skipped} hoppades ver`)},onError:Oe=>{alert("Kunde inte synkronisera resor: "+Oe.message)}});const Kt=Oe=>{d(Oe),h(!0)},mn=async Oe=>{c&&await St.mutateAsync({id:c.id,data:Oe})},jn=async Oe=>{const ot={timestamp:new Date().toISOString(),changed_by:e.email,change_type:"approved",comment:"Godknd av administratr"};await St.mutateAsync({id:Oe.id,data:{status:"approved",reviewed_by:e.email,reviewed_at:new Date().toISOString(),change_history:[...Oe.change_history||[],ot]}})},Ln=async Oe=>{const ot=prompt("Ange kommentar till fraren:");if(!ot)return;const an={timestamp:new Date().toISOString(),changed_by:e.email,change_type:"status_changed",comment:`Krver mer information: ${ot}`};await St.mutateAsync({id:Oe.id,data:{status:"requires_info",reviewed_by:e.email,reviewed_at:new Date().toISOString(),review_comment:ot,change_history:[...Oe.change_history||[],an]}})},Wn=async()=>{const Oe=Nr.filter(ot=>ot.trip_type==="vntar"&&ot.status==="pending_review");if(Oe.length===0){alert('Inga resor att analysera. Endast resor med typ "vntar" kan analyseras.');return}U(!0),s("journal-suggestions");try{const ot=await oe.functions.invoke("analyzeTrips",{entryIds:Oe.map(an=>an.id)});I(ot.data.suggestions)}catch(ot){console.error("Error analyzing trips:",ot),alert("Kunde inte analysera resor med AI: "+ot.message),s("journal-pending")}U(!1)},lr=async(Oe,ot)=>{const an={trip_type:ot.tripType,status:"submitted"};ot.tripType==="tjnst"&&(ot.purpose&&(an.purpose=ot.purpose),ot.projectCode&&(an.project_code=ot.projectCode),ot.customer&&(an.customer=ot.customer)),await St.mutateAsync({id:Oe,data:an}),I(on=>on.filter(Kn=>Kn.entryId!==Oe)),M.length<=1&&s("journal-pending")},pn=Oe=>{I(ot=>ot.filter(an=>an.entryId!==Oe)),M.length<=1&&s("journal-pending")},Tn=async(Oe,ot)=>{const an={trip_type:ot.trip_type,status:"submitted"};ot.trip_type==="tjnst"&&(ot.purpose&&(an.purpose=ot.purpose),ot.project_code&&(an.project_code=ot.project_code),ot.customer&&(an.customer=ot.customer),ot.notes&&(an.notes=ot.notes)),await St.mutateAsync({id:Oe,data:an}),I(on=>on.filter(Kn=>Kn.entryId!==Oe)),M.length<=1&&s("journal-pending")},It=async()=>{z(!0);try{const Oe=await oe.functions.invoke("autoProcessJournal",{});Pe.invalidateQueries({queryKey:["journalEntries"]}),Oe.data.results.suggestions>0?(alert(`${Oe.data.results.suggestions} resor har ftt AI-frslag. Granska dem under "Utkast"-fliken.`),s("journal-drafts")):alert("Inga nya frslag skapades. Kanske finns det ingen historisk data att basera frslag p.")}catch(Oe){alert("Kunde inte bearbeta resor: "+Oe.message)}z(!1)},Vs=async Oe=>{await St.mutateAsync({id:Oe.id,data:{status:"submitted",reviewed_at:new Date().toISOString()}})},Qn=async Oe=>{var ot;await St.mutateAsync({id:Oe.id,data:{trip_type:"vntar",purpose:null,project_code:null,customer:null,suggested_classification:null,notes:(ot=Oe.notes)==null?void 0:ot.replace(/\[AI\].*$/gm,"").trim()}})},Na=Oe=>{be(Oe),te(!0)},gr=async()=>{if(!fe)return;const Oe={timestamp:new Date().toISOString(),changed_by:e.email,change_type:"deleted",comment:"Markerad som raderad (soft delete)"};await St.mutateAsync({id:fe.id,data:{is_deleted:!0,deleted_at:new Date().toISOString(),deleted_by:e.email,change_history:[...fe.change_history||[],Oe]}}),te(!1),be(null)},ur=yt.filter(Oe=>Oe.suggested_classification&&Oe.trip_type!=="vntar"&&Oe.status==="pending_review"&&((e==null?void 0:e.role)==="admin"||Oe.driver_email===(e==null?void 0:e.email))),Nr=yt.filter(Oe=>{var fr,wn,Et,fs,_s;if(Oe.is_deleted)return!1;const ot=(e==null?void 0:e.role)==="admin"?r==="journal-pending"?(Oe.status==="pending_review"||Oe.status==="submitted")&&!Oe.suggested_classification:r==="journal-drafts"?Oe.suggested_classification&&Oe.status==="pending_review":r==="journal-approved"?Oe.status==="approved":r==="journal-all":r==="journal-pending"?(Oe.status==="pending_review"||Oe.status==="requires_info")&&Oe.trip_type==="vntar":r==="journal-drafts"?Oe.suggested_classification&&Oe.status==="pending_review":r==="journal-submitted"?Oe.status==="submitted":r==="journal-approved"?Oe.status==="approved":!1,an=(e==null?void 0:e.role)==="admin"||Oe.driver_email===(e==null?void 0:e.email),on=o==="all"||Oe.vehicle_id===o,Kn=b==="all"||Oe.driver_email===b,ss=!Z||((fr=Oe.registration_number)==null?void 0:fr.toLowerCase().includes(Z.toLowerCase()))||((wn=Oe.driver_name)==null?void 0:wn.toLowerCase().includes(Z.toLowerCase()))||((Et=Oe.purpose)==null?void 0:Et.toLowerCase().includes(Z.toLowerCase()))||((fs=Oe.project_code)==null?void 0:fs.toLowerCase().includes(Z.toLowerCase()))||((_s=Oe.customer)==null?void 0:_s.toLowerCase().includes(Z.toLowerCase())),Ut=new Date(Oe.start_time),es=new Date;let hs=!0;if(a==="today")hs=Ce(Ut,"yyyy-MM-dd")===Ce(es,"yyyy-MM-dd");else if(a==="week")hs=Ut>=Fa(es,{weekStartsOn:1})&&Ut<=Pc(es,{weekStartsOn:1});else if(a==="month")hs=Ut>=ri(es)&&Ut<=ni(es);else if(a==="custom"){const na=new Date(v),Ba=new Date(w);Ba.setHours(23,59,59,999),hs=Ut>=na&&Ut<=Ba}return ot&&an&&on&&hs&&Kn&&ss}),nr=[...Nr].sort((Oe,ot)=>{let an,on;switch(H){case"start_time":an=new Date(Oe.start_time).getTime(),on=new Date(ot.start_time).getTime();break;case"distance_km":an=Oe.distance_km||0,on=ot.distance_km||0;break;case"duration_minutes":an=Oe.duration_minutes||0,on=ot.duration_minutes||0;break;case"driver_name":an=Oe.driver_name||"",on=ot.driver_name||"";break;case"registration_number":an=Oe.registration_number||"",on=ot.registration_number||"";break;default:return 0}return ue==="asc"?an>on?1:-1:an<on?1:-1}),$a=Oe=>{H===Oe?ae(ue==="asc"?"desc":"asc"):(ne(Oe),ae("desc"))},kr=async(Oe,ot)=>{await St.mutateAsync({id:Oe,data:{trip_type:ot}})},rs=({field:Oe})=>H!==Oe?n.jsx(U7,{className:"h-3 w-3 ml-1 opacity-50"}):ue==="asc"?n.jsx(H7,{className:"h-3 w-3 ml-1"}):n.jsx(V7,{className:"h-3 w-3 ml-1"}),Ts={totalTrips:Nr.length,totalDistance:Nr.reduce((Oe,ot)=>Oe+(ot.distance_km||0),0),totalDuration:Nr.reduce((Oe,ot)=>Oe+(ot.duration_minutes||0),0),businessTrips:Nr.filter(Oe=>Oe.trip_type==="tjnst").length,privateTrips:Nr.filter(Oe=>Oe.trip_type==="privat").length,pendingTrips:Nr.filter(Oe=>Oe.trip_type==="vntar").length,actionRequired:Nr.filter(Oe=>Oe.status==="pending_review"&&Oe.trip_type==="vntar").length,pending:yt.filter(Oe=>(Oe.status==="pending_review"||Oe.status==="submitted")&&!Oe.suggested_classification).length,approved:yt.filter(Oe=>Oe.status==="approved").length,total:yt.length};return n.jsxs("div",{className:"min-h-screen bg-slate-50 pb-24",children:[n.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-6",children:[n.jsx("div",{className:"mb-6",children:n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Krjournal"})}),n.jsxs(Ls,{value:r,onValueChange:s,children:[n.jsxs(As,{className:"w-full bg-white shadow-sm grid grid-cols-2 mb-4",children:[n.jsx(gt,{value:"register",children:"Registrera Resor"}),n.jsx(gt,{value:"journal",children:"Krjournal"})]}),n.jsx(Dt,{value:"live",children:dt?n.jsx("div",{className:"text-center py-12",children:n.jsx(Ot,{className:"h-12 w-12 animate-spin text-slate-400 mx-auto"})}):xt.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(us,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Inga GPS-enheter"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Inga fordon med GPS-enheter hittades"})]})}):n.jsxs(n.Fragment,{children:[n.jsx(kPe,{positions:Bt,vehicles:Xe,geofences:Ue}),n.jsx(wPe,{}),n.jsx(ce,{className:"border-0 shadow-sm overflow-hidden mb-4",children:n.jsx("div",{className:"h-[400px]",children:Bt.length>0?n.jsxs(Pg,{center:Ft,zoom:12,style:{height:"100%",width:"100%"},scrollWheelZoom:!1,children:[n.jsx(Ag,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),n.jsx(_Pe,{geofences:Ue}),Bt.map(Oe=>{const ot=Xe.find(Kn=>Kn.gps_device_id===Oe.deviceid),an=xt.find(Kn=>Kn.deviceid===Oe.deviceid),on=(ot==null?void 0:ot.registration_number)||(an==null?void 0:an.devicename)||Oe.deviceid;return mt(Oe.speed),n.jsxs(Hm,{position:[Oe.callat,Oe.callon],children:[n.jsx(QV,{permanent:!0,direction:"top",offset:[0,-20],children:n.jsx("div",{className:"font-semibold text-xs",children:on})}),n.jsx(Wm,{children:n.jsxs("div",{className:"min-w-[200px]",children:[n.jsx("p",{className:"font-semibold",children:on}),ot&&n.jsxs("p",{className:"text-xs text-slate-500",children:[ot.make," ",ot.model]}),n.jsxs("div",{className:"mt-2 space-y-1",children:[n.jsxs("p",{className:"text-sm",children:[n.jsx(gf,{className:"h-3 w-3 inline mr-1"}),Math.round(Oe.speed*3.6)," km/h"]}),n.jsxs("p",{className:"text-xs text-slate-500",children:[n.jsx(Vt,{className:"h-3 w-3 inline mr-1"}),Oe.posiTime?Ce(new Date(Oe.posiTime*1e3),"PPp",{locale:ut}):"Oknd tid"]})]})]})})]},Oe.deviceid)})]}):n.jsx("div",{className:"h-full flex items-center justify-center bg-slate-50",children:n.jsx("p",{className:"text-slate-500",children:"Ingen position tillgnglig"})})})}),n.jsx("div",{className:"space-y-3",children:xt.map(Oe=>{const ot=Xe.find(Kn=>Kn.gps_device_id===Oe.deviceid),an=Bt.find(Kn=>Kn.deviceid===Oe.deviceid),on=an?mt(an.speed):"oknd";return n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:(ot==null?void 0:ot.registration_number)||Oe.devicename}),n.jsxs("p",{className:"text-xs text-slate-500",children:[ot==null?void 0:ot.make," ",ot==null?void 0:ot.model]})]}),an&&n.jsx(qb,{status:on})]}),an&&n.jsxs("div",{className:"space-y-1 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(gf,{className:"h-4 w-4 text-slate-400"}),n.jsxs("span",{className:"text-slate-600",children:[Math.round(an.speed*3.6)," km/h"]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[n.jsx(Vt,{className:"h-4 w-4 text-slate-400"}),"Senast: ",an.posiTime?Ce(new Date(an.posiTime*1e3),"HH:mm",{locale:ut}):"Oknd"]})]})]})},Oe.deviceid)})})]})}),n.jsxs(Dt,{value:"register",children:[n.jsxs(ce,{className:"border-0 shadow-sm mb-4",children:[n.jsx(At,{children:n.jsx(Ct,{className:"text-lg",children:"Oregistrerade resor per mnad"})}),n.jsx(he,{children:(()=>{const ot=yt.filter(on=>on.trip_type==="vntar"&&!on.is_deleted).reduce((on,Kn)=>{const ss=Ce(new Date(Kn.start_time),"yyyy-MM");return on[ss]||(on[ss]=[]),on[ss].push(Kn),on},{}),an=Object.keys(ot).sort((on,Kn)=>new Date(Kn)-new Date(on));return an.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(ti,{className:"h-12 w-12 text-green-500 mx-auto mb-2"}),n.jsx("p",{className:"text-slate-600",children:"Alla resor r registrerade!"})]}):n.jsx("div",{className:"space-y-4",children:an.map(on=>{const Kn=ot[on],ss=Kn.reduce((fr,wn)=>fr+(wn.distance_km||0),0),Ut=new Date(on+"-01"),es=Kn.reduce((fr,wn)=>{const Et=Ce(new Date(wn.start_time),"yyyy-MM-dd");return fr[Et]||(fr[Et]=[]),fr[Et].push(wn),fr},{}),hs=Object.keys(es).sort((fr,wn)=>new Date(wn)-new Date(fr));return n.jsxs("div",{className:"border rounded-lg p-4 bg-slate-50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:Ce(Ut,"MMMM yyyy",{locale:ut})}),n.jsxs(it,{className:"bg-amber-500",children:[Kn.length," resor  ",ss.toFixed(1)," km"]})]}),n.jsx("div",{className:"space-y-2",children:hs.map(fr=>{const wn=es[fr],Et=wn.reduce((_s,na)=>_s+(na.distance_km||0),0),fs=Il(new Date(fr),new Date);return n.jsxs("div",{className:"bg-white rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-slate-700",children:fs?"Idag":Ce(new Date(fr),"EEEE d MMMM",{locale:ut})}),n.jsxs("span",{className:"text-xs text-slate-500",children:[wn.length," resor  ",Et.toFixed(1)," km"]})]}),n.jsx("div",{className:"space-y-1",children:wn.map(_s=>{var na;return n.jsxs("div",{className:"flex items-center justify-between text-xs bg-slate-50 p-2 rounded",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(us,{className:"h-3 w-3 text-slate-400"}),n.jsx("span",{className:"font-medium",children:_s.registration_number}),n.jsxs("span",{className:"text-slate-500",children:[Ce(new Date(_s.start_time),"HH:mm")," - ",Ce(new Date(_s.end_time),"HH:mm")]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-slate-600",children:[(na=_s.distance_km)==null?void 0:na.toFixed(1)," km"]}),n.jsx(ye,{size:"sm",variant:"ghost",className:"h-6 px-2 text-xs",onClick:()=>Kt(_s),children:"Fyll i"})]})]},_s.id)})})]},fr)})})]},on)})})})()})]}),n.jsx(QK,{vehicles:_e})]}),n.jsxs(Dt,{value:"journal",children:[n.jsx(Ls,{value:r.startsWith("journal-")?r:"journal-pending",onValueChange:s,className:"mb-4",children:n.jsx(As,{className:"w-full bg-white shadow-sm grid grid-cols-5",children:(e==null?void 0:e.role)==="admin"?n.jsxs(n.Fragment,{children:[n.jsxs(gt,{value:"journal-pending",className:"flex-col gap-1 py-3",children:[n.jsx("span",{children:"Vntande"}),Ts.pending>0&&n.jsx(it,{className:"bg-amber-500 text-white text-xs px-2 py-0 h-5",children:Ts.pending})]}),n.jsxs(gt,{value:"journal-drafts",children:["Utkast",ur.length>0&&n.jsx(it,{className:"ml-1 bg-indigo-500 text-xs",children:ur.length})]}),n.jsxs(gt,{value:"journal-suggestions",children:["AI-analys",M.length>0&&n.jsx(it,{className:"ml-1 bg-purple-500 text-xs",children:M.length})]}),n.jsxs(gt,{value:"journal-approved",className:"flex-col gap-1 py-3",children:[n.jsx("span",{children:"Godknda"}),n.jsx(it,{className:"bg-emerald-500 text-white text-xs px-2 py-0 h-5",children:Ts.approved})]}),n.jsxs(gt,{value:"journal-all",className:"flex-col gap-1 py-3",children:[n.jsx("span",{children:"Alla"}),n.jsx(it,{className:"bg-slate-500 text-white text-xs px-2 py-0 h-5",children:Ts.total})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs(gt,{value:"journal-pending",children:["Att fylla i",yt.filter(Oe=>(Oe.status==="pending_review"||Oe.status==="requires_info")&&Oe.driver_email===(e==null?void 0:e.email)&&Oe.trip_type==="vntar").length>0&&n.jsx(it,{className:"ml-1 bg-amber-500 text-xs",children:yt.filter(Oe=>(Oe.status==="pending_review"||Oe.status==="requires_info")&&Oe.driver_email===(e==null?void 0:e.email)&&Oe.trip_type==="vntar").length})]}),n.jsxs(gt,{value:"journal-drafts",children:["Utkast",ur.length>0&&n.jsx(it,{className:"ml-1 bg-indigo-500 text-xs",children:ur.length})]}),n.jsxs(gt,{value:"journal-suggestions",children:["AI-analys",M.length>0&&n.jsx(it,{className:"ml-1 bg-purple-500 text-xs",children:M.length})]}),n.jsx(gt,{value:"journal-submitted",children:"Inskickade"}),n.jsx(gt,{value:"journal-approved",children:"Godknda"})]})})}),r.startsWith("journal-")&&n.jsx(n.Fragment,{children:r==="journal-drafts"?n.jsxs(n.Fragment,{children:[n.jsx(ce,{className:"border-0 shadow-sm mb-4 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:n.jsx(yi,{className:"h-5 w-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-slate-900",children:"Skapa AI-utkast"}),n.jsx("p",{className:"text-xs text-slate-600",children:"Analysera resor och skapa frslag baserat p historik"})]})]}),n.jsx(ye,{onClick:It,disabled:R,className:"bg-indigo-600 hover:bg-indigo-700",children:R?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-4 w-4 mr-2 animate-spin"}),"Bearbetar..."]}):n.jsxs(n.Fragment,{children:[n.jsx(yi,{className:"h-4 w-4 mr-2"}),"Skapa utkast"]})})]})})}),ur.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(yi,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Inga utkast"}),n.jsx("p",{className:"text-slate-500 text-sm",children:'Klicka p "Skapa utkast" fr att lta AI analysera oklassificerade resor'})]})}):n.jsx("div",{className:"space-y-3",children:ur.map(Oe=>n.jsx(FPe,{entry:Oe,vehicle:_e.find(ot=>ot.id===Oe.vehicle_id),onApprove:Vs,onEdit:Kt,onReject:Qn},Oe.id))})]}):r==="journal-suggestions"?n.jsx(RPe,{suggestions:M,onAccept:lr,onReject:pn,onEdit:Tn,isLoading:F}):n.jsxs(n.Fragment,{children:[r==="journal-pending"&&Nr.some(Oe=>Oe.trip_type==="vntar")&&n.jsx(ce,{className:"border-0 shadow-sm mb-4 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:n.jsx(yi,{className:"h-5 w-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-slate-900",children:"AI-assisterad klassificering"}),n.jsx("p",{className:"text-xs text-slate-600",children:"Lt AI analysera och fresl klassificering fr dina resor"})]})]}),n.jsx(ye,{onClick:Wn,disabled:F,className:"bg-indigo-600 hover:bg-indigo-700",children:F?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-4 w-4 mr-2 animate-spin"}),"Analyserar..."]}):n.jsxs(n.Fragment,{children:[n.jsx(yi,{className:"h-4 w-4 mr-2"}),"Analysera med AI"]})})]})})}),Tt?n.jsx("div",{className:"text-center py-12",children:n.jsx(Ot,{className:"h-12 w-12 animate-spin text-slate-400 mx-auto"})}):Nr.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(us,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Inga resor att visa"}),n.jsx("p",{className:"text-slate-500 text-sm mb-4",children:yt.length===0?"Inga krjournalsposter finns i systemet nnu.":r==="journal-pending"?"Inga vntande krjournaler just nu":"Inga resor hittades fr denna period"})]})}):J==="table"?n.jsx(ce,{className:"border-0 shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(Aw,{children:[n.jsx(Cw,{children:n.jsxs(ep,{className:"bg-slate-50",children:[n.jsx(xa,{className:"cursor-pointer",onClick:()=>$a("start_time"),children:n.jsxs("div",{className:"flex items-center",children:["Datum",n.jsx(rs,{field:"start_time"})]})}),n.jsx(xa,{className:"cursor-pointer",onClick:()=>$a("registration_number"),children:n.jsxs("div",{className:"flex items-center",children:["Fordon",n.jsx(rs,{field:"registration_number"})]})}),n.jsx(xa,{className:"cursor-pointer",onClick:()=>$a("driver_name"),children:n.jsxs("div",{className:"flex items-center",children:["Frare",n.jsx(rs,{field:"driver_name"})]})}),n.jsx(xa,{className:"cursor-pointer text-right",onClick:()=>$a("distance_km"),children:n.jsxs("div",{className:"flex items-center justify-end",children:["Distans",n.jsx(rs,{field:"distance_km"})]})}),n.jsx(xa,{className:"cursor-pointer text-right",onClick:()=>$a("duration_minutes"),children:n.jsxs("div",{className:"flex items-center justify-end",children:["Tid",n.jsx(rs,{field:"duration_minutes"})]})}),n.jsx(xa,{children:"Typ"}),n.jsx(xa,{children:"Status"}),n.jsx(xa,{className:"text-right",children:"tgrd"})]})}),n.jsx(Tw,{children:nr.map(Oe=>{var ot;return n.jsxs(ep,{className:"hover:bg-slate-50",children:[n.jsxs(ga,{className:"font-medium",children:[n.jsx("div",{className:"text-sm",children:Ce(new Date(Oe.start_time),"dd MMM yyyy",{locale:ut})}),n.jsx("div",{className:"text-xs text-slate-500",children:Ce(new Date(Oe.start_time),"HH:mm")})]}),n.jsx(ga,{children:n.jsx("div",{className:"text-sm font-medium",children:Oe.registration_number})}),n.jsx(ga,{children:n.jsx("div",{className:"text-sm",children:Oe.driver_name||"Oknd"})}),n.jsx(ga,{className:"text-right",children:n.jsxs("div",{className:"text-sm font-medium",children:[(ot=Oe.distance_km)==null?void 0:ot.toFixed(1)," km"]})}),n.jsx(ga,{className:"text-right",children:n.jsxs("div",{className:"text-sm",children:[Math.round(Oe.duration_minutes||0)," min"]})}),n.jsx(ga,{children:Oe.trip_type==="vntar"?n.jsxs("div",{className:"flex gap-1",children:[n.jsx(ye,{size:"sm",variant:"outline",className:"h-6 px-2 text-xs",onClick:()=>kr(Oe.id,"tjnst"),children:"Tjnst"}),n.jsx(ye,{size:"sm",variant:"outline",className:"h-6 px-2 text-xs",onClick:()=>kr(Oe.id,"privat"),children:"Privat"})]}):n.jsx(it,{className:Oe.trip_type==="tjnst"?"bg-blue-100 text-blue-800":Oe.trip_type==="privat"?"bg-purple-100 text-purple-800":"bg-amber-100 text-amber-800",children:Oe.trip_type})}),n.jsx(ga,{children:n.jsx(it,{variant:"outline",className:Oe.status==="approved"?"border-green-500 text-green-700":Oe.status==="submitted"?"border-blue-500 text-blue-700":Oe.status==="requires_info"?"border-red-500 text-red-700":"border-amber-500 text-amber-700",children:Oe.status==="approved"?"Godknd":Oe.status==="submitted"?"Inskickad":Oe.status==="requires_info"?"Krver info":"Vntande"})}),n.jsx(ga,{className:"text-right",children:n.jsx(ye,{size:"sm",variant:"ghost",onClick:()=>Kt(Oe),children:"Visa"})})]},Oe.id)})})]})})}):n.jsx("div",{className:"space-y-3",children:nr.map(Oe=>n.jsx(SPe,{entry:Oe,vehicle:_e.find(ot=>ot.id===Oe.vehicle_id),onEdit:Kt,onApprove:(e==null?void 0:e.role)==="admin"?jn:null,onRequestInfo:(e==null?void 0:e.role)==="admin"?Ln:null,onDelete:(e==null?void 0:e.role)==="admin"?Na:null,isAdmin:(e==null?void 0:e.role)==="admin"},Oe.id))})]})})]})]})]}),n.jsx(DPe,{open:u,onClose:()=>{h(!1),d(null)},entry:c,onSave:mn}),n.jsx(IPe,{open:g,onClose:()=>x(!1),onSuccess:()=>{Pe.invalidateQueries({queryKey:["journalEntries"]})}}),n.jsx(ay,{open:G,onOpenChange:te,children:n.jsxs(yg,{children:[n.jsxs(bg,{children:[n.jsx(wg,{children:"Bekrfta radering"}),n.jsx(_g,{children:"Denna resa kommer att markeras som raderad och dljas frn alla vyer. tgrden sparas i ndringsloggen fr revision. Vill du fortstta?"})]}),n.jsxs(jg,{children:[n.jsx(kg,{children:"Avbryt"}),n.jsx(Ng,{onClick:gr,className:"bg-red-600 hover:bg-red-700",children:"Markera som raderad"})]})]})})]})}function BPe({filters:e,onFiltersChange:t,vehicles:r=[],employees:s=[],onClear:a}){const i=(o,l)=>{t({...e,[o]:l})};return n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-4 space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(e3,{className:"h-4 w-4 text-slate-600"}),n.jsx("h3",{className:"font-semibold text-slate-900",children:"Filtrera rapport"})]}),n.jsxs(ye,{variant:"ghost",size:"sm",onClick:a,className:"h-8 text-xs",children:[n.jsx(Ra,{className:"h-3 w-3 mr-1"}),"Rensa"]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx(ve,{className:"text-xs",children:"Frn datum"}),n.jsx(De,{type:"date",value:e.startDate,onChange:o=>i("startDate",o.target.value),className:"h-9"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx(ve,{className:"text-xs",children:"Till datum"}),n.jsx(De,{type:"date",value:e.endDate,onChange:o=>i("endDate",o.target.value),className:"h-9"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx(ve,{className:"text-xs",children:"Fordon"}),n.jsxs(Nt,{value:e.vehicleId,onValueChange:o=>i("vehicleId",o),children:[n.jsx(jt,{className:"h-9",children:n.jsx(kt,{placeholder:"Alla fordon"})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"all",children:"Alla fordon"}),r.map(o=>n.jsx(Ne,{value:o.id,children:o.registration_number},o.id))]})]})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx(ve,{className:"text-xs",children:"Frare"}),n.jsxs(Nt,{value:e.driverId,onValueChange:o=>i("driverId",o),children:[n.jsx(jt,{className:"h-9",children:n.jsx(kt,{placeholder:"Alla frare"})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"all",children:"Alla frare"}),s.map(o=>n.jsx(Ne,{value:o.user_email,children:o.user_email},o.user_email))]})]})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx(ve,{className:"text-xs",children:"Fordonstyp"}),n.jsxs(Nt,{value:e.vehicleType,onValueChange:o=>i("vehicleType",o),children:[n.jsx(jt,{className:"h-9",children:n.jsx(kt,{placeholder:"Alla typer"})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"all",children:"Alla typer"}),n.jsx(Ne,{value:"personbil",children:"Personbil"}),n.jsx(Ne,{value:"ltt lastbil",children:"Ltt lastbil"}),n.jsx(Ne,{value:"lastbil",children:"Lastbil"}),n.jsx(Ne,{value:"skpbil",children:"Skpbil"})]})]})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx(ve,{className:"text-xs",children:"Resetyp"}),n.jsxs(Nt,{value:e.tripType,onValueChange:o=>i("tripType",o),children:[n.jsx(jt,{className:"h-9",children:n.jsx(kt,{placeholder:"Alla typer"})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"all",children:"Alla typer"}),n.jsx(Ne,{value:"tjnst",children:"Tjnsteresa"}),n.jsx(Ne,{value:"privat",children:"Privatresa"})]})]})]})]})]})})}function qPe({data:e}){return!e||e.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-12 text-center",children:n.jsx("p",{className:"text-sm text-slate-500",children:"Ingen data att visa"})})}):n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ta,{className:"h-5 w-5 text-indigo-600"}),n.jsx(Ct,{className:"text-base",children:"Krstrcka per mnad"})]})}),n.jsx(he,{children:n.jsx(fu,{width:"100%",height:300,children:n.jsxs(sg,{data:e,children:[n.jsx(Of,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),n.jsx(yd,{dataKey:"month",tick:{fontSize:12},stroke:"#94a3b8"}),n.jsx(kc,{tick:{fontSize:12},stroke:"#94a3b8",label:{value:"km",angle:-90,position:"insideLeft",style:{fontSize:12}}}),n.jsx(Ya,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}}),n.jsx(hh,{wrapperStyle:{fontSize:"12px"}}),n.jsx(Bl,{dataKey:"tjnst",fill:"#4f46e5",name:"Tjnsteresa"}),n.jsx(Bl,{dataKey:"privat",fill:"#94a3b8",name:"Privatresa"})]})})})]})}function zPe({vehicleAnalysis:e}){if(!e||e.length===0)return null;const t=[...e].sort((r,s)=>s.totalCost-r.totalCost);return n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Sf,{className:"h-5 w-5 text-emerald-600"}),n.jsx(Ct,{className:"text-base",children:"Kostnadsanalys per fordon"})]})}),n.jsx(he,{className:"space-y-3",children:t.map((r,s)=>{const a=r.distance>0?r.totalCost/r.distance:0,i=a>5;return n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(us,{className:"h-4 w-4 text-slate-500"}),n.jsx("span",{className:"font-medium text-slate-900",children:r.registrationNumber}),s===0&&n.jsx(it,{variant:"outline",className:"text-xs",children:"Hgst kostnad"})]}),n.jsxs("span",{className:"text-lg font-bold text-slate-900",children:[r.totalCost.toLocaleString("sv-SE")," kr"]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-500",children:"Strcka"}),n.jsxs("p",{className:"font-semibold text-slate-900",children:[r.distance.toFixed(0)," km"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-500",children:"Resor"}),n.jsx("p",{className:"font-semibold text-slate-900",children:r.trips})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("p",{className:"text-slate-500",children:"Kr/km"}),i?n.jsx(ta,{className:"h-3 w-3 text-rose-500"}):n.jsx(r9,{className:"h-3 w-3 text-emerald-500"})]}),n.jsxs("p",{className:`font-semibold ${i?"text-rose-600":"text-emerald-600"}`,children:[a.toFixed(2)," kr"]})]})]}),r.make&&n.jsxs("p",{className:"text-xs text-slate-400 mt-2",children:[r.make," ",r.model,"  ",r.fuelType]})]},r.vehicleId)})})]})}const i7={tjnst:"#4f46e5",privat:"#8b5cf6",vntar:"#f59e0b"};function VPe({data:e}){return!e||e.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-12 text-center",children:n.jsx("p",{className:"text-sm text-slate-500",children:"Ingen data att visa"})})}):n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tu,{className:"h-5 w-5 text-indigo-600"}),n.jsx(Ct,{className:"text-base",children:"Frdelning per resetyp"})]})}),n.jsxs(he,{children:[n.jsx(fu,{width:"100%",height:300,children:n.jsxs(EC,{children:[n.jsx(kd,{data:e,cx:"50%",cy:"50%",labelLine:!1,label:({name:t,percent:r})=>`${t} ${(r*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:e.map((t,r)=>n.jsx(Zm,{fill:i7[t.name]||"#94a3b8"},`cell-${r}`))}),n.jsx(Ya,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}}),n.jsx(hh,{wrapperStyle:{fontSize:"12px"}})]})}),n.jsx("div",{className:"grid grid-cols-3 gap-2 mt-4 pt-4 border-t border-slate-100",children:e.map(t=>n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"h-2 w-full rounded mb-1",style:{backgroundColor:i7[t.name]||"#94a3b8"}}),n.jsx("p",{className:"text-xs text-slate-500 capitalize",children:t.name}),n.jsxs("p",{className:"text-sm font-bold text-slate-900",children:[t.value," resor"]})]},t.name))})]})]})}function UPe({data:e}){return!e||e.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-12 text-center",children:n.jsx("p",{className:"text-sm text-slate-500",children:"Ingen data att visa"})})}):n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ta,{className:"h-5 w-5 text-emerald-600"}),n.jsx(Ct,{className:"text-base",children:"Trender ver tid"})]})}),n.jsx(he,{children:n.jsx(fu,{width:"100%",height:300,children:n.jsxs(G4e,{data:e,children:[n.jsx(Of,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),n.jsx(yd,{dataKey:"month",tick:{fontSize:12},stroke:"#94a3b8"}),n.jsx(kc,{tick:{fontSize:12},stroke:"#94a3b8",yAxisId:"left",label:{value:"km",angle:-90,position:"insideLeft",style:{fontSize:12}}}),n.jsx(kc,{tick:{fontSize:12},stroke:"#94a3b8",yAxisId:"right",orientation:"right",label:{value:"Antal resor",angle:90,position:"insideRight",style:{fontSize:12}}}),n.jsx(Ya,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}}),n.jsx(hh,{wrapperStyle:{fontSize:"12px"}}),n.jsx(Jx,{type:"monotone",dataKey:"totalDistance",stroke:"#10b981",strokeWidth:2,name:"Total distans (km)",yAxisId:"left",dot:{fill:"#10b981",r:4}}),n.jsx(Jx,{type:"monotone",dataKey:"tripCount",stroke:"#6366f1",strokeWidth:2,name:"Antal resor",yAxisId:"right",dot:{fill:"#6366f1",r:4}})]})})})]})}function HPe({driverStats:e}){if(!e||e.length===0)return n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-12 text-center",children:n.jsx("p",{className:"text-sm text-slate-500",children:"Ingen frardata att visa"})})});const t=Math.max(...e.map(s=>s.totalDistance)),r=Math.max(...e.map(s=>s.tripCount));return n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Fr,{className:"h-5 w-5 text-blue-600"}),n.jsx(Ct,{className:"text-base",children:"Statistik per frare"})]})}),n.jsx(he,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(Aw,{children:[n.jsx(Cw,{children:n.jsxs(ep,{className:"bg-slate-50",children:[n.jsx(xa,{children:"Frare"}),n.jsx(xa,{className:"text-right",children:"Resor"}),n.jsx(xa,{className:"text-right",children:"Total distans"}),n.jsx(xa,{className:"text-right",children:"Snitt/resa"}),n.jsx(xa,{className:"text-right",children:"Tjnst"}),n.jsx(xa,{className:"text-right",children:"Privat"})]})}),n.jsx(Tw,{children:e.sort((s,a)=>a.totalDistance-s.totalDistance).map((s,a)=>n.jsxs(ep,{className:"hover:bg-slate-50",children:[n.jsx(ga,{className:"font-medium",children:n.jsxs("div",{className:"flex items-center gap-2",children:[a===0&&s.totalDistance===t&&n.jsx(oY,{className:"h-4 w-4 text-amber-500"}),n.jsx("span",{className:"text-sm",children:s.driverName||s.driverEmail})]})}),n.jsx(ga,{className:"text-right",children:n.jsx(it,{variant:"outline",className:s.tripCount===r?"bg-blue-50 border-blue-300 text-blue-700":"",children:s.tripCount})}),n.jsx(ga,{className:"text-right font-medium",children:n.jsxs("span",{className:s.totalDistance===t?"text-emerald-700 font-bold":"",children:[s.totalDistance.toFixed(0)," km"]})}),n.jsxs(ga,{className:"text-right text-sm text-slate-600",children:[s.avgDistance.toFixed(1)," km"]}),n.jsx(ga,{className:"text-right",children:n.jsx("span",{className:"text-xs text-blue-600",children:s.businessTrips})}),n.jsx(ga,{className:"text-right",children:n.jsx("span",{className:"text-xs text-purple-600",children:s.privateTrips})})]},s.driverEmail))})]})})})]})}function WPe({data:e}){if(!e||e.length===0)return n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-12 text-center",children:n.jsx("p",{className:"text-sm text-slate-500",children:"Ingen fordonsdata att visa"})})});const t=[...e].sort((r,s)=>s.distance-r.distance).slice(0,10).map(r=>({...r,name:r.registrationNumber||"Oknt"}));return n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(us,{className:"h-5 w-5 text-purple-600"}),n.jsx(Ct,{className:"text-base",children:"Jmfrelse per fordon (Topp 10)"})]})}),n.jsx(he,{children:n.jsx(fu,{width:"100%",height:300,children:n.jsxs(sg,{data:t,layout:"vertical",children:[n.jsx(Of,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),n.jsx(yd,{type:"number",tick:{fontSize:12},stroke:"#94a3b8",label:{value:"km",position:"insideBottom",style:{fontSize:12}}}),n.jsx(kc,{dataKey:"name",type:"category",tick:{fontSize:11},stroke:"#94a3b8",width:80}),n.jsx(Ya,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"},formatter:r=>`${r.toFixed(0)} km`}),n.jsx(Bl,{dataKey:"distance",fill:"#8b5cf6",name:"Krstrcka",radius:[0,4,4,0]})]})})})]})}function KPe(){const[e,t]=P.useState({startDate:Ce(new Date(new Date().setMonth(new Date().getMonth()-3)),"yyyy-MM-dd"),endDate:Ce(new Date,"yyyy-MM-dd"),vehicleId:"all",driverId:"all",vehicleType:"all",tripType:"all"}),{data:r=[]}=He({queryKey:["journalEntries"],queryFn:()=>oe.entities.DrivingJournalEntry.list()}),{data:s=[]}=He({queryKey:["vehicles"],queryFn:()=>oe.entities.Vehicle.list()}),{data:a=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list()}),{data:i=[]}=He({queryKey:["fuelLogs"],queryFn:()=>oe.entities.FuelLog.list()}),o=P.useMemo(()=>r.filter(v=>{const j=new Date(v.start_time),w=new Date(e.startDate),N=new Date(e.endDate);if(N.setHours(23,59,59),j<w||j>N||e.vehicleId!=="all"&&v.vehicle_id!==e.vehicleId||e.driverId!=="all"&&v.driver_email!==e.driverId||e.tripType!=="all"&&v.trip_type!==e.tripType)return!1;if(e.vehicleType!=="all"){const A=s.find(C=>C.id===v.vehicle_id);if((A==null?void 0:A.vehicle_type)!==e.vehicleType)return!1}return!0}),[r,e,s]),l=P.useMemo(()=>{const v={};return o.forEach(j=>{const w=Ce(new Date(j.start_time),"MMM yyyy",{locale:ut});v[w]||(v[w]={month:w,tjnst:0,privat:0}),j.trip_type==="tjnst"?v[w].tjnst+=j.distance_km||0:j.trip_type==="privat"&&(v[w].privat+=j.distance_km||0)}),Object.values(v).sort((j,w)=>new Date(j.month)-new Date(w.month))},[o]),c=P.useMemo(()=>{const v={};return o.forEach(j=>{const w=Ce(new Date(j.start_time),"MMM yyyy",{locale:ut});v[w]||(v[w]={month:w,totalDistance:0,tripCount:0}),v[w].totalDistance+=j.distance_km||0,v[w].tripCount+=1}),Object.values(v).sort((j,w)=>new Date(j.month)-new Date(w.month))},[o]),d=P.useMemo(()=>{const v={tjnst:0,privat:0,vntar:0};return o.forEach(j=>{v.hasOwnProperty(j.trip_type)&&v[j.trip_type]++}),Object.entries(v).filter(([j,w])=>w>0).map(([j,w])=>({name:j,value:w}))},[o]),u=P.useMemo(()=>{const v={};return o.forEach(j=>{const w=j.driver_email||"unknown";v[w]||(v[w]={driverEmail:w,driverName:j.driver_name,tripCount:0,totalDistance:0,businessTrips:0,privateTrips:0}),v[w].tripCount++,v[w].totalDistance+=j.distance_km||0,j.trip_type==="tjnst"&&v[w].businessTrips++,j.trip_type==="privat"&&v[w].privateTrips++}),Object.values(v).map(j=>({...j,avgDistance:j.tripCount>0?j.totalDistance/j.tripCount:0}))},[o]),h=P.useMemo(()=>{const v={};return o.forEach(j=>{const w=j.vehicle_id;v[w]||(v[w]={vehicleId:w,registrationNumber:j.registration_number,distance:0,trips:0}),v[w].distance+=j.distance_km||0,v[w].trips++}),Object.values(v)},[o]),g=P.useMemo(()=>{const v={};return o.forEach(j=>{if(!v[j.vehicle_id]){const w=s.find(N=>N.id===j.vehicle_id);v[j.vehicle_id]={vehicleId:j.vehicle_id,registrationNumber:j.registration_number,make:w==null?void 0:w.make,model:w==null?void 0:w.model,fuelType:w==null?void 0:w.fuel_type,distance:0,trips:0,totalCost:0}}v[j.vehicle_id].distance+=j.distance_km||0,v[j.vehicle_id].trips+=1}),i.forEach(j=>{const w=new Date(j.date),N=new Date(e.startDate),A=new Date(e.endDate);A.setHours(23,59,59),w>=N&&w<=A&&v[j.vehicle_id]&&(v[j.vehicle_id].totalCost+=j.amount||0)}),Object.values(v)},[o,i,s,e]),x=P.useMemo(()=>{const v=o.reduce((C,M)=>C+(M.distance_km||0),0),j=o.length,w=o.filter(C=>C.trip_type==="tjnst").length,N=o.filter(C=>C.trip_type==="privat").length,A=g.reduce((C,M)=>C+M.totalCost,0);return{totalDistance:v,totalTrips:j,businessTrips:w,privateTrips:N,totalCost:A,avgCostPerKm:v>0?A/v:0}},[o,g]),b=()=>{t({startDate:Ce(ri(new Date),"yyyy-MM-dd"),endDate:Ce(ni(new Date),"yyyy-MM-dd"),vehicleId:"all",driverId:"all",vehicleType:"all",tripType:"all"})},y=()=>{const v=["Datum","Fordon","Frare","Typ","Strcka (km)","Tid (min)","Syfte"],j=o.map(C=>{var M;return[Ce(new Date(C.start_time),"yyyy-MM-dd HH:mm"),C.registration_number,C.driver_name,C.trip_type,(M=C.distance_km)==null?void 0:M.toFixed(1),Math.round(C.duration_minutes||0),C.purpose||""]}),w=[v.join(","),...j.map(C=>C.join(","))].join(`
`),N=new Blob([w],{type:"text/csv;charset=utf-8;"}),A=document.createElement("a");A.href=URL.createObjectURL(N),A.download=`krjournal_rapport_${Ce(new Date,"yyyy-MM-dd")}.csv`,A.click()};return n.jsx("div",{className:"min-h-screen bg-slate-50",children:n.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6 pb-24",children:[n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-xl bg-indigo-100 flex items-center justify-center",children:n.jsx($0,{className:"h-5 w-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Avancerade rapporter"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Analys av krjournaldata"})]})]}),n.jsxs(ye,{onClick:y,variant:"outline",className:"gap-2",children:[n.jsx(Eo,{className:"h-4 w-4"}),"Exportera CSV"]})]})}),n.jsx("div",{className:"mb-6",children:n.jsx(BPe,{filters:e,onFiltersChange:t,vehicles:s,employees:a,onClear:b})}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",children:[n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-4",children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Total strcka"}),n.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[x.totalDistance.toFixed(0)," km"]})]})}),n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-4",children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Antal resor"}),n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:x.totalTrips}),n.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[x.businessTrips," tjnst  ",x.privateTrips," privat"]})]})}),n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-4",children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Total kostnad"}),n.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[x.totalCost.toLocaleString("sv-SE")," kr"]})]})}),n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-4",children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Snitt kr/km"}),n.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[x.avgCostPerKm.toFixed(2)," kr"]})]})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsx(UPe,{data:c}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsx(qPe,{data:l}),n.jsx(VPe,{data:d})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsx(WPe,{data:h}),n.jsx(zPe,{vehicleAnalysis:g})]}),n.jsx(HPe,{driverStats:u})]})]})})}const dS=e=>{if(!e||e==="")return"";try{const t=new Date(e);return isNaN(t.getTime())?"":t.toISOString().split("T")[0]}catch{return""}};function GPe(){var j;const e=Mf(),r=new URLSearchParams(window.location.search).get("id"),[s,a]=P.useState(!1),[i,o]=P.useState(!1),[l,c]=P.useState(null),[d,u]=P.useState(null),{data:h,isLoading:g}=He({queryKey:["vehicle",r],queryFn:async()=>(await oe.entities.Vehicle.filter({id:r}))[0],enabled:!!r}),{data:x=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list()});P.useEffect(()=>{h&&(u({registration_number:h.registration_number||"",gps_device_id:h.gps_device_id||"",make:h.make||"",model:h.model||"",year:h.year||"",category:h.category||"personbil",vehicle_type:h.vehicle_type||"personbil",fuel_type:h.fuel_type||"bensin",fuel_cards:h.fuel_cards||[],assigned_driver:h.assigned_driver||"",current_mileage:h.current_mileage||"",next_service_date:dS(h.next_service_date),next_service_mileage:h.next_service_mileage||"",next_inspection_date:dS(h.next_inspection_date),tire_change_date:dS(h.tire_change_date),status:h.status||"aktiv",image_url:h.image_url||"",notes:h.notes||""}),c(h.image_url||null))},[h]);const b=async w=>{const N=w.target.files[0];if(N){o(!0);try{const{file_url:A}=await oe.integrations.Core.UploadFile({file:N});c(A);const C=await oe.integrations.Core.InvokeLLM({prompt:`Analysera denna bild av fordonsinformation och extrahera fljande uppgifter om fordonet:
        - Registreringsnummer
        - Mrke (t.ex. Volvo, Tesla)
        - Modell
        - rsmodell (endast ret som nummer)
        - Fordonstyp (vlj en av: personbil, ltt lastbil, lastbil, skpbil, annat)
        - Brnsletyp (vlj en av: bensin, diesel, el, hybrid, plugin-hybrid, annat)
        
        Om ngon uppgift inte finns synlig i bilden, anvnd null fr det fltet.
        Svara endast med strukturerad data enligt schemat.`,file_urls:[A],response_json_schema:{type:"object",properties:{registration_number:{type:["string","null"]},make:{type:["string","null"]},model:{type:["string","null"]},year:{type:["number","null"]},vehicle_type:{type:["string","null"]},fuel_type:{type:["string","null"]}}}});u(M=>({...M,...Object.fromEntries(Object.entries(C).filter(([I,F])=>F!==null)),image_url:A}))}catch(A){console.error("Error analyzing image:",A),alert("Kunde inte analysera bilden. Du kan fortfarande fylla i uppgifterna manuellt.")}o(!1)}},y=()=>{c(null),u(w=>({...w,image_url:""}))},v=async w=>{w.preventDefault(),a(!0);try{const N={...d,year:d.year?Number(d.year):void 0,current_mileage:d.current_mileage?Number(d.current_mileage):void 0,next_service_mileage:d.next_service_mileage?Number(d.next_service_mileage):void 0,next_service_date:d.next_service_date||void 0,next_inspection_date:d.next_inspection_date||void 0,tire_change_date:d.tire_change_date||void 0};Object.keys(N).forEach(A=>{(N[A]===""||N[A]===void 0)&&delete N[A]}),await oe.entities.Vehicle.update(r,N),e(Pn("VehicleDetails")+`?id=${r}`)}catch(N){console.error("Error updating vehicle:",N),alert("Ett fel uppstod nr fordonet skulle uppdateras.")}a(!1)};return g||!d?n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-slate-900"})}):n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pb-24",children:n.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-6",children:[n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6",children:[n.jsxs(ye,{variant:"ghost",onClick:()=>e(Pn("VehicleDetails")+`?id=${r}`),className:"mb-4 -ml-2",children:[n.jsx(xu,{className:"w-4 h-4 mr-2"}),"Tillbaka"]}),n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Redigera fordon"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:h.registration_number})]}),n.jsxs("form",{onSubmit:v,className:"space-y-6",children:[n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:n.jsx(ce,{className:"border-0 shadow-sm overflow-hidden",children:n.jsxs(he,{className:"p-6",children:[n.jsx(ve,{className:"text-sm font-medium text-slate-700 mb-3 block",children:"Fordonsbild"}),l?n.jsxs("div",{className:"relative rounded-2xl overflow-hidden",children:[n.jsx("img",{src:l,alt:"Fordon",className:"w-full h-48 object-cover"}),n.jsx(ye,{type:"button",variant:"ghost",size:"icon",onClick:y,className:"absolute top-2 right-2 h-8 w-8 rounded-full bg-white/90 hover:bg-white shadow-md",children:n.jsx(Ra,{className:"h-4 w-4"})})]}):n.jsxs("label",{className:"relative flex flex-col items-center justify-center h-48 border-2 border-dashed border-slate-200 rounded-2xl cursor-pointer hover:border-slate-300 hover:bg-slate-50 transition-all",children:[n.jsx("input",{type:"file",accept:"image/*",onChange:b,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:i}),i?n.jsxs("div",{className:"flex flex-col items-center gap-3",children:[n.jsx(Ot,{className:"w-8 h-8 text-slate-400 animate-spin"}),n.jsx("p",{className:"text-sm text-slate-600 font-medium",children:"Analyserar bild..."})]}):n.jsxs("div",{className:"flex flex-col items-center gap-3",children:[n.jsx("div",{className:"h-12 w-12 rounded-xl bg-slate-100 flex items-center justify-center",children:n.jsx(lu,{className:"w-6 h-6 text-slate-400"})}),n.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Klicka fr att ladda upp"})]})]})]})})}),n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-6 space-y-4",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:"Grunduppgifter"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"registration_number",children:"Registreringsnummer *"}),n.jsx(De,{id:"registration_number",value:d.registration_number,onChange:w=>u(N=>({...N,registration_number:w.target.value.toUpperCase()})),className:"h-11",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"gps_device_id",children:"GPS Device ID"}),n.jsx(De,{id:"gps_device_id",value:d.gps_device_id,onChange:w=>u(N=>({...N,gps_device_id:w.target.value})),className:"h-11",placeholder:"GPS Device ID"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"make",children:"Mrke *"}),n.jsx(De,{id:"make",value:d.make,onChange:w=>u(N=>({...N,make:w.target.value})),className:"h-11",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"model",children:"Modell *"}),n.jsx(De,{id:"model",value:d.model,onChange:w=>u(N=>({...N,model:w.target.value})),className:"h-11",required:!0})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"year",children:"rsmodell"}),n.jsx(De,{id:"year",type:"number",value:d.year,onChange:w=>u(N=>({...N,year:w.target.value})),className:"h-11"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"status",children:"Status"}),n.jsxs(Nt,{value:d.status,onValueChange:w=>u(N=>({...N,status:w})),children:[n.jsx(jt,{className:"h-11",children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"aktiv",children:"Aktiv"}),n.jsx(Ne,{value:"service",children:"Service"}),n.jsx(Ne,{value:"skadad",children:"Skadad"}),n.jsx(Ne,{value:"avstlld",children:"Avstlld"})]})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"category",children:"Kategori"}),n.jsxs(Nt,{value:d.category,onValueChange:w=>u(N=>({...N,category:w})),children:[n.jsx(jt,{className:"h-11",children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"personbil",children:"Personbil"}),n.jsx(Ne,{value:"ltt lastbil",children:"Ltt lastbil"}),n.jsx(Ne,{value:"lastbil",children:"Lastbil"}),n.jsx(Ne,{value:"skpbil",children:"Skpbil"}),n.jsx(Ne,{value:"specialfordon",children:"Specialfordon"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"vehicle_type",children:"Fordonstyp"}),n.jsxs(Nt,{value:d.vehicle_type,onValueChange:w=>u(N=>({...N,vehicle_type:w})),children:[n.jsx(jt,{className:"h-11",children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"personbil",children:"Personbil"}),n.jsx(Ne,{value:"ltt lastbil",children:"Ltt lastbil"}),n.jsx(Ne,{value:"lastbil",children:"Lastbil"}),n.jsx(Ne,{value:"skpbil",children:"Skpbil"}),n.jsx(Ne,{value:"annat",children:"Annat"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"fuel_type",children:"Brnsletyp"}),n.jsxs(Nt,{value:d.fuel_type,onValueChange:w=>u(N=>({...N,fuel_type:w})),children:[n.jsx(jt,{className:"h-11",children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"bensin",children:"Bensin"}),n.jsx(Ne,{value:"diesel",children:"Diesel"}),n.jsx(Ne,{value:"el",children:"El"}),n.jsx(Ne,{value:"hybrid",children:"Hybrid"}),n.jsx(Ne,{value:"plugin-hybrid",children:"Plugin-hybrid"}),n.jsx(Ne,{value:"annat",children:"Annat"})]})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"assigned_driver",children:"Frare"}),n.jsxs(Nt,{value:d.assigned_driver||"",onValueChange:w=>u(N=>({...N,assigned_driver:w})),children:[n.jsx(jt,{className:"h-11",children:n.jsx(kt,{placeholder:"Vlj frare"})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:null,children:"Ingen frare"}),x.map(w=>n.jsx(Ne,{value:w.user_email,children:w.user_email},w.id))]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"current_mileage",children:"Nuvarande mtarstllning (km)"}),n.jsx(De,{id:"current_mileage",type:"number",value:d.current_mileage,onChange:w=>u(N=>({...N,current_mileage:w.target.value})),className:"h-11"})]})]})})}),n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-6 space-y-4",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:"Service & Underhll"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"next_service_date",children:"Nsta service (datum)"}),n.jsx(De,{id:"next_service_date",type:"date",value:d.next_service_date||"",onChange:w=>u(N=>({...N,next_service_date:w.target.value||""})),className:"h-11"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"next_service_mileage",children:"Nsta service (km)"}),n.jsx(De,{id:"next_service_mileage",type:"number",value:d.next_service_mileage,onChange:w=>u(N=>({...N,next_service_mileage:w.target.value})),className:"h-11"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"next_inspection_date",children:"Nsta besiktning"}),n.jsx(De,{id:"next_inspection_date",type:"date",value:d.next_inspection_date||"",onChange:w=>u(N=>({...N,next_inspection_date:w.target.value||""})),className:"h-11"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"tire_change_date",children:"Dckbyte"}),n.jsx(De,{id:"tire_change_date",type:"date",value:d.tire_change_date||"",onChange:w=>u(N=>({...N,tire_change_date:w.target.value||""})),className:"h-11"})]})]})]})})}),n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-6 space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:"Tankkort"}),n.jsx(ye,{type:"button",variant:"outline",size:"sm",onClick:()=>u(w=>({...w,fuel_cards:[...w.fuel_cards||[],{provider:"",card_number:"",pin_code:""}]})),children:"Lgg till kort"})]}),((j=d.fuel_cards)==null?void 0:j.length)>0?n.jsx("div",{className:"space-y-3",children:d.fuel_cards.map((w,N)=>n.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["Kort ",N+1]}),n.jsx(ye,{type:"button",variant:"ghost",size:"sm",onClick:()=>u(A=>({...A,fuel_cards:A.fuel_cards.filter((C,M)=>M!==N)})),className:"h-7 text-rose-600 hover:text-rose-700",children:n.jsx(Ra,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(ve,{className:"text-xs",children:"Leverantr"}),n.jsx(De,{value:w.provider,onChange:A=>{const C=[...d.fuel_cards];C[N].provider=A.target.value,u(M=>({...M,fuel_cards:C}))},placeholder:"Circle K",className:"h-9"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(ve,{className:"text-xs",children:"Kortnummer"}),n.jsx(De,{value:w.card_number,onChange:A=>{const C=[...d.fuel_cards];C[N].card_number=A.target.value,u(M=>({...M,fuel_cards:C}))},placeholder:"123456",className:"h-9"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(ve,{className:"text-xs",children:"PIN/Kod"}),n.jsx(De,{value:w.pin_code,onChange:A=>{const C=[...d.fuel_cards];C[N].pin_code=A.target.value,u(M=>({...M,fuel_cards:C}))},placeholder:"1234",className:"h-9",type:"password"})]})]})]},N))}):n.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"Inga tankkort tillagda"})]})})}),n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-6 space-y-4",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:"Anteckningar"}),n.jsx("div",{className:"space-y-2",children:n.jsx(Zn,{id:"notes",value:d.notes,onChange:w=>u(N=>({...N,notes:w.target.value})),placeholder:"vriga anteckningar om fordonet...",className:"min-h-[100px] resize-none"})})]})})}),n.jsxs(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"flex gap-3",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:()=>e(Pn("VehicleDetails")+`?id=${r}`),className:"flex-1 h-12 rounded-2xl",children:"Avbryt"}),n.jsx(ye,{type:"submit",disabled:s||!d.registration_number||!d.make||!d.model,className:"flex-1 h-12 rounded-2xl shadow-md hover:shadow-lg transition-all",children:s?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"w-4 h-4 mr-2 animate-spin"}),"Sparar..."]}):"Spara ndringar"})]})]})]})})}function ZPe({open:e,onClose:t,employee:r}){const[s,a]=P.useState(!1),[i,o]=P.useState({name:"",category:"other",notes:"",file:null}),l=Xt({mutationFn:async u=>{const h=[...r.files||[],u];return oe.entities.Employee.update(r.id,{files:h})},onSuccess:()=>{o({name:"",category:"other",notes:"",file:null}),t()}}),c=u=>{const h=u.target.files[0];h&&o(g=>({...g,file:h,name:g.name||h.name}))},d=async u=>{if(u.preventDefault(),!!i.file){a(!0);try{const{file_url:h}=await oe.integrations.Core.UploadFile({file:i.file});await l.mutate({name:i.name,url:h,category:i.category,uploaded_date:new Date().toISOString(),notes:i.notes})}catch(h){console.error("Upload failed:",h)}finally{a(!1)}}};return n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"max-w-md",children:[n.jsx(er,{children:n.jsx(tr,{children:"Ladda upp fil"})}),n.jsxs("form",{onSubmit:d,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Fil *"}),n.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center hover:border-slate-400 transition-colors cursor-pointer",children:[n.jsx("input",{type:"file",onChange:c,className:"hidden",id:"file-upload"}),n.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[n.jsx(lu,{className:"h-8 w-8 text-slate-400 mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-slate-600",children:i.file?i.file.name:"Klicka fr att vlja fil"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"name",children:"Filnamn *"}),n.jsx(De,{id:"name",value:i.name,onChange:u=>o(h=>({...h,name:u.target.value})),placeholder:"T.ex. Anstllningskontrakt",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"category",children:"Kategori"}),n.jsxs(Nt,{value:i.category,onValueChange:u=>o(h=>({...h,category:u})),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"contract",children:"Kontrakt"}),n.jsx(Ne,{value:"certificate",children:"Intyg"}),n.jsx(Ne,{value:"id",children:"Legitimation"}),n.jsx(Ne,{value:"other",children:"vrigt"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"notes",children:"Anteckningar"}),n.jsx(Zn,{id:"notes",value:i.notes,onChange:u=>o(h=>({...h,notes:u.target.value})),placeholder:"Frivillig beskrivning...",className:"min-h-[80px]"})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Avbryt"}),n.jsx(ye,{type:"submit",disabled:s||!i.file||!i.name,className:"flex-1",children:s?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"w-4 h-4 mr-2 animate-spin"}),"Laddar upp..."]}):"Ladda upp"})]})]})]})})}function YPe({open:e,onClose:t,employee:r}){const[s,a]=P.useState({name:"",relationship:"",phone:"",email:""}),i=Xt({mutationFn:async l=>{const c=[...r.emergency_contacts||[],l];return oe.entities.Employee.update(r.id,{emergency_contacts:c})},onSuccess:()=>{a({name:"",relationship:"",phone:"",email:""}),t()}}),o=l=>{l.preventDefault(),i.mutate(s)};return n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"max-w-md",children:[n.jsx(er,{children:n.jsx(tr,{children:"Lgg till ndkontakt"})}),n.jsxs("form",{onSubmit:o,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"name",children:"Namn *"}),n.jsx(De,{id:"name",value:s.name,onChange:l=>a(c=>({...c,name:l.target.value})),placeholder:"T.ex. Anna Andersson",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"relationship",children:"Relation *"}),n.jsx(De,{id:"relationship",value:s.relationship,onChange:l=>a(c=>({...c,relationship:l.target.value})),placeholder:"T.ex. Make/maka, Frlder",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"phone",children:"Telefon *"}),n.jsx(De,{id:"phone",value:s.phone,onChange:l=>a(c=>({...c,phone:l.target.value})),placeholder:"070-123 45 67",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"email",children:"Email"}),n.jsx(De,{id:"email",type:"email",value:s.email,onChange:l=>a(c=>({...c,email:l.target.value})),placeholder:"anna@example.com"})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Avbryt"}),n.jsx(ye,{type:"submit",disabled:i.isPending,className:"flex-1",children:i.isPending?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"w-4 h-4 mr-2 animate-spin"}),"Sparar..."]}):"Lgg till"})]})]})]})})}function XPe({open:e,onClose:t,employee:r}){const[s,a]=P.useState({title:"",date:"",type:"other",notes:""}),i=Xt({mutationFn:async l=>{const c=[...r.important_dates||[],l];return oe.entities.Employee.update(r.id,{important_dates:c})},onSuccess:()=>{a({title:"",date:"",type:"other",notes:""}),t()}}),o=l=>{l.preventDefault(),i.mutate(s)};return n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"max-w-md",children:[n.jsx(er,{children:n.jsx(tr,{children:"Lgg till viktigt datum"})}),n.jsxs("form",{onSubmit:o,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"title",children:"Titel *"}),n.jsx(De,{id:"title",value:s.title,onChange:l=>a(c=>({...c,title:l.target.value})),placeholder:"T.ex. Fdelsedag",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"date",children:"Datum *"}),n.jsx(De,{id:"date",type:"date",value:s.date,onChange:l=>a(c=>({...c,date:l.target.value})),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"type",children:"Typ"}),n.jsxs(Nt,{value:s.type,onValueChange:l=>a(c=>({...c,type:l})),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"birthday",children:"Fdelsedag"}),n.jsx(Ne,{value:"anniversary",children:"Jubileum"}),n.jsx(Ne,{value:"other",children:"vrigt"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"notes",children:"Anteckningar"}),n.jsx(Zn,{id:"notes",value:s.notes,onChange:l=>a(c=>({...c,notes:l.target.value})),placeholder:"Frivillig information...",className:"min-h-[80px]"})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Avbryt"}),n.jsx(ye,{type:"submit",disabled:i.isPending,className:"flex-1",children:i.isPending?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"w-4 h-4 mr-2 animate-spin"}),"Sparar..."]}):"Lgg till"})]})]})]})})}function QPe({open:e,onClose:t,employee:r}){var u;const[s,a]=P.useState(""),[i,o]=P.useState(!1),{data:l=[]}=He({queryKey:["onboardingTemplates"],queryFn:()=>oe.entities.OnboardingTemplate.filter({is_active:!0}),enabled:e}),c=Xt({mutationFn:async()=>{await oe.entities.Employee.update(r.id,{assigned_onboarding_template_id:s,onboarding_status:"in_progress",onboarding_start_date:r.start_date||new Date().toISOString().split("T")[0]}),await oe.functions.invoke("generateOnboardingTasks",{employee_id:r.id,template_id:s})},onSuccess:()=>{o(!0),setTimeout(()=>{o(!1),a(""),t()},2e3)}}),d=h=>{h.preventDefault(),c.mutate()};return n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{children:[n.jsx(er,{children:n.jsx(tr,{children:"Tilldela onboarding-mall"})}),i?n.jsxs("div",{className:"py-8 text-center",children:[n.jsx($r,{className:"h-16 w-16 text-emerald-500 mx-auto mb-4"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:"Mall tilldelad!"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Onboarding-uppgifter har skapats"})]}):n.jsxs("form",{onSubmit:d,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"template",children:"Vlj mall *"}),n.jsxs(Nt,{value:s,onValueChange:a,children:[n.jsx(jt,{children:n.jsx(kt,{placeholder:"Vlj en mall"})}),n.jsx(wt,{children:l.map(h=>n.jsxs(Ne,{value:h.id,children:[h.name," ",h.department?`(${h.department})`:""]},h.id))})]})]}),l.find(h=>h.id===s)&&n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg text-sm",children:[n.jsx("p",{className:"text-slate-600",children:l.find(h=>h.id===s).description}),n.jsxs("p",{className:"text-slate-500 mt-2",children:[((u=l.find(h=>h.id===s).tasks)==null?void 0:u.length)||0," uppgifter kommer att skapas"]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Avbryt"}),n.jsx(ye,{type:"submit",disabled:c.isPending||!s,className:"flex-1",children:c.isPending?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"w-4 h-4 mr-2 animate-spin"}),"Tilldelar..."]}):"Tilldela mall"})]})]})]})})}function JPe({open:e,onClose:t,employee:r}){const[s,a]=P.useState({system_name:"",username:"",password:"",url:"",notes:""}),i=Xt({mutationFn:async l=>{const c={...l,created_date:new Date().toISOString()},d=[...r.credentials||[],c];return oe.entities.Employee.update(r.id,{credentials:d})},onSuccess:()=>{a({system_name:"",username:"",password:"",url:"",notes:""}),t()}}),o=l=>{l.preventDefault(),i.mutate(s)};return n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"max-w-md",children:[n.jsx(er,{children:n.jsx(tr,{children:"Lgg till inloggningsuppgifter"})}),n.jsxs("form",{onSubmit:o,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"system_name",children:"System/Tjnst *"}),n.jsx(De,{id:"system_name",value:s.system_name,onChange:l=>a(c=>({...c,system_name:l.target.value})),placeholder:"T.ex. Office 365, Slack",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"username",children:"Anvndarnamn *"}),n.jsx(De,{id:"username",value:s.username,onChange:l=>a(c=>({...c,username:l.target.value})),placeholder:"anvndarnamn",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"password",children:"Lsenord *"}),n.jsx(De,{id:"password",type:"text",value:s.password,onChange:l=>a(c=>({...c,password:l.target.value})),placeholder:"lsenord",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"url",children:"URL"}),n.jsx(De,{id:"url",type:"url",value:s.url,onChange:l=>a(c=>({...c,url:l.target.value})),placeholder:"https://..."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"notes",children:"Anteckningar"}),n.jsx(Zn,{id:"notes",value:s.notes,onChange:l=>a(c=>({...c,notes:l.target.value})),placeholder:"Eventuella extra instruktioner...",className:"min-h-[60px]"})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Avbryt"}),n.jsx(ye,{type:"submit",disabled:i.isPending,className:"flex-1",children:i.isPending?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"w-4 h-4 mr-2 animate-spin"}),"Sparar..."]}):"Lgg till"})]})]})]})})}function e3e(){const[e,t]=P.useState(null),[r,s]=P.useState(null),[a,i]=P.useState("info"),[o,l]=P.useState(!1),[c,d]=P.useState(!1),[u,h]=P.useState(!1),[g,x]=P.useState(!1),[b,y]=P.useState(!1),[v,j]=P.useState({}),w=$n();P.useEffect(()=>{oe.auth.me().then(t);const z=new URLSearchParams(window.location.search);s(z.get("id"))},[]);const{data:N,isLoading:A}=He({queryKey:["employee",r],queryFn:async()=>(await oe.entities.Employee.filter({id:r}))[0]||null,enabled:!!r}),{data:C}=He({queryKey:["employeeUser",N==null?void 0:N.user_email],queryFn:async()=>(await oe.entities.User.filter({email:N.user_email}))[0]||null,enabled:!!(N!=null&&N.user_email)}),M=Xt({mutationFn:async z=>{const Z=(N.files||[]).filter(se=>se.url!==z);return oe.entities.Employee.update(N.id,{files:Z})},onSuccess:()=>{w.invalidateQueries({queryKey:["employee",r]})}}),I=Xt({mutationFn:async z=>{const Z=[...N.emergency_contacts||[]];return Z.splice(z,1),oe.entities.Employee.update(N.id,{emergency_contacts:Z})},onSuccess:()=>{w.invalidateQueries({queryKey:["employee",r]})}}),F=Xt({mutationFn:async z=>{const Z=[...N.important_dates||[]];return Z.splice(z,1),oe.entities.Employee.update(N.id,{important_dates:Z})},onSuccess:()=>{w.invalidateQueries({queryKey:["employee",r]})}}),U=z=>z?z.split(" ").map(Z=>Z[0]).join("").toUpperCase().slice(0,2):"?",W=z=>({contract:"Kontrakt",certificate:"Intyg",id:"Legitimation",other:"vrigt"})[z]||z,D=z=>({birthday:"Fdelsedag",anniversary:"Jubileum",other:"vrigt"})[z]||z;if(A)return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white flex items-center justify-center",children:n.jsx("div",{className:"text-slate-500",children:"Laddar..."})});if(!N)return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white flex items-center justify-center",children:n.jsx("div",{className:"text-slate-500",children:"Medarbetare hittades inte"})});const R=(e==null?void 0:e.role)==="admin";return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pb-24",children:[n.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6",children:[n.jsxs(wr,{to:Pn("Employees"),className:"inline-flex items-center text-slate-600 hover:text-slate-900 mb-4",children:[n.jsx(tp,{className:"h-4 w-4 mr-1"}),"Tillbaka"]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsxs(Vf,{className:"h-20 w-20 ring-4 ring-white shadow-lg",children:[n.jsx(py,{src:N.profile_image}),n.jsx(Uf,{className:"bg-gradient-to-br from-slate-200 to-slate-300 text-slate-600 text-2xl",children:U((C==null?void 0:C.full_name)||N.user_email)})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:(C==null?void 0:C.full_name)||N.user_email}),n.jsx("p",{className:"text-slate-500 mt-1",children:N.job_title||"Ingen titel"}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[N.department&&n.jsx(it,{variant:"secondary",children:N.department}),N.employment_type&&n.jsx(it,{variant:"outline",children:N.employment_type})]})]})]})]}),n.jsxs(Ls,{value:a,onValueChange:i,children:[n.jsxs(As,{className:"grid w-full grid-cols-5 mb-6",children:[n.jsx(gt,{value:"info",children:"Info"}),n.jsx(gt,{value:"files",children:"Filer"}),n.jsx(gt,{value:"contacts",children:"Kontakter"}),n.jsx(gt,{value:"dates",children:"Datum"}),R&&n.jsx(gt,{value:"onboarding",children:"Onboarding"})]}),n.jsxs(Dt,{value:"info",className:"space-y-4",children:[n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsx(Ct,{className:"text-lg",children:"Kontaktinformation"})}),n.jsxs(he,{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(_c,{className:"h-4 w-4 text-slate-500"}),n.jsx("a",{href:`mailto:${N.user_email}`,className:"text-sm text-blue-600 hover:underline",children:N.user_email})]}),N.phone&&n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(B0,{className:"h-4 w-4 text-slate-500"}),n.jsx("a",{href:`tel:${N.phone}`,className:"text-sm text-blue-600 hover:underline",children:N.phone})]})]})]}),N.bio&&n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsx(Ct,{className:"text-lg",children:"Om"})}),n.jsx(he,{children:n.jsx("p",{className:"text-sm text-slate-700",children:N.bio})})]}),N.contract_url&&n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsx(Ct,{className:"text-lg",children:"Anstllningskontrakt"})}),n.jsx(he,{children:n.jsxs("a",{href:N.contract_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-blue-600 hover:underline",children:[n.jsx(Jr,{className:"h-4 w-4"}),"Visa kontrakt"]})})]})]}),n.jsxs(Dt,{value:"files",className:"space-y-4",children:[R&&n.jsxs(ye,{onClick:()=>l(!0),className:"w-full",children:[n.jsx(lu,{className:"h-4 w-4 mr-2"}),"Ladda upp fil"]}),N.files&&N.files.length>0?n.jsx("div",{className:"grid gap-3",children:N.files.map((z,Z)=>n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx(Jr,{className:"h-8 w-8 text-slate-400 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-slate-900 truncate",children:z.name}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx(it,{variant:"secondary",className:"text-xs",children:W(z.category)}),z.uploaded_date&&n.jsx("span",{className:"text-xs text-slate-500",children:Ce(new Date(z.uploaded_date),"d MMM yyyy",{locale:ut})})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[n.jsx(ye,{variant:"ghost",size:"icon",asChild:!0,children:n.jsx("a",{href:z.url,target:"_blank",rel:"noopener noreferrer",children:n.jsx(Eo,{className:"h-4 w-4"})})}),R&&n.jsx(ye,{variant:"ghost",size:"icon",onClick:()=>{window.confirm("Ta bort denna fil?")&&M.mutate(z.url)},className:"text-red-500 hover:text-red-600",children:n.jsx(bi,{className:"h-4 w-4"})})]})]})},Z))}):n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-8 text-center",children:[n.jsx(Jr,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-slate-500",children:"Inga filer uppladdade nnu"})]})})]}),n.jsxs(Dt,{value:"contacts",className:"space-y-4",children:[R&&n.jsxs(ye,{onClick:()=>d(!0),className:"w-full",children:[n.jsx(xr,{className:"h-4 w-4 mr-2"}),"Lgg till ndkontakt"]}),N.emergency_contacts&&N.emergency_contacts.length>0?n.jsx("div",{className:"grid gap-3",children:N.emergency_contacts.map((z,Z)=>n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-slate-900",children:z.name}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:z.relationship}),n.jsxs("div",{className:"space-y-1 mt-3",children:[z.phone&&n.jsxs("a",{href:`tel:${z.phone}`,className:"flex items-center gap-2 text-sm text-blue-600 hover:underline",children:[n.jsx(B0,{className:"h-3 w-3"}),z.phone]}),z.email&&n.jsxs("a",{href:`mailto:${z.email}`,className:"flex items-center gap-2 text-sm text-blue-600 hover:underline",children:[n.jsx(_c,{className:"h-3 w-3"}),z.email]})]})]}),R&&n.jsx(ye,{variant:"ghost",size:"icon",onClick:()=>{window.confirm("Ta bort denna kontakt?")&&I.mutate(Z)},className:"text-red-500 hover:text-red-600",children:n.jsx(bi,{className:"h-4 w-4"})})]})})},Z))}):n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-8 text-center",children:[n.jsx(ja,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-slate-500",children:"Inga ndkontakter registrerade"})]})})]}),R&&n.jsxs(Dt,{value:"onboarding",className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs(ye,{onClick:()=>x(!0),className:"w-full",children:[n.jsx(xr,{className:"h-4 w-4 mr-2"}),"Tilldela mall"]}),n.jsxs(ye,{onClick:()=>y(!0),variant:"outline",className:"w-full",children:[n.jsx(iE,{className:"h-4 w-4 mr-2"}),"Lgg till inlogg"]})]}),N.assigned_onboarding_template_id&&n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsx(Ct,{className:"text-lg",children:"Onboarding-status"})}),n.jsx(he,{children:n.jsxs(it,{variant:"secondary",children:[N.onboarding_status==="not_started"&&"Ej startad",N.onboarding_status==="in_progress"&&"Pgende",N.onboarding_status==="completed"&&"Slutfrd"]})})]}),N.credentials&&N.credentials.length>0&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:"Inloggningsuppgifter"}),N.credentials.map((z,Z)=>n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-slate-900",children:z.system_name}),n.jsxs("div",{className:"space-y-2 mt-3 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-slate-500 w-24",children:"Anvndarnamn:"}),n.jsx("span",{className:"font-mono text-slate-700",children:z.username}),n.jsx(ye,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{navigator.clipboard.writeText(z.username)},children:n.jsx(nf,{className:"h-3 w-3"})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-slate-500 w-24",children:"Lsenord:"}),n.jsx("span",{className:"font-mono text-slate-700",children:v[Z]?z.password:""}),n.jsx(ye,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>j(se=>({...se,[Z]:!se[Z]})),children:v[Z]?n.jsx(JY,{className:"h-3 w-3"}):n.jsx(Nx,{className:"h-3 w-3"})}),n.jsx(ye,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{navigator.clipboard.writeText(z.password)},children:n.jsx(nf,{className:"h-3 w-3"})})]}),z.url&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-slate-500 w-24",children:"URL:"}),n.jsx("a",{href:z.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline truncate",children:z.url})]}),z.notes&&n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-slate-500 w-24",children:"Notering:"}),n.jsx("p",{className:"text-slate-600 flex-1",children:z.notes})]})]})]}),n.jsx(ye,{variant:"ghost",size:"icon",onClick:()=>{if(window.confirm("Ta bort denna inloggning?")){const se=N.credentials.filter((J,Q)=>Q!==Z);oe.entities.Employee.update(N.id,{credentials:se}).then(()=>w.invalidateQueries({queryKey:["employee",r]}))}},className:"text-red-500 hover:text-red-600",children:n.jsx(bi,{className:"h-4 w-4"})})]})})},Z))]}),(!N.credentials||N.credentials.length===0)&&!N.assigned_onboarding_template_id&&n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-8 text-center",children:[n.jsx(iE,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-slate-500",children:"Ingen onboarding-information tillgnglig nnu"})]})})]}),n.jsxs(Dt,{value:"dates",className:"space-y-4",children:[R&&n.jsxs(ye,{onClick:()=>h(!0),className:"w-full",children:[n.jsx(xr,{className:"h-4 w-4 mr-2"}),"Lgg till viktigt datum"]}),N.important_dates&&N.important_dates.length>0?n.jsx("div",{className:"grid gap-3",children:N.important_dates.sort((z,Z)=>new Date(z.date)-new Date(Z.date)).map((z,Z)=>n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[n.jsx("div",{className:"h-12 w-12 rounded-lg bg-blue-100 flex items-center justify-center flex-shrink-0",children:n.jsx(_r,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-slate-900",children:z.title}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:Ce(new Date(z.date),"d MMMM yyyy",{locale:ut})}),n.jsx(it,{variant:"secondary",className:"mt-2 text-xs",children:D(z.type)}),z.notes&&n.jsx("p",{className:"text-sm text-slate-600 mt-2",children:z.notes})]})]}),R&&n.jsx(ye,{variant:"ghost",size:"icon",onClick:()=>{window.confirm("Ta bort detta datum?")&&F.mutate(Z)},className:"text-red-500 hover:text-red-600",children:n.jsx(bi,{className:"h-4 w-4"})})]})})},Z))}):n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-8 text-center",children:[n.jsx(_r,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-slate-500",children:"Inga viktiga datum registrerade"})]})})]})]})]}),n.jsx(ZPe,{open:o,onClose:()=>{l(!1),w.invalidateQueries({queryKey:["employee",r]})},employee:N}),n.jsx(YPe,{open:c,onClose:()=>{d(!1),w.invalidateQueries({queryKey:["employee",r]})},employee:N}),n.jsx(XPe,{open:u,onClose:()=>{h(!1),w.invalidateQueries({queryKey:["employee",r]})},employee:N}),n.jsx(QPe,{open:g,onClose:()=>{x(!1),w.invalidateQueries({queryKey:["employee",r]})},employee:N}),n.jsx(JPe,{open:b,onClose:()=>{y(!1),w.invalidateQueries({queryKey:["employee",r]})},employee:N})]})}const t3e=["support_service","install","rental","interntid"],n3e=["TimeTracking","Vehicles","GPS","DrivingJournal","Manuals","Chat","Reports"];function r3e({open:e,onClose:t,employee:r}){const[s,a]=P.useState({user_email:"",phone:"",department:"vrigt",job_title:"",manager_email:"",start_date:"",location:"",bio:"",assigned_services:[],assigned_features:[]}),{data:i=[]}=He({queryKey:["users"],queryFn:()=>oe.entities.User.list(),enabled:e});P.useEffect(()=>{a(r?{user_email:r.user_email||"",phone:r.phone||"",department:r.department||"vrigt",job_title:r.job_title||"",manager_email:r.manager_email||"",start_date:r.start_date||"",location:r.location||"",bio:r.bio||"",assigned_services:r.assigned_services||[],assigned_features:r.assigned_features||[]}:{user_email:"",phone:"",department:"vrigt",job_title:"",manager_email:"",start_date:"",location:"",bio:"",assigned_services:[],assigned_features:[]})},[r,e]);const o=Xt({mutationFn:async c=>r?await oe.entities.Employee.update(r.id,c):await oe.entities.Employee.create(c),onSuccess:()=>{t()}}),l=c=>{c.preventDefault(),o.mutate(s)};return n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(er,{children:n.jsx(tr,{children:r?"Redigera medarbetare":"Lgg till medarbetare"})}),n.jsxs("form",{onSubmit:l,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"user_email",children:"Email *"}),n.jsxs(Nt,{value:s.user_email,onValueChange:c=>a(d=>({...d,user_email:c})),children:[n.jsx(jt,{children:n.jsx(kt,{placeholder:"Vlj anvndare"})}),n.jsx(wt,{children:i.map(c=>n.jsxs(Ne,{value:c.email,children:[c.full_name," (",c.email,")"]},c.email))})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"job_title",children:"Titel"}),n.jsx(De,{id:"job_title",value:s.job_title,onChange:c=>a(d=>({...d,job_title:c.target.value})),placeholder:"Titel"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"department",children:"Avdelning"}),n.jsxs(Nt,{value:s.department,onValueChange:c=>a(d=>({...d,department:c})),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"Ledning",children:"Ledning"}),n.jsx(Ne,{value:"HR",children:"HR"}),n.jsx(Ne,{value:"Slj",children:"Slj"}),n.jsx(Ne,{value:"Marknad",children:"Marknad"}),n.jsx(Ne,{value:"IT",children:"IT"}),n.jsx(Ne,{value:"Ekonomi",children:"Ekonomi"}),n.jsx(Ne,{value:"Produktion",children:"Produktion"}),n.jsx(Ne,{value:"Kundtjnst",children:"Kundtjnst"}),n.jsx(Ne,{value:"vrigt",children:"vrigt"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"phone",children:"Telefon"}),n.jsx(De,{id:"phone",value:s.phone,onChange:c=>a(d=>({...d,phone:c.target.value})),placeholder:"070-123 45 67"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"start_date",children:"Startdatum"}),n.jsx(De,{id:"start_date",type:"date",value:s.start_date,onChange:c=>a(d=>({...d,start_date:c.target.value}))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"location",children:"Kontor"}),n.jsx(De,{id:"location",value:s.location,onChange:c=>a(d=>({...d,location:c.target.value})),placeholder:"Stockholm"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"bio",children:"Bio"}),n.jsx(Zn,{id:"bio",value:s.bio,onChange:c=>a(d=>({...d,bio:c.target.value})),placeholder:"En kort beskrivning...",className:"min-h-[80px]"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Tilldelade tjnster"}),n.jsx("div",{className:"space-y-2",children:t3e.map(c=>n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:s.assigned_services.includes(c),onChange:d=>{d.target.checked?a(u=>({...u,assigned_services:[...u.assigned_services,c]})):a(u=>({...u,assigned_services:u.assigned_services.filter(h=>h!==c)}))},className:"w-4 h-4 rounded"}),n.jsxs("span",{className:"text-sm text-slate-700",children:[c==="support_service"&&"Support & Service",c==="install"&&"Installation",c==="rental"&&"Uthyrning",c==="interntid"&&"Interntid"]})]},c))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Funktionstkomst"}),n.jsx("div",{className:"space-y-2",children:n3e.map(c=>n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:s.assigned_features.includes(c),onChange:d=>{d.target.checked?a(u=>({...u,assigned_features:[...u.assigned_features,c]})):a(u=>({...u,assigned_features:u.assigned_features.filter(h=>h!==c)}))},className:"w-4 h-4 rounded"}),n.jsx("span",{className:"text-sm text-slate-700",children:c})]},c))})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Avbryt"}),n.jsx(ye,{type:"submit",disabled:o.isPending||!s.user_email,className:"flex-1",children:o.isPending?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"w-4 h-4 mr-2 animate-spin"}),"Sparar..."]}):"Spara"})]})]})]})})}function s3e({open:e,onClose:t}){const[r,s]=P.useState(""),[a,i]=P.useState("user"),[o,l]=P.useState(!1),c=Xt({mutationFn:async()=>{await oe.users.inviteUser(r,a)},onSuccess:()=>{l(!0),setTimeout(()=>{s(""),i("user"),l(!1),t()},2e3)}}),d=u=>{u.preventDefault(),c.mutate()};return n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{children:[n.jsx(er,{children:n.jsx(tr,{children:"Bjud in anvndare"})}),o?n.jsxs("div",{className:"py-8 text-center",children:[n.jsx($r,{className:"h-16 w-16 text-emerald-500 mx-auto mb-4"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900",children:"Inbjudan skickad!"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Anvndaren har ftt en e-postinbjudan"})]}):n.jsxs("form",{onSubmit:d,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"email",children:"Email *"}),n.jsx(De,{id:"email",type:"email",value:r,onChange:u=>s(u.target.value),placeholder:"namn@foretag.se",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"role",children:"Roll"}),n.jsxs(Nt,{value:a,onValueChange:i,children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"user",children:"Anvndare"}),n.jsx(Ne,{value:"admin",children:"Admin"})]})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Avbryt"}),n.jsx(ye,{type:"submit",disabled:c.isPending||!r,className:"flex-1",children:c.isPending?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"w-4 h-4 mr-2 animate-spin"}),"Skickar..."]}):"Skicka inbjudan"})]})]})]})})}function a3e(){const[e,t]=P.useState(""),[r,s]=P.useState(!1),[a,i]=P.useState(!1),[o,l]=P.useState(null),c=$n(),{data:d=[],isLoading:u}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list()}),{data:h=[]}=He({queryKey:["users"],queryFn:()=>oe.entities.User.list()}),g=d.filter(j=>{var N,A,C;const w=h.find(M=>M.email===j.user_email);return((N=j.user_email)==null?void 0:N.toLowerCase().includes(e.toLowerCase()))||((A=w==null?void 0:w.full_name)==null?void 0:A.toLowerCase().includes(e.toLowerCase()))||((C=j.job_title)==null?void 0:C.toLowerCase().includes(e.toLowerCase()))}),x=Xt({mutationFn:j=>oe.entities.Employee.delete(j),onSuccess:()=>{c.invalidateQueries({queryKey:["employees"]})}}),b=j=>{l(j),s(!0)},y=j=>{var w;window.confirm(`r du sker p att du vill ta bort ${((w=h.find(N=>N.email===j.user_email))==null?void 0:w.full_name)||j.user_email}?`)&&x.mutate(j.id)},v=()=>{s(!1),l(null),c.invalidateQueries({queryKey:["employees"]})};return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pb-24",children:[n.jsx("div",{className:"max-w-2xl mx-auto px-4 py-6",children:n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Medarbetare"}),n.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[d.length," medarbetare"]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ye,{variant:"outline",onClick:()=>i(!0),className:"rounded-full h-11 px-5",children:[n.jsx(_c,{className:"w-4 h-4 mr-2"}),"Bjud in"]}),n.jsxs(ye,{onClick:()=>s(!0),className:"rounded-full h-11 px-5 shadow-md hover:shadow-lg transition-all",children:[n.jsx(xr,{className:"w-4 h-4 mr-2"}),"Lgg till"]})]})]}),n.jsxs("div",{className:"relative mb-6",children:[n.jsx(uo,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),n.jsx(De,{placeholder:"Sk medarbetare...",value:e,onChange:j=>t(j.target.value),className:"pl-11 h-12 rounded-2xl border-0 bg-white shadow-sm"})]}),n.jsx("div",{className:"space-y-3",children:n.jsx(_a,{mode:"popLayout",children:u?n.jsx("div",{className:"space-y-3",children:[1,2,3].map(j=>n.jsx("div",{className:"bg-white rounded-2xl h-24 animate-pulse"},j))}):g.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(Fr,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Inga medarbetare hittades"})]})}):g.map((j,w)=>{var A,C;const N=h.find(M=>M.email===j.user_email);return n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},transition:{delay:w*.05},children:n.jsx(wr,{to:`${Pn("EmployeeDetails")}?id=${j.id}`,children:n.jsx(ce,{className:"border-0 shadow-sm hover:shadow-md transition-shadow cursor-pointer",children:n.jsx(he,{className:"p-5",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[n.jsx("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center flex-shrink-0",children:n.jsx("span",{className:"text-lg font-semibold text-slate-600",children:((A=N==null?void 0:N.full_name)==null?void 0:A.charAt(0))||((C=j.user_email)==null?void 0:C.charAt(0))})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-semibold text-slate-900 truncate",children:(N==null?void 0:N.full_name)||j.user_email}),n.jsx("p",{className:"text-sm text-slate-500 truncate",children:j.job_title||"Ingen titel"}),n.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-slate-500",children:[n.jsx("span",{children:j.department||"Ingen avdelning"}),j.phone&&n.jsx("span",{children:""}),j.phone&&n.jsx("span",{children:j.phone})]})]})]}),n.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[n.jsx(ye,{variant:"ghost",size:"icon",onClick:M=>{M.preventDefault(),b(j)},className:"h-8 w-8",children:n.jsx(e9,{className:"h-4 w-4"})}),n.jsx(ye,{variant:"ghost",size:"icon",onClick:M=>{M.preventDefault(),y(j)},disabled:x.isPending,className:"h-8 w-8 text-red-500 hover:text-red-600 hover:bg-red-50",children:n.jsx(bi,{className:"h-4 w-4"})}),n.jsx(Ph,{className:"h-8 w-8 text-slate-400 p-2"})]})]})})})})},j.id)})})})]})}),n.jsx(r3e,{open:r,onClose:v,employee:o}),n.jsx(s3e,{open:a,onClose:()=>{i(!1),c.invalidateQueries({queryKey:["users"]})}})]})}const o7=e=>{if(!e||!e.points)return null;try{return JSON.parse(e.points)}catch(t){return console.error("Failed to parse trip GeoJSON:",t),null}};function i3e({vehicles:e}){const[t,r]=P.useState(""),[s,a]=P.useState("today"),[i,o]=P.useState(Ce(sh(new Date,7),"yyyy-MM-dd")),[l,c]=P.useState(Ce(new Date,"yyyy-MM-dd")),[d,u]=P.useState("start_time"),[h,g]=P.useState("desc"),[x,b]=P.useState(null),y=e.filter(z=>z.gps_device_id);P.useEffect(()=>{y.length>0&&!t&&r(y[0].id)},[y,t]);const v=e.find(z=>z.id===t),j=v==null?void 0:v.gps_device_id,{data:w,isLoading:N,error:A}=He({queryKey:["gps-history-trips",j,s,i,l],queryFn:async()=>{if(!j)return{totaltrips:[]};let z,Z;const se=new Date;return s==="today"?(z=new Date(se.setHours(0,0,0,0)),Z=new Date(se.setHours(23,59,59,999))):s==="week"?(z=Fa(se,{weekStartsOn:1}),Z=Pc(se,{weekStartsOn:1})):s==="month"?(z=ri(se),Z=ni(se)):s==="custom"?(z=new Date(i),z.setHours(0,0,0,0),Z=new Date(l),Z.setHours(23,59,59,999)):(z=sh(se,7),z.setHours(0,0,0,0),Z=new Date(se.setHours(23,59,59,999))),(await oe.functions.invoke("gpsTracking",{action:"getTrips",params:{deviceId:j,begintime:Math.floor(z.getTime()/1e3),endtime:Math.floor(Z.getTime()/1e3)}})).data},enabled:!!j,staleTime:300*1e3}),C=(w==null?void 0:w.totaltrips)||[],M=[...C].sort((z,Z)=>{let se,J;switch(d){case"start_time":se=bs(z.begintime||new Date(0).toISOString()).getTime(),J=bs(Z.begintime||new Date(0).toISOString()).getTime();break;case"distance_km":se=z.distance/1e3||0,J=Z.distance/1e3||0;break;case"duration_minutes":se=z.duration/60||0,J=Z.duration/60||0;break;default:return 0}return h==="asc"?se-J:J-se}),I=z=>{d===z?g(h==="asc"?"desc":"asc"):(u(z),g("desc"))},F=({field:z})=>d!==z?n.jsx(U7,{className:"h-3 w-3 ml-1 opacity-50"}):h==="asc"?n.jsx(H7,{className:"h-3 w-3 ml-1"}):n.jsx(V7,{className:"h-3 w-3 ml-1"}),U=z=>{const Z=Math.floor(z/60),se=Math.floor(Z/60),J=Z%60;return se>0?`${se}t ${J}m`:`${Z}m`},W=C.reduce((z,Z)=>z+(Z.distance/1e3||0),0),D=C.reduce((z,Z)=>z+(Z.duration/60||0),0),R=x&&x.beginposition?[x.beginposition.y,x.beginposition.x]:[59.3293,18.0686];return n.jsxs("div",{className:"space-y-4",children:[n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-4 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ve,{className:"text-xs mb-1 block",children:"Fordon"}),n.jsxs(Nt,{value:t,onValueChange:r,children:[n.jsx(jt,{children:n.jsx(kt,{placeholder:"Vlj fordon"})}),n.jsx(wt,{children:y.map(z=>n.jsxs(Ne,{value:z.id,children:[z.registration_number," (",z.make," ",z.model,")"]},z.id))})]})]}),n.jsxs("div",{children:[n.jsx(ve,{className:"text-xs mb-1 block",children:"Period"}),n.jsxs(Nt,{value:s,onValueChange:a,children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"today",children:"Idag"}),n.jsx(Ne,{value:"week",children:"Denna vecka"}),n.jsx(Ne,{value:"month",children:"Denna mnad"}),n.jsx(Ne,{value:"custom",children:"Anpassat intervall"})]})]})]})]}),s==="custom"&&n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ve,{className:"text-xs mb-1 block",children:"Frn datum"}),n.jsx(De,{type:"date",value:i,onChange:z=>o(z.target.value)})]}),n.jsxs("div",{children:[n.jsx(ve,{className:"text-xs mb-1 block",children:"Till datum"}),n.jsx(De,{type:"date",value:l,onChange:z=>c(z.target.value)})]})]})]})}),C.length>0&&n.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-100 flex items-center justify-center",children:n.jsx(q0,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:C.length}),n.jsx("p",{className:"text-xs text-slate-500",children:"Resor"})]})]})})}),n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-emerald-100 flex items-center justify-center",children:n.jsx(Ja,{className:"h-5 w-5 text-emerald-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:W.toFixed(0)}),n.jsx("p",{className:"text-xs text-slate-500",children:"km totalt"})]})]})})}),n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-amber-100 flex items-center justify-center",children:n.jsx(Vt,{className:"h-5 w-5 text-amber-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:Math.round(D)}),n.jsx("p",{className:"text-xs text-slate-500",children:"min totalt"})]})]})})})]}),!j&&n.jsx(ce,{className:"border-0 shadow-sm bg-blue-50 border-l-4 border-l-blue-500",children:n.jsxs(he,{className:"p-4 flex items-center gap-3",children:[n.jsx(Fn,{className:"h-8 w-8 text-blue-600"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-blue-900",children:"Inget GPS-ID kopplat"}),n.jsx("p",{className:"text-sm text-blue-700",children:"Vlj ett fordon med ett kopplat GPS Device ID fr att se historik."})]})]})}),N?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(Ot,{className:"h-12 w-12 animate-spin text-slate-400 mx-auto"}),n.jsx("p",{className:"text-sm text-slate-500 mt-4",children:"Hmtar resor..."})]})}):A?n.jsx(ce,{className:"border-0 shadow-sm bg-rose-50 border-l-4 border-l-rose-500",children:n.jsxs(he,{className:"p-4 flex items-center gap-3",children:[n.jsx(Fn,{className:"h-8 w-8 text-rose-600"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-rose-900",children:"Kunde inte hmta resor"}),n.jsx("p",{className:"text-sm text-rose-700",children:A.message||"Ett oknt fel uppstod vid hmtning av resor."})]})]})}):M.length===0&&j?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(q0,{className:"h-12 w-12 text-slate-300 mx-auto mb-2"}),n.jsx("p",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Inga resor hittades"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Inga resor hittades fr det valda fordonet under den valda perioden."})]})}):j&&n.jsxs("div",{className:"space-y-4",children:[x&&n.jsxs(ce,{className:"border-0 shadow-sm overflow-hidden",children:[n.jsxs(At,{className:"flex-row items-center justify-between pb-3",children:[n.jsxs("div",{children:[n.jsx(Ct,{className:"text-base",children:"Vald resa"}),n.jsxs(cd,{className:"text-xs",children:[Ce(bs(x.begintime),"dd MMM HH:mm",{locale:ut})," - ",Ce(bs(x.endtime),"HH:mm",{locale:ut})]})]}),n.jsx(ye,{variant:"outline",size:"sm",onClick:()=>b(null),children:"Stng"})]}),n.jsx("div",{className:"h-[400px] w-full",children:n.jsxs(Pg,{center:R,zoom:13,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[n.jsx(Ag,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),o7(x)&&n.jsx(sfe,{positions:o7(x).coordinates.map(z=>[z[1],z[0]]),color:"#3B82F6",weight:4}),x.beginposition&&n.jsx(Hm,{position:[x.beginposition.y,x.beginposition.x],children:n.jsx(Wm,{children:n.jsxs("div",{className:"text-sm",children:[n.jsx("p",{className:"font-semibold",children:"Start"}),n.jsx("p",{className:"text-xs",children:x.beginaddress||"Oknd plats"})]})})}),x.endposition&&n.jsx(Hm,{position:[x.endposition.y,x.endposition.x],children:n.jsx(Wm,{children:n.jsxs("div",{className:"text-sm",children:[n.jsx("p",{className:"font-semibold",children:"Slut"}),n.jsx("p",{className:"text-xs",children:x.endaddress||"Oknd plats"})]})})})]})})]}),n.jsx(ce,{className:"border-0 shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(Aw,{children:[n.jsx(Cw,{children:n.jsxs(ep,{className:"bg-slate-50",children:[n.jsx(xa,{className:"cursor-pointer",onClick:()=>I("start_time"),children:n.jsxs("div",{className:"flex items-center",children:["Datum & Tid ",n.jsx(F,{field:"start_time"})]})}),n.jsx(xa,{children:"Start"}),n.jsx(xa,{children:"Slut"}),n.jsx(xa,{className:"cursor-pointer text-right",onClick:()=>I("distance_km"),children:n.jsxs("div",{className:"flex items-center justify-end",children:["Distans ",n.jsx(F,{field:"distance_km"})]})}),n.jsx(xa,{className:"cursor-pointer text-right",onClick:()=>I("duration_minutes"),children:n.jsxs("div",{className:"flex items-center justify-end",children:["Tid ",n.jsx(F,{field:"duration_minutes"})]})}),n.jsx(xa,{className:"text-right",children:"tgrd"})]})}),n.jsx(Tw,{children:M.map((z,Z)=>n.jsxs(ep,{className:"hover:bg-slate-50",children:[n.jsxs(ga,{className:"font-medium",children:[n.jsx("div",{className:"text-sm",children:Ce(bs(z.begintime),"dd MMM yyyy",{locale:ut})}),n.jsxs("div",{className:"text-xs text-slate-500",children:[Ce(bs(z.begintime),"HH:mm",{locale:ut})," - ",Ce(bs(z.endtime),"HH:mm",{locale:ut})]})]}),n.jsx(ga,{className:"text-sm max-w-[150px] truncate",title:z.beginaddress||"Oknd plats",children:z.beginaddress||"Oknd plats"}),n.jsx(ga,{className:"text-sm max-w-[150px] truncate",title:z.endaddress||"Oknd plats",children:z.endaddress||"Oknd plats"}),n.jsxs(ga,{className:"text-right text-sm font-medium",children:[(z.distance/1e3).toFixed(1)," km"]}),n.jsx(ga,{className:"text-right text-sm",children:U(z.duration)}),n.jsx(ga,{className:"text-right",children:n.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>b(z),children:"Visa rutt"})})]},Z))})]})})})]})]})}delete Ff.Icon.Default.prototype._getIconUrl;Ff.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function o3e(){var j;const[e,t]=P.useState("live"),[r,s]=P.useState("week"),{data:a=[]}=He({queryKey:["vehicles"],queryFn:()=>oe.entities.Vehicle.list()}),{data:i,isLoading:o,error:l}=He({queryKey:["gps-devices"],queryFn:async()=>{var N,A,C;const w=await oe.functions.invoke("gpsTracking",{action:"getDeviceList",params:{}});if((N=w.data)!=null&&N.error)throw new Error(w.data.error);if(((A=w.data)==null?void 0:A.status)!==0)throw new Error(((C=w.data)==null?void 0:C.cause)||"Kunde inte hmta GPS-enheter");return w.data},retry:3,retryDelay:w=>Math.min(2e3*2**w,3e4),staleTime:6e4}),c=((j=i==null?void 0:i.groups)==null?void 0:j.flatMap(w=>w.devices||[]))||[],d=a.filter(w=>w.gps_device_id),{data:u,isLoading:h}=He({queryKey:["gps-all-positions",c],queryFn:async()=>{if(c.length===0)return null;const w=c.map(A=>A.deviceid);return(await oe.functions.invoke("gpsTracking",{action:"getLastPosition",params:{deviceIds:w}})).data},enabled:c.length>0&&(e==="live"||e==="register"),refetchInterval:3e4,retry:3,retryDelay:w=>Math.min(1e3*2**w,3e4)}),{data:g,isLoading:x}=He({queryKey:["gps-latest-trips",c,r],queryFn:async()=>{if(c.length===0)return null;const w=new Date,N=r==="week"?sh(w,7):sh(w,30),A=c.map(M=>oe.functions.invoke("gpsTracking",{action:"getTrips",params:{deviceId:M.deviceid,begintime:Math.floor(N.getTime()/1e3),endtime:Math.floor(w.getTime()/1e3)}}).catch(I=>(console.error(`Failed to fetch trips for device ${M.deviceid}:`,I),{data:{totaltrips:[]}})));return(await Promise.all(A)).map((M,I)=>{const F=M.data.totaltrips||[],U={};F.forEach(R=>{const z=Ce(new Date(R.begintime*1e3),"yyyy-MM-dd");U[z]||(U[z]=[]),U[z].push(R)});const D=Object.values(U).map(R=>R.sort((z,Z)=>Z.begintime-z.begintime)[0]).sort((R,z)=>z.begintime-R.begintime);return{deviceId:c[I].deviceid,deviceName:c[I].devicename,data:{...M.data,totaltrips:D,totaldistance:D.reduce((R,z)=>R+(z.distance||0),0),totaltriptime:D.reduce((R,z)=>R+(z.duration||0),0)}}})},enabled:c.length>0&&(e==="live"||e==="register"),refetchInterval:6e4});if(o)return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white p-6 pb-24",children:n.jsxs("div",{className:"max-w-2xl mx-auto",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-6",children:"GPS Sprning"}),n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(Ot,{className:"h-12 w-12 animate-spin text-slate-400 mx-auto"}),n.jsx("p",{className:"text-sm text-slate-500 mt-4",children:"Hmtar GPS-enheter..."})]})})]})});if(l)return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white p-6 pb-24",children:n.jsxs("div",{className:"max-w-2xl mx-auto",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-6",children:"GPS Sprning"}),n.jsx(ce,{className:"border-0 shadow-sm bg-rose-50 border-l-4 border-l-rose-500",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(Fn,{className:"h-16 w-16 text-rose-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-rose-900 mb-2",children:"Kunde inte hmta GPS-enheter"}),n.jsx("p",{className:"text-rose-700 text-sm mb-2",children:l.message||"Ett oknt fel uppstod"}),n.jsx("p",{className:"text-slate-600 text-xs mt-4",children:"Kontrollera att GPS-inloggningsuppgifter r korrekta i instllningarna."})]})})]})});if(!i||c.length===0)return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white p-6 pb-24",children:n.jsxs("div",{className:"max-w-2xl mx-auto",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-6",children:"GPS Sprning"}),n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(Fn,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Inga GPS-enheter hittades"}),n.jsx("p",{className:"text-slate-500 text-sm mb-2",children:"Kontrollera att dina GPS-enheter r kopplade till ditt konto."}),i&&n.jsxs("p",{className:"text-xs text-slate-400 mt-4",children:["API-svar: ",JSON.stringify(i).substring(0,100),"..."]})]})})]})});const b=(u==null?void 0:u.records)||[],y=b[0]?[b[0].callat,b[0].callon]:[59.3293,18.0686],v=w=>{const N=w*3.6;return N>5?"kr":N>0?"lngsamt":"parkerad"};return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pb-24",children:n.jsx("div",{className:"max-w-2xl mx-auto px-4 py-6",children:n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"GPS Sprning"}),n.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[d.length," fordon med GPS live"]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(wr,{to:Pn("AllVehicles"),children:n.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white text-slate-700 border border-slate-200 rounded-xl text-sm font-medium hover:bg-slate-50 transition-colors",children:[n.jsx(us,{className:"h-4 w-4"}),"Alla fordon"]})}),n.jsx(wr,{to:Pn("DrivingJournal"),children:n.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-xl text-sm font-medium hover:bg-slate-800 transition-colors",children:[n.jsx(q0,{className:"h-4 w-4"}),"Krjournal"]})})]})]}),n.jsx(Ls,{value:e,onValueChange:t,className:"mb-4",children:n.jsxs(As,{className:"w-full bg-white shadow-sm grid grid-cols-3",children:[n.jsxs(gt,{value:"live",children:[n.jsx(Ja,{className:"h-4 w-4 mr-2"}),"Live"]}),n.jsxs(gt,{value:"register",children:[n.jsx(q0,{className:"h-4 w-4 mr-2"}),"Registrera"]}),n.jsxs(gt,{value:"history",children:[n.jsx(Y7,{className:"h-4 w-4 mr-2"}),"Historik"]})]})}),e==="history"?n.jsx(i3e,{vehicles:a}):e==="register"?n.jsx(QK,{vehicles:a}):n.jsxs(n.Fragment,{children:[n.jsx(jPe,{positions:b,vehicles:d}),n.jsxs("div",{className:"flex gap-2 mb-4",children:[n.jsx("button",{onClick:()=>s("week"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r==="week"?"bg-slate-900 text-white":"bg-white text-slate-700 border border-slate-200 hover:bg-slate-50"}`,children:"Senaste veckan"}),n.jsx("button",{onClick:()=>s("month"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r==="month"?"bg-slate-900 text-white":"bg-white text-slate-700 border border-slate-200 hover:bg-slate-50"}`,children:"Senaste mnaden"})]}),n.jsx(ce,{className:"border-0 shadow-sm overflow-hidden mb-6",children:n.jsx("div",{className:"h-[500px]",children:h?n.jsx("div",{className:"h-full flex items-center justify-center bg-slate-50",children:n.jsx(Ot,{className:"h-8 w-8 animate-spin text-slate-400"})}):b.length>0?n.jsxs(Pg,{center:y,zoom:12,style:{height:"100%",width:"100%"},scrollWheelZoom:!1,dragging:!0,touchZoom:!0,children:[n.jsx(Ag,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),b.map(w=>{const N=d.find(I=>I.gps_device_id===w.deviceid),A=c.find(I=>I.deviceid===w.deviceid),C=(N==null?void 0:N.registration_number)||(A==null?void 0:A.devicename)||w.deviceid,M=v(w.speed);return n.jsxs(Hm,{position:[w.callat,w.callon],children:[n.jsx(QV,{permanent:!0,direction:"top",offset:[0,-20],children:n.jsxs("div",{className:"font-semibold text-xs flex items-center gap-1",children:[n.jsx(qb,{status:M}),C]})}),n.jsx(Wm,{children:n.jsxs("div",{className:"min-w-[200px]",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("div",{className:"h-8 w-8 rounded-lg bg-slate-100 flex items-center justify-center",children:n.jsx(us,{className:"h-4 w-4 text-slate-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-base",children:(N==null?void 0:N.registration_number)||(A==null?void 0:A.devicename)||w.deviceid}),N&&n.jsxs("p",{className:"text-xs text-slate-500",children:[N.make," ",N.model]}),(N==null?void 0:N.assigned_driver)&&n.jsxs("p",{className:"text-xs text-slate-500",children:["Frare: ",N.assigned_driver]})]})]}),n.jsxs("div",{className:"space-y-1 mb-2 py-2 border-t border-slate-100",children:[n.jsxs("p",{className:"text-sm text-slate-600 flex items-center gap-1",children:[n.jsx(gf,{className:"h-3 w-3"}),n.jsxs("span",{className:"font-medium",children:[Math.round(w.speed*3.6)," km/h"]}),n.jsx(qb,{status:M})]}),n.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[n.jsx(Vt,{className:"h-3 w-3"}),w.posiTime?Ce(new Date(w.posiTime*1e3),"PPp",{locale:ut}):"Ingen tid"]})]}),N&&n.jsx(wr,{to:Pn("VehicleTracking")+`?id=${N.id}`,children:n.jsx("button",{className:"w-full text-sm bg-slate-900 text-white px-3 py-1.5 rounded-lg hover:bg-slate-800 transition-colors",children:"Visa fordonsdetaljer "})})]})})]},w.deviceid)})]}):n.jsx("div",{className:"h-full flex items-center justify-center bg-slate-50",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Fn,{className:"h-12 w-12 text-slate-300 mx-auto mb-2"}),n.jsx("p",{className:"text-slate-500",children:"Ingen position tillgnglig"})]})})})}),x?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-12 text-center",children:n.jsx(Ot,{className:"h-12 w-12 animate-spin text-slate-400 mx-auto"})})}):n.jsx("div",{className:"space-y-3",children:g==null?void 0:g.map(w=>{var D,R;const N=d.find(z=>z.gps_device_id===w.deviceId),A=b.find(z=>z.deviceid===w.deviceId),C=A?v(A.speed):"oknd";if(!((R=(D=w==null?void 0:w.data)==null?void 0:D.totaltrips)!=null&&R.length))return null;const M=(w.data.totaldistance||0)/1e3,I=(w.data.totaltriptime||0)/(1e3*60),F=w.data.totaltrips.length,U=(N==null?void 0:N.registration_number)||w.deviceName||w.deviceId,W=N?`${N.make} ${N.model}`:"GPS Enhet";return n.jsx(ce,{className:"border-0 shadow-sm hover:shadow-md transition-shadow",children:n.jsxs(he,{className:"p-5",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:U}),A&&n.jsx(qb,{status:C})]}),n.jsx("p",{className:"text-xs text-slate-500",children:W})]}),n.jsxs(it,{variant:"outline",className:"bg-emerald-50 text-emerald-700 border-emerald-200",children:[F," ",F===1?"dag":"dagar"]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ja,{className:"h-4 w-4 text-slate-400"}),n.jsxs("span",{className:"text-slate-600",children:[M.toFixed(1)," km"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vt,{className:"h-4 w-4 text-slate-400"}),n.jsxs("span",{className:"text-slate-600",children:[Math.round(I)," min"]})]})]}),n.jsx("div",{className:"border-t border-slate-100 pt-3 space-y-1",children:w.data.totaltrips.slice(0,3).map((z,Z)=>n.jsxs("div",{className:"flex items-center justify-between text-xs",children:[n.jsx("span",{className:"text-slate-500",children:Ce(new Date(z.begintime*1e3),"EEE d MMM",{locale:ut})}),n.jsxs("span",{className:"text-slate-700 font-medium",children:[((z.distance||0)/1e3).toFixed(1)," km"]})]},Z))}),N&&n.jsx(wr,{to:Pn("VehicleTracking")+`?id=${N.id}`,className:"block mt-3",children:n.jsx("button",{className:"text-xs text-blue-600 hover:underline",children:"Visa fordonsdetaljer "})})]})},w.deviceId)})})]})]})})})}delete Ff.Icon.Default.prototype._getIconUrl;Ff.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function l3e({onLocationSelect:e}){return nfe({click:t=>{e(t.latlng)}}),null}function c3e(){const[e,t]=P.useState(!1),[r,s]=P.useState({name:"",type:"kontor",latitude:59.3293,longitude:18.0686,radius_meters:200,auto_classify_as:null,default_project_code:"",default_customer:"",address:"",notes:"",is_active:!0}),a=$n(),{data:i=[],isLoading:o}=He({queryKey:["geofences"],queryFn:()=>oe.entities.Geofence.list()}),l=Xt({mutationFn:h=>oe.entities.Geofence.create(h),onSuccess:()=>{a.invalidateQueries({queryKey:["geofences"]}),t(!1),s({name:"",type:"kontor",latitude:59.3293,longitude:18.0686,radius_meters:200,auto_classify_as:null,default_project_code:"",default_customer:"",address:"",notes:"",is_active:!0})}}),c=Xt({mutationFn:h=>oe.entities.Geofence.delete(h),onSuccess:()=>{a.invalidateQueries({queryKey:["geofences"]})}}),d=h=>{s(g=>({...g,latitude:h.lat,longitude:h.lng}))},u=()=>{const h={...r};h.auto_classify_as||delete h.auto_classify_as,h.default_project_code||delete h.default_project_code,h.default_customer||delete h.default_customer,h.address||delete h.address,h.notes||delete h.notes,l.mutate(h)};return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pb-24",children:n.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[n.jsx(wr,{to:Pn("Admin"),children:n.jsxs(ye,{variant:"ghost",size:"sm",className:"mb-4 -ml-2",children:[n.jsx(xu,{className:"h-4 w-4 mr-2"}),"Tillbaka"]})}),n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Geofencing"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Definiera platser fr automatisk klassificering av resor"})]}),n.jsxs(ye,{onClick:()=>t(!0),disabled:e,children:[n.jsx(xr,{className:"h-4 w-4 mr-2"}),"Ny plats"]})]}),e&&n.jsxs(ce,{className:"border-0 shadow-sm mb-6",children:[n.jsx(At,{children:n.jsx(Ct,{className:"text-lg",children:"Skapa ny geofence"})}),n.jsxs(he,{className:"space-y-4",children:[n.jsx("div",{className:"h-64 rounded-lg overflow-hidden border border-slate-200",children:n.jsxs(Pg,{center:[r.latitude,r.longitude],zoom:13,style:{height:"100%",width:"100%"},children:[n.jsx(Ag,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),n.jsx(l3e,{onLocationSelect:d}),n.jsx(Hm,{position:[r.latitude,r.longitude]}),n.jsx(XV,{center:[r.latitude,r.longitude],radius:r.radius_meters,pathOptions:{color:"blue",fillColor:"blue",fillOpacity:.2}})]})}),n.jsx("p",{className:"text-xs text-slate-500",children:"Klicka p kartan fr att vlja plats"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(ve,{children:"Namn"}),n.jsx(De,{value:r.name,onChange:h=>s({...r,name:h.target.value}),placeholder:"t.ex. Huvudkontoret"})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Typ"}),n.jsxs(Nt,{value:r.type,onValueChange:h=>s({...r,type:h}),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"kontor",children:"Kontor"}),n.jsx(Ne,{value:"kundplats",children:"Kundplats"}),n.jsx(Ne,{value:"lager",children:"Lager"}),n.jsx(Ne,{value:"verkstad",children:"Verkstad"}),n.jsx(Ne,{value:"vrigt",children:"vrigt"})]})]})]})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Radie (meter)"}),n.jsx(De,{type:"number",value:r.radius_meters,onChange:h=>s({...r,radius_meters:parseInt(h.target.value)})})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Automatisk klassificering"}),n.jsxs(Nt,{value:r.auto_classify_as||"none",onValueChange:h=>s({...r,auto_classify_as:h==="none"?null:h}),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"none",children:"Ingen"}),n.jsx(Ne,{value:"tjnst",children:"Tjnsteresa"}),n.jsx(Ne,{value:"privat",children:"Privat resa"})]})]})]}),r.auto_classify_as==="tjnst"&&n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(ve,{children:"Standard projektkod"}),n.jsx(De,{value:r.default_project_code,onChange:h=>s({...r,default_project_code:h.target.value}),placeholder:"P-123"})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Standard kund"}),n.jsx(De,{value:r.default_customer,onChange:h=>s({...r,default_customer:h.target.value}),placeholder:"Kundnamn"})]})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Adress"}),n.jsx(De,{value:r.address,onChange:h=>s({...r,address:h.target.value}),placeholder:"Gatuadress"})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsxs(ye,{onClick:u,disabled:!r.name||l.isPending,children:[n.jsx(og,{className:"h-4 w-4 mr-2"}),"Spara"]}),n.jsx(ye,{variant:"outline",onClick:()=>t(!1),children:"Avbryt"})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[i.map(h=>n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-5",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(MX,{className:"h-5 w-5 text-slate-600"}),n.jsx("h3",{className:"font-semibold text-slate-900",children:h.name}),n.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-slate-100 text-slate-600 capitalize",children:h.type})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-slate-600",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-slate-500",children:"Radie:"})," ",h.radius_meters,"m"]}),h.auto_classify_as&&n.jsxs("div",{children:[n.jsx("span",{className:"text-slate-500",children:"Auto:"})," ",h.auto_classify_as]}),h.default_project_code&&n.jsxs("div",{children:[n.jsx("span",{className:"text-slate-500",children:"Projekt:"})," ",h.default_project_code]}),h.address&&n.jsxs("div",{className:"col-span-2",children:[n.jsx("span",{className:"text-slate-500",children:"Adress:"})," ",h.address]})]})]}),n.jsx(ye,{size:"sm",variant:"ghost",onClick:()=>c.mutate(h.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:n.jsx(bi,{className:"h-4 w-4"})})]})})},h.id)),i.length===0&&!e&&n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(Fn,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Inga platser definierade nnu"}),n.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Skapa geofences fr att automatiskt klassificera resor"})]})})]})]})})})}const d3e={ledning:"bg-indigo-100 text-indigo-700 border-indigo-200",hr:"bg-emerald-100 text-emerald-700 border-emerald-200",event:"bg-amber-100 text-amber-700 border-amber-200",allmnt:"bg-slate-100 text-slate-700 border-slate-200"},u3e={ledning:"Ledning",hr:"HR",event:"Event",allmnt:"Allmnt"};function h3e({post:e,onReact:t,onComment:r,onAcknowledge:s,currentUserEmail:a}){var g,x,b,y,v,j,w;const i=e.reactions||{likes:[],hearts:[],celebrates:[]},o=e.comments||[],l=(g=i.likes)==null?void 0:g.includes(a),c=(x=i.hearts)==null?void 0:x.includes(a),d=(b=i.celebrates)==null?void 0:b.includes(a),u=(y=e.acknowledged_by)==null?void 0:y.some(N=>N.email===a),h=e.requires_acknowledgment&&!u;return n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:n.jsxs(ce,{className:`overflow-hidden border-0 shadow-sm hover:shadow-md transition-all duration-300 ${h?"ring-2 ring-blue-400":e.is_important?"ring-2 ring-amber-400 bg-amber-50/30":"bg-white"}`,children:[h&&n.jsx("div",{className:"bg-blue-50 border-b-2 border-blue-200 p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(ti,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-semibold text-blue-900 mb-1",children:"Bekrftelse krvs"}),n.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"Denna nyhet krver att du bekrftar att du har lst innehllet."}),n.jsxs(ye,{onClick:()=>s(e.id),size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[n.jsx(ti,{className:"h-4 w-4 mr-2"}),"Jag har lst och frsttt"]})]})]})}),n.jsxs("div",{className:h?"blur-sm pointer-events-none select-none":"",children:[e.image_url&&n.jsx("div",{className:"h-48 overflow-hidden",children:n.jsx("img",{src:e.image_url,alt:e.title,className:"w-full h-full object-cover"})}),n.jsxs(At,{className:"pb-3",children:[n.jsx("div",{className:"flex items-start justify-between gap-3",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[n.jsx(it,{variant:"secondary",className:`${d3e[e.category]} border text-xs font-medium`,children:u3e[e.category]}),e.is_important&&n.jsxs(it,{className:"bg-amber-500 text-white border-0 text-xs",children:[n.jsx(Kr,{className:"w-3 h-3 mr-1"}),"Viktigt"]}),e.requires_acknowledgment&&n.jsxs(it,{variant:"outline",className:"border-blue-300 text-blue-700 text-xs",children:[n.jsx(ti,{className:"w-3 h-3 mr-1"}),"Krver bekrftelse"]})]}),n.jsx("h3",{className:"font-semibold text-lg text-slate-900 leading-tight",children:e.title})]})}),n.jsx("div",{className:"flex items-center gap-2 mt-2 text-xs text-slate-500",children:n.jsx("span",{children:Ce(new Date(e.created_date),"d MMM yyyy 'kl' HH:mm",{locale:ut})})})]}),n.jsxs(he,{className:"pt-0",children:[n.jsx("p",{className:"text-slate-600 text-sm leading-relaxed whitespace-pre-wrap",children:e.content}),n.jsxs("div",{className:"flex items-center justify-between mt-5 pt-4 border-t border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs(ye,{variant:"ghost",size:"sm",onClick:()=>t(e.id,"likes"),className:`h-9 px-3 rounded-full transition-all ${l?"bg-blue-100 text-blue-600":"hover:bg-slate-100 text-slate-500"}`,children:[n.jsx(n9,{className:`w-4 h-4 mr-1.5 ${l?"fill-current":""}`}),n.jsx("span",{className:"text-xs font-medium",children:((v=i.likes)==null?void 0:v.length)||0})]}),n.jsxs(ye,{variant:"ghost",size:"sm",onClick:()=>t(e.id,"hearts"),className:`h-9 px-3 rounded-full transition-all ${c?"bg-rose-100 text-rose-500":"hover:bg-slate-100 text-slate-500"}`,children:[n.jsx(t3,{className:`w-4 h-4 mr-1.5 ${c?"fill-current":""}`}),n.jsx("span",{className:"text-xs font-medium",children:((j=i.hearts)==null?void 0:j.length)||0})]}),n.jsxs(ye,{variant:"ghost",size:"sm",onClick:()=>t(e.id,"celebrates"),className:`h-9 px-3 rounded-full transition-all ${d?"bg-amber-100 text-amber-600":"hover:bg-slate-100 text-slate-500"}`,children:[n.jsx(J7,{className:`w-4 h-4 mr-1.5 ${d?"fill-current":""}`}),n.jsx("span",{className:"text-xs font-medium",children:((w=i.celebrates)==null?void 0:w.length)||0})]})]}),n.jsxs(ye,{variant:"ghost",size:"sm",onClick:()=>r(e),className:"h-9 px-3 rounded-full hover:bg-slate-100 text-slate-500",children:[n.jsx(Vv,{className:"w-4 h-4 mr-1.5"}),n.jsx("span",{className:"text-xs font-medium",children:o.length})]})]})]})]})]})})}function f3e({open:e,onClose:t,onSuccess:r}){const[s,a]=P.useState(!1),[i,o]=P.useState(!1),[l,c]=P.useState({title:"",content:"",category:"allmnt",is_important:!1,requires_acknowledgment:!1,image_url:""}),d=async h=>{const g=h.target.files[0];if(g){o(!0);try{const{file_url:x}=await oe.integrations.Core.UploadFile({file:g});c(b=>({...b,image_url:x}))}catch(x){console.error("Upload failed:",x)}o(!1)}},u=async h=>{h.preventDefault(),a(!0);try{await oe.entities.NewsPost.create({...l,reactions:{likes:[],hearts:[],celebrates:[]},comments:[]}),r(),t(),c({title:"",content:"",category:"allmnt",is_important:!1,requires_acknowledgment:!1,image_url:""})}catch(g){console.error("Error creating post:",g)}a(!1)};return n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"sm:max-w-lg",children:[n.jsx(er,{children:n.jsx(tr,{className:"text-xl font-semibold",children:"Skapa nyhet"})}),n.jsxs("form",{onSubmit:u,className:"space-y-5 mt-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"title",children:"Rubrik"}),n.jsx(De,{id:"title",value:l.title,onChange:h=>c(g=>({...g,title:h.target.value})),placeholder:"Ange rubrik...",className:"h-11",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"content",children:"Innehll"}),n.jsx(Zn,{id:"content",value:l.content,onChange:h=>c(g=>({...g,content:h.target.value})),placeholder:"Skriv ditt meddelande...",className:"min-h-[120px] resize-none",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Kategori"}),n.jsxs(Nt,{value:l.category,onValueChange:h=>c(g=>({...g,category:h})),children:[n.jsx(jt,{className:"h-11",children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"allmnt",children:"Allmnt"}),n.jsx(Ne,{value:"ledning",children:"Ledning"}),n.jsx(Ne,{value:"hr",children:"HR"}),n.jsx(Ne,{value:"event",children:"Event"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Bild"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"file",accept:"image/*",onChange:d,className:"hidden",id:"image-upload"}),l.image_url?n.jsxs("div",{className:"relative h-11 rounded-lg border overflow-hidden bg-slate-50",children:[n.jsx("img",{src:l.image_url,alt:"",className:"h-full w-full object-cover"}),n.jsx(ye,{type:"button",variant:"ghost",size:"icon",className:"absolute top-0.5 right-0.5 h-6 w-6 bg-white/80 hover:bg-white",onClick:()=>c(h=>({...h,image_url:""})),children:n.jsx(Ra,{className:"h-3 w-3"})})]}):n.jsx("label",{htmlFor:"image-upload",className:"flex items-center justify-center h-11 border-2 border-dashed rounded-lg cursor-pointer hover:border-slate-400 transition-colors",children:i?n.jsx(Ot,{className:"w-4 h-4 animate-spin text-slate-400"}):n.jsx(bX,{className:"w-4 h-4 text-slate-400"})})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 bg-amber-50 rounded-lg border border-amber-200",children:[n.jsxs("div",{children:[n.jsx(ve,{htmlFor:"important",className:"text-amber-800 font-medium",children:"Markera som viktig"}),n.jsx("p",{className:"text-xs text-amber-600 mt-0.5",children:"Visas med markering hgst upp"})]}),n.jsx(Io,{id:"important",checked:l.is_important,onCheckedChange:h=>c(g=>({...g,is_important:h}))})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg border border-blue-200",children:[n.jsxs("div",{children:[n.jsx(ve,{htmlFor:"acknowledgment",className:"text-blue-800 font-medium",children:"Krv bekrftelse"}),n.jsx("p",{className:"text-xs text-blue-600 mt-0.5",children:"Anvndare mste godknna att de lst"})]}),n.jsx(Io,{id:"acknowledgment",checked:l.requires_acknowledgment,onCheckedChange:h=>c(g=>({...g,requires_acknowledgment:h}))})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:t,children:"Avbryt"}),n.jsx(ye,{type:"submit",disabled:s,className:"min-w-[100px]",children:s?n.jsx(Ot,{className:"w-4 h-4 animate-spin"}):"Publicera"})]})]})]})})}function m3e({open:e,onClose:t,post:r,onAddComment:s,currentUser:a}){const[i,o]=P.useState(""),[l,c]=P.useState(!1);if(!r)return null;const d=r.comments||[],u=g=>g?g.split(" ").map(x=>x[0]).join("").toUpperCase().slice(0,2):"?",h=async g=>{g.preventDefault(),i.trim()&&(c(!0),await s(r.id,i),o(""),c(!1))};return n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"sm:max-w-lg max-h-[80vh] flex flex-col",children:[n.jsx(er,{children:n.jsx(tr,{className:"text-lg font-semibold pr-8 line-clamp-2",children:r.title})}),n.jsx("div",{className:"flex-1 overflow-y-auto min-h-[200px] py-4 space-y-4",children:n.jsx(_a,{mode:"popLayout",children:d.length===0?n.jsxs("div",{className:"text-center py-8 text-slate-400",children:[n.jsx("p",{children:"Inga kommentarer nnu"}),n.jsx("p",{className:"text-sm mt-1",children:"Bli frst att kommentera!"})]}):d.map((g,x)=>n.jsxs(tt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex gap-3",children:[n.jsx(Vf,{className:"h-8 w-8 flex-shrink-0",children:n.jsx(Uf,{className:"bg-slate-100 text-slate-600 text-xs",children:u(g.author_name)})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"bg-slate-50 rounded-2xl rounded-tl-sm px-4 py-2.5",children:[n.jsx("p",{className:"text-xs font-medium text-slate-700",children:g.author_name}),n.jsx("p",{className:"text-sm text-slate-600 mt-0.5",children:g.content})]}),n.jsx("p",{className:"text-xs text-slate-400 mt-1 ml-2",children:Ce(new Date(g.created_at),"d MMM 'kl' HH:mm",{locale:ut})})]})]},g.id||x))})}),n.jsxs("form",{onSubmit:h,className:"flex gap-2 pt-4 border-t",children:[n.jsx(De,{value:i,onChange:g=>o(g.target.value),placeholder:"Skriv en kommentar...",className:"flex-1 h-11 rounded-full px-4"}),n.jsx(ye,{type:"submit",size:"icon",className:"h-11 w-11 rounded-full",disabled:!i.trim()||l,children:n.jsx(Fm,{className:"h-4 w-4"})})]})]})})}const l7={ledning:"bg-purple-100 text-purple-700",hr:"bg-blue-100 text-blue-700",event:"bg-pink-100 text-pink-700",allmnt:"bg-slate-100 text-slate-700"},p3e={ledning:"Ledning",hr:"HR",event:"Event",allmnt:"Allmnt"},x3e={likes:n9,hearts:t3,celebrates:J7};function g3e({open:e,onClose:t,post:r,onReact:s,onAcknowledge:a,currentUserEmail:i,onComment:o}){var d,u,h;if(!r)return null;const l=(d=r.acknowledged_by)==null?void 0:d.some(g=>g.email===i),c=r.requires_acknowledgment;return n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(er,{children:n.jsxs("div",{className:"space-y-3",children:[r.is_important&&n.jsx(it,{className:"bg-amber-100 text-amber-700 w-fit",children:" Viktigt meddelande"}),n.jsx(tr,{className:"text-2xl font-bold leading-tight",children:r.title}),n.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-500",children:[n.jsx(it,{className:l7[r.category]||l7.allmnt,children:p3e[r.category]||"Allmnt"}),n.jsx("span",{children:""}),n.jsx("span",{children:Ce(new Date(r.created_date),"d MMMM yyyy",{locale:ut})})]})]})}),n.jsxs("div",{className:"space-y-4 mt-4",children:[r.image_url&&n.jsx("img",{src:r.image_url,alt:r.title,className:"w-full rounded-lg object-cover max-h-96"}),n.jsx("div",{className:"prose prose-sm max-w-none",children:n.jsx("p",{className:"text-slate-700 whitespace-pre-wrap leading-relaxed",children:r.content})}),n.jsxs("div",{className:"flex items-center gap-4 pt-4 border-t",children:[Object.entries(x3e).map(([g,x])=>{var v,j,w,N;const b=((j=(v=r.reactions)==null?void 0:v[g])==null?void 0:j.length)||0,y=(N=(w=r.reactions)==null?void 0:w[g])==null?void 0:N.includes(i);return n.jsxs("button",{onClick:()=>s(r.id,g),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-all ${y?"bg-blue-100 text-blue-600":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[n.jsx(x,{className:"h-4 w-4"}),b>0&&n.jsx("span",{className:"text-sm font-medium",children:b})]},g)}),n.jsxs("button",{onClick:()=>o(r),className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-slate-100 text-slate-600 hover:bg-slate-200 transition-all ml-auto",children:[n.jsx(Vv,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm font-medium",children:((u=r.comments)==null?void 0:u.length)||0})]})]}),c&&n.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:l?n.jsxs("div",{className:"flex items-center gap-2 text-emerald-700",children:[n.jsx(ti,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Du har bekrftat att du lst detta"})]}):n.jsxs("div",{className:"space-y-3",children:[n.jsx("p",{className:"text-sm text-amber-800 font-medium",children:"Detta meddelande krver att du bekrftar att du lst och frsttt innehllet."}),n.jsx(ye,{onClick:()=>{a(r.id),t()},className:"w-full bg-amber-600 hover:bg-amber-700",children:"Bekrfta att jag lst detta"})]})}),((h=r.comments)==null?void 0:h.length)>0&&n.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[n.jsxs("p",{className:"text-sm font-medium text-slate-700",children:["Senaste kommentarer (",r.comments.length,")"]}),r.comments.slice(-3).map((g,x)=>n.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("span",{className:"text-xs font-medium text-slate-900",children:g.author_name}),n.jsx("span",{className:"text-xs text-slate-500",children:Ce(new Date(g.created_at),"d MMM HH:mm",{locale:ut})})]}),n.jsx("p",{className:"text-sm text-slate-600",children:g.content})]},x)),r.comments.length>3&&n.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>o(r),className:"w-full",children:"Visa alla kommentarer"})]})]})]})})}function v3e(e){const t="=".repeat((4-e.length%4)%4),r=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),s=window.atob(r),a=new Uint8Array(s.length);for(let i=0;i<s.length;++i)a[i]=s.charCodeAt(i);return a}function y3e({user:e}){const[t,r]=P.useState(!1),[s,a]=P.useState(!1),[i,o]=P.useState(!1),[l,c]=P.useState(!1),[d,u]=P.useState(null),[h,g]=P.useState(!1);P.useEffect(()=>{const N=localStorage.getItem("pushPromptDismissed");o(N==="true");const A=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);g(A);const C="serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window;r(C),C&&e&&(b(),x())},[e]);const x=async()=>{var N;try{const A=await oe.functions.invoke("getVapidPublicKey");(N=A.data)!=null&&N.publicKey&&u(A.data.publicKey)}catch(A){console.error("Error loading VAPID key:",A)}},b=async()=>{try{const A=await(await navigator.serviceWorker.ready).pushManager.getSubscription();a(!!A)}catch(N){console.error("Error checking subscription:",N)}},y=()=>{const N=navigator.userAgent;return N.includes("Chrome")?"Chrome":N.includes("Firefox")?"Firefox":N.includes("Safari")?"Safari":N.includes("Edge")?"Edge":"Other"},v=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"Mobile":"Desktop",j=async()=>{if(!d){alert("Systemet r inte redo n. Vnta ett gonblick och frsk igen.");return}const N=/iPhone|iPad|iPod/.test(navigator.userAgent),A=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;if(N&&!A){alert(`P iOS mste du frst lgga till appen p hemskrmen:

1. Tryck p delningsikonen
2. Vlj "Lgg till p hemskrmen"
3. ppna appen frn hemskrmen
4. Aktivera push-notiser drifrn`);return}c(!0);try{console.log("1. Begr notifikationsbehrighet...");const C=Notification.requestPermission(),M=new Promise((Z,se)=>setTimeout(()=>se(new Error("Timeout - tog fr lng tid")),1e4)),I=await Promise.race([C,M]);if(console.log("2. Behrighet:",I),I!=="granted")throw new Error("Du mste tillta notifikationer");console.log("3. Vntar p service worker...");let F=await navigator.serviceWorker.getRegistration();F||(console.log("Waiting for service worker to be ready..."),F=await navigator.serviceWorker.ready),console.log("4. Service worker redo:",F),console.log("5. Skapar push-prenumeration...");const U=F.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:v3e(d)}),W=new Promise((Z,se)=>setTimeout(()=>se(new Error("Push subscription timeout")),1e4)),D=await Promise.race([U,W]);console.log("6. Prenumeration skapad"),console.log("7. Sparar i databas...");const R=D.getKey("auth"),z=D.getKey("p256dh");await oe.entities.PushSubscription.create({user_email:e==null?void 0:e.email,endpoint:D.endpoint,auth_key:R?btoa(String.fromCharCode.apply(null,new Uint8Array(R))):"",p256dh_key:z?btoa(String.fromCharCode.apply(null,new Uint8Array(z))):"",browser:y(),device_name:v()}),console.log("8. Sparat!"),a(!0),o(!0),localStorage.setItem("pushPromptDismissed","true"),new Notification("Push-notifikationer aktiverade! ",{body:"Du kommer nu att f notifikationer ven nr appen r stngd.",icon:"/icon-192.png"}),alert(" Push-notifikationer aktiverade!")}catch(C){console.error("ERROR:",C),alert(`Fel: ${C.message||"Kunde inte aktivera"}`)}finally{c(!1)}},w=()=>{o(!0),localStorage.setItem("pushPromptDismissed","true")};return!t||s||i||!e||!h?null:n.jsx(Xn,{open:!i&&t&&!s&&e&&h,onOpenChange:w,children:n.jsxs(Yn,{className:"sm:max-w-sm rounded-2xl border-0 shadow-2xl bg-gradient-to-br from-blue-500 to-indigo-600 text-white",children:[n.jsx(er,{children:n.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[n.jsx("div",{className:"h-16 w-16 rounded-2xl bg-white/20 flex items-center justify-center",children:n.jsx(cs,{className:"h-8 w-8"})}),n.jsx(tr,{className:"text-2xl font-bold text-white",children:"Aktivera notifikationer"})]})}),n.jsxs("div",{className:"space-y-4 text-center",children:[n.jsx("p",{className:"text-blue-50 text-sm",children:"Missa aldrig viktiga meddelanden! Aktivera push-notifikationer fr att f uppdateringar direkt p din enhet."}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(ye,{onClick:j,disabled:l||!d,className:"flex-1 bg-white text-blue-600 hover:bg-blue-50 font-semibold",children:l?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-4 w-4 mr-2 animate-spin"}),"Aktiverar..."]}):d?n.jsxs(n.Fragment,{children:[n.jsx(cs,{className:"h-4 w-4 mr-2"}),"Aktivera nu"]}):n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-4 w-4 mr-2 animate-spin"}),"Laddar..."]})}),n.jsx(ye,{onClick:w,variant:"outline",className:"flex-1 text-white border-white/30 hover:bg-white/10 font-semibold",children:"Senare"})]})]})]})})}function b3e({posts:e,onAcknowledge:t,currentUserEmail:r,onViewPost:s}){const[a,i]=P.useState([]);P.useEffect(()=>{const c=localStorage.getItem("dismissedImportantNews");c&&i(JSON.parse(c))},[]);const o=c=>{const d=[...a,c];i(d),localStorage.setItem("dismissedImportantNews",JSON.stringify(d))},l=e.filter(c=>{var g;const d=a.includes(c.id),u=(g=c.acknowledged_by)==null?void 0:g.some(x=>x.email===r),h=c.requires_acknowledgment;return!d&&(!h||!u)});return l.length===0?null:n.jsx("div",{className:"mb-6 space-y-3",children:n.jsx(_a,{mode:"popLayout",children:l.map((c,d)=>{var x;const u=(x=c.acknowledged_by)==null?void 0:x.some(b=>b.email===r),h=c.requires_acknowledgment,g=new Date-new Date(c.created_date)<1440*60*1e3;return n.jsx(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},transition:{delay:d*.1},children:n.jsx(ce,{className:"border-2 border-amber-200 bg-gradient-to-r from-amber-50 to-orange-50 shadow-md",children:n.jsxs(he,{className:"p-4",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[n.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:n.jsx(cs,{className:"h-5 w-5 text-amber-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:c.title}),g&&n.jsx(it,{className:"bg-red-500 text-white text-xs",children:"NYT"})]}),n.jsx("p",{className:"text-xs text-slate-600 line-clamp-2 mb-2",children:c.content}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[n.jsx("span",{children:Ce(new Date(c.created_date),"d MMM",{locale:ut})}),h&&!u&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsx("span",{className:"text-amber-600 font-medium",children:"Krver bekrftelse"})]})]})]})]}),n.jsx(ye,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full hover:bg-slate-200",onClick:()=>o(c.id),children:n.jsx(Ra,{className:"h-4 w-4 text-slate-500"})})]}),n.jsxs("div",{className:"flex gap-2 mt-3",children:[n.jsxs(ye,{size:"sm",variant:"outline",className:"flex-1 h-8 text-xs bg-white",onClick:()=>s(c),children:["Ls mer",n.jsx(Ph,{className:"h-3 w-3 ml-1"})]}),h&&!u&&n.jsx(ye,{size:"sm",className:"flex-1 h-8 text-xs bg-amber-600 hover:bg-amber-700",onClick:()=>{t(c.id),o(c.id)},children:"Bekrfta"})]})]})})},c.id)})})})}function j3e({onProjectSelect:e,selectedProjectId:t}){const[r,s]=P.useState(!1),[a,i]=P.useState({name:"",category:"support_service"}),[o,l]=P.useState(!1),{data:c=[],refetch:d}=He({queryKey:["projects"],queryFn:async()=>(await oe.entities.Project.list("-updated_date")).filter(x=>x.status==="pgende"),initialData:[]}),u=async()=>{if(!a.name){alert("Fyll i projektnamn");return}l(!0);try{const g=await oe.auth.me(),x=await oe.entities.Project.create({name:a.name,project_code:a.name,status:"pgende",type:"externt",project_manager_email:g.email});await d(),e(x.id),localStorage.setItem("lastSelectedProjectId",x.id),s(!1),i({name:"",category:"support_service"})}catch(g){console.error("Error creating project:",g),alert("Kunde inte skapa projekt: "+g.message)}l(!1)},h=c.find(g=>g.id===t);return h&&!r?n.jsx(ce,{className:"border-0 shadow-sm mb-4",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center",children:n.jsx(Do,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Valt projekt"}),n.jsx("p",{className:"font-semibold text-slate-900",children:h.name})]})]}),n.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>e(null),className:"text-xs text-slate-600",children:"Byt"})]})})}):n.jsx(ce,{className:"border-0 shadow-sm mb-4",children:n.jsxs(he,{className:"p-4",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:"Vlj projekt"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Vlj vilket projekt du ska arbeta p"})]}),n.jsx(_a,{mode:"wait",children:r?n.jsxs(tt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(ve,{className:"text-xs text-slate-600 mb-1.5 block",children:"Projektnamn / Projektkod"}),n.jsx(De,{placeholder:"t.ex. BB-Jan, 1001, Projekt A",value:a.name,onChange:g=>i(x=>({...x,name:g.target.value})),className:"h-11"})]}),n.jsxs("div",{children:[n.jsx(ve,{className:"text-xs text-slate-600 mb-1.5 block",children:"Typ av arbete"}),n.jsxs(Nt,{value:a.category,onValueChange:g=>i(x=>({...x,category:g})),children:[n.jsx(jt,{className:"h-11",children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"support_service",children:"Service"}),n.jsx(Ne,{value:"install",children:"Install"}),n.jsx(Ne,{value:"rental",children:"Rental"}),n.jsx(Ne,{value:"interntid",children:"Interntid"})]})]})]}),n.jsxs("div",{className:"flex gap-2 pt-1",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:()=>{s(!1),i({name:"",category:"support_service"})},className:"flex-1",children:"Avbryt"}),n.jsx(ye,{onClick:u,disabled:o||!a.name,className:"flex-1 bg-indigo-600 hover:bg-indigo-700",children:o?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"w-4 h-4 mr-2 animate-spin"}),"Skapar..."]}):"Skapa"})]})]},"form"):n.jsx(tt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-2",children:c.length===0?n.jsxs("div",{className:"text-center py-8 px-4 bg-slate-50 rounded-xl",children:[n.jsx(Do,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-slate-600 mb-3",children:"Inga projekt nnu"}),n.jsxs(ye,{onClick:()=>s(!0),size:"sm",className:"bg-indigo-600 hover:bg-indigo-700",children:[n.jsx(xr,{className:"w-4 h-4 mr-2"}),"Skapa projekt"]})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-[280px] overflow-y-auto pr-1",children:c.map(g=>n.jsx(tt.button,{onClick:()=>{e(g.id),localStorage.setItem("lastSelectedProjectId",g.id)},className:"w-full text-left p-4 rounded-xl bg-white border-2 border-slate-200 hover:border-indigo-400 hover:shadow-sm transition-all",whileTap:{scale:.98},children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-indigo-50 flex items-center justify-center flex-shrink-0",children:n.jsx(Do,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-slate-900 text-sm",children:g.name}),g.type&&n.jsx("p",{className:"text-xs text-slate-500 mt-0.5 capitalize",children:g.type==="externt"?"Externt projekt":g.type})]})]}),n.jsx(Ph,{className:"w-5 h-5 text-slate-400"})]})},g.id))}),n.jsxs(ye,{variant:"outline",onClick:()=>s(!0),className:"w-full border-2 border-dashed border-slate-300 hover:border-indigo-400 hover:bg-indigo-50",children:[n.jsx(xr,{className:"w-4 h-4 mr-2"}),"Nytt projekt"]})]})},"list")})]})})}function w3e(){var J;const[e,t]=P.useState(null),[r,s]=P.useState(!1),[a,i]=P.useState(null),[o,l]=P.useState(null),[c,d]=P.useState(""),[u,h]=P.useState("alla"),[g,x]=P.useState(null),[b,y]=P.useState(!1),v=$n();P.useEffect(()=>{oe.auth.me().then(t).catch(()=>t(null))},[]);const{data:j=[],isLoading:w}=He({queryKey:["newsPosts"],queryFn:()=>oe.entities.NewsPost.list("-created_date",50)}),{data:N=[],refetch:A}=He({queryKey:["timeEntries",e==null?void 0:e.email],queryFn:async()=>e!=null&&e.email?(await oe.entities.TimeEntry.list()).filter(H=>H.employee_email===e.email):[],enabled:!!(e!=null&&e.email)}),{data:C}=He({queryKey:["employee",e==null?void 0:e.email],queryFn:async()=>e!=null&&e.email&&(await oe.entities.Employee.filter({user_email:e.email}))[0]||null,enabled:!!(e!=null&&e.email)}),{data:M=[]}=He({queryKey:["projects"],queryFn:async()=>(await oe.entities.Project.list("-updated_date")).filter(H=>H.status==="pgende"),initialData:[]}),I=N.find(Q=>Q.status==="active"),F=Xt({mutationFn:({id:Q,data:H})=>oe.entities.NewsPost.update(Q,H),onSuccess:()=>v.invalidateQueries({queryKey:["newsPosts"]})}),U=(Q,H)=>{const ne=j.find(fe=>fe.id===Q);if(!ne||!e)return;const ue=ne.reactions||{likes:[],hearts:[],celebrates:[]},ae=ue[H]||[],te=ae.includes(e.email)?ae.filter(fe=>fe!==e.email):[...ae,e.email];F.mutate({id:Q,data:{reactions:{...ue,[H]:te}}})},W=async(Q,H)=>{const ne=j.find(ae=>ae.id===Q);if(!ne||!e)return;const ue={id:Date.now().toString(),author_email:e.email,author_name:e.full_name,content:H,created_at:new Date().toISOString()};await F.mutateAsync({id:Q,data:{comments:[...ne.comments||[],ue]}}),i(ae=>ae?{...ae,comments:[...ae.comments||[],ue]}:null)},D=async Q=>{const H=j.find(ue=>ue.id===Q);if(!H||!e)return;const ne={email:e.email,name:e.full_name,acknowledged_at:new Date().toISOString()};await F.mutateAsync({id:Q,data:{acknowledged_by:[...H.acknowledged_by||[],ne]}})},R=j.filter(Q=>{const H=Q.title.toLowerCase().includes(c.toLowerCase())||Q.content.toLowerCase().includes(c.toLowerCase()),ne=u==="alla"||Q.category===u;return H&&ne}),z=R.filter(Q=>Q.is_important),Z=R.filter(Q=>!Q.is_important),se=()=>new Promise((Q,H)=>{if(!navigator.geolocation){H(new Error("Geolokalisering stds inte"));return}navigator.geolocation.getCurrentPosition(async ne=>{const{latitude:ue,longitude:ae}=ne.coords;try{const te=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${ue}&lon=${ae}&accept-language=sv`)).json();Q({latitude:ue,longitude:ae,address:te.display_name||`${ue.toFixed(6)}, ${ae.toFixed(6)}`})}catch{Q({latitude:ue,longitude:ae,address:`${ue.toFixed(6)}, ${ae.toFixed(6)}`})}},ne=>{H(ne)},{enableHighAccuracy:!0,timeout:1e4})});return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white",children:[n.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-6 pb-24",children:[n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Welcome to IM Workspace"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:(e==null?void 0:e.full_name)||""})]}),(e==null?void 0:e.role)==="admin"&&n.jsxs(ye,{onClick:()=>s(!0),className:"rounded-full h-11 px-5 shadow-md hover:shadow-lg transition-all",children:[n.jsx(xr,{className:"w-4 h-4 mr-2"}),"Ny nyhet"]})]}),n.jsx(y3e,{user:e}),I&&n.jsx(tt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4",children:n.jsx(ce,{className:"border-0 shadow-sm bg-emerald-50",children:n.jsxs(he,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),n.jsx("p",{className:"text-sm font-semibold text-emerald-900",children:"Instmplad"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-emerald-800",children:[n.jsx(Vt,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:Ce(new Date(I.clock_in_time),"HH:mm")})]}),I.project_allocations&&I.project_allocations.length>0&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-emerald-800",children:[n.jsx(Do,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:((J=M.find(Q=>{var H;return Q.id===((H=I.project_allocations[0])==null?void 0:H.project_id)}))==null?void 0:J.name)||"Projekt"})]}),I.clock_in_location&&n.jsxs("div",{className:"flex items-start gap-2 text-sm text-emerald-800",children:[n.jsx(Fn,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"line-clamp-2 font-medium",children:I.clock_in_location.address})]})]})]})})}),!I&&n.jsx(j3e,{selectedProjectId:g,onProjectSelect:x}),n.jsx("h2",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Checka in p projekt/kostnadsstlle"}),n.jsx(ce,{className:"border-0 shadow-sm mb-6",children:n.jsxs(he,{className:"p-0",children:[n.jsx(ye,{onClick:async()=>{var Q;y(!0);try{if(I){let H;try{H=await se()}catch(xe){console.warn("Could not get location:",xe),H=null}const ne=new Date,ue=new Date(I.clock_in_time),ae=(ne-ue)/(1e3*60*60),G=I.total_break_minutes||0,te=ae-G/60,fe=((Q=I.project_allocations)==null?void 0:Q.map(xe=>({...xe,hours:Number(te.toFixed(2))})))||[],be={clock_out_time:ne.toISOString(),total_hours:Number(te.toFixed(2)),status:"completed",project_allocations:fe};H&&(be.clock_out_location=H),await oe.entities.TimeEntry.update(I.id,be)}else{if(!g){alert("Du mste vlja ett projekt innan du stmplar in"),y(!1);return}let H;try{H=await se()}catch(ue){console.warn("Could not get location:",ue),H=null}const ne={employee_email:e.email,date:new Date().toISOString().split("T")[0],clock_in_time:new Date().toISOString(),status:"active",breaks:[],project_allocations:[{project_id:g,hours:0,category:"interntid"}]};H&&(ne.clock_in_location=H),await oe.entities.TimeEntry.create(ne)}await A()}catch(H){console.error("Error:",H),alert("Kunde inte slutfra tgrden: "+H.message)}y(!1)},disabled:!I&&!g||b,className:`w-full h-16 text-lg font-semibold transition-all rounded-2xl ${I?"bg-rose-600 hover:bg-rose-700":g?"bg-emerald-600 hover:bg-emerald-700":"bg-slate-300 cursor-not-allowed"}`,children:b?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-5 w-5 mr-2 animate-spin"}),I?"Stmplar ut...":"Stmplar in..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vt,{className:"h-5 w-5 mr-2"}),I?"Stmpla ut":"Stmpla in"]})}),!I&&!g&&n.jsx("p",{className:"text-xs text-center text-rose-600 py-2 font-medium",children:" Checka in p projekt/kostnadsstlle"})]})})]}),n.jsx(b3e,{posts:z,onAcknowledge:D,currentUserEmail:e==null?void 0:e.email,onViewPost:l}),n.jsx("div",{className:"space-y-4",children:n.jsx(_a,{mode:"popLayout",children:w?n.jsx("div",{className:"space-y-4",children:[1,2,3].map(Q=>n.jsx("div",{className:"bg-white rounded-2xl h-48 animate-pulse"},Q))}):Z.length===0?n.jsxs(tt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-16",children:[n.jsx(yi,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Inga nyheter att visa"})]}):Z.map(Q=>n.jsx(h3e,{post:Q,onReact:U,onComment:i,onAcknowledge:D,currentUserEmail:e==null?void 0:e.email},Q.id))})})]}),n.jsx(f3e,{open:r,onClose:()=>s(!1),onSuccess:()=>v.invalidateQueries({queryKey:["newsPosts"]})}),n.jsx(m3e,{open:!!a,onClose:()=>i(null),post:a,onAddComment:W,currentUser:e}),n.jsx(g3e,{open:!!o,onClose:()=>l(null),post:o,onReact:U,onAcknowledge:D,currentUserEmail:e==null?void 0:e.email,onComment:i})]})}function _3e(){const[e,t]=P.useState("month"),[r,s]=P.useState(Ce(ri(new Date),"yyyy-MM-dd")),[a,i]=P.useState(Ce(ni(new Date),"yyyy-MM-dd")),[o,l]=P.useState("overview"),{data:c=[]}=He({queryKey:["journalEntries"],queryFn:()=>oe.entities.DrivingJournalEntry.list("-created_date",500)}),{data:d=[]}=He({queryKey:["projects"],queryFn:()=>oe.entities.Project.list()}),{data:u=[]}=He({queryKey:["mileagePolicies"],queryFn:()=>oe.entities.MileagePolicy.list()}),h=c.filter(N=>{if(!N.start_time)return!1;const A=new Date(N.start_time),C=new Date(r),M=new Date(a);return M.setHours(23,59,59,999),A>=C&&A<=M&&N.status==="approved"&&!N.is_deleted}),g={};h.forEach(N=>{if(N.project_allocations&&N.project_allocations.length>0)N.project_allocations.forEach(A=>{g[A.project_id]||(g[A.project_id]={name:A.project_name,trips:0,distance:0,duration:0,cost:0}),g[A.project_id].trips+=1,g[A.project_id].distance+=A.distance_km||0,g[A.project_id].duration+=(N.duration_minutes||0)*(A.percentage||100)/100});else if(N.project_id){if(!g[N.project_id]){const A=d.find(C=>C.id===N.project_id);g[N.project_id]={name:(A==null?void 0:A.name)||N.project_code||"Oknt projekt",trips:0,distance:0,duration:0,cost:0}}g[N.project_id].trips+=1,g[N.project_id].distance+=N.distance_km||0,g[N.project_id].duration+=N.duration_minutes||0,g[N.project_id].cost+=N.mileage_allowance||0}});const x=Object.values(g).sort((N,A)=>A.distance-N.distance).slice(0,10),b={};h.forEach(N=>{N.customer&&(b[N.customer]||(b[N.customer]={name:N.customer,trips:0,distance:0,duration:0}),b[N.customer].trips+=1,b[N.customer].distance+=N.distance_km||0,b[N.customer].duration+=N.duration_minutes||0)});const y=Object.values(b).sort((N,A)=>A.distance-N.distance).slice(0,10),v=h.reduce((N,A)=>N+(A.distance_km||0),0),j=h.reduce((N,A)=>N+(A.duration_minutes||0),0);h.filter(N=>N.trip_type==="tjnst").length;const w=h.reduce((N,A)=>N+(A.mileage_allowance||0),0);return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pb-24",children:n.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[n.jsx("div",{className:"flex items-center justify-between mb-6",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Dashboard Krjournal"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"versikt och analys"})]})}),n.jsx(ce,{className:"border-0 shadow-sm mb-6",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n.jsxs("div",{children:[n.jsx(ve,{className:"text-xs mb-1 block",children:"Period"}),n.jsxs(Nt,{value:e,onValueChange:t,children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"month",children:"Denna mnad"}),n.jsx(Ne,{value:"custom",children:"Anpassat"})]})]})]}),e==="custom"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(ve,{className:"text-xs mb-1 block",children:"Frn"}),n.jsx(De,{type:"date",value:r,onChange:N=>s(N.target.value)})]}),n.jsxs("div",{children:[n.jsx(ve,{className:"text-xs mb-1 block",children:"Till"}),n.jsx(De,{type:"date",value:a,onChange:N=>i(N.target.value)})]})]})]})})}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Totalt km"}),n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:v.toFixed(0)})]}),n.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:n.jsx(Fn,{className:"h-5 w-5 text-blue-600"})})]})})}),n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Resor"}),n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:h.length})]}),n.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center",children:n.jsx(Jr,{className:"h-5 w-5 text-green-600"})})]})})}),n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Total tid"}),n.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[Math.round(j/60),"h"]})]}),n.jsx("div",{className:"h-10 w-10 rounded-full bg-purple-100 flex items-center justify-center",children:n.jsx(Vt,{className:"h-5 w-5 text-purple-600"})})]})})}),n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Milersttning"}),n.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[w.toFixed(0)," kr"]})]}),n.jsx("div",{className:"h-10 w-10 rounded-full bg-amber-100 flex items-center justify-center",children:n.jsx(Sf,{className:"h-5 w-5 text-amber-600"})})]})})})]}),n.jsxs(Ls,{value:o,onValueChange:l,children:[n.jsxs(As,{className:"w-full mb-6",children:[n.jsx(gt,{value:"overview",className:"flex-1",children:"versikt"}),n.jsx(gt,{value:"projects",className:"flex-1",children:"Projekt"}),n.jsx(gt,{value:"customers",className:"flex-1",children:"Kunder"})]}),n.jsx(Dt,{value:"overview",children:n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsx(Ct,{className:"text-lg",children:"Frdelning Tjnst/Privat"})}),n.jsx(he,{children:n.jsx(fu,{width:"100%",height:300,children:n.jsxs(EC,{children:[n.jsxs(kd,{data:[{name:"Tjnst",value:h.filter(N=>N.trip_type==="tjnst").length},{name:"Privat",value:h.filter(N=>N.trip_type==="privat").length}],cx:"50%",cy:"50%",labelLine:!1,label:({name:N,percent:A})=>`${N}: ${(A*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:[n.jsx(Zm,{fill:"#3b82f6"}),n.jsx(Zm,{fill:"#a855f7"})]}),n.jsx(Ya,{})]})})})]})}),n.jsx(Dt,{value:"projects",children:n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsx(Ct,{className:"text-lg",children:"Top 10 Projekt (km)"})}),n.jsx(he,{children:n.jsx(fu,{width:"100%",height:400,children:n.jsxs(sg,{data:x,children:[n.jsx(Of,{strokeDasharray:"3 3"}),n.jsx(yd,{dataKey:"name",angle:-45,textAnchor:"end",height:100}),n.jsx(kc,{}),n.jsx(Ya,{}),n.jsx(Bl,{dataKey:"distance",fill:"#3b82f6",name:"Kilometer"})]})})})]})}),n.jsx(Dt,{value:"customers",children:n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsx(Ct,{className:"text-lg",children:"Top 10 Kunder (km)"})}),n.jsx(he,{children:n.jsx(fu,{width:"100%",height:400,children:n.jsxs(sg,{data:y,children:[n.jsx(Of,{strokeDasharray:"3 3"}),n.jsx(yd,{dataKey:"name",angle:-45,textAnchor:"end",height:100}),n.jsx(kc,{}),n.jsx(Ya,{}),n.jsx(Bl,{dataKey:"distance",fill:"#10b981",name:"Kilometer"})]})})})]})})]})]})})}const N3e=[{value:1,label:"Mndag"},{value:2,label:"Tisdag"},{value:3,label:"Onsdag"},{value:4,label:"Torsdag"},{value:5,label:"Fredag"},{value:6,label:"Lrdag"},{value:0,label:"Sndag"}];function k3e(){const[e,t]=P.useState(null),r=$n();P.useEffect(()=>{oe.auth.me().then(t)},[]);const{data:s=[],isLoading:a}=He({queryKey:["journalPolicies"],queryFn:()=>oe.entities.JournalPolicy.list()}),i=s[0],[o,l]=P.useState({name:"Standard Policy",work_hours_start:"08:00",work_hours_end:"17:00",work_days:[1,2,3,4,5],office_locations:[],auto_approve_threshold_km:10,require_purpose_over_km:50,auto_categorize_enabled:!0});P.useEffect(()=>{i&&l(i)},[i]);const c=Xt({mutationFn:async b=>i?oe.entities.JournalPolicy.update(i.id,b):oe.entities.JournalPolicy.create(b),onSuccess:()=>{r.invalidateQueries({queryKey:["journalPolicies"]}),alert("Policy sparad!")}}),d=b=>{b.preventDefault(),c.mutate(o)},u=b=>{const y=o.work_days||[];y.includes(b)?l(v=>({...v,work_days:y.filter(j=>j!==b)})):l(v=>({...v,work_days:[...y,b]}))},h=()=>{l(b=>({...b,office_locations:[...b.office_locations||[],{name:"",latitude:0,longitude:0,radius_meters:500}]}))},g=(b,y,v)=>{const j=[...o.office_locations||[]];j[b]={...j[b],[y]:v},l(w=>({...w,office_locations:j}))},x=b=>{l(y=>({...y,office_locations:y.office_locations.filter((v,j)=>j!==b)}))};return!e||e.role!=="admin"?n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white p-6 pb-24",children:n.jsx("div",{className:"max-w-2xl mx-auto",children:n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-12 text-center",children:n.jsx("p",{className:"text-slate-500",children:"Endast administratrer har tkomst"})})})})}):n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pb-24",children:n.jsx("div",{className:"max-w-2xl mx-auto px-4 py-6",children:n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[n.jsx("div",{className:"flex items-center justify-between mb-6",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(wr,{to:Pn("DrivingJournal"),children:n.jsxs(ye,{variant:"ghost",size:"sm",className:"-ml-2",children:[n.jsx(xu,{className:"h-4 w-4 mr-2"}),"Tillbaka"]})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Krjournalspolicy"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Automatiseringsregler"})]})]})}),n.jsxs("form",{onSubmit:d,className:"space-y-4",children:[n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsx(Ct,{className:"text-lg",children:"Automatisering"})}),n.jsx(he,{className:"space-y-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(ve,{children:"Automatisk kategorisering"}),n.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Kategorisera resor automatiskt baserat p tid och plats"})]}),n.jsx(Io,{checked:o.auto_categorize_enabled,onCheckedChange:b=>l(y=>({...y,auto_categorize_enabled:b}))})]})})]}),n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsx(Ct,{className:"text-lg",children:"Arbetstider"})}),n.jsxs(he,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ve,{children:"Start"}),n.jsx(De,{type:"time",value:o.work_hours_start||"",onChange:b=>l(y=>({...y,work_hours_start:b.target.value}))})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Slut"}),n.jsx(De,{type:"time",value:o.work_hours_end||"",onChange:b=>l(y=>({...y,work_hours_end:b.target.value}))})]})]}),n.jsxs("div",{children:[n.jsx(ve,{className:"mb-2 block",children:"Arbetsdagar"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:N3e.map(b=>{var y;return n.jsx(it,{variant:(y=o.work_days)!=null&&y.includes(b.value)?"default":"outline",className:"cursor-pointer",onClick:()=>u(b.value),children:b.label},b.value)})})]})]})]}),n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ct,{className:"text-lg",children:"Kontorsplatser"}),n.jsxs(ye,{type:"button",size:"sm",variant:"outline",onClick:h,children:[n.jsx(xr,{className:"h-4 w-4 mr-2"}),"Lgg till"]})]})}),n.jsx(he,{className:"space-y-3",children:!o.office_locations||o.office_locations.length===0?n.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"Inga kontorsplatser tillagda"}):o.office_locations.map((b,y)=>n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Fn,{className:"h-4 w-4 text-slate-400"}),n.jsx(ye,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>x(y),children:n.jsx(Ra,{className:"h-4 w-4"})})]}),n.jsx(De,{placeholder:"Namn (t.ex. Huvudkontoret)",value:b.name,onChange:v=>g(y,"name",v.target.value)}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx(De,{type:"number",step:"0.000001",placeholder:"Latitud",value:b.latitude,onChange:v=>g(y,"latitude",Number(v.target.value))}),n.jsx(De,{type:"number",step:"0.000001",placeholder:"Longitud",value:b.longitude,onChange:v=>g(y,"longitude",Number(v.target.value))})]}),n.jsx(De,{type:"number",placeholder:"Radie (meter)",value:b.radius_meters,onChange:v=>g(y,"radius_meters",Number(v.target.value))})]},y))})]}),n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsx(Ct,{className:"text-lg",children:"Regler"})}),n.jsxs(he,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ve,{children:"Auto-godknn resor kortare n (km)"}),n.jsx(De,{type:"number",value:o.auto_approve_threshold_km,onChange:b=>l(y=>({...y,auto_approve_threshold_km:Number(b.target.value)}))})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Krv syfte fr resor lngre n (km)"}),n.jsx(De,{type:"number",value:o.require_purpose_over_km,onChange:b=>l(y=>({...y,require_purpose_over_km:Number(b.target.value)}))})]})]})]}),n.jsx(ye,{type:"submit",disabled:c.isPending,className:"w-full",children:c.isPending?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-4 w-4 mr-2 animate-spin"}),"Sparar..."]}):n.jsxs(n.Fragment,{children:[n.jsx(og,{className:"h-4 w-4 mr-2"}),"Spara policy"]})})]})]})})})}function S3e({vacationBalance:e=25,flexBalance:t=0}){return n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(tt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},children:n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-emerald-50 to-emerald-100/50 overflow-hidden",children:n.jsx(he,{className:"p-5",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-xl bg-emerald-500/10 flex items-center justify-center",children:n.jsx(SQ,{className:"h-5 w-5 text-emerald-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-emerald-600 uppercase tracking-wide",children:"Semester"}),n.jsxs("p",{className:"text-2xl font-bold text-emerald-700",children:[e," ",n.jsx("span",{className:"text-sm font-normal",children:"dagar"})]})]})]})})})}),n.jsx(tt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1},children:n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-blue-50 to-blue-100/50 overflow-hidden",children:n.jsx(he,{className:"p-5",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-xl bg-blue-500/10 flex items-center justify-center",children:n.jsx(_Q,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:"Flex"}),n.jsxs("p",{className:"text-2xl font-bold text-blue-700",children:[t," ",n.jsx("span",{className:"text-sm font-normal",children:"timmar"})]})]})]})})})})]})}const P3e={semester:"Semester",vab:"VAB",sjuk:"Sjukfrnvaro",tjnstledigt:"Tjnstledigt",frldraledigt:"Frldraledigt",annat:"Annat"},A3e={semester:"bg-emerald-100 text-emerald-700",vab:"bg-amber-100 text-amber-700",sjuk:"bg-rose-100 text-rose-700",tjnstledigt:"bg-violet-100 text-violet-700",frldraledigt:"bg-blue-100 text-blue-700",annat:"bg-slate-100 text-slate-700"},C3e={pending:{label:"Vntar p godknnande",color:"bg-amber-100 text-amber-700 border-amber-200",icon:Vt},approved:{label:"Godknd",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:$r},rejected:{label:"Avslagen",color:"bg-rose-100 text-rose-700 border-rose-200",icon:xh}};function uS({request:e,isManager:t,onApprove:r,onReject:s,index:a=0,showEmployee:i=!1}){const o=C3e[e.status],l=o.icon,c=e.days||jh(new Date(e.end_date),new Date(e.start_date))+1;return n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:a*.05},children:n.jsx(ce,{className:"border-0 shadow-sm hover:shadow-md transition-all duration-300 overflow-hidden",children:n.jsxs("div",{className:"flex",children:[n.jsx("div",{className:`w-1.5 ${e.status==="approved"?"bg-emerald-500":e.status==="rejected"?"bg-rose-500":"bg-amber-500"}`}),n.jsxs(he,{className:"py-5 px-5 flex-1",children:[n.jsx("div",{className:"flex items-start justify-between gap-4",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx(it,{className:`${A3e[e.type]} border-0 text-xs font-medium`,children:P3e[e.type]}),n.jsxs(it,{variant:"outline",className:`${o.color} text-xs`,children:[n.jsx(l,{className:"h-3 w-3 mr-1"}),o.label]})]}),i&&n.jsx("p",{className:"font-medium text-slate-900 mt-2",children:e.employee_email}),n.jsxs("div",{className:"flex items-center gap-2 mt-3 text-sm text-slate-600",children:[n.jsx(JP,{className:"h-4 w-4 text-slate-400"}),n.jsxs("span",{children:[Ce(new Date(e.start_date),"d MMM",{locale:ut}),e.start_date!==e.end_date&&`  ${Ce(new Date(e.end_date),"d MMM",{locale:ut})}`]}),n.jsx("span",{className:"text-slate-400",children:""}),n.jsxs("span",{className:"font-medium",children:[c," ",c===1?"dag":"dagar"]})]}),e.reason&&n.jsx("p",{className:"text-sm text-slate-500 mt-2",children:e.reason}),e.review_comment&&n.jsxs("div",{className:"mt-3 p-3 bg-slate-50 rounded-lg",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Kommentar frn chef:"}),n.jsx("p",{className:"text-sm text-slate-700 mt-1",children:e.review_comment})]})]})}),t&&e.status==="pending"&&n.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t border-slate-100",children:[n.jsxs(ye,{size:"sm",onClick:()=>r(e.id),className:"flex-1 bg-emerald-600 hover:bg-emerald-700 rounded-full",children:[n.jsx($r,{className:"h-4 w-4 mr-1.5"}),"Godknn"]}),n.jsxs(ye,{size:"sm",variant:"outline",onClick:()=>s(e.id),className:"flex-1 text-rose-600 border-rose-200 hover:bg-rose-50 rounded-full",children:[n.jsx(xh,{className:"h-4 w-4 mr-1.5"}),"Avsl"]})]})]})]})})})}function T3e({open:e,onClose:t,onSuccess:r,userEmail:s}){const[a,i]=P.useState(!1),[o,l]=P.useState({type:"semester",start_date:"",end_date:"",hours_per_day:8,reason:""}),c=o.start_date&&o.end_date?jh(new Date(o.end_date),new Date(o.start_date))+1:0,d=async u=>{u.preventDefault(),i(!0);try{await oe.entities.LeaveRequest.create({...o,employee_email:s,days:c,status:"pending"}),r(),t(),l({type:"semester",start_date:"",end_date:"",hours_per_day:8,reason:""})}catch(h){console.error("Error creating leave request:",h)}i(!1)};return n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"sm:max-w-md",children:[n.jsx(er,{children:n.jsx(tr,{className:"text-xl font-semibold",children:"Ansk om ledighet"})}),n.jsxs("form",{onSubmit:d,className:"space-y-5 mt-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Typ av ledighet"}),n.jsxs(Nt,{value:o.type,onValueChange:u=>l(h=>({...h,type:u})),children:[n.jsx(jt,{className:"h-11",children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"semester",children:"Semester"}),n.jsx(Ne,{value:"flexuttag",children:"Flexuttag"}),n.jsx(Ne,{value:"vab",children:"VAB"}),n.jsx(Ne,{value:"sjuk",children:"Sjukfrnvaro"}),n.jsx(Ne,{value:"tjnstledigt",children:"Tjnstledigt"}),n.jsx(Ne,{value:"frldraledigt",children:"Frldraledigt"}),n.jsx(Ne,{value:"annat",children:"Annat"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"start_date",children:"Frn datum"}),n.jsx(De,{id:"start_date",type:"date",value:o.start_date,onChange:u=>l(h=>({...h,start_date:u.target.value})),className:"h-11",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"end_date",children:"Till datum"}),n.jsx(De,{id:"end_date",type:"date",value:o.end_date,onChange:u=>l(h=>({...h,end_date:u.target.value})),min:o.start_date,className:"h-11",required:!0})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"hours_per_day",children:"Timmar per dag"}),n.jsx(De,{id:"hours_per_day",type:"number",value:o.hours_per_day,onChange:u=>l(h=>({...h,hours_per_day:Number(u.target.value)})),className:"h-11",min:"0.5",max:"24",step:"0.5",required:!0})]}),c>0&&n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 rounded-lg",children:[n.jsx(JP,{className:"h-4 w-4 text-slate-500"}),n.jsxs("span",{className:"text-sm text-slate-600",children:["Totalt ",n.jsxs("span",{className:"font-semibold",children:[c," ",c===1?"dag":"dagar"]}),o.hours_per_day&&o.hours_per_day!==8&&n.jsxs("span",{className:"ml-2",children:["(",o.hours_per_day,"h/dag = ",c*o.hours_per_day,"h totalt)"]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"reason",children:"Anledning (valfritt)"}),n.jsx(Zn,{id:"reason",value:o.reason,onChange:u=>l(h=>({...h,reason:u.target.value})),placeholder:"Beskriv anledningen...",className:"min-h-[80px] resize-none"})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:t,children:"Avbryt"}),n.jsx(ye,{type:"submit",disabled:a||c<=0,className:"min-w-[100px]",children:a?n.jsx(Ot,{className:"w-4 h-4 animate-spin"}):"Skicka anskan"})]})]})]})})}var IC="Progress",RC=100,[E3e]=ho(IC),[O3e,M3e]=E3e(IC),rG=P.forwardRef((e,t)=>{const{__scopeProgress:r,value:s=null,max:a,getValueLabel:i=L3e,...o}=e;(a||a===0)&&!c7(a)&&console.error(D3e(`${a}`,"Progress"));const l=c7(a)?a:RC;s!==null&&!d7(s,l)&&console.error(I3e(`${s}`,"Progress"));const c=d7(s,l)?s:null,d=dj(c)?i(c,l):void 0;return n.jsx(O3e,{scope:r,value:c,max:l,children:n.jsx(cn.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":dj(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":iG(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});rG.displayName=IC;var sG="ProgressIndicator",aG=P.forwardRef((e,t)=>{const{__scopeProgress:r,...s}=e,a=M3e(sG,r);return n.jsx(cn.div,{"data-state":iG(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...s,ref:t})});aG.displayName=sG;function L3e(e,t){return`${Math.round(e/t*100)}%`}function iG(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function dj(e){return typeof e=="number"}function c7(e){return dj(e)&&!isNaN(e)&&e>0}function d7(e,t){return dj(e)&&!isNaN(e)&&e<=t&&e>=0}function D3e(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${RC}\`.`}function I3e(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${RC} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var oG=rG,R3e=aG;const ag=P.forwardRef(({className:e,value:t,...r},s)=>n.jsx(oG,{ref:s,className:Yt("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...r,children:n.jsx(R3e,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));ag.displayName=oG.displayName;const F3e=[{id:"support_service",label:"Support & service"},{id:"install",label:"Install"},{id:"rental",label:"Rental"},{id:"interntid",label:"Interntid"}];function FC({timeEntry:e,onSave:t,onCancel:r,projects:s=[]}){const a=e.total_hours||0,i=a>=8,o=i?a-1:a,[l,c]=P.useState([]),[d,u]=P.useState([]),[h,g]=P.useState(!1),[x,b]=P.useState("");P.useEffect(()=>{var I;((I=e.project_allocations)==null?void 0:I.length)>0?(c(e.project_allocations),u(e.project_allocations.map(()=>!0))):y()},[e]);const y=async()=>{var I;g(!0);try{const F=await oe.functions.invoke("generateDraftTimeReport",{timeEntryId:e.id});if((I=F.data)!=null&&I.draft&&F.data.draft.length>0)c(F.data.draft),b(F.data.summary||""),u(F.data.draft.map(()=>!0));else{const U=e.project_id?[{project_id:e.project_id,hours:o,category:e.category||"support_service",notes:""}]:[{project_id:"",hours:o,category:"support_service",notes:""}];c(U),u(U.map(()=>!0))}}catch(F){console.error("Error generating AI draft:",F),c([{project_id:"",hours:o,category:"support_service",notes:""}]),u([!0])}finally{g(!1)}},v=l.reduce((I,F)=>I+(Number(F.hours)||0),0),j=o-v,w=o>0?v/o*100:0,N=()=>{c([...l,{project_id:"",hours:j>0?Number(j.toFixed(2)):0,category:"support_service",notes:""}])},A=I=>{c(l.filter((F,U)=>U!==I))},C=(I,F,U)=>{const W=[...l];if(W[I]={...W[I],[F]:U},F==="hours"&&I<l.length-1){const D=W.reduce((z,Z,se)=>se<=I?z+(Number(Z.hours)||0):z,0),R=o-D;W[I+1]={...W[I+1],hours:Math.max(0,Number(R.toFixed(2)))}}c(W)},M=async()=>{if(v>o){alert(`Du har frdelat ${v.toFixed(2)}h men bara ${o.toFixed(2)}h r tillgngliga`);return}const I=l.filter(F=>{var W;const U=(W=F.project_id)==null?void 0:W.trim();return U&&U.length>0&&F.hours>0});if(I.length===0){alert("Lgg till minst ett projekt med timmar");return}if(Math.abs(v-o)>.01){const F=`Du har frdelat ${v.toFixed(2)}h av ${o.toFixed(2)}h. Vill du fortstta?`;if(!confirm(F))return}try{await t(I);try{await oe.functions.invoke("checkProjectBudget",{time_entry_id:e.id})}catch(F){console.error("Error checking project budget:",F)}}catch(F){console.error("Error saving project allocation:",F),alert("Kunde inte spara: "+F.message)}};return h?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center space-y-4",children:[n.jsx(Ot,{className:"h-12 w-12 animate-spin text-indigo-500 mx-auto"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-900 font-semibold",children:"AI genererar utkast..."}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Analyserar din historik och dagens aktiviteter"})]})]})}):n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-6 space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:"Frdela arbetstid"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:Ce(new Date(e.date),"EEEE d MMMM",{locale:ut})})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-3xl font-bold text-slate-900",children:[o.toFixed(2),"h"]}),n.jsx("p",{className:"text-xs text-slate-500",children:"att frdela"})]})]}),x&&n.jsx("div",{className:"p-3 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl border border-indigo-200",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(yi,{className:"w-4 h-4 text-indigo-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"text-sm text-indigo-900",children:[n.jsx("span",{className:"font-semibold",children:"AI-frslag:"})," ",x]})]})}),i&&n.jsxs("div",{className:"p-3 rounded-lg bg-emerald-50 border border-emerald-200 flex items-start gap-2",children:[n.jsx(mj,{className:"h-4 w-4 text-emerald-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"text-sm text-emerald-800",children:[n.jsx("strong",{children:"Lunch avdragen:"})," 1 timme automatiskt borttagen frn ",a.toFixed(2),"h totalt arbetad tid"]})]}),n.jsxs("div",{className:"space-y-2 p-4 bg-slate-50 rounded-xl",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Tidsfrdelning"}),n.jsxs("span",{className:"text-sm font-bold text-slate-900",children:[v.toFixed(2),"h / ",o.toFixed(2),"h"]})]}),n.jsx(ag,{value:w,className:"h-3"}),n.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mt-1",children:[n.jsxs("span",{children:[w.toFixed(0),"% frdelat"]}),j>0&&n.jsxs("span",{className:"text-amber-600 font-medium",children:[j.toFixed(2),"h kvar"]}),j===0&&n.jsx("span",{className:"text-emerald-600 font-medium",children:" Fullstndigt frdelat"})]})]}),n.jsx("div",{className:"space-y-3",children:l.map((I,F)=>n.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["Projekt ",F+1]}),l.length>1&&n.jsx(ye,{type:"button",variant:"ghost",size:"sm",onClick:()=>A(F),className:"h-7 text-rose-600 hover:text-rose-700",children:n.jsx(Ra,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx(ve,{className:"text-xs",children:"Projekt"}),n.jsx("button",{type:"button",onClick:()=>{const U=[...d];U[F]=!U[F],u(U)},className:"text-xs text-blue-600 hover:text-blue-700",children:d[F]?"Skriv sjlv":"Vlj frn lista"})]}),d[F]?n.jsx("div",{className:"space-y-1",children:s&&s.length>0?n.jsxs(Nt,{value:I.project_id,onValueChange:U=>C(F,"project_id",U),children:[n.jsx(jt,{className:"h-10",children:n.jsx(kt,{placeholder:"Vlj projekt"})}),n.jsx(wt,{className:"z-50",children:s.map(U=>n.jsxs(Ne,{value:U.id,children:[U.name," (",U.project_code,")"]},U.id))})]}):n.jsx("div",{className:"text-xs text-slate-500 p-2 bg-slate-50 rounded border border-slate-200",children:"Inga projekt tillgngliga. Vnligen skriv projektkod manuellt."})}):n.jsx(De,{value:I.project_id,onChange:U=>C(F,"project_id",U.target.value),placeholder:"T.ex. im101",className:"h-10"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(ve,{className:"text-xs",children:"Timmar"}),n.jsx(De,{type:"number",step:"0.25",min:"0",max:o,value:I.hours,onChange:U=>C(F,"hours",parseFloat(U.target.value)||0),className:"h-10 font-medium"})]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(ve,{className:"text-xs",children:"Kategori"}),n.jsxs(Nt,{value:I.category,onValueChange:U=>C(F,"category",U),children:[n.jsx(jt,{className:"h-10",children:n.jsx(kt,{})}),n.jsx(wt,{children:F3e.map(U=>n.jsx(Ne,{value:U.id,children:U.label},U.id))})]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(ve,{className:"text-xs",children:"Anteckningar (valfritt)"}),n.jsx(De,{value:I.notes||"",onChange:U=>C(F,"notes",U.target.value),placeholder:"Vad gjorde du...",className:"h-10"})]})]},F))}),n.jsxs(ye,{type:"button",variant:"outline",onClick:N,className:"w-full h-11 rounded-xl border-dashed border-2",disabled:j<=0,children:[n.jsx(xr,{className:"w-4 h-4 mr-2"}),"Lgg till projekt"]}),v>o&&n.jsx("div",{className:"p-3 rounded-lg bg-rose-50 border border-rose-200",children:n.jsxs("p",{className:"text-sm text-rose-800",children:[" Du har frdelat ",Math.abs(o-v).toFixed(2),"h fr mycket"]})}),n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:r,className:"flex-1 h-12 rounded-2xl",children:"Avbryt"}),n.jsxs(ye,{onClick:M,disabled:v>o,className:"flex-1 h-12 rounded-2xl bg-slate-900 hover:bg-slate-800",children:[n.jsx(og,{className:"w-4 h-4 mr-2"}),"Spara frdelning"]})]})]})})}function $3e({userEmail:e,activeEntry:t,onUpdate:r}){var z,Z,se;const[s,a]=P.useState(!1),[i,o]=P.useState(new Date),[l,c]=P.useState(!1),[d,u]=P.useState(null),[h,g]=P.useState(!1),[x,b]=P.useState(()=>localStorage.getItem("lastSelectedProjectId")||null),[y,v]=P.useState(!1),[j,w]=P.useState({name:"",project_code:""}),{data:N=[],refetch:A}=He({queryKey:["projects"],queryFn:async()=>(await oe.entities.Project.list()).filter(Q=>Q.status==="pgende"),initialData:[]}),C=async()=>{if(!j.name||!j.project_code){alert("Fyll i bde projektnamn och projektkod");return}a(!0);try{const J=await oe.auth.me(),Q=await oe.entities.Project.create({name:j.name,project_code:j.project_code,status:"pgende",project_manager_email:J.email});await A(),b(Q.id),localStorage.setItem("lastSelectedProjectId",Q.id),v(!1),w({name:"",project_code:""})}catch(J){console.error("Error creating project:",J),alert("Kunde inte skapa projekt: "+J.message)}a(!1)};P.useEffect(()=>{const J=setInterval(()=>o(new Date),1e3);return()=>clearInterval(J)},[]),P.useEffect(()=>{t&&console.log("Active entry received:",{id:t.id,category:t.category,employee_email:t.employee_email,date:t.date,clock_in_time:t.clock_in_time,status:t.status,allKeys:Object.keys(t)})},[t]);const M=()=>new Promise((J,Q)=>{if(!navigator.geolocation){Q(new Error("Geolokalisering stds inte"));return}navigator.geolocation.getCurrentPosition(async H=>{const{latitude:ne,longitude:ue}=H.coords;try{const G=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${ne}&lon=${ue}&accept-language=sv`)).json();J({latitude:ne,longitude:ue,address:G.display_name||`${ne.toFixed(6)}, ${ue.toFixed(6)}`})}catch{J({latitude:ne,longitude:ue,address:`${ne.toFixed(6)}, ${ue.toFixed(6)}`})}},H=>{Q(H)},{enableHighAccuracy:!0,timeout:1e4})}),I=async()=>{if(!x){alert("Du mste vlja ett projekt innan du stmplar in");return}a(!0);let J=e,Q=0;for(;!J&&Q<10;)await new Promise(H=>setTimeout(H,200)),J=e,Q++;if(!J){alert("Kunde inte identifiera anvndare. Vnligen ladda om sidan."),a(!1);return}try{let H;try{H=await M()}catch(ae){console.warn("Could not get location, continuing without:",ae),H=null}const ne=Ce(new Date,"yyyy-MM-dd"),ue={employee_email:J,date:ne,clock_in_time:new Date().toISOString(),status:"active",breaks:[]};H&&(ue.clock_in_location=H),x&&(ue.project_allocations=[{project_id:x,hours:0,category:"interntid"}]),await oe.entities.TimeEntry.create(ue),localStorage.setItem("lastSelectedProjectId",x),r()}catch(H){console.error("Error clocking in:",H),alert("Kunde inte stmpla in: "+H.message)}a(!1)},F=async()=>{if(t){a(!0);try{if(!l)c(!0),u(new Date);else{const J=new Date,Q=Math.floor((J-d)/(1e3*60)),H={start_time:d.toISOString(),end_time:J.toISOString(),duration_minutes:Q,type:"rast"},ne=[...t.breaks||[],H],ue=ne.reduce((ae,G)=>ae+(G.duration_minutes||0),0);await oe.entities.TimeEntry.update(t.id,{breaks:ne,total_break_minutes:ue}),c(!1),u(null),await r()}}catch(J){console.error("Error toggling break:",J),alert("Kunde inte hantera rast: "+J.message)}a(!1)}},U=async()=>{if(!t){alert("Ingen aktiv instmpling hittades");return}if(t.project_allocations&&t.project_allocations.length>0){a(!0);try{let J;try{J=await M()}catch(fe){console.warn("Could not get location, continuing without:",fe),J=null}const Q=new Date(t.clock_in_time),H=new Date,ne=(H-Q)/(1e3*60*60),ue=t.total_break_minutes||0,ae=ne-ue/60,G=t.project_allocations.map(fe=>({...fe,hours:Number(ae.toFixed(2))})),te={clock_out_time:H.toISOString(),total_hours:Number(ae.toFixed(2)),status:"completed",project_allocations:G};J&&(te.clock_out_location=J),await oe.entities.TimeEntry.update(t.id,te);try{await oe.functions.invoke("checkProjectBudget",{time_entry_id:t.id})}catch(fe){console.error("Error checking project budget:",fe)}await r()}catch(J){console.error("Error clocking out:",J),alert("Kunde inte stmpla ut: "+(J.message||"Oknt fel"))}finally{a(!1)}return}a(!0);try{let J;try{J=await M()}catch(H){console.warn("Could not get location, continuing without:",H),J=null}const Q={clock_out_time:new Date().toISOString()};J&&(Q.clock_out_location=J),await oe.entities.TimeEntry.update(t.id,Q),await r(),await oe.entities.Notification.create({recipient_email:t.employee_email,type:"time_correction_needed",title:"Frdela arbetstid",message:"Du har stmplat ut. Vnligen frdela din arbetstid p projekt.",priority:"high",sent_via:["app"]}),g(!0)}catch(J){console.error("Error clocking out:",J),alert("Kunde inte stmpla ut: "+(J.message||"Oknt fel"))}finally{a(!1)}},W=async J=>{if(t){a(!0);try{let Q;try{Q=await M()}catch(fe){console.warn("Could not get location, continuing without:",fe),Q=null}const H=new Date(t.clock_in_time),ne=t.clock_out_time?new Date(t.clock_out_time):new Date,ue=(ne-H)/(1e3*60*60),ae=t.total_break_minutes||0,G=ue-ae/60,te={employee_email:t.employee_email,date:t.date,clock_in_time:t.clock_in_time,clock_out_time:ne.toISOString(),total_hours:Number(G.toFixed(2)),status:"completed",breaks:t.breaks||[],total_break_minutes:ae,project_allocations:J};await oe.entities.Notification.create({recipient_email:t.employee_email,type:"system",title:"Projektfrdelning slutfrd",message:`Du har frdelat ${G.toFixed(1)}h p ${J.length} projekt.`,priority:"normal",sent_via:["app"]}),Q&&(te.clock_out_location=Q),t.clock_in_location&&(te.clock_in_location=t.clock_in_location),t.notes&&(te.notes=t.notes),await oe.entities.TimeEntry.update(t.id,te),g(!1),await r()}catch(Q){console.error("Error clocking out:",Q),alert("Kunde inte stmpla ut: "+(Q.message||"Oknt fel"))}finally{a(!1)}}},D=()=>{if(!t)return null;const J=new Date(t.clock_in_time),H=new Date-J,ne=Math.floor(H/(1e3*60*60)),ue=Math.floor(H%(1e3*60*60)/(1e3*60));return{hours:ne,minutes:ue,formatted:`${ne}h ${ue}m`}},R=()=>{const J=D();return J?J.hours>=10:!1};if(h&&t){const J=new Date(t.clock_in_time),Q=t.clock_out_time?new Date(t.clock_out_time):new Date,H=(Q-J)/(1e3*60*60),ne=t.total_break_minutes||0,ue=H-ne/60,ae={...t,total_hours:Number(ue.toFixed(2)),clock_out_time:Q.toISOString()};return n.jsx(FC,{timeEntry:ae,projects:N,onSave:W,onCancel:()=>g(!1)})}return n.jsxs(ce,{className:"border-0 shadow-sm overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"inline-flex items-center justify-center h-16 w-16 rounded-full bg-white/10 backdrop-blur-sm mb-4",children:n.jsx(Vt,{className:"h-8 w-8 text-white"})}),n.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:Ce(i,"HH:mm:ss")}),n.jsx("div",{className:"text-sm text-white/70",children:Ce(i,"EEEE d MMMM yyyy",{locale:ut})})]})}),n.jsxs(he,{className:"p-6",children:[t?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-emerald-50 rounded-xl",children:[n.jsx(oE,{className:"h-5 w-5 text-emerald-600 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("p",{className:"text-sm font-medium text-emerald-900",children:"Instmplad"}),t.project_allocations&&t.project_allocations.length>0&&n.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-indigo-500 text-white",children:((z=N.find(J=>{var Q;return J.id===((Q=t.project_allocations[0])==null?void 0:Q.project_id)}))==null?void 0:z.name)||"Projekt"})]}),n.jsx("p",{className:"text-xs text-emerald-700 mt-1",children:Ce(new Date(t.clock_in_time),"HH:mm")}),t.clock_in_location&&n.jsxs("div",{className:"flex items-start gap-1 mt-2 text-xs text-emerald-600",children:[n.jsx(Fn,{className:"h-3 w-3 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"line-clamp-2",children:t.clock_in_location.address})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-lg font-bold text-emerald-900",children:(Z=D())==null?void 0:Z.formatted}),n.jsx("p",{className:"text-xs text-emerald-600",children:"arbetad tid idag"})]})]}),R()&&n.jsx("div",{className:"p-3 bg-amber-50 rounded-xl border border-amber-200",children:n.jsx("p",{className:"text-xs text-amber-800",children:"Du har arbetat mer n ordinarie arbetstid idag. Glm inte att stmpla ut."})}),n.jsx(ye,{onClick:F,disabled:s,variant:"outline",className:"w-full h-12 rounded-2xl",children:s?n.jsx(Ot,{className:"w-4 h-4 mr-2 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(mj,{className:"w-4 h-4 mr-2"}),l?"Avsluta rast":"Ta rast"]})}),n.jsx(ye,{onClick:U,disabled:s||l,className:"w-full h-14 bg-rose-600 hover:bg-rose-700 rounded-2xl text-base font-medium",children:s?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"w-5 h-5 mr-2 animate-spin"}),"Stmplar ut..."]}):n.jsxs(n.Fragment,{children:[n.jsx(X7,{className:"w-5 h-5 mr-2"}),"Stmpla ut"]})})]}):n.jsxs("div",{className:"space-y-4",children:[y?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(ve,{className:"text-base font-semibold text-slate-900",children:"Nytt projekt"}),n.jsx(ye,{type:"button",variant:"ghost",size:"sm",onClick:()=>{v(!1),w({name:"",project_code:""})},className:"h-8 text-xs",children:"Avbryt"})]}),n.jsx(De,{placeholder:"Projektnamn",value:j.name,onChange:J=>w(Q=>({...Q,name:J.target.value})),className:"h-12 text-base"}),n.jsx(De,{placeholder:"Projektkod (t.ex. PRJ001)",value:j.project_code,onChange:J=>w(Q=>({...Q,project_code:J.target.value})),className:"h-12 text-base"}),n.jsx(ye,{onClick:C,disabled:s||!j.name||!j.project_code,className:"w-full h-12 rounded-xl",children:s?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"w-4 h-4 mr-2 animate-spin"}),"Skapar..."]}):n.jsxs(n.Fragment,{children:[n.jsx(xr,{className:"w-4 h-4 mr-2"}),"Skapa och vlj projekt"]})})]}):n.jsx(n.Fragment,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(ve,{className:"text-base font-semibold text-slate-900",children:"Vlj projekt"}),n.jsxs(ye,{type:"button",variant:"ghost",size:"sm",onClick:()=>v(!0),className:"h-8 text-xs text-indigo-600",children:[n.jsx(xr,{className:"w-3 h-3 mr-1"}),"Nytt"]})]}),N.length===0?n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl text-center",children:[n.jsx("p",{className:"text-sm text-slate-600 mb-2",children:"Inga projekt nnu"}),n.jsxs(ye,{type:"button",variant:"outline",size:"sm",onClick:()=>v(!0),className:"h-9",children:[n.jsx(xr,{className:"w-4 h-4 mr-2"}),"Skapa projekt"]})]}):n.jsxs(Nt,{value:x||"",onValueChange:J=>{b(J||null),J&&localStorage.setItem("lastSelectedProjectId",J)},children:[n.jsx(jt,{className:"h-12 border-2",children:n.jsx(kt,{placeholder:"Vlj projekt *"})}),n.jsx(wt,{children:N.map(J=>n.jsx(Ne,{value:J.id,children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-medium",children:J.name}),n.jsx("span",{className:"text-xs text-slate-500",children:J.project_code})]})},J.id))})]}),x&&n.jsx(tt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 bg-emerald-50 rounded-xl border border-emerald-200",children:n.jsxs("p",{className:"text-sm text-emerald-800 flex items-center gap-2",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Tid registreras p ",(se=N.find(J=>J.id===x))==null?void 0:se.name]})}),!x&&N.length>0&&n.jsx("p",{className:"text-xs text-center text-rose-600 py-2 font-medium",children:" Du mste vlja ett projekt innan instmpling"})]})}),n.jsx(ye,{onClick:I,disabled:s,className:"w-full h-16 bg-emerald-600 hover:bg-emerald-700 rounded-2xl text-lg font-semibold disabled:opacity-50 shadow-lg",children:s?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"w-5 h-5 mr-2 animate-spin"}),"Stmplar in..."]}):n.jsxs(n.Fragment,{children:[n.jsx(oE,{className:"w-6 h-6 mr-2"}),"Stmpla in"]})})]}),n.jsxs("p",{className:"text-xs text-slate-500 text-center mt-3",children:[n.jsx(Fn,{className:"inline h-3 w-3 mr-1"}),"Din position registreras automatiskt"]})]})]})}function B3e({entries:e}){const t=new Date,r=Fa(t,{locale:ut}),s=Pc(t,{locale:ut}),a=ri(t),i=ni(t),o=h=>e.filter(g=>{if(!g.clock_in_time||g.status!=="completed")return!1;const x=bs(g.clock_in_time);return _f(x,h)}).reduce((g,x)=>g+(x.total_hours||0),0),l=o({start:r,end:s}),c=o({start:a,end:i}),d=e.filter(h=>h.status==="completed"&&h.total_hours).reduce((h,g)=>{const x=g.category||"interntid";return h[x]=(h[x]||0)+g.total_hours,h},{}),u={support_service:"Support & Service",install:"Install",interntid:"Interntid"};return n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsx(tt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1},children:n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-blue-500 to-blue-600",children:n.jsxs(he,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Vt,{className:"h-4 w-4 text-white/80"}),n.jsx("span",{className:"text-xs text-white/80",children:"Denna vecka"})]}),n.jsxs("p",{className:"text-2xl font-bold text-white",children:[l.toFixed(1),"h"]})]})})}),n.jsx(tt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.2},children:n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-purple-500 to-purple-600",children:n.jsxs(he,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(ta,{className:"h-4 w-4 text-white/80"}),n.jsx("span",{className:"text-xs text-white/80",children:"Denna mnad"})]}),n.jsxs("p",{className:"text-2xl font-bold text-white",children:[c.toFixed(1),"h"]})]})})})]}),Object.keys(d).length>0&&n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-slate-700 mb-3",children:"Frdelning per kategori"}),n.jsx("div",{className:"space-y-2",children:Object.entries(d).map(([h,g])=>{const x=Object.values(d).reduce((y,v)=>y+v,0),b=(g/x*100).toFixed(0);return n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center justify-between text-xs",children:[n.jsx("span",{className:"text-slate-600",children:u[h]}),n.jsxs("span",{className:"font-semibold text-slate-900",children:[g.toFixed(1),"h (",b,"%)"]})]}),n.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-gradient-to-r from-slate-500 to-slate-600 rounded-full transition-all duration-500",style:{width:`${b}%`}})})]},h)})})]})})})]})}function lG({entries:e,view:t="month"}){const[r,s]=P.useState(new Date),[a,i]=P.useState(null),o=ri(r),l=ni(r),c=Fa(o,{weekStartsOn:1}),d=Pc(l,{weekStartsOn:1}),u=cA({start:c,end:d}),h=j=>e.filter(w=>{const N=bs(w.clock_in_time);return Il(N,j)&&(w.status==="completed"||w.status==="approved")}),g=j=>h(j).reduce((w,N)=>w+(N.total_hours||0),0),x=j=>j>=8?"bg-emerald-500 text-white":j>=6?"bg-blue-500 text-white":j>0?"bg-slate-300 text-slate-700":"bg-slate-100 text-slate-400",b=()=>s(new Date(r.getFullYear(),r.getMonth()-1)),y=()=>s(new Date(r.getFullYear(),r.getMonth()+1)),v=["Mn","Tis","Ons","Tor","Fre","Lr","Sn"];return n.jsxs(ce,{className:"border-0 shadow-sm overflow-hidden",children:[n.jsxs(he,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:Ce(r,"MMMM yyyy",{locale:ut})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ye,{variant:"ghost",size:"icon",onClick:b,className:"h-8 w-8",children:n.jsx(tp,{className:"h-4 w-4"})}),n.jsx(ye,{variant:"ghost",size:"icon",onClick:y,className:"h-8 w-8",children:n.jsx(Ph,{className:"h-4 w-4"})})]})]}),n.jsx("div",{className:"grid grid-cols-7 gap-2 mb-3",children:v.map(j=>n.jsx("div",{className:"text-center text-xs font-semibold text-slate-500 py-2",children:j},j))}),n.jsx("div",{className:"grid grid-cols-7 gap-2",children:u.map((j,w)=>{const N=g(j),A=Qde(j,r),C=Il(j,new Date);return n.jsxs(tt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:w*.02},onClick:()=>A&&g(j)>0&&i(j),className:`aspect-square rounded-lg flex flex-col items-center justify-center p-2 transition-all ${A?"bg-white border border-slate-200 hover:shadow-md":"bg-slate-50 border border-slate-100"} ${C?"ring-2 ring-blue-500":""} ${A&&g(j)>0?"cursor-pointer":"cursor-default"}`,children:[n.jsx("span",{className:`text-xs font-semibold mb-1 ${A?"text-slate-900":"text-slate-400"}`,children:Ce(j,"d")}),A&&N>0?n.jsxs(it,{className:`text-xs font-bold ${x(N)}`,children:[N.toFixed(1),"h"]}):n.jsx("span",{className:"text-xs text-slate-400",children:"-"})]},w)})}),n.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-100 flex flex-wrap gap-4 justify-center text-xs",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"h-3 w-3 rounded bg-emerald-500"}),n.jsx("span",{className:"text-slate-600",children:"8h+"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"h-3 w-3 rounded bg-blue-500"}),n.jsx("span",{className:"text-slate-600",children:"68h"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"h-3 w-3 rounded bg-slate-300"}),n.jsx("span",{className:"text-slate-600",children:"06h"})]})]})]}),n.jsx(Xn,{open:!!a,onOpenChange:j=>!j&&i(null),children:n.jsxs(Yn,{className:"max-w-md",children:[n.jsx(er,{children:n.jsx(tr,{children:a&&Ce(a,"EEEE d MMMM",{locale:ut})})}),a&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Totalt arbetat"}),n.jsxs("span",{className:"text-lg font-bold text-slate-900",children:[g(a).toFixed(1),"h"]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"text-sm font-medium text-slate-900",children:"Registreringar"}),h(a).map((j,w)=>{var N;return n.jsxs(tt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:w*.05},className:"p-3 bg-white border border-slate-200 rounded-lg space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vt,{className:"h-4 w-4 text-slate-400"}),n.jsxs("span",{className:"text-sm font-medium text-slate-900",children:[Ce(bs(j.clock_in_time),"HH:mm"),j.clock_out_time&&`  ${Ce(bs(j.clock_out_time),"HH:mm")}`]})]}),n.jsxs(it,{variant:"outline",children:[(N=j.total_hours)==null?void 0:N.toFixed(1),"h"]})]}),j.category&&n.jsxs("div",{className:"text-xs text-slate-500",children:[j.category==="support_service"&&"Support & Service",j.category==="install"&&"Installation",j.category==="rental"&&"Rental",j.category==="interntid"&&"Interntid"]}),j.total_break_minutes>0&&n.jsxs("div",{className:"text-xs text-slate-500",children:["Rast: ",j.total_break_minutes," min"]}),j.notes&&n.jsx("p",{className:"text-xs text-slate-600 italic",children:j.notes})]},j.id)})]})]})]})})]})}const hS={support_service:{color:"bg-blue-500",label:"Support & Service",icon:Do},install:{color:"bg-purple-500",label:"Installation",icon:vu},interntid:{color:"bg-slate-500",label:"Interntid",icon:s9}};function q3e({entries:e,onEdit:t}){const[r,s]=P.useState("week"),[a,i]=P.useState(new Set),o=new Date,l=Fa(o,{locale:ut,weekStartsOn:1}),c=Pc(o,{locale:ut,weekStartsOn:1}),d=ri(o),u=ni(o),h=r==="week"?{start:l,end:c}:{start:d,end:u},x=e.filter(j=>{if(!j.clock_in_time)return!1;const w=bs(j.clock_in_time);return _f(w,h)}).reduce((j,w)=>{const N=Ce(bs(w.clock_in_time),"yyyy-MM-dd");return j[N]||(j[N]=[]),j[N].push(w),j},{}),b=cA(h),y=j=>j.filter(w=>w.status==="completed"&&w.total_hours).reduce((w,N)=>w+N.total_hours,0),v=j=>{const w=new Set(a);w.has(j)?w.delete(j):w.add(j),i(w)};return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Ls,{value:r,onValueChange:s,children:n.jsxs(As,{className:"w-full bg-white shadow-sm rounded-2xl p-1",children:[n.jsx(gt,{value:"week",className:"flex-1 rounded-xl",children:"Denna vecka"}),n.jsx(gt,{value:"month",className:"flex-1 rounded-xl",children:"Denna mnad"}),n.jsx(gt,{value:"calendar",className:"flex-1 rounded-xl",children:"Kalender"})]})}),r==="calendar"&&n.jsx(lG,{entries:e}),r!=="calendar"&&n.jsx("div",{className:"space-y-2",children:b.map((j,w)=>{const N=Ce(j,"yyyy-MM-dd"),A=x[N]||[],C=y(A),M=Il(j,o),I=A.length>0,F=a.has(N);return n.jsx(tt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:w*.03},children:n.jsx(ce,{className:`border-0 shadow-sm cursor-pointer transition-all ${M?"ring-2 ring-blue-500":""} hover:shadow-md`,onClick:()=>I&&v(N),children:n.jsxs(he,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`h-10 w-10 rounded-lg flex items-center justify-center ${M?"bg-blue-500":I?"bg-emerald-500":"bg-slate-100"}`,children:n.jsx("span",{className:`text-sm font-bold ${M||I?"text-white":"text-slate-400"}`,children:Ce(j,"d")})}),n.jsxs("div",{children:[n.jsx("p",{className:`font-medium ${M?"text-blue-600":"text-slate-900"}`,children:Ce(j,"EEEE",{locale:ut})}),n.jsx("p",{className:"text-xs text-slate-500",children:Ce(j,"d MMMM",{locale:ut})})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"text-right",children:I?n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"text-lg font-bold text-slate-900",children:[C.toFixed(1),"h"]}),n.jsxs("p",{className:"text-xs text-slate-500",children:[A.length," pass"]})]}):n.jsx("p",{className:"text-sm text-slate-400",children:"-"})}),I&&n.jsx("div",{className:"text-slate-400",children:F?n.jsx(K7,{className:"h-5 w-5"}):n.jsx(fj,{className:"h-5 w-5"})})]})]}),n.jsx(_a,{children:A.length>0&&F&&n.jsxs(tt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3 mt-4 pt-4 border-t border-slate-100",children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Framsteg"}),n.jsxs("p",{className:"text-xs font-semibold text-slate-700",children:[C.toFixed(1)," / 8h"]})]}),n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:n.jsx("div",{className:`h-2 rounded-full transition-all ${C>=8?"bg-emerald-500":C>=6?"bg-blue-500":"bg-slate-400"}`,style:{width:`${Math.min(C/8*100,100)}%`}})})]}),A.map(U=>{var W,D,R;return(W=hS[U.category])==null||W.icon,n.jsxs(tt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg group hover:bg-slate-100 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx(it,{className:`${(D=hS[U.category])==null?void 0:D.color} text-white shrink-0 text-xs`,children:(R=hS[U.category])==null?void 0:R.label}),n.jsxs("div",{className:"flex items-center gap-1.5 text-slate-600",children:[n.jsx(Vt,{className:"h-3.5 w-3.5 text-slate-400"}),n.jsxs("span",{className:"text-sm font-medium",children:[Ce(bs(U.clock_in_time),"HH:mm"),U.clock_out_time&&`  ${Ce(bs(U.clock_out_time),"HH:mm")}`]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[U.total_hours&&n.jsxs("span",{className:"font-bold text-slate-900 text-sm min-w-[40px] text-right",children:[U.total_hours.toFixed(1),"h"]}),U.status==="active"?n.jsx("span",{className:"px-2.5 py-1 bg-emerald-100 text-emerald-700 rounded-full text-xs font-semibold",children:"Pgr"}):t&&n.jsx(ye,{variant:"ghost",size:"icon",className:"h-7 w-7 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>t(U),children:n.jsx(ql,{className:"h-3.5 w-3.5 text-slate-400"})})]})]},U.id)})]})})]})})},N)})})]})}const fS={ej_klar:{label:"Ej klar",color:"bg-amber-100 text-amber-700 border-amber-200",icon:Vt},klar:{label:"Klar",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:$r},vertid:{label:"vertid",color:"bg-blue-100 text-blue-700 border-blue-200",icon:ja}},u7={ej_inskickad:{label:"Ej inskickad",color:"bg-slate-100 text-slate-700"},inskickad:{label:"Inskickad",color:"bg-blue-100 text-blue-700"},godknd:{label:"Godknd",color:"bg-emerald-100 text-emerald-700"},nekad:{label:"Nekad / Komplettera",color:"bg-rose-100 text-rose-700"}};function z3e({userEmail:e}){var I,F,U,W,D;const[t,r]=P.useState(0),[s,a]=P.useState(!1),i=$n(),o=ev(new Date,t),l=Fa(o,{weekStartsOn:1}),c=Pc(o,{weekStartsOn:1}),d=Pz(o,{weekStartsOn:1,firstWeekContainsDate:4}),u=Zde(o),{data:h=[]}=He({queryKey:["timeEntries",e,Ce(l,"yyyy-MM-dd")],queryFn:async()=>(await oe.entities.TimeEntry.filter({employee_email:e},"-date",100)).filter(z=>{const Z=bs(z.date);return Z>=l&&Z<=c}),enabled:!!e}),x=(()=>{const R={monday:0,tuesday:0,wednesday:0,thursday:0,friday:0,saturday:0,sunday:0};let z=0;h.forEach(Q=>{if(Q.status==="completed"&&Q.total_hours){const H=bs(Q.date),ne=Ce(H,"EEEE",{locale:ut}).toLowerCase(),ue={mndag:"monday",tisdag:"tuesday",onsdag:"wednesday",torsdag:"thursday",fredag:"friday",lrdag:"saturday",sndag:"sunday"};ue[ne]&&(R[ue[ne]]+=Q.total_hours),z+=Q.total_hours}});const Z=40,se=Z-z;let J="ej_klar";return z>=40&&(J=z===40?"klar":"vertid"),{reported_hours:z,remaining_hours:se,status:J,daily_breakdown:R,target_hours:Z}})(),{data:b}=He({queryKey:["weeklyReport",e,d,u],queryFn:async()=>{const R=await oe.entities.WeeklyReport.filter({employee_email:e,week_number:d,year:u});return R.length>0?R[0]:await oe.entities.WeeklyReport.create({employee_email:e,week_start_date:Ce(l,"yyyy-MM-dd"),week_end_date:Ce(c,"yyyy-MM-dd"),week_number:d,year:u,...x})},enabled:!!e}),y=Xt({mutationFn:async R=>{if(b!=null&&b.id)return await oe.entities.WeeklyReport.update(b.id,R)},onSuccess:()=>{i.invalidateQueries(["weeklyReport"])}});P.useEffect(()=>{b&&!b.is_locked&&y.mutate({reported_hours:x.reported_hours,remaining_hours:x.remaining_hours,status:x.status,daily_breakdown:x.daily_breakdown})},[h.length,b==null?void 0:b.id]);const v=Xt({mutationFn:async()=>await oe.entities.WeeklyReport.update(b.id,{submission_status:"inskickad",submitted_at:new Date().toISOString()}),onSuccess:()=>{i.invalidateQueries(["weeklyReport"]),a(!1)}}),j=((I=fS[x.status])==null?void 0:I.icon)||Vt,w=Math.min(x.reported_hours/x.target_hours*100,100),N=["Mndag","Tisdag","Onsdag","Torsdag","Fredag","Lrdag","Sndag"],A=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],C=t===0,M=(b==null?void 0:b.submission_status)==="ej_inskickad"&&!(b!=null&&b.is_locked)&&x.status!=="ej_klar";return n.jsxs("div",{className:"space-y-4",children:[n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>r(t-1),children:n.jsx(tp,{className:"h-4 w-4"})}),n.jsxs("div",{className:"text-center",children:[n.jsxs("h3",{className:"font-semibold text-slate-900",children:["Vecka ",d,", ",u]}),n.jsxs("p",{className:"text-sm text-slate-500",children:[Ce(l,"d MMM",{locale:ut})," - ",Ce(c,"d MMM",{locale:ut})]})]}),n.jsxs("div",{className:"flex gap-2",children:[!C&&n.jsx(ye,{variant:"outline",size:"sm",onClick:()=>r(0),children:"Idag"}),n.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>r(t+1),disabled:t>=0,children:n.jsx(Ph,{className:"h-4 w-4"})})]})]})})}),n.jsx(ce,{className:"border-0 shadow-md",children:n.jsxs(he,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-12 w-12 rounded-xl bg-slate-100 flex items-center justify-center",children:n.jsx(j,{className:"h-6 w-6 text-slate-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:"Veckorapport"}),n.jsx(it,{className:(F=fS[x.status])==null?void 0:F.color,children:(U=fS[x.status])==null?void 0:U.label})]})]}),(b==null?void 0:b.is_locked)&&n.jsxs("div",{className:"flex items-center gap-2 text-slate-500",children:[n.jsx(n3,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:"Lst"})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[n.jsx("span",{className:"text-slate-600",children:"Rapporterad tid"}),n.jsxs("span",{className:"font-semibold text-slate-900",children:[x.reported_hours.toFixed(1)," / ",x.target_hours,"h"]})]}),n.jsx(ag,{value:w,className:"h-3"})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{className:"text-center p-3 bg-slate-50 rounded-xl",children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Ml"}),n.jsxs("p",{className:"text-lg font-bold text-slate-900",children:[x.target_hours,"h"]})]}),n.jsxs("div",{className:"text-center p-3 bg-emerald-50 rounded-xl",children:[n.jsx("p",{className:"text-xs text-emerald-600 mb-1",children:"Rapporterat"}),n.jsxs("p",{className:"text-lg font-bold text-emerald-700",children:[x.reported_hours.toFixed(1),"h"]})]}),n.jsxs("div",{className:"text-center p-3 bg-amber-50 rounded-xl",children:[n.jsx("p",{className:"text-xs text-amber-600 mb-1",children:"terstr"}),n.jsxs("p",{className:"text-lg font-bold text-amber-700",children:[x.remaining_hours>0?x.remaining_hours.toFixed(1):0,"h"]})]})]}),b&&n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-xl",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Atteststatus"}),n.jsx(it,{className:(W=u7[b.submission_status])==null?void 0:W.color,children:(D=u7[b.submission_status])==null?void 0:D.label})]}),b.review_comment&&n.jsxs("div",{className:"mt-2 p-3 bg-blue-50 rounded-xl",children:[n.jsx("p",{className:"text-xs text-blue-600 mb-1",children:"Kommentar frn chef"}),n.jsx("p",{className:"text-sm text-blue-900",children:b.review_comment})]})]}),M&&n.jsxs(ye,{onClick:()=>a(!0),className:"w-full bg-slate-900 hover:bg-slate-800",children:[n.jsx(Fm,{className:"h-4 w-4 mr-2"}),"Skicka in fr attest"]})]})}),n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-6",children:[n.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Daglig uppdelning"}),n.jsx("div",{className:"space-y-2",children:N.map((R,z)=>{const Z=x.daily_breakdown[A[z]]||0,se=ev(Fa(new Date,{weekStartsOn:1}),t);se.setDate(se.getDate()+z);const J=Il(se,new Date);return n.jsxs(tt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:z*.05},className:`flex items-center justify-between p-3 rounded-xl transition-colors ${J?"bg-slate-100 border-2 border-slate-900":"bg-slate-50"}`,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`h-2 w-2 rounded-full ${Z>0?"bg-emerald-500":"bg-slate-300"}`}),n.jsx("span",{className:`text-sm ${J?"font-semibold text-slate-900":"text-slate-600"}`,children:R})]}),n.jsx("span",{className:`text-sm font-semibold ${Z>0?"text-slate-900":"text-slate-400"}`,children:Z>0?`${Z.toFixed(1)}h`:""})]},R)})})]})}),n.jsx(ay,{open:s,onOpenChange:a,children:n.jsxs(yg,{children:[n.jsxs(bg,{children:[n.jsx(wg,{children:"Skicka in veckorapport fr attest"}),n.jsxs(_g,{children:["Du r p vg att skicka in vecka ",d," (",x.reported_hours.toFixed(1),"h) fr attest. Efter inskick kan du inte gra ndringar frrn rapporten har hanterats."]})]}),n.jsxs(jg,{children:[n.jsx(kg,{children:"Avbryt"}),n.jsx(Ng,{onClick:()=>v.mutate(),children:"Skicka in"})]})]})})]})}function V3e({open:e,onClose:t,entry:r,onSuccess:s}){const[a,i]=P.useState(!1),[o,l]=P.useState(!1),[c,d]=P.useState({clock_in_time:"",clock_out_time:"",edit_reason:""}),{data:u=[]}=He({queryKey:["projects"],queryFn:()=>oe.entities.Project.list(),initialData:[]}),h=u.filter(b=>b.status==="pgende"||b.status==="planerat");P.useEffect(()=>{r&&d({clock_in_time:r.clock_in_time?Ce(new Date(r.clock_in_time),"yyyy-MM-dd'T'HH:mm"):"",clock_out_time:r.clock_out_time?Ce(new Date(r.clock_out_time),"yyyy-MM-dd'T'HH:mm"):"",edit_reason:""})},[r]);const g=async b=>{if(b.preventDefault(),!c.edit_reason||c.edit_reason.trim().length<5){alert("Vnligen ange en frklaring till ndringen (minst 5 tecken)");return}i(!0);try{const y=await oe.auth.me(),v=new Date(c.clock_in_time),j=c.clock_out_time?new Date(c.clock_out_time):null,w=j?(j-v)/(1e3*60*60):null,N={original_clock_in_time:r.original_clock_in_time||r.clock_in_time,original_clock_out_time:r.original_clock_out_time||r.clock_out_time,clock_in_time:c.clock_in_time,clock_out_time:c.clock_out_time||null,total_hours:w?Number(w.toFixed(2)):r.total_hours,edit_reason:c.edit_reason,edited_by:y.email,edited_at:new Date().toISOString(),status:"pending_review"};await oe.entities.TimeEntry.update(r.id,N),i(!1),l(!0)}catch(y){console.error("Error updating time entry:",y),alert("Kunde inte uppdatera tidrapport: "+y.message),i(!1)}},x=async b=>{i(!0);try{const y=new Date(c.clock_in_time),v=c.clock_out_time?new Date(c.clock_out_time):null,j=v?(v-y)/(1e3*60*60):0,w=r.total_break_minutes||0,N=j-w/60;await oe.entities.TimeEntry.update(r.id,{project_allocations:b,total_hours:Number(N.toFixed(2))});try{await oe.functions.invoke("checkProjectBudget",{time_entry_id:r.id})}catch(A){console.error("Error checking project budget:",A)}s(),t(),d({clock_in_time:"",clock_out_time:"",edit_reason:""}),l(!1)}catch(y){console.error("Error saving project allocation:",y),alert("Kunde inte spara projektfrdelning: "+y.message)}i(!1)};if(!r)return null;if(o){const b=new Date(c.clock_in_time),y=c.clock_out_time?new Date(c.clock_out_time):null,v=y?(y-b)/(1e3*60*60):0,j=r.total_break_minutes||0,w=v-j/60,N={...r,clock_in_time:c.clock_in_time,clock_out_time:c.clock_out_time,total_hours:Number(w.toFixed(2))};return n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"sm:max-w-3xl max-h-[90vh] overflow-y-auto",children:[n.jsx(er,{children:n.jsx(tr,{children:"Frdela arbetstid"})}),n.jsx(FC,{timeEntry:N,projects:h,onSave:x,onCancel:()=>{l(!1),t()}})]})})}return n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"sm:max-w-md",children:[n.jsx(er,{children:n.jsx(tr,{className:"text-xl font-semibold",children:"Korrigera tidrapport"})}),n.jsxs("form",{onSubmit:g,className:"space-y-5 mt-4",children:[n.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[n.jsx("p",{className:"text-xs text-blue-800 mb-1",children:"Ursprunglig tid:"}),n.jsxs("p",{className:"text-sm font-medium text-blue-900",children:[Ce(new Date(r.clock_in_time),"PPp",{locale:ut}),r.clock_out_time&&` - ${Ce(new Date(r.clock_out_time),"p",{locale:ut})}`]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"clock_in_time",children:"Ny instmplingstid"}),n.jsx(De,{id:"clock_in_time",type:"datetime-local",value:c.clock_in_time,onChange:b=>d(y=>({...y,clock_in_time:b.target.value})),className:"h-11",required:!0})]}),r.clock_out_time&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"clock_out_time",children:"Ny utstmplingstid"}),n.jsx(De,{id:"clock_out_time",type:"datetime-local",value:c.clock_out_time,onChange:b=>d(y=>({...y,clock_out_time:b.target.value})),className:"h-11",min:c.clock_in_time,required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"edit_reason",children:"Frklaring till ndring *"}),n.jsx(Zn,{id:"edit_reason",value:c.edit_reason,onChange:b=>d(y=>({...y,edit_reason:b.target.value})),placeholder:"Beskriv varfr du ndrar tiden...",className:"min-h-[80px] resize-none",required:!0}),n.jsx("p",{className:"text-xs text-slate-500",children:"Minst 5 tecken krvs"})]}),n.jsx("div",{className:"p-3 bg-amber-50 rounded-lg border border-amber-200",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(ja,{className:"h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0"}),n.jsx("p",{className:"text-xs text-amber-800",children:"ndringen skickas till granskning och mste godknnas av en administratr."})]})}),n.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:t,children:"Avbryt"}),n.jsx(ye,{type:"submit",disabled:a,className:"min-w-[100px]",children:a?n.jsx(Ot,{className:"w-4 h-4 animate-spin"}):"Skicka fr granskning"})]})]})]})})}function U3e({open:e,onClose:t,onSuccess:r}){const[s,a]=P.useState(!1),[i,o]=P.useState({employee_email:"",type:"semester",start_date:"",end_date:"",hours_per_day:8,reason:""}),{data:l=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list(),enabled:e}),c=i.start_date&&i.end_date?jh(new Date(i.end_date),new Date(i.start_date))+1:0,d=async u=>{u.preventDefault(),a(!0);try{const h=await oe.auth.me();await oe.entities.LeaveRequest.create({...i,days:c,status:"approved",reviewed_by:h.email,reviewed_at:new Date().toISOString()}),r(),t(),o({employee_email:"",type:"semester",start_date:"",end_date:"",hours_per_day:8,reason:""})}catch(h){console.error("Error creating leave:",h),alert("Kunde inte registrera ledighet: "+h.message)}a(!1)};return n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"sm:max-w-md",children:[n.jsx(er,{children:n.jsxs(tr,{className:"text-xl font-semibold flex items-center gap-2",children:[n.jsx(bd,{className:"h-5 w-5"}),"Registrera ledighet"]})}),n.jsxs("form",{onSubmit:d,className:"space-y-5 mt-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Vlj anstlld"}),n.jsxs(Nt,{value:i.employee_email,onValueChange:u=>o(h=>({...h,employee_email:u})),children:[n.jsx(jt,{className:"h-11",children:n.jsx(kt,{placeholder:"Vlj anstlld..."})}),n.jsx(wt,{children:l.map(u=>n.jsx(Ne,{value:u.user_email,children:u.user_email},u.user_email))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Typ av ledighet"}),n.jsxs(Nt,{value:i.type,onValueChange:u=>o(h=>({...h,type:u})),children:[n.jsx(jt,{className:"h-11",children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"semester",children:"Semester"}),n.jsx(Ne,{value:"vab",children:"VAB"}),n.jsx(Ne,{value:"flex",children:"Flex"}),n.jsx(Ne,{value:"sjuk",children:"Sjukfrnvaro"}),n.jsx(Ne,{value:"tjnstledigt",children:"Tjnstledigt"}),n.jsx(Ne,{value:"frldraledigt",children:"Frldraledigt"}),n.jsx(Ne,{value:"annat",children:"Annat"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"start_date",children:"Frn datum"}),n.jsx(De,{id:"start_date",type:"date",value:i.start_date,onChange:u=>o(h=>({...h,start_date:u.target.value})),className:"h-11",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"end_date",children:"Till datum"}),n.jsx(De,{id:"end_date",type:"date",value:i.end_date,onChange:u=>o(h=>({...h,end_date:u.target.value})),min:i.start_date,className:"h-11",required:!0})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"hours_per_day",children:"Timmar per dag"}),n.jsx(De,{id:"hours_per_day",type:"number",value:i.hours_per_day,onChange:u=>o(h=>({...h,hours_per_day:Number(u.target.value)})),className:"h-11",min:"0.5",max:"24",step:"0.5",required:!0})]}),c>0&&n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 rounded-lg",children:[n.jsx(JP,{className:"h-4 w-4 text-blue-600"}),n.jsxs("span",{className:"text-sm text-blue-800",children:["Totalt ",n.jsxs("span",{className:"font-semibold",children:[c," ",c===1?"dag":"dagar"]}),i.hours_per_day&&i.hours_per_day!==8&&n.jsxs("span",{className:"ml-2",children:["(",i.hours_per_day,"h/dag = ",c*i.hours_per_day,"h totalt)"]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"reason",children:"Anteckning (valfritt)"}),n.jsx(Zn,{id:"reason",value:i.reason,onChange:u=>o(h=>({...h,reason:u.target.value})),placeholder:"Lgg till en notering...",className:"min-h-[80px] resize-none"})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:t,children:"Avbryt"}),n.jsx(ye,{type:"submit",disabled:s||c<=0||!i.employee_email,className:"min-w-[100px]",children:s?n.jsx(Ot,{className:"w-4 h-4 animate-spin"}):"Registrera"})]})]})]})})}function H3e({open:e,onClose:t,onSuccess:r}){const[s,a]=P.useState(!1),[i,o]=P.useState({employee_email:"",hours:0,reason:"",type:"add"}),{data:l=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list(),enabled:e}),c=async d=>{d.preventDefault(),a(!0);try{const u=await oe.auth.me(),h=l.find(b=>b.user_email===i.employee_email);if(!h)throw new Error("Anstlld hittades inte");const g=i.type==="add"?i.hours:-i.hours,x=(h.flex_balance||0)+g;await oe.entities.Employee.update(h.id,{flex_balance:x}),await oe.entities.ApprovalRequest.create({type:"flex_adjustment",requester_email:i.employee_email,requester_name:h.user_email,description:`Flex-justering: ${i.type==="add"?"+":"-"}${Math.abs(i.hours)}h`,reason:i.reason,status:"approved",reviewed_by:u.email,reviewed_at:new Date().toISOString(),original_data:{flex_balance:h.flex_balance},requested_data:{flex_balance:x}}),r(),t(),o({employee_email:"",hours:0,reason:"",type:"add"})}catch(u){console.error("Error registering flex:",u),alert("Kunde inte registrera flextid: "+u.message)}a(!1)};return n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"sm:max-w-md",children:[n.jsx(er,{children:n.jsxs(tr,{className:"text-xl font-semibold flex items-center gap-2",children:[n.jsx(s9,{className:"h-5 w-5"}),"Registrera flextid"]})}),n.jsxs("form",{onSubmit:c,className:"space-y-5 mt-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Vlj anstlld"}),n.jsxs(Nt,{value:i.employee_email,onValueChange:d=>o(u=>({...u,employee_email:d})),children:[n.jsx(jt,{className:"h-11",children:n.jsx(kt,{placeholder:"Vlj anstlld..."})}),n.jsx(wt,{children:l.map(d=>n.jsx(Ne,{value:d.user_email,children:d.user_email},d.user_email))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Typ av justering"}),n.jsxs(Nt,{value:i.type,onValueChange:d=>o(u=>({...u,type:d})),children:[n.jsx(jt,{className:"h-11",children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"add",children:"Lgg till flextid"}),n.jsx(Ne,{value:"subtract",children:"Dra bort flextid"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"hours",children:"Antal timmar"}),n.jsx(De,{id:"hours",type:"number",value:i.hours,onChange:d=>o(u=>({...u,hours:Number(d.target.value)})),className:"h-11",min:"0.5",step:"0.5",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"reason",children:"Anledning (valfritt)"}),n.jsx(Zn,{id:"reason",value:i.reason,onChange:d=>o(u=>({...u,reason:d.target.value})),placeholder:"Lgg till en notering...",className:"min-h-[80px] resize-none"})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:t,children:"Avbryt"}),n.jsx(ye,{type:"submit",disabled:s||!i.employee_email||i.hours===0,className:"min-w-[100px]",children:s?n.jsx(Ot,{className:"w-4 h-4 animate-spin"}):"Registrera"})]})]})]})})}function W3e(){const[e,t]=P.useState({}),r=$n(),{data:s=[],isLoading:a}=He({queryKey:["timeEntriesReview"],queryFn:async()=>(await oe.entities.TimeEntry.list("-created_date",100)).filter(d=>d.status==="pending_review"||d.anomaly_flag)}),i=Xt({mutationFn:({id:c,status:d,comment:u})=>oe.entities.TimeEntry.update(c,{status:d,review_comment:u}),onSuccess:()=>{r.invalidateQueries({queryKey:["timeEntriesReview"]}),t({})}}),o=c=>{i.mutate({id:c.id,status:"approved",comment:e[c.id]||"Godknd"})},l=c=>{const d=e[c.id];if(!d||d.trim().length<5){alert("Vnligen ange en frklaring fr avslag (minst 5 tecken)");return}i.mutate({id:c.id,status:"rejected",comment:d})};return a?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-12 text-center",children:n.jsx(Ot,{className:"h-12 w-12 animate-spin text-slate-400 mx-auto"})})}):s.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(ti,{className:"h-16 w-16 text-emerald-500 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Allt klart!"}),n.jsx("p",{className:"text-slate-500",children:"Inga tidrapporter behver granskas"})]})}):n.jsxs("div",{className:"space-y-4",children:[n.jsx(ce,{className:"border-0 shadow-sm bg-amber-50 border-amber-200",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Kr,{className:"h-5 w-5 text-amber-600"}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-amber-900",children:[s.length," ",s.length===1?"tidrapport krver":"tidrapporter krver"," granskning"]}),n.jsx("p",{className:"text-xs text-amber-700 mt-0.5",children:"Korrigeringar och avvikelser som behver godknnas"})]})]})})}),n.jsx("div",{className:"space-y-3",children:s.map(c=>{var d;return n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-5",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:c.employee_email}),n.jsx("p",{className:"text-xs text-slate-500",children:Ce(new Date(c.clock_in_time),"PPp",{locale:ut})})]}),c.anomaly_flag&&n.jsxs(it,{variant:"destructive",className:"gap-1",children:[n.jsx(Kr,{className:"h-3 w-3"}),"Avvikelse"]})]}),c.edit_reason&&n.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200 mb-3",children:[n.jsx("p",{className:"text-xs font-medium text-blue-900 mb-1",children:"Frklaring frn medarbetare:"}),n.jsx("p",{className:"text-sm text-blue-800",children:c.edit_reason})]}),c.anomaly_reason&&n.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg border border-amber-200 mb-3",children:[n.jsx("p",{className:"text-xs font-medium text-amber-900 mb-1",children:"Systemvarning:"}),n.jsx("p",{className:"text-sm text-amber-800",children:c.anomaly_reason})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3 text-sm",children:[c.original_clock_in_time&&n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-500 text-xs",children:"Ursprunglig tid:"}),n.jsxs("p",{className:"font-medium text-slate-900",children:[Ce(new Date(c.original_clock_in_time),"HH:mm")," -",c.original_clock_out_time&&` ${Ce(new Date(c.original_clock_out_time),"HH:mm")}`]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-500 text-xs",children:"Ny tid:"}),n.jsxs("p",{className:"font-medium text-slate-900",children:[Ce(new Date(c.clock_in_time),"HH:mm")," -",c.clock_out_time&&` ${Ce(new Date(c.clock_out_time),"HH:mm")}`]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-500 text-xs",children:"Totalt:"}),n.jsxs("p",{className:"font-medium text-slate-900",children:[(d=c.total_hours)==null?void 0:d.toFixed(1)," h"]})]}),c.edited_by&&n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-500 text-xs",children:"ndrad av:"}),n.jsx("p",{className:"font-medium text-slate-900 text-xs truncate",children:c.edited_by})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Zn,{placeholder:"Lgg till kommentar (valfritt vid godknnande, obligatorisk vid avslag)...",value:e[c.id]||"",onChange:u=>t(h=>({...h,[c.id]:u.target.value})),className:"min-h-[60px] resize-none text-sm"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ye,{onClick:()=>l(c),disabled:i.isPending,variant:"outline",size:"sm",className:"flex-1 text-rose-600 hover:text-rose-700 hover:bg-rose-50",children:[n.jsx(xh,{className:"h-4 w-4 mr-2"}),"Avsl"]}),n.jsxs(ye,{onClick:()=>o(c),disabled:i.isPending,size:"sm",className:"flex-1 bg-emerald-600 hover:bg-emerald-700",children:[n.jsx(ti,{className:"h-4 w-4 mr-2"}),"Godknn"]})]})]})]})})},c.id)})})]})}function K3e({currentUser:e}){var v;const[t,r]=P.useState(null),[s,a]=P.useState(""),[i,o]=P.useState(!1),[l,c]=P.useState(null),d=$n(),{data:u=[]}=He({queryKey:["weeklyReports","pending"],queryFn:async()=>await oe.entities.WeeklyReport.filter({submission_status:"inskickad"},"-submitted_at",50)}),{data:h=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list()}),g=Xt({mutationFn:async({reportId:j,action:w,comment:N})=>{const A={submission_status:w==="approve"?"godknd":"nekad",is_locked:w==="approve",reviewed_by:e.email,reviewed_at:new Date().toISOString(),review_comment:N};return await oe.entities.WeeklyReport.update(j,A)},onSuccess:()=>{d.invalidateQueries(["weeklyReports"]),o(!1),r(null),a("")}}),x=(j,w)=>{r(j),c(w),a(""),o(!0)},b=()=>{t&&g.mutate({reportId:t.id,action:l,comment:s})},y=j=>{const w=h.find(N=>N.user_email===j);return(w==null?void 0:w.user_email)||j};return n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Veckorapporter att attestera"}),n.jsxs("p",{className:"text-sm text-slate-500",children:[u.length," rapporter vntar"]})]})}),u.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"py-12 text-center",children:[n.jsx($r,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Inga rapporter att attestera"})]})}):n.jsx("div",{className:"space-y-3",children:n.jsx(_a,{mode:"popLayout",children:u.map((j,w)=>{var N,A;return n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:w*.05},children:n.jsx(ce,{className:"border-0 shadow-sm hover:shadow-md transition-shadow",children:n.jsxs(he,{className:"p-5",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-xl bg-slate-100 flex items-center justify-center",children:n.jsx(bd,{className:"h-5 w-5 text-slate-600"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-slate-900",children:y(j.employee_email)}),n.jsxs("p",{className:"text-sm text-slate-500",children:["Vecka ",j.week_number,", ",j.year]})]})]}),n.jsx(it,{className:"bg-blue-100 text-blue-700",children:"Vntar"})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[n.jsxs("div",{className:"text-center p-2 bg-slate-50 rounded-lg",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Ml"}),n.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[j.target_hours,"h"]})]}),n.jsxs("div",{className:"text-center p-2 bg-emerald-50 rounded-lg",children:[n.jsx("p",{className:"text-xs text-emerald-600",children:"Rapporterat"}),n.jsxs("p",{className:"text-sm font-semibold text-emerald-700",children:[(N=j.reported_hours)==null?void 0:N.toFixed(1),"h"]})]}),n.jsxs("div",{className:"text-center p-2 bg-blue-50 rounded-lg",children:[n.jsx("p",{className:"text-xs text-blue-600",children:"Status"}),n.jsx("p",{className:"text-sm font-semibold text-blue-700 capitalize",children:(A=j.status)==null?void 0:A.replace("_"," ")})]})]}),j.submitted_at&&n.jsxs("p",{className:"text-xs text-slate-500 mb-4",children:["Inskickad ",Ce(bs(j.submitted_at),"d MMM 'kl' HH:mm",{locale:ut})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ye,{onClick:()=>x(j,"reject"),variant:"outline",size:"sm",className:"flex-1 text-rose-600 hover:text-rose-700 hover:bg-rose-50",children:[n.jsx(xh,{className:"h-4 w-4 mr-2"}),"Neka"]}),n.jsxs(ye,{onClick:()=>x(j,"approve"),size:"sm",className:"flex-1 bg-emerald-600 hover:bg-emerald-700",children:[n.jsx($r,{className:"h-4 w-4 mr-2"}),"Godknn"]})]})]})})},j.id)})})}),n.jsx(ay,{open:i,onOpenChange:o,children:n.jsxs(yg,{children:[n.jsxs(bg,{children:[n.jsx(wg,{children:l==="approve"?"Godknn veckorapport":"Neka veckorapport"}),n.jsx(_g,{children:t&&n.jsxs(n.Fragment,{children:[y(t.employee_email)," - Vecka ",t.week_number,", ",t.year,n.jsx("br",{}),"Rapporterad tid: ",(v=t.reported_hours)==null?void 0:v.toFixed(1),"h / ",t.target_hours,"h"]})})]}),n.jsxs("div",{className:"py-4",children:[n.jsxs("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:["Kommentar ",l==="reject"?"(obligatorisk)":"(valfritt)"]}),n.jsx(Zn,{value:s,onChange:j=>a(j.target.value),placeholder:"Skriv en kommentar...",className:"min-h-[100px]"})]}),n.jsxs(jg,{children:[n.jsx(kg,{children:"Avbryt"}),n.jsx(Ng,{onClick:b,disabled:l==="reject"&&!s.trim(),className:l==="approve"?"bg-emerald-600 hover:bg-emerald-700":"bg-rose-600 hover:bg-rose-700",children:l==="approve"?"Godknn":"Neka"})]})]})})]})}function G3e(){const[e,t]=P.useState(null),[r,s]=P.useState(null),[a,i]=P.useState(!1),[o,l]=P.useState(!1),[c,d]=P.useState(!1),[u,h]=P.useState(!1),[g,x]=P.useState(null),[b,y]=P.useState("time"),v=$n();P.useEffect(()=>{oe.auth.me().then(async z=>{if(t(z),z){const Z=await oe.entities.Employee.filter({user_email:z.email});Z.length>0&&s(Z[0])}}).catch(()=>{t(null),s(null)})},[]);const{data:j=[],isLoading:w}=He({queryKey:["myLeaveRequests",e==null?void 0:e.email],queryFn:()=>oe.entities.LeaveRequest.filter({employee_email:e==null?void 0:e.email},"-start_date",100),enabled:!!e}),{data:N=[],isLoading:A}=He({queryKey:["teamLeaveRequests"],queryFn:()=>oe.entities.LeaveRequest.filter({status:"pending"},"-created_date"),enabled:(e==null?void 0:e.role)==="admin"}),{data:C=[],refetch:M}=He({queryKey:["timeEntries",e==null?void 0:e.email],queryFn:async()=>e!=null&&e.email?await oe.entities.TimeEntry.filter({employee_email:e.email},"-created_date",100):[],enabled:!!(e!=null&&e.email)}),I=C.find(z=>z.status==="active"),F=Xt({mutationFn:({id:z,data:Z})=>oe.entities.LeaveRequest.update(z,Z),onSuccess:()=>{v.invalidateQueries({queryKey:["myLeaveRequests"]}),v.invalidateQueries({queryKey:["teamLeaveRequests"]})}}),U=z=>{F.mutate({id:z,data:{status:"approved",reviewed_by:e==null?void 0:e.email,reviewed_at:new Date().toISOString()}})},W=z=>{F.mutate({id:z,data:{status:"rejected",reviewed_by:e==null?void 0:e.email,reviewed_at:new Date().toISOString()}})},D=j.filter(z=>z.status==="pending"),R=j.filter(z=>z.status!=="pending");return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white",children:[n.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-6 pb-24",children:[n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Tid & Frnvaro"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Stmpla och hantera ledighet"})]}),n.jsx(S3e,{vacationBalance:(r==null?void 0:r.vacation_balance)||25,flexBalance:(r==null?void 0:r.flex_balance)||0})]}),n.jsxs(Ls,{value:b,onValueChange:y,className:"mt-8",children:[n.jsxs(As,{className:`w-full h-auto p-1 bg-white shadow-sm rounded-2xl grid ${(e==null?void 0:e.role)==="admin"?"grid-cols-5":"grid-cols-3"}`,children:[n.jsx(gt,{value:"time",className:"rounded-xl text-xs data-[state=active]:shadow-sm",children:"Tidrapport"}),n.jsx(gt,{value:"week",className:"rounded-xl text-xs data-[state=active]:shadow-sm",children:"Vecka"}),n.jsx(gt,{value:"mine",className:"rounded-xl text-xs data-[state=active]:shadow-sm",children:"Ledighet"}),(e==null?void 0:e.role)==="admin"&&n.jsxs(n.Fragment,{children:[n.jsx(gt,{value:"review",className:"rounded-xl text-xs data-[state=active]:shadow-sm",children:"Granska"}),n.jsxs(gt,{value:"team",className:"rounded-xl text-xs data-[state=active]:shadow-sm",children:["Team (",N.length,")"]})]})]}),n.jsxs(Dt,{value:"time",className:"mt-6 space-y-6",children:[n.jsx($3e,{userEmail:e==null?void 0:e.email,activeEntry:I,onUpdate:()=>{M(),v.invalidateQueries({queryKey:["employees"]})}}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-slate-500 mb-3",children:"versikt"}),n.jsx(B3e,{entries:C})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-slate-500 mb-3",children:"Historik"}),n.jsx(q3e,{entries:C,onEdit:z=>{x(z),h(!0)}})]})]}),n.jsx(Dt,{value:"week",className:"mt-6",children:n.jsx(z3e,{userEmail:e==null?void 0:e.email})}),n.jsxs(Dt,{value:"mine",className:"mt-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:"Mina anskningar"}),n.jsxs("div",{className:"flex gap-2",children:[(e==null?void 0:e.role)==="admin"&&n.jsxs(n.Fragment,{children:[n.jsxs(ye,{onClick:()=>d(!0),size:"sm",variant:"outline",className:"rounded-full shadow-sm",children:[n.jsx(xr,{className:"w-4 h-4 mr-1.5"}),"Flex"]}),n.jsxs(ye,{onClick:()=>l(!0),size:"sm",variant:"outline",className:"rounded-full shadow-sm",children:[n.jsx(xr,{className:"w-4 h-4 mr-1.5"}),"Ledighet"]})]}),n.jsxs(ye,{onClick:()=>i(!0),size:"sm",className:"rounded-full shadow-sm",children:[n.jsx(xr,{className:"w-4 h-4 mr-1.5"}),"Ansk"]})]})]}),D.length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-slate-500 mb-3",children:"Vntar p godknnande"}),n.jsx("div",{className:"space-y-3",children:D.map((z,Z)=>n.jsx(uS,{request:z,index:Z},z.id))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-slate-500 mb-3",children:"Historik"}),n.jsx(_a,{mode:"popLayout",children:w?n.jsx("div",{className:"space-y-3",children:[1,2,3].map(z=>n.jsx("div",{className:"bg-white rounded-2xl h-24 animate-pulse"},z))}):R.length===0&&D.length===0?n.jsxs(tt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[n.jsx(yY,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Inga anskningar nnu"}),n.jsx(ye,{variant:"link",onClick:()=>i(!0),className:"mt-2",children:"Skapa din frsta anskan"})]}):n.jsx("div",{className:"space-y-3",children:R.map((z,Z)=>n.jsx(uS,{request:z,index:Z},z.id))})})]})]}),(e==null?void 0:e.role)==="admin"&&n.jsxs(n.Fragment,{children:[n.jsxs(Dt,{value:"review",className:"mt-6",children:[n.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Granska tidrapporter"}),n.jsx(W3e,{})]}),n.jsxs(Dt,{value:"team",className:"mt-6",children:[n.jsx(K3e,{currentUser:e}),n.jsx("h3",{className:"font-semibold text-slate-900 mb-4 mt-8",children:"Vntande anskningar"}),n.jsx(_a,{mode:"popLayout",children:A?n.jsx("div",{className:"space-y-3",children:[1,2,3].map(z=>n.jsx("div",{className:"bg-white rounded-2xl h-32 animate-pulse"},z))}):N.length===0?n.jsx(tt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:n.jsx("p",{className:"text-slate-500",children:"Inga vntande anskningar"})}):n.jsx("div",{className:"space-y-3",children:N.map((z,Z)=>n.jsx(uS,{request:z,isManager:!0,onApprove:U,onReject:W,showEmployee:!0,index:Z},z.id))})})]})]})]})]}),n.jsx(T3e,{open:a,onClose:()=>i(!1),onSuccess:()=>v.invalidateQueries({queryKey:["myLeaveRequests"]}),userEmail:e==null?void 0:e.email}),n.jsx(U3e,{open:o,onClose:()=>l(!1),onSuccess:()=>{v.invalidateQueries({queryKey:["myLeaveRequests"]}),v.invalidateQueries({queryKey:["teamLeaveRequests"]})}}),n.jsx(H3e,{open:c,onClose:()=>d(!1),onSuccess:()=>{v.invalidateQueries({queryKey:["employees"]})}}),n.jsx(V3e,{open:u,onClose:()=>{h(!1),x(null)},entry:g,onSuccess:()=>{M(),v.invalidateQueries({queryKey:["timeEntriesReview"]})}})]})}function Z3e({activeEntries:e,employees:t,anomalies:r}){const s=e.map(a=>{const i=t.find(o=>o.user_email===a.employee_email);return{...a,employee:i}});return n.jsxs("div",{className:"space-y-4",children:[n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsx(Ct,{className:"text-base",children:"Instmplade just nu"})}),n.jsx(he,{className:"space-y-3",children:s.length===0?n.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"Ingen r instmplad"}):s.map((a,i)=>{var o,l,c,d;return n.jsx(tt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:i*.05},className:"p-3 bg-emerald-50 rounded-lg",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-emerald-600 flex items-center justify-center text-white font-medium",children:(c=(l=(o=a.employee)==null?void 0:o.user_email)==null?void 0:l[0])==null?void 0:c.toUpperCase()}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-900",children:(d=a.employee)==null?void 0:d.user_email}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx(Vt,{className:"h-3 w-3 text-slate-500"}),n.jsxs("span",{className:"text-xs text-slate-600",children:["Sedan ",Ce(new Date(a.clock_in_time),"HH:mm")]})]}),a.clock_in_location&&n.jsxs("div",{className:"flex items-start gap-1 mt-1",children:[n.jsx(Fn,{className:"h-3 w-3 text-slate-400 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"text-xs text-slate-500 line-clamp-1",children:a.clock_in_location.address})]})]})]}),n.jsx("span",{className:"px-2 py-1 bg-emerald-600 text-white text-xs rounded-full",children:a.category})]})},a.id)})})]}),r.length>0&&n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"text-base flex items-center gap-2",children:[n.jsx(Kr,{className:"h-4 w-4 text-amber-600"}),"Avvikelser som krver tgrd"]})}),n.jsx(he,{className:"space-y-3",children:r.slice(0,5).map((a,i)=>{const o=t.find(l=>l.user_email===a.employee_email);return n.jsx(tt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:i*.05},className:"p-3 bg-amber-50 rounded-lg",children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-900",children:o==null?void 0:o.user_email}),n.jsx("p",{className:"text-xs text-slate-600 mt-1",children:Ce(new Date(a.date),"yyyy-MM-dd")}),n.jsx("p",{className:"text-xs text-amber-700 mt-1",children:a.anomaly_reason})]})})},a.id)})})]})]})}function Y3e({approvals:e,leaveRequests:t,employees:r}){const[s,a]=P.useState({}),i=$n(),o=Xt({mutationFn:({id:x,data:b})=>oe.entities.ApprovalRequest.update(x,b),onSuccess:()=>{i.invalidateQueries({queryKey:["approvals"]}),i.invalidateQueries({queryKey:["timeEntries"]})}}),l=Xt({mutationFn:({id:x,data:b})=>oe.entities.LeaveRequest.update(x,b),onSuccess:()=>{i.invalidateQueries({queryKey:["leaveRequests"]})}}),c=Xt({mutationFn:({id:x,data:b})=>oe.entities.TimeEntry.update(x,b),onSuccess:()=>{i.invalidateQueries({queryKey:["timeEntries"]})}}),d=async x=>{await o.mutateAsync({id:x.id,data:{status:"approved",reviewed_at:new Date().toISOString(),review_comment:s[x.id]||""}}),x.related_entity_id&&x.requested_data&&await c.mutateAsync({id:x.related_entity_id,data:{...x.requested_data,status:"approved",edit_reason:x.reason,edited_at:new Date().toISOString()}})},u=x=>{o.mutate({id:x.id,data:{status:"rejected",reviewed_at:new Date().toISOString(),review_comment:s[x.id]||""}})},h=x=>{l.mutate({id:x.id,data:{status:"approved",reviewed_at:new Date().toISOString(),review_comment:s[x.id]||""}})},g=x=>{l.mutate({id:x.id,data:{status:"rejected",reviewed_at:new Date().toISOString(),review_comment:s[x.id]||""}})};return n.jsxs("div",{className:"space-y-6",children:[e.length>0&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"text-sm font-medium text-slate-700",children:"Tidsjusteringar"}),e.map((x,b)=>n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:b*.05},children:n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-4",children:[n.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-100 flex items-center justify-center",children:n.jsx(ql,{className:"h-5 w-5 text-slate-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-slate-900",children:x.requester_name}),n.jsx("p",{className:"text-sm text-slate-600 mt-1",children:x.description}),n.jsx("p",{className:"text-xs text-slate-500 mt-2",children:Ce(new Date(x.created_date),"d MMM yyyy HH:mm",{locale:ut})})]})]}),x.reason&&n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg mb-3",children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Anledning:"}),n.jsx("p",{className:"text-sm text-slate-700",children:x.reason})]}),x.original_data&&x.requested_data&&n.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[n.jsxs("div",{className:"p-3 bg-rose-50 rounded-lg",children:[n.jsx("p",{className:"text-xs text-rose-700 mb-2 font-medium",children:"Nuvarande:"}),n.jsxs("p",{className:"text-sm text-rose-900",children:["In: ",Ce(new Date(x.original_data.clock_in_time),"HH:mm")]}),x.original_data.clock_out_time&&n.jsxs("p",{className:"text-sm text-rose-900",children:["Ut: ",Ce(new Date(x.original_data.clock_out_time),"HH:mm")]})]}),n.jsxs("div",{className:"p-3 bg-emerald-50 rounded-lg",children:[n.jsx("p",{className:"text-xs text-emerald-700 mb-2 font-medium",children:"Frslag:"}),n.jsxs("p",{className:"text-sm text-emerald-900",children:["In: ",Ce(new Date(x.requested_data.clock_in_time),"HH:mm")]}),x.requested_data.clock_out_time&&n.jsxs("p",{className:"text-sm text-emerald-900",children:["Ut: ",Ce(new Date(x.requested_data.clock_out_time),"HH:mm")]})]})]}),n.jsx(Zn,{placeholder:"Kommentar (valfritt)",value:s[x.id]||"",onChange:y=>a(v=>({...v,[x.id]:y.target.value})),className:"mb-3 h-20 resize-none"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ye,{onClick:()=>u(x),variant:"outline",className:"flex-1",disabled:o.isPending,children:[n.jsx(xh,{className:"h-4 w-4 mr-2"}),"Neka"]}),n.jsxs(ye,{onClick:()=>d(x),className:"flex-1 bg-emerald-600 hover:bg-emerald-700",disabled:o.isPending,children:[n.jsx(ti,{className:"h-4 w-4 mr-2"}),"Godknn"]})]})]})})},x.id))]}),t.length>0&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"text-sm font-medium text-slate-700",children:"Ledighetsanskningar"}),t.map((x,b)=>n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:b*.05},children:n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-4",children:[n.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-purple-100 flex items-center justify-center",children:n.jsx(_r,{className:"h-5 w-5 text-purple-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-slate-900",children:x.employee_email}),n.jsx("p",{className:"text-sm text-slate-600 mt-1",children:x.type}),n.jsxs("p",{className:"text-sm text-slate-600",children:[Ce(new Date(x.start_date),"d MMM",{locale:ut})," - ",Ce(new Date(x.end_date),"d MMM yyyy",{locale:ut})]}),n.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[x.days," dag",x.days!==1?"ar":""]})]})]}),x.reason&&n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg mb-3",children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Motivering:"}),n.jsx("p",{className:"text-sm text-slate-700",children:x.reason})]}),n.jsx(Zn,{placeholder:"Kommentar (valfritt)",value:s[x.id]||"",onChange:y=>a(v=>({...v,[x.id]:y.target.value})),className:"mb-3 h-20 resize-none"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ye,{onClick:()=>g(x),variant:"outline",className:"flex-1",disabled:l.isPending,children:[n.jsx(xh,{className:"h-4 w-4 mr-2"}),"Neka"]}),n.jsxs(ye,{onClick:()=>h(x),className:"flex-1 bg-emerald-600 hover:bg-emerald-700",disabled:l.isPending,children:[n.jsx(ti,{className:"h-4 w-4 mr-2"}),"Godknn"]})]})]})})},x.id))]}),e.length===0&&t.length===0&&n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-6 text-center",children:[n.jsx(Vt,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Inga vntande godknnanden"})]})})]})}function X3e({timeEntries:e,employees:t}){const[r,s]=P.useState(Ce(new Date,"yyyy-MM")),a=ri(new Date(r+"-01")),i=ni(a),o=e.filter(u=>{const h=new Date(u.date);return h>=a&&h<=i&&u.status==="completed"}),l=t.map(u=>{const h=o.filter(y=>y.employee_email===u.user_email),g=h.reduce((y,v)=>y+(v.total_hours||0),0),x=(u.normal_work_hours_per_day||8)*22,b=h.reduce((y,v)=>y+(v.overtime_hours||0),0);return{employee:u,totalHours:g,expectedHours:x,overtime:b,entries:h.length}}).sort((u,h)=>h.totalHours-u.totalHours),c=l.reduce((u,h)=>u+h.totalHours,0),d=l.reduce((u,h)=>u+h.overtime,0);return n.jsxs("div",{className:"space-y-4",children:[n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:"Vlj mnad"}),n.jsxs(Nt,{value:r,onValueChange:s,children:[n.jsx(jt,{className:"w-40",children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:Ce(new Date,"yyyy-MM"),children:"Denna mnad"}),n.jsx(Ne,{value:Ce(new Date(new Date().setMonth(new Date().getMonth()-1)),"yyyy-MM"),children:"Frra mnaden"}),n.jsx(Ne,{value:Ce(new Date(new Date().setMonth(new Date().getMonth()-2)),"yyyy-MM"),children:Ce(new Date(new Date().setMonth(new Date().getMonth()-2)),"MMMM",{locale:ut})})]})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Totalt timmar"}),n.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[c.toFixed(0),"h"]})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Medel/person"}),n.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[(c/t.length).toFixed(0),"h"]})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"vertid"}),n.jsxs("p",{className:"text-2xl font-bold text-amber-600",children:[d.toFixed(0),"h"]})]})]})]})}),n.jsx("div",{className:"space-y-3",children:l.map((u,h)=>n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-100 flex items-center justify-center",children:n.jsx(Fr,{className:"h-5 w-5 text-slate-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-slate-900",children:u.employee.user_email}),n.jsx("p",{className:"text-xs text-slate-500",children:u.employee.department})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-xl font-bold text-slate-900",children:[u.totalHours.toFixed(0),"h"]}),n.jsxs("p",{className:"text-xs text-slate-500",children:[u.entries," dagar"]})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[n.jsxs("div",{className:"p-2 bg-slate-50 rounded",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Frvntat"}),n.jsxs("p",{className:"text-sm font-semibold text-slate-700",children:[u.expectedHours,"h"]})]}),n.jsxs("div",{className:"p-2 bg-slate-50 rounded",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Differens"}),n.jsxs("p",{className:`text-sm font-semibold ${u.totalHours>=u.expectedHours?"text-emerald-600":"text-rose-600"}`,children:[u.totalHours>=u.expectedHours?"+":"",(u.totalHours-u.expectedHours).toFixed(0),"h"]})]}),n.jsxs("div",{className:"p-2 bg-amber-50 rounded",children:[n.jsx("p",{className:"text-xs text-amber-700",children:"vertid"}),n.jsxs("p",{className:"text-sm font-semibold text-amber-900",children:[u.overtime.toFixed(0),"h"]})]})]})]})},u.employee.id))})]})}function Q3e(){var b,y;const[e,t]=P.useState(null),[r,s]=P.useState("versikt");P.useEffect(()=>{oe.auth.me().then(t).catch(()=>t(null))},[]);const{data:a}=He({queryKey:["employee",e==null?void 0:e.email],queryFn:async()=>e!=null&&e.email?(await oe.entities.Employee.list()).find(j=>j.user_email===e.email):null,enabled:!!(e!=null&&e.email)}),{data:i=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list(),enabled:!!(a!=null&&a.is_manager)}),{data:o=[]}=He({queryKey:["allTimeEntries"],queryFn:()=>oe.entities.TimeEntry.list(),enabled:!!(a!=null&&a.is_manager)}),{data:l=[]}=He({queryKey:["approvals"],queryFn:()=>oe.entities.ApprovalRequest.list("-created_date",100),enabled:!!(a!=null&&a.is_manager)}),{data:c=[]}=He({queryKey:["leaveRequests"],queryFn:()=>oe.entities.LeaveRequest.list("-created_date",50),enabled:!!(a!=null&&a.is_manager)});if(!(a!=null&&a.is_manager)&&(e==null?void 0:e.role)!=="admin")return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white flex items-center justify-center",children:n.jsx(ce,{className:"max-w-md",children:n.jsxs(he,{className:"p-6 text-center",children:[n.jsx(Kr,{className:"h-12 w-12 text-amber-500 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-bold mb-2",children:"Ingen tkomst"}),n.jsx("p",{className:"text-slate-600",children:"Du behver chef- eller admin-behrighet fr att se denna sida."})]})})});const d=((b=a==null?void 0:a.manages_departments)==null?void 0:b.length)>0?i.filter(v=>a.manages_departments.includes(v.department)):i,u=o.filter(v=>(v.status==="active"||v.status==="paused")&&d.some(j=>j.user_email===v.employee_email)),h=l.filter(v=>v.status==="pending"),g=c.filter(v=>v.status==="pending"&&d.some(j=>j.user_email===v.employee_email)),x=o.filter(v=>v.anomaly_flag&&d.some(j=>j.user_email===v.employee_email));return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white",children:n.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6 pb-24",children:[n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Chef-dashboard"}),n.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["verblick fr ",((y=a==null?void 0:a.manages_departments)==null?void 0:y.join(", "))||"alla avdelningar"]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:n.jsx(ce,{children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Instmplade nu"}),n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:u.length})]}),n.jsx(Fr,{className:"h-8 w-8 text-emerald-500"})]})})})}),n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:n.jsx(ce,{children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Vntar godknnande"}),n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:h.length+g.length})]}),n.jsx(Vt,{className:"h-8 w-8 text-amber-500"})]})})})}),n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:n.jsx(ce,{children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Avvikelser"}),n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:x.length})]}),n.jsx(Kr,{className:"h-8 w-8 text-rose-500"})]})})})}),n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:n.jsx(ce,{children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Teamstorlek"}),n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:d.length})]}),n.jsx(Fr,{className:"h-8 w-8 text-slate-500"})]})})})})]}),n.jsxs(Ls,{value:r,onValueChange:s,children:[n.jsxs(As,{className:"w-full grid grid-cols-3 mb-6",children:[n.jsx(gt,{value:"versikt",children:"versikt"}),n.jsxs(gt,{value:"godknnanden",children:["Godknnanden ",h.length+g.length>0&&n.jsx("span",{className:"ml-2 px-2 py-0.5 bg-amber-500 text-white text-xs rounded-full",children:h.length+g.length})]}),n.jsx(gt,{value:"rapporter",children:"Rapporter"})]}),n.jsx(Dt,{value:"versikt",children:n.jsx(Z3e,{activeEntries:u,employees:d,anomalies:x})}),n.jsx(Dt,{value:"godknnanden",children:n.jsx(Y3e,{approvals:h,leaveRequests:g,employees:d})}),n.jsx(Dt,{value:"rapporter",children:n.jsx(X3e,{timeEntries:o,employees:d})})]})]})})}function J3e({open:e,onClose:t,manual:r,onSuccess:s}){const[a,i]=P.useState(""),[o,l]=P.useState([]),[c,d]=P.useState(!1);$n();const{data:u=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list()}),{data:h=[]}=He({queryKey:["users"],queryFn:()=>oe.entities.User.list()});P.useEffect(()=>{r&&e&&l(r.assigned_to||[])},[r,e]);const g=u.map(j=>{const w=h.find(N=>N.email===j.user_email);return{...j,full_name:(w==null?void 0:w.full_name)||j.user_email,email:j.user_email}}),x=g.filter(j=>{var N,A,C;return((N=j.full_name)==null?void 0:N.toLowerCase().includes(a.toLowerCase()))||((A=j.email)==null?void 0:A.toLowerCase().includes(a.toLowerCase()))||((C=j.department)==null?void 0:C.toLowerCase().includes(a.toLowerCase()))}),b=j=>{l(w=>w.includes(j)?w.filter(N=>N!==j):[...w,j])},y=()=>{o.length===x.length?l([]):l(x.map(j=>j.email))},v=async()=>{d(!0);try{await oe.entities.Manual.update(r.id,{assigned_to:o,is_public:o.length===0});const j=r.assigned_to||[],w=o.filter(N=>!j.includes(N));if(w.length>0){const N=w.map(A=>{const C=g.find(M=>M.email===A);return oe.entities.Notification.create({recipient_email:A,type:"system",title:"Ny manual tilldelad",message:`Du har tilldelats manualen "${r.title}". ${r.requires_acknowledgment?"Bekrftelse krvs.":""}`,priority:r.priority==="kritisk"||r.priority==="hg"?"high":"normal",related_entity_id:r.id,related_entity_type:"Manual",sent_via:["app"]})});await Promise.all(N)}s&&s()}catch(j){console.error("Error assigning manual:",j),alert("Kunde inte tilldela manual: "+j.message)}d(!1)};return r?n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs(er,{children:[n.jsx(tr,{children:"Frdela manual till personal"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:r.title})]}),n.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 p-3 bg-indigo-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Fr,{className:"h-4 w-4 text-indigo-600"}),n.jsxs("span",{className:"text-sm font-medium text-indigo-900",children:[o.length," av ",g.length," valda"]})]}),n.jsx(ye,{size:"sm",variant:"outline",onClick:y,className:"text-xs",children:o.length===x.length?n.jsxs(n.Fragment,{children:[n.jsx(xQ,{className:"h-3 w-3 mr-1"}),"Avmarkera alla"]}):n.jsxs(n.Fragment,{children:[n.jsx(fQ,{className:"h-3 w-3 mr-1"}),"Markera alla"]})})]}),n.jsxs("div",{className:"relative mb-4",children:[n.jsx(uo,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),n.jsx(De,{placeholder:"Sk namn, e-post, avdelning...",value:a,onChange:j=>i(j.target.value),className:"pl-10"})]}),n.jsx("div",{className:"flex-1 overflow-y-auto border rounded-lg",children:x.length===0?n.jsxs("div",{className:"p-8 text-center text-slate-500",children:[n.jsx(Fr,{className:"h-12 w-12 mx-auto mb-2 text-slate-300"}),n.jsx("p",{className:"text-sm",children:"Inga medarbetare hittades"})]}):n.jsx("div",{className:"divide-y divide-slate-100",children:x.map(j=>{const w=o.includes(j.email);return n.jsx("div",{onClick:()=>b(j.email),className:`p-4 cursor-pointer hover:bg-slate-50 transition-colors ${w?"bg-indigo-50":""}`,children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(wh,{checked:w,className:"pointer-events-none"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-slate-900",children:j.full_name}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[n.jsx(_c,{className:"h-3 w-3"}),j.email]}),j.department&&n.jsx(it,{variant:"outline",className:"text-xs",children:j.department})]})]})]})},j.email)})})}),n.jsxs("div",{className:"flex gap-3 mt-4 pt-4 border-t border-slate-200",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:t,className:"flex-1",disabled:c,children:"Avbryt"}),n.jsx(ye,{onClick:v,disabled:c,className:"flex-1 bg-indigo-600 hover:bg-indigo-700",children:c?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-4 w-4 mr-2 animate-spin"}),"Sparar..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Fr,{className:"h-4 w-4 mr-2"}),"Spara tilldelning"]})})]})]})]})}):null}const eAe=[{value:"produkt_teknik",label:"Produkt & Teknik"},{value:"arbetsrutiner",label:"Arbetsrutiner"},{value:"it_system",label:"IT & System"},{value:"hr",label:"HR"},{value:"varumarke_allmant",label:"Varumrke & Allmnt"}],tAe=[{value:"lg",label:"Lg"},{value:"normal",label:"Normal"},{value:"hg",label:"Hg"},{value:"kritisk",label:"Kritisk"}];function cG({open:e,onClose:t,onSuccess:r,editManual:s=null}){const[a,i]=P.useState(!1),[o,l]=P.useState(null),[c,d]=P.useState(""),[u,h]=P.useState({title:"",description:"",category:"varumarke_allmant",subcategory:"",sequence_order:null,version:"1.0",priority:"normal",requires_acknowledgment:!1,is_public:!0,tags:[],expiry_date:"",parent_manual_id:null}),{data:g=[]}=He({queryKey:["manuals"],queryFn:()=>oe.entities.Manual.list("-created_date",200),enabled:e}),x=g.filter(w=>!w.parent_manual_id);x.filter(w=>w.category===u.category&&(!u.subcategory||w.subcategory===u.subcategory||!w.subcategory)),P.useEffect(()=>{s?h({title:s.title||"",description:s.description||"",category:s.category||"allmnt",subcategory:s.subcategory||"",sequence_order:s.sequence_order||null,version:s.version||"1.0",priority:s.priority||"normal",requires_acknowledgment:s.requires_acknowledgment||!1,is_public:s.is_public??!0,tags:s.tags||[],expiry_date:s.expiry_date||"",parent_manual_id:s.parent_manual_id||null}):(h({title:"",description:"",category:"varumarke_allmant",subcategory:"",sequence_order:null,version:"1.0",priority:"normal",requires_acknowledgment:!1,is_public:!0,tags:[],expiry_date:"",parent_manual_id:null}),l(null))},[s,e]);const b=w=>{var A;const N=(A=w.target.files)==null?void 0:A[0];N&&l(N)},y=()=>{c.trim()&&!u.tags.includes(c.trim())&&(h({...u,tags:[...u.tags,c.trim()]}),d(""))},v=w=>{h({...u,tags:u.tags.filter(N=>N!==w)})},j=async()=>{if(!u.title){alert("Fyll i titel");return}if(!(!s&&!o&&!u.parent_manual_id)&&!s&&!o){alert("Vlj en fil att ladda upp eller skapa en grupp");return}i(!0);try{let N=s==null?void 0:s.file_url,A=s==null?void 0:s.file_type;if(o){N=(await oe.integrations.Core.UploadFile({file:o})).file_url;const F=o.name.split(".").pop().toLowerCase();A=["pdf","docx","xlsx","pptx","jpg","jpeg","png","mp4","webm"].includes(F)?F:"annat"}const C=await oe.auth.me(),M={...u,...N&&{file_url:N},...A&&{file_type:A},uploaded_by:C.email};s?await oe.entities.Manual.update(s.id,M):await oe.entities.Manual.create(M),r&&r()}catch(N){console.error("Error saving manual:",N),alert("Kunde inte spara manualen: "+N.message)}i(!1)};return n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(er,{children:n.jsx(tr,{children:s?"Redigera manual":u.parent_manual_id?"Lgg till innehl":"Skapa grupp eller ladda upp manual"})}),n.jsxs("div",{className:"space-y-4",children:[!s&&!u.parent_manual_id&&n.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200 text-sm text-blue-900",children:[n.jsx("p",{className:"font-medium mb-1",children:" Tv stt att anvnda:"}),n.jsxs("ul",{className:"text-xs space-y-1 ml-4 list-disc",children:[n.jsxs("li",{children:["Skapa en ",n.jsx("strong",{children:"grupp"}),": Fyll i titel och beskrivning, hoppa ver fil"]}),n.jsxs("li",{children:["Lgg till ",n.jsx("strong",{children:"innehl"}),": Vlj en grupp nedan och ladda upp en fil"]})]})]}),!s&&!u.parent_manual_id&&n.jsxs("div",{children:[n.jsx(ve,{children:"Fil (valfri fr grupper)"}),n.jsx("div",{className:"mt-2",children:n.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer hover:bg-slate-50 transition-colors",children:[o?n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Jr,{className:"h-8 w-8 text-slate-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-900",children:o.name}),n.jsxs("p",{className:"text-xs text-slate-500",children:[(o.size/1024).toFixed(2)," KB"]})]})]}):n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx(lu,{className:"h-8 w-8 text-slate-400 mb-2"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Klicka fr att vlja fil"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"PDF, Word, Excel, PowerPoint, JPG, PNG, MP4"})]}),n.jsx("input",{type:"file",className:"hidden",onChange:b,accept:".pdf,.docx,.xlsx,.pptx,.jpg,.jpeg,.png,.mp4,.webm"})]})})]}),!s&&u.parent_manual_id&&n.jsxs("div",{children:[n.jsx(ve,{children:"Fil *"}),n.jsx("div",{className:"mt-2",children:n.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer hover:bg-slate-50 transition-colors",children:[o?n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Jr,{className:"h-8 w-8 text-slate-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-900",children:o.name}),n.jsxs("p",{className:"text-xs text-slate-500",children:[(o.size/1024).toFixed(2)," KB"]})]})]}):n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx(lu,{className:"h-8 w-8 text-slate-400 mb-2"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Klicka fr att vlja fil"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"PDF, Word, Excel, PowerPoint, JPG, PNG, MP4"})]}),n.jsx("input",{type:"file",className:"hidden",onChange:b,accept:".pdf,.docx,.xlsx,.pptx,.jpg,.jpeg,.png,.mp4,.webm"})]})})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Titel *"}),n.jsx(De,{value:u.title,onChange:w=>h({...u,title:w.target.value}),placeholder:"T.ex. Anvndarmanual GPS-system"})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Beskrivning"}),n.jsx(Zn,{value:u.description,onChange:w=>h({...u,description:w.target.value}),placeholder:"Kort beskrivning av manualens innehll...",rows:3})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ve,{children:"Kategori"}),n.jsxs(Nt,{value:u.category,onValueChange:w=>h({...u,category:w}),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsx(wt,{children:eAe.map(w=>n.jsx(Ne,{value:w.value,children:w.label},w.value))})]})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Version"}),n.jsx(De,{value:u.version,onChange:w=>h({...u,version:w.target.value}),placeholder:"1.0"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ve,{children:"Underkategori (valfri)"}),n.jsx(De,{value:u.subcategory,onChange:w=>h({...u,subcategory:w.target.value}),placeholder:"t.ex. Grundlggande"})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Ordningsfljd (valfri)"}),n.jsx(De,{type:"number",value:u.sequence_order||"",onChange:w=>h({...u,sequence_order:w.target.value?parseInt(w.target.value):null}),placeholder:"t.ex. 1, 2, 3"})]})]}),!s&&x.length>0&&n.jsxs("div",{children:[n.jsx(ve,{children:"Lgg till i grupp (valfri)"}),n.jsxs(Nt,{value:u.parent_manual_id||"",onValueChange:w=>h({...u,parent_manual_id:w||null}),children:[n.jsx(jt,{children:n.jsx(kt,{placeholder:"Vlj en grupp..."})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:null,children:"Skapa som egen grupp"}),x.map(w=>n.jsx(Ne,{value:w.id,children:w.title},w.id))]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ve,{children:"Prioritet"}),n.jsxs(Nt,{value:u.priority,onValueChange:w=>h({...u,priority:w}),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsx(wt,{children:tAe.map(w=>n.jsx(Ne,{value:w.value,children:w.label},w.value))})]})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Utgngsdatum (valfritt)"}),n.jsx(De,{type:"date",value:u.expiry_date,onChange:w=>h({...u,expiry_date:w.target.value})})]})]}),n.jsxs("div",{children:[n.jsx(ve,{children:"Taggar"}),n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx(De,{value:c,onChange:w=>d(w.target.value),onKeyPress:w=>w.key==="Enter"&&(w.preventDefault(),y()),placeholder:"Lgg till tagg..."}),n.jsx(ye,{type:"button",onClick:y,variant:"outline",children:"Lgg till"})]}),u.tags.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2",children:u.tags.map((w,N)=>n.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-slate-100 rounded-md text-sm",children:[n.jsx("span",{children:w}),n.jsx("button",{onClick:()=>v(w),className:"text-slate-500 hover:text-slate-700",children:n.jsx(Ra,{className:"h-3 w-3"})})]},N))})]}),n.jsxs("div",{className:"space-y-3 pt-2 border-t border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(wh,{id:"public",checked:u.is_public,onCheckedChange:w=>h({...u,is_public:w})}),n.jsx(ve,{htmlFor:"public",className:"cursor-pointer",children:"Synlig fr alla (om avmarkerad kan du frdela till specifika personer)"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(wh,{id:"ack",checked:u.requires_acknowledgment,onCheckedChange:w=>h({...u,requires_acknowledgment:w})}),n.jsx(ve,{htmlFor:"ack",className:"cursor-pointer",children:"Krver bekrftelse frn lsare"})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:t,className:"flex-1",disabled:a,children:"Avbryt"}),n.jsx(ye,{onClick:j,disabled:a,className:"flex-1 bg-slate-900 hover:bg-slate-800",children:a?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-4 w-4 mr-2 animate-spin"}),s?"Uppdaterar...":"Laddar upp..."]}):n.jsxs(n.Fragment,{children:[n.jsx(lu,{className:"h-4 w-4 mr-2"}),s?"Uppdatera":"Ladda upp"]})})]})]})]})})}const nAe={produkt_teknik:"Produkt & Teknik",arbetsrutiner:"Arbetsrutiner",it_system:"IT & System",hr:"HR",varumarke_allmant:"Varumrke & Allmnt"},rAe={lg:"bg-slate-100 text-slate-700",normal:"bg-blue-100 text-blue-700",hg:"bg-amber-100 text-amber-700",kritisk:"bg-rose-100 text-rose-700"};function sAe(){var D,R,z,Z,se,J,Q;const[e,t]=P.useState(null),[r,s]=P.useState(!1),[a,i]=P.useState(!1),[o,l]=P.useState(!1),[c,d]=P.useState(0),[u,h]=P.useState(""),g=$n(),b=new URLSearchParams(window.location.search).get("id");P.useEffect(()=>{oe.auth.me().then(t).catch(()=>t(null))},[]);const{data:y=[]}=He({queryKey:["manuals"],queryFn:()=>oe.entities.Manual.list()}),v=y.find(H=>H.id===b),j=Xt({mutationFn:async()=>{const H=v.acknowledged_by||[];return H.push({email:e.email,name:e.full_name,acknowledged_at:new Date().toISOString()}),oe.entities.Manual.update(b,{acknowledged_by:H})},onSuccess:()=>{g.invalidateQueries({queryKey:["manuals"]})}}),w=Xt({mutationFn:()=>oe.entities.Manual.delete(b),onSuccess:()=>{window.location.href=Pn("Manuals")}}),N=Xt({mutationFn:async({rating:H,comment:ne})=>{const ae=(v.feedback||[]).filter(te=>te.user_email!==e.email);ae.push({user_email:e.email,user_name:e.full_name,rating:H,comment:ne,created_at:new Date().toISOString()});const G=ae.reduce((te,fe)=>te+fe.rating,0)/ae.length;return oe.entities.Manual.update(b,{feedback:ae,average_rating:Math.round(G*10)/10})},onSuccess:()=>{g.invalidateQueries({queryKey:["manuals"]}),l(!1),d(0),h("")}}),A=async()=>{window.confirm("Bekrfta att du har lst och frsttt denna manual?")&&await j.mutateAsync()},C=async()=>{window.confirm("r du sker p att du vill ta bort denna manual? Detta kan inte ngras.")&&await w.mutateAsync()};if(!v)return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white p-6",children:n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(Kr,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Manual hittades inte"}),n.jsx(wr,{to:Pn("Manuals"),children:n.jsxs(ye,{variant:"outline",className:"mt-4",children:[n.jsx(xu,{className:"h-4 w-4 mr-2"}),"Tillbaka till manualer"]})})]})})})});const M=(D=v.acknowledged_by)==null?void 0:D.some(H=>H.email===(e==null?void 0:e.email)),I=(e==null?void 0:e.role)==="admin",F=(R=v.feedback)==null?void 0:R.find(H=>H.user_email===(e==null?void 0:e.email)),U=v.average_rating||0,W=((z=v.feedback)==null?void 0:z.length)||0;return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pb-24",children:[n.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[n.jsxs("div",{className:"mb-6",children:[n.jsx(wr,{to:Pn("Manuals"),children:n.jsxs(ye,{variant:"ghost",size:"sm",className:"mb-4",children:[n.jsx(xu,{className:"h-4 w-4 mr-2"}),"Tillbaka till manualer"]})}),n.jsxs("div",{className:"flex items-start justify-between mb-6",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-3",children:v.title}),v.description&&n.jsx("p",{className:"text-slate-600 mb-4",children:v.description}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Kategori"}),n.jsx(it,{variant:"outline",className:"font-medium",children:nAe[v.category]})]}),v.subcategory&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Underkategori"}),n.jsx(it,{className:"bg-blue-100 text-blue-700 font-medium",children:v.subcategory})]}),v.sequence_order&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Ordning"}),n.jsxs(it,{variant:"outline",className:"font-medium",children:["Steg ",v.sequence_order]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Prioritet"}),n.jsx(it,{className:rAe[v.priority],children:v.priority})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Version"}),n.jsxs(it,{variant:"outline",className:"font-medium",children:["v",v.version]})]})]})]}),I&&n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ye,{size:"sm",variant:"outline",onClick:()=>i(!0),children:n.jsx(ql,{className:"h-4 w-4"})}),n.jsx(ye,{size:"sm",variant:"outline",onClick:C,disabled:w.isPending,children:n.jsx(bi,{className:"h-4 w-4 text-rose-600"})})]})]})]}),n.jsx(ce,{className:"border-0 shadow-sm mb-6",children:n.jsxs(he,{className:"p-6",children:[v.file_type==="pdf"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:"Dokumentvisning"}),n.jsx("a",{href:v.file_url,target:"_blank",rel:"noopener noreferrer",children:n.jsxs(ye,{size:"sm",variant:"outline",children:[n.jsx(Eo,{className:"h-4 w-4 mr-2"}),"Ladda ner"]})})]}),n.jsx("iframe",{src:`${v.file_url}#toolbar=1&navpanes=1&scrollbar=1`,className:"w-full h-[800px] rounded-lg border border-slate-200",title:v.title})]}),(v.file_type==="jpg"||v.file_type==="jpeg"||v.file_type==="png")&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:"Bildvisning"}),n.jsx("a",{href:v.file_url,download:!0,children:n.jsxs(ye,{size:"sm",variant:"outline",children:[n.jsx(Eo,{className:"h-4 w-4 mr-2"}),"Ladda ner"]})})]}),n.jsx("img",{src:v.file_url,alt:v.title,className:"w-full rounded-lg border border-slate-200"})]}),(v.file_type==="mp4"||v.file_type==="webm")&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:"Videovisning"}),n.jsx("a",{href:v.file_url,download:!0,children:n.jsxs(ye,{size:"sm",variant:"outline",children:[n.jsx(Eo,{className:"h-4 w-4 mr-2"}),"Ladda ner"]})})]}),n.jsx("video",{src:v.file_url,controls:!0,className:"w-full rounded-lg border border-slate-200",children:"Din webblsare stdjer inte videouppspelning."})]}),!["pdf","jpg","jpeg","png","mp4","webm"].includes(v.file_type)&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"h-16 w-16 rounded-xl bg-slate-100 flex items-center justify-center mx-auto mb-4",children:n.jsx(Eo,{className:"h-8 w-8 text-slate-600"})}),n.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Frhandsvisning ej tillgnglig"}),n.jsxs("p",{className:"text-sm text-slate-600 mb-4",children:["Filtyp: ",(Z=v.file_type)==null?void 0:Z.toUpperCase()]}),n.jsx("a",{href:v.file_url,download:!0,children:n.jsxs(ye,{className:"bg-slate-900 hover:bg-slate-800",children:[n.jsx(Eo,{className:"h-4 w-4 mr-2"}),"Ladda ner dokument"]})})]})]})}),v.requires_acknowledgment&&n.jsx(ce,{className:`border-0 shadow-sm mb-6 ${M?"bg-emerald-50":"bg-amber-50"}`,children:n.jsx(he,{className:"p-6",children:n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:`h-12 w-12 rounded-xl flex items-center justify-center ${M?"bg-emerald-100":"bg-amber-100"}`,children:n.jsx($r,{className:`h-6 w-6 ${M?"text-emerald-600":"text-amber-600"}`})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:`font-semibold ${M?"text-emerald-900":"text-amber-900"}`,children:M?"Bekrftad":"Bekrftelse krvs"}),n.jsx("p",{className:`text-xs ${M?"text-emerald-700":"text-amber-700"}`,children:M?"Du har lst denna manual":"Bekrfta att du har lst"})]}),!M&&n.jsxs(ye,{onClick:A,disabled:j.isPending,className:"bg-amber-600 hover:bg-amber-700",children:[n.jsx($r,{className:"h-4 w-4 mr-2"}),"Bekrfta lsning"]})]})})}),v.subcategory&&v.sequence_order&&n.jsx(ce,{className:"border-0 shadow-sm mb-6 bg-gradient-to-r from-blue-50 to-indigo-50",children:n.jsxs(he,{className:"p-5",children:[n.jsxs("h3",{className:"font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[n.jsx("span",{className:"h-2 w-2 rounded-full bg-blue-600"}),"Relaterade manualer i ",v.subcategory]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:y.filter(H=>H.subcategory===v.subcategory&&H.id!==v.id).sort((H,ne)=>(H.sequence_order||0)-(ne.sequence_order||0)).map(H=>n.jsx(wr,{to:Pn("ManualDetail")+`?id=${H.id}`,children:n.jsxs(ye,{size:"sm",variant:"outline",className:"text-xs",children:["Steg ",H.sequence_order,": ",H.title]})},H.id))})]})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 hidden",children:n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"h-12 w-12 rounded-xl bg-slate-100 flex items-center justify-center",children:n.jsx(Eo,{className:"h-6 w-6 text-slate-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:"Ladda ner manual"}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Filtyp: ",(se=v.file_type)==null?void 0:se.toUpperCase()]})]})]}),n.jsx("a",{href:v.file_url,target:"_blank",rel:"noopener noreferrer",children:n.jsxs(ye,{className:"w-full bg-slate-900 hover:bg-slate-800",children:[n.jsx(Eo,{className:"h-4 w-4 mr-2"}),"ppna dokument"]})})]})})}),I&&n.jsxs(n.Fragment,{children:[!v.parent_manual_id&&n.jsx(ce,{className:"border-0 shadow-sm mb-6 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsx(he,{className:"p-5",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:n.jsx(Fr,{className:"h-5 w-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-slate-900",children:"Lgg till innehl i denna grupp"}),n.jsxs("p",{className:"text-xs text-slate-600",children:[y.filter(H=>H.parent_manual_id===v.id).length," manualer tilldelade"]})]})]}),n.jsxs(ye,{onClick:()=>{i(!0)},className:"bg-indigo-600 hover:bg-indigo-700",children:[n.jsx(Fr,{className:"h-4 w-4 mr-2"}),"Lgg till innehl"]})]})})}),n.jsx(ce,{className:"border-0 shadow-sm mb-6 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsx(he,{className:"p-5",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:n.jsx(Fr,{className:"h-5 w-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-slate-900",children:"Frdela till personal"}),n.jsxs("p",{className:"text-xs text-slate-600",children:[((J=v.assigned_to)==null?void 0:J.length)||0," personer tilldelade"]})]})]}),n.jsxs(ye,{onClick:()=>s(!0),className:"bg-indigo-600 hover:bg-indigo-700",children:[n.jsx(Fr,{className:"h-4 w-4 mr-2"}),"Hantera tilldelning"]})]})})})]}),n.jsxs(ce,{className:"border-0 shadow-sm mb-6",children:[n.jsx(At,{children:n.jsx(Ct,{className:"text-lg",children:"Information"})}),n.jsxs(he,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-slate-500 mb-1 flex items-center gap-2",children:[n.jsx(bd,{className:"h-3 w-3"}),"Uppladdad av"]}),n.jsx("p",{className:"text-sm font-medium text-slate-900",children:v.uploaded_by||"Oknd"})]}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-slate-500 mb-1 flex items-center gap-2",children:[n.jsx(_r,{className:"h-3 w-3"}),"Senast uppdaterad"]}),n.jsx("p",{className:"text-sm font-medium text-slate-900",children:Ce(new Date(v.updated_date),"PPP",{locale:ut})})]})]}),v.tags&&v.tags.length>0&&n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-slate-500 mb-2 flex items-center gap-2",children:[n.jsx(bQ,{className:"h-3 w-3"}),"Taggar"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:v.tags.map((H,ne)=>n.jsx(it,{variant:"outline",className:"text-xs",children:H},ne))})]}),v.expiry_date&&n.jsx("div",{className:"p-3 bg-amber-50 rounded-lg border border-amber-200",children:n.jsxs("p",{className:"text-sm text-amber-700",children:[n.jsx(Kr,{className:"h-4 w-4 inline mr-1"}),"Utgr: ",Ce(new Date(v.expiry_date),"PPP",{locale:ut})]})})]})]}),n.jsxs(ce,{className:"border-0 shadow-sm mb-6",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"text-lg flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Bp,{className:"h-5 w-5 text-amber-500"}),"Betyg & Feedback"]}),U>0&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(H=>n.jsx(Bp,{className:`h-4 w-4 ${H<=Math.round(U)?"fill-amber-400 text-amber-400":"text-slate-300"}`},H))}),n.jsxs("span",{className:"text-sm text-slate-600",children:[U.toFixed(1)," (",W,")"]})]})]})}),n.jsxs(he,{children:[e&&!o&&!F&&n.jsxs(ye,{onClick:()=>l(!0),variant:"outline",className:"w-full mb-4",children:[n.jsx(Q7,{className:"h-4 w-4 mr-2"}),"Lmna feedback"]}),e&&o&&n.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg mb-4",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"text-sm font-medium text-slate-900 mb-2 block",children:"Betyg"}),n.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(H=>n.jsx("button",{onClick:()=>d(H),className:"transition-transform hover:scale-110",children:n.jsx(Bp,{className:`h-8 w-8 ${H<=c?"fill-amber-400 text-amber-400":"text-slate-300 hover:text-amber-200"}`})},H))})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"text-sm font-medium text-slate-900 mb-2 block",children:"Kommentar (valfritt)"}),n.jsx("textarea",{value:u,onChange:H=>h(H.target.value),placeholder:"Dela dina tankar om denna manual...",className:"w-full p-3 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ye,{onClick:()=>N.mutate({rating:c,comment:u}),disabled:c===0||N.isPending,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:"Skicka feedback"}),n.jsx(ye,{variant:"outline",onClick:()=>{l(!1),d(0),h("")},children:"Avbryt"})]})]}),F&&n.jsxs("div",{className:"p-4 bg-emerald-50 rounded-lg mb-4 border border-emerald-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("p",{className:"text-sm font-medium text-emerald-900",children:"Din feedback"}),n.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(H=>n.jsx(Bp,{className:`h-3 w-3 ${H<=F.rating?"fill-amber-400 text-amber-400":"text-slate-300"}`},H))})]}),F.comment&&n.jsx("p",{className:"text-sm text-slate-600",children:F.comment})]}),v.feedback&&v.feedback.length>0&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"text-sm font-semibold text-slate-900",children:"Senaste feedback"}),v.feedback.sort((H,ne)=>new Date(ne.created_at)-new Date(H.created_at)).slice(0,5).map((H,ne)=>n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-900",children:H.user_name}),n.jsx("p",{className:"text-xs text-slate-500",children:Ce(new Date(H.created_at),"PPp",{locale:ut})})]}),n.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(ue=>n.jsx(Bp,{className:`h-3 w-3 ${ue<=H.rating?"fill-amber-400 text-amber-400":"text-slate-300"}`},ue))})]}),H.comment&&n.jsx("p",{className:"text-sm text-slate-600",children:H.comment})]},ne)),v.feedback.length>5&&n.jsxs("p",{className:"text-sm text-slate-500 text-center",children:["+",v.feedback.length-5," till"]})]}),(!v.feedback||v.feedback.length===0)&&!o&&n.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"Ingen feedback nnu. Var den frsta att betygstta!"})]})]}),v.requires_acknowledgment&&((Q=v.acknowledged_by)==null?void 0:Q.length)>0&&n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"text-lg flex items-center gap-2",children:[n.jsx(Nx,{className:"h-5 w-5"}),"Bekrftelser (",v.acknowledged_by.length,")"]})}),n.jsx(he,{children:n.jsxs("div",{className:"space-y-2",children:[v.acknowledged_by.slice(0,10).map((H,ne)=>n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 last:border-0",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-900",children:H.name}),n.jsx("p",{className:"text-xs text-slate-500",children:H.email})]}),n.jsx("p",{className:"text-xs text-slate-500",children:Ce(new Date(H.acknowledged_at),"PPp",{locale:ut})})]},ne)),v.acknowledged_by.length>10&&n.jsxs("p",{className:"text-sm text-slate-500 text-center pt-2",children:["+",v.acknowledged_by.length-10," till"]})]})})]})]})}),n.jsx(J3e,{open:r,onClose:()=>s(!1),manual:v,onSuccess:()=>{g.invalidateQueries({queryKey:["manuals"]}),s(!1)}}),n.jsx(cG,{open:a,onClose:()=>i(!1),editManual:v,onSuccess:()=>{g.invalidateQueries({queryKey:["manuals"]}),i(!1)}})]})}const h7={produkt:"from-blue-500 to-cyan-500",skerhet:"from-rose-500 to-pink-500",hr_policy:"from-purple-500 to-indigo-500",it_system:"from-cyan-500 to-teal-500",fordon:"from-emerald-500 to-green-500",arbetsrutiner:"from-amber-500 to-orange-500",allmnt:"from-slate-500 to-gray-500"},aAe={produkt:"bg-blue-100 text-blue-700 border-blue-200",skerhet:"bg-rose-100 text-rose-700 border-rose-200",hr_policy:"bg-purple-100 text-purple-700 border-purple-200",it_system:"bg-cyan-100 text-cyan-700 border-cyan-200",fordon:"bg-emerald-100 text-emerald-700 border-emerald-200",arbetsrutiner:"bg-amber-100 text-amber-700 border-amber-200",allmnt:"bg-slate-100 text-slate-700 border-slate-200"},iAe={lg:"bg-slate-100 text-slate-600 border-slate-200",normal:"bg-blue-100 text-blue-600 border-blue-200",hg:"bg-amber-100 text-amber-600 border-amber-200",kritisk:"bg-rose-100 text-rose-600 border-rose-200"};function oAe({manual:e,user:t,isAdmin:r}){var i,o;const s=(i=e.acknowledged_by)==null?void 0:i.some(l=>l.email===(t==null?void 0:t.email)),a=e.requires_acknowledgment&&!s;return n.jsx(wr,{to:Pn("ManualDetail")+`?id=${e.id}`,children:n.jsx(tt.div,{whileHover:{y:-6,transition:{duration:.2}},className:"h-full",children:n.jsxs(ce,{className:`border-0 shadow-lg hover:shadow-2xl transition-all cursor-pointer h-full bg-white overflow-hidden group ${a?"ring-2 ring-amber-300 ring-offset-2":""}`,children:[n.jsx("div",{className:`h-2 bg-gradient-to-r ${h7[e.category]}`}),n.jsxs(he,{className:"p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(it,{className:aAe[e.category],variant:"outline",children:e.category}),a&&n.jsxs(it,{className:"bg-gradient-to-r from-amber-100 to-orange-100 text-amber-700 border-amber-300 shadow-sm",variant:"outline",children:[n.jsx(ja,{className:"h-3 w-3 mr-1"}),"Ls & bekrfta"]})]})}),n.jsx("div",{className:`h-14 w-14 rounded-2xl bg-gradient-to-br ${h7[e.category]} flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform`,children:n.jsx(Jr,{className:"h-7 w-7 text-white"})})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("h3",{className:"font-bold text-slate-900 mb-2 line-clamp-2 text-lg group-hover:text-indigo-600 transition-colors",children:e.title}),n.jsx("p",{className:"text-sm text-slate-600 line-clamp-3 leading-relaxed",children:e.description})]}),e.tags&&e.tags.length>0&&n.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.tags.slice(0,3).map((l,c)=>n.jsx(it,{variant:"outline",className:"text-xs bg-slate-50 border-slate-200 text-slate-600",children:l},c)),e.tags.length>3&&n.jsxs(it,{variant:"outline",className:"text-xs bg-slate-50 border-slate-200 text-slate-600",children:["+",e.tags.length-3]})]}),n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[n.jsxs("div",{className:"flex items-center gap-1.5 bg-slate-50 px-2.5 py-1.5 rounded-lg",children:[n.jsx(_r,{className:"h-3.5 w-3.5"}),n.jsxs("span",{className:"font-medium",children:["v",e.version]})]}),e.requires_acknowledgment&&n.jsxs("div",{className:"flex items-center gap-1.5 bg-slate-50 px-2.5 py-1.5 rounded-lg",children:[n.jsx(Nx,{className:"h-3.5 w-3.5"}),n.jsx("span",{className:"font-medium",children:((o=e.acknowledged_by)==null?void 0:o.length)||0})]})]}),n.jsx(it,{className:`${iAe[e.priority]} font-medium`,variant:"outline",children:e.priority})]}),e.requires_acknowledgment&&n.jsx("div",{className:`mt-4 p-3 rounded-xl flex items-center gap-2 shadow-sm ${s?"bg-gradient-to-r from-emerald-50 to-teal-50 text-emerald-700 border border-emerald-200":"bg-gradient-to-r from-amber-50 to-orange-50 text-amber-700 border border-amber-200"}`,children:s?n.jsxs(n.Fragment,{children:[n.jsx($r,{className:"h-4 w-4 flex-shrink-0"}),n.jsx("span",{className:"text-xs font-semibold",children:" Bekrftad"})]}):n.jsxs(n.Fragment,{children:[n.jsx(ja,{className:"h-4 w-4 flex-shrink-0"}),n.jsx("span",{className:"text-xs font-semibold",children:"Vntar p bekrftelse"})]})})]})]})})})}const lAe={produkt_teknik:"Produkt & Teknik",arbetsrutiner:"Arbetsrutiner",it_system:"IT & System",hr:"HR",varumarke_allmant:"Varumrke & Allmnt"};function cAe(){const[e,t]=P.useState(null),[r,s]=P.useState(""),[a,i]=P.useState("all"),[o,l]=P.useState(!1),c=$n();P.useEffect(()=>{oe.auth.me().then(t).catch(()=>t(null))},[]);const{data:d=[],isLoading:u}=He({queryKey:["manuals"],queryFn:()=>oe.entities.Manual.list("-created_date",200)}),{data:h=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list()}),x=d.filter(w=>{var A,C;if(!e)return!1;if(e.role==="admin"||w.is_public||(A=w.assigned_to)!=null&&A.includes(e.email))return!0;const N=h.find(M=>M.user_email===e.email);return!!(N&&((C=w.target_departments)!=null&&C.includes(N.department)))}).filter(w=>{var C,M,I;const N=((C=w.title)==null?void 0:C.toLowerCase().includes(r.toLowerCase()))||((M=w.description)==null?void 0:M.toLowerCase().includes(r.toLowerCase()))||((I=w.tags)==null?void 0:I.some(F=>F.toLowerCase().includes(r.toLowerCase()))),A=a==="all"||w.category===a;return N&&A}),b=x.filter(w=>!w.parent_manual_id),y={};x.forEach(w=>{w.parent_manual_id&&(y[w.parent_manual_id]||(y[w.parent_manual_id]=[]),y[w.parent_manual_id].push(w))});const v=x.filter(w=>{var N;return w.requires_acknowledgment&&!((N=w.acknowledged_by)!=null&&N.some(A=>A.email===(e==null?void 0:e.email)))}),j={total:x.length,pending:v.length,acknowledged:x.filter(w=>{var N;return(N=w.acknowledged_by)==null?void 0:N.some(A=>A.email===(e==null?void 0:e.email))}).length};return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 pb-24",children:[n.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("div",{children:n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"h-12 w-12 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg",children:n.jsx(gm,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent",children:"Manualer & Dokumentation"}),n.jsxs("p",{className:"text-sm text-slate-600 mt-0.5",children:[j.total," tillgngliga manualer"]})]})]})}),(e==null?void 0:e.role)==="admin"&&n.jsxs(ye,{onClick:()=>l(!0),className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 shadow-lg shadow-indigo-500/30",children:[n.jsx(xr,{className:"h-4 w-4 mr-2"}),"Ladda upp manual"]})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsx(tt.div,{whileHover:{y:-4},transition:{duration:.2},children:n.jsx(ce,{className:"border-0 shadow-xl bg-gradient-to-br from-white to-slate-50 overflow-hidden",children:n.jsx(he,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-600 mb-1",children:"Totalt"}),n.jsx("p",{className:"text-3xl font-bold text-slate-900",children:j.total}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"tillgngliga"})]}),n.jsx("div",{className:"h-16 w-16 rounded-2xl bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center shadow-inner",children:n.jsx(gm,{className:"h-8 w-8 text-slate-600"})})]})})})}),n.jsx(tt.div,{whileHover:{y:-4},transition:{duration:.2},children:n.jsx(ce,{className:"border-0 shadow-xl bg-gradient-to-br from-amber-50 to-orange-50 overflow-hidden",children:n.jsx(he,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-amber-700 mb-1",children:"Vntar"}),n.jsx("p",{className:"text-3xl font-bold text-amber-600",children:j.pending}),n.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"att bekrfta"})]}),n.jsx("div",{className:"h-16 w-16 rounded-2xl bg-gradient-to-br from-amber-200 to-orange-200 flex items-center justify-center shadow-inner",children:n.jsx(ja,{className:"h-8 w-8 text-amber-700"})})]})})})}),n.jsx(tt.div,{whileHover:{y:-4},transition:{duration:.2},children:n.jsx(ce,{className:"border-0 shadow-xl bg-gradient-to-br from-emerald-50 to-teal-50 overflow-hidden",children:n.jsx(he,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-emerald-700 mb-1",children:"Bekrftade"}),n.jsx("p",{className:"text-3xl font-bold text-emerald-600",children:j.acknowledged}),n.jsx("p",{className:"text-xs text-emerald-600 mt-1",children:"manualer"})]}),n.jsx("div",{className:"h-16 w-16 rounded-2xl bg-gradient-to-br from-emerald-200 to-teal-200 flex items-center justify-center shadow-inner",children:n.jsx($r,{className:"h-8 w-8 text-emerald-700"})})]})})})})]}),n.jsx(ce,{className:"border-0 shadow-lg bg-white/80 backdrop-blur-sm mb-8",children:n.jsx(he,{className:"p-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"relative md:col-span-2",children:[n.jsx(uo,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400"}),n.jsx(De,{placeholder:"Sk manualer, taggar...",value:r,onChange:w=>s(w.target.value),className:"pl-12 h-12 bg-slate-50 border-slate-200 focus:bg-white rounded-xl"})]}),n.jsxs(Nt,{value:a,onValueChange:i,children:[n.jsx(jt,{className:"h-12 rounded-xl bg-slate-50 border-slate-200",children:n.jsx(kt,{placeholder:"Kategori"})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"all",children:"Alla kategorier"}),Object.entries(lAe).map(([w,N])=>n.jsx(Ne,{value:w,children:N},w))]})]})]})})}),v.length>0&&n.jsx(tt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},children:n.jsxs(ce,{className:"border-0 shadow-xl mb-8 bg-gradient-to-br from-amber-100 via-amber-50 to-orange-50 overflow-hidden relative",children:[n.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-amber-200 rounded-full blur-3xl opacity-30"}),n.jsx(he,{className:"p-6 relative",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"h-12 w-12 rounded-2xl bg-amber-500 flex items-center justify-center shadow-lg flex-shrink-0",children:n.jsx(ja,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-bold text-amber-900 mb-2 text-lg",children:" Bekrftelse krvs"}),n.jsxs("p",{className:"text-sm text-amber-800 mb-4",children:[v.length," ",v.length===1?"manual krver":"manualer krver"," att du bekrftar att du har lst och frsttt innehllet."]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[v.slice(0,3).map(w=>n.jsx(wr,{to:Pn("ManualDetail")+`?id=${w.id}`,children:n.jsx(ye,{size:"sm",className:"bg-white hover:bg-amber-50 text-amber-900 border-2 border-amber-200 shadow-sm",children:w.title})},w.id)),v.length>3&&n.jsxs(it,{className:"bg-amber-200 text-amber-900 border-amber-300 shadow-sm",children:["+",v.length-3," till"]})]})]})]})})]})}),u?n.jsx("div",{className:"text-center py-12",children:n.jsx(Ot,{className:"h-12 w-12 animate-spin text-slate-400 mx-auto"})}):x.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(gm,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Inga manualer hittades"}),n.jsx("p",{className:"text-slate-500 text-sm",children:r||a!=="all"?"Prova att ndra dina skfilter":"Inga manualer finns tillgngliga n"})]})}):n.jsx("div",{className:"space-y-8",children:b.map((w,N)=>{const A=y[w.id]||[];return n.jsxs("div",{children:[n.jsx("div",{className:"mb-4",children:n.jsx(wr,{to:Pn("ManualDetail")+`?id=${w.id}`,children:n.jsx("div",{className:"p-4 bg-gradient-to-r from-indigo-100 to-purple-100 rounded-xl border-2 border-indigo-300 cursor-pointer hover:shadow-lg transition-shadow",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-indigo-600 flex items-center justify-center flex-shrink-0",children:n.jsx(gm,{className:"h-5 w-5 text-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-bold text-indigo-900",children:w.title}),A.length>0&&n.jsxs("p",{className:"text-sm text-indigo-700",children:[A.length," innehllselement"]})]})]})})})}),A.length>0&&n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8 ml-0 md:ml-4",children:A.sort((C,M)=>(C.sequence_order||0)-(M.sequence_order||0)).map((C,M)=>n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:M*.05,duration:.3},children:n.jsx(oAe,{manual:C,user:e,isAdmin:(e==null?void 0:e.role)==="admin"})},C.id))})]},w.id)})})]})}),n.jsx(cG,{open:o,onClose:()=>l(!1),onSuccess:()=>{c.invalidateQueries({queryKey:["manuals"]}),l(!1)}})]})}function dAe({employee:e}){const[t,r]=P.useState(null),[s,a]=P.useState(!0);return P.useEffect(()=>{const i=async()=>{try{const o=await oe.functions.invoke("generateWelcomeMessage",{employee_id:e.id});r(o.data)}catch(o){console.error("Failed to generate welcome message:",o)}finally{a(!1)}};e!=null&&e.id&&i()},[e==null?void 0:e.id]),s?n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-indigo-50 to-purple-50",children:n.jsx(he,{className:"p-6",children:n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(Ot,{className:"h-6 w-6 animate-spin text-indigo-600"})})})}):t?n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-indigo-50 to-purple-50",children:n.jsxs(he,{className:"p-6",children:[n.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:n.jsx(yi,{className:"h-5 w-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:["Vlkommen ",t.employee_name,"!"]}),n.jsxs("p",{className:"text-sm text-indigo-600",children:[t.role,"  ",t.department]})]})]}),n.jsx("div",{className:"prose prose-sm text-slate-700 whitespace-pre-line",children:t.message})]})})}):null}function uAe({tasks:e}){const t=e.length,r=e.filter(l=>l.status==="completed"||l.status==="approved").length,s=e.filter(l=>l.is_critical),a=s.filter(l=>l.status==="completed"||l.status==="approved").length,i=t>0?Math.round(r/t*100):0,o=[{label:"Kritiska uppgifter",completed:a,total:s.length,icon:ja,color:"text-red-600",bgColor:"bg-red-50"},{label:"Alla uppgifter",completed:r,total:t,icon:$r,color:"text-green-600",bgColor:"bg-green-50"}];return n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Din progress"}),n.jsxs("span",{className:"text-2xl font-bold text-indigo-600",children:[i,"%"]})]}),n.jsx("div",{className:"w-full bg-slate-100 rounded-full h-3 overflow-hidden",children:n.jsx(tt.div,{initial:{width:0},animate:{width:`${i}%`},transition:{duration:1,ease:"easeOut"},className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500"})})]}),n.jsx("div",{className:"space-y-3",children:o.map((l,c)=>{l.icon;const d=l.completed===l.total&&l.total>0;return n.jsxs(tt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:c*.1},className:`flex items-center justify-between p-3 rounded-lg ${l.bgColor}`,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[d?n.jsx($r,{className:`h-5 w-5 ${l.color}`}):n.jsx(Vt,{className:"h-5 w-5 text-slate-400"}),n.jsx("span",{className:"font-medium text-slate-900",children:l.label})]}),n.jsxs("span",{className:`text-sm font-semibold ${d?l.color:"text-slate-600"}`,children:[l.completed,"/",l.total]})]},c)})}),i===100&&n.jsx(tt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"mt-6 p-4 bg-green-50 rounded-lg border border-green-200",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx($r,{className:"h-5 w-5 text-green-600"}),n.jsx("span",{className:"font-semibold text-green-900",children:"Grattis! Du har slutfrt din onboarding! "})]})})]})})}function hAe({open:e,onClose:t,employee:r}){const[s,a]=P.useState(0),[i,o]=P.useState(0),[l,c]=P.useState({helpful_aspects:"",improvement_suggestions:"",comment:""}),[d,u]=P.useState(!1),h=Xt({mutationFn:async()=>{const x={overall_rating:s,helpful_aspects:l.helpful_aspects,improvement_suggestions:l.improvement_suggestions,comment:l.comment,submitted_at:new Date().toISOString()};await oe.entities.Employee.update(r.id,{onboarding_feedback:x,onboarding_status:"completed",onboarding_completed_date:new Date().toISOString().split("T")[0]})},onSuccess:()=>{u(!0),setTimeout(()=>{u(!1),t()},2e3)}}),g=x=>{x.preventDefault(),h.mutate()};return n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"max-w-md",children:[n.jsx(er,{children:n.jsx(tr,{children:"Feedback p din onboarding"})}),d?n.jsxs(tt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"py-8 text-center",children:[n.jsx($r,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Tack fr din feedback!"}),n.jsx("p",{className:"text-slate-500",children:"Din onboarding r nu slutfrd"})]}):n.jsxs("form",{onSubmit:g,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Hur skulle du betygstta din onboarding-upplevelse?"}),n.jsx("div",{className:"flex gap-2 justify-center py-4",children:[1,2,3,4,5].map(x=>n.jsx("button",{type:"button",onClick:()=>a(x),onMouseEnter:()=>o(x),onMouseLeave:()=>o(0),className:"transition-transform hover:scale-110",children:n.jsx(Bp,{className:`h-10 w-10 ${x<=(i||s)?"fill-yellow-400 text-yellow-400":"text-slate-300"}`})},x))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"helpful",children:"Vad var mest hjlpsamt i onboardingen?"}),n.jsx(Zn,{id:"helpful",value:l.helpful_aspects,onChange:x=>c(b=>({...b,helpful_aspects:x.target.value})),placeholder:"Bertta om vad som fungerade bra...",className:"min-h-[80px]"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"improvements",children:"Finns det ngot som kan frbttras?"}),n.jsx(Zn,{id:"improvements",value:l.improvement_suggestions,onChange:x=>c(b=>({...b,improvement_suggestions:x.target.value})),placeholder:"Dina frbttringsfrslag...",className:"min-h-[80px]"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"comment",children:"vriga kommentarer (valfritt)"}),n.jsx(Zn,{id:"comment",value:l.comment,onChange:x=>c(b=>({...b,comment:x.target.value})),placeholder:"Ngot annat du vill dela med dig av...",className:"min-h-[60px]"})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Avbryt"}),n.jsx(ye,{type:"submit",disabled:h.isPending||s===0,className:"flex-1",children:h.isPending?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"w-4 h-4 mr-2 animate-spin"}),"Skickar..."]}):"Skicka feedback"})]})]})]})})}function fAe(){var w;const[e,t]=P.useState(null),[r,s]=P.useState(null),[a,i]=P.useState(!1),o=$n();P.useEffect(()=>{oe.auth.me().then(t).catch(()=>t(null))},[]),P.useEffect(()=>{(async()=>{if(e!=null&&e.email){const A=await oe.entities.Employee.filter({user_email:e.email});s(A[0]||null)}})()},[e]);const{data:l=[],isLoading:c}=He({queryKey:["onboarding-tasks",r==null?void 0:r.id],queryFn:()=>oe.entities.OnboardingTask.filter({employee_id:r.id},"-created_date"),enabled:!!(r!=null&&r.id)}),d=Xt({mutationFn:async N=>oe.entities.OnboardingTask.update(N,{status:"completed",completion_date:new Date().toISOString(),completed_by:e.email}),onSuccess:()=>{o.invalidateQueries({queryKey:["onboarding-tasks"]})}}),u=l.filter(N=>N.status==="pending"||N.status==="in_progress"),h=l.filter(N=>N.status==="completed"||N.status==="approved"),g=l.length,x=h.length,b=g>0&&x===g,y=((w=r==null?void 0:r.onboarding_feedback)==null?void 0:w.overall_rating)>0,v=N=>N.status==="completed"||N.status==="approved"?n.jsx($r,{className:"h-5 w-5 text-green-500"}):N.due_date&&new Date(N.due_date)<new Date?n.jsx(ja,{className:"h-5 w-5 text-red-500"}):n.jsx(Vt,{className:"h-5 w-5 text-slate-400"}),j=N=>N.status==="completed"||N.status==="approved"?n.jsx(it,{className:"bg-green-100 text-green-700",children:"Klar"}):N.due_date&&new Date(N.due_date)<new Date?n.jsx(it,{className:"bg-red-100 text-red-700",children:"Frsenad"}):n.jsx(it,{variant:"outline",children:"Pgende"});return!e||c?n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white flex items-center justify-center",children:n.jsx(Ot,{className:"h-8 w-8 animate-spin text-slate-400"})}):n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pb-24",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Min onboarding"}),n.jsx("p",{className:"text-slate-600",children:"Flj din introduktionsprocess"})]}),r&&n.jsx(dAe,{employee:r}),g>0&&n.jsx(uAe,{tasks:l}),b&&!y&&n.jsx(tt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-r from-green-50 to-emerald-50",children:n.jsx(he,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:"Du har slutfrt alla uppgifter!"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Hjlp oss frbttra onboarding-processen genom att dela din feedback"})]}),n.jsxs(ye,{onClick:()=>i(!0),className:"bg-green-600 hover:bg-green-700",children:[n.jsx(Q7,{className:"h-4 w-4 mr-2"}),"Ge feedback"]})]})})})}),y&&n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-r from-blue-50 to-indigo-50",children:n.jsx(he,{className:"p-6",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx($r,{className:"h-6 w-6 text-blue-600"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:"Onboarding slutfrd!"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Tack fr din feedback"})]})]})})})]}),(r==null?void 0:r.onboarding_status)==="not_started"&&g===0&&n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-8 text-center",children:[n.jsx(Vt,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Ingen onboarding tilldelad"}),n.jsx("p",{className:"text-slate-600",children:"Din onboarding-process har inte startats nnu. Kontakta HR fr mer information."})]})}),u.length>0&&n.jsxs("div",{className:"space-y-4 mt-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Vntande uppgifter"}),u.map(N=>n.jsx(ce,{className:`border-0 shadow-sm ${N.is_critical?"ring-2 ring-amber-200":""}`,children:n.jsx(he,{className:"p-5",children:n.jsxs("div",{className:"flex items-start gap-3",children:[v(N),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:N.title}),j(N)]}),N.description&&n.jsx("p",{className:"text-sm text-slate-600 mb-3",children:N.description}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[N.due_date&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(_r,{className:"h-3 w-3"}),Ce(new Date(N.due_date),"d MMM yyyy",{locale:ut})]}),N.is_critical&&n.jsx(it,{variant:"outline",className:"text-xs bg-amber-50 text-amber-700 border-amber-200",children:"Kritisk"})]}),N.related_resource_url&&n.jsxs("a",{href:N.related_resource_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-blue-600 hover:underline mt-3",children:[n.jsx(G7,{className:"h-3 w-3"}),"Visa resurs"]}),N.assigned_to_role==="employee"&&n.jsx(ye,{onClick:()=>d.mutate(N.id),disabled:d.isPending,size:"sm",className:"mt-3",children:"Markera som klar"})]})]})})},N.id))]}),h.length>0&&n.jsxs("div",{className:"space-y-3 mt-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Slutfrda uppgifter"}),h.map(N=>n.jsx(ce,{className:"border-0 shadow-sm bg-green-50/50",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx($r,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-slate-900",children:N.title}),N.completion_date&&n.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Slutfrd ",Ce(new Date(N.completion_date),"d MMM yyyy",{locale:ut})]})]})]})})},N.id))]}),g===0&&!c&&(r==null?void 0:r.onboarding_status)!=="not_started"&&n.jsx(ce,{className:"border-0 shadow-sm mt-6",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(Jr,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Inga onboarding-uppgifter tillgngliga n"})]})}),r&&n.jsx(hAe,{open:a,onClose:()=>{i(!1),o.invalidateQueries({queryKey:["employee"]})},employee:r})]})})}function dG({user:e}){const[t,r]=P.useState(!1),[s,a]=P.useState(!1),[i,o]=P.useState(!1),[l,c]=P.useState(null),[d,u]=P.useState(null),[h,g]=P.useState(null);P.useEffect(()=>{const C="serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window;r(C),C&&e&&(x(),b())},[e]);const x=async()=>{var C;try{const M=await oe.functions.invoke("getVapidPublicKey");(C=M.data)!=null&&C.publicKey&&g(M.data.publicKey)}catch(M){console.error("Error loading VAPID key:",M),u("Kunde inte ladda push-notifikationskonfiguration")}},b=async()=>{try{const M=await(await navigator.serviceWorker.ready).pushManager.getSubscription();M?(a(!0),c(M),await y(M)):a(!1)}catch(C){console.error("Error checking subscription:",C),u("Kunde inte kontrollera prenumerationsstatus")}},y=async C=>{try{(await oe.entities.PushSubscription.filter({user_email:e==null?void 0:e.email,endpoint:C.endpoint})).length===0&&await v(C)}catch(M){console.error("Error verifying subscription:",M)}},v=async C=>{try{const M=C.getKey("auth"),I=C.getKey("p256dh");await oe.entities.PushSubscription.create({user_email:e==null?void 0:e.email,endpoint:C.endpoint,auth_key:M?btoa(String.fromCharCode.apply(null,new Uint8Array(M))):"",p256dh_key:I?btoa(String.fromCharCode.apply(null,new Uint8Array(I))):"",browser:j(),device_name:w()})}catch(M){console.error("Error storing subscription:",M)}},j=()=>{const C=navigator.userAgent;return C.includes("Chrome")?"Chrome":C.includes("Firefox")?"Firefox":C.includes("Safari")?"Safari":C.includes("Edge")?"Edge":"Other"},w=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"Mobile":"Desktop",N=async()=>{if(!h){u("VAPID-nyckel inte tillgnglig nnu. Vnta ett gonblick och frsk igen.");return}const C=/iPhone|iPad|iPod/.test(navigator.userAgent),M=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;if(C&&!M){u("P iOS: Lgg till appen p hemskrmen frst (Dela  Lgg till p hemskrmen)");return}o(!0),u(null);try{console.log("1. Begr notifikationsbehrighet...");const I=Notification.requestPermission(),F=new Promise((Z,se)=>setTimeout(()=>se(new Error("Timeout - tog fr lng tid")),1e4)),U=await Promise.race([I,F]);if(console.log("2. Behrighet:",U),U!=="granted")throw new Error("Push-notifikationsbehrighet inte beviljad");console.log("3. Vntar p service worker...");let W=await navigator.serviceWorker.getRegistration();W||(console.log("Waiting for service worker to be ready..."),W=await navigator.serviceWorker.ready),console.log("4. Service worker redo:",W),console.log("5. Skapar push-prenumeration...");const D=W.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:mAe(h)}),R=new Promise((Z,se)=>setTimeout(()=>se(new Error("Push subscription timeout")),1e4)),z=await Promise.race([D,R]);console.log("6. Prenumeration skapad"),console.log("7. Sparar i databas..."),await v(z),console.log("8. Sparat!"),c(z),a(!0),new Notification("Push-notifikationer aktiverade! ",{body:"Du kommer nu att f notifikationer ven nr appen r stngd.",icon:"/icon-192.png"})}catch(I){console.error("SUBSCRIPTION ERROR:",I),u(I.message||"Kunde inte aktivera push-notifikationer")}finally{o(!1)}},A=async()=>{o(!0);try{if(l&&await l.unsubscribe(),l){const C=await oe.entities.PushSubscription.filter({user_email:e==null?void 0:e.email,endpoint:l.endpoint});for(const M of C)await oe.entities.PushSubscription.update(M.id,{is_active:!1})}a(!1),c(null)}catch(C){console.error("Unsubscribe error:",C),u("Kunde inte avsluta prenumeration")}finally{o(!1)}};return t?n.jsx(tt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-4",children:n.jsxs(ce,{className:`border-0 shadow-sm ${s?"bg-emerald-50":"bg-blue-50"}`,children:[n.jsx(At,{children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`h-12 w-12 rounded-xl flex items-center justify-center ${s?"bg-emerald-100":"bg-blue-100"}`,children:n.jsx(cs,{className:`h-6 w-6 ${s?"text-emerald-600":"text-blue-600"}`})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs(Ct,{className:"flex items-center gap-2",children:["Push-notifikationer",s&&n.jsxs(it,{className:"bg-emerald-100 text-emerald-700",children:[n.jsx($r,{className:"h-3 w-3 mr-1"}),"Aktiverad"]})]}),n.jsx("p",{className:`text-sm mt-1 ${s?"text-emerald-700":"text-blue-700"}`,children:s?"Du fr notifikationer ven nr appen r stngd":"Aktivera fr att f notifikationer direkt till din enhet"})]})]})}),n.jsxs(he,{className:"space-y-4",children:[d&&n.jsxs("div",{className:"p-3 bg-red-100 rounded-lg flex items-start gap-2",children:[n.jsx(ja,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:"text-sm text-red-700",children:d})]}),n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-white/50 rounded-lg",children:[n.jsx(s3,{className:"h-5 w-5 text-slate-600 flex-shrink-0 mt-0.5"}),n.jsx("div",{className:"text-sm text-slate-700",children:s?"Prenumeration aktiv - Du kommer att f push-notifikationer p din enhet":"Aktivera fr att f omedelbar notification nr ngot viktigt hnder"})]}),n.jsx("div",{className:"flex gap-3",children:s?n.jsx(ye,{onClick:A,disabled:i,variant:"outline",className:"flex-1",children:i?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-4 w-4 mr-2 animate-spin"}),"Inaktiverar..."]}):"Inaktivera"}):n.jsx(ye,{onClick:N,disabled:i||!h,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:i?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-4 w-4 mr-2 animate-spin"}),"Aktiverar..."]}):h?n.jsxs(n.Fragment,{children:[n.jsx(cs,{className:"h-4 w-4 mr-2"}),"Aktivera push-notifikationer"]}):n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-4 w-4 mr-2 animate-spin"}),"Laddar..."]})})})]})]})}):n.jsx(ce,{className:"border-0 shadow-sm bg-amber-50 border-l-4 border-amber-500",children:n.jsx(he,{className:"p-4",children:n.jsx("p",{className:"text-sm text-amber-900",children:"Din webblsare stder inte push-notifikationer. Anvnd Chrome, Firefox, Edge eller senare versioner av Safari."})})})}function mAe(e){const t="=".repeat((4-e.length%4)%4),r=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),s=window.atob(r),a=new Uint8Array(s.length);for(let i=0;i<s.length;++i)a[i]=s.charCodeAt(i);return a}const pAe=[{key:"onboarding_tasks",label:"Onboarding-uppgifter",description:"F notiser om nya uppgifter"},{key:"time_entries",label:"Tidrapportering",description:"Pminnelser om utstmpling och tidrapporter"},{key:"leave_requests",label:"Semesteranskningar",description:"Status fr dina anskningar"},{key:"vehicle_maintenance",label:"Fordonsunderhll",description:"Service och underhllspminnelser"},{key:"chat_messages",label:"Chattmeddelanden",description:"Nya meddelanden frn kollegor"},{key:"project_updates",label:"Projektuppdateringar",description:"Uppdateringar om dina projekt"},{key:"news_posts",label:"Nyheter",description:"Fretagsnyheter och meddelanden"},{key:"system_alerts",label:"Systemaviseringar",description:"Viktiga systemmeddelanden"}];function xAe(){const[e,t]=P.useState(null),r=$n();P.useEffect(()=>{oe.auth.me().then(t)},[]);const{data:s,isLoading:a}=He({queryKey:["notificationSettings",e==null?void 0:e.email],queryFn:async()=>{const l=await oe.entities.NotificationSettings.filter({user_email:e.email});return l.length>0?l[0]:oe.entities.NotificationSettings.create({user_email:e.email,onboarding_tasks:!0,time_entries:!0,leave_requests:!0,vehicle_maintenance:!0,chat_messages:!0,project_updates:!0,news_posts:!0,system_alerts:!0,push_enabled:!1,email_enabled:!0})},enabled:!!(e!=null&&e.email)}),i=Xt({mutationFn:l=>oe.entities.NotificationSettings.update(s.id,l),onSuccess:()=>{r.invalidateQueries({queryKey:["notificationSettings"]})}}),o=(l,c)=>{i.mutate({[l]:c})};return!e||a?n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white flex items-center justify-center",children:n.jsx(Ot,{className:"h-8 w-8 animate-spin text-slate-400"})}):n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pb-24",children:n.jsx("div",{className:"max-w-2xl mx-auto px-4 py-6",children:n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Notisinstllningar"}),n.jsx("div",{className:"mb-6",children:n.jsx(dG,{user:e})}),n.jsxs(ce,{className:"border-0 shadow-sm mb-6",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"text-lg flex items-center gap-2",children:[n.jsx(cs,{className:"h-5 w-5"}),"Leveransmetoder"]})}),n.jsxs(he,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(s3,{className:"h-5 w-5 text-slate-500"}),n.jsxs("div",{children:[n.jsx(ve,{className:"text-base",children:"Push-notiser"}),n.jsx("p",{className:"text-sm text-slate-500",children:"F notiser p din enhet"})]})]}),n.jsx(Io,{checked:s==null?void 0:s.push_enabled,onCheckedChange:l=>o("push_enabled",l)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(_c,{className:"h-5 w-5 text-slate-500"}),n.jsxs("div",{children:[n.jsx(ve,{className:"text-base",children:"Email-notiser"}),n.jsx("p",{className:"text-sm text-slate-500",children:"F notiser via email"})]})]}),n.jsx(Io,{checked:s==null?void 0:s.email_enabled,onCheckedChange:l=>o("email_enabled",l)})]})]})]}),n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsx(Ct,{className:"text-lg",children:"Notistyper"})}),n.jsx(he,{className:"space-y-4",children:pAe.map(l=>n.jsxs("div",{className:"flex items-center justify-between py-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx(ve,{className:"text-base",children:l.label}),n.jsx("p",{className:"text-sm text-slate-500",children:l.description})]}),n.jsx(Io,{checked:s==null?void 0:s[l.key],onCheckedChange:c=>o(l.key,c)})]},l.key))})]})]})})})}const gAe=["Ledning","HR","Slj","Marknad","IT","Ekonomi","Produktion","Kundtjnst","vrigt"];function vAe({open:e,onClose:t,template:r}){const[s,a]=P.useState({name:"",description:"",department:"",is_active:!0,tasks:[]});P.useEffect(()=>{a(r?{name:r.name||"",description:r.description||"",department:r.department||"",is_active:r.is_active!==!1,tasks:r.tasks||[]}:{name:"",description:"",department:"",is_active:!0,tasks:[]})},[r,e]);const i=Xt({mutationFn:async u=>r?oe.entities.OnboardingTemplate.update(r.id,u):oe.entities.OnboardingTemplate.create(u),onSuccess:()=>{t()}}),o=()=>{a(u=>({...u,tasks:[...u.tasks,{title:"",description:"",days_after_start:1,assigned_to_role:"employee",is_critical:!1,related_resource_url:"",admin_notes:""}]}))},l=u=>{a(h=>({...h,tasks:h.tasks.filter((g,x)=>x!==u)}))},c=(u,h,g)=>{a(x=>({...x,tasks:x.tasks.map((b,y)=>y===u?{...b,[h]:g}:b)}))},d=u=>{u.preventDefault(),i.mutate(s)};return n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[n.jsx(er,{children:n.jsx(tr,{children:r?"Redigera mall":"Skapa ny mall"})}),n.jsxs("form",{onSubmit:d,className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"name",children:"Mallnamn *"}),n.jsx(De,{id:"name",value:s.name,onChange:u=>a(h=>({...h,name:u.target.value})),placeholder:"T.ex. Standardkontor",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"department",children:"Avdelning"}),n.jsxs(Nt,{value:s.department,onValueChange:u=>a(h=>({...h,department:u})),children:[n.jsx(jt,{children:n.jsx(kt,{placeholder:"Vlj avdelning"})}),n.jsx(wt,{children:gAe.map(u=>n.jsx(Ne,{value:u,children:u},u))})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"description",children:"Beskrivning"}),n.jsx(Zn,{id:"description",value:s.description,onChange:u=>a(h=>({...h,description:u.target.value})),placeholder:"Beskriv vad denna mall r fr...",className:"min-h-[80px]"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(wh,{id:"is_active",checked:s.is_active,onCheckedChange:u=>a(h=>({...h,is_active:u}))}),n.jsx(ve,{htmlFor:"is_active",className:"cursor-pointer",children:"Aktiv mall"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(ve,{children:"Uppgifter"}),n.jsxs(ye,{type:"button",variant:"outline",size:"sm",onClick:o,children:[n.jsx(xr,{className:"h-4 w-4 mr-2"}),"Lgg till uppgift"]})]}),n.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:s.tasks.map((u,h)=>n.jsx(ce,{className:"border-slate-200",children:n.jsxs(he,{className:"p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx(De,{placeholder:"Uppgiftstitel *",value:u.title,onChange:g=>c(h,"title",g.target.value),required:!0}),n.jsx(ye,{type:"button",variant:"ghost",size:"icon",onClick:()=>l(h),className:"text-red-500 hover:text-red-600",children:n.jsx(bi,{className:"h-4 w-4"})})]}),n.jsx(Zn,{placeholder:"Beskrivning",value:u.description,onChange:g=>c(h,"description",g.target.value),className:"min-h-[60px]"}),n.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(ve,{className:"text-xs",children:"Dagar efter start"}),n.jsx(De,{type:"number",min:"0",value:u.days_after_start,onChange:g=>c(h,"days_after_start",parseInt(g.target.value))})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(ve,{className:"text-xs",children:"Ansvarig"}),n.jsxs(Nt,{value:u.assigned_to_role,onValueChange:g=>c(h,"assigned_to_role",g),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"employee",children:"Medarbetare"}),n.jsx(Ne,{value:"manager",children:"Chef"}),n.jsx(Ne,{value:"hr",children:"HR"})]})]})]}),n.jsx("div",{className:"space-y-1 flex items-end",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx(wh,{checked:u.is_critical,onCheckedChange:g=>c(h,"is_critical",g)}),n.jsx("span",{className:"text-xs",children:"Kritisk"})]})})]}),n.jsx(De,{placeholder:"Resurslnk (valfritt)",value:u.related_resource_url,onChange:g=>c(h,"related_resource_url",g.target.value)}),n.jsx(Zn,{placeholder:"Admin-noteringar (valfritt)",value:u.admin_notes,onChange:g=>c(h,"admin_notes",g.target.value),className:"min-h-[50px]"})]})},h))})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Avbryt"}),n.jsx(ye,{type:"submit",disabled:i.isPending||!s.name,className:"flex-1",children:i.isPending?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"w-4 h-4 mr-2 animate-spin"}),"Sparar..."]}):"Spara mall"})]})]})]})})}function yAe(){const[e,t]=P.useState(""),[r,s]=P.useState(!1),[a,i]=P.useState(null),o=$n(),{data:l=[],isLoading:c}=He({queryKey:["onboardingTemplates"],queryFn:()=>oe.entities.OnboardingTemplate.list("-created_date")}),d=Xt({mutationFn:x=>oe.entities.OnboardingTemplate.delete(x),onSuccess:()=>{o.invalidateQueries({queryKey:["onboardingTemplates"]})}}),u=l.filter(x=>{var b,y;return((b=x.name)==null?void 0:b.toLowerCase().includes(e.toLowerCase()))||((y=x.description)==null?void 0:y.toLowerCase().includes(e.toLowerCase()))}),h=x=>{i(x),s(!0)},g=x=>{window.confirm(`Ta bort mallen "${x.name}"?`)&&d.mutate(x.id)};return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pb-24",children:[n.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Onboarding-mallar"}),n.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[l.length," mallar"]})]}),n.jsxs(ye,{onClick:()=>{i(null),s(!0)},className:"rounded-full h-11 px-5",children:[n.jsx(xr,{className:"w-4 h-4 mr-2"}),"Skapa mall"]})]}),n.jsxs("div",{className:"relative mb-6",children:[n.jsx(uo,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),n.jsx(De,{placeholder:"Sk mallar...",value:e,onChange:x=>t(x.target.value),className:"pl-11 h-12 rounded-2xl border-0 bg-white shadow-sm"})]}),n.jsx("div",{className:"space-y-3",children:n.jsx(_a,{mode:"popLayout",children:c?n.jsx("div",{className:"space-y-3",children:[1,2,3].map(x=>n.jsx("div",{className:"bg-white rounded-2xl h-32 animate-pulse"},x))}):u.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(kX,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Inga mallar hittades"})]})}):u.map((x,b)=>{var y;return n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},transition:{delay:b*.05},children:n.jsxs(ce,{className:"border-0 shadow-sm hover:shadow-md transition-shadow",children:[n.jsx(At,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs(Ct,{className:"flex items-center gap-2",children:[x.name,!x.is_active&&n.jsx(it,{variant:"outline",className:"text-xs",children:"Inaktiv"})]}),x.description&&n.jsx("p",{className:"text-sm text-slate-500 mt-2",children:x.description}),x.department&&n.jsx(it,{variant:"secondary",className:"mt-2",children:x.department})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(ye,{variant:"ghost",size:"icon",onClick:()=>h(x),className:"h-8 w-8",children:n.jsx(e9,{className:"h-4 w-4"})}),n.jsx(ye,{variant:"ghost",size:"icon",onClick:()=>g(x),disabled:d.isPending,className:"h-8 w-8 text-red-500 hover:text-red-600 hover:bg-red-50",children:n.jsx(bi,{className:"h-4 w-4"})})]})]})}),n.jsx(he,{children:n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(ti,{className:"h-4 w-4"}),n.jsxs("span",{children:[((y=x.tasks)==null?void 0:y.length)||0," uppgifter"]})]})})]})},x.id)})})})]})}),n.jsx(vAe,{open:r,onClose:()=>{s(!1),i(null),o.invalidateQueries({queryKey:["onboardingTemplates"]})},template:a})]})}let bAe={data:""},jAe=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||bAe},wAe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,_Ae=/\/\*[^]*?\*\/|  +/g,f7=/\n+/g,of=(e,t)=>{let r="",s="",a="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?r=i+" "+o+";":s+=i[1]=="f"?of(o,i):i+"{"+of(o,i[1]=="k"?"":t)+"}":typeof o=="object"?s+=of(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=of.p?of.p(i,o):i+":"+o+";")}return r+(t&&a?t+"{"+a+"}":a)+s},Yu={},uG=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+uG(e[r]);return t}return e},NAe=(e,t,r,s,a)=>{let i=uG(e),o=Yu[i]||(Yu[i]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(i));if(!Yu[o]){let c=i!==e?e:(d=>{let u,h,g=[{}];for(;u=wAe.exec(d.replace(_Ae,""));)u[4]?g.shift():u[3]?(h=u[3].replace(f7," ").trim(),g.unshift(g[0][h]=g[0][h]||{})):g[0][u[1]]=u[2].replace(f7," ").trim();return g[0]})(e);Yu[o]=of(a?{["@keyframes "+o]:c}:c,r?"":"."+o)}let l=r&&Yu.g?Yu.g:null;return r&&(Yu.g=Yu[o]),((c,d,u,h)=>{h?d.data=d.data.replace(h,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(Yu[o],t,s,l),o},kAe=(e,t,r)=>e.reduce((s,a,i)=>{let o=t[i];if(o&&o.call){let l=o(r),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":of(l,""):l===!1?"":l}return s+a+(o??"")},"");function Ow(e){let t=this||{},r=e.call?e(t.p):e;return NAe(r.unshift?r.raw?kAe(r,[].slice.call(arguments,1),t.p):r.reduce((s,a)=>Object.assign(s,a&&a.call?a(t.p):a),{}):r,jAe(t.target),t.g,t.o,t.k)}let hG,HP,WP;Ow.bind({g:1});let Sh=Ow.bind({k:1});function SAe(e,t,r,s){of.p=t,hG=e,HP=r,WP=s}function Hf(e,t){let r=this||{};return function(){let s=arguments;function a(i,o){let l=Object.assign({},i),c=l.className||a.className;r.p=Object.assign({theme:HP&&HP()},l),r.o=/ *go\d+/.test(c),l.className=Ow.apply(r,s)+(c?" "+c:"");let d=e;return e[0]&&(d=l.as||e,delete l.as),WP&&d[0]&&WP(l),hG(d,l)}return a}}var PAe=e=>typeof e=="function",KP=(e,t)=>PAe(e)?e(t):e,AAe=(()=>{let e=0;return()=>(++e).toString()})(),CAe=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),TAe=20,fG="default",mG=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:s}=t;return mG(e,{type:e.toasts.find(o=>o.id===s.id)?1:0,toast:s});case 3:let{toastId:a}=t;return{...e,toasts:e.toasts.map(o=>o.id===a||a===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},EAe=[],OAe={toasts:[],pausedAt:void 0,settings:{toastLimit:TAe}},ux={},pG=(e,t=fG)=>{ux[t]=mG(ux[t]||OAe,e),EAe.forEach(([r,s])=>{r===t&&s(ux[t])})},xG=e=>Object.keys(ux).forEach(t=>pG(e,t)),MAe=e=>Object.keys(ux).find(t=>ux[t].toasts.some(r=>r.id===e)),$C=(e=fG)=>t=>{pG(t,e)},LAe=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||AAe()}),xy=e=>(t,r)=>{let s=LAe(t,e,r);return $C(s.toasterId||MAe(s.id))({type:2,toast:s}),s.id},Ri=(e,t)=>xy("blank")(e,t);Ri.error=xy("error");Ri.success=xy("success");Ri.loading=xy("loading");Ri.custom=xy("custom");Ri.dismiss=(e,t)=>{let r={type:3,toastId:e};t?$C(t)(r):xG(r)};Ri.dismissAll=e=>Ri.dismiss(void 0,e);Ri.remove=(e,t)=>{let r={type:4,toastId:e};t?$C(t)(r):xG(r)};Ri.removeAll=e=>Ri.remove(void 0,e);Ri.promise=(e,t,r)=>{let s=Ri.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(a=>{let i=t.success?KP(t.success,a):void 0;return i?Ri.success(i,{id:s,...r,...r==null?void 0:r.success}):Ri.dismiss(s),a}).catch(a=>{let i=t.error?KP(t.error,a):void 0;i?Ri.error(i,{id:s,...r,...r==null?void 0:r.error}):Ri.dismiss(s)}),e};var DAe=Sh`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,IAe=Sh`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,RAe=Sh`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,FAe=Hf("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${DAe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${IAe} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${RAe} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,$Ae=Sh`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,BAe=Hf("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${$Ae} 1s linear infinite;
`,qAe=Sh`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,zAe=Sh`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,VAe=Hf("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${qAe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${zAe} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,UAe=Hf("div")`
  position: absolute;
`,HAe=Hf("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,WAe=Sh`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,KAe=Hf("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${WAe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,GAe=({toast:e})=>{let{icon:t,type:r,iconTheme:s}=e;return t!==void 0?typeof t=="string"?P.createElement(KAe,null,t):t:r==="blank"?null:P.createElement(HAe,null,P.createElement(BAe,{...s}),r!=="loading"&&P.createElement(UAe,null,r==="error"?P.createElement(FAe,{...s}):P.createElement(VAe,{...s})))},ZAe=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,YAe=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,XAe="0%{opacity:0;} 100%{opacity:1;}",QAe="0%{opacity:1;} 100%{opacity:0;}",JAe=Hf("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,eCe=Hf("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,tCe=(e,t)=>{let r=e.includes("top")?1:-1,[s,a]=CAe()?[XAe,QAe]:[ZAe(r),YAe(r)];return{animation:t?`${Sh(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Sh(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};P.memo(({toast:e,position:t,style:r,children:s})=>{let a=e.height?tCe(e.position||t||"top-center",e.visible):{opacity:0},i=P.createElement(GAe,{toast:e}),o=P.createElement(eCe,{...e.ariaProps},KP(e.message,e));return P.createElement(JAe,{className:e.className,style:{...a,...r,...e.style}},typeof s=="function"?s({icon:i,message:o}):P.createElement(P.Fragment,null,i,o))});SAe(P.createElement);Ow`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;function nCe({user:e}){const t=$n(),[r,s]=P.useState(!1),{data:a,isLoading:i}=He({queryKey:["myEmployee",e==null?void 0:e.email],queryFn:async()=>(await oe.entities.Employee.filter({user_email:e==null?void 0:e.email}))[0]||null,enabled:!!e}),{data:o}=He({queryKey:["activeProjects"],queryFn:()=>oe.entities.Project.filter({status:"pgende"}),initialData:[]}),l=Xt({mutationFn:async y=>a?oe.entities.Employee.update(a.id,y):oe.entities.Employee.create({...y,user_email:e.email}),onSuccess:()=>{t.invalidateQueries({queryKey:["myEmployee"]}),s(!1),Ri.success("Instllningar sparade")}}),c=(y,v)=>{const w={...(a==null?void 0:a.notification_preferences)||{},[y]:v};s(!0),l.mutate({notification_preferences:w})},d=y=>{s(!0),l.mutate({theme_preference:y});const v=document.documentElement;y==="dark"?v.classList.add("dark"):y==="light"?v.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches?v.classList.add("dark"):v.classList.remove("dark")},u=y=>{s(!0),l.mutate({default_project_id:y})},h=(a==null?void 0:a.notification_preferences)||{},g=(a==null?void 0:a.theme_preference)||"light",x=a==null?void 0:a.default_project_id,b=[{key:"time_report_approved",label:"Godknda tidrapporter",icon:Rm},{key:"time_report_rejected",label:"Avvisade tidrapporter",icon:rE},{key:"leave_request_approved",label:"Godknda ledighetsanskningar",icon:Rm},{key:"leave_request_rejected",label:"Avvisade ledighetsanskningar",icon:rE},{key:"new_project_task",label:"Nya projektuppgifter",icon:aE},{key:"time_anomaly_detected",label:"Avvikelser i tidrapportering",icon:cs},{key:"forgot_clock_out",label:"Glmt stmpla ut",icon:cs},{key:"overtime_warning",label:"vertidsvarningar",icon:cs},{key:"vehicle_maintenance",label:"Fordonsunderhll",icon:cs},{key:"driving_journal_needs_review",label:"Krjournal behver granskas",icon:cs},{key:"news_and_announcements",label:"Nyheter och meddelanden",icon:cs}];return i?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-8 flex items-center justify-center",children:n.jsx(Ot,{className:"h-6 w-6 animate-spin text-slate-400"})})}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{className:"pb-3",children:n.jsxs(Ct,{className:"text-base flex items-center gap-2",children:[n.jsx(lE,{className:"h-4 w-4"}),"Tema"]})}),n.jsxs(he,{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(Nt,{value:g,onValueChange:d,children:[n.jsx(jt,{className:"h-11",children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"light",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(lE,{className:"h-4 w-4"}),"Ljust"]})}),n.jsx(Ne,{value:"dark",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx($X,{className:"h-4 w-4"}),"Mrkt"]})}),n.jsx(Ne,{value:"auto",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(RX,{className:"h-4 w-4"}),"Automatisk"]})})]})]}),r&&l.isPending&&n.jsx(Ot,{className:"h-4 w-4 animate-spin text-slate-400"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:g==="auto"?"Fljer enhetens systeminstllningar":`${g==="light"?"Ljust":"Mrkt"} tema aktiverat`})]})]}),n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{className:"pb-3",children:n.jsxs(Ct,{className:"text-base flex items-center gap-2",children:[n.jsx(aE,{className:"h-4 w-4"}),"Standardprojekt"]})}),n.jsxs(he,{className:"space-y-3",children:[n.jsxs(Nt,{value:x||"none",onValueChange:y=>u(y==="none"?null:y),children:[n.jsx(jt,{className:"h-11",children:n.jsx(kt,{placeholder:"Inget standardprojekt"})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"none",children:"Inget standardprojekt"}),o.map(y=>n.jsx(Ne,{value:y.id,children:y.name},y.id))]})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Projektet som vljs automatiskt vid instmpling"})]})]}),n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{className:"pb-3",children:n.jsxs(Ct,{className:"text-base flex items-center gap-2",children:[n.jsx(cs,{className:"h-4 w-4"}),"Notifikationer"]})}),n.jsx(he,{className:"space-y-4",children:b.map(({key:y,label:v,icon:j})=>n.jsxs(tt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center justify-between py-2 border-b last:border-0",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[n.jsx(j,{className:"h-4 w-4 text-slate-400"}),n.jsx(ve,{htmlFor:y,className:"text-sm font-normal cursor-pointer",children:v})]}),n.jsx(Io,{id:y,checked:h[y]!==!1,onCheckedChange:w=>c(y,w)})]},y))})]})]})}const rCe=["Ledning","HR","Slj","Marknad","IT","Ekonomi","Produktion","Kundtjnst","vrigt"];function sCe(){var v,j,w;const[e,t]=P.useState(null),[r,s]=P.useState(!1),[a,i]=P.useState(!1),[o,l]=P.useState({}),c=$n();P.useEffect(()=>{oe.auth.me().then(t)},[]);const{data:d,isLoading:u}=He({queryKey:["myEmployee",e==null?void 0:e.email],queryFn:async()=>(await oe.entities.Employee.filter({user_email:e==null?void 0:e.email}))[0]||null,enabled:!!e});P.useEffect(()=>{d&&l(d)},[d]);const h=Xt({mutationFn:async N=>{N.full_name&&N.full_name!==e.full_name&&await oe.auth.updateMe({full_name:N.full_name});const{full_name:A,...C}=N;return d?oe.entities.Employee.update(d.id,C):oe.entities.Employee.create({...C,user_email:e.email})},onSuccess:async()=>{c.invalidateQueries({queryKey:["myEmployee"]});const N=await oe.auth.me();t(N),s(!1)}}),g=async N=>{const A=N.target.files[0];if(A){i(!0);try{const{file_url:C}=await oe.integrations.Core.UploadFile({file:A});l(M=>({...M,profile_image:C}))}catch(C){console.error("Upload failed:",C)}i(!1)}},x=()=>{h.mutate(o)},b=()=>{oe.auth.logout()},y=N=>N?N.split(" ").map(A=>A[0]).join("").toUpperCase().slice(0,2):"?";return e?n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white",children:n.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-6 pb-24",children:[n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[n.jsxs("div",{className:"relative inline-block",children:[n.jsxs(Vf,{className:"h-28 w-28 ring-4 ring-white shadow-lg",children:[n.jsx(py,{src:o.profile_image||(d==null?void 0:d.profile_image)}),n.jsx(Uf,{className:"bg-gradient-to-br from-slate-200 to-slate-300 text-slate-600 text-2xl font-medium",children:y(e.full_name)})]}),r&&n.jsxs("label",{className:"absolute bottom-0 right-0 h-9 w-9 rounded-full bg-slate-900 flex items-center justify-center cursor-pointer shadow-lg hover:bg-slate-800 transition-colors",children:[n.jsx("input",{type:"file",accept:"image/*",onChange:g,className:"hidden"}),a?n.jsx(Ot,{className:"h-4 w-4 text-white animate-spin"}):n.jsx(W7,{className:"h-4 w-4 text-white"})]})]}),n.jsx("h1",{className:"text-2xl font-bold text-slate-900 mt-4",children:e.full_name}),n.jsx("p",{className:"text-slate-500",children:o.job_title||(d==null?void 0:d.job_title)||"Ingen titel"}),(o.department||(d==null?void 0:d.department))&&n.jsx(it,{className:"mt-2 bg-slate-100 text-slate-700 border-0",children:o.department||(d==null?void 0:d.department)})]}),n.jsx("div",{className:"flex justify-center gap-3 mb-8",children:r?n.jsxs(n.Fragment,{children:[n.jsx(ye,{variant:"outline",onClick:()=>s(!1),className:"rounded-full px-6",children:"Avbryt"}),n.jsxs(ye,{onClick:x,disabled:h.isPending,className:"rounded-full px-6",children:[h.isPending?n.jsx(Ot,{className:"h-4 w-4 animate-spin mr-2"}):n.jsx(og,{className:"h-4 w-4 mr-2"}),"Spara"]})]}):n.jsx(ye,{onClick:()=>s(!0),variant:"outline",className:"rounded-full px-6",children:"Redigera profil"})}),r?n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-6 space-y-5",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Frnamn"}),n.jsx(De,{value:((v=o.full_name??e.full_name)==null?void 0:v.split(" ")[0])||"",onChange:N=>{var M;const A=N.target.value,C=((M=o.full_name??e.full_name)==null?void 0:M.split(" ").slice(1).join(" "))||"";l(I=>({...I,full_name:`${A} ${C}`.trim()}))},placeholder:"Frnamn",className:"h-11"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Efternamn"}),n.jsx(De,{value:((j=o.full_name??e.full_name)==null?void 0:j.split(" ").slice(1).join(" "))||"",onChange:N=>{var M;const A=((M=o.full_name??e.full_name)==null?void 0:M.split(" ")[0])||"",C=N.target.value;l(I=>({...I,full_name:`${A} ${C}`.trim()}))},placeholder:"Efternamn",className:"h-11"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Telefon"}),n.jsx(De,{value:o.phone||"",onChange:N=>l(A=>({...A,phone:N.target.value})),placeholder:"070-123 45 67",className:"h-11"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Plats"}),n.jsx(De,{value:o.location||"",onChange:N=>l(A=>({...A,location:N.target.value})),placeholder:"Stockholm",className:"h-11"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Titel"}),n.jsx(De,{value:o.job_title||"",onChange:N=>l(A=>({...A,job_title:N.target.value})),placeholder:"Din titel",className:"h-11"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Avdelning"}),n.jsxs(Nt,{value:o.department||"",onValueChange:N=>l(A=>({...A,department:N})),children:[n.jsx(jt,{className:"h-11",children:n.jsx(kt,{placeholder:"Vlj avdelning"})}),n.jsx(wt,{children:rCe.map(N=>n.jsx(Ne,{value:N,children:N},N))})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Om mig"}),n.jsx(Zn,{value:o.bio||"",onChange:N=>l(A=>({...A,bio:N.target.value})),placeholder:"Bertta lite om dig sjlv...",className:"min-h-[100px] resize-none"})]})]})})}):n.jsxs(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[n.jsx(ce,{className:"border-0 shadow-sm overflow-hidden",children:n.jsxs(he,{className:"p-0",children:[n.jsxs("a",{href:`mailto:${e.email}`,className:"flex items-center gap-4 p-4 hover:bg-slate-50 transition-colors",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:n.jsx(_c,{className:"h-4 w-4 text-blue-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Email"}),n.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:e.email})]})]}),((d==null?void 0:d.phone)||o.phone)&&n.jsxs("a",{href:`tel:${(d==null?void 0:d.phone)||o.phone}`,className:"flex items-center gap-4 p-4 border-t hover:bg-slate-50 transition-colors",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-emerald-100 flex items-center justify-center",children:n.jsx(B0,{className:"h-4 w-4 text-emerald-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Telefon"}),n.jsx("p",{className:"text-sm font-medium text-slate-900",children:(d==null?void 0:d.phone)||o.phone})]})]}),((d==null?void 0:d.location)||o.location)&&n.jsxs("div",{className:"flex items-center gap-4 p-4 border-t",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-violet-100 flex items-center justify-center",children:n.jsx(Fn,{className:"h-4 w-4 text-violet-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Plats"}),n.jsx("p",{className:"text-sm font-medium text-slate-900",children:(d==null?void 0:d.location)||o.location})]})]}),((d==null?void 0:d.department)||o.department)&&n.jsxs("div",{className:"flex items-center gap-4 p-4 border-t",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-amber-100 flex items-center justify-center",children:n.jsx(xY,{className:"h-4 w-4 text-amber-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Avdelning"}),n.jsx("p",{className:"text-sm font-medium text-slate-900",children:(d==null?void 0:d.department)||o.department})]})]}),(d==null?void 0:d.start_date)&&n.jsxs("div",{className:"flex items-center gap-4 p-4 border-t",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-rose-100 flex items-center justify-center",children:n.jsx(Do,{className:"h-4 w-4 text-rose-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Anstlld sedan"}),n.jsx("p",{className:"text-sm font-medium text-slate-900",children:Ce(new Date(d.start_date),"d MMMM yyyy",{locale:ut})})]})]})]})}),((d==null?void 0:d.bio)||o.bio)&&n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-5",children:[n.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Om mig"}),n.jsx("p",{className:"text-sm text-slate-700 leading-relaxed",children:(d==null?void 0:d.bio)||o.bio})]})}),((w=d==null?void 0:d.skills)==null?void 0:w.length)>0&&n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-5",children:[n.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Kompetenser"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:d.skills.map(N=>n.jsx(it,{variant:"secondary",className:"bg-slate-100 text-slate-700",children:N},N))})]})}),n.jsx(dG,{user:e}),n.jsx(nCe,{user:e}),n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-0",children:n.jsxs("button",{onClick:b,className:"flex items-center gap-4 p-4 w-full text-left hover:bg-slate-50 transition-colors text-rose-600",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-rose-100 flex items-center justify-center",children:n.jsx(X7,{className:"h-4 w-4"})}),n.jsx("span",{className:"font-medium",children:"Logga ut"})]})})})]})]})}):null}function aCe(){const[e,t]=P.useState(null),[r,s]=P.useState(""),[a,i]=P.useState(""),[o,l]=P.useState("all");P.useEffect(()=>{oe.auth.me().then(t).catch(()=>t(null))},[]);const{data:c=[]}=He({queryKey:["projects"],queryFn:()=>oe.entities.Project.list(),initialData:[]}),{data:d=[]}=He({queryKey:["timeEntries"],queryFn:()=>oe.entities.TimeEntry.list("-date",1e3),initialData:[]}),{data:u=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list(),initialData:[]}),h=d.filter(j=>r&&j.date<r||a&&j.date>a?!1:o!=="all"?!j.project_allocations||j.project_allocations.length===0?!1:j.project_allocations.some(w=>w.project_id===o):!0),g=c.map(j=>{const w=h.filter(D=>{var R;return(R=D.project_allocations)==null?void 0:R.some(z=>z.project_id===j.id)}),N=w.reduce((D,R)=>{var Z;const z=(Z=R.project_allocations)==null?void 0:Z.find(se=>se.project_id===j.id);return D+((z==null?void 0:z.hours)||0)},0),A={};w.forEach(D=>{var Z;const R=(Z=D.project_allocations)==null?void 0:Z.find(se=>se.project_id===j.id),z=(R==null?void 0:R.hours)||0;z>0&&(A[D.employee_email]=(A[D.employee_email]||0)+z)});const C=j.budget_hours||0,M=C>0?N-C:null,I=C>0?N/C*100:null,F=j.hourly_rate||0,U=N*F,W=C*F;return{...j,totalHours:Number(N.toFixed(2)),employeeHours:A,employeeCount:Object.keys(A).length,budgetVariance:M!==null?Number(M.toFixed(2)):null,budgetPercentage:I!==null?Number(I.toFixed(1)):null,estimatedCost:Number(U.toFixed(2)),budgetCost:Number(W.toFixed(2)),isOverBudget:M!==null&&M>0}}),x=o==="all"?g.filter(j=>j.totalHours>0):g.filter(j=>j.id===o),b=j=>{const w=u.find(N=>N.user_email===j);return w!=null&&w.user_email?j.split("@")[0]:j},y=()=>{const j=["Projekt","Projektkod","Status","Total timmar","Budget timmar","Avvikelse","Budget %","Kostnad","Antal anstllda"],w=x.map(M=>[M.name,M.project_code,M.status,M.totalHours,M.budget_hours||0,M.budgetVariance||0,M.budgetPercentage||0,M.estimatedCost,M.employeeCount]),N=[j.join(","),...w.map(M=>M.join(","))].join(`
`),A=new Blob([N],{type:"text/csv;charset=utf-8;"}),C=document.createElement("a");C.href=URL.createObjectURL(A),C.download=`projektrapport_${Ce(new Date,"yyyy-MM-dd")}.csv`,C.click()};if((e==null?void 0:e.role)!=="admin")return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white p-6",children:n.jsx(ce,{className:"max-w-md mx-auto mt-20",children:n.jsxs(he,{className:"p-8 text-center",children:[n.jsx(Kr,{className:"h-12 w-12 text-amber-500 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"tkomst nekad"}),n.jsx("p",{className:"text-slate-600",children:"Endast administratrer har tillgng till projektrapporter."})]})})});const v={totalHours:x.reduce((j,w)=>j+w.totalHours,0),totalCost:x.reduce((j,w)=>j+w.estimatedCost,0),projectsOverBudget:x.filter(j=>j.isOverBudget).length,activeProjects:x.length};return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white p-4 md:p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[n.jsx(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Projektrapporter"}),n.jsx("p",{className:"text-slate-600 mt-1",children:"versikt och analys av projektens framsteg"})]}),n.jsxs(ye,{onClick:y,className:"bg-slate-900 hover:bg-slate-800",children:[n.jsx(Eo,{className:"h-4 w-4 mr-2"}),"Exportera CSV"]})]})}),n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"text-lg flex items-center gap-2",children:[n.jsx(_r,{className:"h-5 w-5"}),"Filtrera rapporter"]})}),n.jsxs(he,{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"Frn datum"}),n.jsx(De,{type:"date",value:r,onChange:j=>s(j.target.value),className:"rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"Till datum"}),n.jsx(De,{type:"date",value:a,onChange:j=>i(j.target.value),className:"rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"Projekt"}),n.jsxs(Nt,{value:o,onValueChange:l,children:[n.jsx(jt,{className:"rounded-lg",children:n.jsx(kt,{placeholder:"Alla projekt"})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"all",children:"Alla projekt"}),c.map(j=>n.jsxs(Ne,{value:j.id,children:[j.name," (",j.project_code,")"]},j.id))]})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-6",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-12 w-12 rounded-xl bg-blue-100 flex items-center justify-center",children:n.jsx(Jr,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-slate-600",children:"Aktiva projekt"}),n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:v.activeProjects})]})]})})}),n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-6",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-12 w-12 rounded-xl bg-emerald-100 flex items-center justify-center",children:n.jsx(Vt,{className:"h-6 w-6 text-emerald-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-slate-600",children:"Totalt timmar"}),n.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[v.totalHours.toFixed(1),"h"]})]})]})})}),n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-6",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-12 w-12 rounded-xl bg-amber-100 flex items-center justify-center",children:n.jsx(Sf,{className:"h-6 w-6 text-amber-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-slate-600",children:"Total kostnad"}),n.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[v.totalCost.toLocaleString("sv-SE")," kr"]})]})]})})}),n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-6",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-12 w-12 rounded-xl bg-rose-100 flex items-center justify-center",children:n.jsx(Kr,{className:"h-6 w-6 text-rose-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-slate-600",children:"ver budget"}),n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:v.projectsOverBudget})]})]})})})]}),n.jsx("div",{className:"space-y-4",children:x.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(Jr,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Inga projekt hittades"}),n.jsx("p",{className:"text-slate-600",children:"Justera filtren eller vnta p att tidrapporter registreras."})]})}):x.map((j,w)=>n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:w*.1},children:n.jsxs(ce,{className:"border-0 shadow-sm hover:shadow-md transition-shadow",children:[n.jsx(At,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Ct,{className:"text-xl",children:j.name}),n.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-700",children:j.project_code}),n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${j.status==="pgende"?"bg-blue-100 text-blue-700":j.status==="avslutat"?"bg-slate-100 text-slate-700":j.status==="pausat"?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700"}`,children:j.status})]}),j.description&&n.jsx("p",{className:"text-sm text-slate-600",children:j.description}),j.customer&&n.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["Kund: ",j.customer]})]}),j.isOverBudget&&n.jsxs("div",{className:"px-3 py-1 rounded-lg bg-rose-100 flex items-center gap-2",children:[n.jsx(Kr,{className:"h-4 w-4 text-rose-600"}),n.jsx("span",{className:"text-xs font-medium text-rose-700",children:"ver budget"})]})]})}),n.jsxs(he,{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(Vt,{className:"h-4 w-4"}),n.jsx("span",{className:"font-medium",children:"Arbetad tid"})]}),n.jsxs("div",{className:"pl-6",children:[n.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[j.totalHours,"h"]}),j.budget_hours&&n.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["av ",j.budget_hours,"h budgeterat"]})]})]}),j.budgetPercentage!==null&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(ta,{className:"h-4 w-4"}),n.jsx("span",{className:"font-medium",children:"Budgetfrbrukning"})]}),n.jsxs("div",{className:"pl-6",children:[n.jsxs("p",{className:`text-2xl font-bold ${j.budgetPercentage>100?"text-rose-600":j.budgetPercentage>80?"text-amber-600":"text-emerald-600"}`,children:[j.budgetPercentage,"%"]}),j.budgetVariance!==null&&n.jsxs("p",{className:`text-sm mt-1 ${j.budgetVariance>0?"text-rose-600":"text-emerald-600"}`,children:[j.budgetVariance>0?"+":"",j.budgetVariance,"h"]})]})]}),j.hourly_rate>0&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(Sf,{className:"h-4 w-4"}),n.jsx("span",{className:"font-medium",children:"Kostnad"})]}),n.jsxs("div",{className:"pl-6",children:[n.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[j.estimatedCost.toLocaleString("sv-SE")," kr"]}),j.budgetCost>0&&n.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["av ",j.budgetCost.toLocaleString("sv-SE")," kr budget"]})]})]})]}),Object.keys(j.employeeHours).length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-700 mb-3",children:[n.jsx(Fr,{className:"h-4 w-4"}),"Timmar per anstlld (",j.employeeCount," st)"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Object.entries(j.employeeHours).sort((N,A)=>A[1]-N[1]).map(([N,A])=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-8 w-8 rounded-full bg-slate-200 flex items-center justify-center",children:n.jsx("span",{className:"text-xs font-semibold text-slate-700",children:b(N).charAt(0).toUpperCase()})}),n.jsx("span",{className:"text-sm font-medium text-slate-900",children:b(N)})]}),n.jsxs("span",{className:"text-sm font-bold text-slate-700",children:[A.toFixed(1),"h"]})]},N))})]})]})]})},j.id))})]})})}var gG=["PageUp","PageDown"],vG=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],yG={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Rg="Slider",[GP,iCe,oCe]=p3(Rg),[bG]=ho(Rg,[oCe]),[lCe,Mw]=bG(Rg),jG=P.forwardRef((e,t)=>{const{name:r,min:s=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[s],value:u,onValueChange:h=()=>{},onValueCommit:g=()=>{},inverted:x=!1,form:b,...y}=e,v=P.useRef(new Set),j=P.useRef(0),N=o==="horizontal"?cCe:dCe,[A=[],C]=bu({prop:u,defaultProp:d,onChange:D=>{var z;(z=[...v.current][j.current])==null||z.focus(),h(D)}}),M=P.useRef(A);function I(D){const R=pCe(A,D);W(D,R)}function F(D){W(D,j.current)}function U(){const D=M.current[j.current];A[j.current]!==D&&g(A)}function W(D,R,{commit:z}={commit:!1}){const Z=yCe(i),se=bCe(Math.round((D-s)/i)*i+s,Z),J=W0(se,[s,a]);C((Q=[])=>{const H=fCe(Q,J,R);if(vCe(H,c*i)){j.current=H.indexOf(J);const ne=String(H)!==String(Q);return ne&&z&&g(H),ne?H:Q}else return Q})}return n.jsx(lCe,{scope:e.__scopeSlider,name:r,disabled:l,min:s,max:a,valueIndexToChangeRef:j,thumbs:v.current,values:A,orientation:o,form:b,children:n.jsx(GP.Provider,{scope:e.__scopeSlider,children:n.jsx(GP.Slot,{scope:e.__scopeSlider,children:n.jsx(N,{"aria-disabled":l,"data-disabled":l?"":void 0,...y,ref:t,onPointerDown:fn(y.onPointerDown,()=>{l||(M.current=A)}),min:s,max:a,inverted:x,onSlideStart:l?void 0:I,onSlideMove:l?void 0:F,onSlideEnd:l?void 0:U,onHomeKeyDown:()=>!l&&W(s,0,{commit:!0}),onEndKeyDown:()=>!l&&W(a,A.length-1,{commit:!0}),onStepKeyDown:({event:D,direction:R})=>{if(!l){const se=gG.includes(D.key)||D.shiftKey&&vG.includes(D.key)?10:1,J=j.current,Q=A[J],H=i*se*R;W(Q+H,J,{commit:!0})}}})})})})});jG.displayName=Rg;var[wG,_G]=bG(Rg,{startEdge:"left",endEdge:"right",size:"width",direction:1}),cCe=P.forwardRef((e,t)=>{const{min:r,max:s,dir:a,inverted:i,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...u}=e,[h,g]=P.useState(null),x=Vn(t,N=>g(N)),b=P.useRef(void 0),y=fg(a),v=y==="ltr",j=v&&!i||!v&&i;function w(N){const A=b.current||h.getBoundingClientRect(),C=[0,A.width],I=BC(C,j?[r,s]:[s,r]);return b.current=A,I(N-A.left)}return n.jsx(wG,{scope:e.__scopeSlider,startEdge:j?"left":"right",endEdge:j?"right":"left",direction:j?1:-1,size:"width",children:n.jsx(NG,{dir:y,"data-orientation":"horizontal",...u,ref:x,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:N=>{const A=w(N.clientX);o==null||o(A)},onSlideMove:N=>{const A=w(N.clientX);l==null||l(A)},onSlideEnd:()=>{b.current=void 0,c==null||c()},onStepKeyDown:N=>{const C=yG[j?"from-left":"from-right"].includes(N.key);d==null||d({event:N,direction:C?-1:1})}})})}),dCe=P.forwardRef((e,t)=>{const{min:r,max:s,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...d}=e,u=P.useRef(null),h=Vn(t,u),g=P.useRef(void 0),x=!a;function b(y){const v=g.current||u.current.getBoundingClientRect(),j=[0,v.height],N=BC(j,x?[s,r]:[r,s]);return g.current=v,N(y-v.top)}return n.jsx(wG,{scope:e.__scopeSlider,startEdge:x?"bottom":"top",endEdge:x?"top":"bottom",size:"height",direction:x?1:-1,children:n.jsx(NG,{"data-orientation":"vertical",...d,ref:h,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:y=>{const v=b(y.clientY);i==null||i(v)},onSlideMove:y=>{const v=b(y.clientY);o==null||o(v)},onSlideEnd:()=>{g.current=void 0,l==null||l()},onStepKeyDown:y=>{const j=yG[x?"from-bottom":"from-top"].includes(y.key);c==null||c({event:y,direction:j?-1:1})}})})}),NG=P.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:s,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...d}=e,u=Mw(Rg,r);return n.jsx(cn.span,{...d,ref:t,onKeyDown:fn(e.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(l(h),h.preventDefault()):gG.concat(vG).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:fn(e.onPointerDown,h=>{const g=h.target;g.setPointerCapture(h.pointerId),h.preventDefault(),u.thumbs.has(g)?g.focus():s(h)}),onPointerMove:fn(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:fn(e.onPointerUp,h=>{const g=h.target;g.hasPointerCapture(h.pointerId)&&(g.releasePointerCapture(h.pointerId),i(h))})})}),kG="SliderTrack",SG=P.forwardRef((e,t)=>{const{__scopeSlider:r,...s}=e,a=Mw(kG,r);return n.jsx(cn.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...s,ref:t})});SG.displayName=kG;var ZP="SliderRange",PG=P.forwardRef((e,t)=>{const{__scopeSlider:r,...s}=e,a=Mw(ZP,r),i=_G(ZP,r),o=P.useRef(null),l=Vn(t,o),c=a.values.length,d=a.values.map(g=>TG(g,a.min,a.max)),u=c>1?Math.min(...d):0,h=100-Math.max(...d);return n.jsx(cn.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...s,ref:l,style:{...e.style,[i.startEdge]:u+"%",[i.endEdge]:h+"%"}})});PG.displayName=ZP;var YP="SliderThumb",AG=P.forwardRef((e,t)=>{const r=iCe(e.__scopeSlider),[s,a]=P.useState(null),i=Vn(t,l=>a(l)),o=P.useMemo(()=>s?r().findIndex(l=>l.ref.current===s):-1,[r,s]);return n.jsx(uCe,{...e,ref:i,index:o})}),uCe=P.forwardRef((e,t)=>{const{__scopeSlider:r,index:s,name:a,...i}=e,o=Mw(YP,r),l=_G(YP,r),[c,d]=P.useState(null),u=Vn(t,w=>d(w)),h=c?o.form||!!c.closest("form"):!0,g=Wv(c),x=o.values[s],b=x===void 0?0:TG(x,o.min,o.max),y=mCe(s,o.values.length),v=g==null?void 0:g[l.size],j=v?xCe(v,b,l.direction):0;return P.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),n.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${b}% + ${j}px)`},children:[n.jsx(GP.ItemSlot,{scope:e.__scopeSlider,children:n.jsx(cn.span,{role:"slider","aria-label":e["aria-label"]||y,"aria-valuemin":o.min,"aria-valuenow":x,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:u,style:x===void 0?{display:"none"}:e.style,onFocus:fn(e.onFocus,()=>{o.valueIndexToChangeRef.current=s})})}),h&&n.jsx(CG,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:x},s)]})});AG.displayName=YP;var hCe="RadioBubbleInput",CG=P.forwardRef(({__scopeSlider:e,value:t,...r},s)=>{const a=P.useRef(null),i=Vn(a,s),o=Kv(t);return P.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&u){const h=new Event("input",{bubbles:!0});u.call(l,t),l.dispatchEvent(h)}},[o,t]),n.jsx(cn.input,{style:{display:"none"},...r,ref:i,defaultValue:t})});CG.displayName=hCe;function fCe(e=[],t,r){const s=[...e];return s[r]=t,s.sort((a,i)=>a-i)}function TG(e,t,r){const i=100/(r-t)*(e-t);return W0(i,[0,100])}function mCe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function pCe(e,t){if(e.length===1)return 0;const r=e.map(a=>Math.abs(a-t)),s=Math.min(...r);return r.indexOf(s)}function xCe(e,t,r){const s=e/2,i=BC([0,50],[0,s]);return(s-i(t)*r)*r}function gCe(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function vCe(e,t){if(t>0){const r=gCe(e);return Math.min(...r)>=t}return!0}function BC(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(r-e[0])}}function yCe(e){return(String(e).split(".")[1]||"").length}function bCe(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var EG=jG,jCe=SG,wCe=PG,_Ce=AG;const OG=P.forwardRef(({className:e,...t},r)=>n.jsxs(EG,{ref:r,className:Yt("relative flex w-full touch-none select-none items-center",e),...t,children:[n.jsx(jCe,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:n.jsx(wCe,{className:"absolute h-full bg-primary"})}),n.jsx(_Ce,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));OG.displayName=EG.displayName;function NCe({open:e,onClose:t,task:r,projectId:s}){const[a,i]=P.useState({title:"",description:"",assigned_to:"",status:"todo",priority:"medium",due_date:"",estimated_hours:"",actual_hours:"",completion_percentage:0}),o=$n(),{data:l=[]}=He({queryKey:["users"],queryFn:()=>oe.entities.User.list(),initialData:[]});P.useEffect(()=>{r&&i({title:r.title||"",description:r.description||"",assigned_to:r.assigned_to||"",status:r.status||"todo",priority:r.priority||"medium",due_date:r.due_date||"",estimated_hours:r.estimated_hours||"",actual_hours:r.actual_hours||"",completion_percentage:r.completion_percentage||0})},[r]);const c=Xt({mutationFn:u=>oe.entities.ProjectTask.update(r.id,u),onSuccess:()=>{o.invalidateQueries(["project-tasks",s]),t()}}),d=u=>{u.preventDefault(),c.mutate({...a,estimated_hours:a.estimated_hours?Number(a.estimated_hours):null,actual_hours:a.actual_hours?Number(a.actual_hours):null})};return r?n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"max-w-xl",children:[n.jsx(er,{children:n.jsx(tr,{children:"Redigera uppgift"})}),n.jsxs("form",{onSubmit:d,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Titel *"}),n.jsx(De,{value:a.title,onChange:u=>i({...a,title:u.target.value}),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Beskrivning"}),n.jsx(Zn,{value:a.description,onChange:u=>i({...a,description:u.target.value}),rows:3})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Status"}),n.jsxs(Nt,{value:a.status,onValueChange:u=>i({...a,status:u}),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"todo",children:"Att gra"}),n.jsx(Ne,{value:"in_progress",children:"Pgende"}),n.jsx(Ne,{value:"review",children:"Granskning"}),n.jsx(Ne,{value:"completed",children:"Klar"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Prioritet"}),n.jsxs(Nt,{value:a.priority,onValueChange:u=>i({...a,priority:u}),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"low",children:"Lg"}),n.jsx(Ne,{value:"medium",children:"Medel"}),n.jsx(Ne,{value:"high",children:"Hg"}),n.jsx(Ne,{value:"critical",children:"Kritisk"})]})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Tilldela till"}),n.jsxs(Nt,{value:a.assigned_to,onValueChange:u=>i({...a,assigned_to:u}),children:[n.jsx(jt,{children:n.jsx(kt,{placeholder:"Vlj person"})}),n.jsx(wt,{children:l.map(u=>n.jsx(Ne,{value:u.email,children:u.full_name},u.email))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Deadline"}),n.jsx(De,{type:"date",value:a.due_date,onChange:u=>i({...a,due_date:u.target.value})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Uppskattat (timmar)"}),n.jsx(De,{type:"number",step:"0.5",value:a.estimated_hours,onChange:u=>i({...a,estimated_hours:u.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Faktiskt (timmar)"}),n.jsx(De,{type:"number",step:"0.5",value:a.actual_hours,onChange:u=>i({...a,actual_hours:u.target.value})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(ve,{children:"Framsteg"}),n.jsxs("span",{className:"text-sm font-medium text-slate-900",children:[a.completion_percentage,"%"]})]}),n.jsx(OG,{value:[a.completion_percentage],onValueChange:([u])=>i({...a,completion_percentage:u}),max:100,step:5,className:"py-4"})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Avbryt"}),n.jsxs(ye,{type:"submit",className:"flex-1",disabled:c.isPending,children:[n.jsx(og,{className:"h-4 w-4 mr-2"}),"Spara ndringar"]})]})]})]})}):null}function kCe({tasks:e,projectId:t}){const[r,s]=P.useState(null),a=$n(),i=Xt({mutationFn:h=>oe.entities.ProjectTask.delete(h),onSuccess:()=>{a.invalidateQueries(["project-tasks",t])}}),o=Xt({mutationFn:({id:h,status:g})=>oe.entities.ProjectTask.update(h,{status:g}),onSuccess:()=>{a.invalidateQueries(["project-tasks",t])}}),l=h=>{confirm("r du sker p att du vill ta bort denna uppgift?")&&i.mutate(h)},c={todo:{label:"Att gra",color:"bg-slate-100 text-slate-700",icon:zb},in_progress:{label:"Pgende",color:"bg-blue-100 text-blue-700",icon:Vt},review:{label:"Granskning",color:"bg-amber-100 text-amber-700",icon:Vt},completed:{label:"Klar",color:"bg-emerald-100 text-emerald-700",icon:$r}},d={low:{label:"Lg",color:"bg-slate-100 text-slate-600"},medium:{label:"Medel",color:"bg-blue-100 text-blue-700"},high:{label:"Hg",color:"bg-amber-100 text-amber-700"},critical:{label:"Kritisk",color:"bg-rose-100 text-rose-700"}},u=[...e].sort((h,g)=>{const x={todo:0,in_progress:1,review:2,completed:3};return x[h.status]-x[g.status]});return e.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx($r,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-slate-600",children:"Inga uppgifter n. Skapa din frsta uppgift!"})]})}):n.jsxs("div",{className:"space-y-3",children:[u.map(h=>{var x,b,y,v,j;const g=((x=c[h.status])==null?void 0:x.icon)||zb;return n.jsx(ce,{className:"border-0 shadow-sm hover:shadow-md transition-shadow",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("button",{onClick:()=>o.mutate({id:h.id,status:h.status==="completed"?"todo":"completed"}),className:"mt-1",children:n.jsx(g,{className:`h-5 w-5 ${h.status==="completed"?"text-emerald-600":"text-slate-400"}`})}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:`font-medium ${h.status==="completed"?"line-through text-slate-500":"text-slate-900"}`,children:h.title}),h.description&&n.jsx("p",{className:"text-sm text-slate-600 mt-1",children:h.description})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(ye,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>s(h),children:n.jsx(ql,{className:"h-4 w-4"})}),n.jsx(ye,{variant:"ghost",size:"icon",className:"h-8 w-8 text-rose-600",onClick:()=>l(h.id),children:n.jsx(bi,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx(it,{className:(b=c[h.status])==null?void 0:b.color,children:(y=c[h.status])==null?void 0:y.label}),n.jsx(it,{className:(v=d[h.priority])==null?void 0:v.color,children:(j=d[h.priority])==null?void 0:j.label}),h.assigned_to&&n.jsxs(it,{variant:"outline",className:"flex items-center gap-1",children:[n.jsx(bd,{className:"h-3 w-3"}),h.assigned_to.split("@")[0]]}),h.due_date&&n.jsxs(it,{variant:"outline",children:[n.jsx(Vt,{className:"h-3 w-3 mr-1"}),Ce(new Date(h.due_date),"d MMM",{locale:ut})]})]}),h.completion_percentage!==void 0&&h.completion_percentage>0&&n.jsxs("div",{className:"pt-2",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("span",{className:"text-xs text-slate-600",children:"Framsteg"}),n.jsxs("span",{className:"text-xs font-medium text-slate-900",children:[h.completion_percentage,"%"]})]}),n.jsx(ag,{value:h.completion_percentage,className:"h-2"})]})]})]})})},h.id)}),n.jsx(NCe,{open:!!r,onClose:()=>s(null),task:r,projectId:t})]})}function SCe({project:e,tasks:t}){const r=[...t].filter(i=>i.due_date).sort((i,o)=>new Date(i.due_date)-new Date(o.due_date)),s=e.start_date&&e.end_date?jh(new Date(e.end_date),new Date(e.start_date)):null,a=e.end_date?jh(new Date(e.end_date),new Date):null;return n.jsxs("div",{className:"space-y-4",children:[e.start_date&&e.end_date&&n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"text-base flex items-center gap-2",children:[n.jsx(_r,{className:"h-4 w-4"}),"Projekttidslinje"]})}),n.jsxs(he,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Startdatum"}),n.jsx("p",{className:"font-medium text-slate-900",children:Ce(new Date(e.start_date),"d MMM yyyy",{locale:ut})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Varaktighet"}),n.jsxs("p",{className:"font-medium text-slate-900",children:[s," dagar"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Slutdatum"}),n.jsx("p",{className:"font-medium text-slate-900",children:Ce(new Date(e.end_date),"d MMM yyyy",{locale:ut})})]})]}),a!==null&&n.jsx("div",{className:"pt-3 border-t text-center",children:n.jsx("p",{className:`text-sm font-medium ${a<0?"text-rose-600":a<7?"text-amber-600":"text-emerald-600"}`,children:a<0?`${Math.abs(a)} dagar frsenat`:a===0?"Slutar idag":`${a} dagar kvar`})})]})]}),n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"text-base flex items-center gap-2",children:[n.jsx(Vt,{className:"h-4 w-4"}),"Uppgifter tidslinje"]})}),n.jsx(he,{children:r.length===0?n.jsx("p",{className:"text-sm text-slate-500 text-center py-8",children:"Inga uppgifter med deadlines n"}):n.jsx("div",{className:"space-y-3",children:r.map(i=>{const o=Xde(new Date(i.due_date))&&i.status!=="completed";return Yde(new Date(i.due_date)),n.jsx("div",{className:`p-3 rounded-lg border-l-4 ${i.status==="completed"?"border-emerald-500 bg-emerald-50":o?"border-rose-500 bg-rose-50":"border-blue-500 bg-blue-50"}`,children:n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.status==="completed"&&n.jsx($r,{className:"h-4 w-4 text-emerald-600"}),n.jsx("h4",{className:`font-medium text-sm ${i.status==="completed"?"text-emerald-900 line-through":"text-slate-900"}`,children:i.title})]}),n.jsx("p",{className:"text-xs text-slate-600",children:Ce(new Date(i.due_date),"d MMMM yyyy",{locale:ut})})]}),n.jsx(it,{className:i.status==="completed"?"bg-emerald-100 text-emerald-700":o?"bg-rose-100 text-rose-700":"bg-blue-100 text-blue-700",children:i.status==="completed"?"Klar":o?"Frsenad":"Kommande"})]})},i.id)})})})]})]})}function PCe({open:e,onClose:t,projectId:r}){const[s,a]=P.useState({title:"",description:"",assigned_to:"",priority:"medium",due_date:"",estimated_hours:""}),i=$n(),{data:o=[]}=He({queryKey:["users"],queryFn:()=>oe.entities.User.list(),initialData:[]}),l=Xt({mutationFn:u=>oe.entities.ProjectTask.create(u),onSuccess:()=>{i.invalidateQueries(["project-tasks",r]),t(),c()}}),c=()=>{a({title:"",description:"",assigned_to:"",priority:"medium",due_date:"",estimated_hours:""})},d=u=>{u.preventDefault(),l.mutate({project_id:r,...s,estimated_hours:s.estimated_hours?Number(s.estimated_hours):null,status:"todo",completion_percentage:0})};return n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"max-w-xl",children:[n.jsx(er,{children:n.jsx(tr,{children:"Ny uppgift"})}),n.jsxs("form",{onSubmit:d,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Titel *"}),n.jsx(De,{value:s.title,onChange:u=>a({...s,title:u.target.value}),placeholder:"Uppgiftens namn...",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Beskrivning"}),n.jsx(Zn,{value:s.description,onChange:u=>a({...s,description:u.target.value}),placeholder:"Detaljerad beskrivning...",rows:3})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Tilldela till"}),n.jsxs(Nt,{value:s.assigned_to,onValueChange:u=>a({...s,assigned_to:u}),children:[n.jsx(jt,{children:n.jsx(kt,{placeholder:"Vlj person"})}),n.jsx(wt,{children:o.map(u=>n.jsx(Ne,{value:u.email,children:u.full_name},u.email))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Prioritet"}),n.jsxs(Nt,{value:s.priority,onValueChange:u=>a({...s,priority:u}),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"low",children:"Lg"}),n.jsx(Ne,{value:"medium",children:"Medel"}),n.jsx(Ne,{value:"high",children:"Hg"}),n.jsx(Ne,{value:"critical",children:"Kritisk"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Deadline"}),n.jsx(De,{type:"date",value:s.due_date,onChange:u=>a({...s,due_date:u.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Uppskattat (timmar)"}),n.jsx(De,{type:"number",step:"0.5",value:s.estimated_hours,onChange:u=>a({...s,estimated_hours:u.target.value}),placeholder:"T.ex. 8"})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Avbryt"}),n.jsxs(ye,{type:"submit",className:"flex-1",disabled:l.isPending,children:[n.jsx(xr,{className:"h-4 w-4 mr-2"}),"Skapa uppgift"]})]})]})]})})}function ACe({projectId:e}){const[t,r]=P.useState(new Date);P.useEffect(()=>{const l=setInterval(()=>r(new Date),6e4);return()=>clearInterval(l)},[]);const{data:s=[]}=He({queryKey:["active-clock-ins",e],queryFn:async()=>(await oe.entities.TimeEntry.filter({status:"active"})).filter(c=>{var d;return(d=c.project_allocations)==null?void 0:d.some(u=>u.project_id===e)}),refetchInterval:3e4,initialData:[]}),{data:a=[]}=He({queryKey:["users"],queryFn:()=>oe.entities.User.list(),initialData:[]}),{data:i=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list(),initialData:[]}),o=l=>{const c=new Date(l),d=Math.floor((t-c)/1e3/60),u=Math.floor(d/60),h=d%60;return`${u}h ${h}m`};return s.length===0?n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"text-base flex items-center gap-2",children:[n.jsx(Vt,{className:"h-4 w-4 text-slate-500"}),"Aktiva instmplingar"]})}),n.jsx(he,{children:n.jsx("p",{className:"text-sm text-slate-500 text-center py-6",children:"Ingen r instmplad p detta projekt"})})]}):n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"text-base flex items-center gap-2",children:[n.jsx(Vt,{className:"h-4 w-4 text-green-600"}),"Aktiva instmplingar (",s.length,")"]})}),n.jsx(he,{children:n.jsx("div",{className:"space-y-3",children:s.map(l=>{var h,g;const c=a.find(x=>x.email===l.employee_email),d=i.find(x=>x.user_email===l.employee_email),u=(h=l.project_allocations)==null?void 0:h.find(x=>x.project_id===e);return n.jsxs("div",{className:"p-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-100",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"h-8 w-8 rounded-full bg-green-100 flex items-center justify-center animate-pulse",children:n.jsx(bd,{className:"h-4 w-4 text-green-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-900 text-sm",children:c==null?void 0:c.full_name}),n.jsx("p",{className:"text-xs text-slate-500",children:d==null?void 0:d.job_title})]})]}),n.jsx(it,{className:"bg-green-100 text-green-700 animate-pulse",children:" Aktiv"})]}),n.jsxs("div",{className:"space-y-1 text-sm",children:[u&&n.jsxs("p",{className:"text-slate-700",children:[n.jsx("span",{className:"font-semibold",children:u.category}),"  ",u.hours,"h planerad"]}),n.jsxs("p",{className:"text-slate-600 flex items-center gap-1",children:[n.jsx(Vt,{className:"h-3.5 w-3.5"}),"Instmplad: ",o(l.clock_in_time)]}),((g=l.clock_in_location)==null?void 0:g.address)&&n.jsxs("p",{className:"text-slate-600 flex items-start gap-1 line-clamp-1",children:[n.jsx(Fn,{className:"h-3.5 w-3.5 flex-shrink-0 mt-0.5"}),l.clock_in_location.address]})]})]},l.id)})})})]})}function CCe({projectId:e}){const{data:t}=He({queryKey:["project",e],queryFn:()=>oe.entities.Project.filter({id:e}).then(l=>l[0])}),{data:r=[]}=He({queryKey:["project-journal",e],queryFn:async()=>(await oe.entities.DrivingJournalEntry.list()).filter(c=>c.project_id===e||(t==null?void 0:t.project_code)&&c.project_code===t.project_code),enabled:!!t,refetchInterval:6e4,initialData:[]}),s=l=>{switch(l){case"tjnst":return"bg-blue-100 text-blue-700";case"privat":return"bg-slate-100 text-slate-700";case"vntar":return"bg-amber-100 text-amber-700";default:return"bg-slate-100 text-slate-700"}},a=r.reduce((l,c)=>l+(c.distance_km||0),0),i=r.reduce((l,c)=>l+(c.duration_minutes||0),0),o=r.length>0?(a/r.length).toFixed(1):0;return r.length===0?n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"text-base flex items-center gap-2",children:[n.jsx(Ja,{className:"h-4 w-4 text-slate-500"}),"Krjournal"]})}),n.jsx(he,{children:n.jsx("p",{className:"text-sm text-slate-500 text-center py-6",children:"Ingen krjournal registrerad p projektet"})})]}):n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsxs(Ct,{className:"text-base flex items-center gap-2",children:[n.jsx(Ja,{className:"h-4 w-4 text-slate-500"}),"Krjournal"]})}),n.jsxs(he,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4 pb-4 border-b",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:a.toFixed(1)}),n.jsx("p",{className:"text-xs text-slate-600",children:"km totalt"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:Math.round(i/60)}),n.jsx("p",{className:"text-xs text-slate-600",children:"timmar"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:r.length}),n.jsx("p",{className:"text-xs text-slate-600",children:"resor"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:o}),n.jsx("p",{className:"text-xs text-slate-600",children:"km/resa"})]})]}),n.jsx("div",{className:"space-y-2",children:r.slice(0,5).map(l=>{var c,d;return n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border border-slate-100",children:[n.jsx("div",{className:"flex items-start justify-between mb-2",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsxs("span",{className:"font-medium text-slate-900 text-sm",children:[l.distance_km,"km"]}),n.jsx(it,{className:`text-xs ${s(l.trip_type)}`,children:l.trip_type}),l.status==="pending_review"&&n.jsxs(it,{variant:"outline",className:"text-xs border-amber-200 text-amber-700 bg-amber-50",children:[n.jsx(ja,{className:"h-2.5 w-2.5 mr-1"}),"Granskas"]})]}),l.purpose&&n.jsx("p",{className:"text-xs text-slate-600",children:l.purpose})]})}),n.jsxs("div",{className:"space-y-1 text-xs text-slate-600",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(_r,{className:"h-3 w-3"}),Ce(new Date(l.start_time),"dd MMM yyyy HH:mm",{locale:ut}),"  ",Math.round(l.duration_minutes||0)," min"]}),((c=l.start_location)==null?void 0:c.address)&&n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Fn,{className:"h-3 w-3 mt-0.5 flex-shrink-0 text-green-600"}),n.jsx("span",{className:"line-clamp-1",children:l.start_location.address})]}),((d=l.end_location)==null?void 0:d.address)&&n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Fn,{className:"h-3 w-3 mt-0.5 flex-shrink-0 text-red-600"}),n.jsx("span",{className:"line-clamp-1",children:l.end_location.address})]})]})]},l.id)})}),r.length>5&&n.jsxs("p",{className:"text-xs text-slate-500 text-center pt-2",children:["+",r.length-5," fler resor"]})]})]})}function TCe({project:e,timeEntries:t}){const{data:r=[]}=He({queryKey:["project-journal-expenses",e.id],queryFn:async()=>(await oe.entities.DrivingJournalEntry.list()).filter(c=>c.project_code===e.id),initialData:[]}),a=(()=>{const l=t.reduce((d,u)=>{var x;const g=(((x=u.project_allocations)==null?void 0:x.filter(b=>b.project_id===e.id))||[]).reduce((b,y)=>b+(y.hours||0),0);return d+g*(e.hourly_rate||0)},0),c=r.reduce((d,u)=>d+(u.distance_km||0)*2,0);return{laborCost:l,vehicleCost:c,totalCost:l+c}})(),i=t.reduce((l,c)=>{var u;const d=((u=c.project_allocations)==null?void 0:u.filter(h=>h.project_id===e.id))||[];return l+d.reduce((h,g)=>h+(g.hours||0),0)},0),o=e.budget_hours&&i>e.budget_hours;return n.jsxs(ce,{className:`border-0 shadow-sm ${o?"bg-gradient-to-br from-rose-50 to-red-50":""}`,children:[n.jsx(At,{children:n.jsxs(Ct,{className:"text-base flex items-center gap-2",children:[n.jsx(Sf,{className:"h-4 w-4 text-slate-500"}),"Projektbudget"]})}),n.jsxs(he,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Arbetsmoment"}),n.jsxs("p",{className:"text-lg font-bold text-slate-900",children:[a.laborCost.toFixed(0)," kr"]}),n.jsxs("p",{className:"text-xs text-slate-500",children:[i.toFixed(1),"h"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Fordonskostnader"}),n.jsxs("p",{className:"text-lg font-bold text-slate-900",children:[a.vehicleCost.toFixed(0)," kr"]}),n.jsxs("p",{className:"text-xs text-slate-500",children:[r.reduce((l,c)=>l+(c.distance_km||0),0).toFixed(0),"km"]})]})]}),n.jsx("div",{className:"pt-3 border-t",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ta,{className:"h-4 w-4 text-slate-500"}),n.jsx("span",{className:"text-sm text-slate-600",children:"Total kostnad"})]}),n.jsxs("span",{className:"text-2xl font-bold text-slate-900",children:[a.totalCost.toFixed(0)," kr"]})]})}),e.hourly_rate&&n.jsx("div",{className:`p-3 rounded-lg border ${o?"bg-rose-100 border-rose-200":"bg-slate-50 border-slate-200"}`,children:n.jsxs("div",{className:"flex items-start gap-2",children:[o&&n.jsx(ja,{className:"h-4 w-4 text-rose-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"text-sm",children:[n.jsx("p",{className:o?"text-rose-900 font-semibold":"text-slate-700",children:o?"Budget verskriden":"Inom budget"}),n.jsxs("p",{className:`text-xs mt-1 ${o?"text-rose-800":"text-slate-600"}`,children:[i.toFixed(1),"h av ",e.budget_hours||"","h tilldelad"]})]})]})})]})]})}function ECe({project:e,onClose:t}){const[r,s]=P.useState(!1),[a,i]=P.useState(null);$n();const{data:o=[]}=He({queryKey:["project-tasks",e.id],queryFn:async()=>await oe.entities.ProjectTask.filter({project_id:e.id}),initialData:[]}),{data:l=[]}=He({queryKey:["project-time",e.id],queryFn:async()=>(await oe.entities.TimeEntry.list()).filter(b=>{var y;return(y=b.project_allocations)==null?void 0:y.some(v=>v.project_id===e.id)}),initialData:[]}),{data:c=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list(),initialData:[]}),{data:d=[]}=He({queryKey:["users"],queryFn:()=>oe.entities.User.list(),initialData:[]}),h=(()=>{const x=l.reduce((N,A)=>{var M;const C=((M=A.project_allocations)==null?void 0:M.filter(I=>I.project_id===e.id))||[];return N+C.reduce((I,F)=>I+(F.hours||0),0)},0),b=e.budget_hours?x/e.budget_hours*100:0,y=o.filter(N=>N.status==="completed").length,v=o.length>0?y/o.length*100:0,j=x*(e.hourly_rate||0),w=new Set([...o.map(N=>N.assigned_to).filter(Boolean),...l.map(N=>N.employee_email).filter(Boolean)]);return{totalHours:x.toFixed(1),budgetUsage:b.toFixed(1),taskCompletion:v.toFixed(0),completedTasks:y,totalTasks:o.length,estimatedCost:j.toFixed(0),memberCount:w.size,members:Array.from(w)}})(),g=parseFloat(h.budgetUsage)>100;return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:e.name}),n.jsx(it,{className:e.status==="pgende"?"bg-blue-100 text-blue-700":e.status==="avslutat"?"bg-slate-100 text-slate-700":e.status==="pausat"?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700",children:e.status})]}),n.jsx("p",{className:"text-sm text-slate-600",children:e.project_code})]}),n.jsx(ye,{variant:"outline",onClick:t,children:"Stng"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-blue-50 to-indigo-50",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-100 flex items-center justify-center",children:n.jsx(Vt,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[h.totalHours,"h"]}),n.jsx("p",{className:"text-xs text-slate-600",children:"Loggade timmar"})]})]})})}),n.jsx(ce,{className:`border-0 shadow-sm ${g?"bg-gradient-to-br from-rose-50 to-red-50":"bg-gradient-to-br from-emerald-50 to-teal-50"}`,children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`h-10 w-10 rounded-lg ${g?"bg-rose-100":"bg-emerald-100"} flex items-center justify-center`,children:n.jsx(ta,{className:`h-5 w-5 ${g?"text-rose-600":"text-emerald-600"}`})}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[h.budgetUsage,"%"]}),n.jsx("p",{className:"text-xs text-slate-600",children:"Budgetanvndning"})]})]})})}),n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-purple-50 to-pink-50",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-purple-100 flex items-center justify-center",children:n.jsx($r,{className:"h-5 w-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[h.completedTasks,"/",h.totalTasks]}),n.jsx("p",{className:"text-xs text-slate-600",children:"Uppgifter klara"})]})]})})}),n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-amber-50 to-orange-50",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-amber-100 flex items-center justify-center",children:n.jsx(Fr,{className:"h-5 w-5 text-amber-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:h.memberCount}),n.jsx("p",{className:"text-xs text-slate-600",children:"Projektmedlemmar"})]})]})})})]}),n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsx(Ct,{className:"text-base",children:"Projektframsteg"})}),n.jsxs(he,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Uppgifter slutfrda"}),n.jsxs("span",{className:"text-sm font-bold text-slate-900",children:[h.taskCompletion,"%"]})]}),n.jsx(ag,{value:parseFloat(h.taskCompletion),className:"h-3"})]}),e.budget_hours&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Tidsbudget anvnd"}),n.jsxs("span",{className:`text-sm font-bold ${g?"text-rose-600":"text-slate-900"}`,children:[h.totalHours,"h / ",e.budget_hours,"h"]})]}),n.jsx(ag,{value:Math.min(parseFloat(h.budgetUsage),100),className:`h-3 ${g?"[&>div]:bg-rose-500":""}`})]}),e.hourly_rate&&n.jsx("div",{className:"pt-3 border-t",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Sf,{className:"h-4 w-4 text-slate-500"}),n.jsx("span",{className:"text-sm text-slate-600",children:"Berknad kostnad"})]}),n.jsxs("span",{className:"text-lg font-bold text-slate-900",children:[h.estimatedCost," kr"]})]})})]})]}),n.jsxs(Ls,{defaultValue:"overview",className:"space-y-4",children:[n.jsxs(As,{className:"w-full bg-white shadow-sm rounded-lg p-1",children:[n.jsxs(gt,{value:"overview",className:"rounded-md flex-1",children:[n.jsx(Vt,{className:"h-4 w-4 mr-2"}),"versikt"]}),n.jsxs(gt,{value:"tasks",className:"rounded-md flex-1",children:[n.jsx($r,{className:"h-4 w-4 mr-2"}),"Uppgifter"]}),n.jsxs(gt,{value:"timeline",className:"rounded-md flex-1",children:[n.jsx(_r,{className:"h-4 w-4 mr-2"}),"Tidslinje"]}),n.jsxs(gt,{value:"members",className:"rounded-md flex-1",children:[n.jsx(Fr,{className:"h-4 w-4 mr-2"}),"Team"]})]}),n.jsxs(Dt,{value:"overview",className:"space-y-4",children:[n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsx(Ct,{className:"text-base",children:"Registrerade dagar"})}),n.jsx(he,{children:(()=>{const x=l.reduce((y,v)=>{const j=Ce(bs(v.date),"yyyy-MM-dd");return y[j]||(y[j]=[]),y[j].push(v),y},{}),b=Object.keys(x).sort((y,v)=>new Date(v)-new Date(y));return b.length===0?n.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"Ingen tid registrerad n"}):n.jsx("div",{className:"space-y-2",children:b.map(y=>{const v=x[y],j=v.reduce((A,C)=>{var I;const M=((I=C.project_allocations)==null?void 0:I.filter(F=>F.project_id===e.id))||[];return A+M.reduce((F,U)=>F+(U.hours||0),0)},0),N=[...new Set(v.map(A=>A.employee_email))].map(A=>{const C=d.find(M=>M.email===A);return(C==null?void 0:C.full_name)||A});return n.jsxs("div",{children:[n.jsxs("button",{onClick:()=>i(a===y?null:y),className:"w-full flex items-center justify-between p-3 bg-indigo-50 rounded-lg hover:bg-indigo-100 transition",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(_r,{className:"h-4 w-4 text-indigo-600"}),n.jsxs("div",{className:"text-left",children:[n.jsx("p",{className:"text-sm font-medium text-indigo-900",children:Ce(bs(y),"d MMM yyyy",{locale:ut})}),n.jsx("p",{className:"text-xs text-indigo-600",children:N.join(", ")})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"text-right",children:n.jsxs("p",{className:"text-sm font-bold text-indigo-900",children:[j.toFixed(1),"h"]})}),n.jsx(fj,{className:`h-4 w-4 text-indigo-600 transition-transform ${a===y?"rotate-180":""}`})]})]}),a===y&&n.jsx("div",{className:"mt-2 space-y-2 pl-3 border-l-2 border-indigo-200",children:v.map((A,C)=>{var M,I,F,U,W;return n.jsxs("div",{className:"bg-white p-3 rounded-lg text-xs",children:[n.jsx("p",{className:"font-medium text-slate-900 mb-2",children:((M=d.find(D=>D.email===A.employee_email))==null?void 0:M.full_name)||A.employee_email}),n.jsxs("div",{className:"space-y-1 text-slate-600",children:[A.clock_in_location&&n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Fn,{className:"h-3 w-3 text-green-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-700",children:"Incheckat:"}),n.jsx("p",{children:A.clock_in_location.address||`${(I=A.clock_in_location.latitude)==null?void 0:I.toFixed(5)}, ${(F=A.clock_in_location.longitude)==null?void 0:F.toFixed(5)}`})]})]}),A.clock_out_location&&n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Fn,{className:"h-3 w-3 text-red-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-700",children:"Utcheckat:"}),n.jsx("p",{children:A.clock_out_location.address||`${(U=A.clock_out_location.latitude)==null?void 0:U.toFixed(5)}, ${(W=A.clock_out_location.longitude)==null?void 0:W.toFixed(5)}`})]})]})]})]},C)})})]},y)})})})()})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[n.jsx(ACe,{projectId:e.id}),n.jsx(TCe,{project:e,timeEntries:l})]}),n.jsx(CCe,{projectId:e.id})]}),n.jsx(Dt,{value:"tasks",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs(ye,{onClick:()=>s(!0),className:"w-full md:w-auto",children:[n.jsx(xr,{className:"h-4 w-4 mr-2"}),"Ny uppgift"]}),n.jsx(kCe,{tasks:o,projectId:e.id})]})}),n.jsx(Dt,{value:"timeline",children:n.jsx(SCe,{project:e,tasks:o})}),n.jsx(Dt,{value:"members",children:n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{children:n.jsx(Ct,{className:"text-base",children:"Projektmedlemmar"})}),n.jsx(he,{className:"space-y-2",children:h.members.length===0?n.jsx("p",{className:"text-sm text-slate-500 text-center py-8",children:"Inga medlemmar n"}):h.members.map(x=>{const b=d.find(j=>j.email===x),y=c.find(j=>j.user_email===x),v=l.filter(j=>j.employee_email===x).reduce((j,w)=>{var A;const N=((A=w.project_allocations)==null?void 0:A.filter(C=>C.project_id===e.id))||[];return j+N.reduce((C,M)=>C+(M.hours||0),0)},0);return n.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-200 flex items-center justify-center",children:n.jsx(bd,{className:"h-5 w-5 text-slate-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-900",children:(b==null?void 0:b.full_name)||x}),n.jsx("p",{className:"text-xs text-slate-500",children:(y==null?void 0:y.job_title)||"Medlem"})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-sm font-bold text-slate-900",children:[v.toFixed(1),"h"]}),n.jsx("p",{className:"text-xs text-slate-500",children:"loggat"})]})]},x)})})]})})]}),n.jsx(PCe,{open:r,onClose:()=>s(!1),projectId:e.id})]})}function OCe(){const[e,t]=P.useState(null),[r,s]=P.useState(!1),[a,i]=P.useState(null),[o,l]=P.useState(null),[c,d]=P.useState("all"),[u,h]=P.useState("name"),g=$n(),[x,b]=P.useState({name:"",project_code:"",description:"",customer:"",type:"externt",status:"planerat",start_date:"",end_date:"",budget_hours:"",hourly_rate:"",project_manager_email:"",is_billable:!0,is_invoiced:!1,invoice_number:""});P.useEffect(()=>{oe.auth.me().then(t).catch(()=>t(null))},[]);const{data:y=[],isLoading:v}=He({queryKey:["projects"],queryFn:()=>oe.entities.Project.list("-created_date"),initialData:[]}),{data:j=[]}=He({queryKey:["time-entries"],queryFn:()=>oe.entities.TimeEntry.list(),initialData:[]}),{data:w=[]}=He({queryKey:["journal-entries"],queryFn:()=>oe.entities.DrivingJournalEntry.list(),initialData:[]}),N=y.filter(R=>c==="all"||R.status===c).sort((R,z)=>{switch(u){case"name":return(R.name||"").localeCompare(z.name||"");case"deadline":return R.end_date?z.end_date?new Date(R.end_date)-new Date(z.end_date):-1:1;case"manager":return(R.project_manager_email||"").localeCompare(z.project_manager_email||"");default:return 0}}),{data:A=[]}=He({queryKey:["users"],queryFn:()=>oe.entities.User.list(),initialData:[]}),C=Xt({mutationFn:R=>oe.entities.Project.create(R),onSuccess:()=>{g.invalidateQueries(["projects"]),s(!1),F()}}),M=Xt({mutationFn:({id:R,data:z})=>oe.entities.Project.update(R,z),onSuccess:()=>{g.invalidateQueries(["projects"]),s(!1),F()}}),I=Xt({mutationFn:R=>oe.entities.Project.delete(R),onSuccess:()=>{g.invalidateQueries(["projects"])}}),F=()=>{b({name:"",project_code:"",description:"",customer:"",type:"externt",status:"planerat",start_date:"",end_date:"",budget_hours:"",hourly_rate:"",project_manager_email:"",is_billable:!0,is_invoiced:!1,invoice_number:""}),i(null)},U=R=>{R.preventDefault();const z={...x,budget_hours:x.budget_hours?Number(x.budget_hours):null,hourly_rate:x.hourly_rate?Number(x.hourly_rate):null};a?M.mutate({id:a.id,data:z}):C.mutate(z)},W=R=>{i(R),b({name:R.name||"",project_code:R.project_code||"",description:R.description||"",customer:R.customer||"",type:R.type||"externt",status:R.status||"planerat",start_date:R.start_date||"",end_date:R.end_date||"",budget_hours:R.budget_hours||"",hourly_rate:R.hourly_rate||"",project_manager_email:R.project_manager_email||"",is_billable:R.is_billable!==!1,is_invoiced:R.is_invoiced||!1,invoice_number:R.invoice_number||""}),s(!0)},D=R=>{confirm("r du sker p att du vill ta bort detta projekt?")&&I.mutate(R)};return(e==null?void 0:e.role)!=="admin"?n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white p-6",children:n.jsx(ce,{className:"max-w-md mx-auto mt-20",children:n.jsxs(he,{className:"p-8 text-center",children:[n.jsx(Kr,{className:"h-12 w-12 text-amber-500 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"tkomst nekad"}),n.jsx("p",{className:"text-slate-600",children:"Endast administratrer har tillgng till projekthantering."})]})})}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white p-4 md:p-6",children:[n.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Projekthantering"}),n.jsx("p",{className:"text-slate-600 mt-1",children:"Skapa och hantera projekt med uppgifter"})]}),n.jsxs(ye,{onClick:()=>{F(),s(!0)},className:"bg-slate-900 hover:bg-slate-800",children:[n.jsx(xr,{className:"h-4 w-4 mr-2"}),"Nytt projekt"]})]}),n.jsxs("div",{className:"flex flex-wrap gap-3 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(e3,{className:"h-4 w-4 text-slate-500"}),n.jsxs(Nt,{value:c,onValueChange:d,children:[n.jsx(jt,{className:"w-40",children:n.jsx(kt,{placeholder:"Status"})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"all",children:"Alla status"}),n.jsx(Ne,{value:"planerat",children:"Planerat"}),n.jsx(Ne,{value:"pgende",children:"Pgende"}),n.jsx(Ne,{value:"avslutat",children:"Avslutat"}),n.jsx(Ne,{value:"pausat",children:"Pausat"})]})]})]}),n.jsxs(Nt,{value:u,onValueChange:h,children:[n.jsx(jt,{className:"w-40",children:n.jsx(kt,{placeholder:"Sortera efter"})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"name",children:"Namn"}),n.jsx(Ne,{value:"deadline",children:"Deadline"}),n.jsx(Ne,{value:"manager",children:"Projektledare"})]})]})]})]}),v?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map(R=>n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-6",children:n.jsxs("div",{className:"space-y-3 animate-pulse",children:[n.jsx("div",{className:"h-6 bg-slate-200 rounded w-3/4"}),n.jsx("div",{className:"h-4 bg-slate-100 rounded w-1/2"}),n.jsx("div",{className:"h-16 bg-slate-100 rounded"})]})})},R))}):N.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(Z7,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Inga projekt"}),n.jsx("p",{className:"text-slate-600 mb-4",children:"Skapa ditt frsta projekt fr att komma igng."}),n.jsxs(ye,{onClick:()=>{F(),s(!0)},children:[n.jsx(xr,{className:"h-4 w-4 mr-2"}),"Skapa projekt"]})]})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map((R,z)=>n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:z*.05},children:n.jsxs(ce,{className:"border-0 shadow-sm hover:shadow-md transition-shadow",children:[n.jsx(At,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx(Ct,{className:"text-lg mb-2",children:R.name}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-700",children:R.project_code}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${R.status==="pgende"?"bg-blue-100 text-blue-700":R.status==="avslutat"?"bg-slate-100 text-slate-700":R.status==="pausat"?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700"}`,children:R.status})]})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(ye,{variant:"ghost",size:"icon",onClick:()=>l(R),className:"h-8 w-8",children:n.jsx(Nx,{className:"h-4 w-4"})}),n.jsx(ye,{variant:"ghost",size:"icon",onClick:()=>W(R),className:"h-8 w-8",children:n.jsx(ql,{className:"h-4 w-4"})}),n.jsx(ye,{variant:"ghost",size:"icon",onClick:()=>D(R.id),className:"h-8 w-8 text-rose-600 hover:text-rose-700",children:n.jsx(bi,{className:"h-4 w-4"})})]})]})}),n.jsxs(he,{className:"space-y-4",children:[R.description&&n.jsx("p",{className:"text-sm text-slate-600 line-clamp-2",children:R.description}),R.customer&&n.jsxs("p",{className:"text-sm text-slate-500",children:["Kund: ",R.customer]}),n.jsx("div",{className:"pt-3 border-t",children:(()=>{const Z=j.filter(H=>{var ne;return H.project_id===R.id?!0:((ne=H.project_allocations)==null?void 0:ne.length)>0?H.project_allocations.some(ue=>ue.project_id===R.id):!1}).reduce((H,ne)=>{var ue;if(((ue=ne.project_allocations)==null?void 0:ue.length)>0){const ae=ne.project_allocations.find(G=>G.project_id===R.id);return H+((ae==null?void 0:ae.hours)||0)}return H+(ne.total_hours||0)},0),se=w.filter(H=>H.project_code===R.project_code).reduce((H,ne)=>H+(ne.distance_km||0),0),J=R.budget_hours?Z/R.budget_hours*100:0,Q=j.filter(H=>{var ne;return H.project_id===R.id?!0:((ne=H.project_allocations)==null?void 0:ne.length)>0?H.project_allocations.some(ue=>ue.project_id===R.id):!1}).sort((H,ne)=>new Date(ne.date)-new Date(H.date))[0];return n.jsxs("div",{className:"space-y-3",children:[Q&&n.jsx("div",{className:"bg-indigo-50 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(_r,{className:"h-4 w-4 text-indigo-600"}),n.jsx("span",{className:"text-xs font-medium text-indigo-900",children:"Senaste registrering"})]}),n.jsx("span",{className:"text-xs text-indigo-700 font-medium",children:Ce(bs(Q.date),"d MMM",{locale:ut})})]})}),n.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vt,{className:"h-4 w-4 text-blue-600"}),n.jsx("span",{className:"text-xs font-medium text-blue-900",children:"Nedlagd tid"})]}),n.jsxs("span",{className:"text-sm font-bold text-blue-700",children:[Z.toFixed(1),"h"]})]}),R.budget_hours&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center justify-between text-xs text-blue-600 mb-1",children:[n.jsxs("span",{children:["Budget: ",R.budget_hours,"h"]}),n.jsxs("span",{children:[J.toFixed(0),"%"]})]}),n.jsx("div",{className:"w-full bg-blue-200 rounded-full h-1.5",children:n.jsx("div",{className:`h-1.5 rounded-full ${J>100?"bg-red-500":"bg-blue-600"}`,style:{width:`${Math.min(J,100)}%`}})})]})]}),se>0&&n.jsx("div",{className:"bg-green-50 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ja,{className:"h-4 w-4 text-green-600"}),n.jsx("span",{className:"text-xs font-medium text-green-900",children:"Krda kilometer"})]}),n.jsxs("span",{className:"text-sm font-bold text-green-700",children:[se.toFixed(0)," km"]})]})}),R.hourly_rate&&n.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 pt-1",children:[n.jsx("span",{children:"Timpris"}),n.jsxs("span",{className:"font-medium",children:[R.hourly_rate," kr/h"]})]})]})})()})]})]})},R.id))})]}),n.jsx(Xn,{open:r,onOpenChange:s,children:n.jsxs(Yn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(er,{children:n.jsx(tr,{children:a?"Redigera projekt":"Nytt projekt"})}),n.jsxs("form",{onSubmit:U,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Projektnamn *"}),n.jsx(De,{value:x.name,onChange:R=>b({...x,name:R.target.value}),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Projektkod *"}),n.jsx(De,{value:x.project_code,onChange:R=>b({...x,project_code:R.target.value}),placeholder:"T.ex. PRJ001",required:!0})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Beskrivning"}),n.jsx(Zn,{value:x.description,onChange:R=>b({...x,description:R.target.value}),rows:3})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Kund"}),n.jsx(De,{value:x.customer,onChange:R=>b({...x,customer:R.target.value})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Typ"}),n.jsxs(Nt,{value:x.type,onValueChange:R=>b({...x,type:R}),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"internt",children:"Internt"}),n.jsx(Ne,{value:"externt",children:"Externt"}),n.jsx(Ne,{value:"fakturerbart",children:"Fakturerbart"}),n.jsx(Ne,{value:"ej_fakturerbart",children:"Ej fakturerbart"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Status"}),n.jsxs(Nt,{value:x.status,onValueChange:R=>b({...x,status:R}),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"planerat",children:"Planerat"}),n.jsx(Ne,{value:"pgende",children:"Pgende"}),n.jsx(Ne,{value:"avslutat",children:"Avslutat"}),n.jsx(Ne,{value:"pausat",children:"Pausat"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Startdatum"}),n.jsx(De,{type:"date",value:x.start_date,onChange:R=>b({...x,start_date:R.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Slutdatum"}),n.jsx(De,{type:"date",value:x.end_date,onChange:R=>b({...x,end_date:R.target.value})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Budgeterade timmar"}),n.jsx(De,{type:"number",step:"0.5",value:x.budget_hours,onChange:R=>b({...x,budget_hours:R.target.value}),placeholder:"T.ex. 100"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Timpris (kr)"}),n.jsx(De,{type:"number",step:"1",value:x.hourly_rate,onChange:R=>b({...x,hourly_rate:R.target.value}),placeholder:"T.ex. 850"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Projektledare"}),n.jsxs(Nt,{value:x.project_manager_email,onValueChange:R=>b({...x,project_manager_email:R}),children:[n.jsx(jt,{children:n.jsx(kt,{placeholder:"Vlj projektledare"})}),n.jsx(wt,{children:A.map(R=>n.jsxs(Ne,{value:R.email,children:[R.full_name," (",R.email,")"]},R.email))})]})]}),n.jsxs("div",{className:"space-y-3 pt-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",id:"is_billable",checked:x.is_billable,onChange:R=>b({...x,is_billable:R.target.checked}),className:"h-4 w-4 rounded border-slate-300"}),n.jsx(ve,{htmlFor:"is_billable",className:"cursor-pointer",children:"Fakturerbart projekt"})]}),x.status==="avslutat"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",id:"is_invoiced",checked:x.is_invoiced,onChange:R=>b({...x,is_invoiced:R.target.checked}),className:"h-4 w-4 rounded border-slate-300"}),n.jsx(ve,{htmlFor:"is_invoiced",className:"cursor-pointer",children:"Markera som fakturerat"})]}),x.is_invoiced&&n.jsxs("div",{className:"space-y-2 pl-7",children:[n.jsx(ve,{children:"Fakturanummer"}),n.jsx(De,{value:x.invoice_number,onChange:R=>b({...x,invoice_number:R.target.value}),placeholder:"T.ex. FA-2026-001"})]})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:()=>s(!1),className:"flex-1",children:"Avbryt"}),n.jsx(ye,{type:"submit",className:"flex-1 bg-slate-900 hover:bg-slate-800",disabled:C.isPending||M.isPending,children:a?"Uppdatera":"Skapa projekt"})]})]})]})}),n.jsx(Xn,{open:!!o,onOpenChange:()=>l(null),children:n.jsx(Yn,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:o&&n.jsx(ECe,{project:o,onClose:()=>l(null)})})})]})}function MCe(){const[e,t]=P.useState("month"),[r,s]=P.useState("all"),[a,i]=P.useState("all"),{data:o=[]}=He({queryKey:["vehicles"],queryFn:()=>oe.entities.Vehicle.list()}),{data:l=[]}=He({queryKey:["fuelLogs"],queryFn:()=>oe.entities.FuelLog.list("-date",500)}),{data:c=[]}=He({queryKey:["timeEntries"],queryFn:()=>oe.entities.TimeEntry.list("-date",500)}),{data:d=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list()}),u=new Date;let h,g;e==="week"?(h=Fa(u,{locale:ut}),g=Pc(u,{locale:ut})):(h=ri(u),g=ni(u));const x=l.filter(j=>{const w=new Date(j.date),N=w>=h&&w<=g,A=r==="all"||j.vehicle_id===r;return N&&A}),b=o.map(j=>{const w=x.filter(M=>M.vehicle_id===j.id),N=w.reduce((M,I)=>M+(I.amount||0),0),A=w.reduce((M,I)=>M+(I.liters||0),0),C=w.length>1?Math.max(...w.map(M=>M.mileage))-Math.min(...w.map(M=>M.mileage)):0;return{vehicle:j,fuelCount:w.length,totalAmount:N,totalLiters:A,kmDriven:C}}).filter(j=>j.fuelCount>0||r===j.vehicle.id),y=c.filter(j=>{const w=new Date(j.date),N=w>=h&&w<=g,A=a==="all"||j.employee_email===a;return N&&A&&j.status==="completed"}),v=d.map(j=>{const w=y.filter(M=>M.employee_email===j.user_email),N=w.reduce((M,I)=>M+(I.total_hours||0),0),A={support_service:0,install:0,rental:0,interntid:0};w.forEach(M=>{var I;((I=M.project_allocations)==null?void 0:I.length)>0?M.project_allocations.forEach(F=>{F.category&&A.hasOwnProperty(F.category)&&(A[F.category]+=F.hours||0)}):M.category&&A.hasOwnProperty(M.category)&&(A[M.category]+=M.total_hours||0)});const C=A;return{employee:j,totalHours:N,entryCount:w.length,byCategory:C}}).filter(j=>j.entryCount>0||a===j.employee.user_email);return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pb-24",children:n.jsx("div",{className:"max-w-2xl mx-auto px-4 py-6",children:n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Rapporter"}),n.jsxs("div",{className:"flex gap-2 mb-6",children:[n.jsx("button",{onClick:()=>t("week"),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all ${e==="week"?"bg-slate-900 text-white":"bg-white text-slate-600 hover:bg-slate-100"}`,children:"Denna vecka"}),n.jsx("button",{onClick:()=>t("month"),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all ${e==="month"?"bg-slate-900 text-white":"bg-white text-slate-600 hover:bg-slate-100"}`,children:"Denna mnad"})]}),n.jsxs(Ls,{defaultValue:"vehicles",className:"space-y-4",children:[n.jsxs(As,{className:"w-full h-auto p-1 bg-white shadow-sm rounded-2xl grid grid-cols-2",children:[n.jsx(gt,{value:"vehicles",className:"rounded-xl data-[state=active]:shadow-sm",children:"Fordon"}),n.jsx(gt,{value:"time",className:"rounded-xl data-[state=active]:shadow-sm",children:"Tid"})]}),n.jsxs(Dt,{value:"vehicles",className:"space-y-4",children:[n.jsxs(Nt,{value:r,onValueChange:s,children:[n.jsx(jt,{className:"h-11 rounded-2xl",children:n.jsx(kt,{placeholder:"Vlj fordon"})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"all",children:"Alla fordon"}),o.map(j=>n.jsxs(Ne,{value:j.id,children:[j.registration_number," - ",j.make," ",j.model]},j.id))]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-100 flex items-center justify-center",children:n.jsx(gu,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Tankningar"}),n.jsx("p",{className:"text-xl font-bold text-slate-900",children:x.length})]})]})})}),n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-emerald-100 flex items-center justify-center",children:n.jsx(ta,{className:"h-5 w-5 text-emerald-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Totalt belopp"}),n.jsxs("p",{className:"text-xl font-bold text-slate-900",children:[x.reduce((j,w)=>j+(w.amount||0),0).toLocaleString()," kr"]})]})]})})})]}),n.jsx("div",{className:"space-y-3",children:b.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(us,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Ingen data fr vald period"})]})}):b.map((j,w)=>n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-5",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:j.vehicle.registration_number}),n.jsxs("p",{className:"text-xs text-slate-500",children:[j.vehicle.make," ",j.vehicle.model]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-lg font-bold text-slate-900",children:j.fuelCount}),n.jsx("p",{className:"text-xs text-slate-500",children:"tankningar"})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Belopp"}),n.jsxs("p",{className:"font-semibold text-slate-900",children:[j.totalAmount.toLocaleString()," kr"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Liter"}),n.jsxs("p",{className:"font-semibold text-slate-900",children:[j.totalLiters.toFixed(1)," L"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"KM"}),n.jsxs("p",{className:"font-semibold text-slate-900",children:[j.kmDriven.toLocaleString()," km"]})]})]})]})},j.vehicle.id))})]}),n.jsxs(Dt,{value:"time",className:"space-y-4",children:[n.jsxs(Nt,{value:a,onValueChange:i,children:[n.jsx(jt,{className:"h-11 rounded-2xl",children:n.jsx(kt,{placeholder:"Vlj anstlld"})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"all",children:"Alla anstllda"}),d.map(j=>n.jsx(Ne,{value:j.user_email,children:j.user_email},j.id))]})]}),n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-purple-100 flex items-center justify-center",children:n.jsx(Vt,{className:"h-5 w-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Totala timmar"}),n.jsxs("p",{className:"text-xl font-bold text-slate-900",children:[y.reduce((j,w)=>j+(w.total_hours||0),0).toFixed(1)," h"]})]})]})})}),n.jsx("div",{className:"space-y-3",children:v.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(Fr,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Ingen data fr vald period"})]})}):v.map(j=>n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-5",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:j.employee.user_email}),n.jsx("p",{className:"text-xs text-slate-500",children:j.employee.job_title||"Ingen titel"})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-lg font-bold text-slate-900",children:[j.totalHours.toFixed(1)," h"]}),n.jsxs("p",{className:"text-xs text-slate-500",children:[j.entryCount," registreringar"]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Support"}),n.jsxs("p",{className:"font-semibold text-slate-900",children:[j.byCategory.support_service.toFixed(1)," h"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Install"}),n.jsxs("p",{className:"font-semibold text-slate-900",children:[j.byCategory.install.toFixed(1)," h"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Rental"}),n.jsxs("p",{className:"font-semibold text-slate-900",children:[j.byCategory.rental.toFixed(1)," h"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Intern"}),n.jsxs("p",{className:"font-semibold text-slate-900",children:[j.byCategory.interntid.toFixed(1)," h"]})]})]})]})},j.employee.id))})]})]})]})})})}const m7={skift:"bg-blue-500",mte:"bg-violet-500",utbildning:"bg-emerald-500",event:"bg-amber-500"},LCe={skift:"Skift",mte:"Mte",utbildning:"Utbildning",event:"Event"};function DCe({events:e,selectedDate:t,onSelectDate:r,currentUserEmail:s}){const a=Fa(t,{weekStartsOn:1}),i=Array.from({length:7},(c,d)=>J0(a,d)),o=c=>e.filter(d=>{const u=bs(d.start_time);return Il(u,c)}),l=c=>{var d;return((d=c.assigned_to)==null?void 0:d.includes(s))||c.created_by===s};return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 -mx-1 px-1",children:i.map((c,d)=>{const u=Il(c,t),h=o(c).length>0,g=Il(c,new Date);return n.jsxs(tt.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:d*.05},onClick:()=>r(c),className:`
                flex flex-col items-center justify-center min-w-[64px] py-3 px-2 rounded-2xl transition-all
                ${u?"bg-slate-900 text-white shadow-lg":g?"bg-slate-100 text-slate-900":"bg-white text-slate-600 hover:bg-slate-50"}
              `,children:[n.jsx("span",{className:"text-xs font-medium uppercase opacity-60",children:Ce(c,"EEE",{locale:ut})}),n.jsx("span",{className:`text-xl font-semibold mt-1 ${u?"text-white":""}`,children:Ce(c,"d")}),h&&n.jsx("div",{className:`h-1.5 w-1.5 rounded-full mt-1 ${u?"bg-white":"bg-slate-900"}`})]},c.toISOString())})}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"text-sm font-medium text-slate-500",children:Ce(t,"EEEE d MMMM",{locale:ut})}),o(t).length===0?n.jsx(ce,{className:"border-0 shadow-sm bg-slate-50",children:n.jsx(he,{className:"py-12 text-center",children:n.jsx("p",{className:"text-slate-400",children:"Inga hndelser denna dag"})})}):n.jsx("div",{className:"space-y-3",children:o(t).map((c,d)=>{var u;return n.jsx(tt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:d*.1},children:n.jsx(ce,{className:`border-0 shadow-sm overflow-hidden ${l(c)?"ring-2 ring-blue-200":""}`,children:n.jsxs("div",{className:"flex",children:[n.jsx("div",{className:`w-1.5 ${m7[c.type]}`}),n.jsxs(he,{className:"py-4 px-5 flex-1",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h4",{className:"font-semibold text-slate-900 truncate",children:c.title}),l(c)&&n.jsx(it,{variant:"secondary",className:"bg-blue-100 text-blue-700 text-xs",children:"Min"})]}),c.description&&n.jsx("p",{className:"text-sm text-slate-500 mt-1 line-clamp-2",children:c.description})]}),n.jsx(it,{className:`${m7[c.type]} text-white border-0 text-xs`,children:LCe[c.type]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-4 mt-3 text-sm text-slate-500",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Vt,{className:"h-3.5 w-3.5"}),n.jsxs("span",{children:[Ce(bs(c.start_time),"HH:mm"),c.end_time&&` - ${Ce(bs(c.end_time),"HH:mm")}`]})]}),c.location&&n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Fn,{className:"h-3.5 w-3.5"}),n.jsx("span",{children:c.location})]}),((u=c.assigned_to)==null?void 0:u.length)>0&&n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Fr,{className:"h-3.5 w-3.5"}),n.jsxs("span",{children:[c.assigned_to.length," deltagare"]})]})]})]})]})})},c.id)})})]})]})}function ICe(){const[e,t]=P.useState(null),[r,s]=P.useState(new Date);P.useEffect(()=>{oe.auth.me().then(t)},[]);const a=Fa(r,{weekStartsOn:1}),i=Pc(r,{weekStartsOn:1}),{data:o=[],isLoading:l}=He({queryKey:["scheduleEvents",Ce(a,"yyyy-MM-dd")],queryFn:()=>oe.entities.ScheduleEvent.list("-start_time",200)}),c=d=>{s(u=>d==="next"?ev(u,1):Tz(u))};return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white",children:n.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-6 pb-24",children:[n.jsx(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Schema"}),n.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[Ce(a,"d MMM",{locale:ut}),"  ",Ce(i,"d MMM yyyy",{locale:ut})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ye,{variant:"outline",size:"icon",onClick:()=>c("prev"),className:"h-10 w-10 rounded-full border-0 bg-white shadow-sm",children:n.jsx(tp,{className:"h-4 w-4"})}),n.jsx(ye,{variant:"outline",size:"icon",onClick:()=>s(new Date),className:"h-10 w-10 rounded-full border-0 bg-white shadow-sm",children:n.jsx(_r,{className:"h-4 w-4"})}),n.jsx(ye,{variant:"outline",size:"icon",onClick:()=>c("next"),className:"h-10 w-10 rounded-full border-0 bg-white shadow-sm",children:n.jsx(Ph,{className:"h-4 w-4"})})]})]})}),l?n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5,6,7].map(d=>n.jsx("div",{className:"flex-1 h-20 bg-white rounded-2xl animate-pulse"},d))}),n.jsx("div",{className:"space-y-3",children:[1,2,3].map(d=>n.jsx("div",{className:"bg-white rounded-2xl h-24 animate-pulse"},d))})]}):n.jsx(DCe,{events:o,selectedDate:r,onSelectDate:s,currentUserEmail:e==null?void 0:e.email})]})})}const RCe={Ledning:"bg-violet-100 text-violet-700",HR:"bg-emerald-100 text-emerald-700",Slj:"bg-blue-100 text-blue-700",Marknad:"bg-pink-100 text-pink-700",IT:"bg-cyan-100 text-cyan-700",Ekonomi:"bg-amber-100 text-amber-700",Produktion:"bg-orange-100 text-orange-700",Kundtjnst:"bg-rose-100 text-rose-700",vrigt:"bg-slate-100 text-slate-700"};function p7({employee:e,user:t,onClick:r,index:s=0}){const a=i=>i?i.split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2):"?";return n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:s*.03},children:n.jsx(ce,{className:"border-0 shadow-sm hover:shadow-md transition-all duration-300 cursor-pointer group",onClick:r,children:n.jsx(he,{className:"p-5",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsxs(Vf,{className:"h-14 w-14 ring-2 ring-slate-100 group-hover:ring-slate-200 transition-all",children:[n.jsx(py,{src:e.profile_image}),n.jsx(Uf,{className:"bg-gradient-to-br from-slate-100 to-slate-200 text-slate-600 text-lg font-medium",children:a(t==null?void 0:t.full_name)})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"min-w-0",children:[n.jsx("h3",{className:"font-semibold text-slate-900 truncate group-hover:text-slate-700 transition-colors",children:(t==null?void 0:t.full_name)||e.user_email}),e.job_title&&n.jsx("p",{className:"text-sm text-slate-500 truncate",children:e.job_title})]}),n.jsx(it,{className:`${RCe[e.department]} border-0 text-xs flex-shrink-0`,children:e.department})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-3 text-xs text-slate-500",children:[n.jsxs("a",{href:`mailto:${e.user_email}`,onClick:i=>i.stopPropagation(),className:"flex items-center gap-1 hover:text-slate-700 transition-colors",children:[n.jsx(_c,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate max-w-[140px]",children:e.user_email})]}),e.phone&&n.jsxs("a",{href:`tel:${e.phone}`,onClick:i=>i.stopPropagation(),className:"flex items-center gap-1 hover:text-slate-700 transition-colors",children:[n.jsx(B0,{className:"h-3 w-3"}),n.jsx("span",{children:e.phone})]}),e.location&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Fn,{className:"h-3 w-3"}),n.jsx("span",{children:e.location})]})]})]})]})})})})}const FCe=["Alla","Ledning","HR","Slj","Marknad","IT","Ekonomi","Produktion","Kundtjnst","vrigt"],x7={Ledning:"bg-violet-100 text-violet-700",HR:"bg-emerald-100 text-emerald-700",Slj:"bg-blue-100 text-blue-700",Marknad:"bg-pink-100 text-pink-700",IT:"bg-cyan-100 text-cyan-700",Ekonomi:"bg-amber-100 text-amber-700",Produktion:"bg-orange-100 text-orange-700",Kundtjnst:"bg-rose-100 text-rose-700",vrigt:"bg-slate-100 text-slate-700"};function $Ce(){var y;const[e,t]=P.useState(""),[r,s]=P.useState("Alla"),[a,i]=P.useState(null),{data:o=[],isLoading:l}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list("department",200)}),{data:c=[],isLoading:d}=He({queryKey:["users"],queryFn:()=>oe.entities.User.list()}),u=v=>c.find(j=>j.email===v),h=o.filter(v=>{var A,C;const j=u(v.user_email),w=v.user_email.toLowerCase().includes(e.toLowerCase())||((A=j==null?void 0:j.full_name)==null?void 0:A.toLowerCase().includes(e.toLowerCase()))||((C=v.job_title)==null?void 0:C.toLowerCase().includes(e.toLowerCase())),N=r==="Alla"||v.department===r;return w&&N}),g=h.reduce((v,j)=>{const w=j.department||"vrigt";return v[w]||(v[w]=[]),v[w].push(j),v},{}),x=v=>v?v.split(" ").map(j=>j[0]).join("").toUpperCase().slice(0,2):"?",b=a?u(a.user_email):null;return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white",children:[n.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-6 pb-24",children:[n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Medarbetare"}),n.jsxs("p",{className:"text-sm text-slate-500",children:[o.length," kollegor"]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(uo,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),n.jsx(De,{placeholder:"Sk namn, email eller roll...",value:e,onChange:v=>t(v.target.value),className:"pl-11 h-12 rounded-2xl border-0 bg-white shadow-sm focus-visible:ring-2 focus-visible:ring-slate-200"})]}),n.jsxs(Nt,{value:r,onValueChange:s,children:[n.jsx(jt,{className:"w-[140px] h-12 rounded-2xl border-0 bg-white shadow-sm",children:n.jsx(kt,{})}),n.jsx(wt,{children:FCe.map(v=>n.jsx(Ne,{value:v,children:v},v))})]})]})]}),n.jsx(_a,{mode:"popLayout",children:l||d?n.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(v=>n.jsx("div",{className:"bg-white rounded-2xl h-24 animate-pulse"},v))}):h.length===0?n.jsxs(tt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-16",children:[n.jsx(LQ,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Inga medarbetare hittades"})]}):r==="Alla"?n.jsx("div",{className:"space-y-8",children:Object.entries(g).map(([v,j])=>n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(it,{className:`${x7[v]} border-0 text-xs`,children:v}),n.jsxs("span",{className:"text-xs text-slate-400",children:[j.length," personer"]})]}),n.jsx("div",{className:"space-y-3",children:j.map((w,N)=>n.jsx(p7,{employee:w,user:u(w.user_email),onClick:()=>i(w),index:N},w.id))})]},v))}):n.jsx("div",{className:"space-y-3",children:h.map((v,j)=>n.jsx(p7,{employee:v,user:u(v.user_email),onClick:()=>i(v),index:j},v.id))})})]}),n.jsx(Xn,{open:!!a,onOpenChange:()=>i(null),children:n.jsx(Yn,{className:"sm:max-w-md",children:a&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex flex-col items-center text-center pt-4 pb-2",children:[n.jsxs(Vf,{className:"h-20 w-20 ring-4 ring-slate-100",children:[n.jsx(py,{src:a.profile_image}),n.jsx(Uf,{className:"bg-gradient-to-br from-slate-100 to-slate-200 text-slate-600 text-xl font-medium",children:x(b==null?void 0:b.full_name)})]}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mt-4",children:(b==null?void 0:b.full_name)||a.user_email}),a.job_title&&n.jsx("p",{className:"text-slate-500 mt-1",children:a.job_title}),n.jsx(it,{className:`${x7[a.department]} border-0 mt-2`,children:a.department})]}),n.jsxs("div",{className:"space-y-4 mt-4",children:[n.jsxs("a",{href:`mailto:${a.user_email}`,className:"flex items-center gap-3 p-3 rounded-xl bg-slate-50 hover:bg-slate-100 transition-colors",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:n.jsx(_c,{className:"h-4 w-4 text-blue-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Email"}),n.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:a.user_email})]})]}),a.phone&&n.jsxs("a",{href:`tel:${a.phone}`,className:"flex items-center gap-3 p-3 rounded-xl bg-slate-50 hover:bg-slate-100 transition-colors",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-emerald-100 flex items-center justify-center",children:n.jsx(B0,{className:"h-4 w-4 text-emerald-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Telefon"}),n.jsx("p",{className:"text-sm font-medium text-slate-900",children:a.phone})]})]}),a.location&&n.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-slate-50",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-violet-100 flex items-center justify-center",children:n.jsx(Fn,{className:"h-4 w-4 text-violet-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Plats"}),n.jsx("p",{className:"text-sm font-medium text-slate-900",children:a.location})]})]}),a.start_date&&n.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-slate-50",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-amber-100 flex items-center justify-center",children:n.jsx(_r,{className:"h-4 w-4 text-amber-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Anstlld sedan"}),n.jsx("p",{className:"text-sm font-medium text-slate-900",children:Ce(new Date(a.start_date),"d MMMM yyyy",{locale:ut})})]})]}),a.bio&&n.jsxs("div",{className:"p-4 rounded-xl bg-slate-50",children:[n.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Om mig"}),n.jsx("p",{className:"text-sm text-slate-700",children:a.bio})]}),((y=a.skills)==null?void 0:y.length)>0&&n.jsxs("div",{className:"p-4 rounded-xl bg-slate-50",children:[n.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Kompetenser"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:a.skills.map(v=>n.jsx(it,{variant:"secondary",className:"bg-white",children:v},v))})]})]})]})})})]})}function BCe({open:e,onClose:t,timeEntry:r,onSubmit:s}){const[a,i]=P.useState(r!=null&&r.clock_in_time?Ce(new Date(r.clock_in_time),"HH:mm"):""),[o,l]=P.useState(r!=null&&r.clock_out_time?Ce(new Date(r.clock_out_time),"HH:mm"):""),[c,d]=P.useState((r==null?void 0:r.total_break_minutes)||0),[u,h]=P.useState(""),[g,x]=P.useState(!1),b=async y=>{if(y.preventDefault(),!u.trim()){alert("Du mste ange en motivering fr ndringen");return}x(!0);try{const v=new Date(r.date),[j,w]=a.split(":"),[N,A]=o.split(":"),C=new Date(v);C.setHours(parseInt(j),parseInt(w),0,0);const M=new Date(v);M.setHours(parseInt(N),parseInt(A),0,0),M<C&&M.setDate(M.getDate()+1);const I=(M-C)/(1e3*60*60)-c/60,F={original_data:{clock_in_time:r.clock_in_time,clock_out_time:r.clock_out_time,total_break_minutes:r.total_break_minutes,total_hours:r.total_hours},requested_data:{clock_in_time:C.toISOString(),clock_out_time:M.toISOString(),total_break_minutes:c,total_hours:Number(I.toFixed(2))},reason:u.trim()};await s(F),t()}catch(v){console.error("Error submitting adjustment:",v),alert("Kunde inte skicka in ndringen: "+v.message)}finally{x(!1)}};return r?n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"max-w-md",children:[n.jsx(er,{children:n.jsxs(tr,{className:"flex items-center gap-2",children:[n.jsx(ja,{className:"h-5 w-5 text-amber-600"}),"Rapportera avvikelse"]})}),n.jsxs("form",{onSubmit:b,className:"space-y-4",children:[n.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 text-sm",children:[n.jsx("p",{className:"font-medium text-slate-900 mb-1",children:Ce(new Date(r.date),"EEEE d MMMM yyyy",{locale:ut})}),n.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[n.jsx(Vt,{className:"h-4 w-4"}),n.jsxs("span",{children:["Nuvarande: ",Ce(new Date(r.clock_in_time),"HH:mm")," -",r.clock_out_time?Ce(new Date(r.clock_out_time),"HH:mm"):"Pgr"]})]}),r.clock_in_location&&n.jsxs("div",{className:"flex items-start gap-2 text-slate-600 mt-1",children:[n.jsx(Fn,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"text-xs line-clamp-2",children:r.clock_in_location.address})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ve,{htmlFor:"clockIn",className:"text-sm font-medium",children:"Instmpling"}),n.jsx(De,{id:"clockIn",type:"time",value:a,onChange:y=>i(y.target.value),required:!0,className:"mt-1"})]}),n.jsxs("div",{children:[n.jsx(ve,{htmlFor:"clockOut",className:"text-sm font-medium",children:"Utst mpling"}),n.jsx(De,{id:"clockOut",type:"time",value:o,onChange:y=>l(y.target.value),required:!0,className:"mt-1"})]})]}),n.jsxs("div",{children:[n.jsx(ve,{htmlFor:"breakMinutes",className:"text-sm font-medium",children:"Rast (minuter)"}),n.jsx(De,{id:"breakMinutes",type:"number",min:"0",max:"480",value:c,onChange:y=>d(parseInt(y.target.value)||0),className:"mt-1"})]}),n.jsxs("div",{children:[n.jsxs(ve,{htmlFor:"reason",className:"text-sm font-medium",children:["Motivering ",n.jsx("span",{className:"text-rose-600",children:"*"})]}),n.jsx(Zn,{id:"reason",placeholder:"Frklara varfr tiden behver justeras...",value:u,onChange:y=>h(y.target.value),required:!0,className:"mt-1 min-h-[100px]"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Beskriv tydligt varfr tiden behver ndras"})]}),n.jsxs(pA,{children:[n.jsx(ye,{type:"button",variant:"outline",onClick:t,disabled:g,children:"Avbryt"}),n.jsx(ye,{type:"submit",disabled:g||!u.trim(),className:"bg-amber-600 hover:bg-amber-700",children:g?"Skickar...":"Skicka till admin"})]})]})]})}):null}const g7={completed:{icon:ti,color:"text-emerald-600",bg:"bg-emerald-50",label:"Godknd"},pending_review:{icon:Vt,color:"text-amber-600",bg:"bg-amber-50",label:"Vntar granskning"},approved:{icon:ti,color:"text-emerald-600",bg:"bg-emerald-50",label:"Godknd"},rejected:{icon:xh,color:"text-rose-600",bg:"bg-rose-50",label:"Nekad"},needs_correction:{icon:Kr,color:"text-amber-600",bg:"bg-amber-50",label:"Behver korrigering"},active:{icon:Vt,color:"text-blue-600",bg:"bg-blue-50",label:"Aktiv"}};function qCe({timeEntries:e,employee:t}){const[r,s]=P.useState(Fa(new Date,{weekStartsOn:1})),[a,i]=P.useState(null),[o,l]=P.useState(null),c=$n(),{data:d=[]}=He({queryKey:["projects"],queryFn:()=>oe.entities.Project.list()}),u=Xt({mutationFn:({id:v,data:j})=>oe.entities.TimeEntry.update(v,j),onSuccess:()=>{c.invalidateQueries({queryKey:["timeEntries"]}),i(null)}}),h=async v=>{a&&await u.mutateAsync({id:a.id,data:{project_allocations:v}})},g=async v=>{if(o)try{await oe.entities.ApprovalRequest.create({type:"time_adjustment",requester_email:t.user_email,requester_name:t.user_email,related_entity_id:o.id,related_entity_type:"TimeEntry",description:`Tidjustering fr ${Ce(new Date(o.date),"d MMMM yyyy",{locale:ut})}`,reason:v.reason,original_data:v.original_data,requested_data:v.requested_data,status:"pending"}),await oe.entities.TimeEntry.update(o.id,{status:"pending_review"}),c.invalidateQueries({queryKey:["timeEntries"]}),oo.success("Avvikelse rapporterad",{description:"Din ndring har skickats till admin fr granskning"}),l(null)}catch(j){throw console.error("Error submitting adjustment:",j),oo.error("Kunde inte rapportera avvikelse",{description:j.message}),j}},x=Array.from({length:7},(v,j)=>J0(r,j)),b=v=>e.filter(j=>Il(new Date(j.date),v)),y=v=>v.reduce((j,w)=>j+(w.total_hours||0),0);return x.reduce((v,j)=>{const w=b(j);return v+y(w)},0),(t==null?void 0:t.normal_work_hours_per_day)*5,n.jsxs("div",{className:"space-y-4",children:[n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(ye,{variant:"outline",size:"icon",onClick:()=>s(Tz(r)),className:"rounded-full",children:n.jsx(tp,{className:"h-4 w-4"})}),n.jsxs("div",{className:"text-center",children:[n.jsxs("h3",{className:"font-semibold text-slate-900",children:["Vecka ",Ce(r,"w",{locale:ut})]}),n.jsxs("p",{className:"text-sm text-slate-500",children:[Ce(r,"d MMM",{locale:ut})," - ",Ce(J0(r,6),"d MMM yyyy",{locale:ut})]})]}),n.jsx(ye,{variant:"outline",size:"icon",onClick:()=>s(ev(r,1)),className:"rounded-full",children:n.jsx(Ph,{className:"h-4 w-4"})})]})})}),a&&n.jsx(FC,{timeEntry:a,projects:d,onSave:h,onCancel:()=>i(null)}),n.jsx(BCe,{open:!!o,onClose:()=>l(null),timeEntry:o,onSubmit:g}),!a&&n.jsx("div",{className:"space-y-3",children:x.map((v,j)=>{const w=b(v),N=y(w),A=Il(v,new Date),C=v.getDay()===0||v.getDay()===6;return n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:j*.05},children:n.jsxs(ce,{className:`border-0 shadow-sm ${A?"ring-2 ring-slate-900":""}`,children:[n.jsx(At,{className:`p-4 pb-3 ${C?"bg-slate-50":""}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold text-slate-900",children:[Ce(v,"EEEE",{locale:ut}),A&&n.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 bg-slate-900 text-white rounded-full",children:"Idag"})]}),n.jsx("p",{className:"text-sm text-slate-500",children:Ce(v,"d MMMM",{locale:ut})})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[N.toFixed(1),"h"]}),w.length>0&&n.jsxs("p",{className:"text-xs text-slate-500",children:[w.length," registrering",w.length!==1?"ar":""]})]})]})}),w.length>0?n.jsx(he,{className:"p-4 pt-0 space-y-2",children:w.map(M=>{var U,W,D;const I=g7[M.status]||g7.completed,F=I.icon;return n.jsxs("div",{className:`p-3 rounded-lg ${I.bg}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(F,{className:`h-4 w-4 ${I.color}`}),n.jsx("span",{className:"text-sm font-medium text-slate-900",children:(U=M.category)==null?void 0:U.replace("_"," ")})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-sm font-semibold text-slate-900",children:[(W=M.total_hours)==null?void 0:W.toFixed(1),"h"]}),M.status==="completed"&&n.jsxs(n.Fragment,{children:[n.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>i(M),className:"h-6 w-6 p-0",title:"Frdela tid p projekt",children:n.jsx(ql,{className:"h-3 w-3"})}),n.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>l(M),className:"h-6 w-6 p-0 text-amber-600 hover:text-amber-700",title:"Rapportera avvikelse",children:n.jsx(lX,{className:"h-3 w-3"})})]})]})]}),((D=M.project_allocations)==null?void 0:D.length)>0?n.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:M.project_allocations.map((R,z)=>{const Z=d.find(se=>se.id===R.project_id);return n.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-indigo-100 text-indigo-700 text-xs font-semibold",children:[n.jsx("span",{children:(Z==null?void 0:Z.name)||R.project_id}),n.jsxs("span",{className:"text-indigo-600 font-bold",children:[R.hours,"h"]})]},z)})}):M.project_id&&n.jsx("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-indigo-100 text-indigo-700 text-xs font-semibold mb-2",children:n.jsx("span",{children:M.project_id})}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-600",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Vt,{className:"h-3 w-3"}),n.jsxs("span",{children:[Ce(new Date(M.clock_in_time),"HH:mm")," - "," ",M.clock_out_time?Ce(new Date(M.clock_out_time),"HH:mm"):"Pgr"]})]}),M.total_break_minutes>0&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(mj,{className:"h-3 w-3"}),n.jsxs("span",{children:[M.total_break_minutes,"m rast"]})]})]}),M.clock_in_location&&n.jsxs("div",{className:"flex items-start gap-1 mt-2 text-xs text-slate-500",children:[n.jsx(Fn,{className:"h-3 w-3 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"line-clamp-1",children:M.clock_in_location.address})]}),M.anomaly_flag&&n.jsxs("div",{className:"mt-2 p-2 bg-amber-100 rounded text-xs text-amber-800",children:[n.jsx(Kr,{className:"h-3 w-3 inline mr-1"}),M.anomaly_reason||"Avvikelse"]})]},M.id)})}):n.jsx(he,{className:"p-4 pt-0",children:n.jsx("p",{className:"text-sm text-slate-400 text-center py-4",children:C?"Helg":"Ingen tid registrerad"})})]})},v.toISOString())})})]})}function zCe({timeEntries:e,employee:t,userEmail:r}){const[s,a]=P.useState(new Date),{data:i=[]}=He({queryKey:["leaveRequests",r],queryFn:async()=>r?(await oe.entities.LeaveRequest.filter({employee_email:r})).filter(A=>A.status==="approved"):[],enabled:!!r}),o=ri(s),l=ni(s),c=cA({start:o,end:l}),d=N=>e.filter(A=>Il(new Date(A.date),N)&&(A.status==="completed"||A.status==="approved")),u=N=>i.find(A=>{const C=new Date(A.start_date),M=new Date(A.end_date);return _f(N,{start:C,end:M})}),h={semester:{label:"Semester",color:"bg-blue-100 text-blue-700 border-blue-300",emoji:""},vab:{label:"VAB",color:"bg-purple-100 text-purple-700 border-purple-300",emoji:""},sjuk:{label:"Sjuk",color:"bg-rose-100 text-rose-700 border-rose-300",emoji:""},tjnstledigt:{label:"Tjnstledigt",color:"bg-amber-100 text-amber-700 border-amber-300",emoji:""},frldraledigt:{label:"Frldraledigt",color:"bg-pink-100 text-pink-700 border-pink-300",emoji:""},annat:{label:"Annat",color:"bg-slate-100 text-slate-700 border-slate-300",emoji:""}},g=N=>N.reduce((A,C)=>A+(C.total_hours||0),0),x=c.reduce((N,A)=>{const C=d(A);return N+g(C)},0),b=c.filter(N=>!v6(N)).length,y=((t==null?void 0:t.normal_work_hours_per_day)||8)*b,v=x-y,j=[];let w=[];return c.forEach((N,A)=>{if(A===0){const C=N.getDay(),M=C===0?6:C-1;w=Array(M).fill(null)}if(w.push(N),w.length===7||A===c.length-1){for(;w.length<7;)w.push(null);j.push(w),w=[]}}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(ye,{variant:"outline",size:"icon",onClick:()=>a(mue(s)),className:"rounded-full",children:n.jsx(tp,{className:"h-4 w-4"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"font-semibold text-slate-900 text-lg",children:Ce(s,"MMMM yyyy",{locale:ut})}),n.jsxs("p",{className:"text-sm text-slate-500",children:[b," arbetsdagar"]})]}),n.jsx(ye,{variant:"outline",size:"icon",onClick:()=>a(gz(s,1)),className:"rounded-full",children:n.jsx(Ph,{className:"h-4 w-4"})})]})})}),n.jsx(ce,{className:"border-0 shadow-lg",children:n.jsx(he,{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Arbetat"}),n.jsxs("span",{className:"text-3xl font-bold text-slate-900",children:[x.toFixed(1),"h"]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Frvntat"}),n.jsxs("span",{className:"text-lg text-slate-600",children:[y,"h"]})]}),n.jsx("div",{className:"h-px bg-slate-200"}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Differens"}),n.jsx("span",{className:`text-xl font-bold flex items-center gap-2 ${v>=0?"text-emerald-600":"text-amber-600"}`,children:v>=0?n.jsxs(n.Fragment,{children:[n.jsx(ta,{className:"h-5 w-5"}),"+",v.toFixed(1),"h"]}):n.jsxs(n.Fragment,{children:[n.jsx(r9,{className:"h-5 w-5"}),v.toFixed(1),"h"]})})]}),n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-3",children:n.jsx("div",{className:`h-3 rounded-full transition-all ${x>=y?"bg-emerald-500":"bg-blue-500"}`,style:{width:`${Math.min(x/y*100,100)}%`}})}),n.jsxs("p",{className:"text-xs text-slate-500 text-center",children:[Math.round(x/y*100),"% genomfrt"]})]})})}),n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-4",children:[n.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Mn","Tis","Ons","Tor","Fre","Lr","Sn"].map(N=>n.jsx("div",{className:"text-center text-xs font-medium text-slate-500 py-2",children:N},N))}),n.jsx("div",{className:"space-y-1",children:j.map((N,A)=>n.jsx("div",{className:"grid grid-cols-7 gap-1",children:N.map((C,M)=>{if(!C)return n.jsx("div",{className:"aspect-square"},`empty-${M}`);const I=d(C),F=g(I),U=u(C),W=Il(C,new Date),D=v6(C),R=U?h[U.type]||h.annat:null;return n.jsxs(tt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:(A*7+M)*.01},className:`aspect-square rounded-lg p-1 flex flex-col items-center justify-center text-center border ${W?"ring-2 ring-slate-900 bg-slate-50":U?`${R.color} border`:D?"bg-slate-50/50 border-transparent":F>0?"bg-emerald-50 border-transparent":"bg-white border-transparent"}`,children:[n.jsx("span",{className:`text-xs font-medium ${W?"text-slate-900":U?R.color.split(" ")[1]:F>0?"text-emerald-900":"text-slate-500"}`,children:Ce(C,"d")}),U?n.jsx("span",{className:"text-[10px] leading-none mt-0.5",children:R.emoji}):F>0&&n.jsxs("span",{className:"text-[10px] font-bold text-emerald-600 mt-0.5",children:[F.toFixed(1),"h"]})]},C.toISOString())})},A))})]})})]})}const VCe=[{id:"semester",label:"Semester",icon:""},{id:"vab",label:"VAB",icon:""},{id:"sjuk",label:"Sjukfrnvaro",icon:""},{id:"tjnstledigt",label:"Tjnstledighet",icon:""},{id:"frldraledigt",label:"Frldraledighet",icon:""},{id:"flex",label:"Flex",icon:""},{id:"annat",label:"Annat",icon:""}];function v7({userEmail:e,userName:t,employee:r,defaultType:s,onClose:a}){const[i,o]=P.useState({type:s||"semester",start_date:"",end_date:"",reason:""}),l=$n(),{data:c=[]}=He({queryKey:["leaveRequests",e],queryFn:async()=>e?(await oe.entities.LeaveRequest.list("-created_date",50)).filter(x=>x.employee_email===e):[],enabled:!!e}),d=Xt({mutationFn:g=>oe.entities.LeaveRequest.create(g),onSuccess:()=>{l.invalidateQueries({queryKey:["leaveRequests"]}),l.invalidateQueries({queryKey:["employee"]}),o({type:s||"semester",start_date:"",end_date:"",reason:""}),a&&a()}}),u=g=>{g.preventDefault();const x=jh(new Date(i.end_date),new Date(i.start_date))+1;d.mutate({employee_email:e,type:i.type,start_date:i.start_date,end_date:i.end_date,days:x,reason:i.reason,status:"pending"})},h=i.start_date&&i.end_date?jh(new Date(i.end_date),new Date(i.start_date))+1:0;return n.jsxs(ce,{className:"border-2 border-emerald-200 bg-emerald-50/30 shadow-sm",children:[n.jsx(At,{className:"pb-3",children:n.jsxs(Ct,{className:"text-base font-semibold text-emerald-900 flex items-center gap-2",children:[n.jsx(_r,{className:"w-5 h-5"}),"Ansk om ledighet"]})}),n.jsx(he,{className:"pt-0",children:n.jsxs("form",{onSubmit:u,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Typ av ledighet"}),n.jsxs(Nt,{value:i.type,onValueChange:g=>o(x=>({...x,type:g})),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsx(wt,{children:VCe.map(g=>n.jsxs(Ne,{value:g.id,children:[g.icon," ",g.label]},g.id))})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Frn datum"}),n.jsx(De,{type:"date",value:i.start_date,onChange:g=>o(x=>({...x,start_date:g.target.value})),required:!0,className:"h-11"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Till datum"}),n.jsx(De,{type:"date",value:i.end_date,onChange:g=>o(x=>({...x,end_date:g.target.value})),min:i.start_date,required:!0,className:"h-11"})]})]}),h>0&&n.jsx("div",{className:"p-3 bg-emerald-100 border border-emerald-300 rounded-lg",children:n.jsxs("p",{className:"text-sm text-emerald-900 font-medium",children:[h," dag",h!==1?"ar":""]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Anledning"}),n.jsx(Zn,{value:i.reason,onChange:g=>o(x=>({...x,reason:g.target.value})),placeholder:"Beskriv anledningen...",rows:3,required:!0})]}),n.jsx(ye,{type:"submit",disabled:d.isPending,className:"w-full h-12 bg-emerald-600 hover:bg-emerald-700",children:d.isPending?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"w-4 h-4 mr-2 animate-spin"}),"Skickar..."]}):n.jsxs(n.Fragment,{children:[n.jsx(xr,{className:"w-4 h-4 mr-2"}),"Skicka anskan"]})})]})})]})}function y7({employee:e,timeEntries:t}){var h,g,x;if(!e)return n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-6 text-center",children:n.jsx("p",{className:"text-sm text-slate-500",children:"Laddar saldon..."})})});const r=ri(new Date),s=ni(new Date),i=t.filter(b=>{const y=new Date(b.date);return y>=r&&y<=s&&b.status==="completed"}).reduce((b,y)=>b+(y.total_hours||0),0),o=Nz(new Date),l=Qce(new Date),d=t.filter(b=>{const y=new Date(b.date);return y>=o&&y<=l&&b.status==="completed"}).reduce((b,y)=>b+(y.total_hours||0),0),u=[{title:"Denna mnad",value:`${i.toFixed(1)}h`,icon:_r,color:"text-blue-600",bg:"bg-blue-50"},{title:"I r totalt",value:`${d.toFixed(1)}h`,icon:ta,color:"text-emerald-600",bg:"bg-emerald-50"},{title:"Flexsaldo",value:`${e.flex_balance>=0?"+":""}${((h=e.flex_balance)==null?void 0:h.toFixed(1))||0}h`,icon:Vt,color:e.flex_balance>=0?"text-emerald-600":"text-rose-600",bg:e.flex_balance>=0?"bg-emerald-50":"bg-rose-50"},{title:"Komptid",value:`${((g=e.comp_time_balance)==null?void 0:g.toFixed(1))||0}h`,icon:mj,color:"text-amber-600",bg:"bg-amber-50"},{title:"Semester kvar",value:`${e.vacation_balance||0} dagar`,icon:Do,color:"text-purple-600",bg:"bg-purple-50"},{title:"Sjukdagar i r",value:`${e.sick_days_this_year||0} dagar`,icon:t3,color:"text-rose-600",bg:"bg-rose-50"}];return n.jsxs("div",{className:"space-y-4",children:[n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-slate-900 to-slate-800 text-white",children:n.jsx(he,{className:"p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-sm text-white/70 mb-2",children:"Aktuellt saldo"}),n.jsxs("p",{className:"text-4xl font-bold mb-1",children:[e.flex_balance>=0?"+":"",((x=e.flex_balance)==null?void 0:x.toFixed(1))||0,"h"]}),n.jsx("p",{className:"text-xs text-white/60",children:"Flextid"})]})})}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:u.map((b,y)=>{const v=b.icon;return n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:y*.05},children:n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-4",children:[n.jsx("div",{className:`inline-flex p-2 rounded-lg ${b.bg} mb-3`,children:n.jsx(v,{className:`h-4 w-4 ${b.color}`})}),n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:b.title}),n.jsx("p",{className:"text-xl font-bold text-slate-900",children:b.value})]})})},b.title)})}),n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{className:"pb-3",children:n.jsx(Ct,{className:"text-base",children:"Semesterversikt"})}),n.jsxs(he,{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Intjnat i r"}),n.jsxs("span",{className:"font-semibold text-slate-900",children:[e.vacation_earned_this_year||0," dagar"]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Anvnt i r"}),n.jsxs("span",{className:"font-semibold text-slate-900",children:[e.vacation_used_this_year||0," dagar"]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[n.jsx("span",{className:"text-sm font-medium text-slate-900",children:"Kvar att ta ut"}),n.jsxs("span",{className:"text-lg font-bold text-slate-900",children:[e.vacation_balance||0," dagar"]})]})]})]}),e.overtime_hours_this_month>0&&n.jsx(ce,{className:"border-0 shadow-sm bg-amber-50",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-amber-800 font-medium mb-1",children:"vertid denna mnad"}),n.jsxs("p",{className:"text-2xl font-bold text-amber-900",children:[e.overtime_hours_this_month.toFixed(1),"h"]})]}),n.jsx(ta,{className:"h-8 w-8 text-amber-600"})]})})})]})}function b7({userEmail:e,userName:t,timeEntries:r}){const[s,a]=P.useState(null),[i,o]=P.useState({clock_in_time:"",clock_out_time:"",reason:""}),l=$n(),c=Xt({mutationFn:g=>oe.entities.ApprovalRequest.create(g),onSuccess:()=>{l.invalidateQueries({queryKey:["approvals"]}),a(null),o({clock_in_time:"",clock_out_time:"",reason:""})}}),d=r.filter(g=>g.status==="completed").sort((g,x)=>new Date(x.date)-new Date(g.date)).slice(0,10),u=g=>{a(g);const x=new Date(g.clock_in_time),b=g.clock_out_time?new Date(g.clock_out_time):new Date;o({clock_in_time:Ce(x,"yyyy-MM-dd'T'HH:mm"),clock_out_time:Ce(b,"yyyy-MM-dd'T'HH:mm"),reason:""})},h=g=>{if(g.preventDefault(),!i.reason.trim()){alert("Du mste ange en anledning till justeringen");return}c.mutate({type:"time_adjustment",requester_email:e,requester_name:t,related_entity_id:s.id,related_entity_type:"TimeEntry",description:`Begr justering av tidrapport frn ${Ce(new Date(s.date),"d MMM yyyy",{locale:ut})}`,reason:i.reason,original_data:{clock_in_time:s.clock_in_time,clock_out_time:s.clock_out_time},requested_data:{clock_in_time:new Date(i.clock_in_time).toISOString(),clock_out_time:new Date(i.clock_out_time).toISOString()},status:"pending"})};return n.jsxs("div",{className:"space-y-4",children:[n.jsx(ce,{className:"border-0 shadow-sm bg-blue-50",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx(ja,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Om tidsjustering"}),n.jsx("p",{className:"text-xs text-blue-700",children:"Begr ndringar av dina tider om du glmt stmpla eller stmplat fel. Din chef behver godknna alla justeringar."})]})]})})}),s?n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsxs(At,{className:"pb-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ct,{className:"text-lg",children:"Justera tidrapport"}),n.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>a(null),children:"Avbryt"})]}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:Ce(new Date(s.date),"d MMMM yyyy",{locale:ut})})]}),n.jsx(he,{children:n.jsxs("form",{onSubmit:h,className:"space-y-4",children:[n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[n.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Nuvarande tider:"}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsxs("span",{children:["In: ",Ce(new Date(s.clock_in_time),"HH:mm")]}),n.jsx("span",{children:""}),n.jsxs("span",{children:["Ut: ",s.clock_out_time?Ce(new Date(s.clock_out_time),"HH:mm"):"Ingen"]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Ny instmpling"}),n.jsx(De,{type:"datetime-local",value:i.clock_in_time,onChange:g=>o(x=>({...x,clock_in_time:g.target.value})),className:"h-11",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Ny utstmpling"}),n.jsx(De,{type:"datetime-local",value:i.clock_out_time,onChange:g=>o(x=>({...x,clock_out_time:g.target.value})),className:"h-11",required:!0})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Anledning till justering *"}),n.jsx(Zn,{value:i.reason,onChange:g=>o(x=>({...x,reason:g.target.value})),placeholder:"Frklara varfr du behver justera tiden...",className:"resize-none h-24",required:!0}),n.jsx("p",{className:"text-xs text-slate-500",children:"Detta r obligatoriskt och kommer att ses av din chef"})]}),n.jsx(ye,{type:"submit",disabled:c.isPending,className:"w-full h-11 rounded-xl",children:c.isPending?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"w-4 h-4 mr-2 animate-spin"}),"Skickar..."]}):"Skicka fr godknnande"})]})})]})}):n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"text-sm font-medium text-slate-700",children:"Vlj tid att justera"}),d.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-6 text-center",children:n.jsx("p",{className:"text-sm text-slate-500",children:"Inga tidrapporter att justera"})})}):d.map((g,x)=>{var b;return n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:x*.05},children:n.jsx(ce,{className:"border-0 shadow-sm cursor-pointer hover:shadow-md transition-shadow",children:n.jsx(he,{className:"p-4",onClick:()=>u(g),children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-slate-900 mb-1",children:Ce(new Date(g.date),"d MMMM yyyy",{locale:ut})}),n.jsxs("p",{className:"text-sm text-slate-600",children:[Ce(new Date(g.clock_in_time),"HH:mm")," - "," ",g.clock_out_time?Ce(new Date(g.clock_out_time),"HH:mm"):"Ingen utstmpling"]}),n.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[(b=g.total_hours)==null?void 0:b.toFixed(1),"h  ",g.category]})]}),n.jsx(ql,{className:"h-5 w-5 text-slate-400"})]})})})},g.id)})]})]})}function j7({userEmail:e,userName:t,employee:r,onClose:s}){const[a,i]=P.useState("dag"),[o,l]=P.useState(Ce(new Date,"yyyy-MM-dd")),[c,d]=P.useState(Ce(new Date,"yyyy-MM-dd")),[u,h]=P.useState(""),[g,x]=P.useState(""),b=$n(),y=Xt({mutationFn:async w=>{const A=((r==null?void 0:r.flex_balance)||0)-w.totalHours,C=await oe.entities.Employee.filter({user_email:e});return C.length>0&&await oe.entities.Employee.update(C[0].id,{flex_balance:A}),oe.entities.TimeEntry.create({employee_email:e,date:w.startDate,clock_in_time:new Date(w.startDate).toISOString(),clock_out_time:new Date(w.startDate).toISOString(),total_hours:-w.totalHours,category:"interntid",notes:`Flex: ${w.reason}`,status:"completed"})},onSuccess:()=>{b.invalidateQueries({queryKey:["employee"]}),b.invalidateQueries({queryKey:["timeEntries"]}),oo.success("Flex registrerad"),x(""),h(""),s&&s()},onError:w=>{oo.error("Kunde inte registrera flex"),console.error(w)}}),v=w=>{w.preventDefault();let N=0;const A=new Date(o),C=new Date(c);if(a==="dag"?N=(Math.floor((C-A)/864e5)+1)*((r==null?void 0:r.normal_work_hours_per_day)||8):N=parseFloat(u),!N||N<=0){oo.error("Ange antal timmar eller dagar");return}if(!g.trim()){oo.error("Ange anledning");return}y.mutate({startDate:o,endDate:c,totalHours:N,reason:g})},j=()=>{const w=new Date(o),N=new Date(c);return Math.floor((N-w)/(1e3*60*60*24))+1};return n.jsxs(ce,{className:"border-2 border-indigo-200 bg-indigo-50/30 shadow-sm",children:[n.jsx(At,{className:"pb-3",children:n.jsxs(Ct,{className:"text-base font-semibold text-indigo-900 flex items-center gap-2",children:[n.jsx(Vt,{className:"w-5 h-5"}),"Registrera flex"]})}),n.jsx(he,{className:"pt-0",children:n.jsxs("form",{onSubmit:v,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Typ av registrering"}),n.jsxs(Nt,{value:a,onValueChange:i,children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"dag",children:"Dag/dagar"}),n.jsx(Ne,{value:"timmar",children:"Timmar"})]})]})]}),a==="dag"?n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Startdatum"}),n.jsx(De,{type:"date",value:o,onChange:w=>l(w.target.value),required:!0,className:"h-11"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Slutdatum"}),n.jsx(De,{type:"date",value:c,onChange:w=>d(w.target.value),min:o,required:!0,className:"h-11"})]})]}):n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Datum"}),n.jsx(De,{type:"date",value:o,onChange:w=>{l(w.target.value),d(w.target.value)},required:!0,className:"h-11"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Antal timmar"}),n.jsx(De,{type:"number",step:"0.5",min:"0.5",value:u,onChange:w=>h(w.target.value),placeholder:"T.ex. 4.5",required:!0,className:"h-11"})]})]}),a==="dag"&&o&&c&&n.jsx("div",{className:"bg-indigo-100 border border-indigo-300 rounded-lg p-3",children:n.jsxs("p",{className:"text-sm text-indigo-900 font-medium",children:[j()," ",j()===1?"dag":"dagar"," = ",j()*((r==null?void 0:r.normal_work_hours_per_day)||8)," timmar"]})}),a==="timmar"&&u&&n.jsx("div",{className:"bg-indigo-100 border border-indigo-300 rounded-lg p-3",children:n.jsxs("p",{className:"text-sm text-indigo-900 font-medium",children:[u," timmar flex tas ut"]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Anledning"}),n.jsx(Zn,{value:g,onChange:w=>x(w.target.value),placeholder:"Beskriv anledningen...",rows:3,required:!0})]}),n.jsx(ye,{type:"submit",className:"w-full h-12 bg-indigo-600 hover:bg-indigo-700",disabled:y.isPending,children:y.isPending?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-4 w-4 mr-2 animate-spin"}),"Registrerar..."]}):n.jsxs(n.Fragment,{children:[n.jsx(xr,{className:"h-4 w-4 mr-2"}),"Registrera flex"]})})]})})]})}function UCe({timeEntries:e,userEmail:t}){const{data:r=[]}=He({queryKey:["projects"],queryFn:async()=>(await oe.entities.Project.list("-updated_date")).filter(c=>c.status==="pgende"),initialData:[]}),s=P.useMemo(()=>{const l={};return e.forEach(c=>{c.project_allocations&&c.status==="completed"&&c.project_allocations.forEach(d=>{l[d.project_id]||(l[d.project_id]={totalHours:0,weekHours:0,monthHours:0,entries:0}),l[d.project_id].totalHours+=d.hours||0,l[d.project_id].entries+=1;const u=new Date(c.date),h=Fa(new Date,{weekStartsOn:1}),g=Pc(new Date,{weekStartsOn:1});_f(u,{start:h,end:g})&&(l[d.project_id].weekHours+=d.hours||0);const x=ri(new Date),b=ni(new Date);_f(u,{start:x,end:b})&&(l[d.project_id].monthHours+=d.hours||0)})}),Object.entries(l).map(([c,d])=>{const u=r.find(h=>h.id===c);return{projectId:c,projectName:(u==null?void 0:u.name)||"Oknt projekt",projectCode:(u==null?void 0:u.project_code)||"",...d}}).sort((c,d)=>d.monthHours-c.monthHours)},[e,r]),a=s.reduce((l,c)=>l+c.totalHours,0),i=s.reduce((l,c)=>l+c.weekHours,0),o=s.reduce((l,c)=>l+c.monthHours,0);return s.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-8 text-center",children:[n.jsx(Do,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Inga projekt registrerade n"})]})}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n.jsx(ce,{className:"border-0 bg-indigo-50",children:n.jsxs(he,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Vt,{className:"w-4 h-4 text-indigo-600"}),n.jsx("p",{className:"text-xs font-medium text-indigo-900",children:"Denna vecka"})]}),n.jsxs("p",{className:"text-2xl font-bold text-indigo-900",children:[i.toFixed(1),"h"]})]})}),n.jsx(ce,{className:"border-0 bg-blue-50",children:n.jsxs(he,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(_r,{className:"w-4 h-4 text-blue-600"}),n.jsx("p",{className:"text-xs font-medium text-blue-900",children:"Denna mnad"})]}),n.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[o.toFixed(1),"h"]})]})}),n.jsx(ce,{className:"border-0 bg-emerald-50",children:n.jsxs(he,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(ta,{className:"w-4 h-4 text-emerald-600"}),n.jsx("p",{className:"text-xs font-medium text-emerald-900",children:"Totalt"})]}),n.jsxs("p",{className:"text-2xl font-bold text-emerald-900",children:[a.toFixed(1),"h"]})]})})]}),n.jsxs(ce,{className:"border-0 shadow-sm",children:[n.jsx(At,{className:"pb-3",children:n.jsxs(Ct,{className:"text-base font-semibold flex items-center gap-2",children:[n.jsx(Do,{className:"w-5 h-5"}),"Timmar per projekt"]})}),n.jsx(he,{className:"p-4 pt-0",children:n.jsx("div",{className:"space-y-3",children:s.map(l=>n.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:l.projectName}),l.projectCode&&n.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:l.projectCode})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-lg font-bold text-slate-900",children:[l.totalHours.toFixed(1),"h"]}),n.jsxs("p",{className:"text-xs text-slate-500",children:[l.entries," registreringar"]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[n.jsxs("div",{className:"bg-white rounded-lg p-2",children:[n.jsx("p",{className:"text-xs text-slate-500 mb-0.5",children:"Denna vecka"}),n.jsxs("p",{className:"font-semibold text-slate-900",children:[l.weekHours.toFixed(1),"h"]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-2",children:[n.jsx("p",{className:"text-xs text-slate-500 mb-0.5",children:"Denna mnad"}),n.jsxs("p",{className:"font-semibold text-slate-900",children:[l.monthHours.toFixed(1),"h"]})]})]}),l.monthHours>0&&n.jsxs("div",{className:"mt-3",children:[n.jsxs("div",{className:"flex justify-between text-xs text-slate-600 mb-1",children:[n.jsx("span",{children:"Andel av mnadens arbete"}),n.jsxs("span",{children:[Math.round(l.monthHours/o*100),"%"]})]}),n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:n.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all",style:{width:`${l.monthHours/o*100}%`}})})]})]},l.projectId))})})]})]})}function HCe(){var w;const[e,t]=P.useState(null),[r,s]=P.useState("vecka");$n(),P.useEffect(()=>{oe.auth.me().then(t).catch(()=>{oe.auth.redirectToLogin(window.location.pathname)})},[]);const{data:a}=He({queryKey:["employee",e==null?void 0:e.email],queryFn:async()=>e!=null&&e.email?(await oe.entities.Employee.list()).find(A=>A.user_email===e.email):null,enabled:!!(e!=null&&e.email)}),{data:i=[],refetch:o}=He({queryKey:["timeEntries",e==null?void 0:e.email],queryFn:async()=>e!=null&&e.email?(await oe.entities.TimeEntry.list()).filter(A=>A.employee_email===e.email):[],enabled:!!(e!=null&&e.email)}),l=Fa(new Date,{weekStartsOn:1}),c=Pc(new Date,{weekStartsOn:1});i.filter(N=>{const A=new Date(N.date);return _f(A,{start:l,end:c})&&(N.status==="completed"||N.status==="approved")}).reduce((N,A)=>N+(A.total_hours||0),0),(a==null?void 0:a.normal_work_hours_per_day)*5;const u=new Date,h=wu(u),g=i1(u);i.filter(N=>{const A=new Date(N.date);return _f(A,{start:h,end:g})&&(N.status==="completed"||N.status==="approved")}).reduce((N,A)=>N+(A.total_hours||0),0),a!=null&&a.normal_work_hours_per_day;const b=ri(u),y=ni(u);i.filter(N=>{const A=new Date(N.date);return _f(A,{start:b,end:y})&&(N.status==="completed"||N.status==="approved")}).reduce((N,A)=>N+(A.total_hours||0),0);const j=(()=>{let N=0,A=new Date(b);for(;A<=y;){const C=A.getDay();C!==0&&C!==6&&N++,A.setDate(A.getDate()+1)}return N})();return((a==null?void 0:a.normal_work_hours_per_day)||8)*j,n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white",children:n.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-6 pb-24",children:[n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Tidrapportering"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:e?`Vlkommen, ${(w=e.full_name)==null?void 0:w.split(" ")[0]}`:"Vlkommen"})]}),n.jsxs(Ls,{value:r,onValueChange:s,className:"mb-6",children:[n.jsxs(As,{className:"w-full h-auto p-1.5 bg-slate-100 rounded-2xl grid grid-cols-4 lg:grid-cols-7 gap-1 mb-8",children:[n.jsx(gt,{value:"vecka",className:"text-xs lg:text-sm font-medium rounded-lg transition-all data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm data-[state=inactive]:text-slate-600 hover:text-slate-900",children:"Vecka"}),n.jsx(gt,{value:"mnad",className:"text-xs lg:text-sm font-medium rounded-lg transition-all data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm data-[state=inactive]:text-slate-600 hover:text-slate-900",children:"Mnad"}),n.jsx(gt,{value:"projekt",className:"text-xs lg:text-sm font-medium rounded-lg transition-all data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm data-[state=inactive]:text-slate-600 hover:text-slate-900",children:"Projekt"}),n.jsx(gt,{value:"flex",className:"text-xs lg:text-sm font-medium rounded-lg transition-all data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm data-[state=inactive]:text-slate-600 hover:text-slate-900 hidden lg:inline-flex",children:"Flex"}),n.jsx(gt,{value:"ledighet",className:"text-xs lg:text-sm font-medium rounded-lg transition-all data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm data-[state=inactive]:text-slate-600 hover:text-slate-900 hidden lg:inline-flex",children:"Semester"}),n.jsx(gt,{value:"saldo",className:"text-xs lg:text-sm font-medium rounded-lg transition-all data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm data-[state=inactive]:text-slate-600 hover:text-slate-900 hidden lg:inline-flex",children:"Saldo"}),n.jsx(gt,{value:"justera",className:"text-xs lg:text-sm font-medium rounded-lg transition-all data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm data-[state=inactive]:text-slate-600 hover:text-slate-900",children:"Ledighet"})]}),n.jsx(Dt,{value:"vecka",children:n.jsx(qCe,{timeEntries:i,employee:a})}),n.jsx(Dt,{value:"mnad",children:n.jsx(zCe,{timeEntries:i,employee:a,userEmail:e==null?void 0:e.email})}),n.jsx(Dt,{value:"projekt",children:n.jsx(UCe,{timeEntries:i,userEmail:e==null?void 0:e.email})}),n.jsx(Dt,{value:"flex",children:n.jsx(j7,{userEmail:e==null?void 0:e.email,userName:e==null?void 0:e.full_name,employee:a})}),n.jsx(Dt,{value:"kalender",children:n.jsx(lG,{entries:i})}),n.jsx(Dt,{value:"ledighet",children:n.jsx(v7,{userEmail:e==null?void 0:e.email,userName:e==null?void 0:e.full_name,employee:a})}),n.jsx(Dt,{value:"saldo",children:n.jsx(y7,{employee:a,timeEntries:i})}),n.jsxs(Dt,{value:"justera",children:[n.jsxs("div",{className:"lg:hidden space-y-4",children:[n.jsx(j7,{userEmail:e==null?void 0:e.email,userName:e==null?void 0:e.full_name,employee:a}),n.jsx(v7,{userEmail:e==null?void 0:e.email,userName:e==null?void 0:e.full_name,employee:a}),n.jsx(y7,{employee:a,timeEntries:i})]}),n.jsx("div",{className:"hidden lg:block space-y-4",children:n.jsx(b7,{userEmail:e==null?void 0:e.email,userName:e==null?void 0:e.full_name,timeEntries:i})})]}),n.jsx(Dt,{value:"justera",className:"hidden",children:n.jsx(b7,{userEmail:e==null?void 0:e.email,userName:e==null?void 0:e.full_name,timeEntries:i})})]})]})})}const WCe={aktiv:"bg-emerald-100 text-emerald-700",service:"bg-amber-100 text-amber-700",skadad:"bg-rose-100 text-rose-700",avstlld:"bg-slate-100 text-slate-700"},w7=e=>{if(!e||e==="")return null;try{const t=bs(e);return _z(t)?Ce(t,"d MMM yyyy",{locale:ut}):null}catch{return null}};function KCe(){var M,I;const e=Mf(),[t,r]=P.useState(null),[s,a]=P.useState(!1),o=new URLSearchParams(window.location.search).get("id");P.useEffect(()=>{oe.auth.me().then(r)},[]);const{data:l,isLoading:c}=He({queryKey:["vehicle",o],queryFn:async()=>(await oe.entities.Vehicle.filter({id:o}))[0],enabled:!!o}),{data:d=[]}=He({queryKey:["fuelLogs",o],queryFn:()=>oe.entities.FuelLog.filter({vehicle_id:o},"-date",50),enabled:!!o}),{data:u=[]}=He({queryKey:["issues",o],queryFn:()=>oe.entities.MaintenanceIssue.filter({vehicle_id:o},"-created_date",50),enabled:!!o}),{data:h=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list()}),{data:g=[],isLoading:x}=He({queryKey:["vehicle-trips",o],queryFn:()=>oe.entities.DrivingJournalEntry.filter({vehicle_id:o},"-start_time",100),enabled:!!o});if(c||!l)return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-slate-900"})});const b=h.find(F=>F.user_email===l.assigned_driver),y=u.filter(F=>!["klar","avbruten"].includes(F.status)),v=d.slice(0,5),j=g.reduce((F,U)=>{const W=Ce(new Date(U.start_time),"yyyy-MM-dd");return F[W]||(F[W]=[]),F[W].push(U),F},{}),w=Object.keys(j).sort((F,U)=>new Date(U)-new Date(F)),N=async()=>{try{await oe.entities.Vehicle.delete(o),e(Pn("Vehicles"))}catch(F){console.error("Error deleting vehicle:",F),alert("Kunde inte ta bort fordonet")}},A=w7(l.next_service_date),C=w7(l.next_inspection_date);return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white",children:[n.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-6 pb-24",children:[n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx(wr,{to:Pn("Vehicles"),children:n.jsxs(ye,{variant:"ghost",size:"sm",className:"-ml-2",children:[n.jsx(xu,{className:"h-4 w-4 mr-2"}),"Tillbaka"]})}),(t==null?void 0:t.role)==="admin"&&n.jsxs("div",{className:"flex gap-2",children:[l.gps_device_id&&n.jsxs(ye,{variant:"outline",size:"sm",onClick:()=>e(Pn("VehicleTracking")+`?id=${o}`),children:[n.jsx(Ja,{className:"h-4 w-4 mr-2"}),"GPS"]}),n.jsxs(ye,{variant:"outline",size:"sm",onClick:()=>e(Pn("EditVehicle")+`?id=${o}`),children:[n.jsx(ql,{className:"h-4 w-4 mr-2"}),"Redigera"]}),n.jsx(ye,{variant:"outline",size:"sm",onClick:()=>a(!0),className:"text-rose-600 hover:text-rose-700 hover:bg-rose-50",children:n.jsx(bi,{className:"h-4 w-4"})})]})]}),n.jsxs(ce,{className:"border-0 shadow-md overflow-hidden mb-6",children:[l.image_url?n.jsx("div",{className:"h-48 overflow-hidden bg-slate-100",children:n.jsx("img",{src:l.image_url,alt:`${l.make} ${l.model}`,className:"w-full h-full object-cover"})}):n.jsx("div",{className:"h-48 bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center",children:n.jsx(us,{className:"h-20 w-20 text-slate-400"})}),n.jsxs(he,{className:"p-6",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:l.registration_number}),n.jsxs("p",{className:"text-slate-500 mt-1",children:[l.make," ",l.model," ",l.year&&`(${l.year})`]})]}),n.jsx(it,{className:`${WCe[l.status]} border-0`,children:l.status})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(gu,{className:"h-4 w-4 text-slate-400"}),n.jsx("span",{className:"text-slate-600",children:l.fuel_type})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(mX,{className:"h-4 w-4 text-slate-400"}),n.jsxs("span",{className:"text-slate-600",children:[(M=l.current_mileage)==null?void 0:M.toLocaleString()," km"]})]}),l.is_pool_vehicle&&n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(us,{className:"h-4 w-4 text-slate-400"}),n.jsx("span",{className:"text-slate-600",children:"Poolbil"})]}),b&&!l.is_pool_vehicle&&n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(bd,{className:"h-4 w-4 text-slate-400"}),n.jsx("span",{className:"text-slate-600 truncate",children:b.user_email})]})]})]})]}),(A||C)&&n.jsx(ce,{className:"border-0 shadow-sm mb-6 bg-amber-50 border-l-4 border-l-amber-500",children:n.jsxs(he,{className:"p-4",children:[n.jsxs("h3",{className:"text-sm font-semibold text-amber-900 mb-2 flex items-center gap-2",children:[n.jsx(_r,{className:"h-4 w-4"}),"Kommande"]}),n.jsxs("div",{className:"space-y-1 text-sm",children:[A&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-amber-700",children:"Nsta service"}),n.jsx("span",{className:"font-medium text-amber-900",children:A})]}),C&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-amber-700",children:"Besiktning"}),n.jsx("span",{className:"font-medium text-amber-900",children:C})]})]})]})})]}),n.jsxs(Ls,{defaultValue:"overview",className:"mt-6",children:[n.jsxs(As,{className:"w-full h-auto p-1 bg-white shadow-sm rounded-2xl grid grid-cols-4",children:[n.jsx(gt,{value:"overview",className:"rounded-xl data-[state=active]:shadow-sm",children:"versikt"}),n.jsx(gt,{value:"trips",className:"rounded-xl data-[state=active]:shadow-sm",children:"Resor"}),n.jsx(gt,{value:"fuel",className:"rounded-xl data-[state=active]:shadow-sm",children:"Tankningar"}),n.jsxs(gt,{value:"issues",className:"rounded-xl data-[state=active]:shadow-sm",children:["renden ",y.length>0&&`(${y.length})`]})]}),n.jsxs(Dt,{value:"overview",className:"mt-6 space-y-4",children:[n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-5",children:[n.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Fordonsinformation"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-slate-500",children:"Fordonstyp"}),n.jsx("span",{className:"font-medium text-slate-900",children:l.vehicle_type})]}),l.gps_device_id&&n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-slate-500",children:"GPS Device ID"}),n.jsx("span",{className:"font-medium text-slate-900",children:l.gps_device_id})]}),((I=l.fuel_cards)==null?void 0:I.length)>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("span",{className:"text-sm text-slate-500",children:"Tankkort"}),l.fuel_cards.map((F,U)=>n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"font-medium text-slate-900",children:F.provider}),n.jsx("span",{className:"text-slate-600",children:F.card_number})]}),F.pin_code&&n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"PIN: ****"})]},U))]})]})]})}),(l.insurance_document_url||l.lease_document_url||l.manual_url)&&n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-5",children:[n.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Dokument"}),n.jsxs("div",{className:"space-y-2",children:[l.insurance_document_url&&n.jsxs("a",{href:l.insurance_document_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:[n.jsx(Jr,{className:"h-4 w-4 text-slate-500"}),n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Frskring"})]}),l.lease_document_url&&n.jsxs("a",{href:l.lease_document_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:[n.jsx(Jr,{className:"h-4 w-4 text-slate-500"}),n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Leasingavtal"})]}),l.manual_url&&n.jsxs("a",{href:l.manual_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:[n.jsx(Jr,{className:"h-4 w-4 text-slate-500"}),n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Manual"})]})]})]})})]}),n.jsx(Dt,{value:"trips",className:"mt-6 space-y-4",children:x?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"py-12 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-slate-900 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Laddar resor..."})]})}):g.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"py-12 text-center",children:[n.jsx(Ja,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Inga resor registrerade"})]})}):w.map(F=>{const U=j[F],W=U.reduce((R,z)=>R+(z.distance_km||0),0),D=Il(new Date(F),new Date);return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between px-1",children:[n.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:D?"Idag":Ce(new Date(F),"EEEE d MMMM",{locale:ut})}),n.jsxs("span",{className:"text-xs text-slate-500",children:[U.length," resor  ",W.toFixed(1)," km"]})]}),U.map(R=>{var z,Z,se,J,Q;return n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-slate-900",children:[Ce(new Date(R.start_time),"HH:mm",{locale:ut})," - ",Ce(new Date(R.end_time),"HH:mm",{locale:ut})]}),R.purpose&&n.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:R.purpose})]}),n.jsx(it,{className:R.trip_type==="tjnst"?"bg-blue-100 text-blue-700":R.trip_type==="privat"?"bg-purple-100 text-purple-700":"bg-amber-100 text-amber-700",children:R.trip_type})]}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 mb-2",children:[n.jsxs("span",{children:[(z=R.distance_km)==null?void 0:z.toFixed(1)," km"]}),n.jsxs("span",{children:[Math.round(R.duration_minutes||0)," min"]}),R.driver_name&&n.jsx("span",{children:R.driver_name})]}),(((Z=R.start_location)==null?void 0:Z.address)||((se=R.end_location)==null?void 0:se.address))&&n.jsxs("div",{className:"text-xs text-slate-500 space-y-1",children:[((J=R.start_location)==null?void 0:J.address)&&n.jsxs("div",{className:"flex items-start gap-1",children:[n.jsx(Fn,{className:"h-3 w-3 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"line-clamp-1",children:R.start_location.address})]}),((Q=R.end_location)==null?void 0:Q.address)&&n.jsxs("div",{className:"flex items-start gap-1",children:[n.jsx(Fn,{className:"h-3 w-3 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"line-clamp-1",children:R.end_location.address})]})]})]})},R.id)})]},F)})}),n.jsx(Dt,{value:"fuel",className:"mt-6 space-y-3",children:v.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"py-12 text-center",children:[n.jsx(gu,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Inga tankningar registrerade"})]})}):v.map((F,U)=>{var W;return n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-5",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-900",children:Ce(new Date(F.date),"d MMM yyyy 'kl' HH:mm",{locale:ut})}),F.station&&n.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:F.station})]}),n.jsxs("p",{className:"text-lg font-semibold text-slate-900",children:[F.amount," kr"]})]}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[F.liters&&n.jsxs("span",{children:[F.liters," L"]}),F.price_per_liter&&n.jsxs("span",{children:[F.price_per_liter," kr/L"]}),n.jsxs("span",{children:[(W=F.mileage)==null?void 0:W.toLocaleString()," km"]})]})]})},F.id)})}),n.jsx(Dt,{value:"issues",className:"mt-6 space-y-3",children:u.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"py-12 text-center",children:[n.jsx(vu,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Inga renden"})]})}):u.map(F=>n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-5",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:F.title}),n.jsx(it,{variant:"outline",className:F.status==="klar"?"bg-emerald-100 text-emerald-700":F.status==="ny"?"bg-rose-100 text-rose-700":"bg-amber-100 text-amber-700",children:F.status})]}),n.jsx("p",{className:"text-sm text-slate-600 mb-3 line-clamp-2",children:F.description}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[n.jsx("span",{children:F.issue_type}),n.jsx("span",{children:Ce(new Date(F.created_date),"d MMM",{locale:ut})}),F.severity&&n.jsx(it,{variant:"outline",className:F.severity==="mste_stanna"?"border-rose-200 text-rose-600":F.severity==="br_ej_kras"?"border-amber-200 text-amber-600":"border-slate-200 text-slate-600",children:F.severity.replace(/_/g," ")})]})]})},F.id))})]})]}),n.jsx(ay,{open:s,onOpenChange:a,children:n.jsxs(yg,{children:[n.jsxs(bg,{children:[n.jsx(wg,{children:"Ta bort fordon"}),n.jsxs(_g,{children:["r du sker p att du vill ta bort ",l.registration_number,"? Denna tgrd kan inte ngras."]})]}),n.jsxs(jg,{children:[n.jsx(kg,{children:"Avbryt"}),n.jsx(Ng,{onClick:N,className:"bg-rose-600 hover:bg-rose-700",children:"Ta bort"})]})]})})]})}const _7={skada:{label:"Skada",icon:Kr,color:"bg-rose-100 text-rose-700"},tekniskt_fel:{label:"Tekniskt fel",icon:vu,color:"bg-orange-100 text-orange-700"},trafikincident:{label:"Trafikincident",icon:us,color:"bg-red-100 text-red-700"},inbrott_stld:{label:"Inbrott/Stld",icon:hj,color:"bg-purple-100 text-purple-700"},service:{label:"Service",icon:vu,color:"bg-blue-100 text-blue-700"},annat:{label:"Annat",icon:Kr,color:"bg-slate-100 text-slate-700"}},mS={ny:{label:"Ny",color:"bg-rose-100 text-rose-700"},pgr:{label:"Pgr",color:"bg-blue-100 text-blue-700"},vntar_verkstad:{label:"Vntar verkstad",color:"bg-amber-100 text-amber-700"},vntar_delar:{label:"Vntar delar",color:"bg-amber-100 text-amber-700"},vntar_attest:{label:"Vntar attest",color:"bg-purple-100 text-purple-700"},klar:{label:"Klar",color:"bg-emerald-100 text-emerald-700"},avbruten:{label:"Avbruten",color:"bg-slate-100 text-slate-700"}},N7={kan_kras:{label:"Kan kras",color:"border-emerald-200 text-emerald-700"},br_ej_kras:{label:"Br ej kras",color:"border-amber-200 text-amber-700"},mste_stanna:{label:"Mste stanna",color:"border-rose-200 text-rose-700"}};function GCe(){const e=Mf(),[t,r]=P.useState("incidents"),[s,a]=P.useState("all"),{data:i=[],isLoading:o}=He({queryKey:["allIssues"],queryFn:()=>oe.entities.MaintenanceIssue.list("-created_date",100)}),{data:l=[]}=He({queryKey:["vehicles"],queryFn:()=>oe.entities.Vehicle.list()}),c=i.filter(b=>b.issue_type!=="service"),d=i.filter(b=>b.issue_type==="service"),u=s==="all"?c:c.filter(b=>b.status===s),h=s==="all"?d:d.filter(b=>b.status===s),g=b=>l.find(y=>y.id===b),x=({issue:b,index:y})=>{var w,N,A,C,M,I;const v=g(b.vehicle_id),j=((w=_7[b.issue_type])==null?void 0:w.icon)||Kr;return n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:y*.05},children:n.jsx(ce,{className:"border-0 shadow-sm hover:shadow-md transition-all cursor-pointer",onClick:()=>e(Pn("VehicleDetails")+`?id=${b.vehicle_id}`),children:n.jsxs(he,{className:"p-5",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[n.jsx("div",{className:`h-10 w-10 rounded-xl flex items-center justify-center ${(N=_7[b.issue_type])==null?void 0:N.color}`,children:n.jsx(j,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-semibold text-slate-900 truncate",children:b.title}),n.jsx("p",{className:"text-sm text-slate-500",children:b.registration_number||(v==null?void 0:v.registration_number)||"Oknt fordon"})]})]}),n.jsx(it,{className:((A=mS[b.status])==null?void 0:A.color)||"bg-slate-100 text-slate-700",children:((C=mS[b.status])==null?void 0:C.label)||b.status})]}),n.jsx("p",{className:"text-sm text-slate-600 mb-3 line-clamp-2",children:b.description}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-slate-500",children:[b.incident_date&&n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Vt,{className:"h-3.5 w-3.5"}),n.jsx("span",{children:Ce(bs(b.incident_date),"d MMM HH:mm",{locale:ut})})]}),b.location&&n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Fn,{className:"h-3.5 w-3.5"}),n.jsx("span",{className:"truncate",children:b.location})]}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(bd,{className:"h-3.5 w-3.5"}),n.jsx("span",{className:"truncate",children:b.created_by})]}),b.severity&&n.jsx(it,{variant:"outline",className:`text-xs ${(M=N7[b.severity])==null?void 0:M.color}`,children:(I=N7[b.severity])==null?void 0:I.label})]}),b.workshop_date&&n.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-100 flex items-center gap-2 text-xs",children:[n.jsx(_r,{className:"h-3.5 w-3.5 text-blue-600"}),n.jsxs("span",{className:"text-slate-600",children:["Verkstad: ",Ce(new Date(b.workshop_date),"d MMM yyyy",{locale:ut})]}),b.workshop&&n.jsxs("span",{className:"text-slate-500",children:[" ",b.workshop]})]})]})})})};return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white",children:n.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-6 pb-24",children:[n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6",children:[n.jsx(wr,{to:Pn("Vehicles"),children:n.jsxs(ye,{variant:"ghost",size:"sm",className:"-ml-2 mb-4",children:[n.jsx(xu,{className:"h-4 w-4 mr-2"}),"Tillbaka"]})}),n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Rapporter"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Hndelser och service fr fordon"})]})}),n.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:["all","ny","pgr","vntar_verkstad","klar"].map(b=>{var y;return n.jsx("button",{onClick:()=>a(b),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${s===b?"bg-slate-900 text-white":"bg-white text-slate-600 hover:bg-slate-100"}`,children:b==="all"?"Alla":((y=mS[b])==null?void 0:y.label)||b},b)})})]}),n.jsxs(Ls,{value:t,onValueChange:r,className:"mt-6",children:[n.jsxs(As,{className:"w-full h-auto p-1 bg-white shadow-sm rounded-2xl grid grid-cols-2",children:[n.jsxs(gt,{value:"incidents",className:"rounded-xl data-[state=active]:shadow-sm",children:["Rapporterade fel (",u.length,")"]}),n.jsxs(gt,{value:"service",className:"rounded-xl data-[state=active]:shadow-sm",children:["Bokad service (",h.length,")"]})]}),n.jsx(Dt,{value:"incidents",className:"mt-6 space-y-3",children:n.jsx(_a,{mode:"popLayout",children:o?n.jsx("div",{className:"space-y-3",children:[1,2,3].map(b=>n.jsx("div",{className:"bg-white rounded-2xl h-32 animate-pulse"},b))}):u.length===0?n.jsxs(tt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-16",children:[n.jsx(Kr,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Inga rapporterade hndelser"})]}):u.map((b,y)=>n.jsx(x,{issue:b,index:y},b.id))})}),n.jsx(Dt,{value:"service",className:"mt-6 space-y-3",children:n.jsx(_a,{mode:"popLayout",children:o?n.jsx("div",{className:"space-y-3",children:[1,2,3].map(b=>n.jsx("div",{className:"bg-white rounded-2xl h-32 animate-pulse"},b))}):h.length===0?n.jsxs(tt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-16",children:[n.jsx(_r,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Ingen bokad service"})]}):h.map((b,y)=>n.jsx(x,{issue:b,index:y},b.id))})})]})]})})}function ZCe(){var F,U,W,D,R,z,Z,se,J;const t=new URLSearchParams(window.location.search).get("id"),[r,s]=P.useState("position"),[a,i]=P.useState(7),[o,l]=P.useState(!1),[c,d]=P.useState([]),{data:u,isLoading:h}=He({queryKey:["vehicle",t],queryFn:async()=>(await oe.entities.Vehicle.filter({id:t}))[0],enabled:!!t}),{data:g,isLoading:x,refetch:b}=He({queryKey:["gps-position",u==null?void 0:u.gps_device_id],queryFn:async()=>u!=null&&u.gps_device_id?(await oe.functions.invoke("gpsTracking",{action:"getLastPosition",params:{deviceIds:[u.gps_device_id]}})).data:null,enabled:!!(u!=null&&u.gps_device_id),refetchInterval:12e4,retry:3,retryDelay:Q=>Math.min(2e3*2**Q,3e4),staleTime:6e4}),{data:y,isLoading:v}=He({queryKey:["gps-trips",u==null?void 0:u.gps_device_id],queryFn:async()=>{if(!(u!=null&&u.gps_device_id))return null;const Q=Ce(new Date,"yyyy-MM-dd");return(await oe.functions.invoke("gpsTracking",{action:"getTrips",params:{deviceId:u.gps_device_id,begintime:`${Q} 00:00:00`,endtime:`${Q} 23:59:59`}})).data},enabled:!!(u!=null&&u.gps_device_id)&&r==="trips"}),{data:j,isLoading:w}=He({queryKey:["gps-month-trips",u==null?void 0:u.gps_device_id],queryFn:async()=>{if(!(u!=null&&u.gps_device_id))return null;const Q=new Date,H=new Date(Q.getFullYear(),Q.getMonth(),1),ne=new Date(Q.getFullYear(),Q.getMonth()+1,0);return(await oe.functions.invoke("gpsTracking",{action:"getTrips",params:{deviceId:u.gps_device_id,begintime:Ce(H,"yyyy-MM-dd")+" 00:00:00",endtime:Ce(ne,"yyyy-MM-dd")+" 23:59:59"}})).data},enabled:!!(u!=null&&u.gps_device_id)&&r==="month"}),{data:N,isLoading:A}=He({queryKey:["gps-history",u==null?void 0:u.gps_device_id,a],queryFn:async()=>{if(!(u!=null&&u.gps_device_id))return null;const Q=new Date,H=new Date(Q);return H.setDate(H.getDate()-a),(await oe.functions.invoke("gpsTracking",{action:"getTrips",params:{deviceId:u.gps_device_id,begintime:Ce(H,"yyyy-MM-dd")+" 00:00:00",endtime:Ce(Q,"yyyy-MM-dd")+" 23:59:59"}})).data},enabled:!!(u!=null&&u.gps_device_id)&&r==="history"}),{data:C,isLoading:M}=He({queryKey:["gps-fuel",u==null?void 0:u.gps_device_id],queryFn:async()=>{if(!(u!=null&&u.gps_device_id))return null;const Q=new Date,H=new Date(Q);return H.setDate(H.getDate()-30),(await oe.functions.invoke("gpsTracking",{action:"getFuelMileageReport",params:{deviceId:u.gps_device_id,startTime:Math.floor(H.getTime()/1e3),endTime:Math.floor(Q.getTime()/1e3)}})).data},enabled:!!(u!=null&&u.gps_device_id)&&r==="fuel"});if(h||!u)return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white flex items-center justify-center",children:n.jsx(Ot,{className:"h-12 w-12 animate-spin text-slate-400"})});if(!u.gps_device_id)return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white p-6",children:n.jsxs("div",{className:"max-w-2xl mx-auto",children:[n.jsx(wr,{to:Pn("VehicleDetails")+`?id=${t}`,children:n.jsxs(ye,{variant:"ghost",size:"sm",className:"mb-4 -ml-2",children:[n.jsx(xu,{className:"h-4 w-4 mr-2"}),"Tillbaka"]})}),n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(Fn,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Ingen GPS kopplad"}),n.jsx("p",{className:"text-slate-500 mb-6",children:"Detta fordon har inget GPS Device ID registrerat."}),n.jsx(wr,{to:Pn("EditVehicle")+`?id=${t}`,children:n.jsx(ye,{children:"Lgg till GPS Device ID"})})]})})]})});const I=(F=g==null?void 0:g.records)==null?void 0:F[0];return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pb-24",children:[n.jsx("div",{className:"max-w-2xl mx-auto px-4 py-6",children:n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[n.jsx(wr,{to:Pn("VehicleDetails")+`?id=${t}`,children:n.jsxs(ye,{variant:"ghost",size:"sm",className:"mb-4 -ml-2",children:[n.jsx(xu,{className:"h-4 w-4 mr-2"}),"Tillbaka"]})}),n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"GPS Sprning"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:u.registration_number})]}),n.jsxs(ye,{variant:"outline",size:"sm",onClick:()=>b(),children:[n.jsx(tu,{className:"h-4 w-4 mr-2"}),"Uppdatera"]})]}),n.jsxs(Ls,{value:r,onValueChange:s,children:[n.jsxs(As,{className:"w-full h-auto p-1 bg-white shadow-sm rounded-2xl grid grid-cols-2 gap-1",children:[n.jsx(gt,{value:"position",className:"rounded-xl data-[state=active]:shadow-sm text-xs",children:"Position"}),n.jsx(gt,{value:"trips",className:"rounded-xl data-[state=active]:shadow-sm text-xs",children:"Idag"}),n.jsx(gt,{value:"month",className:"rounded-xl data-[state=active]:shadow-sm text-xs",children:"Mnad"}),n.jsx(gt,{value:"history",className:"rounded-xl data-[state=active]:shadow-sm text-xs",children:"Historik"}),n.jsx(gt,{value:"fuel",className:"rounded-xl data-[state=active]:shadow-sm text-xs",children:"Brnsle"})]}),n.jsx(Dt,{value:"position",className:"mt-6 space-y-4",children:x?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-12 text-center",children:n.jsx(Ot,{className:"h-12 w-12 animate-spin text-slate-400 mx-auto"})})}):I?n.jsxs(n.Fragment,{children:[n.jsx(ce,{className:"border-0 shadow-sm overflow-hidden",children:n.jsx("div",{className:"h-80",children:n.jsxs(Pg,{center:[I.callat,I.callon],zoom:15,style:{height:"100%",width:"100%"},children:[n.jsx(Ag,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),n.jsx(Hm,{position:[I.callat,I.callon],children:n.jsx(Wm,{children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"font-semibold",children:u.registration_number}),n.jsx("p",{className:"text-xs text-slate-500",children:I.strstatus})]})})})]})})}),n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-5 space-y-4",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:"Aktuell position"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-100 flex items-center justify-center",children:n.jsx(gf,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Hastighet"}),n.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[Math.round(I.speed*3.6)," km/h"]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-purple-100 flex items-center justify-center",children:n.jsx(Ja,{className:"h-5 w-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Riktning"}),n.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[I.course,""]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-emerald-100 flex items-center justify-center",children:n.jsx(tu,{className:"h-5 w-5 text-emerald-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Status"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:I.moving?"I rrelse":"Stillastende"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-amber-100 flex items-center justify-center",children:n.jsx(Vt,{className:"h-5 w-5 text-amber-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Senast uppdaterad"}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:Ce(new Date(I.updatetime),"HH:mm")})]})]})]}),n.jsx("div",{className:"pt-3 border-t border-slate-100",children:n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-slate-500",children:"Total krstrcka"}),n.jsxs("span",{className:"font-semibold text-slate-900",children:[(I.totaldistance/1e3).toFixed(1)," km"]})]})})]})})]}):n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(Fn,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Ingen GPS-data tillgnglig"})]})})}),n.jsx(Dt,{value:"trips",className:"mt-6 space-y-3",children:v?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-12 text-center",children:n.jsx(Ot,{className:"h-12 w-12 animate-spin text-slate-400 mx-auto"})})}):((U=y==null?void 0:y.totaltrips)==null?void 0:U.length)>0?n.jsxs(n.Fragment,{children:[n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-5",children:n.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Total strcka"}),n.jsxs("p",{className:"text-lg font-bold text-slate-900",children:[(W=y.totalmileage)==null?void 0:W.toFixed(1)," km"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Total tid"}),n.jsxs("p",{className:"text-lg font-bold text-slate-900",children:[Math.round((y.totalduration||0)/60)," min"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Max hastighet"}),n.jsxs("p",{className:"text-lg font-bold text-slate-900",children:[Math.round(y.maxspeed||0)," km/h"]})]})]})})}),y.totaltrips.map((Q,H)=>{var ne,ue,ae,G,te;return n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-5",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-sm font-medium text-slate-900",children:[Ce(new Date(Q.begintime*1e3),"HH:mm")," - ",Ce(new Date(Q.endtime*1e3),"HH:mm")]}),n.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[Math.round(((Q==null?void 0:Q.endtime)-(Q==null?void 0:Q.begintime))/60)," minuter"]}),(((ne=Q.beginlocation)==null?void 0:ne.address)||((ue=Q.endlocation)==null?void 0:ue.address))&&n.jsxs("div",{className:"mt-2 space-y-1 text-xs",children:[((ae=Q.beginlocation)==null?void 0:ae.address)&&n.jsxs("div",{className:"flex items-start gap-1.5",children:[n.jsx(Fn,{className:"h-3 w-3 text-emerald-500 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"text-slate-600 line-clamp-1",children:Q.beginlocation.address})]}),((G=Q.endlocation)==null?void 0:G.address)&&n.jsxs("div",{className:"flex items-start gap-1.5",children:[n.jsx(Fn,{className:"h-3 w-3 text-rose-500 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"text-slate-600 line-clamp-1",children:Q.endlocation.address})]})]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("p",{className:"text-lg font-bold text-slate-900",children:[(te=Q.mileage)==null?void 0:te.toFixed(1)," km"]})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs text-slate-500",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(gf,{className:"h-3 w-3"}),n.jsxs("span",{children:["Snitt: ",Math.round((Q==null?void 0:Q.averagespeed)||0)," km/h"]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(tu,{className:"h-3 w-3"}),n.jsxs("span",{children:["Max: ",Math.round((Q==null?void 0:Q.maxspeed)||0)," km/h"]})]})]})]})},H)})]}):n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(Ja,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Inga resor registrerade idag"})]})})}),n.jsx(Dt,{value:"month",className:"mt-6 space-y-3",children:w?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-12 text-center",children:n.jsx(Ot,{className:"h-12 w-12 animate-spin text-slate-400 mx-auto"})})}):((D=j==null?void 0:j.totaltrips)==null?void 0:D.length)>0?n.jsxs(n.Fragment,{children:[n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-5",children:n.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Total strcka"}),n.jsxs("p",{className:"text-lg font-bold text-slate-900",children:[(R=j.totalmileage)==null?void 0:R.toFixed(1)," km"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Total tid"}),n.jsxs("p",{className:"text-lg font-bold text-slate-900",children:[Math.round((j.totalduration||0)/60/60)," tim"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Antal resor"}),n.jsx("p",{className:"text-lg font-bold text-slate-900",children:j.totaltrips.length})]})]})})}),j.totaltrips.slice(0,20).map((Q,H)=>{var ne,ue,ae,G,te;return n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-5",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-sm font-medium text-slate-900",children:[Ce(new Date(Q.begintime*1e3),"dd MMM, HH:mm",{locale:ut})," - ",Ce(new Date(Q.endtime*1e3),"HH:mm",{locale:ut})]}),n.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[Math.round(((Q==null?void 0:Q.endtime)-(Q==null?void 0:Q.begintime))/60)," minuter"]}),(((ne=Q.beginlocation)==null?void 0:ne.address)||((ue=Q.endlocation)==null?void 0:ue.address))&&n.jsxs("div",{className:"mt-2 space-y-1 text-xs",children:[((ae=Q.beginlocation)==null?void 0:ae.address)&&n.jsxs("div",{className:"flex items-start gap-1.5",children:[n.jsx(Fn,{className:"h-3 w-3 text-emerald-500 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"text-slate-600 line-clamp-1",children:Q.beginlocation.address})]}),((G=Q.endlocation)==null?void 0:G.address)&&n.jsxs("div",{className:"flex items-start gap-1.5",children:[n.jsx(Fn,{className:"h-3 w-3 text-rose-500 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"text-slate-600 line-clamp-1",children:Q.endlocation.address})]})]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("p",{className:"text-lg font-bold text-slate-900",children:[(te=Q.mileage)==null?void 0:te.toFixed(1)," km"]})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs text-slate-500",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(gf,{className:"h-3 w-3"}),n.jsxs("span",{children:["Snitt: ",Math.round((Q==null?void 0:Q.averagespeed)||0)," km/h"]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(tu,{className:"h-3 w-3"}),n.jsxs("span",{children:["Max: ",Math.round((Q==null?void 0:Q.maxspeed)||0)," km/h"]})]})]})]})},H)}),j.totaltrips.length>20&&n.jsx(ce,{className:"border-0 shadow-sm bg-slate-50",children:n.jsxs(he,{className:"p-4 text-center text-sm text-slate-500",children:["Visar 20 av ",j.totaltrips.length," resor denna mnad"]})})]}):n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(_r,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Inga resor registrerade denna mnad"})]})})}),n.jsxs(Dt,{value:"history",className:"mt-6 space-y-3",children:[n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-4",children:[n.jsx("p",{className:"text-sm font-medium text-slate-700 mb-3",children:"Visa historik fr:"}),n.jsx("div",{className:"grid grid-cols-4 gap-2",children:[7,14,30,90].map(Q=>n.jsxs("button",{onClick:()=>i(Q),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${a===Q?"bg-slate-900 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[Q,"d"]},Q))})]})}),A?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-12 text-center",children:n.jsx(Ot,{className:"h-12 w-12 animate-spin text-slate-400 mx-auto"})})}):((z=N==null?void 0:N.totaltrips)==null?void 0:z.length)>0?n.jsxs(n.Fragment,{children:[n.jsx(ce,{className:"border-0 shadow-sm bg-gradient-to-br from-blue-50 to-indigo-50",children:n.jsx(he,{className:"p-5",children:n.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Total strcka"}),n.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[(Z=N.totalmileage)==null?void 0:Z.toFixed(0)," km"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Total tid"}),n.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[Math.round((N.totalduration||0)/60/60)," tim"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Antal resor"}),n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:N.totaltrips.length})]})]})})}),Object.entries(N.totaltrips.reduce((Q,H)=>{const ne=Ce(new Date(H.starttime),"yyyy-MM-dd");return Q[ne]||(Q[ne]={distance:0,time:0,trips:0,tripsList:[]}),Q[ne].distance+=(H==null?void 0:H.mileage)||0,Q[ne].time+=(H==null?void 0:H.endtime)-(H==null?void 0:H.begintime)||0,Q[ne].trips+=1,Q[ne].tripsList.push(H),Q},{})).sort(([Q],[H])=>new Date(H)-new Date(Q)).map(([Q,H])=>n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-5",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-slate-200",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-base font-bold text-slate-900",children:Ce(new Date(Q),"EEEE d MMMM",{locale:ut})}),n.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[H.trips," ",H.trips===1?"resa":"resor","  ",H.distance.toFixed(1)," km  ",Math.round(H.time/60)," min"]})]}),n.jsxs(ye,{size:"sm",onClick:()=>{d(H.tripsList),l(!0)},className:"bg-emerald-600 hover:bg-emerald-700",children:[n.jsx(Jr,{className:"h-3 w-3 mr-1"}),"Registrera alla"]})]}),n.jsx("div",{className:"space-y-2",children:H.tripsList.map((ne,ue)=>{var ae,G,te,fe,be;return n.jsx("div",{className:"p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[Ce(new Date(ne.begintime*1e3),"HH:mm",{locale:ut})," - ",Ce(new Date(ne.endtime*1e3),"HH:mm",{locale:ut})]}),n.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-blue-100 text-blue-700 font-medium",children:[Math.round(((ne==null?void 0:ne.endtime)-(ne==null?void 0:ne.begintime))/60)," min"]})]}),(((ae=ne.beginlocation)==null?void 0:ae.address)||((G=ne.endlocation)==null?void 0:G.address))&&n.jsxs("div",{className:"mb-2 space-y-1 text-xs",children:[((te=ne.beginlocation)==null?void 0:te.address)&&n.jsxs("div",{className:"flex items-start gap-1.5",children:[n.jsx(Fn,{className:"h-3 w-3 text-emerald-500 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"text-slate-600 line-clamp-1",children:ne.beginlocation.address})]}),((fe=ne.endlocation)==null?void 0:fe.address)&&n.jsxs("div",{className:"flex items-start gap-1.5",children:[n.jsx(Fn,{className:"h-3 w-3 text-rose-500 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"text-slate-600 line-clamp-1",children:ne.endlocation.address})]})]}),n.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Ja,{className:"h-3 w-3"}),(be=ne.mileage)==null?void 0:be.toFixed(1)," km"]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(gf,{className:"h-3 w-3"}),"Snitt: ",Math.round((ne==null?void 0:ne.averagespeed)||0)," km/h"]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(tu,{className:"h-3 w-3"}),"Max: ",Math.round((ne==null?void 0:ne.maxspeed)||0)," km/h"]})]})]}),n.jsxs(ye,{size:"sm",variant:"outline",onClick:()=>{d([ne]),l(!0)},className:"h-8 text-xs ml-3",children:[n.jsx(Jr,{className:"h-3 w-3 mr-1"}),"Registrera"]})]})},ue)})})]})},Q))]}):n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(_r,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500 mb-2",children:"Inga resor registrerade fr denna period"}),n.jsx("p",{className:"text-xs text-slate-400",children:"Frsk vlja en lngre tidsperiod eller kontrollera att fordonet har GPS-data"})]})})]}),n.jsx(Dt,{value:"fuel",className:"mt-6 space-y-3",children:M?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-12 text-center",children:n.jsx(Ot,{className:"h-12 w-12 animate-spin text-slate-400 mx-auto"})})}):((se=C==null?void 0:C.records)==null?void 0:se.length)>0?n.jsxs(n.Fragment,{children:[n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-5",children:[n.jsxs("h3",{className:"text-sm font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[n.jsx(ta,{className:"h-4 w-4"}),"Brnslefrbrukning senaste 30 dagarna"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Total krstrcka"}),n.jsxs("p",{className:"text-lg font-bold text-slate-900",children:[(C.totalmileage/1e3).toFixed(0)," km"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Total brnsle"}),n.jsxs("p",{className:"text-lg font-bold text-slate-900",children:[((J=C.totalfuel)==null?void 0:J.toFixed(1))||"0"," L"]})]})]})]})}),C.records.map((Q,H)=>{var ne;return n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-5",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900",children:Ce(new Date(Q.time*1e3),"dd MMM yyyy",{locale:ut})}),n.jsxs("div",{className:"flex items-center gap-1 text-emerald-600",children:[n.jsx(gu,{className:"h-4 w-4"}),n.jsxs("span",{className:"font-semibold",children:[((ne=Q.fuel)==null?void 0:ne.toFixed(1))||"0"," L"]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs text-slate-600",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Ja,{className:"h-3 w-3"}),n.jsxs("span",{children:[(Q.mileage/1e3).toFixed(1)," km"]})]}),Q.fuel&&Q.mileage&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(tu,{className:"h-3 w-3"}),n.jsxs("span",{children:[(Q.fuel/(Q.mileage/1e3)*100).toFixed(1)," L/100km"]})]})]})]})},H)})]}):n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(gu,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Ingen brnsledata tillgnglig"}),n.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Data hmtas frn GPS-systemet och kan ta tid att registrera"})]})})})]})]})}),n.jsx(XK,{open:o,onClose:()=>{l(!1),d([])},trips:c,vehicleId:t,vehicleReg:u==null?void 0:u.registration_number,onSuccess:()=>{}})]})}const YCe={bensin:"bg-amber-100 text-amber-700",diesel:"bg-slate-100 text-slate-700",el:"bg-green-100 text-green-700",hybrid:"bg-blue-100 text-blue-700","plugin-hybrid":"bg-cyan-100 text-cyan-700",annat:"bg-slate-100 text-slate-700"},XCe={aktiv:"bg-emerald-100 text-emerald-700 border-emerald-200",service:"bg-amber-100 text-amber-700 border-amber-200",skadad:"bg-rose-100 text-rose-700 border-rose-200",avstlld:"bg-slate-100 text-slate-700 border-slate-200"},QCe={aktiv:"Aktiv",service:"I service",skadad:"Skadad",avstlld:"Avstlld"};function JCe({vehicle:e,onClick:t,index:r=0,employees:s=[],gpsStatus:a=null}){var c;const i=s.find(d=>d.user_email===e.assigned_driver),l=(()=>{const d=[];if(e.next_inspection_date){const u=jh(new Date(e.next_inspection_date),new Date);u<=30&&d.push({type:"inspection",days:u,urgent:u<=7})}if(e.next_service_date){const u=jh(new Date(e.next_service_date),new Date);u<=30&&d.push({type:"service",days:u,urgent:u<=7})}return d[0]})();return n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:r*.05},children:n.jsx(ce,{className:"border-0 shadow-sm hover:shadow-md transition-all duration-300 cursor-pointer group overflow-hidden",onClick:t,children:n.jsxs("div",{className:"flex",children:[e.image_url?n.jsx("div",{className:"w-32 h-32 flex-shrink-0 overflow-hidden bg-slate-100",children:n.jsx("img",{src:e.image_url,alt:`${e.make} ${e.model}`,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}):n.jsx("div",{className:"w-32 h-32 flex-shrink-0 bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center",children:n.jsx(us,{className:"h-12 w-12 text-slate-400"})}),n.jsxs(he,{className:"py-4 px-4 flex-1",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("h3",{className:"font-semibold text-slate-900 truncate group-hover:text-slate-700 transition-colors",children:e.registration_number}),n.jsxs("p",{className:"text-sm text-slate-500 truncate",children:[e.make," ",e.model," ",e.year?`(${e.year})`:""]})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.gps_device_id&&n.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs ${a!=null&&a.online?"bg-emerald-50 text-emerald-700":"bg-slate-100 text-slate-500"}`,children:[n.jsx(r3,{className:`h-3 w-3 ${a!=null&&a.online?"animate-pulse":""}`}),n.jsx("span",{children:a!=null&&a.online?"Online":"Offline"})]}),n.jsx(it,{variant:"outline",className:`${XCe[e.status]} text-xs`,children:QCe[e.status]})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-slate-500",children:[n.jsx("div",{className:"flex items-center gap-1",children:n.jsx(it,{className:`${YCe[e.fuel_type]} border-0 text-xs`,children:e.fuel_type})}),e.is_pool_vehicle&&n.jsx(it,{variant:"outline",className:"text-xs",children:"Poolbil"}),e.current_mileage&&n.jsx("span",{className:"flex items-center gap-1",children:n.jsxs("span",{children:[(c=e.current_mileage)==null?void 0:c.toLocaleString()," km"]})})]}),i&&!e.is_pool_vehicle&&n.jsxs("div",{className:"flex items-center gap-1.5 mt-2 text-xs text-slate-500",children:[n.jsx(bd,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate",children:i.user_email})]}),l&&n.jsxs("div",{className:`flex items-center gap-1.5 mt-2 text-xs ${l.urgent?"text-rose-600":"text-amber-600"}`,children:[n.jsx(Kr,{className:"h-3 w-3"}),n.jsxs("span",{children:[l.type==="inspection"?"Besiktning":"Service"," om ",l.days," ",l.days===1?"dag":"dagar"]})]})]})]})})})}const eTe=[{id:"fuel",label:"Tankning",icon:gu,color:"bg-blue-500 hover:bg-blue-600"},{id:"incident",label:"Rapportera hndelse",icon:ja,color:"bg-rose-500 hover:bg-rose-600"},{id:"service",label:"Boka service",icon:vu,color:"bg-amber-500 hover:bg-amber-600"}];function tTe({onAction:e}){return n.jsx("div",{className:"grid grid-cols-3 gap-3",children:eTe.map((t,r)=>{const s=t.icon;return n.jsx(tt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:r*.05},children:n.jsxs(ye,{onClick:()=>e(t.id),className:`w-full h-20 ${t.color} text-white border-0 shadow-md hover:shadow-lg transition-all flex flex-col items-center justify-center gap-1 rounded-2xl px-2`,children:[n.jsx(s,{className:"h-5 w-5 flex-shrink-0"}),n.jsx("span",{className:"text-xs font-medium line-clamp-2 text-center leading-tight",children:t.label})]})},t.id)})})}function nTe({open:e,onClose:t,onSuccess:r,vehicles:s,selectedVehicle:a,userEmail:i}){const[o,l]=P.useState(!1),[c,d]=P.useState(!1),[u,h]=P.useState({vehicle_id:(a==null?void 0:a.id)||"",date:new Date().toISOString().slice(0,16),liters:"",amount:"",mileage:(a==null?void 0:a.current_mileage)||"",fuel_type:(a==null?void 0:a.fuel_type)||"",station:"",receipt_url:"",notes:""}),g=async b=>{const y=b.target.files[0];if(y){d(!0);try{const{file_url:v}=await oe.integrations.Core.UploadFile({file:y});h(j=>({...j,receipt_url:v}))}catch(v){console.error("Upload failed:",v)}d(!1)}},x=async b=>{b.preventDefault(),l(!0);try{const y=s.find(j=>j.id===u.vehicle_id),v=u.liters?(parseFloat(u.amount)/parseFloat(u.liters)).toFixed(2):null;await oe.entities.FuelLog.create({...u,registration_number:y==null?void 0:y.registration_number,price_per_liter:v,driver_email:i,liters:u.liters?parseFloat(u.liters):null,amount:parseFloat(u.amount),mileage:parseInt(u.mileage)}),y&&u.mileage&&await oe.entities.Vehicle.update(y.id,{current_mileage:parseInt(u.mileage)}),r(),t(),h({vehicle_id:"",date:new Date().toISOString().slice(0,16),liters:"",amount:"",mileage:"",fuel_type:"",station:"",receipt_url:"",notes:""})}catch(y){console.error("Error creating fuel log:",y)}l(!1)};return n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"sm:max-w-md max-h-[90vh] overflow-y-auto",children:[n.jsx(er,{children:n.jsx(tr,{className:"text-xl font-semibold",children:" Registrera tankning"})}),n.jsxs("form",{onSubmit:x,className:"space-y-4 mt-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Fordon *"}),n.jsxs(Nt,{value:u.vehicle_id,onValueChange:b=>{const y=s.find(v=>v.id===b);h(v=>({...v,vehicle_id:b,mileage:(y==null?void 0:y.current_mileage)||"",fuel_type:(y==null?void 0:y.fuel_type)||""}))},required:!0,children:[n.jsx(jt,{className:"h-11",children:n.jsx(kt,{placeholder:"Vlj fordon"})}),n.jsx(wt,{children:s.filter(b=>b.status==="aktiv").map(b=>n.jsxs(Ne,{value:b.id,children:[b.registration_number," - ",b.make," ",b.model]},b.id))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"date",children:"Datum & tid *"}),n.jsx(De,{id:"date",type:"datetime-local",value:u.date,onChange:b=>h(y=>({...y,date:b.target.value})),className:"h-11",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"mileage",children:"Mtarstllning (km) *"}),n.jsx(De,{id:"mileage",type:"number",value:u.mileage,onChange:b=>h(y=>({...y,mileage:b.target.value})),placeholder:"12345",className:"h-11",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"amount",children:"Belopp (kr) *"}),n.jsx(De,{id:"amount",type:"number",step:"0.01",value:u.amount,onChange:b=>h(y=>({...y,amount:b.target.value})),placeholder:"650",className:"h-11",required:!0})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"liters",children:"Liter (valfritt)"}),n.jsx(De,{id:"liters",type:"number",step:"0.01",value:u.liters,onChange:b=>h(y=>({...y,liters:b.target.value})),placeholder:"45.5",className:"h-11"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"station",children:"Station"}),n.jsx(De,{id:"station",value:u.station,onChange:b=>h(y=>({...y,station:b.target.value})),placeholder:"Circle K",className:"h-11"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Kvitto (foto)"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"file",accept:"image/*",onChange:g,className:"hidden",id:"receipt-upload"}),u.receipt_url?n.jsxs("div",{className:"relative h-32 rounded-lg border overflow-hidden bg-slate-50",children:[n.jsx("img",{src:u.receipt_url,alt:"",className:"h-full w-full object-cover"}),n.jsx(ye,{type:"button",variant:"ghost",size:"icon",className:"absolute top-2 right-2 h-8 w-8 bg-white/80 hover:bg-white rounded-full",onClick:()=>h(b=>({...b,receipt_url:""})),children:n.jsx(Ra,{className:"h-4 w-4"})})]}):n.jsx("label",{htmlFor:"receipt-upload",className:"flex items-center justify-center h-20 border-2 border-dashed rounded-lg cursor-pointer hover:border-slate-400 transition-colors",children:c?n.jsx(Ot,{className:"w-5 h-5 animate-spin text-slate-400"}):n.jsxs("div",{className:"text-center",children:[n.jsx(W7,{className:"w-5 h-5 text-slate-400 mx-auto mb-1"}),n.jsx("span",{className:"text-xs text-slate-500",children:"Ta foto av kvitto"})]})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"notes",children:"Notering"}),n.jsx(Zn,{id:"notes",value:u.notes,onChange:b=>h(y=>({...y,notes:b.target.value})),placeholder:"Valfri kommentar...",className:"min-h-[60px] resize-none"})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:t,children:"Avbryt"}),n.jsx(ye,{type:"submit",disabled:o,className:"min-w-[100px]",children:o?n.jsx(Ot,{className:"w-4 h-4 animate-spin"}):"Spara"})]})]})]})})}var qC="Radio",[rTe,MG]=ho(qC),[sTe,aTe]=rTe(qC),LG=P.forwardRef((e,t)=>{const{__scopeRadio:r,name:s,checked:a=!1,required:i,disabled:o,value:l="on",onCheck:c,form:d,...u}=e,[h,g]=P.useState(null),x=Vn(t,v=>g(v)),b=P.useRef(!1),y=h?d||!!h.closest("form"):!0;return n.jsxs(sTe,{scope:r,checked:a,disabled:o,children:[n.jsx(cn.button,{type:"button",role:"radio","aria-checked":a,"data-state":FG(a),"data-disabled":o?"":void 0,disabled:o,value:l,...u,ref:x,onClick:fn(e.onClick,v=>{a||c==null||c(),y&&(b.current=v.isPropagationStopped(),b.current||v.stopPropagation())})}),y&&n.jsx(RG,{control:h,bubbles:!b.current,name:s,value:l,checked:a,required:i,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});LG.displayName=qC;var DG="RadioIndicator",IG=P.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:s,...a}=e,i=aTe(DG,r);return n.jsx(Sc,{present:s||i.checked,children:n.jsx(cn.span,{"data-state":FG(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t})})});IG.displayName=DG;var iTe="RadioBubbleInput",RG=P.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:s=!0,...a},i)=>{const o=P.useRef(null),l=Vn(o,i),c=Kv(r),d=Wv(t);return P.useEffect(()=>{const u=o.current;if(!u)return;const h=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&x){const b=new Event("click",{bubbles:s});x.call(u,r),u.dispatchEvent(b)}},[c,r,s]),n.jsx(cn.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});RG.displayName=iTe;function FG(e){return e?"checked":"unchecked"}var oTe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Lw="RadioGroup",[lTe]=ho(Lw,[Oj,MG]),$G=Oj(),BG=MG(),[cTe,dTe]=lTe(Lw),qG=P.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:s,defaultValue:a,value:i,required:o=!1,disabled:l=!1,orientation:c,dir:d,loop:u=!0,onValueChange:h,...g}=e,x=$G(r),b=fg(d),[y,v]=bu({prop:i,defaultProp:a??null,onChange:h,caller:Lw});return n.jsx(cTe,{scope:r,name:s,required:o,disabled:l,value:y,onValueChange:v,children:n.jsx(Zq,{asChild:!0,...x,orientation:c,dir:b,loop:u,children:n.jsx(cn.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:b,...g,ref:t})})})});qG.displayName=Lw;var zG="RadioGroupItem",VG=P.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:s,...a}=e,i=dTe(zG,r),o=i.disabled||s,l=$G(r),c=BG(r),d=P.useRef(null),u=Vn(t,d),h=i.value===a.value,g=P.useRef(!1);return P.useEffect(()=>{const x=y=>{oTe.includes(y.key)&&(g.current=!0)},b=()=>g.current=!1;return document.addEventListener("keydown",x),document.addEventListener("keyup",b),()=>{document.removeEventListener("keydown",x),document.removeEventListener("keyup",b)}},[]),n.jsx(Yq,{asChild:!0,...l,focusable:!o,active:h,children:n.jsx(LG,{disabled:o,required:i.required,checked:h,...c,...a,name:i.name,ref:u,onCheck:()=>i.onValueChange(a.value),onKeyDown:fn(x=>{x.key==="Enter"&&x.preventDefault()}),onFocus:fn(a.onFocus,()=>{var x;g.current&&((x=d.current)==null||x.click())})})})});VG.displayName=zG;var uTe="RadioGroupIndicator",UG=P.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...s}=e,a=BG(r);return n.jsx(IG,{...a,...s,ref:t})});UG.displayName=uTe;var HG=qG,WG=VG,hTe=UG;const fTe=P.forwardRef(({className:e,...t},r)=>n.jsx(HG,{className:Yt("grid gap-2",e),...t,ref:r}));fTe.displayName=HG.displayName;const mTe=P.forwardRef(({className:e,...t},r)=>n.jsx(WG,{ref:r,className:Yt("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:n.jsx(hTe,{className:"flex items-center justify-center",children:n.jsx(zb,{className:"h-3.5 w-3.5 fill-primary"})})}));mTe.displayName=WG.displayName;const pTe=[{value:"skada",label:"Skada",icon:Kr,color:"text-rose-600"},{value:"tekniskt_fel",label:"Tekniskt fel",icon:vu,color:"text-orange-600"},{value:"trafikincident",label:"Trafikincident",icon:us,color:"text-red-600"},{value:"inbrott_stld",label:"Inbrott/Stld",icon:hj,color:"text-purple-600"},{value:"annat",label:"Annat",icon:zv,color:"text-slate-600"}];function xTe({open:e,onClose:t,onSuccess:r,vehicles:s,selectedVehicle:a,userEmail:i}){const[o,l]=P.useState({vehicle_id:(a==null?void 0:a.id)||"",registration_number:(a==null?void 0:a.registration_number)||"",issue_type:"tekniskt_fel",severity:"kan_kras",title:"",description:"",incident_date:new Date().toISOString().slice(0,16),location:"",mileage:"",images:[]}),[c,d]=P.useState(!1),u=$n(),h=Xt({mutationFn:async v=>{var A;const j=await oe.entities.MaintenanceIssue.create(v),w=s.find(C=>C.id===v.vehicle_id),N=(w==null?void 0:w.gps_device_id)||(w==null?void 0:w.registration_number)||"Fordon";return await oe.entities.NewsPost.create({title:` Fel rapporterat: ${v.title}`,content:`**Fordon:** ${N}
**Typ:** ${v.issue_type}
**Allvarlighetsgrad:** ${v.severity}

${v.description}`,category:"allmnt",is_important:v.severity==="mste_stanna",image_url:((A=v.images)==null?void 0:A[0])||null}),j},onSuccess:()=>{u.invalidateQueries(["issues"]),u.invalidateQueries(["myIssues"]),u.invalidateQueries(["vehicles"]),u.invalidateQueries(["news"]),r(),g()}}),g=()=>{l({vehicle_id:(a==null?void 0:a.id)||"",registration_number:(a==null?void 0:a.registration_number)||"",issue_type:"tekniskt_fel",severity:"kan_kras",title:"",description:"",incident_date:new Date().toISOString().slice(0,16),location:"",mileage:"",images:[]})},x=async v=>{const j=Array.from(v.target.files);if(j.length!==0){d(!0);try{const w=j.map(C=>oe.integrations.Core.UploadFile({file:C})),A=(await Promise.all(w)).map(C=>C.file_url);l(C=>({...C,images:[...C.images,...A]}))}catch(w){console.error("Error uploading images:",w),alert("Kunde inte ladda upp bilder")}d(!1)}},b=v=>{l(j=>({...j,images:j.images.filter((w,N)=>N!==v)}))},y=v=>{v.preventDefault();const j=s.find(w=>w.id===o.vehicle_id);h.mutate({...o,registration_number:j==null?void 0:j.registration_number,mileage:o.mileage?Number(o.mileage):void 0,priority:o.issue_type==="trafikincident"||o.issue_type==="inbrott_stld"?"hg":"normal"})};return n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(er,{children:n.jsx(tr,{children:"Rapportera hndelse"})}),n.jsxs("form",{onSubmit:y,className:"space-y-4 mt-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"vehicle",children:"Fordon *"}),n.jsxs(Nt,{value:o.vehicle_id,onValueChange:v=>{const j=s.find(w=>w.id===v);l(w=>({...w,vehicle_id:v,registration_number:(j==null?void 0:j.registration_number)||"",mileage:(j==null?void 0:j.current_mileage)||""}))},children:[n.jsx(jt,{children:n.jsx(kt,{placeholder:"Vlj fordon"})}),n.jsx(wt,{children:s.map(v=>{const w=v.gps_device_id&&v.gps_device_id!==""?`${v.gps_device_id} - ${v.make||""} ${v.model||""}`.trim():`${v.registration_number} - ${v.make||""} ${v.model||""}`.trim();return n.jsx(Ne,{value:v.id,children:w},v.id)})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Typ av hndelse *"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:pTe.map(v=>{const j=v.icon,w=o.issue_type===v.value;return n.jsxs("button",{type:"button",onClick:()=>l(N=>({...N,issue_type:v.value})),className:`flex items-center gap-3 p-3 rounded-xl border-2 transition-all ${w?"border-slate-900 bg-slate-50":"border-slate-200 hover:border-slate-300"}`,children:[n.jsx(j,{className:`h-5 w-5 ${w?"text-slate-900":v.color}`}),n.jsx("span",{className:`text-sm font-medium ${w?"text-slate-900":"text-slate-600"}`,children:v.label})]},v.value)})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"incident_date",children:"Datum och tid *"}),n.jsx(De,{id:"incident_date",type:"datetime-local",value:o.incident_date,onChange:v=>l(j=>({...j,incident_date:v.target.value})),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"mileage",children:"Mtarstllning (km)"}),n.jsx(De,{id:"mileage",type:"number",value:o.mileage,onChange:v=>l(j=>({...j,mileage:v.target.value})),placeholder:"0"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"location",children:"Plats *"}),n.jsx(De,{id:"location",value:o.location,onChange:v=>l(j=>({...j,location:v.target.value})),placeholder:"Var intrffade hndelsen?",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"severity",children:"Allvarlighetsgrad *"}),n.jsxs(Nt,{value:o.severity,onValueChange:v=>l(j=>({...j,severity:v})),children:[n.jsx(jt,{children:n.jsx(kt,{})}),n.jsxs(wt,{children:[n.jsx(Ne,{value:"kan_kras",children:"Kan kras"}),n.jsx(Ne,{value:"br_ej_kras",children:"Br ej kras"}),n.jsx(Ne,{value:"mste_stanna",children:"Mste stanna"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"title",children:"Rubrik *"}),n.jsx(De,{id:"title",value:o.title,onChange:v=>l(j=>({...j,title:v.target.value})),placeholder:"Kort beskrivning av hndelsen",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"description",children:"Detaljerad beskrivning *"}),n.jsx(Zn,{id:"description",value:o.description,onChange:v=>l(j=>({...j,description:v.target.value})),placeholder:"Beskriv hndelsen i detalj...",className:"min-h-[100px]",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Bilder"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center justify-center gap-2 p-4 border-2 border-dashed border-slate-200 rounded-xl cursor-pointer hover:border-slate-300 transition-colors",children:[n.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:x,className:"hidden",disabled:c}),c?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-5 w-5 animate-spin text-slate-400"}),n.jsx("span",{className:"text-sm text-slate-500",children:"Laddar upp..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(lu,{className:"h-5 w-5 text-slate-400"}),n.jsx("span",{className:"text-sm text-slate-600",children:"Lgg till bilder"})]})]}),o.images.length>0&&n.jsx("div",{className:"grid grid-cols-3 gap-2",children:o.images.map((v,j)=>n.jsxs("div",{className:"relative group",children:[n.jsx("img",{src:v,alt:`Bild ${j+1}`,className:"w-full h-24 object-cover rounded-lg"}),n.jsx("button",{type:"button",onClick:()=>b(j),className:"absolute top-1 right-1 p-1 bg-rose-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx(Ra,{className:"h-3 w-3"})})]},j))})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Avbryt"}),n.jsx(ye,{type:"submit",disabled:h.isPending||!o.vehicle_id||!o.title||!o.description,className:"flex-1",children:h.isPending?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-4 w-4 mr-2 animate-spin"}),"Rapporterar..."]}):"Rapportera"})]})]})]})})}function gTe({open:e,onClose:t,onSuccess:r,vehicles:s,selectedVehicle:a,userEmail:i}){const[o,l]=P.useState(!1),[c,d]=P.useState(!1),[u,h]=P.useState({vehicle_id:(a==null?void 0:a.id)||"",title:"",description:"",workshop:"",workshop_date:"",images:[]}),g=async y=>{const v=y.target.files[0];if(v){d(!0);try{const{file_url:j}=await oe.integrations.Core.UploadFile({file:v});h(w=>({...w,images:[...w.images,j]}))}catch(j){console.error("Error uploading image:",j),alert("Kunde inte ladda upp bilden")}d(!1)}},x=y=>{h(v=>({...v,images:v.images.filter((j,w)=>w!==y)}))},b=async y=>{var v;y.preventDefault(),l(!0);try{const j=s.find(C=>C.id===u.vehicle_id);await oe.entities.MaintenanceIssue.create({vehicle_id:u.vehicle_id,registration_number:j==null?void 0:j.registration_number,issue_type:"service",severity:"kan_kras",title:u.title,description:u.description,workshop:u.workshop,workshop_date:u.workshop_date||void 0,images:u.images,status:"vntar_verkstad",priority:"normal",history:[{timestamp:new Date().toISOString(),user:i,action:"Skapad",comment:"Servicerende skapat"}]});const w=(j==null?void 0:j.gps_device_id)||(j==null?void 0:j.registration_number)||"Fordon",N=u.workshop_date?`
**Datum:** ${u.workshop_date}`:"",A=u.workshop?`
**Verkstad:** ${u.workshop}`:"";await oe.entities.NewsPost.create({title:` Service bokad: ${u.title}`,content:`**Fordon:** ${w}${N}${A}

${u.description}`,category:"allmnt",is_important:!1,image_url:((v=u.images)==null?void 0:v[0])||null}),h({vehicle_id:(a==null?void 0:a.id)||"",title:"",description:"",workshop:"",workshop_date:"",images:[]}),r()}catch(j){console.error("Error booking service:",j),alert("Kunde inte boka service")}l(!1)};return n.jsx(Xn,{open:e,onOpenChange:t,children:n.jsxs(Yn,{className:"max-w-md max-h-[90vh] overflow-y-auto",children:[n.jsx(er,{children:n.jsx(tr,{children:"Boka service"})}),n.jsxs("form",{onSubmit:b,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"vehicle",children:"Fordon *"}),n.jsxs(Nt,{value:u.vehicle_id,onValueChange:y=>h(v=>({...v,vehicle_id:y})),required:!0,children:[n.jsx(jt,{id:"vehicle",children:n.jsx(kt,{placeholder:"Vlj fordon"})}),n.jsx(wt,{children:s.map(y=>n.jsxs(Ne,{value:y.id,children:[y.registration_number," - ",y.make," ",y.model]},y.id))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"title",children:"Typ av service *"}),n.jsx(De,{id:"title",value:u.title,onChange:y=>h(v=>({...v,title:y.target.value})),placeholder:"t.ex. Vanlig service, Besiktning, Dckbyte",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"description",children:"Beskrivning *"}),n.jsx(Zn,{id:"description",value:u.description,onChange:y=>h(v=>({...v,description:y.target.value})),placeholder:"Beskriv vad som behver gras...",className:"min-h-[100px]",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"workshop",children:"Verkstad"}),n.jsx(De,{id:"workshop",value:u.workshop,onChange:y=>h(v=>({...v,workshop:y.target.value})),placeholder:"Namn p verkstad"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"workshop_date",children:"Datum fr service"}),n.jsx(De,{id:"workshop_date",type:"date",value:u.workshop_date,onChange:y=>h(v=>({...v,workshop_date:y.target.value}))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{children:"Bilder (valfritt)"}),n.jsxs("div",{className:"space-y-3",children:[u.images.length>0&&n.jsx("div",{className:"grid grid-cols-2 gap-2",children:u.images.map((y,v)=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:y,alt:`Bild ${v+1}`,className:"w-full h-24 object-cover rounded-lg"}),n.jsx(ye,{type:"button",variant:"destructive",size:"icon",className:"absolute top-1 right-1 h-6 w-6 rounded-full",onClick:()=>x(v),children:n.jsx(Ra,{className:"h-3 w-3"})})]},v))}),n.jsxs("label",{className:"flex flex-col items-center justify-center h-24 border-2 border-dashed border-slate-200 rounded-lg cursor-pointer hover:border-slate-300 hover:bg-slate-50 transition-colors",children:[n.jsx("input",{type:"file",accept:"image/*",onChange:g,className:"hidden",disabled:c}),c?n.jsx(Ot,{className:"w-6 h-6 text-slate-400 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(lu,{className:"w-6 h-6 text-slate-400 mb-1"}),n.jsx("span",{className:"text-xs text-slate-500",children:"Ladda upp bild"})]})]})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(ye,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Avbryt"}),n.jsx(ye,{type:"submit",disabled:o||!u.vehicle_id||!u.title||!u.description,className:"flex-1",children:o?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"w-4 h-4 mr-2 animate-spin"}),"Bokar..."]}):"Boka service"})]})]})]})})}function vTe({userEmail:e}){const{data:t=[],isLoading:r}=He({queryKey:["myFuelLogs",e],queryFn:async()=>(await oe.entities.FuelLog.filter({driver_email:e})).sort((o,l)=>new Date(l.date)-new Date(o.date)),enabled:!!e}),{data:s=[]}=He({queryKey:["vehicles"],queryFn:()=>oe.entities.Vehicle.list()}),a=i=>{const o=s.find(l=>l.id===i);return(o==null?void 0:o.registration_number)||"Oknt fordon"};return r?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-6",children:n.jsx("div",{className:"animate-pulse space-y-3",children:[1,2,3].map(i=>n.jsx("div",{className:"h-16 bg-slate-100 rounded-lg"},i))})})}):t.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-12 text-center",children:[n.jsx(gu,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Inga tankningar registrerade"})]})}):n.jsx("div",{className:"space-y-3",children:t.map(i=>n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(us,{className:"h-4 w-4 text-slate-500"}),n.jsx("span",{className:"font-medium text-slate-900",children:a(i.vehicle_id)})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[n.jsx(_r,{className:"h-3 w-3"}),n.jsx("span",{children:Ce(new Date(i.date),"d MMM yyyy",{locale:ut})})]}),n.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[n.jsx(tQ,{className:"h-3 w-3"}),n.jsxs("span",{children:[i.amount," kr"]})]})]}),n.jsxs("div",{className:"mt-2 flex gap-4 text-xs text-slate-500",children:[n.jsxs("span",{children:[i.liters," liter"]}),i.price_per_liter&&n.jsxs("span",{children:[i.price_per_liter.toFixed(2)," kr/l"]}),n.jsxs("span",{children:[i.mileage," km"]})]}),i.station&&n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:i.station})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-lg font-bold text-slate-900",children:[i.liters,"L"]}),i.consumption&&n.jsxs("div",{className:"text-xs text-slate-500",children:[i.consumption.toFixed(1)," l/100km"]})]})]})})},i.id))})}const yTe={skada:Kr,tekniskt_fel:vu,trafikincident:us,inbrott_stld:hj,annat:zv},k7={ny:{label:"Ny",color:"bg-blue-100 text-blue-800",icon:Vt},pgr:{label:"Pgr",color:"bg-amber-100 text-amber-800",icon:Vt},vntar_verkstad:{label:"Vntar verkstad",color:"bg-purple-100 text-purple-800",icon:Vt},vntar_delar:{label:"Vntar delar",color:"bg-orange-100 text-orange-800",icon:Vt},vntar_attest:{label:"Vntar attest",color:"bg-yellow-100 text-yellow-800",icon:Vt},klar:{label:"Klar",color:"bg-emerald-100 text-emerald-800",icon:ti},avbruten:{label:"Avbruten",color:"bg-slate-100 text-slate-800",icon:xh}},S7={kan_kras:{label:"Kan kras",color:"bg-emerald-100 text-emerald-700"},br_ej_kras:{label:"Br ej kras",color:"bg-amber-100 text-amber-700"},mste_stanna:{label:"Mste stanna",color:"bg-rose-100 text-rose-700"}};function bTe({userEmail:e}){const{data:t=[],isLoading:r}=He({queryKey:["myIssues",e],queryFn:async()=>await oe.entities.MaintenanceIssue.list("-created_date",100)}),{data:s=[]}=He({queryKey:["vehicles"],queryFn:()=>oe.entities.Vehicle.list()}),a=i=>{const o=s.find(l=>l.id===i);return o&&(o.registration_number||o.gps_device_id)||"Oknt fordon"};return r?n.jsx("div",{className:"space-y-3",children:[1,2,3].map(i=>n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"animate-pulse space-y-2",children:[n.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4"}),n.jsx("div",{className:"h-3 bg-slate-100 rounded w-1/2"})]})})},i))}):t.length===0?n.jsx(ce,{className:"border-0 shadow-sm",children:n.jsxs(he,{className:"p-8 text-center",children:[n.jsx(Kr,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Inga rapporterade renden"})]})}):n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"text-sm font-medium text-slate-700 mb-3",children:"Alla rapporteringar"}),t.map((i,o)=>{var h;const l=yTe[i.issue_type]||zv,c=k7[i.status]||k7.ny,d=c.icon,u=S7[i.severity]||S7.kan_kras;return n.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o*.05},children:n.jsx(ce,{className:"border-0 shadow-sm hover:shadow-md transition-shadow",children:n.jsxs(he,{className:"p-4",children:[n.jsx("div",{className:"flex items-start justify-between mb-3",children:n.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[n.jsx("div",{className:"p-2 bg-slate-100 rounded-lg",children:n.jsx(l,{className:"h-5 w-5 text-slate-700"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-semibold text-slate-900 mb-1",children:i.title}),n.jsx("p",{className:"text-sm text-slate-600 mb-2",children:a(i.vehicle_id)}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs(it,{className:c.color,children:[n.jsx(d,{className:"h-3 w-3 mr-1"}),c.label]}),n.jsx(it,{className:u.color,children:u.label})]})]})]})}),i.description&&n.jsx("p",{className:"text-sm text-slate-600 mb-3 pl-12",children:i.description}),n.jsxs("div",{className:"flex items-center justify-between pl-12 text-xs text-slate-500",children:[n.jsx("span",{children:i.created_date&&Ce(new Date(i.created_date),"d MMM yyyy",{locale:ut})}),i.priority&&n.jsx(it,{variant:"outline",className:"text-xs",children:i.priority==="akut"?" Akut":i.priority==="hg"?" Hg":i.priority==="normal"?" Normal":" Lg"})]}),((h=i.images)==null?void 0:h.length)>0&&n.jsxs("div",{className:"flex gap-2 mt-3 pl-12",children:[i.images.slice(0,3).map((g,x)=>n.jsx("img",{src:g,alt:`Bild ${x+1}`,className:"w-16 h-16 object-cover rounded-lg"},x)),i.images.length>3&&n.jsxs("div",{className:"w-16 h-16 bg-slate-100 rounded-lg flex items-center justify-center text-xs text-slate-500",children:["+",i.images.length-3]})]})]})})},i.id)})]})}function jTe(){const e=Mf(),[t,r]=P.useState(null),[s,a]=P.useState(null),[i,o]=P.useState(""),[l,c]=P.useState("alla"),[d,u]=P.useState(null),[h,g]=P.useState(null),[x,b]=P.useState("fordon"),y=$n();P.useEffect(()=>{(async()=>{try{const W=await oe.auth.me();if(r(W),W!=null&&W.email){const D=await oe.entities.Employee.filter({user_email:W.email});D.length>0&&a(D[0])}}catch{r(null),a(null)}})()},[]);const{data:v=[],isLoading:j}=He({queryKey:["vehicles"],queryFn:()=>oe.entities.Vehicle.list("registration_number",100)}),{data:w=[]}=He({queryKey:["employees"],queryFn:()=>oe.entities.Employee.list()}),{data:N}=He({queryKey:["gps-positions"],queryFn:async()=>{var U;try{const W=v.filter(z=>z.gps_device_id).map(z=>z.gps_device_id);if(W.length===0)return{};const D=await oe.functions.invoke("gpsTracking",{action:"getLastPosition",params:{deviceIds:W}}),R={};return(U=D.data)!=null&&U.records&&D.data.records.forEach(z=>{R[z.deviceid]=z}),R}catch(W){return console.error("Failed to fetch GPS positions:",W),{}}},enabled:v.length>0&&!!t,refetchInterval:3e4}),A=v.filter(U=>{var z,Z,se,J,Q;const W=((z=U.registration_number)==null?void 0:z.toLowerCase().includes(i.toLowerCase()))||((Z=U.make)==null?void 0:Z.toLowerCase().includes(i.toLowerCase()))||((se=U.model)==null?void 0:se.toLowerCase().includes(i.toLowerCase())),D=l==="alla"||U.category===l,R=(t==null?void 0:t.role)==="admin"||!(s!=null&&s.assigned_vehicles)||((J=U.assigned_employees)==null?void 0:J.includes(t==null?void 0:t.email))||((Q=s==null?void 0:s.assigned_vehicles)==null?void 0:Q.includes(U.id));return W&&D&&R}),C=U=>{u(U)},M=()=>{y.invalidateQueries({queryKey:["vehicles"]}),y.invalidateQueries({queryKey:["fuelLogs"]}),y.invalidateQueries({queryKey:["maintenanceIssues"]}),u(null),g(null)},I=v.filter(U=>U.assigned_driver===(t==null?void 0:t.email)),F=I.length===1?I[0]:null;return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white",children:[n.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-6 pb-24",children:[n.jsxs(tt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Fordon"}),n.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[v.length," fordon i registret"]})]}),n.jsx("div",{className:"flex gap-2",children:(t==null?void 0:t.role)==="admin"&&n.jsxs(n.Fragment,{children:[n.jsx(ye,{onClick:()=>e(Pn("VehicleReports")),variant:"outline",className:"rounded-full h-11 px-4 shadow-sm",children:"Rapporter"}),n.jsxs(ye,{onClick:()=>e(Pn("AddVehicle")),className:"rounded-full h-11 px-5 shadow-md hover:shadow-lg transition-all",children:[n.jsx(xr,{className:"w-4 h-4 mr-2"}),"Lgg till"]})]})})]}),n.jsx(Ls,{value:x,onValueChange:b,className:"mb-6",children:n.jsxs(As,{className:"grid w-full grid-cols-3 h-11",children:[n.jsxs(gt,{value:"fordon",className:"gap-2",children:[n.jsx(us,{className:"h-4 w-4"}),"Fordon"]}),n.jsxs(gt,{value:"tankningar",className:"gap-2",children:[n.jsx(gu,{className:"h-4 w-4"}),"Tanklog"]}),n.jsx(gt,{value:"rapporter",className:"gap-2",children:" Fordonsrapportering"})]})}),x==="fordon"&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-sm font-medium text-slate-700 mb-3",children:"Snabbtgrder"}),n.jsx(tTe,{onAction:C})]}),x==="fordon"&&n.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 mb-4 scrollbar-hide",children:["alla","personbil","ltt lastbil","lastbil","skpbil","specialfordon"].map(U=>n.jsx("button",{onClick:()=>c(U),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${l===U?"bg-slate-900 text-white":"bg-white text-slate-600 hover:bg-slate-100"}`,children:U==="alla"?"Alla":U.charAt(0).toUpperCase()+U.slice(1)},U))}),x==="fordon"&&n.jsxs("div",{className:"relative mb-4",children:[n.jsx(uo,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),n.jsx(De,{placeholder:"Sk fordon...",value:i,onChange:U=>o(U.target.value),className:"pl-11 h-12 rounded-2xl border-0 bg-white shadow-sm focus-visible:ring-2 focus-visible:ring-slate-200"})]})]}),x==="tankningar"?n.jsx(vTe,{userEmail:t==null?void 0:t.email}):x==="rapporter"?n.jsx(bTe,{userEmail:t==null?void 0:t.email}):n.jsx("div",{className:"space-y-3",children:n.jsx(_a,{mode:"popLayout",children:j?n.jsx("div",{className:"space-y-3",children:[1,2,3].map(U=>n.jsx("div",{className:"bg-white rounded-2xl h-32 animate-pulse"},U))}):A.length===0?n.jsxs(tt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-16",children:[n.jsx(us,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Inga fordon hittades"})]}):A.map((U,W)=>n.jsx(wr,{to:Pn("VehicleDetails")+`?id=${U.id}`,children:n.jsx(JCe,{vehicle:U,employees:w,index:W,gpsStatus:U.gps_device_id&&(N!=null&&N[U.gps_device_id])?{online:N[U.gps_device_id].online===1}:null})},U.id))})})]}),n.jsx(nTe,{open:d==="fuel",onClose:()=>u(null),onSuccess:M,vehicles:v,selectedVehicle:h||F,userEmail:t==null?void 0:t.email}),n.jsx(xTe,{open:d==="incident",onClose:()=>u(null),onSuccess:M,vehicles:v,selectedVehicle:h||F,userEmail:t==null?void 0:t.email}),n.jsx(gTe,{open:d==="service",onClose:()=>u(null),onSuccess:M,vehicles:v,selectedVehicle:h||F,userEmail:t==null?void 0:t.email})]})}const wTe=fA,_Te=Xz,NTe=mA,KG=P.forwardRef(({className:e,...t},r)=>n.jsx(ty,{className:Yt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));KG.displayName=ty.displayName;const kTe=ig("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),GG=P.forwardRef(({side:e="right",className:t,children:r,...s},a)=>n.jsxs(NTe,{children:[n.jsx(KG,{}),n.jsxs(ny,{ref:a,className:Yt(kTe({side:e}),t),...s,children:[n.jsxs(Ij,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[n.jsx(Ra,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]}),r]})]}));GG.displayName=ny.displayName;const ZG=({className:e,...t})=>n.jsx("div",{className:Yt("flex flex-col space-y-2 text-center sm:text-left",e),...t});ZG.displayName="SheetHeader";const YG=P.forwardRef(({className:e,...t},r)=>n.jsx(ry,{ref:r,className:Yt("text-lg font-semibold text-foreground",e),...t}));YG.displayName=ry.displayName;const STe=P.forwardRef(({className:e,...t},r)=>n.jsx(sy,{ref:r,className:Yt("text-sm text-muted-foreground",e),...t}));STe.displayName=sy.displayName;const PTe={news:{icon:cs,color:"text-amber-600",bgColor:"bg-amber-50",borderColor:"border-amber-200"},leave:{icon:_r,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"},vehicle:{icon:Kr,color:"text-rose-600",bgColor:"bg-rose-50",borderColor:"border-rose-200"},system:{icon:cs,color:"text-indigo-600",bgColor:"bg-indigo-50",borderColor:"border-indigo-200"},approval_needed:{icon:cs,color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200"},approved:{icon:cs,color:"text-emerald-600",bgColor:"bg-emerald-50",borderColor:"border-emerald-200"},rejected:{icon:cs,color:"text-rose-600",bgColor:"bg-rose-50",borderColor:"border-rose-200"},time_correction_needed:{icon:cs,color:"text-amber-600",bgColor:"bg-amber-50",borderColor:"border-amber-200"},chat:{icon:Vv,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"}};function ATe({notification:e,idx:t,onDelete:r,onMarkAsRead:s,onNavigate:a}){var g,x,b;const i=PTe[e.type],o=i.icon,l=zq(0),c=x6(l,[-100,0],[1,0]),d=x6(l,[0,100],[0,1]),u=Nce(),h=async(y,v)=>{var j;v.offset.x<-80?(await u.start({opacity:0,x:-300,transition:{duration:.2}}),r==null||r(e.id)):v.offset.x>80&&!((j=e.data)!=null&&j.is_read)?(await u.start({opacity:0,x:300,transition:{duration:.2}}),s==null||s(e.id)):l.set(0)};return n.jsxs(tt.div,{initial:{opacity:0,x:20},animate:u,transition:{delay:t*.05},className:"relative",children:[n.jsx(tt.div,{className:"absolute inset-y-0 right-0 flex items-center justify-end pr-4 bg-red-500 rounded-xl",style:{opacity:c},children:n.jsx(bi,{className:"h-5 w-5 text-white"})}),!((g=e.data)!=null&&g.is_read)&&n.jsx(tt.div,{className:"absolute inset-y-0 left-0 flex items-center justify-start pl-4 bg-green-500 rounded-xl",style:{opacity:d},children:n.jsx(Rm,{className:"h-5 w-5 text-white"})}),n.jsx(tt.div,{drag:"x",dragConstraints:{left:-100,right:(x=e.data)!=null&&x.is_read?0:100},dragElastic:.2,style:{x:l},onDragEnd:h,children:n.jsx(ce,{className:`border-l-4 ${i.borderColor} cursor-pointer hover:shadow-md transition-shadow`,onClick:()=>a(e),children:n.jsx(he,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`p-2 rounded-lg ${i.bgColor} flex-shrink-0`,children:n.jsx(o,{className:`h-5 w-5 ${i.color}`})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[n.jsx("h4",{className:"font-semibold text-slate-900 text-sm",children:e.title}),e.urgent&&n.jsx(it,{variant:"destructive",className:"text-xs",children:"AKUT"})]}),n.jsx("p",{className:"text-sm text-slate-600 line-clamp-2 mb-2",children:e.description}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-xs text-slate-400",children:Ce(new Date(e.date+"Z"),"d MMM 'kl' HH:mm",{locale:ut})}),!((b=e.data)!=null&&b.is_read)&&n.jsx(it,{className:"bg-blue-500 text-white text-xs px-2 py-0.5",children:"NY"})]})]}),n.jsx(Ph,{className:"h-5 w-5 text-slate-400 flex-shrink-0"})]})})})})]})}function CTe({notifications:e,onClose:t,onDelete:r,onMarkAsRead:s}){const a=Mf(),i=o=>{o.type==="news"?a(Pn("Home")):o.type==="leave"?a(Pn("Leave")):o.type==="vehicle"?a(Pn("VehicleReports")):o.type==="chat"&&a(Pn("Chat")),t()};return e.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center h-full py-12",children:[n.jsx(cs,{className:"h-16 w-16 text-slate-300 mb-4"}),n.jsx("p",{className:"text-slate-500 text-center",children:"Inga notifikationer"})]}):n.jsx("div",{className:"mt-6 space-y-2 overflow-y-auto max-h-[calc(100vh-120px)]",children:e.map((o,l)=>n.jsx(ATe,{notification:o,idx:l,onDelete:r,onMarkAsRead:s,onNavigate:i},o.id))})}function TTe({user:e}){const[t,r]=P.useState(!1),s=$n(),{data:a=[],refetch:i}=He({queryKey:["notifications",e==null?void 0:e.email],queryFn:async()=>{if(!e)return[];const h=[];(await oe.entities.Notification.filter({recipient_email:e.email},"-created_date",100)).forEach(A=>{h.push({id:`notification-${A.id}`,type:A.type==="system"?"system":A.type,title:A.title,description:A.message,date:A.created_date,urgent:A.priority==="urgent"||A.priority==="high",data:A})});const x=new Date;x.setDate(x.getDate()-7),(await oe.entities.NewsPost.filter({is_important:!0},"-created_date",10)).forEach(A=>{new Date(A.created_date)>x&&h.push({id:`news-${A.id}`,type:"news",title:"Viktigt meddelande",description:A.title,date:A.created_date,urgent:!0,data:A})}),e.role==="admin"&&(await oe.entities.LeaveRequest.filter({status:"pending"},"-created_date",20)).forEach(C=>{h.push({id:`leave-${C.id}`,type:"leave",title:"Ledighetsanskan",description:`${C.employee_email} vntar p godknnande`,date:C.created_date,urgent:!1,data:C})}),(await oe.entities.Notification.filter({recipient_email:e.email,type:"chat",is_read:!1},"-created_date",20)).forEach(A=>{h.push({id:`chat-${A.id}`,type:"chat",title:A.title,description:A.message,date:A.created_date,urgent:!1,data:A})}),(await oe.entities.MaintenanceIssue.filter({status:"ny",severity:"mste_stanna"},"-created_date",10)).forEach(A=>{h.push({id:`issue-${A.id}`,type:"vehicle",title:"AKUT: Fordonsrende",description:`${A.registration_number} - ${A.title}`,date:A.created_date,urgent:!0,data:A})});const j=await oe.entities.Vehicle.list(),w=new Date,N=new Date(w.getTime()+720*60*60*1e3);return j.forEach(A=>{if(A.next_inspection_date){const C=new Date(A.next_inspection_date);C>w&&C<N&&h.push({id:`inspection-${A.id}`,type:"vehicle",title:"Besiktning nrmar sig",description:`${A.registration_number} behver besiktas`,date:w.toISOString(),urgent:!1,data:A})}if(A.next_service_date){const C=new Date(A.next_service_date);C>w&&C<N&&h.push({id:`service-${A.id}`,type:"vehicle",title:"Service nrmar sig",description:`${A.registration_number} behver service`,date:w.toISOString(),urgent:!1,data:A})}}),h.sort((A,C)=>new Date(C.date)-new Date(A.date))},enabled:!!e,refetchInterval:3e4,staleTime:2e4}),o=Xt({mutationFn:async h=>{const g=h.replace("notification-","");return oe.entities.Notification.delete(g)},onSuccess:()=>{s.invalidateQueries({queryKey:["notifications",e==null?void 0:e.email]})}}),l=Xt({mutationFn:async h=>{const g=h.replace("notification-","");return oe.entities.Notification.update(g,{is_read:!0})},onSuccess:()=>{s.invalidateQueries({queryKey:["notifications",e==null?void 0:e.email]})}}),c=h=>{h.startsWith("notification-")&&o.mutate(h)},d=h=>{h.startsWith("notification-")&&(l.mutate(h),setTimeout(()=>{const g=a.filter(x=>{var b;return!((b=x.data)!=null&&b.is_read)&&x.id!==h}).length;"setAppBadge"in navigator&&(g>0?navigator.setAppBadge(g):navigator.clearAppBadge())},100))},u=a.filter(h=>{var g;return!((g=h.data)!=null&&g.is_read)}).length;return P.useEffect(()=>{t&&i()},[t,i]),P.useEffect(()=>{"setAppBadge"in navigator&&(u>0?navigator.setAppBadge(u):navigator.clearAppBadge())},[u]),n.jsxs(wTe,{open:t,onOpenChange:r,children:[n.jsx(_Te,{asChild:!0,children:n.jsxs("button",{className:"relative rounded-full hover:bg-slate-100 active:bg-slate-200 transition-colors p-3 -m-1 touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:[n.jsx(cs,{className:"h-6 w-6 text-slate-700"}),u>0&&n.jsx("span",{className:"absolute top-0 right-0 h-5 w-5 flex items-center justify-center rounded-full bg-rose-500 text-white text-xs font-semibold shadow-sm",children:u>9?"9+":u})]})}),n.jsxs(GG,{side:"right",className:"w-full sm:max-w-md",children:[n.jsx(ZG,{children:n.jsx(YG,{children:"Notifikationer"})}),n.jsx(CTe,{notifications:a,onClose:()=>r(!1),onDelete:c,onMarkAsRead:d})]})]})}function ETe(){return P.useEffect(()=>{if("serviceWorker"in navigator){const e=`
        self.addEventListener('push', event => {
          if (!event.data) return;
          try {
            const data = event.data.json();
            const options = {
              body: data.body || 'Du har ett nytt meddelande',
              icon: '/icon-192.png',
              badge: '/badge-72.png',
              tag: data.tag || 'notification',
              requireInteraction: data.requireInteraction || false
            };
            if (data.image) options.image = data.image;
            event.waitUntil(self.registration.showNotification(data.title || 'Meddelande', options));
          } catch (err) {
            console.error('Push event error:', err);
          }
        });
        
        self.addEventListener('notificationclick', event => {
          event.notification.close();
          event.waitUntil(clients.matchAll({ type: 'window' }).then(list => {
            for (let client of list) {
              if (client.url === '/' && 'focus' in client) return client.focus();
            }
            if (clients.openWindow) return clients.openWindow('/');
          }));
        });
      `,t=new Blob([e],{type:"application/javascript"}),r=URL.createObjectURL(t);navigator.serviceWorker.register(r).catch(s=>{console.error("Service Worker registration failed:",s)})}},[]),null}const XG=[{name:"Home",label:"Hem",icon:vX},{name:"TimeTracking",label:"Tid",icon:Vt},{name:"Vehicles",label:"Fordon",icon:us},{name:"DrivingJournal",label:"Krjournal",icon:Jr},{name:"Manuals",label:"Manualer",icon:gm},{name:"Chat",label:"Chat",icon:Vv},{name:"Profile",label:"Profil",icon:bd}],OTe=[...XG,{name:"Projects",label:"Projekt",icon:$0},{name:"Admin",label:"Admin",icon:$0}];function MTe({children:e,currentPageName:t}){const[r,s]=P.useState(null),[a,i]=P.useState(null);P.useEffect(()=>{(async()=>{try{const h=await oe.auth.me();if(s(h),h!=null&&h.email){const g=await oe.entities.Employee.filter({user_email:h.email});g.length>0&&i(g[0])}}catch{s(null),i(null)}})()},[]);const o=(r==null?void 0:r.role)==="admin",l=u=>o?!0:a!=null&&a.assigned_features?a.assigned_features.includes(u):!1,d=(o?OTe:XG).filter(h=>{const x={TimeTracking:"TimeTracking",Vehicles:"Vehicles",DrivingJournal:"GPS",Manuals:"Manuals",Chat:"Chat",Admin:"Admin"}[h.name];return x?l(x):!0});return n.jsxs("div",{className:"min-h-screen bg-slate-50",children:[n.jsx(ETe,{}),n.jsx("style",{children:`
        :root {
          --color-primary: 15 23 42;
          --color-accent: 99 102 241;
        }
        html, body {
          width: 100%;
          height: 100%;
          -webkit-user-select: none;
          user-select: none;
          -webkit-user-scalable: no;
          -webkit-touch-callout: none;
        }
        @supports(padding: max(0px)) {
          body {
            padding-left: max(12px, env(safe-area-inset-left));
            padding-right: max(12px, env(safe-area-inset-right));
          }
        }
      `}),n.jsx("div",{className:"fixed top-3 right-3 z-50",children:n.jsx(TTe,{user:r})}),n.jsx("main",{className:"pb-20",children:e}),n.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-lg border-t border-slate-100 safe-area-pb z-50",children:[n.jsx("style",{children:`
          .nav-scroll::-webkit-scrollbar {
            height: 4px;
          }
          .nav-scroll::-webkit-scrollbar-track {
            background: transparent;
          }
          .nav-scroll::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 2px;
          }
          .nav-scroll::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
          }
        `}),n.jsx("div",{className:"w-full overflow-x-auto nav-scroll",children:n.jsx("div",{className:"flex items-center justify-start md:justify-around py-2 px-1 min-w-min md:min-w-0 md:max-w-2xl md:mx-auto gap-1",children:d.map(({name:u,label:h,icon:g})=>{const x=t===u;return n.jsxs(wr,{to:Pn(u),className:"relative flex flex-col items-center py-1.5 px-3 min-w-[56px] flex-shrink-0",children:[n.jsxs("div",{className:`relative p-2 rounded-xl transition-all duration-200 ${x?"bg-slate-900":"hover:bg-slate-100"}`,children:[n.jsx(g,{className:`h-5 w-5 transition-colors ${x?"text-white":"text-slate-500"}`}),x&&n.jsx(tt.div,{layoutId:"nav-indicator",className:"absolute inset-0 bg-slate-900 rounded-xl -z-10",transition:{type:"spring",stiffness:500,damping:35}})]}),n.jsx("span",{className:`text-[10px] mt-1 font-medium transition-colors whitespace-nowrap ${x?"text-slate-900":"text-slate-400"}`,children:h})]},u)})})})]})]})}const LTe={AddVehicle:kce,Admin:J4e,AdminTimeSystem:ePe,AllVehicles:tPe,Chat:uPe,Documentation:hPe,Documents:pPe,DrivingJournal:$Pe,DrivingJournalReports:KPe,EditVehicle:GPe,EmployeeDetails:e3e,Employees:a3e,GPS:o3e,GeofenceSettings:c3e,Home:w3e,JournalDashboard:_3e,JournalPolicySettings:k3e,Leave:G3e,ManagerDashboard:Q3e,ManualDetail:sAe,Manuals:cAe,MyOnboarding:fAe,NotificationSettings:xAe,OnboardingTemplates:yAe,Profile:sCe,ProjectReports:aCe,Projects:OCe,Reports:MCe,Schedule:ICe,Team:$Ce,TimeTracking:HCe,VehicleDetails:KCe,VehicleReports:GCe,VehicleTracking:ZCe,Vehicles:jTe},QG={mainPage:"Home",Pages:LTe,Layout:MTe};function DTe(){const e=hg(),{isAuthenticated:t}=f3(),{Pages:r,mainPage:s}=QG,a=s;return P.useEffect(()=>{const i=e.pathname;let o;if(i==="/"||i==="")o=a;else{const l=i.replace(/^\//,"").split("/")[0];o=Object.keys(r).find(u=>u.toLowerCase()===l.toLowerCase())||null}t&&o&&oe.appLogs.logUserInApp(o).catch(()=>{})},[e,t,r,a]),null}function ITe({}){var a;const t=hg().pathname.substring(1),{data:r,isFetched:s}=He({queryKey:["user"],queryFn:async()=>{try{return{user:await oe.auth.me(),isAuthenticated:!0}}catch{return{user:null,isAuthenticated:!1}}}});return n.jsx("div",{className:"min-h-screen flex items-center justify-center p-6 bg-slate-50",children:n.jsx("div",{className:"max-w-md w-full",children:n.jsxs("div",{className:"text-center space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("h1",{className:"text-7xl font-light text-slate-300",children:"404"}),n.jsx("div",{className:"h-0.5 w-16 bg-slate-200 mx-auto"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("h2",{className:"text-2xl font-medium text-slate-800",children:"Page Not Found"}),n.jsxs("p",{className:"text-slate-600 leading-relaxed",children:["The page ",n.jsxs("span",{className:"font-medium text-slate-700",children:['"',t,'"']})," could not be found in this application."]})]}),s&&r.isAuthenticated&&((a=r.user)==null?void 0:a.role)==="admin"&&n.jsx("div",{className:"mt-8 p-4 bg-slate-100 rounded-lg border border-slate-200",children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-orange-100 flex items-center justify-center mt-0.5",children:n.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-400"})}),n.jsxs("div",{className:"text-left space-y-1",children:[n.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Admin Note"}),n.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:"This could mean that the AI hasn't implemented this page yet. Ask it to implement it in the chat."})]})]})}),n.jsx("div",{className:"pt-6",children:n.jsxs("button",{onClick:()=>window.location.href="/",className:"inline-flex items-center px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 hover:border-slate-300 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Go Home"]})})]})})})}const RTe=()=>n.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-white to-slate-50",children:n.jsx("div",{className:"max-w-md w-full p-8 bg-white rounded-lg shadow-lg border border-slate-100",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 mb-6 rounded-full bg-orange-100",children:n.jsx("svg",{className:"w-8 h-8 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-4",children:"Access Restricted"}),n.jsx("p",{className:"text-slate-600 mb-8",children:"You are not registered to use this application. Please contact the app administrator to request access."}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-md text-sm text-slate-600",children:[n.jsx("p",{children:"If you believe this is an error, you can:"}),n.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[n.jsx("li",{children:"Verify you are logged in with the correct account"}),n.jsx("li",{children:"Contact the app administrator for access"}),n.jsx("li",{children:"Try logging out and back in again"})]})]})]})})});function FTe(){const[e,t]=P.useState(""),[r,s]=P.useState(""),[a,i]=P.useState(!1),[o,l]=P.useState(""),{login:c}=f3(),d=Mf(),u=async g=>{g.preventDefault(),i(!0),l("");try{await c(e,r),d("/")}catch{l("Inloggningen misslyckades. Kontrollera dina uppgifter.")}finally{i(!1)}},h=async()=>{i(!0),l("");try{await c("demo@example.com","demo"),d("/")}catch{l("Ngot gick fel. Frsk igen.")}finally{i(!1)}};return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:n.jsxs(ce,{className:"w-full max-w-md",children:[n.jsxs(At,{className:"text-center",children:[n.jsx("div",{className:"mx-auto w-16 h-16 bg-slate-900 rounded-2xl flex items-center justify-center mb-4",children:n.jsx(Fr,{className:"w-8 h-8 text-white"})}),n.jsx(Ct,{className:"text-2xl",children:"Personalhantering"}),n.jsx(cd,{children:"Logga in fr att fortstta"})]}),n.jsxs(he,{children:[n.jsxs("form",{onSubmit:u,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"email",children:"E-post"}),n.jsxs("div",{className:"relative",children:[n.jsx(_c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),n.jsx(De,{id:"email",type:"email",placeholder:"namn@foretag.se",value:e,onChange:g=>t(g.target.value),className:"pl-10",required:!0})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ve,{htmlFor:"password",children:"Lsenord"}),n.jsxs("div",{className:"relative",children:[n.jsx(n3,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),n.jsx(De,{id:"password",type:"password",placeholder:"",value:r,onChange:g=>s(g.target.value),className:"pl-10",required:!0})]})]}),o&&n.jsx("div",{className:"text-sm text-red-500 bg-red-50 p-3 rounded-lg",children:o}),n.jsx(ye,{type:"submit",className:"w-full bg-slate-900 hover:bg-slate-800",disabled:a,children:a?"Loggar in...":"Logga in"})]}),n.jsxs("div",{className:"mt-6",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("span",{className:"w-full border-t"})}),n.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:n.jsx("span",{className:"bg-white px-2 text-slate-500",children:"Eller"})})]}),n.jsx(ye,{type:"button",variant:"outline",className:"w-full mt-4",onClick:h,disabled:a,children:"Testa med demo-konto"}),n.jsx("p",{className:"text-xs text-center text-slate-500 mt-4",children:"Demo-kontot ger dig tillgng till alla funktioner med testdata."})]})]})]})})}const{Pages:JG,Layout:P7,mainPage:$Te}=QG,eZ=$Te,BTe=JG[eZ],A7=({children:e,currentPageName:t})=>P7?n.jsx(P7,{currentPageName:t,children:e}):n.jsx(n.Fragment,{children:e}),qTe=()=>{const{isLoadingAuth:e,isLoadingPublicSettings:t,authError:r,isAuthenticated:s}=f3();return t||e?n.jsx("div",{className:"fixed inset-0 flex items-center justify-center",children:n.jsx("div",{className:"w-8 h-8 border-4 border-slate-200 border-t-slate-800 rounded-full animate-spin"})}):r&&r.type==="user_not_registered"?n.jsx(RTe,{}):s?n.jsxs(AE,{children:[n.jsx(x0,{path:"/",element:n.jsx(A7,{currentPageName:eZ,children:n.jsx(BTe,{})})}),Object.entries(JG).map(([a,i])=>n.jsx(x0,{path:`/${a}`,element:n.jsx(A7,{currentPageName:a,children:n.jsx(i,{})})},a)),n.jsx(x0,{path:"*",element:n.jsx(ITe,{})})]}):n.jsx(AE,{children:n.jsx(x0,{path:"*",element:n.jsx(FTe,{})})})};function zTe(){return n.jsx(kte,{children:n.jsxs(HJ,{client:ree,children:[n.jsxs(tte,{children:[n.jsx(DTe,{}),n.jsx(qTe,{})]}),n.jsx(jJ,{})]})})}zZ.createRoot(document.getElementById("root")).render(n.jsx(zTe,{}));export{Qr as _,Ky as c,Dr as g};
